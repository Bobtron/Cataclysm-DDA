<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: spell Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classspell-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">spell Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="magic_8h_source.html">magic.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04c24cc9ecaf5416e147dfa8b4ca3f41"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a04c24cc9ecaf5416e147dfa8b4ca3f41">spell</a> ()=default</td></tr>
<tr class="separator:a04c24cc9ecaf5416e147dfa8b4ca3f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0312f96464a4cd8f9104c66e910cc026"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0312f96464a4cd8f9104c66e910cc026">spell</a> (<a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> sp, int <a class="el" href="classspell.html#a1758e56413516ae56a4ee161e998c338">xp</a>=0, int level_adjustment=0)</td></tr>
<tr class="separator:a0312f96464a4cd8f9104c66e910cc026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e8773eaa3a6236182746cbc3930d07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a59e8773eaa3a6236182746cbc3930d07">set_message</a> (const <a class="el" href="classtranslation.html">translation</a> &amp;msg)</td></tr>
<tr class="separator:a59e8773eaa3a6236182746cbc3930d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4907623e7faca6b194e24543b1862d1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4907623e7faca6b194e24543b1862d1e">exp_to_next_level</a> () const</td></tr>
<tr class="separator:a4907623e7faca6b194e24543b1862d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231a9d535b9ea869e90963f7e2351c66"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a231a9d535b9ea869e90963f7e2351c66">exp_progress</a> () const</td></tr>
<tr class="separator:a231a9d535b9ea869e90963f7e2351c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1758e56413516ae56a4ee161e998c338"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a1758e56413516ae56a4ee161e998c338">xp</a> () const</td></tr>
<tr class="separator:a1758e56413516ae56a4ee161e998c338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526d158b9396a81cb13186db31c53ae1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a526d158b9396a81cb13186db31c53ae1">gain_exp</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, int nxp)</td></tr>
<tr class="separator:a526d158b9396a81cb13186db31c53ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add2c742d2996e6c81ab5b70b081544d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#add2c742d2996e6c81ab5b70b081544d9">set_exp</a> (int nxp)</td></tr>
<tr class="separator:add2c742d2996e6c81ab5b70b081544d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb7b86747726cfee704cd4a91009b93c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#adb7b86747726cfee704cd4a91009b93c">casting_exp</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:adb7b86747726cfee704cd4a91009b93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a99f3d7def292a3e9af0b869e51103"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad7a99f3d7def292a3e9af0b869e51103">exp_modifier</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:ad7a99f3d7def292a3e9af0b869e51103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682544edebcf289a96fc4fcd812890c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a682544edebcf289a96fc4fcd812890c8">gain_level</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy)</td></tr>
<tr class="separator:a682544edebcf289a96fc4fcd812890c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad2e0f8de920dad808a184a5760e295"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a7ad2e0f8de920dad808a184a5760e295">gain_levels</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, int gains)</td></tr>
<tr class="separator:a7ad2e0f8de920dad808a184a5760e295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f5450a0454bf54ca779f62fada69b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a21f5450a0454bf54ca779f62fada69b6">set_level</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, int nlevel)</td></tr>
<tr class="separator:a21f5450a0454bf54ca779f62fada69b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0702e64e2757dd74767f00f2e4cd159"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ac0702e64e2757dd74767f00f2e4cd159">is_max_level</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ac0702e64e2757dd74767f00f2e4cd159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c41a03e09eb196bd6c59ff29f3f61c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a8c41a03e09eb196bd6c59ff29f3f61c1">get_max_level</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a8c41a03e09eb196bd6c59ff29f3f61c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb00e3b3567c2b124b847c07fcd4555"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#abeb00e3b3567c2b124b847c07fcd4555">get_temp_level_adjustment</a> () const</td></tr>
<tr class="separator:abeb00e3b3567c2b124b847c07fcd4555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a658a5172a4c77d28ef4aefdcc474301c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a658a5172a4c77d28ef4aefdcc474301c">set_temp_level_adjustment</a> (int adjustment)</td></tr>
<tr class="separator:a658a5172a4c77d28ef4aefdcc474301c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaebea12d6d996597d17c65e3b5445807"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aaebea12d6d996597d17c65e3b5445807">set_temp_adjustment</a> (const std::string &amp;target_property, float adjustment)</td></tr>
<tr class="separator:aaebea12d6d996597d17c65e3b5445807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c8a866c5a9199636ed5601844f2399"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ae3c8a866c5a9199636ed5601844f2399">clear_temp_adjustments</a> ()</td></tr>
<tr class="separator:ae3c8a866c5a9199636ed5601844f2399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26955ff4600c3a2855e6fe02dc0d216"><td class="memItemLeft" align="right" valign="top"><a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9c">spell_shape</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ab26955ff4600c3a2855e6fe02dc0d216">shape</a> () const</td></tr>
<tr class="separator:ab26955ff4600c3a2855e6fe02dc0d216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a0b1eb365a5b17870ea15171a60ee14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a9a0b1eb365a5b17870ea15171a60ee14">field_intensity</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a9a0b1eb365a5b17870ea15171a60ee14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad572a7c2376afa1bd84ca8ab9603ed2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ad572a7c2376afa1bd84ca8ab9603ed2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a5f0a79a86833afef958fe1627d198"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a35a5f0a79a86833afef958fe1627d198">accuracy</a> (<a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a35a5f0a79a86833afef958fe1627d198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf83b0a24bf04d172819c3c82317a7c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aaf83b0a24bf04d172819c3c82317a7c6">damage_dot</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:aaf83b0a24bf04d172819c3c82317a7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134d0709b0c5bc67e43a56ff6165854a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdamage__over__time__data.html">damage_over_time_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a134d0709b0c5bc67e43a56ff6165854a">damage_over_time</a> (const std::vector&lt; <a class="el" href="bodypart_8h.html#ab5d79e6a6fc7e853dcd7e5fdc9cbe34c">bodypart_str_id</a> &gt; &amp;bps, const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a134d0709b0c5bc67e43a56ff6165854a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49cd3d61f5381025968b3f5b5109aa3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdealt__damage__instance.html">dealt_damage_instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a49cd3d61f5381025968b3f5b5109aa3b">get_dealt_damage_instance</a> (<a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a49cd3d61f5381025968b3f5b5109aa3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e44ba50463fee4395980d76c6e6bb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdealt__projectile__attack.html">dealt_projectile_attack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a19e44ba50463fee4395980d76c6e6bb6">get_projectile_attack</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, <a class="el" href="classCreature.html">Creature</a> &amp;hit_critter, <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a19e44ba50463fee4395980d76c6e6bb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1585ff21871ebf0e2274b4e98582360"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdamage__instance.html">damage_instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ae1585ff21871ebf0e2274b4e98582360">get_damage_instance</a> (<a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ae1585ff21871ebf0e2274b4e98582360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039ec3d7b031caad827a8b7aa7e0acea"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a039ec3d7b031caad827a8b7aa7e0acea">dps</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;caster, const <a class="el" href="classCreature.html">Creature</a> &amp;target) const</td></tr>
<tr class="separator:a039ec3d7b031caad827a8b7aa7e0acea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25db0a720eff61873d779a5db0428b16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a25db0a720eff61873d779a5db0428b16">select_target</a> (<a class="el" href="classCreature.html">Creature</a> *source)</td></tr>
<tr class="separator:a25db0a720eff61873d779a5db0428b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f22c8f5a1730ab6651342e9becbfdc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">aoe</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a63f22c8f5a1730ab6651342e9becbfdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10720b544d7c92b9606008819cc2896e"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a10720b544d7c92b9606008819cc2896e">effect_area</a> (const <a class="el" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a> &amp;params, const <a class="el" href="structtripoint.html">tripoint</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target) const</td></tr>
<tr class="separator:a10720b544d7c92b9606008819cc2896e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9c6da52fa3253933f9b011f5c0412b"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aab9c6da52fa3253933f9b011f5c0412b">effect_area</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:aab9c6da52fa3253933f9b011f5c0412b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00175ffc465d406a7ec24331c6c55f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ab00175ffc465d406a7ec24331c6c55f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9917a8122ab05a8c6a88da3d699546b3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a9917a8122ab05a8c6a88da3d699546b3">targetable_locations</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;source) const</td></tr>
<tr class="memdesc:a9917a8122ab05a8c6a88da3d699546b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">all of the tripoints the spell can be cast at.  <a href="classspell.html#a9917a8122ab05a8c6a88da3d699546b3">More...</a><br /></td></tr>
<tr class="separator:a9917a8122ab05a8c6a88da3d699546b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddf2ffd71f86bc2ca2ebca259071924"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a4ddf2ffd71f86bc2ca2ebca259071924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a67307def07ddc6d2e2c134d21c245f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">duration</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a3a67307def07ddc6d2e2c134d21c245f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0fe357d9c04c94f9c6329c89d683dae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad0fe357d9c04c94f9c6329c89d683dae">duration_turns</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ad0fe357d9c04c94f9c6329c89d683dae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3a6b9f7ba0c643ee59b8389b9f56ec"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ada3a6b9f7ba0c643ee59b8389b9f56ec">spell_fail</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:ada3a6b9f7ba0c643ee59b8389b9f56ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe11a0854d38e947a10d02e29f7fd84c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#afe11a0854d38e947a10d02e29f7fd84c">colorized_fail_percent</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:afe11a0854d38e947a10d02e29f7fd84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4feeb99d5b76aac0263c4730be9882d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, bool ignore_encumb=false) const</td></tr>
<tr class="separator:a4feeb99d5b76aac0263c4730be9882d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69dedf22c42ebc9fb41f8f22102630d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrequirement__data.html">requirement_data</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#af69dedf22c42ebc9fb41f8f22102630d">components</a> () const</td></tr>
<tr class="separator:af69dedf22c42ebc9fb41f8f22102630d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8662455c101a353ea64618a49908a4b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad8662455c101a353ea64618a49908a4b">has_components</a> () const</td></tr>
<tr class="separator:ad8662455c101a353ea64618a49908a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2631d5fc9da8a5ec04f7c3757e6c9f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ab2631d5fc9da8a5ec04f7c3757e6c9f5">can_cast</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:ab2631d5fc9da8a5ec04f7c3757e6c9f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd3c2989310be69c17be190328586c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4cd3c2989310be69c17be190328586c0">can_learn</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a4cd3c2989310be69c17be190328586c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7316c4f276b359eb3c4d5fb418d7a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0f7316c4f276b359eb3c4d5fb418d7a3">is_valid</a> () const</td></tr>
<tr class="separator:a0f7316c4f276b359eb3c4d5fb418d7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f76f8894099d3d7fd0f54f765a0991e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a6f76f8894099d3d7fd0f54f765a0991e">bp_is_affected</a> (const <a class="el" href="bodypart_8h.html#ab5d79e6a6fc7e853dcd7e5fdc9cbe34c">bodypart_str_id</a> &amp;<a class="el" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>) const</td></tr>
<tr class="separator:a6f76f8894099d3d7fd0f54f765a0991e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa609bae14a69c0987d562a2a9f8a1268"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a> (const <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197b">spell_flag</a> &amp;flag) const</td></tr>
<tr class="separator:aa609bae14a69c0987d562a2a9f8a1268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3543a6accbf016c6478c41d31dced7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aaa3543a6accbf016c6478c41d31dced7">has_flag</a> (const std::string &amp;flag) const</td></tr>
<tr class="separator:aaa3543a6accbf016c6478c41d31dced7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fabcf473532ae18478ca8c826543ebe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">no_hands</a> () const</td></tr>
<tr class="separator:a8fabcf473532ae18478ca8c826543ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1800276357c17c73c885f051c7edf1d7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a1800276357c17c73c885f051c7edf1d7">is_spell_class</a> (const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;mid) const</td></tr>
<tr class="separator:a1800276357c17c73c885f051c7edf1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bee370b3c3d69be45411856fb2f333f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4bee370b3c3d69be45411856fb2f333f">in_aoe</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a4bee370b3c3d69be45411856fb2f333f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd925009e816157e71f96cddd9c55db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0fd925009e816157e71f96cddd9c55db">casting_time_encumbered</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a0fd925009e816157e71f96cddd9c55db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6438c213ded75c5d4ea791424653e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a3b6438c213ded75c5d4ea791424653e8">energy_cost_encumbered</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a3b6438c213ded75c5d4ea791424653e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e3c04f223a81a850f493fb8ee65dd3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a03e3c04f223a81a850f493fb8ee65dd3">enumerate_spell_data</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a03e3c04f223a81a850f493fb8ee65dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d44bdaf4c9faff438e6b30973d68615"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">id</a> () const</td></tr>
<tr class="separator:a7d44bdaf4c9faff438e6b30973d68615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a388a3e18bba1c58aa9c00dc53bc97aef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a388a3e18bba1c58aa9c00dc53bc97aef">spell_class</a> () const</td></tr>
<tr class="separator:a388a3e18bba1c58aa9c00dc53bc97aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c5d1958442f999fe006be4d89883cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ab4c5d1958442f999fe006be4d89883cf">skill</a> () const</td></tr>
<tr class="separator:ab4c5d1958442f999fe006be4d89883cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa34fc8ebf8b820ac055f4b4dd9d78c35"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a> () const</td></tr>
<tr class="separator:aa34fc8ebf8b820ac055f4b4dd9d78c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6f8776ac707639708392c616d93fa58"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ab6f8776ac707639708392c616d93fa58">effect_data</a> () const</td></tr>
<tr class="separator:ab6f8776ac707639708392c616d93fa58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b42ae28bea14653bbc623f2f3c8a2cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a1b42ae28bea14653bbc623f2f3c8a2cb">summon_vehicle_id</a> () const</td></tr>
<tr class="separator:a1b42ae28bea14653bbc623f2f3c8a2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf34d5415c3fdafcd84fe3a7101bddb"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a> () const</td></tr>
<tr class="separator:abdf34d5415c3fdafcd84fe3a7101bddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc66691f05cd20a085370d79df52bafa"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a> () const</td></tr>
<tr class="separator:acc66691f05cd20a085370d79df52bafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4826c2795f1db1547ef57ccd408f8cf"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ac4826c2795f1db1547ef57ccd408f8cf">message</a> () const</td></tr>
<tr class="separator:ac4826c2795f1db1547ef57ccd408f8cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb55e6084337fb199e3cab09260ad916"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a> () const</td></tr>
<tr class="separator:aeb55e6084337fb199e3cab09260ad916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d3f68783edb1af2e111e85f7a1715fa"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">energy_cost_string</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a0d3f68783edb1af2e111e85f7a1715fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dc2bd4fd1f177c091237236627bd993"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a1dc2bd4fd1f177c091237236627bd993">energy_cur_string</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a1dc2bd4fd1f177c091237236627bd993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5435ef2b2d958b64074ba3846dd96c4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#af5435ef2b2d958b64074ba3846dd96c4">enumerate_targets</a> () const</td></tr>
<tr class="separator:af5435ef2b2d958b64074ba3846dd96c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a661a14d3c40f8cbd2bd727e7b9f712"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a3a661a14d3c40f8cbd2bd727e7b9f712">list_targeted_monster_names</a> () const</td></tr>
<tr class="separator:a3a661a14d3c40f8cbd2bd727e7b9f712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25f9b130e010a30b39d8996f7ef92e4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad25f9b130e010a30b39d8996f7ef92e4">list_targeted_species_names</a> () const</td></tr>
<tr class="separator:ad25f9b130e010a30b39d8996f7ef92e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e6dd5185da5ec685fabeced2a8b73b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ae1e6dd5185da5ec685fabeced2a8b73b">list_ignored_species_names</a> () const</td></tr>
<tr class="separator:ae1e6dd5185da5ec685fabeced2a8b73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a731bc4db74246a1e9265ea6f25abd7ad"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;caster) const</td></tr>
<tr class="separator:a731bc4db74246a1e9265ea6f25abd7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335dc296fd7e166be557e69dc6d9f147"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a335dc296fd7e166be557e69dc6d9f147">aoe_string</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a335dc296fd7e166be557e69dc6d9f147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b1a5a0c2bd28fb4101608783f25b101"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a4b1a5a0c2bd28fb4101608783f25b101">duration_string</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a4b1a5a0c2bd28fb4101608783f25b101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593232b1e5fc4c81d536724d40322efd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1">magic_energy_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a> () const</td></tr>
<tr class="separator:a593232b1e5fc4c81d536724d40322efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ed087b326bb00071482cadeff078b15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnc__color.html">nc_color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a1ed087b326bb00071482cadeff078b15">damage_type_color</a> () const</td></tr>
<tr class="separator:a1ed087b326bb00071482cadeff078b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33b19b10be6eded53db5dee401ba6da5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a33b19b10be6eded53db5dee401ba6da5">damage_type_string</a> () const</td></tr>
<tr class="separator:a33b19b10be6eded53db5dee401ba6da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006cfd33c15f732b2463eda1ae0686cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a> () const</td></tr>
<tr class="separator:a006cfd33c15f732b2463eda1ae0686cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7293c53d4dc763a6e2aa2ee1224bff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a> () const</td></tr>
<tr class="separator:a7c7293c53d4dc763a6e2aa2ee1224bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c002dde68c8222bed0a619b28e0b91a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">get_difficulty</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a0c002dde68c8222bed0a619b28e0b91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67107306974252fab83a7ee7fb8b26bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#aabcbcb9fb77661ba75c47b6287318e03">mod_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a67107306974252fab83a7ee7fb8b26bb">get_src</a> () const</td></tr>
<tr class="separator:a67107306974252fab83a7ee7fb8b26bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1753d54122c01ea14e9abbb2bd886f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a2e1753d54122c01ea14e9abbb2bd886f">create_field</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;at, <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a2e1753d54122c01ea14e9abbb2bd886f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09d458a079bc27306786045580033794"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a09d458a079bc27306786045580033794">sound_volume</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a09d458a079bc27306786045580033794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09d10eac783473b568da11d51abd38a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a09d10eac783473b568da11d51abd38a6">make_sound</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a09d10eac783473b568da11d51abd38a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424c425308192eb085b48286f6e09fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a424c425308192eb085b48286f6e09fdd">make_sound</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, int loudness) const</td></tr>
<tr class="separator:a424c425308192eb085b48286f6e09fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12e38d6e97fefcf10174cd91df53bd4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#af12e38d6e97fefcf10174cd91df53bd4">heal</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:af12e38d6e97fefcf10174cd91df53bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381100da3ed24e4029ae1c34882dcfe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a381100da3ed24e4029ae1c34882dcfe7">cast_spell_effect</a> (<a class="el" href="classCreature.html">Creature</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target) const</td></tr>
<tr class="separator:a381100da3ed24e4029ae1c34882dcfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0752e28bd2c982a681521d2012eec12d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a> (<a class="el" href="classCreature.html">Creature</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target) const</td></tr>
<tr class="separator:a0752e28bd2c982a681521d2012eec12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b43a6e49d2fac622fe8a98ccbb9989"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a78b43a6e49d2fac622fe8a98ccbb9989">cast_extra_spell_effects</a> (<a class="el" href="classCreature.html">Creature</a> &amp;source, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target) const</td></tr>
<tr class="separator:a78b43a6e49d2fac622fe8a98ccbb9989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ebcd422eb7d3caefc7c413ba9a910e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad8ebcd422eb7d3caefc7c413ba9a910e">use_components</a> (<a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:ad8ebcd422eb7d3caefc7c413ba9a910e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37603127451eef7c25b11d8dd03d208c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a37603127451eef7c25b11d8dd03d208c">check_if_component_in_hand</a> (<a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:a37603127451eef7c25b11d8dd03d208c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d25bed9a9b942e4ada705b79dc43158"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a2d25bed9a9b942e4ada705b79dc43158">is_target_in_range</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:a2d25bed9a9b942e4ada705b79dc43158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1aee8fd855fce28ebb1dcc39e37a12"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:adc1aee8fd855fce28ebb1dcc39e37a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a9b2a90aefc5d4dfd630afaf0d42e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a60a9b2a90aefc5d4dfd630afaf0d42e6">is_valid_target</a> (<a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7">spell_target</a> t) const</td></tr>
<tr class="separator:a60a9b2a90aefc5d4dfd630afaf0d42e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a41577f639cd544a78c66360e61cc2a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a6a41577f639cd544a78c66360e61cc2a">target_by_monster_id</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:a6a41577f639cd544a78c66360e61cc2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c08f86e5d6ba271db251ade738afd8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#aa9c08f86e5d6ba271db251ade738afd8">target_by_species_id</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:aa9c08f86e5d6ba271db251ade738afd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e36e855e9cb0c85469e782cbb6a2e57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a5e36e855e9cb0c85469e782cbb6a2e57">ignore_by_species_id</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:a5e36e855e9cb0c85469e782cbb6a2e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a62c6ffd858fa8baeeb225aba2f06ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a7a62c6ffd858fa8baeeb225aba2f06ac">random_valid_target</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster, const <a class="el" href="structtripoint.html">tripoint</a> &amp;caster_pos) const</td></tr>
<tr class="separator:a7a62c6ffd858fa8baeeb225aba2f06ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad4dff616ba1d80004e9da4b9858b54ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad4dff616ba1d80004e9da4b9858b54ea">exp_for_level</a> (int level)</td></tr>
<tr class="separator:ad4dff616ba1d80004e9da4b9858b54ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac5425e8c7206d7502f6c403f95938d7b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a> () const</td></tr>
<tr class="separator:ac5425e8c7206d7502f6c403f95938d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85529eef5a29f1e17b390ae63869c781"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a85529eef5a29f1e17b390ae63869c781">min_leveled_damage</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a85529eef5a29f1e17b390ae63869c781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a462c98a4cef24f9d7014f7afc9118aa3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a462c98a4cef24f9d7014f7afc9118aa3">min_leveled_dot</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a462c98a4cef24f9d7014f7afc9118aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81b37281ed73857316479ab0bbb2395"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ae81b37281ed73857316479ab0bbb2395">min_leveled_aoe</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ae81b37281ed73857316479ab0bbb2395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19feb836872fc2fe3818f933a9029f00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a19feb836872fc2fe3818f933a9029f00">min_leveled_duration</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:a19feb836872fc2fe3818f933a9029f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83fcc2ff2b800a12c1a14c65103e1c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad83fcc2ff2b800a12c1a14c65103e1c7">min_leveled_accuracy</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;caster) const</td></tr>
<tr class="separator:ad83fcc2ff2b800a12c1a14c65103e1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acacc930abceced994590480b878ccdd8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a></td></tr>
<tr class="separator:acacc930abceced994590480b878ccdd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe669e2e24cdf747a0133eb892eb1aa1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a> = 0</td></tr>
<tr class="separator:afe669e2e24cdf747a0133eb892eb1aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17425a8a64b4647f35bebaafb1ac2bed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a> = 0</td></tr>
<tr class="separator:a17425a8a64b4647f35bebaafb1ac2bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2aedf645ec1614d5a4d832a7d411e22"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ad2aedf645ec1614d5a4d832a7d411e22">temp_cast_time_multiplyer</a> = 1</td></tr>
<tr class="separator:ad2aedf645ec1614d5a4d832a7d411e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add38c2281c13a3e1531b72db141b2a4b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#add38c2281c13a3e1531b72db141b2a4b">temp_spell_cost_multiplyer</a> = 1</td></tr>
<tr class="separator:add38c2281c13a3e1531b72db141b2a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2857365ef6cc65207a1ee75fc390ef13"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a2857365ef6cc65207a1ee75fc390ef13">temp_aoe_multiplyer</a> = 1</td></tr>
<tr class="separator:a2857365ef6cc65207a1ee75fc390ef13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dea8803fea1685efa62ace8ab9b082"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a03dea8803fea1685efa62ace8ab9b082">temp_range_multiplyer</a> = 1</td></tr>
<tr class="separator:a03dea8803fea1685efa62ace8ab9b082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afca00dce83ea257e838d8cfade31955c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#afca00dce83ea257e838d8cfade31955c">temp_duration_multiplyer</a> = 1</td></tr>
<tr class="separator:afca00dce83ea257e838d8cfade31955c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f7c66814c80a047ed87d86d13ba6c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a35f7c66814c80a047ed87d86d13ba6c6">temp_difficulty_adjustment</a> = 0</td></tr>
<tr class="separator:a35f7c66814c80a047ed87d86d13ba6c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e58f791f76940f5f07c361c745168e"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> = 1</td></tr>
<tr class="separator:ae4e58f791f76940f5f07c361c745168e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbefbc21e6bf90db7b45cae05c3a6c9f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a> = 1</td></tr>
<tr class="separator:abbefbc21e6bf90db7b45cae05c3a6c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2e3b1f81c61f10312aa50e3626b2f9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a> = 1</td></tr>
<tr class="separator:a7d2e3b1f81c61f10312aa50e3626b2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838599c428e33e70b7e62b3e195dc6b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtranslation.html">translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#a838599c428e33e70b7e62b3e195dc6b9">alt_message</a></td></tr>
<tr class="separator:a838599c428e33e70b7e62b3e195dc6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ac3848cd810ab2c4e7774f21886663f39"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspell.html#ac3848cd810ab2c4e7774f21886663f39">spell_events</a></td></tr>
<tr class="separator:ac3848cd810ab2c4e7774f21886663f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00421">421</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a04c24cc9ecaf5416e147dfa8b4ca3f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c24cc9ecaf5416e147dfa8b4ca3f41">&#9670;&nbsp;</a></span>spell() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">spell::spell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0312f96464a4cd8f9104c66e910cc026"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0312f96464a4cd8f9104c66e910cc026">&#9670;&nbsp;</a></span>spell() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">spell::spell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xp</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level_adjustment</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00651">651</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                                        :</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>( sp ),</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a>( <a class="code" href="classspell.html#a1758e56413516ae56a4ee161e998c338">xp</a> ),</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a>( level_adjustment )</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{}</div>
<div class="ttc" id="aclassspell_html_a17425a8a64b4647f35bebaafb1ac2bed"><div class="ttname"><a href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">spell::temp_level_adjustment</a></div><div class="ttdeci">int temp_level_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00434">magic.h:434</a></div></div>
<div class="ttc" id="aclassspell_html_a1758e56413516ae56a4ee161e998c338"><div class="ttname"><a href="classspell.html#a1758e56413516ae56a4ee161e998c338">spell::xp</a></div><div class="ttdeci">int xp() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01317">magic.cpp:1317</a></div></div>
<div class="ttc" id="aclassspell_html_acacc930abceced994590480b878ccdd8"><div class="ttname"><a href="classspell.html#acacc930abceced994590480b878ccdd8">spell::type</a></div><div class="ttdeci">spell_id type</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00426">magic.h:426</a></div></div>
<div class="ttc" id="aclassspell_html_afe669e2e24cdf747a0133eb892eb1aa1"><div class="ttname"><a href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">spell::experience</a></div><div class="ttdeci">int experience</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00429">magic.h:429</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a35a5f0a79a86833afef958fe1627d198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a5f0a79a86833afef958fe1627d198">&#9670;&nbsp;</a></span>accuracy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::accuracy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00731">731</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;{</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_accuracy = <a class="code" href="classspell.html#ad83fcc2ff2b800a12c1a14c65103e1c7">min_leveled_accuracy</a>( caster );</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5073999c6ea0fa0356c6e6f2a0e407aa">min_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= 0 ||</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a4aecb94219e95161d7be0a9b3ad4ab28">max_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5073999c6ea0fa0356c6e6f2a0e407aa">min_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_accuracy, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a4aecb94219e95161d7be0a9b3ad4ab28">max_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// if it&#39;s negative, min and max work differently</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_accuracy, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a4aecb94219e95161d7be0a9b3ad4ab28">max_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aclassspell__type_html_a4aecb94219e95161d7be0a9b3ad4ab28"><div class="ttname"><a href="classspell__type.html#a4aecb94219e95161d7be0a9b3ad4ab28">spell_type::max_accuracy</a></div><div class="ttdeci">dbl_or_var max_accuracy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00259">magic.h:259</a></div></div>
<div class="ttc" id="aclassspell__type_html_a5073999c6ea0fa0356c6e6f2a0e407aa"><div class="ttname"><a href="classspell__type.html#a5073999c6ea0fa0356c6e6f2a0e407aa">spell_type::min_accuracy</a></div><div class="ttdeci">dbl_or_var min_accuracy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00257">magic.h:257</a></div></div>
<div class="ttc" id="aclassspell_html_ad83fcc2ff2b800a12c1a14c65103e1c7"><div class="ttname"><a href="classspell.html#ad83fcc2ff2b800a12c1a14c65103e1c7">spell::min_leveled_accuracy</a></div><div class="ttdeci">int min_leveled_accuracy(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00724">magic.cpp:724</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="astructdbl__or__var_html_ab65089e65e8bcff8239572030573c540"><div class="ttname"><a href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">dbl_or_var::evaluate</a></div><div class="ttdeci">double evaluate(dialogue &amp;d) const</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__helpers_8cpp_source.html#l00191">dialogue_helpers.cpp:191</a></div></div>
<div class="ttc" id="astructdialogue_html"><div class="ttname"><a href="structdialogue.html">dialogue</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00184">dialogue.h:184</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00259">spell_type::max_accuracy</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00257">spell_type::min_accuracy</a>, <a class="el" href="magic_8cpp_source.html#l00724">min_leveled_accuracy()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>.</p>

</div>
</div>
<a id="a63f22c8f5a1730ab6651342e9becbfdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f22c8f5a1730ab6651342e9becbfdc">&#9670;&nbsp;</a></span>aoe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::aoe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00854">854</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_aoe = <a class="code" href="classspell.html#ae81b37281ed73857316479ab0bbb2395">min_leveled_aoe</a>( caster );</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordtype">int</span> return_value;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">spell_flag::RANDOM_AOE</a> ) ) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        return_value = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_aoe, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ),</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                            <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_aoe, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ) );</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa503b99197533fa1dfa5de8052a4119b">min_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            return_value = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_aoe, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            return_value = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_aoe, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">return</span> return_value * <a class="code" href="classspell.html#a2857365ef6cc65207a1ee75fc390ef13">temp_aoe_multiplyer</a>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassspell__type_html_a08e913e8b37e572c9f079e038dee36b2"><div class="ttname"><a href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">spell_type::max_aoe</a></div><div class="ttdeci">dbl_or_var max_aoe</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00281">magic.h:281</a></div></div>
<div class="ttc" id="aclassspell__type_html_aa503b99197533fa1dfa5de8052a4119b"><div class="ttname"><a href="classspell__type.html#aa503b99197533fa1dfa5de8052a4119b">spell_type::min_aoe</a></div><div class="ttdeci">dbl_or_var min_aoe</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00277">magic.h:277</a></div></div>
<div class="ttc" id="aclassspell_html_a2857365ef6cc65207a1ee75fc390ef13"><div class="ttname"><a href="classspell.html#a2857365ef6cc65207a1ee75fc390ef13">spell::temp_aoe_multiplyer</a></div><div class="ttdeci">float temp_aoe_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00437">magic.h:437</a></div></div>
<div class="ttc" id="aclassspell_html_aa609bae14a69c0987d562a2a9f8a1268"><div class="ttname"><a href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">spell::has_flag</a></div><div class="ttdeci">bool has_flag(const spell_flag &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01074">magic.cpp:1074</a></div></div>
<div class="ttc" id="aclassspell_html_ae81b37281ed73857316479ab0bbb2395"><div class="ttname"><a href="classspell.html#ae81b37281ed73857316479ab0bbb2395">spell::min_leveled_aoe</a></div><div class="ttdeci">int min_leveled_aoe(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00847">magic.cpp:847</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">spell_flag::RANDOM_AOE</a></div><div class="ttdeci">@ RANDOM_AOE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00281">spell_type::max_aoe</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00277">spell_type::min_aoe</a>, <a class="el" href="magic_8cpp_source.html#l00847">min_leveled_aoe()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">RANDOM_AOE</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="magic_8h_source.html#l00437">temp_aoe_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00895">aoe_string()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00925">spell_effect::area_pull()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00943">spell_effect::area_push()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00426">calculate_spell_effect_area()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01664">spell_effect::dash()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01346">spell_effect::explosion()</a>, <a class="el" href="magic_8cpp_source.html#l00885">in_aoe()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01374">spell_effect::map()</a>, <a class="el" href="magic_8h_source.html#l00743">spell_effect::override_parameters::override_parameters()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00148">spell_effect::short_range_teleport()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01809">spell_effect::slime_split_on_death()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l00813">spell_remove_field()</a>.</p>

</div>
</div>
<a id="a335dc296fd7e166be557e69dc6d9f147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335dc296fd7e166be557e69dc6d9f147">&#9670;&nbsp;</a></span>aoe_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::aoe_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00895">895</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;{</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">spell_flag::RANDOM_AOE</a> ) ) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d-%d&quot;</span>, <a class="code" href="classspell.html#ae81b37281ed73857316479ab0bbb2395">min_leveled_aoe</a>( caster ), <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">aoe</a>( caster ) );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a63f22c8f5a1730ab6651342e9becbfdc"><div class="ttname"><a href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">spell::aoe</a></div><div class="ttdeci">int aoe(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00854">magic.cpp:854</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h_source.html#l00281">spell_type::max_aoe</a>, <a class="el" href="magic_8cpp_source.html#l00847">min_leveled_aoe()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">RANDOM_AOE</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a6f76f8894099d3d7fd0f54f765a0991e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f76f8894099d3d7fd0f54f765a0991e">&#9670;&nbsp;</a></span>bp_is_affected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::bp_is_affected </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="bodypart_8h.html#ab5d79e6a6fc7e853dcd7e5fdc9cbe34c">bodypart_str_id</a> &amp;&#160;</td>
          <td class="paramname"><em>bp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01400">1400</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;{</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad2ddb53d6c4f656d913e5093d84f1ad6">affected_bps</a>.<a class="code" href="classbody__part__set.html#ac4e5ce7eea67f44279a4db416a7903cd">test</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;}</div>
<div class="ttc" id="aclassbody__part__set_html_ac4e5ce7eea67f44279a4db416a7903cd"><div class="ttname"><a href="classbody__part__set.html#ac4e5ce7eea67f44279a4db416a7903cd">body_part_set::test</a></div><div class="ttdeci">bool test(const bodypart_str_id &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00034">body_part_set.h:34</a></div></div>
<div class="ttc" id="aclassspell__type_html_ad2ddb53d6c4f656d913e5093d84f1ad6"><div class="ttname"><a href="classspell__type.html#ad2ddb53d6c4f656d913e5093d84f1ad6">spell_type::affected_bps</a></div><div class="ttdeci">body_part_set affected_bps</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00354">magic.h:354</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00354">spell_type::affected_bps</a>, <a class="el" href="creature_8h_source.html#l00238">bp</a>, <a class="el" href="body__part__set_8h_source.html#l00034">body_part_set::test()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00485">add_effect_to_target()</a>.</p>

</div>
</div>
<a id="ab2631d5fc9da8a5ec04f7c3757e6c9f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2631d5fc9da8a5ec04f7c3757e6c9f5">&#9670;&nbsp;</a></span>can_cast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::can_cast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01093">1093</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span>( guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a3a15cd3f4a620df4e0fc5b4ecb0111af">json_flag_NO_SPELLCASTING</a> ) &amp;&amp; !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span>( guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#affad52c1fd604b4619fae07ee57a714d">json_flag_NO_PSIONICS</a> ) &amp;&amp; <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() &amp;&amp;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        !<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>-&gt;<a class="code" href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">can_make_with_inventory</a>( guy.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>( guy.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 0, <span class="keyword">false</span> ),</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                return_true&lt;item&gt; ) ) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">return</span> guy.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;has_enough_energy( guy, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aaaec0279242f05b51af5c8b7bb416bb1"><div class="ttname"><a href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">Character::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if player has a trait, bionic, effect, bodypart, or martial arts buff with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11967">character.cpp:11967</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassCharacter_html_af2ff32cce5f17bcf04be958121abe524"><div class="ttname"><a href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">Character::magic</a></div><div class="ttdeci">pimpl&lt; known_magic &gt; magic</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02485">character.h:2485</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassspell__type_html_a58dc5f9a0291fecd13320cff374013b8"><div class="ttname"><a href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_type::spell_components</a></div><div class="ttdeci">requirement_id spell_components</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00219">magic.h:219</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a3a15cd3f4a620df4e0fc5b4ecb0111af"><div class="ttname"><a href="magic_8cpp.html#a3a15cd3f4a620df4e0fc5b4ecb0111af">json_flag_NO_SPELLCASTING</a></div><div class="ttdeci">static const json_character_flag json_flag_NO_SPELLCASTING(&quot;NO_SPELLCASTING&quot;)</div></div>
<div class="ttc" id="amagic_8cpp_html_affad52c1fd604b4619fae07ee57a714d"><div class="ttname"><a href="magic_8cpp.html#affad52c1fd604b4619fae07ee57a714d">json_flag_NO_PSIONICS</a></div><div class="ttdeci">static const json_character_flag json_flag_NO_PSIONICS(&quot;NO_PSIONICS&quot;)</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a></div><div class="ttdeci">@ PSIONIC</div></div>
<div class="ttc" id="astructrequirement__data_html_a07c67f146358ed0de2aface7588c20d2"><div class="ttname"><a href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">requirement_data::can_make_with_inventory</a></div><div class="ttdeci">bool can_make_with_inventory(const read_only_visitable &amp;crafting_inv, const std::function&lt; bool(const item &amp;)&gt; &amp;filter, int batch=1, craft_flags=craft_flags::none) const</div><div class="ttdoc">Returns true if the requirements are fulfilled by the filtered inventory.</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00840">requirements.cpp:840</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="requirements_8cpp_source.html#l00840">requirement_data::can_make_with_inventory()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="magic_8cpp.html#affad52c1fd604b4619fae07ee57a714d">json_flag_NO_PSIONICS</a>, <a class="el" href="magic_8cpp.html#a3a15cd3f4a620df4e0fc5b4ecb0111af">json_flag_NO_SPELLCASTING</a>, <a class="el" href="character_8h_source.html#l02485">Character::magic</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">PSIONIC</a>, <a class="el" href="magic_8h_source.html#l00219">spell_type::spell_components</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc__attack_8cpp_source.html#l00151">npc_attack_spell::can_use()</a>, <a class="el" href="handle__action_8cpp_source.html#l01717">cast_spell()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">target_ui::run()</a>.</p>

</div>
</div>
<a id="a4cd3c2989310be69c17be190328586c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd3c2989310be69c17be190328586c0">&#9670;&nbsp;</a></span>can_learn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::can_learn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01032">1032</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> == <a class="code" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a> ) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span> guy.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> );</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassspell__type_html_a77a45ea3e4de418a9fbe8849be99d27c"><div class="ttname"><a href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_type::spell_class</a></div><div class="ttdeci">trait_id spell_class</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00321">magic.h:321</a></div></div>
<div class="ttc" id="amagic_8cpp_html_ad4dc12b16a8db4bc3a0debd31fa0ca5d"><div class="ttname"><a href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a></div><div class="ttdeci">static const trait_id trait_NONE(&quot;NONE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="magic_8h_source.html#l00321">spell_type::spell_class</a>, <a class="el" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="a0752e28bd2c982a681521d2012eec12d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0752e28bd2c982a681521d2012eec12d">&#9670;&nbsp;</a></span>cast_all_effects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::cast_all_effects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01833">1833</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;{</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac1324f642ae16e50278d5fad88240254">spell_flag::WONDER</a> ) ) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#addae5132e10abe659f19d1575547d185">additional_spells</a>.begin();</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> num_spells = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( source ) ); num_spells &gt; 0; num_spells-- ) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#addae5132e10abe659f19d1575547d185">additional_spells</a>.empty() ) {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: %s has WONDER flag but no spells to choose from!&quot;</span>, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> rand_spell = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#addae5132e10abe659f19d1575547d185">additional_spells</a>.size() - 1 );</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <a class="code" href="classspell.html">spell</a> sp = ( iter + rand_spell )-&gt;get_spell( source, <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() );</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> _self = ( iter + rand_spell )-&gt;<span class="keyword">self</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="comment">// This spell flag makes it so the message of the spell that&#39;s cast using this spell will be sent.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <span class="comment">// if a message is added to the casting spell, it will be sent as well.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            source.<a class="code" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( sp.<a class="code" href="classspell.html#ac4826c2795f1db1547ef57ccd408f8cf">message</a>() );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160; </div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <span class="keywordflow">if</span>( sp.<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">spell_flag::RANDOM_TARGET</a> ) ) {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;tripoint&gt; new_target = sp.<a class="code" href="classspell.html#a7a62c6ffd858fa8baeeb225aba2f06ac">random_valid_target</a>( source,</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                        _self ? source.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() : target ) ) {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                    sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, *new_target );</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                }</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keywordflow">if</span>( _self ) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                    sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, source.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                    sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, target );</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        }</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197baeda01abd967f7e1e749ce88aab441d33">spell_flag::EXTRA_EFFECTS_FIRST</a> ) ) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="classspell.html#a78b43a6e49d2fac622fe8a98ccbb9989">cast_extra_spell_effects</a>( source, target );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <a class="code" href="classspell.html#a381100da3ed24e4029ae1c34882dcfe7">cast_spell_effect</a>( source, target );</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <a class="code" href="classspell.html#a381100da3ed24e4029ae1c34882dcfe7">cast_spell_effect</a>( source, target );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            <a class="code" href="classspell.html#a78b43a6e49d2fac622fe8a98ccbb9989">cast_extra_spell_effects</a>( source, target );</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00976">creature.h:976</a></div></div>
<div class="ttc" id="aclassspell__type_html_a27241a7d092889a2be195551797dfbf8"><div class="ttname"><a href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">spell_type::id</a></div><div class="ttdeci">spell_id id</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00205">magic.h:205</a></div></div>
<div class="ttc" id="aclassspell__type_html_addae5132e10abe659f19d1575547d185"><div class="ttname"><a href="classspell__type.html#addae5132e10abe659f19d1575547d185">spell_type::additional_spells</a></div><div class="ttdeci">std::vector&lt; fake_spell &gt; additional_spells</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00238">magic.h:238</a></div></div>
<div class="ttc" id="aclassspell_html"><div class="ttname"><a href="classspell.html">spell</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00421">magic.h:422</a></div></div>
<div class="ttc" id="aclassspell_html_a0752e28bd2c982a681521d2012eec12d"><div class="ttname"><a href="classspell.html#a0752e28bd2c982a681521d2012eec12d">spell::cast_all_effects</a></div><div class="ttdeci">void cast_all_effects(Creature &amp;source, const tripoint &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01833">magic.cpp:1833</a></div></div>
<div class="ttc" id="aclassspell_html_a381100da3ed24e4029ae1c34882dcfe7"><div class="ttname"><a href="classspell.html#a381100da3ed24e4029ae1c34882dcfe7">spell::cast_spell_effect</a></div><div class="ttdeci">void cast_spell_effect(Creature &amp;source, const tripoint &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01819">magic.cpp:1819</a></div></div>
<div class="ttc" id="aclassspell_html_a78b43a6e49d2fac622fe8a98ccbb9989"><div class="ttname"><a href="classspell.html#a78b43a6e49d2fac622fe8a98ccbb9989">spell::cast_extra_spell_effects</a></div><div class="ttdeci">void cast_extra_spell_effects(Creature &amp;source, const tripoint &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01874">magic.cpp:1874</a></div></div>
<div class="ttc" id="aclassspell_html_a7a62c6ffd858fa8baeeb225aba2f06ac"><div class="ttname"><a href="classspell.html#a7a62c6ffd858fa8baeeb225aba2f06ac">spell::random_valid_target</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; random_valid_target(const Creature &amp;caster, const tripoint &amp;caster_pos) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01893">magic.cpp:1893</a></div></div>
<div class="ttc" id="aclassspell_html_a7c7293c53d4dc763a6e2aa2ee1224bff"><div class="ttname"><a href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">spell::get_effective_level</a></div><div class="ttdeci">int get_effective_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01576">magic.cpp:1576</a></div></div>
<div class="ttc" id="aclassspell_html_ac4826c2795f1db1547ef57ccd408f8cf"><div class="ttname"><a href="classspell.html#ac4826c2795f1db1547ef57ccd408f8cf">spell::message</a></div><div class="ttdeci">std::string message() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01212">magic.cpp:1212</a></div></div>
<div class="ttc" id="aclassspell_html_ad572a7c2376afa1bd84ca8ab9603ed2a"><div class="ttname"><a href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">spell::damage</a></div><div class="ttdeci">int damage(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00705">magic.cpp:705</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">spell_flag::RANDOM_TARGET</a></div><div class="ttdeci">@ RANDOM_TARGET</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197bac1324f642ae16e50278d5fad88240254"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac1324f642ae16e50278d5fad88240254">spell_flag::WONDER</a></div><div class="ttdeci">@ WONDER</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197baeda01abd967f7e1e749ce88aab441d33"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197baeda01abd967f7e1e749ce88aab441d33">spell_flag::EXTRA_EFFECTS_FIRST</a></div><div class="ttdeci">@ EXTRA_EFFECTS_FIRST</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="creature_8h_source.html#l00976">Creature::add_msg_if_player()</a>, <a class="el" href="magic_8h_source.html#l00238">spell_type::additional_spells</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197baeda01abd967f7e1e749ce88aab441d33">EXTRA_EFFECTS_FIRST</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h_source.html#l00205">spell_type::id</a>, <a class="el" href="magic_8cpp_source.html#l01212">message()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">RANDOM_TARGET</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="magic_8h_source.html#l00426">type</a>, and <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac1324f642ae16e50278d5fad88240254">WONDER</a>.</p>

<p class="reference">Referenced by <a class="el" href="relic_8cpp_source.html#l00416">relic::activate()</a>, <a class="el" href="magic__enchantment_8cpp_source.html#l00999">enchant_cache::activate_passive()</a>, <a class="el" href="timed__event_8cpp_source.html#l00102">timed_event::actualize()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic__enchantment_8cpp_source.html#l01051">enchant_cache::cast_enchantment_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01556">trapfunc::cast_spell()</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="npctalk_8cpp_source.html#l04447">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_cast_spell()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a78b43a6e49d2fac622fe8a98ccbb9989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b43a6e49d2fac622fe8a98ccbb9989">&#9670;&nbsp;</a></span>cast_extra_spell_effects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::cast_extra_spell_effects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01874">1874</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;{</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structfake__spell.html">fake_spell</a> &amp;extra_spell : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#addae5132e10abe659f19d1575547d185">additional_spells</a> ) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        <a class="code" href="classspell.html">spell</a> sp = extra_spell.<a class="code" href="structfake__spell.html#ad4f9daba773dc6b7b96dcc256e9213ad">get_spell</a>( source, <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() );</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">if</span>( sp.<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">spell_flag::RANDOM_TARGET</a> ) ) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;tripoint&gt; new_target = sp.<a class="code" href="classspell.html#a7a62c6ffd858fa8baeeb225aba2f06ac">random_valid_target</a>( source,</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                    extra_spell.<a class="code" href="structfake__spell.html#afa2a4b38d223f38100fb8148d92fca2a">self</a> ? source.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() : target ) ) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, *new_target );</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <span class="keywordflow">if</span>( extra_spell.<a class="code" href="structfake__spell.html#afa2a4b38d223f38100fb8148d92fca2a">self</a> ) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, source.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                sp.<a class="code" href="classspell.html#a0752e28bd2c982a681521d2012eec12d">cast_all_effects</a>( source, target );</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;}</div>
<div class="ttc" id="astructfake__spell_html"><div class="ttname"><a href="structfake__spell.html">fake_spell</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00141">magic.h:141</a></div></div>
<div class="ttc" id="astructfake__spell_html_ad4f9daba773dc6b7b96dcc256e9213ad"><div class="ttname"><a href="structfake__spell.html#ad4f9daba773dc6b7b96dcc256e9213ad">fake_spell::get_spell</a></div><div class="ttdeci">spell get_spell(const Creature &amp;caster, int min_level_override=0) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l03023">magic.cpp:3023</a></div></div>
<div class="ttc" id="astructfake__spell_html_afa2a4b38d223f38100fb8148d92fca2a"><div class="ttname"><a href="structfake__spell.html#afa2a4b38d223f38100fb8148d92fca2a">fake_spell::self</a></div><div class="ttdeci">bool self</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00155">magic.h:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00238">spell_type::additional_spells</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="magic_8cpp_source.html#l03023">fake_spell::get_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">RANDOM_TARGET</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="magic_8h_source.html#l00155">fake_spell::self</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>.</p>

</div>
</div>
<a id="a381100da3ed24e4029ae1c34882dcfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a381100da3ed24e4029ae1c34882dcfe7">&#9670;&nbsp;</a></span>cast_spell_effect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::cast_spell_effect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01819">1819</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;{</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <a class="code" href="classCharacter.html">Character</a> *caster = source.<a class="code" href="classCreature.html#a55d12f92d62a7c89c44b466d7e7cb00d">as_character</a>();</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span>( caster ) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <a class="code" href="classcharacter__id.html">character_id</a> c_id = caster-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>();</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="comment">// send casting to the event bus</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a91ebffe1a2751b920ac93e8f5549a4c2">event_type::character_casts_spell</a>&gt;( c_id, this-&gt;<a class="code" href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">id</a>(), this-&gt;<a class="code" href="classspell.html#a388a3e18bba1c58aa9c00dc53bc97aef">spell_class</a>(),</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                this-&gt;<a class="code" href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">get_difficulty</a>( source ), this-&gt;<a class="code" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a>( *caster ), this-&gt;<a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a>( *caster ),</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                this-&gt;<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( source ) );</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a2f4c3da42b12fcb9160f5110214db5e7">effect</a>( *<span class="keyword">this</span>, source, target );</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassCreature_html_a55d12f92d62a7c89c44b466d7e7cb00d"><div class="ttname"><a href="classCreature.html#a55d12f92d62a7c89c44b466d7e7cb00d">Creature::as_character</a></div><div class="ttdeci">virtual Character * as_character()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00274">creature.h:274</a></div></div>
<div class="ttc" id="aclasscharacter__id_html"><div class="ttname"><a href="classcharacter__id.html">character_id</a></div><div class="ttdef"><b>Definition:</b> <a href="character__id_8h_source.html#l00009">character_id.h:10</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassspell__type_html_a2f4c3da42b12fcb9160f5110214db5e7"><div class="ttname"><a href="classspell__type.html#a2f4c3da42b12fcb9160f5110214db5e7">spell_type::effect</a></div><div class="ttdeci">std::function&lt; void(const spell &amp;, Creature &amp;, const tripoint &amp;)&gt; effect</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00229">magic.h:229</a></div></div>
<div class="ttc" id="aclassspell_html_a0c002dde68c8222bed0a619b28e0b91a"><div class="ttname"><a href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">spell::get_difficulty</a></div><div class="ttdeci">int get_difficulty(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01147">magic.cpp:1147</a></div></div>
<div class="ttc" id="aclassspell_html_a388a3e18bba1c58aa9c00dc53bc97aef"><div class="ttname"><a href="classspell.html#a388a3e18bba1c58aa9c00dc53bc97aef">spell::spell_class</a></div><div class="ttdeci">trait_id spell_class() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00667">magic.cpp:667</a></div></div>
<div class="ttc" id="aclassspell_html_a4ddf2ffd71f86bc2ca2ebca259071924"><div class="ttname"><a href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">spell::energy_cost</a></div><div class="ttdeci">int energy_cost(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01040">magic.cpp:1040</a></div></div>
<div class="ttc" id="aclassspell_html_a4feeb99d5b76aac0263c4730be9882d5"><div class="ttname"><a href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">spell::casting_time</a></div><div class="ttdeci">int casting_time(const Character &amp;guy, bool ignore_encumb=false) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01158">magic.cpp:1158</a></div></div>
<div class="ttc" id="aclassspell_html_a7d44bdaf4c9faff438e6b30973d68615"><div class="ttname"><a href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">spell::id</a></div><div class="ttdeci">spell_id id() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00662">magic.cpp:662</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a91ebffe1a2751b920ac93e8f5549a4c2"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a91ebffe1a2751b920ac93e8f5549a4c2">event_type::character_casts_spell</a></div><div class="ttdeci">@ character_casts_spell</div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8h_source.html#l00274">Creature::as_character()</a>, <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a91ebffe1a2751b920ac93e8f5549a4c2">character_casts_spell</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8h_source.html#l00229">spell_type::effect</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l01147">get_difficulty()</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="magic_8cpp_source.html#l00662">id()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="magic_8cpp_source.html#l00667">spell_class()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>.</p>

</div>
</div>
<a id="adb7b86747726cfee704cd4a91009b93c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb7b86747726cfee704cd4a91009b93c">&#9670;&nbsp;</a></span>casting_exp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::casting_exp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01675">1675</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;{</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="comment">// the amount of xp you would get with no modifiers</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> base_casting_xp = 75;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( guy.<a class="code" href="classCharacter.html#aaef69a97be3cf8ddca64a0174467a86c">adjust_for_focus</a>( base_casting_xp * <a class="code" href="classspell.html#ad7a99f3d7def292a3e9af0b869e51103">exp_modifier</a>( guy ) ) );</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aaef69a97be3cf8ddca64a0174467a86c"><div class="ttname"><a href="classCharacter.html#aaef69a97be3cf8ddca64a0174467a86c">Character::adjust_for_focus</a></div><div class="ttdeci">float adjust_for_focus(float amount) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10062">character.cpp:10062</a></div></div>
<div class="ttc" id="aclassspell_html_ad7a99f3d7def292a3e9af0b869e51103"><div class="ttname"><a href="classspell.html#ad7a99f3d7def292a3e9af0b869e51103">spell::exp_modifier</a></div><div class="ttdeci">float exp_modifier(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01666">magic.cpp:1666</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l10062">Character::adjust_for_focus()</a>, <a class="el" href="magic_8cpp_source.html#l01666">exp_modifier()</a>, and <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a4feeb99d5b76aac0263c4730be9882d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4feeb99d5b76aac0263c4730be9882d5">&#9670;&nbsp;</a></span>casting_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::casting_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ignore_encumb</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01158">1158</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;{</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// casting time in moves</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> = 0;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( guy ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">base_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &lt; <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#adccbac25f546cf4b277b1058b59f0ae8">final_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#adccbac25f546cf4b277b1058b59f0ae8">final_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ),</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">base_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) +</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                         <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a094462d9091edcb781516ba1c6bf5096">casting_time_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) *</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                                         <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() ) ) );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">base_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt; <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#adccbac25f546cf4b277b1058b59f0ae8">final_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#adccbac25f546cf4b277b1058b59f0ae8">final_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ),</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">base_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) +</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                         <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a094462d9091edcb781516ba1c6bf5096">casting_time_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) *</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                                         <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() ) ) );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">base_casting_time</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d );</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> = guy.<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ae9b273235243d4a251ec58ccbe1c6d1e">enchant_vals::mod::CASTING_TIME_MULTIPLIER</a>,</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                   <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> );</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">if</span>( !ignore_encumb &amp;&amp; <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">spell_flag::NO_LEGS</a> ) ) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="comment">// the first 20 points of encumbrance combined is ignored</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> legs_encumb = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                                              guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4">body_part_type::type::leg</a> ) - 10 );</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> += legs_encumb * 3 * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">spell_flag::SOMATIC</a> ) &amp;&amp; !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a> ) ) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="comment">// the first 20 points of encumbrance combined is ignored</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> arms_encumb = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                                              guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::type::arm</a> ) - 10 );</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> += arms_encumb * 2 * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a> * <a class="code" href="classspell.html#ad2aedf645ec1614d5a4d832a7d411e22">temp_cast_time_multiplyer</a>, 0.0f );</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0bae97cba21daebf53484d06605e6529"><div class="ttname"><a href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">Character::avg_encumb_of_limb_type</a></div><div class="ttdeci">int avg_encumb_of_limb_type(body_part_type::type part_type) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04030">character.cpp:4030</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassspell__type_html_a094462d9091edcb781516ba1c6bf5096"><div class="ttname"><a href="classspell__type.html#a094462d9091edcb781516ba1c6bf5096">spell_type::casting_time_increment</a></div><div class="ttdeci">dbl_or_var casting_time_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00332">magic.h:332</a></div></div>
<div class="ttc" id="aclassspell__type_html_adccbac25f546cf4b277b1058b59f0ae8"><div class="ttname"><a href="classspell__type.html#adccbac25f546cf4b277b1058b59f0ae8">spell_type::final_casting_time</a></div><div class="ttdeci">dbl_or_var final_casting_time</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00334">magic.h:334</a></div></div>
<div class="ttc" id="aclassspell__type_html_af233ee766e2d8180dc49cfd12abad6d6"><div class="ttname"><a href="classspell__type.html#af233ee766e2d8180dc49cfd12abad6d6">spell_type::base_casting_time</a></div><div class="ttdeci">dbl_or_var base_casting_time</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00330">magic.h:330</a></div></div>
<div class="ttc" id="aclassspell_html_ad2aedf645ec1614d5a4d832a7d411e22"><div class="ttname"><a href="classspell.html#ad2aedf645ec1614d5a4d832a7d411e22">spell::temp_cast_time_multiplyer</a></div><div class="ttdeci">float temp_cast_time_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00435">magic.h:435</a></div></div>
<div class="ttc" id="aclassspell_html_ae4e58f791f76940f5f07c361c745168e"><div class="ttname"><a href="classspell.html#ae4e58f791f76940f5f07c361c745168e">spell::temp_somatic_difficulty_multiplyer</a></div><div class="ttdeci">float temp_somatic_difficulty_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00441">magic.h:441</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a7e54b3fea40776c033ce3476443d8eed"><div class="ttname"><a href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a></div><div class="ttdeci">static const json_character_flag json_flag_SUBTLE_SPELL(&quot;SUBTLE_SPELL&quot;)</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">spell_flag::NO_LEGS</a></div><div class="ttdeci">@ NO_LEGS</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">spell_flag::SOMATIC</a></div><div class="ttdeci">@ SOMATIC</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998ae9b273235243d4a251ec58ccbe1c6d1e"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ae9b273235243d4a251ec58ccbe1c6d1e">enchant_vals::mod::CASTING_TIME_MULTIPLIER</a></div><div class="ttdeci">@ CASTING_TIME_MULTIPLIER</div></div>
<div class="ttc" id="astructbody__part__type_html_a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4"><div class="ttname"><a href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4">body_part_type::type::leg</a></div><div class="ttdeci">@ leg</div></div>
<div class="ttc" id="astructbody__part__type_html_a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701"><div class="ttname"><a href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::type::arm</a></div><div class="ttdeci">@ arm</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::arm</a>, <a class="el" href="character_8cpp_source.html#l04030">Character::avg_encumb_of_limb_type()</a>, <a class="el" href="magic_8h_source.html#l00330">spell_type::base_casting_time</a>, <a class="el" href="magic_8h_source.html#l00332">spell_type::casting_time_increment</a>, <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ae9b273235243d4a251ec58ccbe1c6d1e">enchant_vals::CASTING_TIME_MULTIPLIER</a>, <a class="el" href="character_8h_source.html#l04105">Character::enchantment_cache</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8h_source.html#l00334">spell_type::final_casting_time</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a>, <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4">body_part_type::leg</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">NO_LEGS</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">SOMATIC</a>, <a class="el" href="magic_8h_source.html#l00435">temp_cast_time_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc__attack_8cpp_source.html#l00160">npc_attack_spell::base_time_penalty()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02435">cast_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a0fd925009e816157e71f96cddd9c55db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd925009e816157e71f96cddd9c55db">&#9670;&nbsp;</a></span>casting_time_encumbered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::casting_time_encumbered </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l02383">2383</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;{</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">encumb</a> = 0;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">spell_flag::NO_LEGS</a> ) &amp;&amp; <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        <span class="comment">// the first 20 points of encumbrance combined is ignored</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">encumb</a> += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4">body_part_type::type::leg</a> ) - 10 );</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">spell_flag::SOMATIC</a> ) &amp;&amp; !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a> ) &amp;&amp;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        <span class="comment">// the first 20 points of encumbrance combined is ignored</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">encumb</a> += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::type::arm</a> ) - 10 );</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">encumb</a> &gt; 0;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;}</div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">bodygraph_var::encumb</a></div><div class="ttdeci">@ encumb</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::arm</a>, <a class="el" href="character_8cpp_source.html#l04030">Character::avg_encumb_of_limb_type()</a>, <a class="el" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4acdc157c853354b3b2f8f3986a7b55335">encumb</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a>, <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a4e1df3d256693afb3630685668820df4">body_part_type::leg</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">NO_LEGS</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">SOMATIC</a>, and <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a37603127451eef7c25b11d8dd03d208c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37603127451eef7c25b11d8dd03d208c">&#9670;&nbsp;</a></span>check_if_component_in_hand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::check_if_component_in_hand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01129">1129</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;{</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> &amp;spell_components = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span>( guy.<a class="code" href="classCharacter.html#a9511a04100db12858069c5fd802fa77e">has_weapon</a>() ) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">if</span>( spell_components.<a class="code" href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">can_make_with_inventory</a>( *guy.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>(), return_true&lt;item&gt; ) ) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">// if it isn&#39;t in hand, return false</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a9511a04100db12858069c5fd802fa77e"><div class="ttname"><a href="classCharacter.html#a9511a04100db12858069c5fd802fa77e">Character::has_weapon</a></div><div class="ttdeci">bool has_weapon() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11331">character.cpp:11331</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa9a4335ab1fd0d975199750b1ebf5bef"><div class="ttname"><a href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">Character::get_wielded_item</a></div><div class="ttdeci">item_location get_wielded_item() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00674">character.cpp:674</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="requirements_8cpp_source.html#l00840">requirement_data::can_make_with_inventory()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="character_8cpp_source.html#l11331">Character::has_weapon()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="magic_8h_source.html#l00219">spell_type::spell_components</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>.</p>

</div>
</div>
<a id="ae3c8a866c5a9199636ed5601844f2399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c8a866c5a9199636ed5601844f2399">&#9670;&nbsp;</a></span>clear_temp_adjustments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::clear_temp_adjustments </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01624">1624</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;{</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a> = 0;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="classspell.html#ad2aedf645ec1614d5a4d832a7d411e22">temp_cast_time_multiplyer</a> = 1;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="classspell.html#add38c2281c13a3e1531b72db141b2a4b">temp_spell_cost_multiplyer</a> = 1;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <a class="code" href="classspell.html#a2857365ef6cc65207a1ee75fc390ef13">temp_aoe_multiplyer</a> = 1;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="classspell.html#a03dea8803fea1685efa62ace8ab9b082">temp_range_multiplyer</a> = 1;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="classspell.html#afca00dce83ea257e838d8cfade31955c">temp_duration_multiplyer</a> = 1;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="classspell.html#a35f7c66814c80a047ed87d86d13ba6c6">temp_difficulty_adjustment</a> = 0;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> = 1;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a> = 1;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <a class="code" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a> = 1;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a03dea8803fea1685efa62ace8ab9b082"><div class="ttname"><a href="classspell.html#a03dea8803fea1685efa62ace8ab9b082">spell::temp_range_multiplyer</a></div><div class="ttdeci">float temp_range_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00438">magic.h:438</a></div></div>
<div class="ttc" id="aclassspell_html_a35f7c66814c80a047ed87d86d13ba6c6"><div class="ttname"><a href="classspell.html#a35f7c66814c80a047ed87d86d13ba6c6">spell::temp_difficulty_adjustment</a></div><div class="ttdeci">int temp_difficulty_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00440">magic.h:440</a></div></div>
<div class="ttc" id="aclassspell_html_a7d2e3b1f81c61f10312aa50e3626b2f9"><div class="ttname"><a href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">spell::temp_concentration_difficulty_multiplyer</a></div><div class="ttdeci">float temp_concentration_difficulty_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00443">magic.h:443</a></div></div>
<div class="ttc" id="aclassspell_html_abbefbc21e6bf90db7b45cae05c3a6c9f"><div class="ttname"><a href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">spell::temp_sound_multiplyer</a></div><div class="ttdeci">float temp_sound_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00442">magic.h:442</a></div></div>
<div class="ttc" id="aclassspell_html_add38c2281c13a3e1531b72db141b2a4b"><div class="ttname"><a href="classspell.html#add38c2281c13a3e1531b72db141b2a4b">spell::temp_spell_cost_multiplyer</a></div><div class="ttdeci">float temp_spell_cost_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00436">magic.h:436</a></div></div>
<div class="ttc" id="aclassspell_html_afca00dce83ea257e838d8cfade31955c"><div class="ttname"><a href="classspell.html#afca00dce83ea257e838d8cfade31955c">spell::temp_duration_multiplyer</a></div><div class="ttdeci">float temp_duration_multiplyer</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00439">magic.h:439</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00437">temp_aoe_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00435">temp_cast_time_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00443">temp_concentration_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00440">temp_difficulty_adjustment</a>, <a class="el" href="magic_8h_source.html#l00439">temp_duration_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00434">temp_level_adjustment</a>, <a class="el" href="magic_8h_source.html#l00438">temp_range_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00442">temp_sound_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00436">temp_spell_cost_multiplyer</a>.</p>

</div>
</div>
<a id="afe11a0854d38e947a10d02e29f7fd84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe11a0854d38e947a10d02e29f7fd84c">&#9670;&nbsp;</a></span>colorized_fail_percent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::colorized_fail_percent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01289">1289</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> fail_fl = <a class="code" href="classspell.html#ada3a6b9f7ba0c643ee59b8389b9f56ec">spell_fail</a>( guy ) * 100.0f;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    std::string fail_str;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    fail_fl == 100.0f ? fail_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Too Difficult!&quot;</span> ) : fail_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%.1f %% %s&quot;</span>,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                   fail_fl, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failure Chance&quot;</span> ) );</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span>( fail_fl &gt; 90.0f ) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fail_fl &gt; 75.0f ) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fail_fl &gt; 60.0f ) {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fail_fl &gt; 35.0f ) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fail_fl &gt; 15.0f ) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( fail_str, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> );</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;}</div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassspell_html_ada3a6b9f7ba0c643ee59b8389b9f56ec"><div class="ttname"><a href="classspell.html#ada3a6b9f7ba0c643ee59b8389b9f56ec">spell::spell_fail</a></div><div class="ttdeci">float spell_fail(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01220">magic.cpp:1220</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00026">color.h:26</a></div></div>
<div class="ttc" id="acolor_8h_html_a39fc218ef401d918701636583a85a168"><div class="ttname"><a href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a></div><div class="ttdeci">#define c_magenta</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00023">color.h:23</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00025">color.h:25</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="color_8h_source.html#l00020">c_green</a>, <a class="el" href="color_8h_source.html#l00026">c_light_green</a>, <a class="el" href="color_8h_source.html#l00025">c_light_red</a>, <a class="el" href="color_8h_source.html#l00023">c_magenta</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="color_8h_source.html#l00030">c_yellow</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="af69dedf22c42ebc9fb41f8f22102630d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af69dedf22c42ebc9fb41f8f22102630d">&#9670;&nbsp;</a></span>components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrequirement__data.html">requirement_data</a> &amp; spell::components </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01197">1197</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;{</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="magic_8h_source.html#l00219">spell_type::spell_components</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a2e1753d54122c01ea14e9abbb2bd886f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e1753d54122c01ea14e9abbb2bd886f">&#9670;&nbsp;</a></span>create_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::create_field </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>at</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01405">1405</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;{</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa5f6b0b99d9ffd592376016d6162359b">field</a> ) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a> = <a class="code" href="classspell.html#a9a0b1eb365a5b17870ea15171a60ee14">field_intensity</a>( caster ) + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#acedfba24abe1ece6dad25009b1797c33">field_intensity_variance</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>(</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                              d ) * <a class="code" href="classspell.html#a9a0b1eb365a5b17870ea15171a60ee14">field_intensity</a>( caster ),</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                          <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#acedfba24abe1ece6dad25009b1797c33">field_intensity_variance</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) * <a class="code" href="classspell.html#a9a0b1eb365a5b17870ea15171a60ee14">field_intensity</a>( caster ) );</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a> &lt;= 0 ) {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad7c34417b82c32b2f70b4d049b50f854">field_chance</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <a class="code" href="classfield__entry.html">field_entry</a> *<a class="code" href="classfield.html">field</a> = here.<a class="code" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( at, *<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa5f6b0b99d9ffd592376016d6162359b">field</a> );</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classfield.html">field</a> ) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <a class="code" href="classfield.html">field</a>-&gt;set_field_intensity( <a class="code" href="classfield.html">field</a>-&gt;get_field_intensity() + <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a> );</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( at, *<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa5f6b0b99d9ffd592376016d6162359b">field</a>, <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a>, -<a class="code" href="classspell.html#ad0fe357d9c04c94f9c6329c89d683dae">duration_turns</a>( caster ) );</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div>
<div class="ttc" id="aclassfield__entry_html"><div class="ttname"><a href="classfield__entry.html">field_entry</a></div><div class="ttdoc">An active or passive effect existing on a tile.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00020">field.h:21</a></div></div>
<div class="ttc" id="aclassfield_html"><div class="ttname"><a href="classfield.html">field</a></div><div class="ttdoc">A variable sized collection of field entries on a given map square.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00106">field.h:107</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06516">map.cpp:6516</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06563">map.cpp:6563</a></div></div>
<div class="ttc" id="aclassspell__type_html_aa5f6b0b99d9ffd592376016d6162359b"><div class="ttname"><a href="classspell__type.html#aa5f6b0b99d9ffd592376016d6162359b">spell_type::field</a></div><div class="ttdeci">std::optional&lt; field_type_id &gt; field</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00241">magic.h:241</a></div></div>
<div class="ttc" id="aclassspell__type_html_acedfba24abe1ece6dad25009b1797c33"><div class="ttname"><a href="classspell__type.html#acedfba24abe1ece6dad25009b1797c33">spell_type::field_intensity_variance</a></div><div class="ttdeci">dbl_or_var field_intensity_variance</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00251">magic.h:251</a></div></div>
<div class="ttc" id="aclassspell__type_html_ad7c34417b82c32b2f70b4d049b50f854"><div class="ttname"><a href="classspell__type.html#ad7c34417b82c32b2f70b4d049b50f854">spell_type::field_chance</a></div><div class="ttdeci">dbl_or_var field_chance</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00243">magic.h:243</a></div></div>
<div class="ttc" id="aclassspell_html_a9a0b1eb365a5b17870ea15171a60ee14"><div class="ttname"><a href="classspell.html#a9a0b1eb365a5b17870ea15171a60ee14">spell::field_intensity</a></div><div class="ttdeci">int field_intensity(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00677">magic.cpp:677</a></div></div>
<div class="ttc" id="aclassspell_html_ad0fe357d9c04c94f9c6329c89d683dae"><div class="ttname"><a href="classspell.html#ad0fe357d9c04c94f9c6329c89d683dae">spell::duration_turns</a></div><div class="ttdeci">time_duration duration_turns(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01000">magic.cpp:1000</a></div></div>
<div class="ttc" id="acreature_8h_html_a299ec0c42ccc5a2d79d1739428ac3210"><div class="ttname"><a href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a></div><div class="ttdeci">int intensity</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00240">creature.h:240</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="magic_8cpp_source.html#l01000">duration_turns()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8h_source.html#l00241">spell_type::field</a>, <a class="el" href="magic_8h_source.html#l00243">spell_type::field_chance</a>, <a class="el" href="magic_8cpp_source.html#l00677">field_intensity()</a>, <a class="el" href="magic_8h_source.html#l00251">spell_type::field_intensity_variance</a>, <a class="el" href="map_8cpp_source.html#l06516">map::get_field()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="creature_8h_source.html#l00240">intensity</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01664">spell_effect::dash()</a>.</p>

</div>
</div>
<a id="ad572a7c2376afa1bd84ca8ab9603ed2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad572a7c2376afa1bd84ca8ab9603ed2a">&#9670;&nbsp;</a></span>damage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::damage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00705">705</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_damage = <a class="code" href="classspell.html#a85529eef5a29f1e17b390ae63869c781">min_leveled_damage</a>( caster );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065">spell_flag::RANDOM_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_damage, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ),</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                    <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_damage,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ) );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60beddc934a1d3571d46ae521cc1fc6c">min_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= 0 ||</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60beddc934a1d3571d46ae521cc1fc6c">min_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_damage, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// if it&#39;s negative, min and max work differently</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_damage, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a60beddc934a1d3571d46ae521cc1fc6c"><div class="ttname"><a href="classspell__type.html#a60beddc934a1d3571d46ae521cc1fc6c">spell_type::min_damage</a></div><div class="ttdeci">dbl_or_var min_damage</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00262">magic.h:262</a></div></div>
<div class="ttc" id="aclassspell__type_html_af8a7ec1c8764bc1c98e5f045e8612f7f"><div class="ttname"><a href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">spell_type::max_damage</a></div><div class="ttdeci">dbl_or_var max_damage</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00266">magic.h:266</a></div></div>
<div class="ttc" id="aclassspell_html_a85529eef5a29f1e17b390ae63869c781"><div class="ttname"><a href="classspell.html#a85529eef5a29f1e17b390ae63869c781">spell::min_leveled_damage</a></div><div class="ttdeci">int min_leveled_damage(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00685">magic.cpp:685</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065">spell_flag::RANDOM_DAMAGE</a></div><div class="ttdeci">@ RANDOM_DAMAGE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00266">spell_type::max_damage</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00262">spell_type::min_damage</a>, <a class="el" href="magic_8cpp_source.html#l00685">min_leveled_damage()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065">RANDOM_DAMAGE</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l01714">spell_effect::banishment()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01651">spell_effect::bash()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="magic_8cpp_source.html#l00773">damage_string()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00982">spell_effect::directed_push()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01346">spell_effect::explosion()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01612">spell_effect::fungalize()</a>, <a class="el" href="magic_8cpp_source.html#l01763">get_damage_instance()</a>, <a class="el" href="magic_8cpp_source.html#l01770">get_dealt_damage_instance()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01498">spell_effect::guilt()</a>, <a class="el" href="magic_8cpp_source.html#l01804">heal()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01357">spell_effect::mod_moves()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01319">spell_effect::noise()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01276">spell_effect::recharge_vehicle()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">target_ui::run()</a>, <a class="el" href="magic_8cpp_source.html#l01428">sound_volume()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01233">spell_effect::spawn_summoned_monster()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00641">spell_effect::targeted_polymorph()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01307">spell_effect::transform_blast()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01485">spell_effect::upgrade()</a>.</p>

</div>
</div>
<a id="aaf83b0a24bf04d172819c3c82317a7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf83b0a24bf04d172819c3c82317a7c6">&#9670;&nbsp;</a></span>damage_dot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::damage_dot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00750">750</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_dot = <a class="code" href="classspell.html#a462c98a4cef24f9d7014f7afc9118aa3">min_leveled_dot</a>( caster );</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a3f73cb1637c08d9057dfc4e31a35f17e">min_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= 0 ||</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a1cd139dd8336e9b357b7c512c600daf8">max_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a3f73cb1637c08d9057dfc4e31a35f17e">min_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_dot, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a1cd139dd8336e9b357b7c512c600daf8">max_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// if it&#39;s negative, min and max work differently</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_dot, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a1cd139dd8336e9b357b7c512c600daf8">max_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a1cd139dd8336e9b357b7c512c600daf8"><div class="ttname"><a href="classspell__type.html#a1cd139dd8336e9b357b7c512c600daf8">spell_type::max_dot</a></div><div class="ttdeci">dbl_or_var max_dot</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00290">magic.h:290</a></div></div>
<div class="ttc" id="aclassspell__type_html_a3f73cb1637c08d9057dfc4e31a35f17e"><div class="ttname"><a href="classspell__type.html#a3f73cb1637c08d9057dfc4e31a35f17e">spell_type::min_dot</a></div><div class="ttdeci">dbl_or_var min_dot</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00286">magic.h:286</a></div></div>
<div class="ttc" id="aclassspell_html_a462c98a4cef24f9d7014f7afc9118aa3"><div class="ttname"><a href="classspell.html#a462c98a4cef24f9d7014f7afc9118aa3">spell::min_leveled_dot</a></div><div class="ttdeci">int min_leveled_dot(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00743">magic.cpp:743</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00290">spell_type::max_dot</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00286">spell_type::min_dot</a>, <a class="el" href="magic_8cpp_source.html#l00743">min_leveled_dot()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00762">damage_over_time()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a134d0709b0c5bc67e43a56ff6165854a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134d0709b0c5bc67e43a56ff6165854a">&#9670;&nbsp;</a></span>damage_over_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdamage__over__time__data.html">damage_over_time_data</a> spell::damage_over_time </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="bodypart_8h.html#ab5d79e6a6fc7e853dcd7e5fdc9cbe34c">bodypart_str_id</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>bps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00762">762</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;{</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="classdamage__over__time__data.html">damage_over_time_data</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.bps = bps;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.duration = <a class="code" href="classspell.html#ad0fe357d9c04c94f9c6329c89d683dae">duration_turns</a>( caster );</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.amount = <a class="code" href="classspell.html#aaf83b0a24bf04d172819c3c82317a7c6">damage_dot</a>( caster );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.type = <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>();</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div>
<div class="ttc" id="aclassdamage__over__time__data_html"><div class="ttname"><a href="classdamage__over__time__data.html">damage_over_time_data</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00177">damage.h:178</a></div></div>
<div class="ttc" id="aclassspell_html_aaf83b0a24bf04d172819c3c82317a7c6"><div class="ttname"><a href="classspell.html#aaf83b0a24bf04d172819c3c82317a7c6">spell::damage_dot</a></div><div class="ttdeci">int damage_dot(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00750">magic.cpp:750</a></div></div>
<div class="ttc" id="aclassspell_html_ac5425e8c7206d7502f6c403f95938d7b"><div class="ttname"><a href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">spell::dmg_type</a></div><div class="ttdeci">const damage_type_id &amp; dmg_type() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01758">magic.cpp:1758</a></div></div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">bodygraph_var::temp</a></div><div class="ttdeci">@ temp</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00750">damage_dot()</a>, <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>, <a class="el" href="magic_8cpp_source.html#l01000">duration_turns()</a>, and <a class="el" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>.</p>

</div>
</div>
<a id="a731bc4db74246a1e9265ea6f25abd7ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a731bc4db74246a1e9265ea6f25abd7ad">&#9670;&nbsp;</a></span>damage_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::damage_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00773">773</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;{</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    std::string <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065">spell_flag::RANDOM_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d-%d&quot;</span>, <a class="code" href="classspell.html#a85529eef5a29f1e17b390ae63869c781">min_leveled_damage</a>( caster ),</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af8a7ec1c8764bc1c98e5f045e8612f7f">max_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dmg = <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">if</span>( dmg &gt;= 0 ) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d&quot;</span>, dmg );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;+%d&quot;</span>, <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( dmg ) );</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba83ce92712f6d8aea3340cd5dcc2158f4">spell_flag::PERCENTAGE_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%% %s&quot;</span>, <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;of current HP&quot;</span> ) );</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a731bc4db74246a1e9265ea6f25abd7ad"><div class="ttname"><a href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">spell::damage_string</a></div><div class="ttdeci">std::string damage_string(const Character &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00773">magic.cpp:773</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba83ce92712f6d8aea3340cd5dcc2158f4"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba83ce92712f6d8aea3340cd5dcc2158f4">spell_flag::PERCENTAGE_DAMAGE</a></div><div class="ttdeci">@ PERCENTAGE_DAMAGE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h_source.html#l00266">spell_type::max_damage</a>, <a class="el" href="magic_8cpp_source.html#l00685">min_leveled_damage()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba83ce92712f6d8aea3340cd5dcc2158f4">PERCENTAGE_DAMAGE</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba24ae034aca7659a9c3b08c3df679b065">RANDOM_DAMAGE</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a1ed087b326bb00071482cadeff078b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed087b326bb00071482cadeff078b15">&#9670;&nbsp;</a></span>damage_type_color()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnc__color.html">nc_color</a> spell::damage_type_color </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01548">1548</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;{</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>().is_null() ) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>()-&gt;<a class="code" href="structdamage__type.html#a8872089798a7b34f4766f9a672617a0a">magic_color</a>;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div>
<div class="ttc" id="acolor_8h_html_a2d8f37367a34632745626276dd4c9da6"><div class="ttname"><a href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a></div><div class="ttdeci">#define c_black</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00015">color.h:15</a></div></div>
<div class="ttc" id="astructdamage__type_html_a8872089798a7b34f4766f9a672617a0a"><div class="ttname"><a href="structdamage__type.html#a8872089798a7b34f4766f9a672617a0a">damage_type::magic_color</a></div><div class="ttdeci">nc_color magic_color</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00037">damage.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00015">c_black</a>, <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>, and <a class="el" href="damage_8h_source.html#l00037">damage_type::magic_color</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00465">spell_effect_area()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a33b19b10be6eded53db5dee401ba6da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33b19b10be6eded53db5dee401ba6da5">&#9670;&nbsp;</a></span>damage_type_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::damage_type_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01556">1556</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;{</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>().is_null() ) {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>()-&gt;<a class="code" href="structdamage__type.html#ab329ea5acb5b5b6cb1e6224ead89ebcf">name</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
<div class="ttc" id="astructdamage__type_html_ab329ea5acb5b5b6cb1e6224ead89ebcf"><div class="ttname"><a href="structdamage__type.html#ab329ea5acb5b5b6cb1e6224ead89ebcf">damage_type::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00030">damage.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>, <a class="el" href="damage_8h_source.html#l00030">damage_type::name</a>, and <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="acc66691f05cd20a085370d79df52bafa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc66691f05cd20a085370d79df52bafa">&#9670;&nbsp;</a></span>description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::description </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01543">1543</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;{</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a0bf174d1f3134b53667d8381c02d6ee4">description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a0bf174d1f3134b53667d8381c02d6ee4"><div class="ttname"><a href="classspell__type.html#a0bf174d1f3134b53667d8381c02d6ee4">spell_type::description</a></div><div class="ttdeci">translation description</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00212">magic.h:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00212">spell_type::description</a>, <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="diary_8cpp_source.html#l00089">diary::spell_changes()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ac5425e8c7206d7502f6c403f95938d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5425e8c7206d7502f6c403f95938d7b">&#9670;&nbsp;</a></span>dmg_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a> &amp; spell::dmg_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01758">1758</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;{</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a7e9db1d8b823fa853544a91327332eee">dmg_type</a>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a7e9db1d8b823fa853544a91327332eee"><div class="ttname"><a href="classspell__type.html#a7e9db1d8b823fa853544a91327332eee">spell_type::dmg_type</a></div><div class="ttdeci">damage_type_id dmg_type</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00342">magic.h:342</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00342">spell_type::dmg_type</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00762">damage_over_time()</a>, <a class="el" href="magic_8cpp_source.html#l01548">damage_type_color()</a>, <a class="el" href="magic_8cpp_source.html#l01556">damage_type_string()</a>, <a class="el" href="magic_8cpp_source.html#l01763">get_damage_instance()</a>, and <a class="el" href="magic_8cpp_source.html#l01770">get_dealt_damage_instance()</a>.</p>

</div>
</div>
<a id="a039ec3d7b031caad827a8b7aa7e0acea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039ec3d7b031caad827a8b7aa7e0acea">&#9670;&nbsp;</a></span>dps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float spell::dps </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00693">693</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#afa2cd70d2587c495c1565209b2292a36">effect_name</a> != <span class="stringliteral">&quot;attack&quot;</span> ) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> time_modifier = 100.0f / <a class="code" href="classspell.html#a4feeb99d5b76aac0263c4730be9882d5">casting_time</a>( caster );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> failure_modifier = 1.0f - <a class="code" href="classspell.html#ada3a6b9f7ba0c643ee59b8389b9f56ec">spell_fail</a>( caster );</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> raw_dps = <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) + <a class="code" href="classspell.html#aaf83b0a24bf04d172819c3c82317a7c6">damage_dot</a>( caster ) * <a class="code" href="classspell.html#ad0fe357d9c04c94f9c6329c89d683dae">duration_turns</a>( caster ) / 1_turns;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// TODO: calculate true dps with armor and resistances and any caster bonuses</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> raw_dps * time_modifier * failure_modifier;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_afa2cd70d2587c495c1565209b2292a36"><div class="ttname"><a href="classspell__type.html#afa2cd70d2587c495c1565209b2292a36">spell_type::effect_name</a></div><div class="ttdeci">std::string effect_name</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00226">magic.h:226</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8cpp_source.html#l00750">damage_dot()</a>, <a class="el" href="magic_8cpp_source.html#l01000">duration_turns()</a>, <a class="el" href="magic_8h_source.html#l00226">spell_type::effect_name</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc__attack_8cpp_source.html#l00173">npc_attack_spell::evaluate_tripoint()</a>.</p>

</div>
</div>
<a id="a3a67307def07ddc6d2e2c134d21c245f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a67307def07ddc6d2e2c134d21c245f">&#9670;&nbsp;</a></span>duration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::duration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00965">965</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_duration = <a class="code" href="classspell.html#a19feb836872fc2fe3818f933a9029f00">min_leveled_duration</a>( caster );</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">duration</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030">spell_flag::RANDOM_DURATION</a> ) ) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_duration, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ),</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                    <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_duration,</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ) );</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a51accd4d56a09f1c2f5dae55832a8797">min_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_duration, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_duration, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">duration</a> * <a class="code" href="classspell.html#afca00dce83ea257e838d8cfade31955c">temp_duration_multiplyer</a>, 0.0f );</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a51accd4d56a09f1c2f5dae55832a8797"><div class="ttname"><a href="classspell__type.html#a51accd4d56a09f1c2f5dae55832a8797">spell_type::min_duration</a></div><div class="ttdeci">dbl_or_var min_duration</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00295">magic.h:295</a></div></div>
<div class="ttc" id="aclassspell__type_html_a6a3a8e6c712829cd8a4b8ecb6b56a041"><div class="ttname"><a href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">spell_type::max_duration</a></div><div class="ttdeci">dbl_or_var max_duration</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00300">magic.h:300</a></div></div>
<div class="ttc" id="aclassspell_html_a19feb836872fc2fe3818f933a9029f00"><div class="ttname"><a href="classspell.html#a19feb836872fc2fe3818f933a9029f00">spell::min_leveled_duration</a></div><div class="ttdeci">int min_leveled_duration(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00958">magic.cpp:958</a></div></div>
<div class="ttc" id="aclassspell_html_a3a67307def07ddc6d2e2c134d21c245f"><div class="ttname"><a href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">spell::duration</a></div><div class="ttdeci">int duration(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00965">magic.cpp:965</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030">spell_flag::RANDOM_DURATION</a></div><div class="ttdeci">@ RANDOM_DURATION</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00300">spell_type::max_duration</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00295">spell_type::min_duration</a>, <a class="el" href="magic_8cpp_source.html#l00958">min_leveled_duration()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030">RANDOM_DURATION</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="magic_8h_source.html#l00439">temp_duration_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00485">add_effect_to_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>, <a class="el" href="magic_8cpp_source.html#l01000">duration_turns()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a4b1a5a0c2bd28fb4101608783f25b101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b1a5a0c2bd28fb4101608783f25b101">&#9670;&nbsp;</a></span>duration_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::duration_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00985">985</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;{</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030">spell_flag::RANDOM_DURATION</a> ) ) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s - %s&quot;</span>, <a class="code" href="magic_8cpp.html#a9f6573c11f8d6e7562a97ba6f807396e">moves_to_string</a>( <a class="code" href="classspell.html#a19feb836872fc2fe3818f933a9029f00">min_leveled_duration</a>( caster ) ),</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                              <a class="code" href="magic_8cpp.html#a9f6573c11f8d6e7562a97ba6f807396e">moves_to_string</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6a3a8e6c712829cd8a4b8ecb6b56a041">max_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54bcf9b291726b4cf8343f61681a5cfd">spell_flag::PERMANENT</a> ) &amp;&amp; ( <a class="code" href="classspell.html#ac0702e64e2757dd74767f00f2e4cd159">is_max_level</a>( caster ) ||</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                 <a class="code" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>() == <span class="stringliteral">&quot;summon&quot;</span> ) ) ||</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;               <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba82397545cee465e4bda1cb70ef78c0f0">spell_flag::PERMANENT_ALL_LEVELS</a> ) ) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Permanent&quot;</span> );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="magic_8cpp.html#a9f6573c11f8d6e7562a97ba6f807396e">moves_to_string</a>( <a class="code" href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">duration</a>( caster ) );</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_aa34fc8ebf8b820ac055f4b4dd9d78c35"><div class="ttname"><a href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">spell::effect</a></div><div class="ttdeci">std::string effect() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01454">magic.cpp:1454</a></div></div>
<div class="ttc" id="aclassspell_html_ac0702e64e2757dd74767f00f2e4cd159"><div class="ttname"><a href="classspell.html#ac0702e64e2757dd74767f00f2e4cd159">spell::is_max_level</a></div><div class="ttdeci">bool is_max_level(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01026">magic.cpp:1026</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a9f6573c11f8d6e7562a97ba6f807396e"><div class="ttname"><a href="magic_8cpp.html#a9f6573c11f8d6e7562a97ba6f807396e">moves_to_string</a></div><div class="ttdeci">static std::string moves_to_string(const int moves)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00260">magic.cpp:260</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba54bcf9b291726b4cf8343f61681a5cfd"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54bcf9b291726b4cf8343f61681a5cfd">spell_flag::PERMANENT</a></div><div class="ttdeci">@ PERMANENT</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba82397545cee465e4bda1cb70ef78c0f0"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba82397545cee465e4bda1cb70ef78c0f0">spell_flag::PERMANENT_ALL_LEVELS</a></div><div class="ttdeci">@ PERMANENT_ALL_LEVELS</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, <a class="el" href="magic_8cpp_source.html#l01454">effect()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01026">is_max_level()</a>, <a class="el" href="magic_8h_source.html#l00300">spell_type::max_duration</a>, <a class="el" href="magic_8cpp_source.html#l00958">min_leveled_duration()</a>, <a class="el" href="magic_8cpp_source.html#l00260">moves_to_string()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54bcf9b291726b4cf8343f61681a5cfd">PERMANENT</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba82397545cee465e4bda1cb70ef78c0f0">PERMANENT_ALL_LEVELS</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197bac17984263d7ed29c73a2b4fe8f783030">RANDOM_DURATION</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ad0fe357d9c04c94f9c6329c89d683dae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0fe357d9c04c94f9c6329c89d683dae">&#9670;&nbsp;</a></span>duration_turns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> spell::duration_turns </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01000">1000</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;{</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( <a class="code" href="classspell.html#a3a67307def07ddc6d2e2c134d21c245f">duration</a>( caster ) );</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;}</div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, and <a class="el" href="calendar_8h_source.html#l00225">time_duration::from_moves()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01405">create_field()</a>, <a class="el" href="magic_8cpp_source.html#l00762">damage_over_time()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01498">spell_effect::guilt()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01809">spell_effect::slime_split_on_death()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01233">spell_effect::spawn_summoned_monster()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01255">spell_effect::spawn_summoned_vehicle()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01165">spell_effect::timed_event()</a>.</p>

</div>
</div>
<a id="aa34fc8ebf8b820ac055f4b4dd9d78c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa34fc8ebf8b820ac055f4b4dd9d78c35">&#9670;&nbsp;</a></span>effect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::effect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01454">1454</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;{</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#afa2cd70d2587c495c1565209b2292a36">effect_name</a>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00226">spell_type::effect_name</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a10720b544d7c92b9606008819cc2896e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10720b544d7c92b9606008819cc2896e">&#9670;&nbsp;</a></span>effect_area() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; spell::effect_area </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00873">873</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5d51ae843768a4cacadb5e88cf871ebe">spell_area_function</a>( params, source, target );</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a5d51ae843768a4cacadb5e88cf871ebe"><div class="ttname"><a href="classspell__type.html#a5d51ae843768a4cacadb5e88cf871ebe">spell_type::spell_area_function</a></div><div class="ttdeci">std::function&lt; std::set&lt; tripoint &gt; const spell_effect::override_parameters &amp;params, const tripoint &amp;source, const tripoint &amp;target)&gt; spell_area_function</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00232">magic.h:232</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00232">spell_type::spell_area_function</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00426">calculate_spell_effect_area()</a>, and <a class="el" href="magic_8cpp_source.html#l00879">effect_area()</a>.</p>

</div>
</div>
<a id="aab9c6da52fa3253933f9b011f5c0412b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab9c6da52fa3253933f9b011f5c0412b">&#9670;&nbsp;</a></span>effect_area() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; spell::effect_area </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00879">879</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#a10720b544d7c92b9606008819cc2896e">effect_area</a>( <a class="code" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a>( *<span class="keyword">this</span>, caster ), source, target );</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a10720b544d7c92b9606008819cc2896e"><div class="ttname"><a href="classspell.html#a10720b544d7c92b9606008819cc2896e">spell::effect_area</a></div><div class="ttdeci">std::set&lt; tripoint &gt; effect_area(const spell_effect::override_parameters &amp;params, const tripoint &amp;source, const tripoint &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00873">magic.cpp:873</a></div></div>
<div class="ttc" id="astructspell__effect_1_1override__parameters_html"><div class="ttname"><a href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00738">magic.h:738</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00873">effect_area()</a>.</p>

</div>
</div>
<a id="ab6f8776ac707639708392c616d93fa58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6f8776ac707639708392c616d93fa58">&#9670;&nbsp;</a></span>effect_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::effect_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01794">1794</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;{</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ab1b1ec17f8a72265b3de8de7182b42e6">effect_str</a>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_ab1b1ec17f8a72265b3de8de7182b42e6"><div class="ttname"><a href="classspell__type.html#ab1b1ec17f8a72265b3de8de7182b42e6">spell_type::effect_str</a></div><div class="ttdeci">std::string effect_str</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00236">magic.h:236</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00236">spell_type::effect_str</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00485">add_effect_to_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01200">add_summoned_mon()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01476">spell_effect::add_trap()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01787">spell_effect::effect_on_condition()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01604">spell_effect::emit()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01498">spell_effect::guilt()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00590">magical_polymorph()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01593">spell_effect::remove_effect()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00905">spell_effect::remove_field()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01433">spell_effect::revive()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01455">spell_effect::revive_dormant()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01165">spell_effect::timed_event()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01307">spell_effect::transform_blast()</a>.</p>

</div>
</div>
<a id="a4ddf2ffd71f86bc2ca2ebca259071924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ddf2ffd71f86bc2ca2ebca259071924">&#9670;&nbsp;</a></span>energy_cost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::energy_cost </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01040">1040</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;{</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordtype">int</span> cost;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( guy ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">base_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &lt; <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a171e7148d9087468c1be262d13802338">final_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        cost = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a171e7148d9087468c1be262d13802338">final_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ),</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">base_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) +</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                                           <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a374a9343878e6614c0185f25acf37b30">energy_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) * <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() ) ) );</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">base_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt; <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a171e7148d9087468c1be262d13802338">final_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        cost = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a171e7148d9087468c1be262d13802338">final_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ),</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">base_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) +</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                                           <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a374a9343878e6614c0185f25acf37b30">energy_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) * <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() ) ) );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        cost = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">base_energy_cost</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d );</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">no_hands</a>() &amp;&amp; !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a> ) ) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="comment">// the first 10 points of combined encumbrance is ignored, but quickly adds up</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> hands_encumb = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                                           guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a">body_part_type::type::hand</a> ) - 5 );</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keywordflow">switch</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad7a21ee64ec72743911b9461e3add78b">energy_source</a> ) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                cost += 10 * hands_encumb * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a>:</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                cost += hands_encumb * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">magic_energy_type::stamina</a>:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                cost += 100 * hands_encumb * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( cost * <a class="code" href="classspell.html#add38c2281c13a3e1531b72db141b2a4b">temp_spell_cost_multiplyer</a>, 0.0f );</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a171e7148d9087468c1be262d13802338"><div class="ttname"><a href="classspell__type.html#a171e7148d9087468c1be262d13802338">spell_type::final_energy_cost</a></div><div class="ttdeci">dbl_or_var final_energy_cost</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00317">magic.h:317</a></div></div>
<div class="ttc" id="aclassspell__type_html_a374a9343878e6614c0185f25acf37b30"><div class="ttname"><a href="classspell__type.html#a374a9343878e6614c0185f25acf37b30">spell_type::energy_increment</a></div><div class="ttdeci">dbl_or_var energy_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00315">magic.h:315</a></div></div>
<div class="ttc" id="aclassspell__type_html_a9b70e44b3a6f82719d4b823eddc5d686"><div class="ttname"><a href="classspell__type.html#a9b70e44b3a6f82719d4b823eddc5d686">spell_type::base_energy_cost</a></div><div class="ttdeci">dbl_or_var base_energy_cost</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00313">magic.h:313</a></div></div>
<div class="ttc" id="aclassspell__type_html_ad7a21ee64ec72743911b9461e3add78b"><div class="ttname"><a href="classspell__type.html#ad7a21ee64ec72743911b9461e3add78b">spell_type::energy_source</a></div><div class="ttdeci">magic_energy_type energy_source</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00340">magic.h:340</a></div></div>
<div class="ttc" id="aclassspell_html_a8fabcf473532ae18478ca8c826543ebe"><div class="ttname"><a href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">spell::no_hands</a></div><div class="ttdeci">bool no_hands() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01083">magic.cpp:1083</a></div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">magic_energy_type::stamina</a></div><div class="ttdeci">@ stamina</div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a></div><div class="ttdeci">@ hp</div></div>
<div class="ttc" id="astructbody__part__type_html_a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a"><div class="ttname"><a href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a">body_part_type::type::hand</a></div><div class="ttdeci">@ hand</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l04030">Character::avg_encumb_of_limb_type()</a>, <a class="el" href="magic_8h_source.html#l00313">spell_type::base_energy_cost</a>, <a class="el" href="magic_8h_source.html#l00315">spell_type::energy_increment</a>, <a class="el" href="magic_8h_source.html#l00340">spell_type::energy_source</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8h_source.html#l00317">spell_type::final_energy_cost</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a">body_part_type::hand</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">hp</a>, <a class="el" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8cpp_source.html#l01083">no_hands()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">stamina</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00436">temp_spell_cost_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l01353">energy_cost_string()</a>, <a class="el" href="magic_8cpp_source.html#l02185">known_magic::has_enough_energy()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a3b6438c213ded75c5d4ea791424653e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6438c213ded75c5d4ea791424653e8">&#9670;&nbsp;</a></span>energy_cost_encumbered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::energy_cost_encumbered </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l02398">2398</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;{</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">no_hands</a>() &amp;&amp; !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a> ) ) {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a">body_part_type::type:: hand</a> ) - 5 ) &gt;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;               0;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l04030">Character::avg_encumb_of_limb_type()</a>, <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a573ce5969e9884d49d4fab77b09a306a">body_part_type::hand</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, and <a class="el" href="magic_8cpp_source.html#l01083">no_hands()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a0d3f68783edb1af2e111e85f7a1715fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d3f68783edb1af2e111e85f7a1715fa">&#9670;&nbsp;</a></span>energy_cost_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::energy_cost_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01353">1353</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;{</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">magic_energy_type::none</a> ) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;none&quot;</span> );</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">magic_energy_type::bionic</a> || <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">magic_energy_type::mana</a> ) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( <a class="code" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a>( guy ) ), <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> );</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a> ) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keyword">auto</span> pair = <a class="code" href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a>( <a class="code" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a>( guy ), guy.<a class="code" href="classCreature.html#a6e1819fd37a50af66566c6d1b896572a">get_hp_max</a>() / 6 );</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( pair.first, pair.second );</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">magic_energy_type::stamina</a> ) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keyword">auto</span> pair = <a class="code" href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a>( <a class="code" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a>( guy ), guy.<a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() );</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( pair.first, pair.second );</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Spell %s has invalid energy source.&quot;</span>, <span class="keywordtype">id</span>().c_str() );</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;error: energy_type&quot;</span> );</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_abf1cdb8f4662bf96c8d762e9229df8d9"><div class="ttname"><a href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d, const bool compact)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00546">calendar.cpp:546</a></div></div>
<div class="ttc" id="aclassCharacter_html_aefe5432750eb1c2c65fea628fd9878a7"><div class="ttname"><a href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">Character::get_stamina_max</a></div><div class="ttdeci">int get_stamina_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06815">character.cpp:6815</a></div></div>
<div class="ttc" id="aclassCreature_html_a6e1819fd37a50af66566c6d1b896572a"><div class="ttname"><a href="classCreature.html#a6e1819fd37a50af66566c6d1b896572a">Creature::get_hp_max</a></div><div class="ttdeci">virtual int get_hp_max(const bodypart_id &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02765">creature.cpp:2765</a></div></div>
<div class="ttc" id="aclassspell_html_a593232b1e5fc4c81d536724d40322efd"><div class="ttname"><a href="classspell.html#a593232b1e5fc4c81d536724d40322efd">spell::energy_source</a></div><div class="ttdeci">magic_energy_type energy_source() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01459">magic.cpp:1459</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">magic_energy_type::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">magic_energy_type::mana</a></div><div class="ttdeci">@ mana</div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">magic_energy_type::bionic</a></div><div class="ttdeci">@ bionic</div></div>
<div class="ttc" id="aoutput_8cpp_html_aafdcbf1eb3398c6e92cf3b71f6c8ad03"><div class="ttname"><a href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a></div><div class="ttdeci">std::pair&lt; std::string, nc_color &gt; get_hp_bar(const int cur_hp, const int max_hp, const bool is_mon)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02657">output.cpp:2657</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">bionic</a>, <a class="el" href="color_8h_source.html#l00027">c_light_blue</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l01459">energy_source()</a>, <a class="el" href="output_8cpp_source.html#l02657">get_hp_bar()</a>, <a class="el" href="creature_8cpp_source.html#l02765">Creature::get_hp_max()</a>, <a class="el" href="character_8cpp_source.html#l06815">Character::get_stamina_max()</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">hp</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">mana</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">stamina</a>, and <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a1dc2bd4fd1f177c091237236627bd993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dc2bd4fd1f177c091237236627bd993">&#9670;&nbsp;</a></span>energy_cur_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::energy_cur_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01373">1373</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">magic_energy_type::none</a> ) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;infinite&quot;</span> );</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">magic_energy_type::bionic</a> ) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( guy.<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() ) ), <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> );</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">magic_energy_type::mana</a> ) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( guy.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;available_mana() ), <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> );</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">magic_energy_type::stamina</a> ) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="keyword">auto</span> pair = <a class="code" href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a>( guy.<a class="code" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>(), guy.<a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() );</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( pair.first, pair.second );</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a> ) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Spell %s has invalid energy source.&quot;</span>, <span class="keywordtype">id</span>().c_str() );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;error: energy_type&quot;</span> );</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0ffe14df559cee6e9b5d02f5b214d009"><div class="ttname"><a href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">Character::get_stamina</a></div><div class="ttdeci">int get_stamina() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06806">character.cpp:6806</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02824">character.cpp:2824</a></div></div>
<div class="ttc" id="anamespaceunits_html_a7f3948de70e78d68af74fb3d119cf176"><div class="ttname"><a href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a></div><div class="ttdeci">constexpr value_type to_kilojoule(const quantity&lt; value_type, energy_in_millijoule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00578">units.h:578</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">bionic</a>, <a class="el" href="color_8h_source.html#l00027">c_light_blue</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="magic_8cpp_source.html#l01459">energy_source()</a>, <a class="el" href="output_8cpp_source.html#l02657">get_hp_bar()</a>, <a class="el" href="character_8cpp_source.html#l02824">Character::get_power_level()</a>, <a class="el" href="character_8cpp_source.html#l06806">Character::get_stamina()</a>, <a class="el" href="character_8cpp_source.html#l06815">Character::get_stamina_max()</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">hp</a>, <a class="el" href="character_8h_source.html#l02485">Character::magic</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">mana</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">stamina</a>, <a class="el" href="units_8h_source.html#l00578">units::to_kilojoule()</a>, and <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a593232b1e5fc4c81d536724d40322efd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593232b1e5fc4c81d536724d40322efd">&#9670;&nbsp;</a></span>energy_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1">magic_energy_type</a> spell::energy_source </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01459">1459</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;{</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad7a21ee64ec72743911b9461e3add78b">energy_source</a>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00340">spell_type::energy_source</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01353">energy_cost_string()</a>, <a class="el" href="magic_8cpp_source.html#l01373">energy_cur_string()</a>, <a class="el" href="magic_8cpp_source.html#l02185">known_magic::has_enough_energy()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="aeb55e6084337fb199e3cab09260ad916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb55e6084337fb199e3cab09260ad916">&#9670;&nbsp;</a></span>energy_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::energy_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01337">1337</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;{</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad7a21ee64ec72743911b9461e3add78b">energy_source</a> ) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a>:</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;health&quot;</span> );</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">magic_energy_type::mana</a>:</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;mana&quot;</span> );</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">magic_energy_type::stamina</a>:</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;stamina&quot;</span> );</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">magic_energy_type::bionic</a>:</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;kJ&quot;</span> );</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aa6acf03e06c9aa4b52e754089a17a13d">bionic</a>, <a class="el" href="magic_8h_source.html#l00340">spell_type::energy_source</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">hp</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a582fc884d6299814fbd4f12c1f9ae70f">mana</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1aae3d27c3f9334ce5e3a9806605151cae">stamina</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">target_ui::run()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a03e3c04f223a81a850f493fb8ee65dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e3c04f223a81a850f493fb8ee65dd3">&#9670;&nbsp;</a></span>enumerate_spell_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::enumerate_spell_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l02409">2409</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;{</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    std::vector&lt;std::string&gt; spell_data;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;is a psionic power&quot;</span> ) );</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    }</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c">spell_flag::CONCENTRATE</a> ) &amp;&amp; !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) &amp;&amp;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        <a class="code" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;requires concentration&quot;</span> ) );</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2">spell_flag::VERBAL</a> ) &amp;&amp; <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;verbal&quot;</span> ) );</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">spell_flag::SOMATIC</a> ) &amp;&amp; <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;somatic&quot;</span> ) );</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    }</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">no_hands</a>() ) {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;impeded by gloves&quot;</span> ) );</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classspell.html#a8fabcf473532ae18478ca8c826543ebe">no_hands</a>() &amp;&amp; !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;does not require hands&quot;</span> ) );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">spell_flag::NO_LEGS</a> ) &amp;&amp; <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;requires mobility&quot;</span> ) );</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    }</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>() == <span class="stringliteral">&quot;attack&quot;</span> &amp;&amp; <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( guy ) &gt; 1 &amp;&amp; <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">spell_flag::NO_PROJECTILE</a> ) &amp;&amp;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;can be cast through walls&quot;</span> ) );</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>() == <span class="stringliteral">&quot;attack&quot;</span> &amp;&amp; <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( guy ) &gt; 1 &amp;&amp; <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">spell_flag::NO_PROJECTILE</a> ) &amp;&amp;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> ) ) {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        spell_data.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;can be channeled through walls&quot;</span> ) );</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( spell_data );</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_ab00175ffc465d406a7ec24331c6c55f2"><div class="ttname"><a href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">spell::range</a></div><div class="ttdeci">int range(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00905">magic.cpp:905</a></div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c">spell_flag::CONCENTRATE</a></div><div class="ttdeci">@ CONCENTRATE</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">spell_flag::NO_PROJECTILE</a></div><div class="ttdeci">@ NO_PROJECTILE</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2">spell_flag::VERBAL</a></div><div class="ttdeci">@ VERBAL</div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c">CONCENTRATE</a>, <a class="el" href="magic_8cpp_source.html#l01454">effect()</a>, <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01083">no_hands()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba5b16e7a428e2fc90a37998f0fb12631f">NO_LEGS</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">NO_PROJECTILE</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">PSIONIC</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">SOMATIC</a>, <a class="el" href="magic_8h_source.html#l00443">temp_concentration_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00442">temp_sound_multiplyer</a>, and <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2">VERBAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="af5435ef2b2d958b64074ba3846dd96c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5435ef2b2d958b64074ba3846dd96c4">&#9670;&nbsp;</a></span>enumerate_targets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::enumerate_targets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01683">1683</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;{</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    std::vector&lt;std::string&gt; all_valid_targets;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordtype">int</span> last_target = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a6a406aeb26461172ad7d4e04543dcc48">spell_target::num_spell_targets</a> );</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; last_target; ++i ) {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7">spell_target</a> t = <span class="keyword">static_cast&lt;</span><a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7">spell_target</a><span class="keyword">&gt;</span>( i );</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( t ) &amp;&amp; t != <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8">spell_target::none</a> ) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            all_valid_targets.emplace_back( <a class="code" href="magic_8cpp.html#ad62eb3216b3dd4152ccd605b3803b5aa">target_to_string</a>( t ) );</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">if</span>( all_valid_targets.size() == 1 ) {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="keywordflow">return</span> all_valid_targets[0];</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="comment">// TODO: if only we had a function to enumerate strings and concatenate them...</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = all_valid_targets.begin(); iter != all_valid_targets.end(); iter++ ) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span>( iter + 1 == all_valid_targets.end() ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s and %s&quot;</span> ), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, *iter );</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iter == all_valid_targets.begin() ) {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = *iter;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s, %s&quot;</span> ), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, *iter );</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_adc1aee8fd855fce28ebb1dcc39e37a12"><div class="ttname"><a href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">spell::is_valid_target</a></div><div class="ttdeci">bool is_valid_target(const Creature &amp;caster, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01474">magic.cpp:1474</a></div></div>
<div class="ttc" id="amagic_8cpp_html_ad62eb3216b3dd4152ccd605b3803b5aa"><div class="ttname"><a href="magic_8cpp.html#ad62eb3216b3dd4152ccd605b3803b5aa">target_to_string</a></div><div class="ttdeci">static std::string target_to_string(spell_target data)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00065">magic.cpp:65</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7">spell_target</a></div><div class="ttdeci">spell_target</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00100">magic.h:100</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8">spell_target::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a6a406aeb26461172ad7d4e04543dcc48"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a6a406aeb26461172ad7d4e04543dcc48">spell_target::num_spell_targets</a></div><div class="ttdeci">@ num_spell_targets</div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a6a406aeb26461172ad7d4e04543dcc48">num_spell_targets</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="magic_8cpp_source.html#l00065">target_to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ad4dff616ba1d80004e9da4b9858b54ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4dff616ba1d80004e9da4b9858b54ea">&#9670;&nbsp;</a></span>exp_for_level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::exp_for_level </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01641">1641</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;{</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="comment">// level 0 never needs xp</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">if</span>( level == 0 ) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">std::ceil</a>( std::exp( ( level - <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) * <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) ) - <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">static constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01566">magic.cpp:1566</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_ac9196b0cf8d9dd209db9fc00a69a55f6"><div class="ttname"><a href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">ceil</a></div><div class="ttdeci">double ceil(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00100">math_parser_func.h:100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01566">a</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, and <a class="el" href="math__parser__func_8h_source.html#l00100">ceil()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00918">debug_menu::change_spells()</a>, <a class="el" href="magic_8cpp_source.html#l01655">exp_progress()</a>, <a class="el" href="magic_8cpp_source.html#l01650">exp_to_next_level()</a>, <a class="el" href="magic_8cpp_source.html#l03023">fake_spell::get_spell()</a>, and <a class="el" href="math__parser__diag_8cpp_source.html#l00991">anonymous_namespace{math_parser_diag.cpp}::spell_exp_for_level_eval()</a>.</p>

</div>
</div>
<a id="ad7a99f3d7def292a3e9af0b869e51103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a99f3d7def292a3e9af0b869e51103">&#9670;&nbsp;</a></span>exp_modifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float spell::exp_modifier </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01666">1666</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;{</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> int_modifier = ( guy.<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() - 8.0f ) / 8.0f;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> difficulty_modifier = <a class="code" href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">get_difficulty</a>( guy ) / 20.0f;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> spellcraft_modifier = guy.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classspell.html#ab4c5d1958442f999fe006be4d89883cf">skill</a>() ) / 10.0f;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">return</span> ( int_modifier + difficulty_modifier + spellcraft_modifier ) / 5.0f + 1.0f;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a588d5cc1d729490552fe03b006685ae5"><div class="ttname"><a href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">Character::get_int</a></div><div class="ttdeci">int get_int() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04139">character.cpp:4139</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassspell_html_ab4c5d1958442f999fe006be4d89883cf"><div class="ttname"><a href="classspell.html#ab4c5d1958442f999fe006be4d89883cf">spell::skill</a></div><div class="ttdeci">skill_id skill() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00672">magic.cpp:672</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01147">get_difficulty()</a>, <a class="el" href="character_8cpp_source.html#l04139">Character::get_int()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, and <a class="el" href="magic_8cpp_source.html#l00672">skill()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01675">casting_exp()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01944">magic_train()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>.</p>

</div>
</div>
<a id="a231a9d535b9ea869e90963f7e2351c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231a9d535b9ea869e90963f7e2351c66">&#9670;&nbsp;</a></span>exp_progress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::exp_progress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01655">1655</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;{</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> level = <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> this_level_xp = <a class="code" href="classspell.html#ad4dff616ba1d80004e9da4b9858b54ea">exp_for_level</a>( level );</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> next_level_xp = <a class="code" href="classspell.html#ad4dff616ba1d80004e9da4b9858b54ea">exp_for_level</a>( level + 1 );</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> denominator = next_level_xp - this_level_xp;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> progress = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#a1758e56413516ae56a4ee161e998c338">xp</a>() - this_level_xp ) / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                           <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( denominator ) );</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%i%%&quot;</span>, <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( progress * 100 ) ), 0, 99 ) );</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="aclassspell_html_a006cfd33c15f732b2463eda1ae0686cc"><div class="ttname"><a href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">spell::get_level</a></div><div class="ttdeci">int get_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01570">magic.cpp:1570</a></div></div>
<div class="ttc" id="aclassspell_html_ad4dff616ba1d80004e9da4b9858b54ea"><div class="ttname"><a href="classspell.html#ad4dff616ba1d80004e9da4b9858b54ea">spell::exp_for_level</a></div><div class="ttdeci">static int exp_for_level(int level)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01641">magic.cpp:1641</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="magic_8cpp_source.html#l01641">exp_for_level()</a>, <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="magic_8cpp_source.html#l01317">xp()</a>.</p>

</div>
</div>
<a id="a4907623e7faca6b194e24543b1862d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4907623e7faca6b194e24543b1862d1e">&#9670;&nbsp;</a></span>exp_to_next_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::exp_to_next_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01650">1650</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;{</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#ad4dff616ba1d80004e9da4b9858b54ea">exp_for_level</a>( <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() + 1 ) - <a class="code" href="classspell.html#a1758e56413516ae56a4ee161e998c338">xp</a>();</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01641">exp_for_level()</a>, <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, and <a class="el" href="magic_8cpp_source.html#l01317">xp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01005">gain_level()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a9a0b1eb365a5b17870ea15171a60ee14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a0b1eb365a5b17870ea15171a60ee14">&#9670;&nbsp;</a></span>field_intensity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::field_intensity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00677">677</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#abe44166acf59a9344d7f0bd0dd934dd9">max_field_intensity</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ),</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                     <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a59beaea1200f5386e09aee0c7c7866df">min_field_intensity</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                       <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a4e0d43953a8887f6b183e9007fead3f1">field_intensity_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) ) );</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a4e0d43953a8887f6b183e9007fead3f1"><div class="ttname"><a href="classspell__type.html#a4e0d43953a8887f6b183e9007fead3f1">spell_type::field_intensity_increment</a></div><div class="ttdeci">dbl_or_var field_intensity_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00247">magic.h:247</a></div></div>
<div class="ttc" id="aclassspell__type_html_a59beaea1200f5386e09aee0c7c7866df"><div class="ttname"><a href="classspell__type.html#a59beaea1200f5386e09aee0c7c7866df">spell_type::min_field_intensity</a></div><div class="ttdeci">dbl_or_var min_field_intensity</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00245">magic.h:245</a></div></div>
<div class="ttc" id="aclassspell__type_html_abe44166acf59a9344d7f0bd0dd934dd9"><div class="ttname"><a href="classspell__type.html#abe44166acf59a9344d7f0bd0dd934dd9">spell_type::max_field_intensity</a></div><div class="ttdeci">dbl_or_var max_field_intensity</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00249">magic.h:249</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8h_source.html#l00247">spell_type::field_intensity_increment</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00249">spell_type::max_field_intensity</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00245">spell_type::min_field_intensity</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01405">create_field()</a>, and <a class="el" href="npc__attack_8cpp_source.html#l00173">npc_attack_spell::evaluate_tripoint()</a>.</p>

</div>
</div>
<a id="a526d158b9396a81cb13186db31c53ae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526d158b9396a81cb13186db31c53ae1">&#9670;&nbsp;</a></span>gain_exp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::gain_exp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nxp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01322">1322</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;{</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordtype">int</span> oldLevel = <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>();</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a> += nxp;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span>( guy.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; oldLevel != <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() ) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a15d9350620fdb06df8ad3d5410d8d54f">event_type::player_levels_spell</a>&gt;( guy.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), <a class="code" href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">id</a>(), <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>(),</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <a class="code" href="classspell.html#a388a3e18bba1c58aa9c00dc53bc97aef">spell_class</a>() );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a15d9350620fdb06df8ad3d5410d8d54f"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a15d9350620fdb06df8ad3d5410d8d54f">event_type::player_levels_spell</a></div><div class="ttdeci">@ player_levels_spell</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00429">experience</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="magic_8cpp_source.html#l00662">id()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a15d9350620fdb06df8ad3d5410d8d54f">player_levels_spell</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, and <a class="el" href="magic_8cpp_source.html#l00667">spell_class()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01005">gain_level()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01944">magic_train()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>.</p>

</div>
</div>
<a id="a682544edebcf289a96fc4fcd812890c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682544edebcf289a96fc4fcd812890c8">&#9670;&nbsp;</a></span>gain_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::gain_level </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01005">1005</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="classspell.html#a526d158b9396a81cb13186db31c53ae1">gain_exp</a>( guy, <a class="code" href="classspell.html#a4907623e7faca6b194e24543b1862d1e">exp_to_next_level</a>() );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a4907623e7faca6b194e24543b1862d1e"><div class="ttname"><a href="classspell.html#a4907623e7faca6b194e24543b1862d1e">spell::exp_to_next_level</a></div><div class="ttdeci">int exp_to_next_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01650">magic.cpp:1650</a></div></div>
<div class="ttc" id="aclassspell_html_a526d158b9396a81cb13186db31c53ae1"><div class="ttname"><a href="classspell.html#a526d158b9396a81cb13186db31c53ae1">spell::gain_exp</a></div><div class="ttdeci">void gain_exp(const Character &amp;guy, int nxp)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01322">magic.cpp:1322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01650">exp_to_next_level()</a>, and <a class="el" href="magic_8cpp_source.html#l01322">gain_exp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01010">gain_levels()</a>, <a class="el" href="profession_8cpp_source.html#l00712">profession::learn_spells()</a>, <a class="el" href="magic_8cpp_source.html#l02817">known_magic::on_mutation_gain()</a>, <a class="el" href="npc_8cpp_source.html#l00551">npc::randomize()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a7ad2e0f8de920dad808a184a5760e295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad2e0f8de920dad808a184a5760e295">&#9670;&nbsp;</a></span>gain_levels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::gain_levels </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gains</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01010">1010</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span>( gains &lt; 1 ) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> gained = 0; gained &lt; gains &amp;&amp; !<a class="code" href="classspell.html#ac0702e64e2757dd74767f00f2e4cd159">is_max_level</a>( guy ); gained++ ) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="classspell.html#a682544edebcf289a96fc4fcd812890c8">gain_level</a>( guy );</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a682544edebcf289a96fc4fcd812890c8"><div class="ttname"><a href="classspell.html#a682544edebcf289a96fc4fcd812890c8">spell::gain_level</a></div><div class="ttdeci">void gain_level(const Character &amp;guy)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01005">magic.cpp:1005</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01005">gain_level()</a>, and <a class="el" href="magic_8cpp_source.html#l01026">is_max_level()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01020">set_level()</a>.</p>

</div>
</div>
<a id="ae1585ff21871ebf0e2274b4e98582360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1585ff21871ebf0e2274b4e98582360">&#9670;&nbsp;</a></span>get_damage_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdamage__instance.html">damage_instance</a> spell::get_damage_instance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01763">1763</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;{</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="structdamage__instance.html">damage_instance</a> dmg;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    dmg.<a class="code" href="structdamage__instance.html#a9eff5065ef6631935e95d061ca756ae4">add_damage</a>( <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>(), <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) );</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;}</div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00132">damage.h:132</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a9eff5065ef6631935e95d061ca756ae4"><div class="ttname"><a href="structdamage__instance.html#a9eff5065ef6631935e95d061ca756ae4">damage_instance::add_damage</a></div><div class="ttdeci">void add_damage(const damage_type_id &amp;dt, float amt, float arpen=0.0f, float arpen_mult=1.0f, float dmg_mult=1.0f, float unc_arpen_mult=1.0f, float unc_dmg_mult=1.0f)</div><div class="ttdoc">Adds damage to the instance.</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00316">damage.cpp:316</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00316">damage_instance::add_damage()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, and <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01777">get_projectile_attack()</a>.</p>

</div>
</div>
<a id="a49cd3d61f5381025968b3f5b5109aa3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49cd3d61f5381025968b3f5b5109aa3b">&#9670;&nbsp;</a></span>get_dealt_damage_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdealt__damage__instance.html">dealt_damage_instance</a> spell::get_dealt_damage_instance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01770">1770</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;{</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="structdealt__damage__instance.html">dealt_damage_instance</a> dmg;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    dmg.<a class="code" href="structdealt__damage__instance.html#a215bb5b13d9c221bbda09d88f8b9cdae">set_damage</a>( <a class="code" href="classspell.html#ac5425e8c7206d7502f6c403f95938d7b">dmg_type</a>(), <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) );</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;}</div>
<div class="ttc" id="astructdealt__damage__instance_html"><div class="ttname"><a href="structdealt__damage__instance.html">dealt_damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00193">damage.h:193</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a215bb5b13d9c221bbda09d88f8b9cdae"><div class="ttname"><a href="structdealt__damage__instance.html#a215bb5b13d9c221bbda09d88f8b9cdae">dealt_damage_instance::set_damage</a></div><div class="ttdeci">void set_damage(const damage_type_id &amp;dt, int amount)</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00568">damage.cpp:568</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>, and <a class="el" href="damage_8cpp_source.html#l00568">dealt_damage_instance::set_damage()</a>.</p>

</div>
</div>
<a id="a0c002dde68c8222bed0a619b28e0b91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c002dde68c8222bed0a619b28e0b91a">&#9670;&nbsp;</a></span>get_difficulty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::get_difficulty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01147">1147</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a960a7f198bd614a7c048405d7d120f61">difficulty</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="classspell.html#a35f7c66814c80a047ed87d86d13ba6c6">temp_difficulty_adjustment</a>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a960a7f198bd614a7c048405d7d120f61"><div class="ttname"><a href="classspell__type.html#a960a7f198bd614a7c048405d7d120f61">spell_type::difficulty</a></div><div class="ttdeci">dbl_or_var difficulty</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00324">magic.h:324</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00324">spell_type::difficulty</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00440">temp_difficulty_adjustment</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00394">calc_spell_training_cost()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l01666">exp_modifier()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="talker__character_8cpp_source.html#l01136">talker_character_const::spell_training_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02304">learn_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a7c7293c53d4dc763a6e2aa2ee1224bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c7293c53d4dc763a6e2aa2ee1224bff">&#9670;&nbsp;</a></span>get_effective_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::get_effective_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01576">1576</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;{</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() + <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a>;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, and <a class="el" href="magic_8h_source.html#l00434">temp_level_adjustment</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l00677">field_intensity()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01498">spell_effect::guilt()</a>, <a class="el" href="magic_8cpp_source.html#l00724">min_leveled_accuracy()</a>, <a class="el" href="magic_8cpp_source.html#l00847">min_leveled_aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00685">min_leveled_damage()</a>, <a class="el" href="magic_8cpp_source.html#l00743">min_leveled_dot()</a>, <a class="el" href="magic_8cpp_source.html#l00958">min_leveled_duration()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a006cfd33c15f732b2463eda1ae0686cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a006cfd33c15f732b2463eda1ae0686cc">&#9670;&nbsp;</a></span>get_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::get_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01570">1570</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;{</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="comment">// you aren&#39;t at the next level unless you have the requisite xp, so floor</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( <a class="code" href="math__parser__func_8h.html#a6a96e281ee5bf1967d26afebe837ad48">std::log</a>( <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a> + <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ) / <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> + <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) ), 0 );</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div>
<div class="ttc" id="amath__parser__func_8h_html_a204ca52ef1b97d079c45e1cb6407f73b"><div class="ttname"><a href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">floor</a></div><div class="ttdeci">double floor(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00095">math_parser_func.h:95</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a6a96e281ee5bf1967d26afebe837ad48"><div class="ttname"><a href="math__parser__func_8h.html#a6a96e281ee5bf1967d26afebe837ad48">log</a></div><div class="ttdeci">double log(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00066">math_parser_func.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01566">a</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="magic_8h_source.html#l00429">experience</a>, <a class="el" href="math__parser__func_8h_source.html#l00095">floor()</a>, <a class="el" href="math__parser__func_8h_source.html#l00066">log()</a>, and <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l02722">Character::add_bionic()</a>, <a class="el" href="npctalk_8cpp_source.html#l00394">calc_spell_training_cost()</a>, <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01655">exp_progress()</a>, <a class="el" href="magic_8cpp_source.html#l01650">exp_to_next_level()</a>, <a class="el" href="magic_8cpp_source.html#l01322">gain_exp()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02265">learn_spell_actor::info()</a>, <a class="el" href="magic_8cpp_source.html#l01026">is_max_level()</a>, <a class="el" href="profession_8cpp_source.html#l00712">profession::learn_spells()</a>, <a class="el" href="diary_8cpp_source.html#l00628">diary::new_page()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="npc_8cpp_source.html#l00551">npc::randomize()</a>, <a class="el" href="magic_8cpp_source.html#l02079">known_magic::set_spell_exp()</a>, <a class="el" href="talker__character_8cpp_source.html#l01136">talker_character_const::spell_training_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="character_8cpp_source.html#l02911">Character::spells_offered_to()</a>, <a class="el" href="npctalk__funcs_8cpp_source.html#l01144">talk_function::start_training_gen()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02304">learn_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a8c41a03e09eb196bd6c59ff29f3f61c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c41a03e09eb196bd6c59ff29f3f61c1">&#9670;&nbsp;</a></span>get_max_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::get_max_level </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01581">1581</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;{</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad2535cbbbb4a50c01ee79c47d3dde019">max_level</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d );</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_ad2535cbbbb4a50c01ee79c47d3dde019"><div class="ttname"><a href="classspell__type.html#ad2535cbbbb4a50c01ee79c47d3dde019">spell_type::max_level</a></div><div class="ttdeci">dbl_or_var max_level</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00327">magic.h:327</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00327">spell_type::max_level</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l03023">fake_spell::get_spell()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="a19e44ba50463fee4395980d76c6e6bb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e44ba50463fee4395980d76c6e6bb6">&#9670;&nbsp;</a></span>get_projectile_attack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdealt__projectile__attack.html">dealt_projectile_attack</a> spell::get_projectile_attack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>hit_critter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01777">1777</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;{</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="structprojectile.html">projectile</a> bolt;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    bolt.<a class="code" href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">speed</a> = 10000;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    bolt.<a class="code" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a> = <a class="code" href="classspell.html#ae1585ff21871ebf0e2274b4e98582360">get_damage_instance</a>( caster );</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    bolt.<a class="code" href="structprojectile.html#a4536010a51aee3302d749f2eb4dcaf35">proj_effects</a>.emplace( <span class="stringliteral">&quot;MAGIC&quot;</span> );</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="structdealt__projectile__attack.html">dealt_projectile_attack</a> atk;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    atk.<a class="code" href="structdealt__projectile__attack.html#a7dd960a5108456f89dc1f8ef369a1096">end_point</a> = target;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    atk.<a class="code" href="structdealt__projectile__attack.html#a466f327979e41691bc19c91e622078b6">hit_critter</a> = &amp;hit_critter;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    atk.<a class="code" href="structdealt__projectile__attack.html#a93f05a2866e4dbc8c4d432a67daf8ab6">proj</a> = bolt;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    atk.<a class="code" href="structdealt__projectile__attack.html#ab874a1233da5daa95ff296cdb1ee1849">missed_by</a> = 0.0;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">return</span> atk;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_ae1585ff21871ebf0e2274b4e98582360"><div class="ttname"><a href="classspell.html#ae1585ff21871ebf0e2274b4e98582360">spell::get_damage_instance</a></div><div class="ttdeci">damage_instance get_damage_instance(Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01763">magic.cpp:1763</a></div></div>
<div class="ttc" id="astructdealt__projectile__attack_html"><div class="ttname"><a href="structdealt__projectile__attack.html">dealt_projectile_attack</a></div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00069">projectile.h:69</a></div></div>
<div class="ttc" id="astructdealt__projectile__attack_html_a466f327979e41691bc19c91e622078b6"><div class="ttname"><a href="structdealt__projectile__attack.html#a466f327979e41691bc19c91e622078b6">dealt_projectile_attack::hit_critter</a></div><div class="ttdeci">Creature * hit_critter</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00071">projectile.h:71</a></div></div>
<div class="ttc" id="astructdealt__projectile__attack_html_a7dd960a5108456f89dc1f8ef369a1096"><div class="ttname"><a href="structdealt__projectile__attack.html#a7dd960a5108456f89dc1f8ef369a1096">dealt_projectile_attack::end_point</a></div><div class="ttdeci">tripoint end_point</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00073">projectile.h:73</a></div></div>
<div class="ttc" id="astructdealt__projectile__attack_html_a93f05a2866e4dbc8c4d432a67daf8ab6"><div class="ttname"><a href="structdealt__projectile__attack.html#a93f05a2866e4dbc8c4d432a67daf8ab6">dealt_projectile_attack::proj</a></div><div class="ttdeci">projectile proj</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00070">projectile.h:70</a></div></div>
<div class="ttc" id="astructdealt__projectile__attack_html_ab874a1233da5daa95ff296cdb1ee1849"><div class="ttname"><a href="structdealt__projectile__attack.html#ab874a1233da5daa95ff296cdb1ee1849">dealt_projectile_attack::missed_by</a></div><div class="ttdeci">double missed_by</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00074">projectile.h:74</a></div></div>
<div class="ttc" id="astructprojectile_html"><div class="ttname"><a href="structprojectile.html">projectile</a></div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00017">projectile.h:17</a></div></div>
<div class="ttc" id="astructprojectile_html_a4536010a51aee3302d749f2eb4dcaf35"><div class="ttname"><a href="structprojectile.html#a4536010a51aee3302d749f2eb4dcaf35">projectile::proj_effects</a></div><div class="ttdeci">std::set&lt; std::string &gt; proj_effects</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00033">projectile.h:33</a></div></div>
<div class="ttc" id="astructprojectile_html_a82d8f657f8cfc4e180c15bfab8ca8a6e"><div class="ttname"><a href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">projectile::impact</a></div><div class="ttdeci">damage_instance impact</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00018">projectile.h:18</a></div></div>
<div class="ttc" id="astructprojectile_html_aa2af53bce63feecb719ef1edba54689e"><div class="ttname"><a href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">projectile::speed</a></div><div class="ttdeci">int speed</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00021">projectile.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="projectile_8h_source.html#l00073">dealt_projectile_attack::end_point</a>, <a class="el" href="magic_8cpp_source.html#l01763">get_damage_instance()</a>, <a class="el" href="projectile_8h_source.html#l00071">dealt_projectile_attack::hit_critter</a>, <a class="el" href="projectile_8h_source.html#l00018">projectile::impact</a>, <a class="el" href="projectile_8h_source.html#l00074">dealt_projectile_attack::missed_by</a>, <a class="el" href="projectile_8h_source.html#l00070">dealt_projectile_attack::proj</a>, <a class="el" href="projectile_8h_source.html#l00033">projectile::proj_effects</a>, and <a class="el" href="projectile_8h_source.html#l00021">projectile::speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>.</p>

</div>
</div>
<a id="a67107306974252fab83a7ee7fb8b26bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67107306974252fab83a7ee7fb8b26bb">&#9670;&nbsp;</a></span>get_src()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#aabcbcb9fb77661ba75c47b6287318e03">mod_id</a> spell::get_src </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01153">1153</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;{</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#afca82c905601cf50d72c07a65dc56f11">src_mod</a>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_afca82c905601cf50d72c07a65dc56f11"><div class="ttname"><a href="classspell__type.html#afca82c905601cf50d72c07a65dc56f11">spell_type::src_mod</a></div><div class="ttdeci">mod_id src_mod</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00208">magic.h:208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00208">spell_type::src_mod</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="abeb00e3b3567c2b124b847c07fcd4555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb00e3b3567c2b124b847c07fcd4555">&#9670;&nbsp;</a></span>get_temp_level_adjustment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::get_temp_level_adjustment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01587">1587</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;{</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00434">temp_level_adjustment</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ad8662455c101a353ea64618a49908a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8662455c101a353ea64618a49908a4b">&#9670;&nbsp;</a></span>has_components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::has_components </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01202">1202</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;{</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="magic_8h_source.html#l00219">spell_type::spell_components</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="aa609bae14a69c0987d562a2a9f8a1268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa609bae14a69c0987d562a2a9f8a1268">&#9670;&nbsp;</a></span>has_flag() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::has_flag </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197b">spell_flag</a> &amp;&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01074">1074</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;{</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a74d93ff32c5d02d21548e7164e39b7f1">spell_tags</a>[flag];</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a74d93ff32c5d02d21548e7164e39b7f1"><div class="ttname"><a href="classspell__type.html#a74d93ff32c5d02d21548e7164e39b7f1">spell_type::spell_tags</a></div><div class="ttdeci">enum_bitset&lt; spell_flag &gt; spell_tags</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00359">magic.h:359</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00359">spell_type::spell_tags</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00485">add_effect_to_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01200">add_summoned_mon()</a>, <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00895">aoe_string()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00581">spell_effect::attack()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00160">npc_attack_spell::base_time_penalty()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01651">spell_effect::bash()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00426">calculate_spell_effect_area()</a>, <a class="el" href="magic_8cpp_source.html#l01093">can_cast()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l02383">casting_time_encumbered()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8cpp_source.html#l00773">damage_string()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="magic_8cpp_source.html#l00885">in_aoe()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01190">is_summon_friendly()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00590">magical_polymorph()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="magic_8cpp_source.html#l01083">no_hands()</a>, <a class="el" href="magic_8h_source.html#l00743">spell_effect::override_parameters::override_parameters()</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="magic_8cpp_source.html#l00794">select_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00148">spell_effect::short_range_teleport()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01809">spell_effect::slime_split_on_death()</a>, <a class="el" href="magic_8cpp_source.html#l01428">sound_volume()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01255">spell_effect::spawn_summoned_vehicle()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00465">spell_effect_area()</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="magic_8cpp_source.html#l00919">targetable_locations()</a>, and <a class="el" href="npc__attack_8cpp_source.html#l00100">npc_attack_spell::use()</a>.</p>

</div>
</div>
<a id="aaa3543a6accbf016c6478c41d31dced7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3543a6accbf016c6478c41d31dced7">&#9670;&nbsp;</a></span>has_flag() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::has_flag </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01079">1079</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;{</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a40d30bd9621c0f8c64b488bed2a0ce51">flags</a>.count( flag ) &gt; 0;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a40d30bd9621c0f8c64b488bed2a0ce51"><div class="ttname"><a href="classspell__type.html#a40d30bd9621c0f8c64b488bed2a0ce51">spell_type::flags</a></div><div class="ttdeci">std::set&lt; std::string &gt; flags</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00356">magic.h:356</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00356">spell_type::flags</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="af12e38d6e97fefcf10174cd91df53bd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af12e38d6e97fefcf10174cd91df53bd4">&#9670;&nbsp;</a></span>heal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::heal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01804">1804</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;{</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( target );</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordflow">if</span>( mon ) {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordflow">return</span> mon-&gt;<a class="code" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( -<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) );</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="classCharacter.html">Character</a> *<span class="keyword">const</span> p = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classCharacter.html">Character</a>&gt;( target );</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span>( p ) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7a558a2455f552673b825e3ad2e0fd4">healall</a>( -<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) );</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster );</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ae7a558a2455f552673b825e3ad2e0fd4"><div class="ttname"><a href="classCharacter.html#ae7a558a2455f552673b825e3ad2e0fd4">Character::healall</a></div><div class="ttdeci">void healall(int dam)</div><div class="ttdoc">Heals all body parts for dam.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08427">character.cpp:8427</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_af7763c0da8025aea231a29272f25d5fc"><div class="ttname"><a href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">monster::heal</a></div><div class="ttdeci">int heal(int delta_hp, bool overheal=false)</div><div class="ttdoc">Flat addition to the monsters hp.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02149">monster.cpp:2149</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="monster_8cpp_source.html#l02149">monster::heal()</a>, and <a class="el" href="character_8cpp_source.html#l08427">Character::healall()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>.</p>

</div>
</div>
<a id="a7d44bdaf4c9faff438e6b30973d68615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d44bdaf4c9faff438e6b30973d68615">&#9670;&nbsp;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> spell::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00662">662</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01787">spell_effect::effect_on_condition()</a>, <a class="el" href="magic_8cpp_source.html#l01322">gain_exp()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="diary_8cpp_source.html#l00628">diary::new_page()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">target_ui::set_cursor_pos()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00465">spell_effect_area()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02435">cast_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a5e36e855e9cb0c85469e782cbb6a2e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e36e855e9cb0c85469e782cbb6a2e57">&#9670;&nbsp;</a></span>ignore_by_species_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::ignore_by_species_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01524">1524</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;{</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a48f952d3f551b2cab4fdb46087613c48">ignored_species_ids</a>.empty() ) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> target = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( p ) ) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">species_id</a> &amp;spid : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a48f952d3f551b2cab4fdb46087613c48">ignored_species_ids</a> ) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            <span class="keywordflow">if</span>( target-&gt;type-&gt;in_species( spid ) ) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">return</span> valid;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a48f952d3f551b2cab4fdb46087613c48"><div class="ttname"><a href="classspell__type.html#a48f952d3f551b2cab4fdb46087613c48">spell_type::ignored_species_ids</a></div><div class="ttdeci">std::set&lt; species_id &gt; ignored_species_ids</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00351">magic.h:351</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; species_type &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="magic_8h_source.html#l00351">spell_type::ignored_species_ids</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>.</p>

</div>
</div>
<a id="a4bee370b3c3d69be45411856fb2f333f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bee370b3c3d69be45411856fb2f333f">&#9670;&nbsp;</a></span>in_aoe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::in_aoe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00885">885</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">spell_flag::RANDOM_AOE</a> ) ) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( source, target ) &lt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a08e913e8b37e572c9f079e038dee36b2">max_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d );</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( source, target ) &lt;= <a class="code" href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">aoe</a>( caster );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h_source.html#l00281">spell_type::max_aoe</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6281a96f78b881bbd1821d8834054992">RANDOM_AOE</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>.</p>

</div>
</div>
<a id="ac0702e64e2757dd74767f00f2e4cd159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0702e64e2757dd74767f00f2e4cd159">&#9670;&nbsp;</a></span>is_max_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_max_level </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01026">1026</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;{</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ad2535cbbbb4a50c01ee79c47d3dde019">max_level</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d );</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00327">spell_type::max_level</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>, <a class="el" href="magic_8cpp_source.html#l01010">gain_levels()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02265">learn_spell_actor::info()</a>, <a class="el" href="profession_8cpp_source.html#l00712">profession::learn_spells()</a>, <a class="el" href="npc_8cpp_source.html#l00551">npc::randomize()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="character_8cpp_source.html#l02911">Character::spells_offered_to()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02304">learn_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a1800276357c17c73c885f051c7edf1d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1800276357c17c73c885f051c7edf1d7">&#9670;&nbsp;</a></span>is_spell_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_spell_class </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;&#160;</td>
          <td class="paramname"><em>mid</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01088">1088</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> mid == <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00321">spell_type::spell_class</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="a2d25bed9a9b942e4ada705b79dc43158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d25bed9a9b942e4ada705b79dc43158">&#9670;&nbsp;</a></span>is_target_in_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_target_in_range </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01464">1464</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;{</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( caster.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), p ) &lt;= <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( caster );</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, and <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__enchantment_8cpp_source.html#l01051">enchant_cache::cast_enchantment_spell()</a>, and <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>.</p>

</div>
</div>
<a id="a0f7316c4f276b359eb3c4d5fb418d7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f7316c4f276b359eb3c4d5fb418d7a3">&#9670;&nbsp;</a></span>is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01395">1395</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;}</div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01987">known_magic::learn_spell()</a>.</p>

</div>
</div>
<a id="adc1aee8fd855fce28ebb1dcc39e37a12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1aee8fd855fce28ebb1dcc39e37a12">&#9670;&nbsp;</a></span>is_valid_target() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_valid_target </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01474">1474</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;{</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html">Creature</a> *<span class="keyword">const</span> cr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;Creature&gt;( p ) ) {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a> cr_att = cr-&gt;attitude_to( caster );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        valid = valid || ( cr_att != <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::Attitude::FRIENDLY</a> &amp;&amp;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                           <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a8e20e5f0a627b4dd4dedc41a597ab672">spell_target::hostile</a> ) );</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        valid = valid || ( cr_att == <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::Attitude::FRIENDLY</a> &amp;&amp;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                           <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a2ad733df56aaafa5650bafc9c98c6ffb">spell_target::ally</a> ) &amp;&amp;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                           p != caster.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        valid = valid || ( <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">spell_target::self</a> ) &amp;&amp; p == caster.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        valid = valid &amp;&amp; <a class="code" href="classspell.html#a6a41577f639cd544a78c66360e61cc2a">target_by_monster_id</a>( p );</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        valid = valid &amp;&amp; <a class="code" href="classspell.html#aa9c08f86e5d6ba271db251ade738afd8">target_by_species_id</a>( p );</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        valid = valid &amp;&amp; <a class="code" href="classspell.html#a5e36e855e9cb0c85469e782cbb6a2e57">ignore_by_species_id</a>( p );</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        valid = <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">spell_target::ground</a> );</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">return</span> valid;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a></div><div class="ttdeci">Attitude</div><div class="ttdoc">Simplified attitude towards any creature: hostile - hate, want to kill, etc.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00352">creature.h:352</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::Attitude::FRIENDLY</a></div><div class="ttdeci">@ FRIENDLY</div></div>
<div class="ttc" id="aclassspell_html_a5e36e855e9cb0c85469e782cbb6a2e57"><div class="ttname"><a href="classspell.html#a5e36e855e9cb0c85469e782cbb6a2e57">spell::ignore_by_species_id</a></div><div class="ttdeci">bool ignore_by_species_id(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01524">magic.cpp:1524</a></div></div>
<div class="ttc" id="aclassspell_html_a6a41577f639cd544a78c66360e61cc2a"><div class="ttname"><a href="classspell.html#a6a41577f639cd544a78c66360e61cc2a">spell::target_by_monster_id</a></div><div class="ttdeci">bool target_by_monster_id(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01494">magic.cpp:1494</a></div></div>
<div class="ttc" id="aclassspell_html_aa9c08f86e5d6ba271db251ade738afd8"><div class="ttname"><a href="classspell.html#aa9c08f86e5d6ba271db251ade738afd8">spell::target_by_species_id</a></div><div class="ttdeci">bool target_by_species_id(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01508">magic.cpp:1508</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a2ad733df56aaafa5650bafc9c98c6ffb"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a2ad733df56aaafa5650bafc9c98c6ffb">spell_target::ally</a></div><div class="ttdeci">@ ally</div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">spell_target::ground</a></div><div class="ttdeci">@ ground</div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">spell_target::self</a></div><div class="ttdeci">@ self</div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a8e20e5f0a627b4dd4dedc41a597ab672"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a8e20e5f0a627b4dd4dedc41a597ab672">spell_target::hostile</a></div><div class="ttdeci">@ hostile</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a2ad733df56aaafa5650bafc9c98c6ffb">ally</a>, <a class="el" href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::FRIENDLY</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">ground</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a8e20e5f0a627b4dd4dedc41a597ab672">hostile</a>, <a class="el" href="magic_8cpp_source.html#l01524">ignore_by_species_id()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">self</a>, <a class="el" href="magic_8cpp_source.html#l01494">target_by_monster_id()</a>, and <a class="el" href="magic_8cpp_source.html#l01508">target_by_species_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l01714">spell_effect::banishment()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01651">spell_effect::bash()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00426">calculate_spell_effect_area()</a>, <a class="el" href="magic__enchantment_8cpp_source.html#l01051">enchant_cache::cast_enchantment_spell()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00982">spell_effect::directed_push()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01787">spell_effect::effect_on_condition()</a>, <a class="el" href="magic_8cpp_source.html#l01683">enumerate_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01351">spell_effect::flashbang()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01357">spell_effect::mod_moves()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="magic_8cpp_source.html#l00794">select_target()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00773">spell_move()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="magic_8cpp_source.html#l00919">targetable_locations()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">target_ui::update_status()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01324">spell_effect::vomit()</a>.</p>

</div>
</div>
<a id="a60a9b2a90aefc5d4dfd630afaf0d42e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a9b2a90aefc5d4dfd630afaf0d42e6">&#9670;&nbsp;</a></span>is_valid_target() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::is_valid_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7">spell_target</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01469">1469</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;{</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ae696150ec8cf81bc7a35102c562d4517">valid_targets</a>[t];</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_ae696150ec8cf81bc7a35102c562d4517"><div class="ttname"><a href="classspell__type.html#ae696150ec8cf81bc7a35102c562d4517">spell_type::valid_targets</a></div><div class="ttdeci">enum_bitset&lt; spell_target &gt; valid_targets</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00345">magic.h:345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00426">type</a>, and <a class="el" href="magic_8h_source.html#l00345">spell_type::valid_targets</a>.</p>

</div>
</div>
<a id="ae1e6dd5185da5ec685fabeced2a8b73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e6dd5185da5ec685fabeced2a8b73b">&#9670;&nbsp;</a></span>list_ignored_species_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::list_ignored_species_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01742">1742</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;{</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a48f952d3f551b2cab4fdb46087613c48">ignored_species_ids</a>.empty() ) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    std::vector&lt;std::string&gt; all_valid_species_names;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">species_id</a> &amp;<a class="code" href="classstring__id.html">species_id</a> : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a48f952d3f551b2cab4fdb46087613c48">ignored_species_ids</a> ) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        all_valid_species_names.emplace_back( <a class="code" href="classstring__id.html">species_id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="comment">//remove repeat names</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    all_valid_species_names.erase( std::unique( all_valid_species_names.begin(),</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                                   all_valid_species_names.end() ), all_valid_species_names.end() );</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( all_valid_species_names );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;}</div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="magic_8h_source.html#l00351">spell_type::ignored_species_ids</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="a3a661a14d3c40f8cbd2bd727e7b9f712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a661a14d3c40f8cbd2bd727e7b9f712">&#9670;&nbsp;</a></span>list_targeted_monster_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::list_targeted_monster_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01710">1710</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;{</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">targeted_monster_ids</a>.empty() ) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    std::vector&lt;std::string&gt; all_valid_monster_names;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> &amp;mon_id : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">targeted_monster_ids</a> ) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        all_valid_monster_names.emplace_back( mon_id-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>() );</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">//remove repeat names</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    all_valid_monster_names.erase( std::unique( all_valid_monster_names.begin(),</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                   all_valid_monster_names.end() ), all_valid_monster_names.end() );</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( all_valid_monster_names );</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_af64d6acee71a4ba9f6a51459fddb9953"><div class="ttname"><a href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">spell_type::targeted_monster_ids</a></div><div class="ttdeci">std::set&lt; mtype_id &gt; targeted_monster_ids</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00347">magic.h:347</a></div></div>
<div class="ttc" id="astructmtype_html_a9a8f4ead67d1836e3f4db624533af5aa"><div class="ttname"><a href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">mtype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00330">mtype.cpp:330</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="mtype_8cpp_source.html#l00330">mtype::nname()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="magic_8h_source.html#l00347">spell_type::targeted_monster_ids</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ad25f9b130e010a30b39d8996f7ef92e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25f9b130e010a30b39d8996f7ef92e4">&#9670;&nbsp;</a></span>list_targeted_species_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::list_targeted_species_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01726">1726</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;{</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60c88145cf9b37dfe7b141b143095246">targeted_species_ids</a>.empty() ) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    std::vector&lt;std::string&gt; all_valid_species_names;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">species_id</a> &amp;specie_id : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60c88145cf9b37dfe7b141b143095246">targeted_species_ids</a> ) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        all_valid_species_names.emplace_back( specie_id.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    }</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="comment">//remove repeat names</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    all_valid_species_names.erase( std::unique( all_valid_species_names.begin(),</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                                   all_valid_species_names.end() ), all_valid_species_names.end() );</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( all_valid_species_names );</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a60c88145cf9b37dfe7b141b143095246"><div class="ttname"><a href="classspell__type.html#a60c88145cf9b37dfe7b141b143095246">spell_type::targeted_species_ids</a></div><div class="ttdeci">std::set&lt; species_id &gt; targeted_species_ids</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00349">magic.h:349</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="magic_8h_source.html#l00349">spell_type::targeted_species_ids</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="a09d10eac783473b568da11d51abd38a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09d10eac783473b568da11d51abd38a6">&#9670;&nbsp;</a></span>make_sound() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::make_sound </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01440">1440</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;{</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> loudness = <a class="code" href="classspell.html#a09d458a079bc27306786045580033794">sound_volume</a>( caster );</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span>( loudness &gt; 0 ) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="classspell.html#a09d10eac783473b568da11d51abd38a6">make_sound</a>( target, loudness );</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a09d10eac783473b568da11d51abd38a6"><div class="ttname"><a href="classspell.html#a09d10eac783473b568da11d51abd38a6">spell::make_sound</a></div><div class="ttdeci">void make_sound(const tripoint &amp;target, Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01440">magic.cpp:1440</a></div></div>
<div class="ttc" id="aclassspell_html_a09d458a079bc27306786045580033794"><div class="ttname"><a href="classspell.html#a09d458a079bc27306786045580033794">spell::sound_volume</a></div><div class="ttdeci">int sound_volume(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01428">magic.cpp:1428</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01428">sound_volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00925">spell_effect::area_pull()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00943">spell_effect::area_push()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01556">trapfunc::cast_spell()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01357">spell_effect::mod_moves()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01319">spell_effect::noise()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00184">spell_effect::pain_split()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00905">spell_effect::remove_field()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01809">spell_effect::slime_split_on_death()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01078">spell_effect::spawn_ethereal_item()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01233">spell_effect::spawn_summoned_monster()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01165">spell_effect::timed_event()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l01324">spell_effect::vomit()</a>.</p>

</div>
</div>
<a id="a424c425308192eb085b48286f6e09fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a424c425308192eb085b48286f6e09fdd">&#9670;&nbsp;</a></span>make_sound() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::make_sound </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loudness</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01448">1448</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;{</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( target, loudness, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a2dc22c6c8d58f23f22a4a9b72cd7eed7">sound_type</a>, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a868516b343411f98fcf2a2c961de01cb">sound_description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>(),</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                   <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ac5fb63c1cb3f31f1c705e9988e882e4a">sound_ambient</a>, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a91953b9d5715f36608e753b3fc5e805d">sound_id</a>, <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a8a9f3e75988d34cf9e89abfec583ba67">sound_variant</a> );</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a2dc22c6c8d58f23f22a4a9b72cd7eed7"><div class="ttname"><a href="classspell__type.html#a2dc22c6c8d58f23f22a4a9b72cd7eed7">spell_type::sound_type</a></div><div class="ttdeci">sounds::sound_t sound_type</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00221">magic.h:221</a></div></div>
<div class="ttc" id="aclassspell__type_html_a868516b343411f98fcf2a2c961de01cb"><div class="ttname"><a href="classspell__type.html#a868516b343411f98fcf2a2c961de01cb">spell_type::sound_description</a></div><div class="ttdeci">translation sound_description</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00216">magic.h:216</a></div></div>
<div class="ttc" id="aclassspell__type_html_a8a9f3e75988d34cf9e89abfec583ba67"><div class="ttname"><a href="classspell__type.html#a8a9f3e75988d34cf9e89abfec583ba67">spell_type::sound_variant</a></div><div class="ttdeci">std::string sound_variant</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00224">magic.h:224</a></div></div>
<div class="ttc" id="aclassspell__type_html_a91953b9d5715f36608e753b3fc5e805d"><div class="ttname"><a href="classspell__type.html#a91953b9d5715f36608e753b3fc5e805d">spell_type::sound_id</a></div><div class="ttdeci">std::string sound_id</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00223">magic.h:223</a></div></div>
<div class="ttc" id="aclassspell__type_html_ac5fb63c1cb3f31f1c705e9988e882e4a"><div class="ttname"><a href="classspell__type.html#ac5fb63c1cb3f31f1c705e9988e882e4a">spell_type::sound_ambient</a></div><div class="ttdeci">bool sound_ambient</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00222">magic.h:222</a></div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00318">sounds.cpp:318</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="magic_8h_source.html#l00222">spell_type::sound_ambient</a>, <a class="el" href="magic_8h_source.html#l00216">spell_type::sound_description</a>, <a class="el" href="magic_8h_source.html#l00223">spell_type::sound_id</a>, <a class="el" href="magic_8h_source.html#l00221">spell_type::sound_type</a>, <a class="el" href="magic_8h_source.html#l00224">spell_type::sound_variant</a>, <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

</div>
</div>
<a id="ac4826c2795f1db1547ef57ccd408f8cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4826c2795f1db1547ef57ccd408f8cf">&#9670;&nbsp;</a></span>message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::message </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01212">1212</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;{</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#a838599c428e33e70b7e62b3e195dc6b9">alt_message</a>.<a class="code" href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">empty</a>() ) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classspell.html#a838599c428e33e70b7e62b3e195dc6b9">alt_message</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a1e5fb7d2cfe305bd5b26dccdce21273b">message</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a1e5fb7d2cfe305bd5b26dccdce21273b"><div class="ttname"><a href="classspell__type.html#a1e5fb7d2cfe305bd5b26dccdce21273b">spell_type::message</a></div><div class="ttdeci">translation message</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00214">magic.h:214</a></div></div>
<div class="ttc" id="aclassspell_html_a838599c428e33e70b7e62b3e195dc6b9"><div class="ttname"><a href="classspell.html#a838599c428e33e70b7e62b3e195dc6b9">spell::alt_message</a></div><div class="ttdeci">translation alt_message</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00447">magic.h:447</a></div></div>
<div class="ttc" id="aclasstranslation_html_a85e9c5ae8df7eb6df7bac2473b9716dd"><div class="ttname"><a href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">translation::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Whether the underlying string is empty, not matter what the context is or whether translation is need...</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00327">translation.cpp:327</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00447">alt_message</a>, <a class="el" href="translation_8cpp_source.html#l00327">translation::empty()</a>, <a class="el" href="magic_8h_source.html#l00214">spell_type::message</a>, <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="relic_8cpp_source.html#l00416">relic::activate()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="ad83fcc2ff2b800a12c1a14c65103e1c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83fcc2ff2b800a12c1a14c65103e1c7">&#9670;&nbsp;</a></span>min_leveled_accuracy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::min_leveled_accuracy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00724">724</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5073999c6ea0fa0356c6e6f2a0e407aa">min_accuracy</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aefd93bc4dce14e7b60c6d6bd4b691613">accuracy_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_aefd93bc4dce14e7b60c6d6bd4b691613"><div class="ttname"><a href="classspell__type.html#aefd93bc4dce14e7b60c6d6bd4b691613">spell_type::accuracy_increment</a></div><div class="ttdeci">dbl_or_var accuracy_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00258">magic.h:258</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00258">spell_type::accuracy_increment</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00257">spell_type::min_accuracy</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00731">accuracy()</a>.</p>

</div>
</div>
<a id="ae81b37281ed73857316479ab0bbb2395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81b37281ed73857316479ab0bbb2395">&#9670;&nbsp;</a></span>min_leveled_aoe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::min_leveled_aoe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00847">847</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;{</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa503b99197533fa1dfa5de8052a4119b">min_aoe</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a86eb7c8c5fa42a5307de55cc4646b97e">aoe_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a86eb7c8c5fa42a5307de55cc4646b97e"><div class="ttname"><a href="classspell__type.html#a86eb7c8c5fa42a5307de55cc4646b97e">spell_type::aoe_increment</a></div><div class="ttdeci">dbl_or_var aoe_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00279">magic.h:279</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00279">spell_type::aoe_increment</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00277">spell_type::min_aoe</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, and <a class="el" href="magic_8cpp_source.html#l00895">aoe_string()</a>.</p>

</div>
</div>
<a id="a85529eef5a29f1e17b390ae63869c781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85529eef5a29f1e17b390ae63869c781">&#9670;&nbsp;</a></span>min_leveled_damage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::min_leveled_damage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00685">685</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;{</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60beddc934a1d3571d46ae521cc1fc6c">min_damage</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa4c09471023f07665681f5bf684d1e37">damage_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>(</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                d ) );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_aa4c09471023f07665681f5bf684d1e37"><div class="ttname"><a href="classspell__type.html#aa4c09471023f07665681f5bf684d1e37">spell_type::damage_increment</a></div><div class="ttdeci">dbl_or_var damage_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00264">magic.h:264</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00264">spell_type::damage_increment</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00262">spell_type::min_damage</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, and <a class="el" href="magic_8cpp_source.html#l00773">damage_string()</a>.</p>

</div>
</div>
<a id="a462c98a4cef24f9d7014f7afc9118aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a462c98a4cef24f9d7014f7afc9118aa3">&#9670;&nbsp;</a></span>min_leveled_dot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::min_leveled_dot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00743">743</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a3f73cb1637c08d9057dfc4e31a35f17e">min_dot</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a1b2255ccbd2b5132192d6cd16dc913a8">dot_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a1b2255ccbd2b5132192d6cd16dc913a8"><div class="ttname"><a href="classspell__type.html#a1b2255ccbd2b5132192d6cd16dc913a8">spell_type::dot_increment</a></div><div class="ttdeci">dbl_or_var dot_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00288">magic.h:288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00288">spell_type::dot_increment</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00286">spell_type::min_dot</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00750">damage_dot()</a>.</p>

</div>
</div>
<a id="a19feb836872fc2fe3818f933a9029f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19feb836872fc2fe3818f933a9029f00">&#9670;&nbsp;</a></span>min_leveled_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::min_leveled_duration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00958">958</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a51accd4d56a09f1c2f5dae55832a8797">min_duration</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a6e7735afc9f1817f48ad9c43f710b5f4">duration_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a6e7735afc9f1817f48ad9c43f710b5f4"><div class="ttname"><a href="classspell__type.html#a6e7735afc9f1817f48ad9c43f710b5f4">spell_type::duration_increment</a></div><div class="ttdeci">dbl_or_var duration_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00298">magic.h:298</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00298">spell_type::duration_increment</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="magic_8h_source.html#l00295">spell_type::min_duration</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, and <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>.</p>

</div>
</div>
<a id="abdf34d5415c3fdafcd84fe3a7101bddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf34d5415c3fdafcd84fe3a7101bddb">&#9670;&nbsp;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string spell::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01207">1207</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;{</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">name</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_adcac4bcd0931ffd34281a9eed747d93c"><div class="ttname"><a href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">spell_type::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00210">magic.h:210</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00210">spell_type::name</a>, <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="relic_8cpp_source.html#l00416">relic::activate()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="npctalk_8cpp_source.html#l05626">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_roll_remainder()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01302">spell_effect::none()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01341">spell_effect::pull_to_caster()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="magic_8cpp_source.html#l00794">select_target()</a>, <a class="el" href="diary_8cpp_source.html#l00089">diary::spell_changes()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="talker__character_8cpp_source.html#l01136">talker_character_const::spell_training_text()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>, and <a class="el" href="npc__attack_8cpp_source.html#l00100">npc_attack_spell::use()</a>.</p>

</div>
</div>
<a id="a8fabcf473532ae18478ca8c826543ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fabcf473532ae18478ca8c826543ebe">&#9670;&nbsp;</a></span>no_hands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::no_hands </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01083">1083</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;{</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197baf3e1ebf88738c62c2ae49c2319642213">spell_flag::NO_HANDS</a> ) || <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &lt;= 0 );</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197baf3e1ebf88738c62c2ae49c2319642213"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197baf3e1ebf88738c62c2ae49c2319642213">spell_flag::NO_HANDS</a></div><div class="ttdeci">@ NO_HANDS</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197baf3e1ebf88738c62c2ae49c2319642213">NO_HANDS</a>, and <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01765">Character::cast_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l02398">energy_cost_encumbered()</a>, and <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>.</p>

</div>
</div>
<a id="a7a62c6ffd858fa8baeeb225aba2f06ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a62c6ffd858fa8baeeb225aba2f06ac">&#9670;&nbsp;</a></span>random_valid_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; spell::random_valid_target </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>caster_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01893">1893</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;{</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_ground = <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba501200349c2d922a2e4c5eb5d6cde0c5">spell_flag::RANDOM_CRITTER</a> );</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    std::set&lt;tripoint&gt; valid_area;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a> blast_params( *<span class="keyword">this</span>, caster );</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// we want to pick a random target within range, not aoe</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    blast_params.aoe_radius = <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( caster );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;target : <a class="code" href="namespacespell__effect.html#a9e71032270fa0320ba243005a7b50a5f">spell_effect::spell_effect_blast</a>(</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;             blast_params, caster_pos, caster_pos ) ) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">if</span>( target != caster_pos &amp;&amp; <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( caster, target ) &amp;&amp;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            ( !ignore_ground || creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classCreature.html">Creature</a>&gt;( target ) ) ) {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            valid_area.emplace( target );</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span>( valid_area.empty() ) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( valid_area );</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;}</div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba501200349c2d922a2e4c5eb5d6cde0c5"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba501200349c2d922a2e4c5eb5d6cde0c5">spell_flag::RANDOM_CRITTER</a></div><div class="ttdeci">@ RANDOM_CRITTER</div></div>
<div class="ttc" id="anamespacespell__effect_html_a9e71032270fa0320ba243005a7b50a5f"><div class="ttname"><a href="namespacespell__effect.html#a9e71032270fa0320ba243005a7b50a5f">spell_effect::spell_effect_blast</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_blast(const override_parameters &amp;params, const tripoint &amp;, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00225">magic_spell_effect.cpp:225</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00104">rng.h:104</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00739">spell_effect::override_parameters::aoe_radius</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba501200349c2d922a2e4c5eb5d6cde0c5">RANDOM_CRITTER</a>, <a class="el" href="rng_8h_source.html#l00104">random_entry()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, and <a class="el" href="magic__spell__effect_8cpp_source.html#l00225">spell_effect::spell_effect_blast()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, and <a class="el" href="magic_8cpp_source.html#l00794">select_target()</a>.</p>

</div>
</div>
<a id="ab00175ffc465d406a7ec24331c6c55f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00175ffc465d406a7ec24331c6c55f2">&#9670;&nbsp;</a></span>range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::range </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00905">905</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( caster ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> leveled_range = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa4b832cf689f208feda1c32d37fcdba5">min_range</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) + <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() *</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                              <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#acb2e4a03f710e9444583ba6c59da06be">range_increment</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) );</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5b8690441c94b9182bf777d1a14ffe8f">max_range</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) &gt;= <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#aa4b832cf689f208feda1c32d37fcdba5">min_range</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( leveled_range, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5b8690441c94b9182bf777d1a14ffe8f">max_range</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( leveled_range, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a5b8690441c94b9182bf777d1a14ffe8f">max_range</a>.<a class="code" href="structdbl__or__var.html#ab65089e65e8bcff8239572030573c540">evaluate</a>( d ) ) );</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a> * <a class="code" href="classspell.html#a03dea8803fea1685efa62ace8ab9b082">temp_range_multiplyer</a>, 0.0f );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_a5b8690441c94b9182bf777d1a14ffe8f"><div class="ttname"><a href="classspell__type.html#a5b8690441c94b9182bf777d1a14ffe8f">spell_type::max_range</a></div><div class="ttdeci">dbl_or_var max_range</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00273">magic.h:273</a></div></div>
<div class="ttc" id="aclassspell__type_html_aa4b832cf689f208feda1c32d37fcdba5"><div class="ttname"><a href="classspell__type.html#aa4b832cf689f208feda1c32d37fcdba5">spell_type::min_range</a></div><div class="ttdeci">dbl_or_var min_range</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00269">magic.h:269</a></div></div>
<div class="ttc" id="aclassspell__type_html_acb2e4a03f710e9444583ba6c59da06be"><div class="ttname"><a href="classspell__type.html#acb2e4a03f710e9444583ba6c59da06be">spell_type::range_increment</a></div><div class="ttdeci">dbl_or_var range_increment</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00271">magic.h:271</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue__helpers_8cpp_source.html#l00191">dbl_or_var::evaluate()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h_source.html#l00273">spell_type::max_range</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="magic_8h_source.html#l00269">spell_type::min_range</a>, <a class="el" href="magic_8h_source.html#l00271">spell_type::range_increment</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="magic_8h_source.html#l00438">temp_range_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="magic_8cpp_source.html#l01464">is_target_in_range()</a>, <a class="el" href="ranged_8cpp_source.html#l00511">target_handler::mode_spell()</a>, <a class="el" href="magic_8h_source.html#l00743">spell_effect::override_parameters::override_parameters()</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="magic_8cpp_source.html#l00794">select_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00148">spell_effect::short_range_teleport()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, and <a class="el" href="magic_8cpp_source.html#l00919">targetable_locations()</a>.</p>

</div>
</div>
<a id="a25db0a720eff61873d779a5db0428b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25db0a720eff61873d779a5db0428b16">&#9670;&nbsp;</a></span>select_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; spell::select_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00794">794</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> target = source-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordtype">bool</span> target_is_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( *source ) &gt; 0 &amp;&amp; !<a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8">spell_target::none</a> ) &amp;&amp;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">spell_flag::RANDOM_TARGET</a> ) ) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span>( source-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <a class="code" href="classavatar.html">avatar</a> &amp;source_avatar = *source-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                std::vector&lt;tripoint&gt; <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a> = <a class="code" href="namespacetarget__handler.html#a10911d1ab9fa4b1484138f1bc379baa5">target_handler::mode_spell</a>( source_avatar, *<span class="keyword">this</span>,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                                   <span class="keyword">true</span>,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                                   <span class="keyword">true</span> );</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.empty() ) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    target = <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.back();</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    target_is_valid = <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( source_avatar, target );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                    <span class="keywordflow">if</span>( !( <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">spell_target::ground</a> ) || source_avatar.<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( target ) ) ) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                        target_is_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    target_is_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <span class="keywordflow">if</span>( !target_is_valid ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop targeting?  Time spent will be lost.&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            } <span class="keywordflow">while</span>( !target_is_valid );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( source-&gt;<a class="code" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <a class="code" href="classnpc.html">npc</a> &amp;source_npc = *source-&gt;<a class="code" href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">as_npc</a>();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <a class="code" href="classnpc__attack__spell.html">npc_attack_spell</a> npc_spell( <span class="keywordtype">id</span>() );</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="comment">// recalculate effectiveness because it&#39;s been a few turns since the npc started casting.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keyword">const</span> <a class="code" href="classnpc__attack__rating.html">npc_attack_rating</a> effectiveness = npc_spell.evaluate( source_npc,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                                    source_npc.<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.lock().get() );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keywordflow">if</span>( effectiveness &lt; 0 ) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af23f8ccb0fd99b8a3db9e9223a5714a2">debugmode::debug_filter::DF_NPC</a>, <span class="stringliteral">&quot;%s cancels casting %s, target lost&quot;</span>,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                               source_npc.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(), <a class="code" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>() );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                target = effectiveness.<a class="code" href="classnpc__attack__rating.html#a5edbe25131a7337a3738bd24cd113f5b">target</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        } <span class="comment">// TODO: move monster spell attack targeting here</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">spell_flag::RANDOM_TARGET</a> ) ) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; target_ = <a class="code" href="classspell.html#a7a62c6ffd858fa8baeeb225aba2f06ac">random_valid_target</a>( *source, source-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span>( !target_ ) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            source-&gt;<a class="code" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="structgame__message__params.html">game_message_params</a>{ <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="enums_8h.html#a3c6c2b91b92d3e5471a017b197da3d29a400a66f0d4015783e72f1e33c0b7dcb8">gmf_bypass_cooldown</a> },</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t find a suitable target.&quot;</span> ) );</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        target = *target_;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a15520bb61b6da84f9bd753fa43dcbabc"><div class="ttname"><a href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">Character::last_target</a></div><div class="ttdeci">weak_ptr_fast&lt; Creature &gt; last_target</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02761">character.h:2761</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00829">character.cpp:829</a></div></div>
<div class="ttc" id="aclassCharacter_html_a906192bd3a5f29a61ee12695e18d2eb5"><div class="ttname"><a href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_avatar=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11397">character.cpp:11397</a></div></div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclassCreature_html_a5de5f5e0d08deb03b68749608eb360b2"><div class="ttname"><a href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">Creature::as_npc</a></div><div class="ttdeci">virtual npc * as_npc()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00286">creature.h:286</a></div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00268">creature.h:268</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassnpc__attack__rating_html"><div class="ttname"><a href="classnpc__attack__rating.html">npc_attack_rating</a></div><div class="ttdef"><b>Definition:</b> <a href="npc__attack_8h_source.html#l00017">npc_attack.h:18</a></div></div>
<div class="ttc" id="aclassnpc__attack__rating_html_a5edbe25131a7337a3738bd24cd113f5b"><div class="ttname"><a href="classnpc__attack__rating.html#a5edbe25131a7337a3738bd24cd113f5b">npc_attack_rating::target</a></div><div class="ttdeci">tripoint target() const</div><div class="ttdef"><b>Definition:</b> <a href="npc__attack_8h_source.html#l00030">npc_attack.h:30</a></div></div>
<div class="ttc" id="aclassnpc__attack__spell_html"><div class="ttname"><a href="classnpc__attack__spell.html">npc_attack_spell</a></div><div class="ttdoc">The type of npc_attack that is a spell.</div><div class="ttdef"><b>Definition:</b> <a href="npc__attack_8h_source.html#l00063">npc_attack.h:64</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassspell_html_abdf34d5415c3fdafcd84fe3a7101bddb"><div class="ttname"><a href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">spell::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01207">magic.cpp:1207</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3c6c2b91b92d3e5471a017b197da3d29a400a66f0d4015783e72f1e33c0b7dcb8"><div class="ttname"><a href="enums_8h.html#a3c6c2b91b92d3e5471a017b197da3d29a400a66f0d4015783e72f1e33c0b7dcb8">gmf_bypass_cooldown</a></div><div class="ttdeci">@ gmf_bypass_cooldown</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00375">enums.h:375</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2af23f8ccb0fd99b8a3db9e9223a5714a2"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af23f8ccb0fd99b8a3db9e9223a5714a2">debugmode::DF_NPC</a></div><div class="ttdeci">@ DF_NPC</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00267">debug.h:267</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_a10911d1ab9fa4b1484138f1bc379baa5"><div class="ttname"><a href="namespacetarget__handler.html#a10911d1ab9fa4b1484138f1bc379baa5">target_handler::mode_spell</a></div><div class="ttdeci">trajectory mode_spell(avatar &amp;you, spell &amp;casting, bool no_fail, bool no_mana)</div><div class="ttdoc">Casting a spell.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00511">ranged.cpp:511</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_aea843144f5e69546ddea88eeda177640"><div class="ttname"><a href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; trajectory</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00029">ranged.h:29</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="astructgame__message__params_html"><div class="ttname"><a href="structgame__message__params.html">game_message_params</a></div><div class="ttdoc">Structure allowing a combination of game_message_type and game_message_flags.</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00380">enums.h:380</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="creature_8h_source.html#l00976">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="creature_8h_source.html#l00286">Creature::as_npc()</a>, <a class="el" href="debug_8h_source.html#l00267">debugmode::DF_NPC</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00111">npc_attack_spell::evaluate()</a>, <a class="el" href="enums_8h_source.html#l00375">gmf_bypass_cooldown</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">ground</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="creature_8h_source.html#l00268">Creature::is_npc()</a>, <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="ranged_8cpp_source.html#l00511">target_handler::mode_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01207">name()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba95aa3650620c7879b3276744d8284b0d">RANDOM_TARGET</a>, <a class="el" href="magic_8cpp_source.html#l01893">random_valid_target()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, and <a class="el" href="npc__attack_8h_source.html#l00030">npc_attack_rating::target()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l04447">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_cast_spell()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="add2c742d2996e6c81ab5b70b081544d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add2c742d2996e6c81ab5b70b081544d9">&#9670;&nbsp;</a></span>set_exp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::set_exp </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nxp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01332">1332</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;{</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a> = nxp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00429">experience</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l03023">fake_spell::get_spell()</a>, and <a class="el" href="magic_8cpp_source.html#l02079">known_magic::set_spell_exp()</a>.</p>

</div>
</div>
<a id="a21f5450a0454bf54ca779f62fada69b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f5450a0454bf54ca779f62fada69b6">&#9670;&nbsp;</a></span>set_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::set_level </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlevel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01020">1020</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;{</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a> = 0;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="classspell.html#a7ad2e0f8de920dad808a184a5760e295">gain_levels</a>( guy, nlevel );</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_a7ad2e0f8de920dad808a184a5760e295"><div class="ttname"><a href="classspell.html#a7ad2e0f8de920dad808a184a5760e295">spell::gain_levels</a></div><div class="ttdeci">void gain_levels(const Character &amp;guy, int gains)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01010">magic.cpp:1010</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00429">experience</a>, and <a class="el" href="magic_8cpp_source.html#l01010">gain_levels()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l02722">Character::add_bionic()</a>, <a class="el" href="magic_8cpp_source.html#l02059">known_magic::set_spell_level()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a59e8773eaa3a6236182746cbc3930d07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e8773eaa3a6236182746cbc3930d07">&#9670;&nbsp;</a></span>set_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::set_message </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtranslation.html">translation</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00657">657</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="classspell.html#a838599c428e33e70b7e62b3e195dc6b9">alt_message</a> = msg;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00447">alt_message</a>.</p>

<p class="reference">Referenced by <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>.</p>

</div>
</div>
<a id="aaebea12d6d996597d17c65e3b5445807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaebea12d6d996597d17c65e3b5445807">&#9670;&nbsp;</a></span>set_temp_adjustment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::set_temp_adjustment </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>target_property</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>adjustment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01598">1598</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;{</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;caster_level&quot;</span> ) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a> += adjustment;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;casting_time&quot;</span> ) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="classspell.html#ad2aedf645ec1614d5a4d832a7d411e22">temp_cast_time_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;cost&quot;</span> ) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="classspell.html#add38c2281c13a3e1531b72db141b2a4b">temp_spell_cost_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;aoe&quot;</span> ) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <a class="code" href="classspell.html#a2857365ef6cc65207a1ee75fc390ef13">temp_aoe_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;range&quot;</span> ) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="classspell.html#a03dea8803fea1685efa62ace8ab9b082">temp_range_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;duration&quot;</span> ) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <a class="code" href="classspell.html#afca00dce83ea257e838d8cfade31955c">temp_duration_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;difficulty&quot;</span> ) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="classspell.html#a35f7c66814c80a047ed87d86d13ba6c6">temp_difficulty_adjustment</a> += adjustment;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;somatic_difficulty&quot;</span> ) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;sound&quot;</span> ) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target_property == <span class="stringliteral">&quot;concentration&quot;</span> ) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <a class="code" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a> += adjustment;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: invalid spellcasting adjustment name: %s&quot;</span>, target_property );</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="magic_8h_source.html#l00437">temp_aoe_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00435">temp_cast_time_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00443">temp_concentration_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00440">temp_difficulty_adjustment</a>, <a class="el" href="magic_8h_source.html#l00439">temp_duration_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00434">temp_level_adjustment</a>, <a class="el" href="magic_8h_source.html#l00438">temp_range_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00442">temp_sound_multiplyer</a>, and <a class="el" href="magic_8h_source.html#l00436">temp_spell_cost_multiplyer</a>.</p>

</div>
</div>
<a id="a658a5172a4c77d28ef4aefdcc474301c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a658a5172a4c77d28ef4aefdcc474301c">&#9670;&nbsp;</a></span>set_temp_level_adjustment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::set_temp_level_adjustment </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>adjustment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01592">1592</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;{</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="classspell.html#a17425a8a64b4647f35bebaafb1ac2bed">temp_level_adjustment</a> = adjustment;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00434">temp_level_adjustment</a>.</p>

</div>
</div>
<a id="ab26955ff4600c3a2855e6fe02dc0d216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26955ff4600c3a2855e6fe02dc0d216">&#9670;&nbsp;</a></span>shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9c">spell_shape</a> spell::shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01312">1312</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;{</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#abf08fe1f454fd0649d9855104630afe4">spell_area</a>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_abf08fe1f454fd0649d9855104630afe4"><div class="ttname"><a href="classspell__type.html#abf08fe1f454fd0649d9855104630afe4">spell_type::spell_area</a></div><div class="ttdeci">spell_shape spell_area</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00234">magic.h:234</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00234">spell_type::spell_area</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l00426">calculate_spell_effect_area()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">target_ui::panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">target_ui::set_cursor_pos()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, and <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>.</p>

</div>
</div>
<a id="ab4c5d1958442f999fe006be4d89883cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c5d1958442f999fe006be4d89883cf">&#9670;&nbsp;</a></span>skill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a> spell::skill </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00672">672</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#abd2cfd23c656755b0f887064683d9e13">skill</a>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div>
<div class="ttc" id="aclassspell__type_html_abd2cfd23c656755b0f887064683d9e13"><div class="ttname"><a href="classspell__type.html#abd2cfd23c656755b0f887064683d9e13">spell_type::skill</a></div><div class="ttdeci">skill_id skill</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00217">magic.h:217</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00217">spell_type::skill</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01666">exp_modifier()</a>, <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03915">activity_handlers::study_spell_do_turn()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02304">learn_spell_actor::use()</a>.</p>

</div>
</div>
<a id="a09d458a079bc27306786045580033794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09d458a079bc27306786045580033794">&#9670;&nbsp;</a></span>sound_volume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::sound_volume </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01428">1428</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;{</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordtype">int</span> loudness = 0;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7e92d833d7720dbe631730a6cea03346">spell_flag::SILENT</a> ) ) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        loudness = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) ) / 3;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba658a021a796aa5501503220adb38cf45">spell_flag::LOUD</a> ) ) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            loudness += 1 + <a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( caster ) / 3;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( loudness * <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a>, 0.0f );</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;}</div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba658a021a796aa5501503220adb38cf45"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba658a021a796aa5501503220adb38cf45">spell_flag::LOUD</a></div><div class="ttdeci">@ LOUD</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba7e92d833d7720dbe631730a6cea03346"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7e92d833d7720dbe631730a6cea03346">spell_flag::SILENT</a></div><div class="ttdeci">@ SILENT</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba658a021a796aa5501503220adb38cf45">LOUD</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7e92d833d7720dbe631730a6cea03346">SILENT</a>, and <a class="el" href="magic_8h_source.html#l00442">temp_sound_multiplyer</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc__attack_8cpp_source.html#l00151">npc_attack_spell::can_use()</a>, and <a class="el" href="magic_8cpp_source.html#l01440">make_sound()</a>.</p>

</div>
</div>
<a id="a388a3e18bba1c58aa9c00dc53bc97aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a388a3e18bba1c58aa9c00dc53bc97aef">&#9670;&nbsp;</a></span>spell_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> spell::spell_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00667">667</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00321">spell_type::spell_class</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l01322">gain_exp()</a>, <a class="el" href="debug__menu_8cpp_source.html#l00714">debug_menu::spell_description()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="ada3a6b9f7ba0c643ee59b8389b9f56ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada3a6b9f7ba0c643ee59b8389b9f56ec">&#9670;&nbsp;</a></span>spell_fail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float spell::spell_fail </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01220">1220</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba60c0bff03788dc44e951565aa413a637">spell_flag::NO_FAIL</a> ) ) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_psi = <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">spell_flag::PSIONIC</a> );</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">// formula is based on the following:</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// exponential curve</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// effective skill of 0 or less is 100% failure</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// effective skill of 8 (8 int, 0 spellcraft, 0 spell level, spell difficulty 0) is ~50% failure</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">// effective skill of 30 is 0% failure</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> effective_skill = 2 * ( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() - <a class="code" href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">get_difficulty</a>(</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                                            guy ) ) + guy.<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() +</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                                  guy.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classspell.html#ab4c5d1958442f999fe006be4d89883cf">skill</a>() );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// skill for psi powers downplays power level and is much more based on level and intelligence</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// and goes up to 40 max--effective skill of 10 is 50% failure, effective skill of 40 is 0%</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">// Int 8, Metaphysics 2, level 1, difficulty 1 is effective level 26.5</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// Int 10, Metaphysics 5, level 4, difficulty 5 is effective level 27</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// Int 12, Metaphysics 8, level 7, difficulty 10 is effective level 33.5</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> two_thirds_power_level = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classspell.html#a7c7293c53d4dc763a6e2aa2ee1224bff">get_effective_level</a>() ) /</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                         ( 1.5 );</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> psi_effective_skill = 2 * ( ( guy.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classspell.html#ab4c5d1958442f999fe006be4d89883cf">skill</a>() ) * 2 ) - <a class="code" href="classspell.html#a0c002dde68c8222bed0a619b28e0b91a">get_difficulty</a>(</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            guy ) ) + ( guy.<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() * 1.5 ) + two_thirds_power_level;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// add an if statement in here because sufficiently large numbers will definitely overflow because of exponents</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span>( ( effective_skill &gt; 30.0f &amp;&amp; !is_psi ) || ( psi_effective_skill &gt; 40.0f &amp;&amp; is_psi ) ) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( effective_skill &lt; 0.0f &amp;&amp; !is_psi ) || ( psi_effective_skill &lt; 0.0f &amp;&amp; is_psi ) ) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordtype">float</span> fail_chance = std::pow( ( effective_skill - 30.0f ) / 30.0f, 2 );</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordtype">float</span> psi_fail_chance = std::pow( ( psi_effective_skill - 40.0f ) / 40.0f, 2 );</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span>( !is_psi ) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">spell_flag::SOMATIC</a> ) &amp;&amp;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a> ) &amp;&amp; <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="comment">// the first 20 points of encumbrance combined is ignored</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> arms_encumb = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                                              guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::type::arm</a> ) - 10 );</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="comment">// each encumbrance point beyond the &quot;gray&quot; color counts as half an additional fail %</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            fail_chance += ( arms_encumb / 200.0f ) * <a class="code" href="classspell.html#ae4e58f791f76940f5f07c361c745168e">temp_somatic_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2">spell_flag::VERBAL</a> ) &amp;&amp;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            !guy.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="magic_8cpp.html#ad199c3bc7a5d8202c5122a34588b792e">json_flag_SILENT_SPELL</a> ) &amp;&amp; <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <span class="comment">// a little bit of mouth encumbrance is allowed, but not much</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mouth_encumb = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                                               guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1acb5786412becb979c90f606f25ad4b4f">body_part_type::type::mouth</a> ) - 5 );</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            fail_chance += ( mouth_encumb / 100.0f ) * <a class="code" href="classspell.html#abbefbc21e6bf90db7b45cae05c3a6c9f">temp_sound_multiplyer</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="comment">// concentration spells work better than you&#39;d expect with a higher focus pool</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c">spell_flag::CONCENTRATE</a> ) &amp;&amp; <a class="code" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a> &gt; 0 ) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span>( guy.<a class="code" href="classCharacter.html#a6718828920830004d1c3e0dc847fc683">get_focus</a>() &lt;= 0 ) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordtype">float</span> concentration_loss = ( 1.0f - ( guy.<a class="code" href="classCharacter.html#a6718828920830004d1c3e0dc847fc683">get_focus</a>() / 100.0f ) ) *</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                                   <a class="code" href="classspell.html#a7d2e3b1f81c61f10312aa50e3626b2f9">temp_concentration_difficulty_multiplyer</a>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        fail_chance /= 1.0f - concentration_loss;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        psi_fail_chance /= 1.0f - concentration_loss;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( is_psi ? psi_fail_chance : fail_chance, 0.0f, 1.0f );</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6718828920830004d1c3e0dc847fc683"><div class="ttname"><a href="classCharacter.html#a6718828920830004d1c3e0dc847fc683">Character::get_focus</a></div><div class="ttdeci">int get_focus() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02745">character.h:2745</a></div></div>
<div class="ttc" id="amagic_8cpp_html_ad199c3bc7a5d8202c5122a34588b792e"><div class="ttname"><a href="magic_8cpp.html#ad199c3bc7a5d8202c5122a34588b792e">json_flag_SILENT_SPELL</a></div><div class="ttdeci">static const json_character_flag json_flag_SILENT_SPELL(&quot;SILENT_SPELL&quot;)</div></div>
<div class="ttc" id="amagic_8h_html_a8c5adb88f821564363888cbe773f197ba60c0bff03788dc44e951565aa413a637"><div class="ttname"><a href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba60c0bff03788dc44e951565aa413a637">spell_flag::NO_FAIL</a></div><div class="ttdeci">@ NO_FAIL</div></div>
<div class="ttc" id="astructbody__part__type_html_a5c9ac1217c128e0f487b2f460dd3fad1acb5786412becb979c90f606f25ad4b4f"><div class="ttname"><a href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1acb5786412becb979c90f606f25ad4b4f">body_part_type::type::mouth</a></div><div class="ttdeci">@ mouth</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1af926b3e222d7afee57071b2256839701">body_part_type::arm</a>, <a class="el" href="character_8cpp_source.html#l04030">Character::avg_encumb_of_limb_type()</a>, <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba0297e660e18811956462c321349a263c">CONCENTRATE</a>, <a class="el" href="magic_8cpp_source.html#l01147">get_difficulty()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="character_8h_source.html#l02745">Character::get_focus()</a>, <a class="el" href="character_8cpp_source.html#l04139">Character::get_int()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp.html#ad199c3bc7a5d8202c5122a34588b792e">json_flag_SILENT_SPELL</a>, <a class="el" href="magic_8cpp.html#a7e54b3fea40776c033ce3476443d8eed">json_flag_SUBTLE_SPELL</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1acb5786412becb979c90f606f25ad4b4f">body_part_type::mouth</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba60c0bff03788dc44e951565aa413a637">NO_FAIL</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba6833d7b952ec22ca6fef0a01ac2e4d3a">PSIONIC</a>, <a class="el" href="magic_8cpp_source.html#l00672">skill()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba7f3501211ea094337741cf2259a3e333">SOMATIC</a>, <a class="el" href="magic_8h_source.html#l00443">temp_concentration_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00441">temp_somatic_difficulty_multiplyer</a>, <a class="el" href="magic_8h_source.html#l00442">temp_sound_multiplyer</a>, and <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba604cda0a87a71f133cff82d25d1195c2">VERBAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01289">colorized_fail_percent()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a1b42ae28bea14653bbc623f2f3c8a2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b42ae28bea14653bbc623f2f3c8a2cb">&#9670;&nbsp;</a></span>summon_vehicle_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a> spell::summon_vehicle_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01799">1799</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;{</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#ab1b1ec17f8a72265b3de8de7182b42e6">effect_str</a> );</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;}</div>
<div class="ttc" id="atype__id_8h_html_a64efc8ab51816a59711440d464136eda"><div class="ttname"><a href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a></div><div class="ttdeci">string_id&lt; vehicle_prototype &gt; vproto_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00298">type_id.h:298</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00236">spell_type::effect_str</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic__spell__effect_8cpp_source.html#l01255">spell_effect::spawn_summoned_vehicle()</a>.</p>

</div>
</div>
<a id="a6a41577f639cd544a78c66360e61cc2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a41577f639cd544a78c66360e61cc2a">&#9670;&nbsp;</a></span>target_by_monster_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::target_by_monster_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01494">1494</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">targeted_monster_ids</a>.empty() ) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> target = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( p ) ) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">targeted_monster_ids</a>.find( target-&gt;type-&gt;id ) != <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#af64d6acee71a4ba9f6a51459fddb9953">targeted_monster_ids</a>.end() ) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">return</span> valid;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="magic_8h_source.html#l00347">spell_type::targeted_monster_ids</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>.</p>

</div>
</div>
<a id="aa9c08f86e5d6ba271db251ade738afd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c08f86e5d6ba271db251ade738afd8">&#9670;&nbsp;</a></span>target_by_species_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spell::target_by_species_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01508">1508</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;{</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60c88145cf9b37dfe7b141b143095246">targeted_species_ids</a>.empty() ) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> target = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( p ) ) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">species_id</a> &amp;spid : <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a60c88145cf9b37dfe7b141b143095246">targeted_species_ids</a> ) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <span class="keywordflow">if</span>( target-&gt;type-&gt;in_species( spid ) ) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span> valid;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="magic_8h_source.html#l00349">spell_type::targeted_species_ids</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>.</p>

</div>
</div>
<a id="a9917a8122ab05a8c6a88da3d699546b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9917a8122ab05a8c6a88da3d699546b3">&#9670;&nbsp;</a></span>targetable_locations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; spell::targetable_locations </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all of the tripoints the spell can be cast at. </p>
<p>if the spell can't be cast through walls, does not return anything behind walls if the spell can't target the ground, can't target unseen locations, etc. </p>

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l00919">919</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> char_pos = source.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> select_ground = <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">spell_target::ground</a> );</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_walls = <a class="code" href="classspell.html#aa609bae14a69c0987d562a2a9f8a1268">has_flag</a>( <a class="code" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">spell_flag::NO_PROJECTILE</a> );</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// TODO: put this in a namespace for reuse</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="npc__attack_8cpp.html#aafbcce917c2d2d11a56b3f35f1b642dc">has_obstruction</a> = [&amp;]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; at ) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;line_point : <a class="code" href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a>( char_pos, at ) ) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( line_point ) ) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    };</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    std::vector&lt;tripoint&gt; selectable_targets;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;query : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( char_pos, <a class="code" href="classspell.html#ab00175ffc465d406a7ec24331c6c55f2">range</a>( source ) ) ) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span>( !ignore_walls &amp;&amp; <a class="code" href="npc__attack_8cpp.html#aafbcce917c2d2d11a56b3f35f1b642dc">has_obstruction</a>( query ) ) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <span class="comment">// it&#39;s blocked somewhere!</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">if</span>( !select_ground ) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">if</span>( !source.<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( query ) ) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="comment">// can&#39;t target a critter you can&#39;t see</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( source, query ) ) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            selectable_targets.push_back( query );</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">return</span> selectable_targets;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_a802cc11379d4be61f4e2b13a50f6390e"><div class="ttname"><a href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">map::impassable</a></div><div class="ttdeci">bool impassable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02462">map.cpp:2462</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a31847b31c6ef002e9d16afd7fd0005e3"><div class="ttname"><a href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &amp;&amp;RhsInBounds &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00798">coordinates.h:798</a></div></div>
<div class="ttc" id="anpc__attack_8cpp_html_aafbcce917c2d2d11a56b3f35f1b642dc"><div class="ttname"><a href="npc__attack_8cpp.html#aafbcce917c2d2d11a56b3f35f1b642dc">has_obstruction</a></div><div class="ttdeci">static bool has_obstruction(const tripoint &amp;from, const tripoint &amp;to, bool check_ally=false)</div><div class="ttdef"><b>Definition:</b> <a href="npc__attack_8cpp_source.html#l00039">npc_attack.cpp:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a578552719239a72a2d45ad422f67d24d">ground</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00039">has_obstruction()</a>, <a class="el" href="map_8cpp_source.html#l02462">map::impassable()</a>, <a class="el" href="magic_8cpp_source.html#l01474">is_valid_target()</a>, <a class="el" href="coordinates_8h_source.html#l00798">line_to()</a>, <a class="el" href="magic_8h.html#a8c5adb88f821564363888cbe773f197ba54cdca63f8089e9058dff2c73ef37831">NO_PROJECTILE</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, and <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc__attack_8cpp_source.html#l00132">npc_attack_spell::all_evaluations()</a>, and <a class="el" href="npc__attack_8cpp_source.html#l00111">npc_attack_spell::evaluate()</a>.</p>

</div>
</div>
<a id="ad8ebcd422eb7d3caefc7c413ba9a910e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ebcd422eb7d3caefc7c413ba9a910e">&#9670;&nbsp;</a></span>use_components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spell::use_components </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01112">1112</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;{</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> &amp;spell_components = <a class="code" href="classspell.html#acacc930abceced994590480b878ccdd8">type</a>-&gt;<a class="code" href="classspell__type.html#a58dc5f9a0291fecd13320cff374013b8">spell_components</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">// if we&#39;re here, we&#39;re assuming the Character has the correct components (using can_cast())</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="classinventory.html">inventory</a> map_inv;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    map_inv.<a class="code" href="classinventory.html#a31bf20ee0144627b5fba528b81559bc6">form_from_map</a>( guy.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 0, &amp;guy, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;item_comp&gt; &amp;comp_vec : spell_components.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        guy.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( guy.<a class="code" href="classCharacter.html#a15e400d8098702465a58e5ff71ad734f">select_item_component</a>( comp_vec, 1, map_inv ), 1 );</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;tool_comp&gt; &amp;tool_vec : spell_components.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        guy.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( guy.<a class="code" href="classCharacter.html#a860d40c9c27d0d12490c014cba63c598">select_tool_component</a>( tool_vec, 1, map_inv ), 1 );</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a15e400d8098702465a58e5ff71ad734f"><div class="ttname"><a href="classCharacter.html#a15e400d8098702465a58e5ff71ad734f">Character::select_item_component</a></div><div class="ttdeci">comp_selection&lt; item_comp &gt; select_item_component(const std::vector&lt; item_comp &gt; &amp;components, int batch, read_only_visitable &amp;map_inv, bool can_cancel=false, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool player_inv=true, bool npc_query=false, const recipe *rec=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01746">crafting.cpp:1746</a></div></div>
<div class="ttc" id="aclassCharacter_html_a33d0aa99b607cfbe38b910d4dd6b0b1b"><div class="ttname"><a href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">Character::consume_tools</a></div><div class="ttdeci">void consume_tools(const comp_selection&lt; tool_comp &gt; &amp;tool, int batch)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02400">crafting.cpp:2400</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5d161e8df8122b5f3d74a081ee8d12cf"><div class="ttname"><a href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">Character::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02029">crafting.cpp:2029</a></div></div>
<div class="ttc" id="aclassCharacter_html_a860d40c9c27d0d12490c014cba63c598"><div class="ttname"><a href="classCharacter.html#a860d40c9c27d0d12490c014cba63c598">Character::select_tool_component</a></div><div class="ttdeci">comp_selection&lt; tool_comp &gt; select_tool_component(const std::vector&lt; tool_comp &gt; &amp;tools, int batch, read_only_visitable &amp;map_inv, bool can_cancel=false, bool player_inv=true, bool npc_query=false, const std::function&lt; int(int)&gt; &amp;charges_required_modifier=[](int i) { return i;})</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02173">crafting.cpp:2173</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassinventory_html_a31bf20ee0144627b5fba528b81559bc6"><div class="ttname"><a href="classinventory.html#a31bf20ee0144627b5fba528b81559bc6">inventory::form_from_map</a></div><div class="ttdeci">void form_from_map(const tripoint &amp;origin, int range, const Character *pl=nullptr, bool assign_invlet=true, bool clear_path=true)</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00483">inventory.cpp:483</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a175d46943600149603b7a915cb48092b"><div class="ttname"><a href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">requirement_data::get_tools</a></div><div class="ttdeci">const alter_tool_comp_vector &amp; get_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01152">requirements.cpp:1152</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01162">requirements.cpp:1162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="inventory_8cpp_source.html#l00483">inventory::form_from_map()</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="requirements_8cpp_source.html#l01152">requirement_data::get_tools()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="crafting_8cpp_source.html#l01746">Character::select_item_component()</a>, <a class="el" href="crafting_8cpp_source.html#l02173">Character::select_tool_component()</a>, <a class="el" href="magic_8h_source.html#l00219">spell_type::spell_components</a>, and <a class="el" href="magic_8h_source.html#l00426">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<a id="a1758e56413516ae56a4ee161e998c338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1758e56413516ae56a4ee161e998c338">&#9670;&nbsp;</a></span>xp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spell::xp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01317">1317</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;{</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classspell.html#afe669e2e24cdf747a0133eb892eb1aa1">experience</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00429">experience</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01655">exp_progress()</a>, <a class="el" href="magic_8cpp_source.html#l01650">exp_to_next_level()</a>, <a class="el" href="magic_8cpp_source.html#l02444">spellcasting_callback::spell_info_text()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03802">activity_handlers::spellcasting_finish()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="ac3848cd810ab2c4e7774f21886663f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3848cd810ab2c4e7774f21886663f39">&#9670;&nbsp;</a></span>spell_events</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classspell__events.html">spell_events</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00424">424</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a838599c428e33e70b7e62b3e195dc6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838599c428e33e70b7e62b3e195dc6b9">&#9670;&nbsp;</a></span>alt_message</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtranslation.html">translation</a> spell::alt_message</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00447">447</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01212">message()</a>, and <a class="el" href="magic_8cpp_source.html#l00657">set_message()</a>.</p>

</div>
</div>
<a id="afe669e2e24cdf747a0133eb892eb1aa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe669e2e24cdf747a0133eb892eb1aa1">&#9670;&nbsp;</a></span>experience</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::experience = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00429">429</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01322">gain_exp()</a>, <a class="el" href="magic_8cpp_source.html#l01570">get_level()</a>, <a class="el" href="magic_8cpp_source.html#l01332">set_exp()</a>, <a class="el" href="magic_8cpp_source.html#l01020">set_level()</a>, and <a class="el" href="magic_8cpp_source.html#l01317">xp()</a>.</p>

</div>
</div>
<a id="a2857365ef6cc65207a1ee75fc390ef13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2857365ef6cc65207a1ee75fc390ef13">&#9670;&nbsp;</a></span>temp_aoe_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_aoe_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00437">437</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="ad2aedf645ec1614d5a4d832a7d411e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2aedf645ec1614d5a4d832a7d411e22">&#9670;&nbsp;</a></span>temp_cast_time_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_cast_time_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00435">435</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="a7d2e3b1f81c61f10312aa50e3626b2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2e3b1f81c61f10312aa50e3626b2f9">&#9670;&nbsp;</a></span>temp_concentration_difficulty_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_concentration_difficulty_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00443">443</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>, and <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>.</p>

</div>
</div>
<a id="a35f7c66814c80a047ed87d86d13ba6c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f7c66814c80a047ed87d86d13ba6c6">&#9670;&nbsp;</a></span>temp_difficulty_adjustment</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::temp_difficulty_adjustment = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00440">440</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l01147">get_difficulty()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="afca00dce83ea257e838d8cfade31955c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afca00dce83ea257e838d8cfade31955c">&#9670;&nbsp;</a></span>temp_duration_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_duration_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00439">439</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="a17425a8a64b4647f35bebaafb1ac2bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17425a8a64b4647f35bebaafb1ac2bed">&#9670;&nbsp;</a></span>temp_level_adjustment</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int spell::temp_level_adjustment = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00434">434</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l01576">get_effective_level()</a>, <a class="el" href="magic_8cpp_source.html#l01587">get_temp_level_adjustment()</a>, <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>, and <a class="el" href="magic_8cpp_source.html#l01592">set_temp_level_adjustment()</a>.</p>

</div>
</div>
<a id="a03dea8803fea1685efa62ace8ab9b082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03dea8803fea1685efa62ace8ab9b082">&#9670;&nbsp;</a></span>temp_range_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_range_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00438">438</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="ae4e58f791f76940f5f07c361c745168e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4e58f791f76940f5f07c361c745168e">&#9670;&nbsp;</a></span>temp_somatic_difficulty_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_somatic_difficulty_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00441">441</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l02383">casting_time_encumbered()</a>, <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="magic_8cpp_source.html#l01083">no_hands()</a>, <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>, and <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>.</p>

</div>
</div>
<a id="abbefbc21e6bf90db7b45cae05c3a6c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbefbc21e6bf90db7b45cae05c3a6c9f">&#9670;&nbsp;</a></span>temp_sound_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_sound_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00442">442</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l02409">enumerate_spell_data()</a>, <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>, <a class="el" href="magic_8cpp_source.html#l01428">sound_volume()</a>, and <a class="el" href="magic_8cpp_source.html#l01220">spell_fail()</a>.</p>

</div>
</div>
<a id="add38c2281c13a3e1531b72db141b2a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add38c2281c13a3e1531b72db141b2a4b">&#9670;&nbsp;</a></span>temp_spell_cost_multiplyer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float spell::temp_spell_cost_multiplyer = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00436">436</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01624">clear_temp_adjustments()</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, and <a class="el" href="magic_8cpp_source.html#l01598">set_temp_adjustment()</a>.</p>

</div>
</div>
<a id="acacc930abceced994590480b878ccdd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acacc930abceced994590480b878ccdd8">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> spell::type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00426">426</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l00731">accuracy()</a>, <a class="el" href="magic_8cpp_source.html#l00854">aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00895">aoe_string()</a>, <a class="el" href="magic_8cpp_source.html#l01400">bp_is_affected()</a>, <a class="el" href="magic_8cpp_source.html#l01093">can_cast()</a>, <a class="el" href="magic_8cpp_source.html#l01032">can_learn()</a>, <a class="el" href="magic_8cpp_source.html#l01833">cast_all_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01874">cast_extra_spell_effects()</a>, <a class="el" href="magic_8cpp_source.html#l01819">cast_spell_effect()</a>, <a class="el" href="magic_8cpp_source.html#l01158">casting_time()</a>, <a class="el" href="magic_8cpp_source.html#l01129">check_if_component_in_hand()</a>, <a class="el" href="magic_8cpp_source.html#l01197">components()</a>, <a class="el" href="magic_8cpp_source.html#l01405">create_field()</a>, <a class="el" href="magic_8cpp_source.html#l00705">damage()</a>, <a class="el" href="magic_8cpp_source.html#l00750">damage_dot()</a>, <a class="el" href="magic_8cpp_source.html#l00773">damage_string()</a>, <a class="el" href="magic_8cpp_source.html#l01543">description()</a>, <a class="el" href="magic_8cpp_source.html#l01758">dmg_type()</a>, <a class="el" href="magic_8cpp_source.html#l00693">dps()</a>, <a class="el" href="magic_8cpp_source.html#l00965">duration()</a>, <a class="el" href="magic_8cpp_source.html#l00985">duration_string()</a>, <a class="el" href="magic_8cpp_source.html#l01454">effect()</a>, <a class="el" href="magic_8cpp_source.html#l00873">effect_area()</a>, <a class="el" href="magic_8cpp_source.html#l01794">effect_data()</a>, <a class="el" href="magic_8cpp_source.html#l01040">energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l01459">energy_source()</a>, <a class="el" href="magic_8cpp_source.html#l01337">energy_string()</a>, <a class="el" href="magic_8cpp_source.html#l00677">field_intensity()</a>, <a class="el" href="magic_8cpp_source.html#l01147">get_difficulty()</a>, <a class="el" href="magic_8cpp_source.html#l01581">get_max_level()</a>, <a class="el" href="magic_8cpp_source.html#l01153">get_src()</a>, <a class="el" href="magic_8cpp_source.html#l01202">has_components()</a>, <a class="el" href="magic_8cpp_source.html#l01074">has_flag()</a>, <a class="el" href="magic_8cpp_source.html#l00662">id()</a>, <a class="el" href="magic_8cpp_source.html#l01524">ignore_by_species_id()</a>, <a class="el" href="magic_8cpp_source.html#l00885">in_aoe()</a>, <a class="el" href="magic_8cpp_source.html#l01026">is_max_level()</a>, <a class="el" href="magic_8cpp_source.html#l01088">is_spell_class()</a>, <a class="el" href="magic_8cpp_source.html#l01395">is_valid()</a>, <a class="el" href="magic_8cpp_source.html#l01469">is_valid_target()</a>, <a class="el" href="magic_8cpp_source.html#l01742">list_ignored_species_names()</a>, <a class="el" href="magic_8cpp_source.html#l01710">list_targeted_monster_names()</a>, <a class="el" href="magic_8cpp_source.html#l01726">list_targeted_species_names()</a>, <a class="el" href="magic_8cpp_source.html#l01448">make_sound()</a>, <a class="el" href="magic_8cpp_source.html#l01212">message()</a>, <a class="el" href="magic_8cpp_source.html#l00724">min_leveled_accuracy()</a>, <a class="el" href="magic_8cpp_source.html#l00847">min_leveled_aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00685">min_leveled_damage()</a>, <a class="el" href="magic_8cpp_source.html#l00743">min_leveled_dot()</a>, <a class="el" href="magic_8cpp_source.html#l00958">min_leveled_duration()</a>, <a class="el" href="magic_8cpp_source.html#l01207">name()</a>, <a class="el" href="magic_8cpp_source.html#l00905">range()</a>, <a class="el" href="magic_8cpp_source.html#l01312">shape()</a>, <a class="el" href="magic_8cpp_source.html#l00672">skill()</a>, <a class="el" href="magic_8cpp_source.html#l00667">spell_class()</a>, <a class="el" href="magic_8cpp_source.html#l01799">summon_vehicle_id()</a>, <a class="el" href="magic_8cpp_source.html#l01494">target_by_monster_id()</a>, <a class="el" href="magic_8cpp_source.html#l01508">target_by_species_id()</a>, and <a class="el" href="magic_8cpp_source.html#l01112">use_components()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="magic_8h_source.html">magic.h</a></li>
<li>src/<a class="el" href="magic_8cpp_source.html">magic.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:44 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
