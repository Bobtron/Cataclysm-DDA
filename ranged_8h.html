<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/ranged.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ranged.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iosfwd&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="creature_8h_source.html">creature.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="point_8h_source.html">point.h</a>&quot;</code><br />
</div>
<p><a href="ranged_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTarget__attributes.html">Target_attributes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacetarget__handler"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html">target_handler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a93ec699e97cddce95159e22885825111"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a93ec699e97cddce95159e22885825111">CATA_SRC_RANGED_H</a></td></tr>
<tr class="separator:a93ec699e97cddce95159e22885825111"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aea843144f5e69546ddea88eeda177640"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> = std::vector&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;</td></tr>
<tr class="separator:aea843144f5e69546ddea88eeda177640"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad17e5a6408a9a9dbe8ac07aa89b0dac4"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#ad17e5a6408a9a9dbe8ac07aa89b0dac4">target_handler::mode_select_only</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, int range)</td></tr>
<tr class="memdesc:ad17e5a6408a9a9dbe8ac07aa89b0dac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic target select without fire something.  <a href="namespacetarget__handler.html#ad17e5a6408a9a9dbe8ac07aa89b0dac4">More...</a><br /></td></tr>
<tr class="separator:ad17e5a6408a9a9dbe8ac07aa89b0dac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e531943e7385d987d87f82f5957821"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#a15e531943e7385d987d87f82f5957821">target_handler::mode_fire</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classaim__activity__actor.html">aim_activity_actor</a> &amp;activity)</td></tr>
<tr class="memdesc:a15e531943e7385d987d87f82f5957821"><td class="mdescLeft">&#160;</td><td class="mdescRight">Firing ranged weapon.  <a href="namespacetarget__handler.html#a15e531943e7385d987d87f82f5957821">More...</a><br /></td></tr>
<tr class="separator:a15e531943e7385d987d87f82f5957821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6b4d399e1ef6b51df0dc4621a5720d"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">target_handler::mode_throw</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem.html">item</a> &amp;relevant, bool blind_throwing)</td></tr>
<tr class="memdesc:abf6b4d399e1ef6b51df0dc4621a5720d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Throwing item.  <a href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">More...</a><br /></td></tr>
<tr class="separator:abf6b4d399e1ef6b51df0dc4621a5720d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee0da8af1b540479f0a5def5357a8b5"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#a2ee0da8af1b540479f0a5def5357a8b5">target_handler::mode_reach</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> weapon)</td></tr>
<tr class="memdesc:a2ee0da8af1b540479f0a5def5357a8b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reach attacking.  <a href="namespacetarget__handler.html#a2ee0da8af1b540479f0a5def5357a8b5">More...</a><br /></td></tr>
<tr class="separator:a2ee0da8af1b540479f0a5def5357a8b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f06978559f45ddb20b5a1caec3f9c1f"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#a9f06978559f45ddb20b5a1caec3f9c1f">target_handler::mode_turret_manual</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classturret__data.html">turret_data</a> &amp;turret)</td></tr>
<tr class="memdesc:a9f06978559f45ddb20b5a1caec3f9c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually firing vehicle turret.  <a href="namespacetarget__handler.html#a9f06978559f45ddb20b5a1caec3f9c1f">More...</a><br /></td></tr>
<tr class="separator:a9f06978559f45ddb20b5a1caec3f9c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3371a56d7b45012072236fb97eda5cc0"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#a3371a56d7b45012072236fb97eda5cc0">target_handler::mode_turrets</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classvehicle.html">vehicle</a> &amp;veh, const std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; &amp;turrets)</td></tr>
<tr class="memdesc:a3371a56d7b45012072236fb97eda5cc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selecting target for turrets (when using vehicle controls)  <a href="namespacetarget__handler.html#a3371a56d7b45012072236fb97eda5cc0">More...</a><br /></td></tr>
<tr class="separator:a3371a56d7b45012072236fb97eda5cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10911d1ab9fa4b1484138f1bc379baa5"><td class="memItemLeft" align="right" valign="top">trajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetarget__handler.html#a10911d1ab9fa4b1484138f1bc379baa5">target_handler::mode_spell</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classspell.html">spell</a> &amp;casting, bool no_fail, bool no_mana)</td></tr>
<tr class="memdesc:a10911d1ab9fa4b1484138f1bc379baa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casting a spell.  <a href="namespacetarget__handler.html#a10911d1ab9fa4b1484138f1bc379baa5">More...</a><br /></td></tr>
<tr class="separator:a10911d1ab9fa4b1484138f1bc379baa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b9efd8abced2440e1b53139f2696d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#ae8b9efd8abced2440e1b53139f2696d7">practice_archery_proficiency</a> (<a class="el" href="classCharacter.html">Character</a> &amp;p, const <a class="el" href="classitem.html">item</a> &amp;relevant)</td></tr>
<tr class="separator:ae8b9efd8abced2440e1b53139f2696d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b4c3a2a360b378de261413fbb7d84f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a6b4c3a2a360b378de261413fbb7d84f0">range_with_even_chance_of_good_hit</a> (int dispersion)</td></tr>
<tr class="separator:a6b4c3a2a360b378de261413fbb7d84f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e93476c9d626924c31cf14193305b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, const <a class="el" href="classmap.html">map</a> &amp;m, std::vector&lt; <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt; &amp;messages, const <a class="el" href="classgun__mode.html">gun_mode</a> &amp;gmode)</td></tr>
<tr class="memdesc:a18e93476c9d626924c31cf14193305b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common checks for gunmode (when firing a weapon / manually firing turret)  <a href="ranged_8h.html#a18e93476c9d626924c31cf14193305b3">More...</a><br /></td></tr>
<tr class="separator:a18e93476c9d626924c31cf14193305b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a207024a5d17769a16bfc8a7a434d72cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a207024a5d17769a16bfc8a7a434d72cd">gunmode_checks_weapon</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, const <a class="el" href="classmap.html">map</a> &amp;m, std::vector&lt; <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt; &amp;messages, const <a class="el" href="classgun__mode.html">gun_mode</a> &amp;gmode)</td></tr>
<tr class="memdesc:a207024a5d17769a16bfc8a7a434d72cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Various checks for gunmode when firing a weapon.  <a href="ranged_8h.html#a207024a5d17769a16bfc8a7a434d72cd">More...</a><br /></td></tr>
<tr class="separator:a207024a5d17769a16bfc8a7a434d72cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55aace1fedc5b64c6d3d0418e251c38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#aa55aace1fedc5b64c6d3d0418e251c38">throw_cost</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, const <a class="el" href="classitem.html">item</a> &amp;to_throw)</td></tr>
<tr class="separator:aa55aace1fedc5b64c6d3d0418e251c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969d7fb0eb05d60c2c98eb568bce69f2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a969d7fb0eb05d60c2c98eb568bce69f2">calc_steadiness</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="classitem.html">item</a> &amp;weapon, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, double predicted_recoil)</td></tr>
<tr class="separator:a969d7fb0eb05d60c2c98eb568bce69f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff8232af89fc85c44dee1cd0525f655"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;target)</td></tr>
<tr class="separator:a7ff8232af89fc85c44dee1cd0525f655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316a84fb241b414c913730a952265b72"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a316a84fb241b414c913730a952265b72">occupied_tile_fraction</a> (<a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2">creature_size</a> target_size)</td></tr>
<tr class="separator:a316a84fb241b414c913730a952265b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3ad21aa630e4e68c1d2834fe0467c018"><td class="memItemLeft" align="right" valign="top">constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ranged_8h.html#a3ad21aa630e4e68c1d2834fe0467c018">MIN_RECOIL_IMPROVEMENT</a> = 0.01</td></tr>
<tr class="separator:a3ad21aa630e4e68c1d2834fe0467c018"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a93ec699e97cddce95159e22885825111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ec699e97cddce95159e22885825111">&#9670;&nbsp;</a></span>CATA_SRC_RANGED_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CATA_SRC_RANGED_H</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8h_source.html#l00003">3</a> of file <a class="el" href="ranged_8h_source.html">ranged.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a969d7fb0eb05d60c2c98eb568bce69f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969d7fb0eb05d60c2c98eb568bce69f2">&#9670;&nbsp;</a></span>calc_steadiness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calc_steadiness </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weapon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>predicted_recoil</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l01156">1156</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> min_recoil = <a class="code" href="ranged_8cpp.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a>( you, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> effective_recoil = you.<a class="code" href="classCharacter.html#a2c1e0d2a430258c132cbdff827fc8e89">most_accurate_aiming_method_limit</a>( weapon );</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> min_dispersion = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( min_recoil, effective_recoil );</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> steadiness_range = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> - min_dispersion;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// This is a relative measure of how steady the player&#39;s aim is,</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// 0 is the best the player can do.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> steady_score = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, predicted_recoil - min_dispersion );</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// Fairly arbitrary cap on steadiness...</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">return</span> 1.0 - ( steady_score / steadiness_range );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2c1e0d2a430258c132cbdff827fc8e89"><div class="ttname"><a href="classCharacter.html#a2c1e0d2a430258c132cbdff827fc8e89">Character::most_accurate_aiming_method_limit</a></div><div class="ttdeci">int most_accurate_aiming_method_limit(const item &amp;gun) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01017">character.cpp:1017</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a7ff8232af89fc85c44dee1cd0525f655"><div class="ttname"><a href="ranged_8cpp.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a></div><div class="ttdeci">double calculate_aim_cap(const Character &amp;you, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01140">ranged.cpp:1140</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l01140">calculate_aim_cap()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="character_8cpp_source.html#l01017">Character::most_accurate_aiming_method_limit()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l01692">calculate_ranged_chances()</a>, and <a class="el" href="avatar_8cpp_source.html#l01248">avatar::rebuild_aim_cache()</a>.</p>

</div>
</div>
<a id="a7ff8232af89fc85c44dee1cd0525f655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff8232af89fc85c44dee1cd0525f655">&#9670;&nbsp;</a></span>calculate_aim_cap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calculate_aim_cap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l01140">1140</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordtype">double</span> min_recoil = 0.0;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> *victim = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( target, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// No p.sees_with_specials() here because special senses are not precise enough</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// to give creature&#39;s exact size &amp; position, only which tile it occupies</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span>( victim == <span class="keyword">nullptr</span> || ( !you.<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( *victim ) &amp;&amp; !you.<a class="code" href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">sees_with_infrared</a>( *victim ) ) ) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> range = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), target );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">// Get angle of triangle that spans the target square.</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = 2 * <a class="code" href="line_8cpp.html#aaa43dcdfe5b511b116fafb32c5cff349">atan2</a>( 0.5, range );</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="comment">// Convert from radians to arcmin.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        min_recoil = 60 * 180 * <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> / <a class="code" href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">return</span> min_recoil;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a906192bd3a5f29a61ee12695e18d2eb5"><div class="ttname"><a href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_avatar=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11397">character.cpp:11397</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9976ba9d9bccdaff264bd834628b97ec"><div class="ttname"><a href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">Character::sees_with_infrared</a></div><div class="ttdeci">bool sees_with_infrared(const Creature &amp;critter) const</div><div class="ttdoc">Check whether the this player can see the other creature with infrared.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10481">character.cpp:10481</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="aline_8cpp_html_aaa43dcdfe5b511b116fafb32c5cff349"><div class="ttname"><a href="line_8cpp.html#aaa43dcdfe5b511b116fafb32c5cff349">atan2</a></div><div class="ttdeci">units::angle atan2(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00288">line.cpp:288</a></div></div>
<div class="ttc" id="amath__defines_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00023">math_defines.h:23</a></div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00075">units_fwd.h:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="line_8cpp_source.html#l00288">atan2()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="math__defines_8h_source.html#l00023">M_PI</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, and <a class="el" href="character_8cpp_source.html#l10481">Character::sees_with_infrared()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">target_ui::action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">target_ui::action_aim_and_shoot()</a>, and <a class="el" href="ranged_8cpp_source.html#l01156">calc_steadiness()</a>.</p>

</div>
</div>
<a id="a18e93476c9d626924c31cf14193305b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e93476c9d626924c31cf14193305b3">&#9670;&nbsp;</a></span>gunmode_checks_common()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gunmode_checks_common </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>messages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgun__mode.html">gun_mode</a> &amp;&#160;</td>
          <td class="paramname"><em>gmode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common checks for gunmode (when firing a weapon / manually firing turret) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">messages</td><td>Used to store messages describing failed checks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all conditions are true </dd></dl>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03975">3975</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;{</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="ranged_8cpp.html#a0fb9c66af29eade7d376e89264128bcd">trait_BRAWLER</a> ) ) {</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pfft.  You are a brawler; using this %s is beneath you.&quot;</span> ),</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;                                           gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;    }</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160; </div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="comment">// Check that passed gun mode is valid and we are able to use it</span></div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    <span class="keywordflow">if</span>( !( gmode &amp;&amp; you.<a class="code" href="classCharacter.html#a4eddeb86babf626e7869882079b40651">can_use</a>( *gmode ) ) ) {</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t currently fire your %s.&quot;</span> ),</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                                           gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    }</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160; </div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    <span class="keywordflow">if</span>( vp &amp;&amp; vp-&gt;vehicle().player_in_control( you ) &amp;&amp; ( gmode-&gt;<a class="code" href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">is_two_handed</a>( you ) ||</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;            gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a> ) ) ) {</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;        messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t fire your %s while driving.&quot;</span> ),</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;                                           gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;    }</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160; </div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a> ) &amp;&amp; ( !you.<a class="code" href="classCharacter.html#a3abc3f2f3d7ad4ec9967ec6ccbcc1c97">has_two_arms_lifting</a>() ||</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;            you.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a7198b972ee7b7e58fde85d42d517297f">flag_RESTRICT_HANDS</a> ) ) ) {</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;        messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need two free hands to fire your %s.&quot;</span> ),</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;                                           gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    }</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160; </div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a3abc3f2f3d7ad4ec9967ec6ccbcc1c97"><div class="ttname"><a href="classCharacter.html#a3abc3f2f3d7ad4ec9967ec6ccbcc1c97">Character::has_two_arms_lifting</a></div><div class="ttdeci">bool has_two_arms_lifting() const</div><div class="ttdoc">Returns true if the character has two functioning arms.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02083">character.cpp:2083</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4eddeb86babf626e7869882079b40651"><div class="ttname"><a href="classCharacter.html#a4eddeb86babf626e7869882079b40651">Character::can_use</a></div><div class="ttdeci">bool can_use(const item &amp;it, const item &amp;context=item()) const</div><div class="ttdoc">Checks if character stats and skills meet minimum requirements for the item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03271">character.cpp:3271</a></div></div>
<div class="ttc" id="aclassCharacter_html_addcf2c54cf8c3920f66328e2441830fb"><div class="ttname"><a href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00548">character_attire.cpp:548</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_af373f646c1ee172941490dc7cc04bbcd"><div class="ttname"><a href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">item::is_two_handed</a></div><div class="ttdeci">bool is_two_handed(const Character &amp;guy) const</div><div class="ttdoc">Whether the character needs both hands to wield this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09137">item.cpp:9137</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a7198b972ee7b7e58fde85d42d517297f"><div class="ttname"><a href="flag_8cpp.html#a7198b972ee7b7e58fde85d42d517297f">flag_RESTRICT_HANDS</a></div><div class="ttdeci">const flag_id flag_RESTRICT_HANDS(&quot;RESTRICT_HANDS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae4145a31d8da9f94a59bb3d6fb13436f"><div class="ttname"><a href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a></div><div class="ttdeci">const flag_id flag_FIRE_TWOHAND(&quot;FIRE_TWOHAND&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_a0fb9c66af29eade7d376e89264128bcd"><div class="ttname"><a href="ranged_8cpp.html#a0fb9c66af29eade7d376e89264128bcd">trait_BRAWLER</a></div><div class="ttdeci">static const trait_id trait_BRAWLER(&quot;BRAWLER&quot;)</div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l03271">Character::can_use()</a>, <a class="el" href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a>, <a class="el" href="flag_8cpp.html#a7198b972ee7b7e58fde85d42d517297f">flag_RESTRICT_HANDS</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l02083">Character::has_two_arms_lifting()</a>, <a class="el" href="item_8cpp_source.html#l09137">item::is_two_handed()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="ranged_8cpp.html#a0fb9c66af29eade7d376e89264128bcd">trait_BRAWLER</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar__action_8cpp_source.html#l00753">avatar_action::can_fire_weapon()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">target_ui::update_status()</a>.</p>

</div>
</div>
<a id="a207024a5d17769a16bfc8a7a434d72cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a207024a5d17769a16bfc8a7a434d72cd">&#9670;&nbsp;</a></span>gunmode_checks_weapon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gunmode_checks_weapon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>messages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgun__mode.html">gun_mode</a> &amp;&#160;</td>
          <td class="paramname"><em>gmode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Various checks for gunmode when firing a weapon. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">messages</td><td>Used to store messages describing failed checks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all conditions are true </dd></dl>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l04010">4010</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;{</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keywordflow">if</span>( !gmode-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;you ) &amp;&amp;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;        !gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a> ) ) {</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;        <span class="keywordflow">if</span>( !gmode-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) {</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is empty!&quot;</span> ), gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s needs %i charges to fire!&quot;</span> ),</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                                               gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), gmode-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() ) );</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;        }</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    }</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160; </div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>() &gt; 0_kJ ) {</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::energy</a> energy_drain = gmode-&gt;<a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>();</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;        <span class="keywordtype">bool</span> is_mech_weapon = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;            <a class="code" href="classmonster.html">monster</a> *mons = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            <span class="keywordflow">if</span>( !mons-&gt;<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#abe1e1f1cacb0be37406c667e226003c4">mech_weapon</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                is_mech_weapon = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;            }</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        }</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160; </div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;        <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">energy_remaining</a>( &amp;you ) &lt; energy_drain ) {</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;            result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;            <span class="keywordflow">if</span>( is_mech_weapon ) {</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;                messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your mech has an empty battery, its %s will not fire.&quot;</span> ),</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;                                                   gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;                messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need at least %2$d kJ of bionic power to fire the %1$s!&quot;</span> ),</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;                                        gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( energy_drain ) ) );</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;                messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a UPS with at least %2$d kJ to fire the %1$s!&quot;</span> ),</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;                                        gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( energy_drain ) ) );</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;            }</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;        }</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    }</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160; </div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <span class="keywordflow">if</span>( gmode-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6e2d5c45635a3d1a0b2afd71e4748d57">flag_MOUNTED_GUN</a> ) ) {</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> v_mountable = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>( m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ).<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <span class="stringliteral">&quot;MOUNTABLE&quot;</span>,</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                                 <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        <span class="keywordtype">bool</span> t_mountable = m.<a class="code" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6360286fa7a45a7d705397a23a639f54">ter_furn_flag::TFLAG_MOUNTABLE</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        <span class="keywordflow">if</span>( !t_mountable &amp;&amp; !v_mountable ) {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;            messages.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;                                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You must stand near acceptable terrain or furniture to fire the %s.  A table, a mound of dirt, a broken window, etc.&quot;</span> ),</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                                    gmode-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;            result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;        }</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    }</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160; </div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01732">character.cpp:1732</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac3d46549b7cdaac1f98991167ad5f1b3"><div class="ttname"><a href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">Character::mounted_creature</a></div><div class="ttdeci">shared_ptr_fast&lt; monster &gt; mounted_creature</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02800">character.h:2800</a></div></div>
<div class="ttc" id="aclassitem_html_a1ce97bab127dbbcd371f4e83bb441c38"><div class="ttname"><a href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">item::energy_remaining</a></div><div class="ttdeci">units::energy energy_remaining(const Character *carrier=nullptr) const</div><div class="ttdoc">Energy available from battery/UPS/bionics.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10750">item.cpp:10750</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a6d3164628041c6ccdce14aedd711b640"><div class="ttname"><a href="classitem.html#a6d3164628041c6ccdce14aedd711b640">item::get_gun_energy_drain</a></div><div class="ttdeci">units::energy get_gun_energy_drain() const</div><div class="ttdoc">Get gun energy drain.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14586">item.cpp:14586</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03122">map.cpp:3122</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00550">monster.h:550</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_a4c78451e42e97753079ecd2a54c7143d"><div class="ttname"><a href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">optional_vpart_position::part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02698">vehicle.cpp:2698</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3e2d3cbf6b78ce65033d1f9cbf1f59bf"><div class="ttname"><a href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a></div><div class="ttdeci">const flag_id flag_USE_UPS(&quot;USE_UPS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6e2d5c45635a3d1a0b2afd71e4748d57"><div class="ttname"><a href="flag_8cpp.html#a6e2d5c45635a3d1a0b2afd71e4748d57">flag_MOUNTED_GUN</a></div><div class="ttdeci">const flag_id flag_MOUNTED_GUN(&quot;MOUNTED_GUN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7d8a64454549e0bab5aa7d7a7091f9d1"><div class="ttname"><a href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a></div><div class="ttdeci">const flag_id flag_USES_BIONIC_POWER(&quot;USES_BIONIC_POWER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa4483d80251dc96dd0c8313d8a6366f9"><div class="ttname"><a href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a></div><div class="ttdeci">const flag_id flag_RELOAD_AND_SHOOT(&quot;RELOAD_AND_SHOOT&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a6360286fa7a45a7d705397a23a639f54"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6360286fa7a45a7d705397a23a639f54">ter_furn_flag::TFLAG_MOUNTABLE</a></div><div class="ttdeci">@ TFLAG_MOUNTABLE</div></div>
<div class="ttc" id="anamespaceunits_html_a7f3948de70e78d68af74fb3d119cf176"><div class="ttname"><a href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a></div><div class="ttdeci">constexpr value_type to_kilojoule(const quantity&lt; value_type, energy_in_millijoule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00578">units.h:578</a></div></div>
<div class="ttc" id="astructmtype_html_abe1e1f1cacb0be37406c667e226003c4"><div class="ttname"><a href="structmtype.html#abe1e1f1cacb0be37406c667e226003c4">mtype::mech_weapon</a></div><div class="ttdeci">itype_id mech_weapon</div><div class="ttdoc">If this monster is a rideable mech with built-in weapons, this is the weapons id.</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00327">mtype.h:327</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l10750">item::energy_remaining()</a>, <a class="el" href="flag_8cpp.html#a6e2d5c45635a3d1a0b2afd71e4748d57">flag_MOUNTED_GUN</a>, <a class="el" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a>, <a class="el" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a>, <a class="el" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a>, <a class="el" href="item_8cpp_source.html#l14586">item::get_gun_energy_drain()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03122">map::has_flag_ter_or_furn()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="mtype_8h_source.html#l00327">mtype::mech_weapon</a>, <a class="el" href="character_8h_source.html#l02800">Character::mounted_creature</a>, <a class="el" href="vehicle_8cpp_source.html#l02698">optional_vpart_position::part_with_feature()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6360286fa7a45a7d705397a23a639f54">TFLAG_MOUNTABLE</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="units_8h_source.html#l00578">units::to_kilojoule()</a>, <a class="el" href="monster_8h_source.html#l00550">monster::type</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar__action_8cpp_source.html#l00753">avatar_action::can_fire_weapon()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">target_ui::update_status()</a>.</p>

</div>
</div>
<a id="a316a84fb241b414c913730a952265b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a316a84fb241b414c913730a952265b72">&#9670;&nbsp;</a></span>occupied_tile_fraction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double occupied_tile_fraction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2">creature_size</a>&#160;</td>
          <td class="paramname"><em>target_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00526">526</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">switch</span>( target_size ) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a>:</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">return</span> 0.1;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a>:</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">return</span> 0.25;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">creature_size::medium</a>:</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">return</span> 0.5;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a>:</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span> 0.75;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a>:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aac651433a999fb14f71f6754f0199781">creature_size::num_sizes</a>:</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Invalid Creature size class.&quot;</span> );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> 0.5;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">creature_size::medium</a></div><div class="ttdeci">@ medium</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aac651433a999fb14f71f6754f0199781"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aac651433a999fb14f71f6754f0199781">creature_size::num_sizes</a></div><div class="ttdeci">@ num_sizes</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a></div><div class="ttdeci">@ large</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a></div><div class="ttdeci">@ huge</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">huge</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aac651433a999fb14f71f6754f0199781">num_sizes</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a>, and <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">tiny</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l02908">map::drop_items()</a>, and <a class="el" href="ranged_8cpp_source.html#l00547">Creature::ranged_target_size()</a>.</p>

</div>
</div>
<a id="ae8b9efd8abced2440e1b53139f2696d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b9efd8abced2440e1b53139f2696d7">&#9670;&nbsp;</a></span>practice_archery_proficiency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void practice_archery_proficiency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>relevant</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l01455">1455</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;{</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="comment">// Do nothing, we are not doing archery</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">if</span>( relevant.<a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>() != <a class="code" href="ranged_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a> ) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// We are already a master, practice has no effect</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="ranged_8cpp.html#ab1f819e79b8cfdcbf08cca629e3073ba">proficiency_prof_bow_master</a> ) ) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">// Only train archery in multiples of 100 moves (or 1 turn) for performance, focus, and simplifying calculations</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    p.<a class="code" href="classCreature.html#afc6e990c7faf2e750a941b8a92f892e2">archery_aim_counter</a>++;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#afc6e990c7faf2e750a941b8a92f892e2">archery_aim_counter</a> &gt; 100 ) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="comment">// Reset our counter</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        p.<a class="code" href="classCreature.html#afc6e990c7faf2e750a941b8a92f892e2">archery_aim_counter</a> = 0;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="comment">// Intended to train prof_bow_basic from 0 to 100% in ~200 arrows in 5 hours from max aim, or 90s/arrow.</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="comment">// Additionally, a shortbow is used as the basis for number of moves per max aim shot at ~250 moves.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="comment">// 90s/arrow / 2.5turns/arrow = 36s/turn. It is important to note, this is 200 arrows pre-focus.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <a class="code" href="classtime__duration.html">time_duration</a> prof_exp = 36_seconds;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="comment">// We don&#39;t know how to handle a bow yet</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span>( !p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="ranged_8cpp.html#af94296ce179c8a7441548e43d0b8235f">proficiency_prof_bow_basic</a> ) ) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            p.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="ranged_8cpp.html#af94296ce179c8a7441548e43d0b8235f">proficiency_prof_bow_basic</a>, prof_exp );</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="comment">// We know how to handle a bow, but we are not an expert yet</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="ranged_8cpp.html#a5a31fd4e066d23b9f26579e931b87113">proficiency_prof_bow_expert</a> ) ) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            p.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="ranged_8cpp.html#a5a31fd4e066d23b9f26579e931b87113">proficiency_prof_bow_expert</a>, prof_exp );</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="comment">// We are an expert, lets practice to become a master</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            p.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="ranged_8cpp.html#ab1f819e79b8cfdcbf08cca629e3073ba">proficiency_prof_bow_master</a>, prof_exp );</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a72472dd1bc3a1fba8b053682ae5a2244"><div class="ttname"><a href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">Character::has_proficiency</a></div><div class="ttdeci">bool has_proficiency(const proficiency_id &amp;prof) const</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00019">character_proficiency.cpp:19</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa376cb5765a50c43ee63c4a3b151832e"><div class="ttname"><a href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">Character::practice_proficiency</a></div><div class="ttdeci">bool practice_proficiency(const proficiency_id &amp;prof, const time_duration &amp;amount, const std::optional&lt; time_duration &gt; &amp;max=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00071">character_proficiency.cpp:71</a></div></div>
<div class="ttc" id="aclassCreature_html_afc6e990c7faf2e750a941b8a92f892e2"><div class="ttname"><a href="classCreature.html#afc6e990c7faf2e750a941b8a92f892e2">Creature::archery_aim_counter</a></div><div class="ttdeci">int archery_aim_counter</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01255">creature.h:1255</a></div></div>
<div class="ttc" id="aclassitem_html_a3d8542661f2e2a82e8cb3792584912f3"><div class="ttname"><a href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">item::gun_skill</a></div><div class="ttdeci">skill_id gun_skill() const</div><div class="ttdoc">The skill used to operate the gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10391">item.cpp:10391</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a2f8b66e6fc62f3d92b208655f5525bba"><div class="ttname"><a href="ranged_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a></div><div class="ttdeci">static const skill_id skill_archery(&quot;archery&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_a5a31fd4e066d23b9f26579e931b87113"><div class="ttname"><a href="ranged_8cpp.html#a5a31fd4e066d23b9f26579e931b87113">proficiency_prof_bow_expert</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_bow_expert(&quot;prof_bow_expert&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_ab1f819e79b8cfdcbf08cca629e3073ba"><div class="ttname"><a href="ranged_8cpp.html#ab1f819e79b8cfdcbf08cca629e3073ba">proficiency_prof_bow_master</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_bow_master(&quot;prof_bow_master&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_af94296ce179c8a7441548e43d0b8235f"><div class="ttname"><a href="ranged_8cpp.html#af94296ce179c8a7441548e43d0b8235f">proficiency_prof_bow_basic</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_bow_basic(&quot;prof_bow_basic&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8h_source.html#l01255">Creature::archery_aim_counter</a>, <a class="el" href="item_8cpp_source.html#l10391">item::gun_skill()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00019">Character::has_proficiency()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00071">Character::practice_proficiency()</a>, <a class="el" href="ranged_8cpp.html#af94296ce179c8a7441548e43d0b8235f">proficiency_prof_bow_basic</a>, <a class="el" href="ranged_8cpp.html#a5a31fd4e066d23b9f26579e931b87113">proficiency_prof_bow_expert</a>, <a class="el" href="ranged_8cpp.html#ab1f819e79b8cfdcbf08cca629e3073ba">proficiency_prof_bow_master</a>, and <a class="el" href="ranged_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l01516">do_aim()</a>.</p>

</div>
</div>
<a id="a6b4c3a2a360b378de261413fbb7d84f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b4c3a2a360b378de261413fbb7d84f0">&#9670;&nbsp;</a></span>range_with_even_chance_of_good_hit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int range_with_even_chance_of_good_hit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dispersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00577">577</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordtype">int</span> even_chance_range = 0;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">while</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( even_chance_range ) &lt;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;           <a class="code" href="classCreature.html#a73b9cb6320e4447addaec375887e7861">Creature::dispersion_for_even_chance_of_good_hit</a>.<a class="code" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() &amp;&amp;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;           dispersion &lt; <a class="code" href="classCreature.html#a73b9cb6320e4447addaec375887e7861">Creature::dispersion_for_even_chance_of_good_hit</a>[ even_chance_range ] ) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        even_chance_range++;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> even_chance_range;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a73b9cb6320e4447addaec375887e7861"><div class="ttname"><a href="classCreature.html#a73b9cb6320e4447addaec375887e7861">Creature::dispersion_for_even_chance_of_good_hit</a></div><div class="ttdeci">static std::vector&lt; int &gt; dispersion_for_even_chance_of_good_hit</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01271">creature.h:1271</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00066">omdata.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8h_source.html#l01271">Creature::dispersion_for_even_chance_of_good_hit</a>, and <a class="el" href="omdata_8h_source.html#l00066">om_direction::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="npcmove_8cpp_source.html#l02687">npc::confident_gun_mode_range()</a>, and <a class="el" href="item_8cpp_source.html#l03102">item::gun_info()</a>.</p>

</div>
</div>
<a id="aa55aace1fedc5b64c6d3d0418e251c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa55aace1fedc5b64c6d3d0418e251c38">&#9670;&nbsp;</a></span>throw_cost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int throw_cost </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>to_throw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Throw increases throwing speed Dexterity increases throwing speed 
<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l01110">1110</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// Very similar to player::attack_speed</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// TODO: Extract into a function?</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// Differences:</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// Dex is more (2x) important for throwing speed</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// At 10 skill, the cost is down to 0.75%, not 0.66%</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> base_move_cost = to_throw.<a class="code" href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c">attack_time</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) / 2;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> throw_skill = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="game__constants_8h.html#ae9c0ec5b4724c15132efddb8862ca652">MAX_SKILL</a> ),</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                                        <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_skill_level( <a class="code" href="ranged_8cpp.html#aca8ae2b9cbc86602a56a3885b72a4ed1">skill_throw</a> ) );<span class="comment"></span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">    ///\EFFECT_THROW increases throwing speed</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> skill_cost = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ( base_move_cost * ( 20 - throw_skill ) / 20 ) );<span class="comment"></span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">    ///\EFFECT_DEX increases throwing speed</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dexbonus = <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_dex();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> stamina_ratio = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_stamina() ) / <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_stamina_max();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> stamina_penalty = 1.0 + <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( 0.25f - stamina_ratio ) * 4.0f, 0.0f );</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = base_move_cost;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> *= <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_modifier( <a class="code" href="ranged_8cpp.html#a8d4ed92ee82965b00b2c043ef36261d2">character_modifier_melee_thrown_move_lift_mod</a> );</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> *= <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_modifier( <a class="code" href="ranged_8cpp.html#a591e788884fe3dc8032be8a9fc2ceb3c">character_modifier_melee_thrown_move_balance_mod</a> );</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// Stamina penalty only affects base/2 and encumbrance parts of the cost</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> *= stamina_penalty;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> += skill_cost;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> -= dexbonus;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.enchantment_cache-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a3d3e5fcb0b68fc939d4e32a894e620a8">enchant_vals::mod::ATTACK_SPEED</a>, move_cost );</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 25, move_cost );</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a5ac32d5d8193f5fad10893881f53cb1c"><div class="ttname"><a href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c">item::attack_time</a></div><div class="ttdeci">int attack_time(const Character &amp;you) const</div><div class="ttdoc">Base number of moves (Creature::moves) that a single melee attack with this items takes.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07444">item.cpp:7444</a></div></div>
<div class="ttc" id="agame__constants_8h_html_ae9c0ec5b4724c15132efddb8862ca652"><div class="ttname"><a href="game__constants_8h.html#ae9c0ec5b4724c15132efddb8862ca652">MAX_SKILL</a></div><div class="ttdeci">constexpr int MAX_SKILL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00120">game_constants.h:120</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="anamespaceactivity__handlers_html_a88e87301f5548ff4bc7076a59fcde638"><div class="ttname"><a href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">activity_handlers::move_cost</a></div><div class="ttdeci">int move_cost(const item &amp;it, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00538">activity_item_handling.cpp:538</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a3d3e5fcb0b68fc939d4e32a894e620a8"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a3d3e5fcb0b68fc939d4e32a894e620a8">enchant_vals::mod::ATTACK_SPEED</a></div><div class="ttdeci">@ ATTACK_SPEED</div></div>
<div class="ttc" id="aranged_8cpp_html_a591e788884fe3dc8032be8a9fc2ceb3c"><div class="ttname"><a href="ranged_8cpp.html#a591e788884fe3dc8032be8a9fc2ceb3c">character_modifier_melee_thrown_move_balance_mod</a></div><div class="ttdeci">static const character_modifier_id character_modifier_melee_thrown_move_balance_mod(&quot;melee_thrown_move_balance_mod&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_a8d4ed92ee82965b00b2c043ef36261d2"><div class="ttname"><a href="ranged_8cpp.html#a8d4ed92ee82965b00b2c043ef36261d2">character_modifier_melee_thrown_move_lift_mod</a></div><div class="ttdeci">static const character_modifier_id character_modifier_melee_thrown_move_lift_mod(&quot;melee_thrown_move_lift_mod&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_aca8ae2b9cbc86602a56a3885b72a4ed1"><div class="ttname"><a href="ranged_8cpp.html#aca8ae2b9cbc86602a56a3885b72a4ed1">skill_throw</a></div><div class="ttdeci">static const skill_id skill_throw(&quot;throw&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a3d3e5fcb0b68fc939d4e32a894e620a8">enchant_vals::ATTACK_SPEED</a>, <a class="el" href="item_8cpp_source.html#l07444">item::attack_time()</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="ranged_8cpp.html#a591e788884fe3dc8032be8a9fc2ceb3c">character_modifier_melee_thrown_move_balance_mod</a>, <a class="el" href="ranged_8cpp.html#a8d4ed92ee82965b00b2c043ef36261d2">character_modifier_melee_thrown_move_lift_mod</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="game__constants_8h_source.html#l00120">MAX_SKILL</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, and <a class="el" href="ranged_8cpp.html#aca8ae2b9cbc86602a56a3885b72a4ed1">skill_throw</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l01692">calculate_ranged_chances()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00798">npc_attack_throw::evaluate_tripoint()</a>, and <a class="el" href="ranged_8cpp_source.html#l01308">Character::throw_item()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3ad21aa630e4e68c1d2834fe0467c018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad21aa630e4e68c1d2834fe0467c018">&#9670;&nbsp;</a></span>MIN_RECOIL_IMPROVEMENT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double MIN_RECOIL_IMPROVEMENT = 0.01</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8h_source.html#l00024">24</a> of file <a class="el" href="ranged_8h_source.html">ranged.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l01087">Character::aim_per_move()</a>, <a class="el" href="ranged_8cpp_source.html#l00588">Character::gun_engagement_moves()</a>, and <a class="el" href="ranged_8cpp_source.html#l01659">predict_recoil()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:34 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
