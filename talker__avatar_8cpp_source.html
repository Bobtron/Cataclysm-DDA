<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/talker_avatar.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">talker_avatar.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="talker__avatar_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtype_8h.html">mtype.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="npc_8h.html">npc.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="npctrade_8h.html">npctrade.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="skill_8h.html">skill.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="talker_8h.html">talker.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="talker__avatar_8h.html">talker_avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="talker__avatar_8cpp.html#a79654cfc6f07462199ec3f5da9e49c83">   19</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="talker__avatar_8cpp.html#a79654cfc6f07462199ec3f5da9e49c83">effect_pacified</a>( <span class="stringliteral">&quot;pacified&quot;</span> );</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="talker__avatar_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">   20</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="talker__avatar_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>( <span class="stringliteral">&quot;pet&quot;</span> );</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="talker__avatar_8cpp.html#a23ab798a014e7d7135089fa750c2b563">   22</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="talker__avatar_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a>( <span class="stringliteral">&quot;foodperson_mask&quot;</span> );</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="talker__avatar_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">   23</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="talker__avatar_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a>( <span class="stringliteral">&quot;foodperson_mask_on&quot;</span> );</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="talker__avatar_8cpp.html#a1eb0d980d9e60655982ce0b931f4fb57">   25</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="talker__avatar_8cpp.html#a1eb0d980d9e60655982ce0b931f4fb57">trait_PROF_FOODP</a>( <span class="stringliteral">&quot;PROF_FOODP&quot;</span> );</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="classtalker__avatar.html#ad07e9e6a4ba074880c0cc6db4199808f">   27</a></span>&#160;<a class="code" href="classtalker__avatar.html#ad07e9e6a4ba074880c0cc6db4199808f">talker_avatar::talker_avatar</a>( <a class="code" href="classavatar.html">avatar</a> *new_me )</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a> = new_me;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="classtalker__character__const.html#a5244cc83fa8ef23fb0a48136b0f115cd">me_chr_const</a> = new_me;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classtalker__avatar.html#a1dccbc78311077cdf5ce5deb77f734c3">   33</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="classtalker__avatar.html#a1dccbc78311077cdf5ce5deb77f734c3">talker_avatar::get_topics</a>( <span class="keywordtype">bool</span> )</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    std::vector&lt;std::string&gt; add_topics;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtalker__character__const.html#a33f32448168af7d680951600ed35028b">has_trait</a>( <a class="code" href="talker__avatar_8cpp.html#a1eb0d980d9e60655982ce0b931f4fb57">trait_PROF_FOODP</a> ) &amp;&amp; !( <a class="code" href="classtalker__character__const.html#a82f122856c409709d1178bdc3ebba6e9">is_wearing</a>( <a class="code" href="talker__avatar_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a> ) ||</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                            <a class="code" href="classtalker__character__const.html#a82f122856c409709d1178bdc3ebba6e9">is_wearing</a>( <a class="code" href="talker__avatar_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a> ) ) ) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        add_topics.emplace_back( <span class="stringliteral">&quot;TALK_NOFACE&quot;</span> );</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">return</span> add_topics;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classtalker__avatar.html#ae375ee80a4bd6209f4ba42fabf48b914">   43</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classtalker__avatar.html#ae375ee80a4bd6209f4ba42fabf48b914">talker_avatar::parse_mod</a>( <span class="keyword">const</span> std::string &amp;attribute, <span class="keyword">const</span> <span class="keywordtype">int</span> factor )<span class="keyword"> const</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">int</span> modifier = 0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span>( attribute == <span class="stringliteral">&quot;U_INTIMIDATE&quot;</span> ) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        modifier = <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCharacter.html#a150ab03ef8a507dcc231d646b1b9e7c5">intimidation</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    modifier *= factor;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">return</span> modifier;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classtalker__avatar.html#a1f9b5f3740740aa523b278e9c3b34006">   53</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classtalker__avatar.html#a1f9b5f3740740aa523b278e9c3b34006">talker_avatar::trial_chance_mod</a>( <span class="keyword">const</span> std::string &amp;trial_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> chance = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">const</span> <a class="code" href="structsocial__modifiers.html">social_modifiers</a> &amp;me_mods = <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCharacter.html#acc20096d364fa501dec336f27bc716b0">get_mutation_bionic_social_mods</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span>( trial_type == <span class="stringliteral">&quot;lie&quot;</span> ) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        chance += <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCharacter.html#af788d696c6c76817c784db46350b2d44">lie_skill</a>() + me_mods.<a class="code" href="structsocial__modifiers.html#a9812d8adb1701480a878506e1dbe9932">lie</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trial_type == <span class="stringliteral">&quot;persuade&quot;</span> ) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        chance += <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCharacter.html#a541159ddc3ed5dcf27e0477a02d94ffd">persuade_skill</a>() + me_mods.<a class="code" href="structsocial__modifiers.html#a1133fc2155fb62215db59a795583191a">persuade</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trial_type == <span class="stringliteral">&quot;intimidate&quot;</span> ) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        chance += <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCharacter.html#a150ab03ef8a507dcc231d646b1b9e7c5">intimidation</a>() + me_mods.<a class="code" href="structsocial__modifiers.html#a840fb4d8f6996ba120f889bd192dfd31">intimidate</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> chance;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classtalker__avatar.html#ac6198888d6953afc1a134d09f77be847">   67</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classtalker__avatar.html#ac6198888d6953afc1a134d09f77be847">talker_avatar::buy_monster</a>( <a class="code" href="classtalker.html">talker</a> &amp;seller, <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> &amp;<a class="code" href="structmtype.html">mtype</a>, <span class="keywordtype">int</span> cost,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                 <span class="keywordtype">int</span> count, <span class="keywordtype">bool</span> pacified, <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classnpc.html">npc</a> *seller_guy = seller.<a class="code" href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">get_npc</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span>( !seller_guy ) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can&#39;t sell you any %s&quot;</span> ), seller.<a class="code" href="classtalker.html#aeacb7e37bda8320485caff19db849d59">disp_name</a>(), <a class="code" href="structmtype.html">mtype</a>.obj().<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>( 2 ) );</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span>( cost &gt; 0 &amp;&amp; !<a class="code" href="namespacenpc__trading.html#a9a7dbd65b9ae311c79c92b57c1b134b4">npc_trading::pay_npc</a>( *seller_guy, cost ) ) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t afford it!&quot;</span> ) );</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; count; i++ ) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code" href="structmtype.html">mtype</a>, <a class="code" href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">me_chr</a>-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 3 );</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span>( !mon_ptr ) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a4a0a2c15f95df6acf6e55d53a83fb929">debugmode::DF_TALKER</a>, <span class="stringliteral">&quot;Cannot place u_buy_monster, no valid placement locations.&quot;</span> );</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;tmp = *mon_ptr;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// Our monster is always a pet.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        tmp.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = -1;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        tmp.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="talker__avatar_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>( pacified ) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            tmp.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="talker__avatar_8cpp.html#a79654cfc6f07462199ec3f5da9e49c83">effect_pacified</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>.empty() ) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            tmp.<a class="code" href="classmonster.html#a5e50554c4210ec2a15d9ed44e61bcf3a">unique_name</a> = <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>.translated();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>.empty() ) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s gives you %2$d %3$s.&quot;</span> ), seller_guy-&gt;<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(),</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;               count, <a class="code" href="structmtype.html">mtype</a>.obj().<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>( count ) );</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s gives you %2$s.&quot;</span> ), seller_guy-&gt;<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="aclassCharacter_html_a150ab03ef8a507dcc231d646b1b9e7c5"><div class="ttname"><a href="classCharacter.html#a150ab03ef8a507dcc231d646b1b9e7c5">Character::intimidation</a></div><div class="ttdeci">int intimidation() const</div><div class="ttdoc">Returns a value used when attempting to intimidate NPC's.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11539">character.cpp:11539</a></div></div>
<div class="ttc" id="aclassCharacter_html_a541159ddc3ed5dcf27e0477a02d94ffd"><div class="ttname"><a href="classCharacter.html#a541159ddc3ed5dcf27e0477a02d94ffd">Character::persuade_skill</a></div><div class="ttdeci">int persuade_skill() const</div><div class="ttdoc">Returns a value used when attempting to convince NPC's of something true.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11519">character.cpp:11519</a></div></div>
<div class="ttc" id="aclassCharacter_html_acc20096d364fa501dec336f27bc716b0"><div class="ttname"><a href="classCharacter.html#acc20096d364fa501dec336f27bc716b0">Character::get_mutation_bionic_social_mods</a></div><div class="ttdeci">social_modifiers get_mutation_bionic_social_mods() const</div><div class="ttdoc">Goes over all mutations/bionics, returning the sum of the social modifiers.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06273">character.cpp:6273</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_af788d696c6c76817c784db46350b2d44"><div class="ttname"><a href="classCharacter.html#af788d696c6c76817c784db46350b2d44">Character::lie_skill</a></div><div class="ttdeci">int lie_skill() const</div><div class="ttdoc">Returns a value used when attempting to convince NPC's of something false.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11529">character.cpp:11529</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00539">monster.h:539</a></div></div>
<div class="ttc" id="aclassmonster_html_a5e50554c4210ec2a15d9ed44e61bcf3a"><div class="ttname"><a href="classmonster.html#a5e50554c4210ec2a15d9ed44e61bcf3a">monster::unique_name</a></div><div class="ttdeci">std::string unique_name</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00564">monster.h:564</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; effect_type &gt;</a></div></div>
<div class="ttc" id="aclasstalker__avatar_html_a1dccbc78311077cdf5ce5deb77f734c3"><div class="ttname"><a href="classtalker__avatar.html#a1dccbc78311077cdf5ce5deb77f734c3">talker_avatar::get_topics</a></div><div class="ttdeci">std::vector&lt; std::string &gt; get_topics(bool) override</div><div class="ttdef"><b>Definition:</b> <a href="talker__avatar_8cpp_source.html#l00033">talker_avatar.cpp:33</a></div></div>
<div class="ttc" id="aclasstalker__avatar_html_a1f9b5f3740740aa523b278e9c3b34006"><div class="ttname"><a href="classtalker__avatar.html#a1f9b5f3740740aa523b278e9c3b34006">talker_avatar::trial_chance_mod</a></div><div class="ttdeci">int trial_chance_mod(const std::string &amp;trial_type) const override</div><div class="ttdef"><b>Definition:</b> <a href="talker__avatar_8cpp_source.html#l00053">talker_avatar.cpp:53</a></div></div>
<div class="ttc" id="aclasstalker__avatar_html_ac6198888d6953afc1a134d09f77be847"><div class="ttname"><a href="classtalker__avatar.html#ac6198888d6953afc1a134d09f77be847">talker_avatar::buy_monster</a></div><div class="ttdeci">bool buy_monster(talker &amp;seller, const mtype_id &amp;mtype, int cost, int count, bool pacified, const translation &amp;name) override</div><div class="ttdef"><b>Definition:</b> <a href="talker__avatar_8cpp_source.html#l00067">talker_avatar.cpp:67</a></div></div>
<div class="ttc" id="aclasstalker__avatar_html_ad07e9e6a4ba074880c0cc6db4199808f"><div class="ttname"><a href="classtalker__avatar.html#ad07e9e6a4ba074880c0cc6db4199808f">talker_avatar::talker_avatar</a></div><div class="ttdeci">talker_avatar(avatar *new_me)</div><div class="ttdef"><b>Definition:</b> <a href="talker__avatar_8cpp_source.html#l00027">talker_avatar.cpp:27</a></div></div>
<div class="ttc" id="aclasstalker__avatar_html_ae375ee80a4bd6209f4ba42fabf48b914"><div class="ttname"><a href="classtalker__avatar.html#ae375ee80a4bd6209f4ba42fabf48b914">talker_avatar::parse_mod</a></div><div class="ttdeci">int parse_mod(const std::string &amp;attribute, int factor) const override</div><div class="ttdef"><b>Definition:</b> <a href="talker__avatar_8cpp_source.html#l00043">talker_avatar.cpp:43</a></div></div>
<div class="ttc" id="aclasstalker__character__const_html_a33f32448168af7d680951600ed35028b"><div class="ttname"><a href="classtalker__character__const.html#a33f32448168af7d680951600ed35028b">talker_character_const::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;trait_to_check) const override</div><div class="ttdef"><b>Definition:</b> <a href="talker__character_8cpp_source.html#l00212">talker_character.cpp:212</a></div></div>
<div class="ttc" id="aclasstalker__character__const_html_a5244cc83fa8ef23fb0a48136b0f115cd"><div class="ttname"><a href="classtalker__character__const.html#a5244cc83fa8ef23fb0a48136b0f115cd">talker_character_const::me_chr_const</a></div><div class="ttdeci">const Character * me_chr_const</div><div class="ttdef"><b>Definition:</b> <a href="talker__character_8h_source.html#l00201">talker_character.h:201</a></div></div>
<div class="ttc" id="aclasstalker__character__const_html_a82f122856c409709d1178bdc3ebba6e9"><div class="ttname"><a href="classtalker__character__const.html#a82f122856c409709d1178bdc3ebba6e9">talker_character_const::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;item_id) const override</div><div class="ttdef"><b>Definition:</b> <a href="talker__character_8cpp_source.html#l00490">talker_character.cpp:490</a></div></div>
<div class="ttc" id="aclasstalker__character_html_a6c634ab41501b0d30fd8db25f25caada"><div class="ttname"><a href="classtalker__character.html#a6c634ab41501b0d30fd8db25f25caada">talker_character::me_chr</a></div><div class="ttdeci">Character * me_chr</div><div class="ttdef"><b>Definition:</b> <a href="talker__character_8h_source.html#l00313">talker_character.h:313</a></div></div>
<div class="ttc" id="aclasstalker_html"><div class="ttname"><a href="classtalker.html">talker</a></div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00035">talker.h:36</a></div></div>
<div class="ttc" id="aclasstalker_html_a623669b6b3cfb0a15114547919504eeb"><div class="ttname"><a href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">talker::get_npc</a></div><div class="ttdeci">virtual npc * get_npc()</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00049">talker.h:49</a></div></div>
<div class="ttc" id="aclasstalker_html_aeacb7e37bda8320485caff19db849d59"><div class="ttname"><a href="classtalker.html#aeacb7e37bda8320485caff19db849d59">talker::disp_name</a></div><div class="ttdeci">virtual std::string disp_name() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00080">talker.h:80</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amtype_8h_html"><div class="ttname"><a href="mtype_8h.html">mtype.h</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a4a0a2c15f95df6acf6e55d53a83fb929"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a4a0a2c15f95df6acf6e55d53a83fb929">debugmode::DF_TALKER</a></div><div class="ttdeci">@ DF_TALKER</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00276">debug.h:276</a></div></div>
<div class="ttc" id="anamespacenpc__trading_html_a9a7dbd65b9ae311c79c92b57c1b134b4"><div class="ttname"><a href="namespacenpc__trading.html#a9a7dbd65b9ae311c79c92b57c1b134b4">npc_trading::pay_npc</a></div><div class="ttdeci">bool pay_npc(npc &amp;np, int cost)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk__funcs_8cpp_source.html#l01062">npctalk_funcs.cpp:1062</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="anpc_8h_html"><div class="ttname"><a href="npc_8h.html">npc.h</a></div></div>
<div class="ttc" id="anpctrade_8h_html"><div class="ttname"><a href="npctrade_8h.html">npctrade.h</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="askill_8h_html"><div class="ttname"><a href="skill_8h.html">skill.h</a></div></div>
<div class="ttc" id="astructmtype_html"><div class="ttname"><a href="structmtype.html">mtype</a></div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00284">mtype.h:284</a></div></div>
<div class="ttc" id="astructmtype_html_a9a8f4ead67d1836e3f4db624533af5aa"><div class="ttname"><a href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">mtype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00330">mtype.cpp:330</a></div></div>
<div class="ttc" id="astructsocial__modifiers_html"><div class="ttname"><a href="structsocial__modifiers.html">social_modifiers</a></div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00393">enums.h:393</a></div></div>
<div class="ttc" id="astructsocial__modifiers_html_a1133fc2155fb62215db59a795583191a"><div class="ttname"><a href="structsocial__modifiers.html#a1133fc2155fb62215db59a795583191a">social_modifiers::persuade</a></div><div class="ttdeci">int persuade</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00395">enums.h:395</a></div></div>
<div class="ttc" id="astructsocial__modifiers_html_a840fb4d8f6996ba120f889bd192dfd31"><div class="ttname"><a href="structsocial__modifiers.html#a840fb4d8f6996ba120f889bd192dfd31">social_modifiers::intimidate</a></div><div class="ttdeci">int intimidate</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00396">enums.h:396</a></div></div>
<div class="ttc" id="astructsocial__modifiers_html_a9812d8adb1701480a878506e1dbe9932"><div class="ttname"><a href="structsocial__modifiers.html#a9812d8adb1701480a878506e1dbe9932">social_modifiers::lie</a></div><div class="ttdeci">int lie</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00394">enums.h:394</a></div></div>
<div class="ttc" id="atalker_8h_html"><div class="ttname"><a href="talker_8h.html">talker.h</a></div></div>
<div class="ttc" id="atalker__avatar_8cpp_html_a02a4844a7fb68c13a34dc40b0a9e94d8"><div class="ttname"><a href="talker__avatar_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a></div><div class="ttdeci">static const efftype_id effect_pet(&quot;pet&quot;)</div></div>
<div class="ttc" id="atalker__avatar_8cpp_html_a1eb0d980d9e60655982ce0b931f4fb57"><div class="ttname"><a href="talker__avatar_8cpp.html#a1eb0d980d9e60655982ce0b931f4fb57">trait_PROF_FOODP</a></div><div class="ttdeci">static const trait_id trait_PROF_FOODP(&quot;PROF_FOODP&quot;)</div></div>
<div class="ttc" id="atalker__avatar_8cpp_html_a23ab798a014e7d7135089fa750c2b563"><div class="ttname"><a href="talker__avatar_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a></div><div class="ttdeci">static const itype_id itype_foodperson_mask(&quot;foodperson_mask&quot;)</div></div>
<div class="ttc" id="atalker__avatar_8cpp_html_a79654cfc6f07462199ec3f5da9e49c83"><div class="ttname"><a href="talker__avatar_8cpp.html#a79654cfc6f07462199ec3f5da9e49c83">effect_pacified</a></div><div class="ttdeci">static const efftype_id effect_pacified(&quot;pacified&quot;)</div></div>
<div class="ttc" id="atalker__avatar_8cpp_html_a9260a87c7c9a0df88820afa3a689dc68"><div class="ttname"><a href="talker__avatar_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a></div><div class="ttdeci">static const itype_id itype_foodperson_mask_on(&quot;foodperson_mask_on&quot;)</div></div>
<div class="ttc" id="atalker__avatar_8h_html"><div class="ttname"><a href="talker__avatar_8h.html">talker_avatar.h</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:31 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
