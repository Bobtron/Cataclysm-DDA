<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: creature_tracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classcreature__tracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">creature_tracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a00296e75688dc96078ddd7aa57a63256"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a00296e75688dc96078ddd7aa57a63256">creature_tracker</a> ()</td></tr>
<tr class="separator:a00296e75688dc96078ddd7aa57a63256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a710265ef05f22c60c2b6e78d77d69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad7a710265ef05f22c60c2b6e78d77d69">~creature_tracker</a> ()</td></tr>
<tr class="separator:ad7a710265ef05f22c60c2b6e78d77d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132c8a6504a3dc997ba0878fcc018a93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">find</a> (const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;pos) const</td></tr>
<tr class="memdesc:a132c8a6504a3dc997ba0878fcc018a93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the monster at the given location.  <a href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">More...</a><br /></td></tr>
<tr class="separator:a132c8a6504a3dc997ba0878fcc018a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6846034d343a122b21657e6ecd8268c6"><td class="memTemplParams" colspan="2">template&lt;typename PredicateFn &gt; </td></tr>
<tr class="memitem:a6846034d343a122b21657e6ecd8268c6"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classCreature.html">Creature</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">find_reachable</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;origin, PredicateFn &amp;&amp;predicate_fn)</td></tr>
<tr class="memdesc:a6846034d343a122b21657e6ecd8268c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reachable creature matching the given predicate.  <a href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">More...</a><br /></td></tr>
<tr class="separator:a6846034d343a122b21657e6ecd8268c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab97b4d294e0a4f69ab0502b609a7a37b"><td class="memTemplParams" colspan="2">template&lt;typename FactionPredicateFn , typename CreaturePredicateFn &gt; </td></tr>
<tr class="memitem:ab97b4d294e0a4f69ab0502b609a7a37b"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classCreature.html">Creature</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ab97b4d294e0a4f69ab0502b609a7a37b">find_reachable</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;origin, FactionPredicateFn &amp;&amp;faction_fn, CreaturePredicateFn &amp;&amp;creature_fn)</td></tr>
<tr class="memdesc:ab97b4d294e0a4f69ab0502b609a7a37b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reachable creature matching the given predicates.  <a href="classcreature__tracker.html#ab97b4d294e0a4f69ab0502b609a7a37b">More...</a><br /></td></tr>
<tr class="separator:ab97b4d294e0a4f69ab0502b609a7a37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9790b8a1e05d0c5cff55a8aaeef80d94"><td class="memTemplParams" colspan="2">template&lt;typename VisitFn &gt; </td></tr>
<tr class="memitem:a9790b8a1e05d0c5cff55a8aaeef80d94"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a9790b8a1e05d0c5cff55a8aaeef80d94">for_each_reachable</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;origin, VisitFn &amp;&amp;visit_fn)</td></tr>
<tr class="memdesc:a9790b8a1e05d0c5cff55a8aaeef80d94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visits all reachable creatures using the given functor.  <a href="classcreature__tracker.html#a9790b8a1e05d0c5cff55a8aaeef80d94">More...</a><br /></td></tr>
<tr class="separator:a9790b8a1e05d0c5cff55a8aaeef80d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83d8484e9b8e5793335412be9ce4355"><td class="memTemplParams" colspan="2">template&lt;typename FactionPredicateFn , typename CreatureVisitFn &gt; </td></tr>
<tr class="memitem:ac83d8484e9b8e5793335412be9ce4355"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ac83d8484e9b8e5793335412be9ce4355">for_each_reachable</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;origin, FactionPredicateFn &amp;&amp;faction_fn, CreatureVisitFn &amp;&amp;creature_fn)</td></tr>
<tr class="memdesc:ac83d8484e9b8e5793335412be9ce4355"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visits all reachable creatures using the given functor matching the given predicate.  <a href="classcreature__tracker.html#ac83d8484e9b8e5793335412be9ce4355">More...</a><br /></td></tr>
<tr class="separator:ac83d8484e9b8e5793335412be9ce4355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06db2c2818ada508bd9c7eac4ab4dacc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a06db2c2818ada508bd9c7eac4ab4dacc">temporary_id</a> (const <a class="el" href="classmonster.html">monster</a> &amp;critter) const</td></tr>
<tr class="memdesc:a06db2c2818ada508bd9c7eac4ab4dacc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a temporary id of the given monster (which must exist in the tracker).  <a href="classcreature__tracker.html#a06db2c2818ada508bd9c7eac4ab4dacc">More...</a><br /></td></tr>
<tr class="separator:a06db2c2818ada508bd9c7eac4ab4dacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19843aa9774855fa297bfabcc674a875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a19843aa9774855fa297bfabcc674a875">from_temporary_id</a> (int id)</td></tr>
<tr class="separator:a19843aa9774855fa297bfabcc674a875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6cf67cf04ef55a7256aaa098561bce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a1c6cf67cf04ef55a7256aaa098561bce">add</a> (const <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &amp;critter)</td></tr>
<tr class="memdesc:a1c6cf67cf04ef55a7256aaa098561bce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the given monster to the tracker.  <a href="classcreature__tracker.html#a1c6cf67cf04ef55a7256aaa098561bce">More...</a><br /></td></tr>
<tr class="separator:a1c6cf67cf04ef55a7256aaa098561bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564750229d77af829f70477ec8426b16"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a564750229d77af829f70477ec8426b16">size</a> () const</td></tr>
<tr class="separator:a564750229d77af829f70477ec8426b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b71117cc077f4ee774feb00ea8bddc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a03b71117cc077f4ee774feb00ea8bddc">update_pos</a> (const <a class="el" href="classmonster.html">monster</a> &amp;critter, const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;old_pos, const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;new_pos)</td></tr>
<tr class="memdesc:a03b71117cc077f4ee774feb00ea8bddc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the position of the given monster to the given point.  <a href="classcreature__tracker.html#a03b71117cc077f4ee774feb00ea8bddc">More...</a><br /></td></tr>
<tr class="separator:a03b71117cc077f4ee774feb00ea8bddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660abe140bedb74bf62a6bf10039da9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a660abe140bedb74bf62a6bf10039da9f">remove</a> (const <a class="el" href="classmonster.html">monster</a> &amp;critter)</td></tr>
<tr class="memdesc:a660abe140bedb74bf62a6bf10039da9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the given monster from the <a class="el" href="classCreature.html">Creature</a> tracker, adjusting other entries as needed.  <a href="classcreature__tracker.html#a660abe140bedb74bf62a6bf10039da9f">More...</a><br /></td></tr>
<tr class="separator:a660abe140bedb74bf62a6bf10039da9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15715b406adc7be0c4e355fa3f30cbea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a15715b406adc7be0c4e355fa3f30cbea">clear</a> ()</td></tr>
<tr class="separator:a15715b406adc7be0c4e355fa3f30cbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb1504be7c92ef07efdfda4c32c5c1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#aedb1504be7c92ef07efdfda4c32c5c1a">clear_npcs</a> ()</td></tr>
<tr class="separator:aedb1504be7c92ef07efdfda4c32c5c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7337a8721c6b217260e5cb8f2e2882a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a7337a8721c6b217260e5cb8f2e2882a7">swap_positions</a> (<a class="el" href="classmonster.html">monster</a> &amp;first, <a class="el" href="classmonster.html">monster</a> &amp;<a class="el" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>)</td></tr>
<tr class="memdesc:a7337a8721c6b217260e5cb8f2e2882a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swaps the positions of two monsters.  <a href="classcreature__tracker.html#a7337a8721c6b217260e5cb8f2e2882a7">More...</a><br /></td></tr>
<tr class="separator:a7337a8721c6b217260e5cb8f2e2882a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28b133fae20c78b8b1d00e35b91e171"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad28b133fae20c78b8b1d00e35b91e171">kill_marked_for_death</a> ()</td></tr>
<tr class="memdesc:ad28b133fae20c78b8b1d00e35b91e171"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kills 0 hp monsters.  <a href="classcreature__tracker.html#ad28b133fae20c78b8b1d00e35b91e171">More...</a><br /></td></tr>
<tr class="separator:ad28b133fae20c78b8b1d00e35b91e171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a682bfcccccaf8728cfa0a75658f9a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a5a682bfcccccaf8728cfa0a75658f9a6">remove_dead</a> ()</td></tr>
<tr class="memdesc:a5a682bfcccccaf8728cfa0a75658f9a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes dead monsters from.  <a href="classcreature__tracker.html#a5a682bfcccccaf8728cfa0a75658f9a6">More...</a><br /></td></tr>
<tr class="separator:a5a682bfcccccaf8728cfa0a75658f9a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba3c6663688bcd1806ea685d6961cb72"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:aba3c6663688bcd1806ea685d6961cb72"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, bool allow_hallucination=false)</td></tr>
<tr class="memdesc:aba3c6663688bcd1806ea685d6961cb72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classCreature.html">Creature</a> at the given location.  <a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">More...</a><br /></td></tr>
<tr class="separator:aba3c6663688bcd1806ea685d6961cb72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71eb55bc7d9258b532d67f36639deea"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:ad71eb55bc7d9258b532d67f36639deea"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad71eb55bc7d9258b532d67f36639deea">creature_at</a> (const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;p, bool allow_hallucination=false)</td></tr>
<tr class="separator:ad71eb55bc7d9258b532d67f36639deea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82ab6dfb34a713850dff947dd6f63b9"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:ad82ab6dfb34a713850dff947dd6f63b9"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad82ab6dfb34a713850dff947dd6f63b9">creature_at</a> (const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;p, bool allow_hallucination=false)</td></tr>
<tr class="separator:ad82ab6dfb34a713850dff947dd6f63b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be1ff15b126e11088a77b81359c4d45"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:a4be1ff15b126e11088a77b81359c4d45"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a4be1ff15b126e11088a77b81359c4d45">creature_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, bool allow_hallucination=false) const</td></tr>
<tr class="separator:a4be1ff15b126e11088a77b81359c4d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c3a18d2a346260da06ce40981a503a"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:ac4c3a18d2a346260da06ce40981a503a"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ac4c3a18d2a346260da06ce40981a503a">creature_at</a> (const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;p, bool allow_hallucination=false) const</td></tr>
<tr class="separator:ac4c3a18d2a346260da06ce40981a503a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503985f05f5b80c7c0259ac2af08059a"><td class="memTemplParams" colspan="2">template&lt;typename T  = Creature&gt; </td></tr>
<tr class="memitem:a503985f05f5b80c7c0259ac2af08059a"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a503985f05f5b80c7c0259ac2af08059a">creature_at</a> (const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;p, bool allow_hallucination=false) const</td></tr>
<tr class="separator:a503985f05f5b80c7c0259ac2af08059a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8df3465436c9b1b8292d5447b35c159"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ae8df3465436c9b1b8292d5447b35c159">get_monsters_list</a> () const</td></tr>
<tr class="separator:ae8df3465436c9b1b8292d5447b35c159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9496661839e50fbd66f944e5c2d3bcb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a9496661839e50fbd66f944e5c2d3bcb9">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;jsout) const</td></tr>
<tr class="separator:a9496661839e50fbd66f944e5c2d3bcb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c007110990f3aa3e3498107b27731e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a75c007110990f3aa3e3498107b27731e">deserialize</a> (const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;ja)</td></tr>
<tr class="separator:a75c007110990f3aa3e3498107b27731e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ff1086c969d8f66559da33211d889e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a46ff1086c969d8f66559da33211d889e">invalidate_reachability_cache</a> ()</td></tr>
<tr class="separator:a46ff1086c969d8f66559da33211d889e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abcd63484ac41bef4e2c513372c08c627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">remove_from_location_map</a> (const <a class="el" href="classmonster.html">monster</a> &amp;critter)</td></tr>
<tr class="memdesc:abcd63484ac41bef4e2c513372c08c627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the monsters entry in <a class="el" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.  <a href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">More...</a><br /></td></tr>
<tr class="separator:abcd63484ac41bef4e2c513372c08c627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97e6df73782a6c7082537eda7788dca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#af97e6df73782a6c7082537eda7788dca">flood_fill_zone</a> (const <a class="el" href="classCreature.html">Creature</a> &amp;origin)</td></tr>
<tr class="memdesc:af97e6df73782a6c7082537eda7788dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is lazily evaluated on demand.  <a href="classcreature__tracker.html#af97e6df73782a6c7082537eda7788dca">More...</a><br /></td></tr>
<tr class="separator:af97e6df73782a6c7082537eda7788dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e82dd1d9b95c29b1e0d6df277561e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a41e82dd1d9b95c29b1e0d6df277561e1">rebuild_cache</a> ()</td></tr>
<tr class="separator:a41e82dd1d9b95c29b1e0d6df277561e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf2d86acd69446c877f61f03a46b439"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#afaf2d86acd69446c877f61f03a46b439">is_present</a> (<a class="el" href="classCreature.html">Creature</a> *<a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>) const</td></tr>
<tr class="separator:afaf2d86acd69446c877f61f03a46b439"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abb4095863f4cb8afcfa3b820ae0b2bff"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classnpc.html">npc</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#abb4095863f4cb8afcfa3b820ae0b2bff">active_npc</a></td></tr>
<tr class="separator:abb4095863f4cb8afcfa3b820ae0b2bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afd4355965b93d02eae4012c5234a23"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a></td></tr>
<tr class="separator:a3afd4355965b93d02eae4012c5234a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad574d46886e339278e37f56adf6b8866"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a>, <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a></td></tr>
<tr class="separator:ad574d46886e339278e37f56adf6b8866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a782a84081de997419c083cf8cf612a18"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">removed_this_turn_</a></td></tr>
<tr class="memdesc:a782a84081de997419c083cf8cf612a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creatures that get removed via <a class="el" href="classcreature__tracker.html#a660abe140bedb74bf62a6bf10039da9f">remove</a> are stored here until the end of the turn.  <a href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">More...</a><br /></td></tr>
<tr class="separator:a782a84081de997419c083cf8cf612a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7968519515f1fcdb07e710d69314eb2c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a7968519515f1fcdb07e710d69314eb2c">dirty_</a> = true</td></tr>
<tr class="separator:a7968519515f1fcdb07e710d69314eb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fcedbcb6907afb5f4613928188a387f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">zone_tick_</a> = 1</td></tr>
<tr class="separator:a1fcedbcb6907afb5f4613928188a387f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad90e53f1204d8fd15c0fc2a416fba96e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a> = 0</td></tr>
<tr class="separator:ad90e53f1204d8fd15c0fc2a416fba96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb034b135465050876f23d3dd7398f7c"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; <a class="el" href="npc_8h.html#a3472a8986ea9d6078ab02871b7791add">mfaction_id</a>, std::vector&lt; <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classCreature.html">Creature</a> &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a></td></tr>
<tr class="separator:adb034b135465050876f23d3dd7398f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b69bbcbf72fd4597689c3778a28643"><td class="memItemLeft" align="right" valign="top">friend&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcreature__tracker.html#ab0b69bbcbf72fd4597689c3778a28643">game</a></td></tr>
<tr class="separator:ab0b69bbcbf72fd4597689c3778a28643"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00024">24</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a00296e75688dc96078ddd7aa57a63256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00296e75688dc96078ddd7aa57a63256">&#9670;&nbsp;</a></span>creature_tracker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">creature_tracker::creature_tracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad7a710265ef05f22c60c2b6e78d77d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a710265ef05f22c60c2b6e78d77d69">&#9670;&nbsp;</a></span>~creature_tracker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">creature_tracker::~creature_tracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1c6cf67cf04ef55a7256aaa098561bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6cf67cf04ef55a7256aaa098561bce">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool creature_tracker::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>critter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the given monster to the tracker. </p>
<p><code>critter</code> must not be null. If the operation succeeded, the monster pointer is now managed by this tracker. </p><dl class="section return"><dt>Returns</dt><dd>Whether the operation was successful. It may fail if there is already another monster at the location of the new monster. </dd></dl>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00068">68</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( critter_ptr );</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classmonster.html">monster</a> &amp;critter = *critter_ptr;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) { <span class="comment">// Don&#39;t want to spawn null monsters o.O</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#ae6e64d944376bff50eabce89f2ca1bbd">mon_flag_VERMIN</a> ) ) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// Don&#39;t spawn vermin, they aren&#39;t implemented yet</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> existing_mon_ptr = <a class="code" href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">find</a>( critter.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() ) ) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// We can spawn stuff on hallucinations, but we need to kill them first</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span>( existing_mon_ptr-&gt;is_hallucination() ) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            existing_mon_ptr-&gt;<a class="code" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="comment">// But don&#39;t remove - that would change the monster order and could segfault</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">is_hallucination</a>() ) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;there&#39;s already a monster at %s&quot;</span>, critter.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>().<a class="code" href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">to_string_writable</a>() );</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classMonsterGroupManager.html#a40b4bc56bd97ac93e91a6ed6f3e308f8">MonsterGroupManager::monster_is_blacklisted</a>( critter.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> ) ) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.emplace_back( critter_ptr );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>[critter.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>()] = critter_ptr;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="aclassCreature_html_a3261de1530798f5b934a71b9a4e17f5b"><div class="ttname"><a href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">Creature::get_location</a></div><div class="ttdeci">tripoint_abs_ms get_location() const</div><div class="ttdoc">Returns the location of the creature in map square coordinates (the most detailed coordinate system),...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03232">creature.cpp:3232</a></div></div>
<div class="ttc" id="aclassMonsterGroupManager_html_a40b4bc56bd97ac93e91a6ed6f3e308f8"><div class="ttname"><a href="classMonsterGroupManager.html#a40b4bc56bd97ac93e91a6ed6f3e308f8">MonsterGroupManager::monster_is_blacklisted</a></div><div class="ttdeci">static bool monster_is_blacklisted(const mtype_id &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8cpp_source.html#l00389">mongroup.cpp:389</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__base_html_adffa74cccb8c246a8b12eeca632b1642"><div class="ttname"><a href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">coords::coord_point_base::to_string_writable</a></div><div class="ttdeci">std::string to_string_writable() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00124">coordinates.h:124</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a132c8a6504a3dc997ba0878fcc018a93"><div class="ttname"><a href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">creature_tracker::find</a></div><div class="ttdeci">shared_ptr_fast&lt; monster &gt; find(const tripoint_abs_ms &amp;pos) const</div><div class="ttdoc">Returns the monster at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00035">creature_tracker.cpp:35</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a3afd4355965b93d02eae4012c5234a23"><div class="ttname"><a href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">creature_tracker::monsters_list</a></div><div class="ttdeci">std::vector&lt; shared_ptr_fast&lt; monster &gt; &gt; monsters_list</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00154">creature_tracker.h:154</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_ad574d46886e339278e37f56adf6b8866"><div class="ttname"><a href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">creature_tracker::monsters_by_location</a></div><div class="ttdeci">std::unordered_map&lt; tripoint_abs_ms, shared_ptr_fast&lt; monster &gt; &gt; monsters_by_location</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00156">creature_tracker.h:156</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a70c250ac59c7d91b374dfa5d7b8da66c"><div class="ttname"><a href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">monster::is_hallucination</a></div><div class="ttdeci">bool is_hallucination() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03460">monster.cpp:3460</a></div></div>
<div class="ttc" id="aclassmonster_html_a82ae41773b05af94d4b678cb33bfb329"><div class="ttname"><a href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">monster::die</a></div><div class="ttdeci">void die(Creature *killer) override</div><div class="ttdoc">Empty function.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02742">monster.cpp:2742</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00550">monster.h:550</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ada897699f31fc8b37c5af09d95d45840"><div class="ttname"><a href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00016">memory_fast.h:16</a></div></div>
<div class="ttc" id="amtype_8cpp_html_ae6e64d944376bff50eabce89f2ca1bbd"><div class="ttname"><a href="mtype_8cpp.html#ae6e64d944376bff50eabce89f2ca1bbd">mon_flag_VERMIN</a></div><div class="ttdeci">mon_flag_id mon_flag_VERMIN</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00159">mtype.cpp:159</a></div></div>
<div class="ttc" id="astructmtype_html_a60dea81cdc4c627313e540831d311b5a"><div class="ttname"><a href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">mtype::id</a></div><div class="ttdeci">mtype_id id</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00301">mtype.h:301</a></div></div>
<div class="ttc" id="astructmtype_html_a8f4ef7b98c4bad77c50171f7da0f4f56"><div class="ttname"><a href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">mtype::has_flag</a></div><div class="ttdeci">bool has_flag(const mon_flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00520">mtype.h:520</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00035">find()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="mtype_8h_source.html#l00520">mtype::has_flag()</a>, <a class="el" href="mtype_8h_source.html#l00301">mtype::id</a>, <a class="el" href="monster_8cpp_source.html#l03460">monster::is_hallucination()</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="mtype_8cpp_source.html#l00159">mon_flag_VERMIN</a>, <a class="el" href="mongroup_8cpp_source.html#l00389">MonsterGroupManager::monster_is_blacklisted()</a>, <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="coordinates_8h_source.html#l00124">coords::coord_point_base&lt; Point &gt;::to_string_writable()</a>, and <a class="el" href="monster_8h_source.html#l00550">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="savegame_8cpp_source.html#l01682">deserialize()</a>.</p>

</div>
</div>
<a id="a15715b406adc7be0c4e355fa3f30cbea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15715b406adc7be0c4e355fa3f30cbea">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00184">184</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.clear();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.clear();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">removed_this_turn_</a>.clear();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a>.clear();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="classcreature__tracker.html#a46ff1086c969d8f66559da33211d889e">invalidate_reachability_cache</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="ttc" id="aclasscreature__tracker_html_a46ff1086c969d8f66559da33211d889e"><div class="ttname"><a href="classcreature__tracker.html#a46ff1086c969d8f66559da33211d889e">creature_tracker::invalidate_reachability_cache</a></div><div class="ttdeci">void invalidate_reachability_cache()</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00138">creature_tracker.h:138</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a782a84081de997419c083cf8cf612a18"><div class="ttname"><a href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">creature_tracker::removed_this_turn_</a></div><div class="ttdeci">std::unordered_set&lt; shared_ptr_fast&lt; monster &gt; &gt; removed_this_turn_</div><div class="ttdoc">Creatures that get removed via remove are stored here until the end of the turn.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00162">creature_tracker.h:162</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_adb034b135465050876f23d3dd7398f7c"><div class="ttname"><a href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creature_tracker::creatures_by_zone_and_faction_</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; mfaction_id, std::vector&lt; shared_ptr_fast&lt; Creature &gt; &gt; &gt; &gt; creatures_by_zone_and_faction_</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00171">creature_tracker.h:171</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00171">creatures_by_zone_and_faction_</a>, <a class="el" href="creature__tracker_8h_source.html#l00138">invalidate_reachability_cache()</a>, <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, and <a class="el" href="creature__tracker_8h_source.html#l00162">removed_this_turn_</a>.</p>

</div>
</div>
<a id="aedb1504be7c92ef07efdfda4c32c5c1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb1504be7c92ef07efdfda4c32c5c1a">&#9670;&nbsp;</a></span>clear_npcs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::clear_npcs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00097">97</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                          {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <a class="code" href="classcreature__tracker.html#abb4095863f4cb8afcfa3b820ae0b2bff">active_npc</a>.clear();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="ttc" id="aclasscreature__tracker_html_abb4095863f4cb8afcfa3b820ae0b2bff"><div class="ttname"><a href="classcreature__tracker.html#abb4095863f4cb8afcfa3b820ae0b2bff">creature_tracker::active_npc</a></div><div class="ttdeci">std::list&lt; shared_ptr_fast&lt; npc &gt; &gt; active_npc</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00153">creature_tracker.h:153</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00153">active_npc</a>.</p>

</div>
</div>
<a id="aba3c6663688bcd1806ea685d6961cb72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba3c6663688bcd1806ea685d6961cb72">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classCreature.html">Creature</a> at the given location. </p>
<p>Optionally casted to the given type of creature: <a class="el" href="classnpc.html">npc</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, <a class="el" href="classmonster.html">monster</a> - if there is a creature, but it's not of the requested type, returns nullptr. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allow_hallucination</td><td>Whether to return monsters that are actually hallucinations. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00303">303</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> creature_at&lt;T&gt;( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( p ), allow_hallucination );</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03446">target_ui::action_aim_and_shoot()</a>, <a class="el" href="computer__session_8cpp_source.html#l00566">computer_session::action_terminate()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00485">add_effect_to_target()</a>, <a class="el" href="character_8cpp_source.html#l07563">Character::adjacent_tile()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00357">npc_attack_melee::all_evaluations()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00522">npc_attack_gun::all_evaluations()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00773">npc_attack_throw::all_evaluations()</a>, <a class="el" href="npcmove_8cpp_source.html#l04176">npc::alt_attack()</a>, <a class="el" href="mapgen_8cpp_source.html#l04861">jmapgen_setmap::apply()</a>, <a class="el" href="monmove_8cpp_source.html#l01778">monster::attack_at()</a>, <a class="el" href="monster_8cpp_source.html#l01405">monster::attack_target()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01714">spell_effect::banishment()</a>, <a class="el" href="monmove_8cpp_source.html#l01676">monster::bash_at()</a>, <a class="el" href="monattack_8cpp_source.html#l03988">mattack::breathe()</a>, <a class="el" href="ranged_8cpp_source.html#l01140">calculate_aim_cap()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00269">mon_spellcasting_actor::call()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00673">melee_actor::call()</a>, <a class="el" href="iuse_8cpp_source.html#l06517">iuse::camera()</a>, <a class="el" href="computer__session_8cpp_source.html#l00381">computer_session::can_activate()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01252">vehicle::can_close()</a>, <a class="el" href="action_8cpp_source.html#l00674">can_examine_at()</a>, <a class="el" href="iuse_8cpp_source.html#l03225">iuse::can_goo()</a>, <a class="el" href="game_8cpp_source.html#l11356">game::can_move_furniture()</a>, <a class="el" href="game_8cpp_source.html#l05169">can_place_monster()</a>, <a class="el" href="game_8cpp_source.html#l05186">can_place_npc()</a>, <a class="el" href="activity__actor_8cpp_source.html#l05117">shearing_activity_actor::canceled()</a>, <a class="el" href="iuse_8cpp_source.html#l07997">iuse::capture_monster_act()</a>, <a class="el" href="debug__menu_8cpp_source.html#l01868">debug_menu::character_edit_menu()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01412">spell_effect::charm_monster()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00695">vehicle::autodrive_controller::check_drivable()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01385">vehicle::check_heli_ascend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01350">vehicle::check_heli_descend()</a>, <a class="el" href="npcmove_8cpp_source.html#l00242">clear_shot_reach()</a>, <a class="el" href="gates_8cpp_source.html#l00254">doors::close_door()</a>, <a class="el" href="map_8cpp_source.html#l03796">map::collapse_at()</a>, <a class="el" href="veh__interact_8cpp_source.html#l03087">veh_interact::complete_vehicle()</a>, <a class="el" href="iuse_8cpp_source.html#l07979">item::contain_monster()</a>, <a class="el" href="map_8cpp_source.html#l04428">map::crush()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00508">damage_targets()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01664">spell_effect::dash()</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00982">spell_effect::directed_push()</a>, <a class="el" href="game_8cpp_source.html#l10373">game::disable_robot()</a>, <a class="el" href="map_8cpp_source.html#l01435">map::displace_vehicle()</a>, <a class="el" href="game_8cpp_source.html#l12938">game::display_visibility()</a>, <a class="el" href="explosion_8cpp_source.html#l00175">explosion_handler::do_blast()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04912">milk_activity_actor::do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04392">disable_activity_actor::do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04339">stash_activity_actor::do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01555">glide_activity_actor::do_turn()</a>, <a class="el" href="editmap_8cpp_source.html#l00216">editmap_hilight::draw()</a>, <a class="el" href="animation_8cpp_source.html#l00637">anonymous_namespace{animation.cpp}::draw_line_curses()</a>, <a class="el" href="game_8cpp_source.html#l06418">game::draw_look_around_cursor()</a>, <a class="el" href="editmap_8cpp_source.html#l00514">editmap::draw_main_ui_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l01967">draw_throw_aim()</a>, <a class="el" href="map_8cpp_source.html#l02762">map::drop_furniture()</a>, <a class="el" href="map_8cpp_source.html#l02908">map::drop_items()</a>, <a class="el" href="character_8cpp_source.html#l10561">Character::echo_pulse()</a>, <a class="el" href="editmap_8cpp_source.html#l00346">editmap::edit()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00595">eff_fun_teleglow()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01787">spell_effect::effect_on_condition()</a>, <a class="el" href="iuse_8cpp_source.html#l05858">effects_description_for_creature()</a>, <a class="el" href="iuse_8cpp_source.html#l02638">iuse::emf_passive_on()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00332">npc_attack_melee::evaluate()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00500">npc_attack_gun::evaluate()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00722">npc_attack_throw::evaluate()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00173">npc_attack_spell::evaluate_tripoint()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00542">npc_attack_gun::evaluate_tripoint()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00798">npc_attack_throw::evaluate_tripoint()</a>, <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>, <a class="el" href="npctalk_8cpp_source.html#l03534">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_location_variable()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05798">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_spawn_monster()</a>, <a class="el" href="npctalk_8cpp_source.html#l05978">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_spawn_npc()</a>, <a class="el" href="climbing_8cpp_source.html#l00368">climbing_aid::fall_scan::fall_scan()</a>, <a class="el" href="map__field_8cpp_source.html#l01425">field_processor_fd_last_known()</a>, <a class="el" href="map__field_8cpp_source.html#l00781">field_processor_fd_push_items()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, <a class="el" href="game_8cpp_source.html#l11947">find_empty_spot_nearby()</a>, <a class="el" href="game_8cpp_source.html#l12386">game::find_or_make_stairs()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04929">milk_activity_actor::finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l05064">shearing_activity_actor::finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l06380">chop_tree_activity_actor::finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04412">disable_activity_actor::finish()</a>, <a class="el" href="game_8cpp_source.html#l11735">game::fling_creature()</a>, <a class="el" href="game_8cpp_source.html#l05671">game::forced_door_closing()</a>, <a class="el" href="monattack_8cpp_source.html#l02497">mattack::formblob()</a>, <a class="el" href="iuse_8cpp_source.html#l00665">iuse::fungicide()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l10228">map::get_creatures_in_radius()</a>, <a class="el" href="vehicle_8cpp_source.html#l03412">vehicle::get_monster()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03299">get_patient()</a>, <a class="el" href="handle__action_8cpp_source.html#l00236">game::get_player_input()</a>, <a class="el" href="vehicle_8cpp_source.html#l03373">vehicle::get_riders()</a>, <a class="el" href="iuse_8cpp_source.html#l03274">iuse::granade_act()</a>, <a class="el" href="monmove_8cpp_source.html#l01735">monster::group_bash_skill()</a>, <a class="el" href="monattack_8cpp_source.html#l01629">mattack::growplants()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01498">spell_effect::guilt()</a>, <a class="el" href="npctalk_8cpp_source.html#l01256">npc::handle_sound()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l01230">Character::hardcoded_effects()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00039">has_obstruction()</a>, <a class="el" href="monattack_8cpp_source.html#l01746">has_vine_parent()</a>, <a class="el" href="magic_8cpp_source.html#l01804">spell::heal()</a>, <a class="el" href="character_8cpp_source.html#l12557">Character::impact()</a>, <a class="el" href="npc_8cpp_source.html#l02529">npc::is_active()</a>, <a class="el" href="game_8cpp_source.html#l05506">game::is_empty()</a>, <a class="el" href="character_8cpp_source.html#l12722">Character::knock_back_to()</a>, <a class="el" href="monmove_8cpp_source.html#l02280">monster::knock_back_to()</a>, <a class="el" href="game_8cpp_source.html#l04869">game::knockback()</a>, <a class="el" href="iexamine_8cpp_source.html#l05378">iexamine::ledge()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01201">trapfunc::ledge()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">target_ui::list_friendlies_in_lof()</a>, <a class="el" href="creature_8cpp_source.html#l01339">Creature::longpull()</a>, <a class="el" href="game_8cpp_source.html#l07649">game::look_around()</a>, <a class="el" href="mission__companion_8cpp_source.html#l02803">talk_function::loot_building()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01357">spell_effect::mod_moves()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01385">spell_effect::morale()</a>, <a class="el" href="monmove_8cpp_source.html#l00865">monster::move()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00173">avatar_action::move()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02220">veh_interact::move_cursor()</a>, <a class="el" href="monster_8cpp_source.html#l02205">monster::move_effects()</a>, <a class="el" href="monmove_8cpp_source.html#l01852">monster::move_to()</a>, <a class="el" href="npcmove_8cpp_source.html#l02882">npc::move_to()</a>, <a class="el" href="mapgen__functions_8cpp_source.html#l02173">mtrap_set()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01621">spell_effect::mutate()</a>, <a class="el" href="monmove_8cpp_source.html#l01357">monster::nursebot_operate()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00832">vehicle::part_collision()</a>, <a class="el" href="iuse_8cpp_source.html#l01525">iuse::petfood()</a>, <a class="el" href="game_8cpp_source.html#l11285">game::phasing_move()</a>, <a class="el" href="iuse_8cpp_source.html#l06109">photo_def_for_camera_point()</a>, <a class="el" href="vehicle_8cpp_source.html#l00790">vehicle::precollision_check()</a>, <a class="el" href="game_8cpp_source.html#l06472">game::print_all_tile_info()</a>, <a class="el" href="monster_8cpp_source.html#l03204">monster::process_effects()</a>, <a class="el" href="monster_8cpp_source.html#l02627">monster::process_turn()</a>, <a class="el" href="ballistics_8cpp_source.html#l00201">projectile_attack()</a>, <a class="el" href="monmove_8cpp_source.html#l02094">monster::push_to()</a>, <a class="el" href="magic_8cpp_source.html#l01893">spell::random_valid_target()</a>, <a class="el" href="melee_8cpp_source.html#l01012">Character::reach_attack()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01126">spell_effect::recover_energy()</a>, <a class="el" href="npcmove_8cpp_source.html#l01215">npc::regen_ai_cache()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01593">spell_effect::remove_effect()</a>, <a class="el" href="monattack_8cpp_source.html#l01159">mattack::resurrect()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00687">route_best_workbench()</a>, <a class="el" href="monattack_8cpp_source.html#l03381">mattack::searchlight()</a>, <a class="el" href="descriptions_8cpp_source.html#l00039">seen_critter()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">target_ui::set_cursor_pos()</a>, <a class="el" href="monattack_8cpp_source.html#l00668">mattack::shriek_stun()</a>, <a class="el" href="map_8cpp_source.html#l08905">map::spawn_monsters_submap()</a>, <a class="el" href="map_8cpp_source.html#l08762">map::spawn_monsters_submap_group()</a>, <a class="el" href="iuse_8cpp_source.html#l01213">spawn_spores()</a>, <a class="el" href="character_8cpp_source.html#l11184">Character::stagger()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04992">shearing_activity_actor::start()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04384">disable_activity_actor::start()</a>, <a class="el" href="monmove_8cpp_source.html#l02233">monster::stumble()</a>, <a class="el" href="game_8cpp_source.html#l05435">game::swap_critters()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00172">swap_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l01602">Target_attributes::Target_attributes()</a>, <a class="el" href="iuse_8cpp_source.html#l03574">iuse::tazer()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="ranged_8cpp_source.html#l01308">Character::throw_item()</a>, <a class="el" href="magic__teleporter__list_8cpp_source.html#l00094">teleporter_list::translocate()</a>, <a class="el" href="monattack_8cpp_source.html#l01835">mattack::triffid_heartbeat()</a>, <a class="el" href="ranged_8cpp_source.html#l03039">target_ui::try_reacquire_target()</a>, <a class="el" href="character__escape_8cpp_source.html#l00181">Character::try_remove_grab()</a>, <a class="el" href="editmap_8cpp_source.html#l00455">editmap::uber_draw_ter()</a>, <a class="el" href="map_8cpp_source.html#l01417">map::unboard_vehicle()</a>, <a class="el" href="editmap_8cpp_source.html#l00704">editmap::update_view_with_help()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01485">spell_effect::upgrade()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l05157">deploy_tent_actor::use()</a>, <a class="el" href="npc__attack_8cpp_source.html#l00232">npc_attack_melee::use()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01575">vehicle::use_harness()</a>, <a class="el" href="game_8cpp_source.html#l11966">game::vertical_move()</a>, <a class="el" href="monattack_8cpp_source.html#l01755">mattack::vine()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l01324">spell_effect::vomit()</a>, <a class="el" href="suffer_8cpp_source.html#l00316">suffer::while_grabbed()</a>, <a class="el" href="npcmove_8cpp_source.html#l03289">npc::worker_downtime()</a>, and <a class="el" href="monattack_8cpp_source.html#l05474">mattack::zombie_fuse()</a>.</p>

</div>
</div>
<a id="a4be1ff15b126e11088a77b81359c4d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be1ff15b126e11088a77b81359c4d45">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00429">429</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> creature_at&lt;T&gt;( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( p ), allow_hallucination );</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

</div>
</div>
<a id="ad82ab6dfb34a713850dff947dd6f63b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82ab6dfb34a713850dff947dd6f63b9">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00315">315</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> mon_ptr = <a class="code" href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">find</a>( p ) ) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span>( !allow_hallucination &amp;&amp; mon_ptr-&gt;is_hallucination() ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="comment">// if we wanted to check for an NPC / player / avatar,</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// there is sometimes a monster AND an NPC/player there at the same time.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// because the NPC/player etc may be riding that monster.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">// so only return the monster if we were actually looking for a monster.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">// otherwise, keep looking for the rider.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// creature_at&lt;creature&gt; or creature_at() with no template will still default to returning monster first,</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// which is ok for the occasions where that happens.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span>( !mon_ptr-&gt;has_effect( <a class="code" href="creature__tracker_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a> ) || ( std::is_same&lt;T, monster&gt;::value ||</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                std::is_same&lt;T, Creature&gt;::value || std::is_same&lt;T, const monster&gt;::value ||</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                std::is_same&lt;T, const Creature&gt;::value ) ) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span>T *<span class="keyword">&gt;</span>( mon_ptr.get() );</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span>( !std::is_same&lt;T, npc&gt;::value &amp;&amp; !std::is_same&lt;T, const npc&gt;::value ) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="classavatar.html">avatar</a> &amp;you = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">if</span>( p == you.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() ) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span>T *<span class="keyword">&gt;</span>( &amp;you );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;cur_npc : <a class="code" href="classcreature__tracker.html#abb4095863f4cb8afcfa3b820ae0b2bff">active_npc</a> ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span>( cur_npc-&gt;get_location() == p &amp;&amp; !cur_npc-&gt;is_dead() ) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span>T *<span class="keyword">&gt;</span>( cur_npc.get() );</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="acreature__tracker_8cpp_html_a7c7651a289cc19a34456c213eeb46edc"><div class="ttname"><a href="creature__tracker_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a></div><div class="ttdeci">static const efftype_id effect_ridden(&quot;ridden&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00153">active_npc</a>, <a class="el" href="creature__tracker_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00035">find()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, and <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>.</p>

</div>
</div>
<a id="a503985f05f5b80c7c0259ac2af08059a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503985f05f5b80c7c0259ac2af08059a">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00441">441</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="classcreature__tracker.html">creature_tracker</a> *<span class="keyword">&gt;</span>( this )-&gt;creature_at&lt;T&gt;( p, allow_hallucination );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad71eb55bc7d9258b532d67f36639deea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71eb55bc7d9258b532d67f36639deea">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00309">309</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> creature_at&lt;T&gt;( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( p ), allow_hallucination );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

</div>
</div>
<a id="ac4c3a18d2a346260da06ce40981a503a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4c3a18d2a346260da06ce40981a503a">&#9670;&nbsp;</a></span>creature_at() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const T * creature_tracker::creature_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_hallucination</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00435">435</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> creature_at&lt;T&gt;( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( p ), allow_hallucination );</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

</div>
</div>
<a id="a75c007110990f3aa3e3498107b27731e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c007110990f3aa3e3498107b27731e">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::deserialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;&#160;</td>
          <td class="paramname"><em>ja</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame_8cpp_source.html#l01682">1682</a> of file <a class="el" href="savegame_8cpp_source.html">savegame.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;{</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.clear();</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.clear();</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonValue.html">JsonValue</a> jv : ja ) {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="comment">// TODO: would be nice if monster had a constructor using JsonIn or similar, so this could be one statement.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> mptr = make_shared_fast&lt;monster&gt;();</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        jv.read( *mptr );</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <a class="code" href="classcreature__tracker.html#a1c6cf67cf04ef55a7256aaa098561bce">add</a>( mptr );</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;}</div>
<div class="ttc" id="aclassJsonValue_html"><div class="ttname"><a href="classJsonValue.html">JsonValue</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00166">flexbuffer_json.h:167</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a1c6cf67cf04ef55a7256aaa098561bce"><div class="ttname"><a href="classcreature__tracker.html#a1c6cf67cf04ef55a7256aaa098561bce">creature_tracker::add</a></div><div class="ttdeci">bool add(const shared_ptr_fast&lt; monster &gt; &amp;critter)</div><div class="ttdoc">Adds the given monster to the tracker.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00068">creature_tracker.cpp:68</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8cpp_source.html#l00068">add()</a>, <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, and <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

</div>
</div>
<a id="a132c8a6504a3dc997ba0878fcc018a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132c8a6504a3dc997ba0878fcc018a93">&#9670;&nbsp;</a></span>find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; creature_tracker::find </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the monster at the given location. </p>
<p>If there is no monster, it returns a <code>nullptr</code>. Dead monsters are ignored and not returned. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00035">35</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.find( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() ) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;mon_ptr = iter-&gt;second;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">if</span>( !mon_ptr-&gt;is_dead() ) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <span class="keywordflow">return</span> mon_ptr;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00068">add()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00315">creature_at()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00832">vehicle::part_collision()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00109">update_pos()</a>.</p>

</div>
</div>
<a id="ab97b4d294e0a4f69ab0502b609a7a37b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab97b4d294e0a4f69ab0502b609a7a37b">&#9670;&nbsp;</a></span>find_reachable() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FactionPredicateFn , typename CreaturePredicateFn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCreature.html">Creature</a> * creature_tracker::find_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FactionPredicateFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>faction_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CreaturePredicateFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>creature_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the reachable creature matching the given predicates. </p>
<ul>
<li>FactionPredicateFn: bool(const mfaction_id&amp;)</li>
<li>CreaturePredicateFn: bool(Creature*) If there is no creature, it returns a <code>nullptr</code>. Dead monsters are ignored and not returned. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00189">189</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classcreature__tracker.html#af97e6df73782a6c7082537eda7788dca">flood_fill_zone</a>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a> );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> map_iter = <a class="code" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a>.find( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>.get_reachable_zone() );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span>( map_iter != <a class="code" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a>.end() ) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span>&amp; [<a class="code" href="classfaction.html">faction</a>, creatures] : map_iter-&gt;second ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">if</span>( !faction_fn( <a class="code" href="classfaction.html">faction</a> ) ) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">for</span>( std::size_t i = 0; i &lt; creatures.size(); ) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classCreature.html">Creature</a> *<a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> = creatures[i].<a class="code" href="namespacerotatable__symbols.html#a7d2f855a39674de736a7829423a577f4">get</a>(); <a class="code" href="classcreature__tracker.html#afaf2d86acd69446c877f61f03a46b439">is_present</a>( <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> ) ) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="keywordflow">if</span>( creature_fn( <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> ) ) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    ++i;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="keyword">using</span> <a class="code" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <a class="code" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">swap</a>( creatures[i], creatures.back() );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    creatures.pop_back();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_af97e6df73782a6c7082537eda7788dca"><div class="ttname"><a href="classcreature__tracker.html#af97e6df73782a6c7082537eda7788dca">creature_tracker::flood_fill_zone</a></div><div class="ttdeci">void flood_fill_zone(const Creature &amp;origin)</div><div class="ttdoc">This is lazily evaluated on demand.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00353">creature_tracker.cpp:353</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_afaf2d86acd69446c877f61f03a46b439"><div class="ttname"><a href="classcreature__tracker.html#afaf2d86acd69446c877f61f03a46b439">creature_tracker::is_present</a></div><div class="ttdeci">bool is_present(Creature *creature) const</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00201">creature_tracker.cpp:201</a></div></div>
<div class="ttc" id="aclassfaction_html"><div class="ttname"><a href="classfaction.html">faction</a></div><div class="ttdef"><b>Definition:</b> <a href="faction_8h_source.html#l00126">faction.h:127</a></div></div>
<div class="ttc" id="anamespacecata_html_a097b137e977a6b843c0dada2c8b19611"><div class="ttname"><a href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">cata::swap</a></div><div class="ttdeci">void swap(colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;a, colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;b) COLONY_NOEXCEPT_SWAP(element_allocator_type)</div><div class="ttdoc">Swaps colony A's contents with that of colony B.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l03505">colony.h:3505</a></div></div>
<div class="ttc" id="anamespacecoords_html_ad99808a305ad40299e592d1266bed4a7"><div class="ttname"><a href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">coords::origin</a></div><div class="ttdeci">origin</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00065">coordinates.h:65</a></div></div>
<div class="ttc" id="anamespacerotatable__symbols_html_a7d2f855a39674de736a7829423a577f4"><div class="ttname"><a href="namespacerotatable__symbols.html#a7d2f855a39674de736a7829423a577f4">rotatable_symbols::get</a></div><div class="ttdeci">uint32_t get(const uint32_t &amp;symbol, int n)</div><div class="ttdef"><b>Definition:</b> <a href="rotatable__symbols_8cpp_source.html#l00091">rotatable_symbols.cpp:91</a></div></div>
<div class="ttc" id="aomdata_8h_html_a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf"><div class="ttname"><a href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">oter_travel_cost_type::other</a></div><div class="ttdeci">@ other</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00171">creatures_by_zone_and_faction_</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00353">flood_fill_zone()</a>, <a class="el" href="rotatable__symbols_8cpp_source.html#l00091">rotatable_symbols::get()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00201">is_present()</a>, <a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, and <a class="el" href="colony_8h_source.html#l03505">cata::swap()</a>.</p>

</div>
</div>
<a id="a6846034d343a122b21657e6ecd8268c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6846034d343a122b21657e6ecd8268c6">&#9670;&nbsp;</a></span>find_reachable() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PredicateFn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCreature.html">Creature</a> * creature_tracker::find_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PredicateFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>predicate_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the reachable creature matching the given predicate. </p>
<ul>
<li>CreaturePredicateFn: bool(Creature*) If there is no creature, it returns a <code>nullptr</code>. Dead monsters are ignored and not returned. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00181">181</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">find_reachable</a>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>, []( <span class="keyword">const</span> <a class="code" href="classint__id.html">mfaction_id</a> &amp; ) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }, std::forward&lt;PredicateFn&gt;( predicate_fn ) );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="aclasscreature__tracker_html_a6846034d343a122b21657e6ecd8268c6"><div class="ttname"><a href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">creature_tracker::find_reachable</a></div><div class="ttdeci">Creature * find_reachable(const Creature &amp;origin, PredicateFn &amp;&amp;predicate_fn)</div><div class="ttdoc">Returns the reachable creature matching the given predicate.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00181">creature_tracker.h:181</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; monfaction &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="creature__tracker_8h_source.html#l00218">for_each_reachable()</a>, and <a class="el" href="monattack_8cpp_source.html#l04263">mattack::parrot_at_danger()</a>.</p>

</div>
</div>
<a id="af97e6df73782a6c7082537eda7788dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97e6df73782a6c7082537eda7788dca">&#9670;&nbsp;</a></span>flood_fill_zone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::flood_fill_zone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is lazily evaluated on demand. </p>
<p>Each creature in a zone is visited as it flood fills, then the zone number is incremented. At the end all creatures in the same zone will have the same zone number assigned, which can be used to have creatures in different zones ignore each other very cheaply. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00353">353</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classcreature__tracker.html#a7968519515f1fcdb07e710d69314eb2c">dirty_</a> ) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a>.clear();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">zone_tick_</a> = <a class="code" href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">zone_tick_</a> &gt; 0 ? -1 : 1;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a> = 1;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <a class="code" href="classcreature__tracker.html#a7968519515f1fcdb07e710d69314eb2c">dirty_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// This check insures we only flood fill when the target monster has an uninitialized zone,</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// or if it has a zone from last turn.  In other words it only triggers on</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// the first monster in a zone each turn. We can detect this because the sign</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// of the zone numbers changes on every invalidation.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">int</span> old_zone = <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>.get_reachable_zone();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Compare with zone_tick == old_zone &amp;&amp; old_zone != 0</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span>( old_zone * <a class="code" href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">zone_tick_</a> &gt; 0 ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;<a class="code" href="classmap.html">map</a> = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="namespaceff.html#af7323396940dc777af93e0c74b82397c">ff::flood_fill_visit_10_connected</a>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>.pos_bub(),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    [&amp;<a class="code" href="classmap.html">map</a>]( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp; loc, <span class="keywordtype">int</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> ) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        if( direction == 0 ) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            return map.inbounds( loc ) &amp;&amp; ( map.is_transparent_wo_fields( loc.raw() ) ||</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                            map.passable( loc ) );</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> == 1 ) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            const maptile &amp;up = map.maptile_at( loc );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            const ter_t &amp;up_ter = up.get_ter_t();</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            if( up_ter.id.is_null() ) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                return false;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span>( ( ( up_ter.movecost != 0 &amp;&amp; <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066">up</a>.get_furn_t().movecost &gt;= 0 ) ||</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                  <a class="code" href="classmap.html">map</a>.<a class="code" href="classmap.html#a1121f4707b71b10185a6f8fa2555dca5">is_transparent_wo_fields</a>( loc.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() ) ) &amp;&amp;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                ( up_ter.has_flag( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a> ) ||</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                  up_ter.has_flag( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab09f2463f4ce060d051439b5535a47e6">ter_furn_flag::TFLAG_GOES_DOWN</a> ) ) ) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                return true;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> == -1 ) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keyword">const</span> <a class="code" href="classmaptile__impl.html">maptile</a> &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066">up</a> = <a class="code" href="classmap.html">map</a>.<a class="code" href="classmap.html#ac3badcb7b80602246664fa3671a840ba">maptile_at</a>( loc + <a class="code" href="point_8h.html#aff85224e35f4fc5c8ac34e20a1007c4c">tripoint_above</a> );</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keyword">const</span> <a class="code" href="structter__t.html">ter_t</a> &amp;up_ter = <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066">up</a>.get_ter_t();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">if</span>( up_ter.<a class="code" href="structter__t.html#a876ecdb9de153e3d864ee221ed63bd45">id</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                return false;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keyword">const</span> <a class="code" href="classmaptile__impl.html">maptile</a> &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a324c3b7a1136cdb243b39859e2bd0904">down</a> = <a class="code" href="classmap.html">map</a>.<a class="code" href="classmap.html#ac3badcb7b80602246664fa3671a840ba">maptile_at</a>( loc );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keyword">const</span> <a class="code" href="structter__t.html">ter_t</a> &amp;down_ter = <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066">up</a>.get_ter_t();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span>( down_ter.id.is_null() ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                return false;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">if</span>( ( ( down_ter.movecost != 0 &amp;&amp; <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a324c3b7a1136cdb243b39859e2bd0904">down</a>.get_furn_t().movecost &gt;= 0 ) ||</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                  <a class="code" href="classmap.html">map</a>.<a class="code" href="classmap.html#a1121f4707b71b10185a6f8fa2555dca5">is_transparent_wo_fields</a>( loc.raw() ) ) &amp;&amp;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                ( up_ter.<a class="code" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a> ) ||</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                  up_ter.<a class="code" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab09f2463f4ce060d051439b5535a47e6">ter_furn_flag::TFLAG_GOES_DOWN</a> ) ) ) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                return true;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    },</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp; loc ) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html">Creature</a> *<a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a> = this-&gt;creature_at&lt;Creature&gt;( loc, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> ptr = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( *<a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a> ) ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a> * <a class="code" href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">zone_tick_</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <a class="code" href="classcreature__tracker.html#adb034b135465050876f23d3dd7398f7c">creatures_by_zone_and_faction_</a>[n][<a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;get_monster_faction()].emplace_back( std::move( ptr ) );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;set_reachable_zone( n );</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    } );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a> == <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::numeric_limits&lt;int&gt;::max</a>() ) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a> = 1;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">zone_number_</a>++;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::reality_bubble, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a1fcedbcb6907afb5f4613928188a387f"><div class="ttname"><a href="classcreature__tracker.html#a1fcedbcb6907afb5f4613928188a387f">creature_tracker::zone_tick_</a></div><div class="ttdeci">int zone_tick_</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00168">creature_tracker.h:168</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_a7968519515f1fcdb07e710d69314eb2c"><div class="ttname"><a href="classcreature__tracker.html#a7968519515f1fcdb07e710d69314eb2c">creature_tracker::dirty_</a></div><div class="ttdeci">bool dirty_</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00167">creature_tracker.h:167</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_ad90e53f1204d8fd15c0fc2a416fba96e"><div class="ttname"><a href="classcreature__tracker.html#ad90e53f1204d8fd15c0fc2a416fba96e">creature_tracker::zone_number_</a></div><div class="ttdeci">int zone_number_</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00169">creature_tracker.h:169</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a1121f4707b71b10185a6f8fa2555dca5"><div class="ttname"><a href="classmap.html#a1121f4707b71b10185a6f8fa2555dca5">map::is_transparent_wo_fields</a></div><div class="ttdeci">bool is_transparent_wo_fields(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="lightmap_8cpp_source.html#l00654">lightmap.cpp:654</a></div></div>
<div class="ttc" id="aclassmap_html_ac3badcb7b80602246664fa3671a840ba"><div class="ttname"><a href="classmap.html#ac3badcb7b80602246664fa3671a840ba">map::maptile_at</a></div><div class="ttdeci">const_maptile maptile_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00386">map.cpp:386</a></div></div>
<div class="ttc" id="aclassmaptile__impl_html"><div class="ttname"><a href="classmaptile__impl.html">maptile_impl</a></div><div class="ttdoc">A wrapper for a submap point.</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00332">submap.h:333</a></div></div>
<div class="ttc" id="adescriptions_8cpp_html_aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72"><div class="ttname"><a href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">description_target::creature</a></div><div class="ttdeci">@ creature</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ab09f2463f4ce060d051439b5535a47e6"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab09f2463f4ce060d051439b5535a47e6">ter_furn_flag::TFLAG_GOES_DOWN</a></div><div class="ttdeci">@ TFLAG_GOES_DOWN</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a></div><div class="ttdeci">@ TFLAG_NO_FLOOR</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="anamespaceff_html_af7323396940dc777af93e0c74b82397c"><div class="ttname"><a href="namespaceff.html#af7323396940dc777af93e0c74b82397c">ff::flood_fill_visit_10_connected</a></div><div class="ttdeci">void flood_fill_visit_10_connected(const tripoint_bub_ms &amp;starting_point, UnaryPredicate predicate, UnaryVisitor visitor)</div><div class="ttdef"><b>Definition:</b> <a href="flood__fill_8h_source.html#l00079">flood_fill.h:79</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a27f7537397c6aaabaac683563658a066">keycode::up</a></div><div class="ttdeci">@ up</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00100">input.h:100</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7a324c3b7a1136cdb243b39859e2bd0904"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a324c3b7a1136cdb243b39859e2bd0904">keycode::down</a></div><div class="ttdeci">@ down</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00099">input.h:99</a></div></div>
<div class="ttc" id="apoint_8h_html_aff85224e35f4fc5c8ac34e20a1007c4c"><div class="ttname"><a href="point_8h.html#aff85224e35f4fc5c8ac34e20a1007c4c">tripoint_above</a></div><div class="ttdeci">constexpr tripoint tripoint_above</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00271">point.h:271</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a630778707744fb147436b9aa0c370a7e"><div class="ttname"><a href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">map_data_common_t::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00534">mapdata.h:534</a></div></div>
<div class="ttc" id="astructter__t_html"><div class="ttname"><a href="structter__t.html">ter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00598">mapdata.h:598</a></div></div>
<div class="ttc" id="astructter__t_html_a876ecdb9de153e3d864ee221ed63bd45"><div class="ttname"><a href="structter__t.html#a876ecdb9de153e3d864ee221ed63bd45">ter_t::id</a></div><div class="ttdeci">ter_str_id id</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00602">mapdata.h:602</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00171">creatures_by_zone_and_faction_</a>, <a class="el" href="creature__tracker_8h_source.html#l00167">dirty_</a>, <a class="el" href="flood__fill_8h_source.html#l00079">ff::flood_fill_visit_10_connected()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="lightmap_8cpp_source.html#l00654">map::is_transparent_wo_fields()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab09f2463f4ce060d051439b5535a47e6">TFLAG_GOES_DOWN</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">TFLAG_NO_FLOOR</a>, <a class="el" href="input_8h_source.html#l00100">keycode::up</a>, <a class="el" href="creature__tracker_8h_source.html#l00169">zone_number_</a>, and <a class="el" href="creature__tracker_8h_source.html#l00168">zone_tick_</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8h_source.html#l00189">find_reachable()</a>.</p>

</div>
</div>
<a id="ac83d8484e9b8e5793335412be9ce4355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83d8484e9b8e5793335412be9ce4355">&#9670;&nbsp;</a></span>for_each_reachable() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FactionPredicateFn , typename CreatureVisitFn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::for_each_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FactionPredicateFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>faction_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CreatureVisitFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>creature_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visits all reachable creatures using the given functor matching the given predicate. </p>
<ul>
<li>FactionPredicateFn: bool(const mfaction_id&amp;)</li>
<li>CreatureVisitFn: void(Creature*) Dead monsters are ignored and not visited. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00227">227</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">find_reachable</a>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>, std::forward&lt;FactionPredicateFn&gt;( faction_fn ), [&amp;creature_fn](</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="classCreature.html">Creature</a> * <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> ) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        creature_fn( <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    } );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00181">find_reachable()</a>, and <a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.</p>

</div>
</div>
<a id="a9790b8a1e05d0c5cff55a8aaeef80d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9790b8a1e05d0c5cff55a8aaeef80d94">&#9670;&nbsp;</a></span>for_each_reachable() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VisitFn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::for_each_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VisitFn &amp;&amp;&#160;</td>
          <td class="paramname"><em>visit_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visits all reachable creatures using the given functor. </p>
<ul>
<li>VisitFn: void(Creature*) Dead monsters are ignored and not visited. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00218">218</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="classcreature__tracker.html#a6846034d343a122b21657e6ecd8268c6">find_reachable</a>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a>, [&amp;visit_fn]( <a class="code" href="classCreature.html">Creature</a> * <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> ) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        visit_fn( <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    } );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00181">find_reachable()</a>, and <a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.</p>

<p class="reference">Referenced by <a class="el" href="monmove_8cpp_source.html#l00517">monster::plan()</a>.</p>

</div>
</div>
<a id="a19843aa9774855fa297bfabcc674a875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19843aa9774855fa297bfabcc674a875">&#9670;&nbsp;</a></span>from_temporary_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; <a class="el" href="classmonster.html">monster</a> &gt; creature_tracker::from_temporary_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00059">59</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <span class="keywordtype">id</span> ) &lt; <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.size() ) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>[<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>];</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="basecamp_8h_source.html#l00105">base_camps::id</a>, and <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

</div>
</div>
<a id="ae8df3465436c9b1b8292d5447b35c159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8df3465436c9b1b8292d5447b35c159">&#9670;&nbsp;</a></span>get_monsters_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classmonster.html">monster</a>&gt; &gt;&amp; creature_tracker::get_monsters_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00128">128</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                                             {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

</div>
</div>
<a id="a46ff1086c969d8f66559da33211d889e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ff1086c969d8f66559da33211d889e">&#9670;&nbsp;</a></span>invalidate_reachability_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::invalidate_reachability_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00138">138</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                             {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <a class="code" href="classcreature__tracker.html#a7968519515f1fcdb07e710d69314eb2c">dirty_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00167">dirty_</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00184">clear()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00280">map::set_transparency_cache_dirty()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00222">swap_positions()</a>, and <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>.</p>

</div>
</div>
<a id="afaf2d86acd69446c877f61f03a46b439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaf2d86acd69446c877f61f03a46b439">&#9670;&nbsp;</a></span>is_present()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool creature_tracker::is_present </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>creature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00201">201</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;is_monster() ) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span>( <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.find( <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;get_location() );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() ) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classCreature.html">Creature</a> *<span class="keyword">&gt;</span>( iter-&gt;second.get() ) == <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a> ) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">return</span> !iter-&gt;second-&gt;is_dead();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;is_avatar() ) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;is_npc() ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;npc&gt;</a> &amp;cur_npc : <a class="code" href="classcreature__tracker.html#abb4095863f4cb8afcfa3b820ae0b2bff">active_npc</a> ) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classCreature.html">Creature</a> *<span class="keyword">&gt;</span>( cur_npc.get() ) == <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a> ) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keywordflow">return</span> !cur_npc-&gt;is_dead();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00153">active_npc</a>, <a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, and <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8h_source.html#l00189">find_reachable()</a>.</p>

</div>
</div>
<a id="ad28b133fae20c78b8b1d00e35b91e171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28b133fae20c78b8b1d00e35b91e171">&#9670;&nbsp;</a></span>kill_marked_for_death()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool creature_tracker::kill_marked_for_death </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kills 0 hp monsters. </p>
<p>Returns if it killed any. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00263">263</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// Important: `Creature::die` must not be called after creature objects (NPCs, monsters) have</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// been removed, the dying creature could still have a pointer (the killer) to another creature.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">bool</span> monster_is_dead = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Copy the list so we can iterate the copy safely *and* add new monsters from within monster::die</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// This happens for example with blob monsters (they split into two smaller monsters).</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> copy = <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;mon_ptr : copy ) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( mon_ptr );</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">if</span>( !critter.<a class="code" href="classmonster.html#af033816139df1dfa154c27b199b51da6">is_dead</a>() ) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="creature__tracker_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a>( <a class="code" href="debug_8h.html#ab658e6d84759440dbf3c890446075395ab51d2329abb542af139bd358206609ba">D_INFO</a> ) &lt;&lt; <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;cleanup_dead: critter at %s hp:%d %s&quot;</span>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                        critter.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>().<a class="code" href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">to_string_writable</a>(),</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                        critter.<a class="code" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>(), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        critter.<a class="code" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        monster_is_dead = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> monster_is_dead;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
<div class="ttc" id="aclassmonster_html_a2d0e466b9d25796cd99402ddd5d3ce20"><div class="ttname"><a href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">monster::get_hp</a></div><div class="ttdeci">int get_hp(const bodypart_id &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03743">monster.cpp:3743</a></div></div>
<div class="ttc" id="aclassmonster_html_a7cb9d9786d11c2c0926d3482d3f51ffe"><div class="ttname"><a href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">monster::name</a></div><div class="ttdeci">std::string name(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00722">monster.cpp:722</a></div></div>
<div class="ttc" id="aclassmonster_html_af033816139df1dfa154c27b199b51da6"><div class="ttname"><a href="classmonster.html#af033816139df1dfa154c27b199b51da6">monster::is_dead</a></div><div class="ttdeci">bool is_dead() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03580">monster.cpp:3580</a></div></div>
<div class="ttc" id="acreature__tracker_8cpp_html_a49bc164f30e64702250d2cbea09bf86c"><div class="ttname"><a href="creature__tracker_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a></div><div class="ttdeci">#define dbg(x)</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00029">creature_tracker.cpp:29</a></div></div>
<div class="ttc" id="adebug_8h_html_ab658e6d84759440dbf3c890446075395ab51d2329abb542af139bd358206609ba"><div class="ttname"><a href="debug_8h.html#ab658e6d84759440dbf3c890446075395ab51d2329abb542af139bd358206609ba">D_INFO</a></div><div class="ttdeci">@ D_INFO</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00140">debug.h:140</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="debug_8h_source.html#l00140">D_INFO</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00029">dbg</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="monster_8cpp_source.html#l03743">monster::get_hp()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="monster_8cpp_source.html#l03580">monster::is_dead()</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="coordinates_8h_source.html#l00124">coords::coord_point_base&lt; Point &gt;::to_string_writable()</a>.</p>

</div>
</div>
<a id="a41e82dd1d9b95c29b1e0d6df277561e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41e82dd1d9b95c29b1e0d6df277561e1">&#9670;&nbsp;</a></span>rebuild_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::rebuild_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00193">193</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.clear();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;mon_ptr : <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a> ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>[mon_ptr-&gt;get_location()] = mon_ptr;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, and <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00109">update_pos()</a>.</p>

</div>
</div>
<a id="a660abe140bedb74bf62a6bf10039da9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660abe140bedb74bf62a6bf10039da9f">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::remove </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>critter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the given monster from the <a class="el" href="classCreature.html">Creature</a> tracker, adjusting other entries as needed. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00168">168</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.begin(), <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end(),</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    [&amp;]( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;ptr ) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        return ptr.get() == &amp;critter;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    } );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end() ) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to remove invalid monster %s&quot;</span>, critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">remove_from_location_map</a>( critter );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">removed_this_turn_</a>.emplace( *iter );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.erase( iter );</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="aclasscreature__tracker_html_abcd63484ac41bef4e2c513372c08c627"><div class="ttname"><a href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">creature_tracker::remove_from_location_map</a></div><div class="ttdeci">void remove_from_location_map(const monster &amp;critter)</div><div class="ttdoc">Remove the monsters entry in monsters_by_location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00149">creature_tracker.cpp:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00149">remove_from_location_map()</a>, and <a class="el" href="creature__tracker_8h_source.html#l00162">removed_this_turn_</a>.</p>

</div>
</div>
<a id="a5a682bfcccccaf8728cfa0a75658f9a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a682bfcccccaf8728cfa0a75658f9a6">&#9670;&nbsp;</a></span>remove_dead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::remove_dead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes dead monsters from. </p>
<p>Their pointers are invalidated. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00287">287</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// Can&#39;t use game::all_monsters() as it would not contain *dead* monsters.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.begin(); iter != <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end(); ) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> critter = iter-&gt;get();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span>( critter-&gt;<a class="code" href="classmonster.html#af033816139df1dfa154c27b199b51da6">is_dead</a>() ) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">remove_from_location_map</a>( *critter );</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            iter = <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.erase( iter );</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            ++iter;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="classcreature__tracker.html#a782a84081de997419c083cf8cf612a18">removed_this_turn_</a>.clear();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l03580">monster::is_dead()</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00149">remove_from_location_map()</a>, and <a class="el" href="creature__tracker_8h_source.html#l00162">removed_this_turn_</a>.</p>

</div>
</div>
<a id="abcd63484ac41bef4e2c513372c08c627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcd63484ac41bef4e2c513372c08c627">&#9670;&nbsp;</a></span>remove_from_location_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::remove_from_location_map </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>critter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the monsters entry in <a class="el" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00149">149</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> pos_iter = <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.find( critter.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span>( pos_iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() &amp;&amp; pos_iter-&gt;second.get() == &amp;critter ) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.erase( pos_iter );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// When it&#39;s not in the map at its current location, it might still be there under,</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// another location, so look for it.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.begin(), <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end(),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    [&amp;]( <span class="keyword">const</span> decltype( <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a> )::value_type &amp; v ) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">return</span> v.second.get() == &amp;critter;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    } );</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() ) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.erase( iter );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, and <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00168">remove()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00287">remove_dead()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00109">update_pos()</a>.</p>

</div>
</div>
<a id="a9496661839e50fbd66f944e5c2d3bcb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9496661839e50fbd66f944e5c2d3bcb9">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>jsout</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame_8cpp_source.html#l01694">1694</a> of file <a class="el" href="savegame_8cpp_source.html">savegame.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;{</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;monster_ptr : <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a> ) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        jsout.<a class="code" href="classJsonOut.html#a4b8c8e50e3be57e737ae971ecf2c3fd5">write</a>( *monster_ptr );</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html_a44cdd853d4c6913b37caa9f0131eeff2"><div class="ttname"><a href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">JsonOut::end_array</a></div><div class="ttdeci">void end_array()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02346">json.cpp:2346</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4550e2036b904c4d4a90e440dd41c684"><div class="ttname"><a href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">JsonOut::start_array</a></div><div class="ttdeci">void start_array(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02335">json.cpp:2335</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4b8c8e50e3be57e737ae971ecf2c3fd5"><div class="ttname"><a href="classJsonOut.html#a4b8c8e50e3be57e737ae971ecf2c3fd5">JsonOut::write</a></div><div class="ttdeci">void write(T val)</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00776">json.h:776</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l02346">JsonOut::end_array()</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="json_8cpp_source.html#l02335">JsonOut::start_array()</a>, and <a class="el" href="json_8h_source.html#l00776">JsonOut::write()</a>.</p>

</div>
</div>
<a id="a564750229d77af829f70477ec8426b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a564750229d77af829f70477ec8426b16">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t creature_tracker::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00104">104</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.size();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

</div>
</div>
<a id="a7337a8721c6b217260e5cb8f2e2882a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7337a8721c6b217260e5cb8f2e2882a7">&#9670;&nbsp;</a></span>swap_positions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void creature_tracker::swap_positions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Swaps the positions of two monsters. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00222">222</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>( first.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() == <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.get_location() ) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span>( first.<a class="code" href="classCreature.html#a0e61868823c3214f844264077d60dc86">get_reachable_zone</a>() != <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.get_reachable_zone() ) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="classcreature__tracker.html#a46ff1086c969d8f66559da33211d889e">invalidate_reachability_cache</a>();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Either of them may be invalid!</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> first_iter = <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.find( first.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() );</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> second_iter = <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.find( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.get_location() );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// implied: first_iter != second_iter</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> first_ptr;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span>( first_iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() ) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        first_ptr = first_iter-&gt;second;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.erase( first_iter );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> second_ptr;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span>( second_iter != <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.end() ) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        second_ptr = second_iter-&gt;second;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.erase( second_iter );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// implied: (first_ptr != second_ptr) or (first_ptr == nullptr &amp;&amp; second_ptr == nullptr)</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.get_location();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.spawn( first.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    first.<a class="code" href="classmonster.html#ac5b4a624cd62dba138b7e882d694a3b5">spawn</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// If the pointers have been taken out of the list, put them back in.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span>( first_ptr ) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>[first.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>()] = first_ptr;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span>( second_ptr ) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>[<a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>.get_location()] = second_ptr;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="ttc" id="acalendar_8h_html_a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612"><div class="ttname"><a href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a></div><div class="ttdeci">@ second</div></div>
<div class="ttc" id="aclassCreature_html_a0e61868823c3214f844264077d60dc86"><div class="ttname"><a href="classCreature.html#a0e61868823c3214f844264077d60dc86">Creature::get_reachable_zone</a></div><div class="ttdeci">int get_reachable_zone() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00764">creature.h:764</a></div></div>
<div class="ttc" id="aclassmonster_html_ac5b4a624cd62dba138b7e882d694a3b5"><div class="ttname"><a href="classmonster.html#ac5b4a624cd62dba138b7e882d694a3b5">monster::spawn</a></div><div class="ttdeci">void spawn(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00705">monster.cpp:705</a></div></div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">bodygraph_var::temp</a></div><div class="ttdeci">@ temp</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="creature_8h_source.html#l00764">Creature::get_reachable_zone()</a>, <a class="el" href="creature__tracker_8h_source.html#l00138">invalidate_reachability_cache()</a>, <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, <a class="el" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="monster_8cpp_source.html#l00705">monster::spawn()</a>, and <a class="el" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.</p>

</div>
</div>
<a id="a06db2c2818ada508bd9c7eac4ab4dacc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06db2c2818ada508bd9c7eac4ab4dacc">&#9670;&nbsp;</a></span>temporary_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int creature_tracker::temporary_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>critter</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a temporary id of the given monster (which must exist in the tracker). </p>
<p>The id is valid until monsters are added or removed from the tracker. The id remains valid through serializing and deserializing. Use <a class="el" href="classcreature__tracker.html#a19843aa9774855fa297bfabcc674a875">from_temporary_id</a> to get the monster pointer back. (The later may return a nullptr if the given id is not valid.) </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00047">47</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.begin(), <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end(),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    [&amp;]( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;ptr ) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        return ptr.get() == &amp;critter;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    } );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end() ) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> iter - <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.begin();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>.</p>

</div>
</div>
<a id="a03b71117cc077f4ee774feb00ea8bddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b71117cc077f4ee774feb00ea8bddc">&#9670;&nbsp;</a></span>update_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool creature_tracker::update_pos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>critter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>old_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>new_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the position of the given monster to the given point. </p>
<p>Returns whether the operation was successful. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8cpp_source.html#l00109">109</a> of file <a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#af033816139df1dfa154c27b199b51da6">is_dead</a>() ) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">// find ignores dead critters anyway, changing their position in the</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// monsters_by_location map is useless.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="classcreature__tracker.html#abcd63484ac41bef4e2c513372c08c627">remove_from_location_map</a>( critter );</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> new_critter_ptr = <a class="code" href="classcreature__tracker.html#a132c8a6504a3dc997ba0878fcc018a93">find</a>( new_pos ) ) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">auto</span> &amp;othermon = *new_critter_ptr;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span>( othermon.is_hallucination() ) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            othermon.die( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;update_zombie_pos: wanted to move %s to %s, but new location already has %s&quot;</span>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                      critter.<a class="code" href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">disp_name</a>(), new_pos.<a class="code" href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">to_string_writable</a>(), othermon.disp_name() );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.begin(), <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end(),</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    [&amp;]( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;monster&gt;</a> &amp;ptr ) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        return ptr.get() == &amp;critter;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    } );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="classcreature__tracker.html#a3afd4355965b93d02eae4012c5234a23">monsters_list</a>.end() ) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>.erase( old_pos );</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="classcreature__tracker.html#ad574d46886e339278e37f56adf6b8866">monsters_by_location</a>[new_pos] = *iter;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// We&#39;re changing the x/y/z coordinates of a zombie that hasn&#39;t been added</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">// to the game yet. `add` will update monsters_by_location for us.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;update_zombie_pos: no %s at %s (moving to %s)&quot;</span>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                  critter.<a class="code" href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">disp_name</a>(), old_pos.<a class="code" href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">to_string_writable</a>(), new_pos.<a class="code" href="classcoords_1_1coord__point__base.html#adffa74cccb8c246a8b12eeca632b1642">to_string_writable</a>() );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// Rebuild cache in case the monster actually IS in the game, just bugged</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classcreature__tracker.html#a41e82dd1d9b95c29b1e0d6df277561e1">rebuild_cache</a>();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="ttc" id="aclasscreature__tracker_html_a41e82dd1d9b95c29b1e0d6df277561e1"><div class="ttname"><a href="classcreature__tracker.html#a41e82dd1d9b95c29b1e0d6df277561e1">creature_tracker::rebuild_cache</a></div><div class="ttdeci">void rebuild_cache()</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00193">creature_tracker.cpp:193</a></div></div>
<div class="ttc" id="aclassmonster_html_af3444e4763b1dd53e75c5ea50fd8ba9f"><div class="ttname"><a href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">monster::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00775">monster.cpp:775</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="monster_8cpp_source.html#l00775">monster::disp_name()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00035">find()</a>, <a class="el" href="monster_8cpp_source.html#l03580">monster::is_dead()</a>, <a class="el" href="creature__tracker_8h_source.html#l00156">monsters_by_location</a>, <a class="el" href="creature__tracker_8h_source.html#l00154">monsters_list</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00193">rebuild_cache()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00149">remove_from_location_map()</a>, and <a class="el" href="coordinates_8h_source.html#l00124">coords::coord_point_base&lt; Point &gt;::to_string_writable()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abb4095863f4cb8afcfa3b820ae0b2bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb4095863f4cb8afcfa3b820ae0b2bff">&#9670;&nbsp;</a></span>active_npc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classnpc.html">npc</a>&gt; &gt; creature_tracker::active_npc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00153">153</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8h_source.html#l00097">clear_npcs()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00315">creature_at()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00201">is_present()</a>.</p>

</div>
</div>
<a id="adb034b135465050876f23d3dd7398f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb034b135465050876f23d3dd7398f7c">&#9670;&nbsp;</a></span>creatures_by_zone_and_faction_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, std::unordered_map&lt;<a class="el" href="npc_8h.html#a3472a8986ea9d6078ab02871b7791add">mfaction_id</a>, std::vector&lt;<a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classCreature.html">Creature</a>&gt; &gt; &gt; &gt; creature_tracker::creatures_by_zone_and_faction_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00171">171</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00184">clear()</a>, <a class="el" href="creature__tracker_8h_source.html#l00189">find_reachable()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00353">flood_fill_zone()</a>.</p>

</div>
</div>
<a id="a7968519515f1fcdb07e710d69314eb2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7968519515f1fcdb07e710d69314eb2c">&#9670;&nbsp;</a></span>dirty_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool creature_tracker::dirty_ = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00167">167</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00353">flood_fill_zone()</a>, and <a class="el" href="creature__tracker_8h_source.html#l00138">invalidate_reachability_cache()</a>.</p>

</div>
</div>
<a id="ab0b69bbcbf72fd4597689c3778a28643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b69bbcbf72fd4597689c3778a28643">&#9670;&nbsp;</a></span>game</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend creature_tracker::game</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00173">173</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

</div>
</div>
<a id="ad574d46886e339278e37f56adf6b8866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad574d46886e339278e37f56adf6b8866">&#9670;&nbsp;</a></span>monsters_by_location</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a>, <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classmonster.html">monster</a>&gt; &gt; creature_tracker::monsters_by_location</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00156">156</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00068">add()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00184">clear()</a>, <a class="el" href="savegame_8cpp_source.html#l01682">deserialize()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00035">find()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00201">is_present()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00193">rebuild_cache()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00149">remove_from_location_map()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00222">swap_positions()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00109">update_pos()</a>.</p>

</div>
</div>
<a id="a3afd4355965b93d02eae4012c5234a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3afd4355965b93d02eae4012c5234a23">&#9670;&nbsp;</a></span>monsters_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classmonster.html">monster</a>&gt; &gt; creature_tracker::monsters_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00154">154</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00068">add()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00184">clear()</a>, <a class="el" href="savegame_8cpp_source.html#l01682">deserialize()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00059">from_temporary_id()</a>, <a class="el" href="creature__tracker_8h_source.html#l00128">get_monsters_list()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00263">kill_marked_for_death()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00193">rebuild_cache()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00168">remove()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00287">remove_dead()</a>, <a class="el" href="savegame_8cpp_source.html#l01694">serialize()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00104">size()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00047">temporary_id()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00109">update_pos()</a>.</p>

</div>
</div>
<a id="a782a84081de997419c083cf8cf612a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a782a84081de997419c083cf8cf612a18">&#9670;&nbsp;</a></span>removed_this_turn_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;<a class="el" href="classmonster.html">monster</a>&gt; &gt; creature_tracker::removed_this_turn_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creatures that get removed via <a class="el" href="classcreature__tracker.html#a660abe140bedb74bf62a6bf10039da9f">remove</a> are stored here until the end of the turn. </p>
<p>This keeps the objects valid and they can still be accessed instead of causing UB. </p>

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00162">162</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00184">clear()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00168">remove()</a>, and <a class="el" href="creature__tracker_8cpp_source.html#l00287">remove_dead()</a>.</p>

</div>
</div>
<a id="ad90e53f1204d8fd15c0fc2a416fba96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad90e53f1204d8fd15c0fc2a416fba96e">&#9670;&nbsp;</a></span>zone_number_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int creature_tracker::zone_number_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00169">169</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00353">flood_fill_zone()</a>.</p>

</div>
</div>
<a id="a1fcedbcb6907afb5f4613928188a387f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fcedbcb6907afb5f4613928188a387f">&#9670;&nbsp;</a></span>zone_tick_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int creature_tracker::zone_tick_ = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="creature__tracker_8h_source.html#l00168">168</a> of file <a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature__tracker_8cpp_source.html#l00353">flood_fill_zone()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="creature__tracker_8h_source.html">creature_tracker.h</a></li>
<li>src/<a class="el" href="creature__tracker_8cpp_source.html">creature_tracker.cpp</a></li>
<li>src/<a class="el" href="savegame_8cpp_source.html">savegame.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:37 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
