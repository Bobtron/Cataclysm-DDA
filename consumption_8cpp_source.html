<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/consumption.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">consumption.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="consumption_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="addiction_8h.html">addiction.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="contents__change__handler_8h.html">contents_change_handler.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dialogue_8h.html">dialogue.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect__on__condition_8h.html">effect_on_condition.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="event_8h.html">event.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="event__bus_8h.html">event_bus.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flag_8h.html">flag.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flat__set_8h.html">flat_set.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__category_8h.html">item_category.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__components_8h.html">item_components.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__location_8h.html">item_location.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse_8h.html">iuse.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse__actor_8h.html">iuse_actor.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="line_8h.html">line.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="magic__enchantment_8h.html">magic_enchantment.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="make__static_8h.html">make_static.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="material_8h.html">material.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="morale__types_8h.html">morale_types.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutation_8h.html">mutation.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="npc_8h.html">npc.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="options_8h.html">options.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pickup_8h.html">pickup.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pimpl_8h.html">pimpl.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recipe_8h.html">recipe.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recipe__dictionary_8h.html">recipe_dictionary.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="requirements_8h.html">requirements.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stomach_8h.html">stomach.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="text__snippets_8h.html">text_snippets.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translation_8h.html">translation.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="value__ptr_8h.html">value_ptr.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="visitable_8h.html">visitable.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vitamin_8h.html">vitamin.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">   73</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a>( <span class="stringliteral">&quot;DRINK&quot;</span> );</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">   74</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a>( <span class="stringliteral">&quot;FOOD&quot;</span> );</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a3db93d46e4a94d37dbc3874928d73034">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="consumption_8cpp.html#a3db93d46e4a94d37dbc3874928d73034">bio_faulty_grossfood</a>( <span class="stringliteral">&quot;bio_faulty_grossfood&quot;</span> );</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a0378c4d7c8bedb3b625c06e488f25dd9">   77</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="consumption_8cpp.html#a0378c4d7c8bedb3b625c06e488f25dd9">bio_syringe</a>( <span class="stringliteral">&quot;bio_syringe&quot;</span> );</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a1cdd6de85176097b616ddd8e3e0a9239">   78</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="consumption_8cpp.html#a1cdd6de85176097b616ddd8e3e0a9239">bio_taste_blocker</a>( <span class="stringliteral">&quot;bio_taste_blocker&quot;</span> );</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">   80</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a>( <span class="stringliteral">&quot;bloodworms&quot;</span> );</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">   81</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a>( <span class="stringliteral">&quot;brainworms&quot;</span> );</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">   82</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a>( <span class="stringliteral">&quot;common_cold&quot;</span> );</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">   83</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a>( <span class="stringliteral">&quot;flu&quot;</span> );</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">   84</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a>( <span class="stringliteral">&quot;foodpoison&quot;</span> );</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a08ed8f8240259a6a457502b0db459e08">   85</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>( <span class="stringliteral">&quot;fungus&quot;</span> );</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a>( <span class="stringliteral">&quot;hallu&quot;</span> );</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">   87</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a>( <span class="stringliteral">&quot;hunger_engorged&quot;</span> );</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">   88</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a>( <span class="stringliteral">&quot;hunger_famished&quot;</span> );</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">   89</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a>( <span class="stringliteral">&quot;hunger_full&quot;</span> );</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">   90</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a>( <span class="stringliteral">&quot;hunger_near_starving&quot;</span> );</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">   91</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a>( <span class="stringliteral">&quot;hunger_starving&quot;</span> );</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">   92</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a>( <span class="stringliteral">&quot;nausea&quot;</span> );</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a914db3df05fd548e81adc85699eaaf05">   93</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a>( <span class="stringliteral">&quot;paincysts&quot;</span> );</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">   94</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>( <span class="stringliteral">&quot;poison&quot;</span> );</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">   95</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a>( <span class="stringliteral">&quot;tapeworm&quot;</span> );</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">   96</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a>( <span class="stringliteral">&quot;took_thorazine&quot;</span> );</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="consumption_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a>( <span class="stringliteral">&quot;visuals&quot;</span> );</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a54bcd8dd61b0389ffbe892dd9dd5fec2">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a54bcd8dd61b0389ffbe892dd9dd5fec2">json_flag_ALLERGEN_BREAD</a>( <span class="stringliteral">&quot;ALLERGEN_BREAD&quot;</span> );</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a1ba672ffbd5e68e0474b3f28ddf72c56">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a1ba672ffbd5e68e0474b3f28ddf72c56">json_flag_ALLERGEN_CHEESE</a>( <span class="stringliteral">&quot;ALLERGEN_CHEESE&quot;</span> );</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac19dbfb926cd0bd9f257bff5577d138f">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#ac19dbfb926cd0bd9f257bff5577d138f">json_flag_ALLERGEN_DRIED_VEGETABLE</a>( <span class="stringliteral">&quot;ALLERGEN_DRIED_VEGETABLE&quot;</span> );</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a29ad24d064c380f684f9475a05bb0756">  102</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a29ad24d064c380f684f9475a05bb0756">json_flag_ALLERGEN_EGG</a>( <span class="stringliteral">&quot;ALLERGEN_EGG&quot;</span> );</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a7a1248a8f9da268493c91b93bbcb1204">  103</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a7a1248a8f9da268493c91b93bbcb1204">json_flag_ALLERGEN_FRUIT</a>( <span class="stringliteral">&quot;ALLERGEN_FRUIT&quot;</span> );</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a67cee0caf6c3fa13ecf6f72ce80b6550">  104</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a67cee0caf6c3fa13ecf6f72ce80b6550">json_flag_ALLERGEN_MEAT</a>( <span class="stringliteral">&quot;ALLERGEN_MEAT&quot;</span> );</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a85b30cf46f1a706091868a4f5e34e7e9">  105</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a85b30cf46f1a706091868a4f5e34e7e9">json_flag_ALLERGEN_MILK</a>( <span class="stringliteral">&quot;ALLERGEN_MILK&quot;</span> );</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a496e5a7de548d3dd2cdc09978a3de47d">  106</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a496e5a7de548d3dd2cdc09978a3de47d">json_flag_ALLERGEN_NUT</a>( <span class="stringliteral">&quot;ALLERGEN_NUT&quot;</span> );</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a4ad36e7912b4ee1a06399fb0d87e5e04">  107</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a4ad36e7912b4ee1a06399fb0d87e5e04">json_flag_ALLERGEN_VEGGY</a>( <span class="stringliteral">&quot;ALLERGEN_VEGGY&quot;</span> );</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a80b109bedc2ce187a7c76835044509a5">  108</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a80b109bedc2ce187a7c76835044509a5">json_flag_ALLERGEN_WHEAT</a>( <span class="stringliteral">&quot;ALLERGEN_WHEAT&quot;</span> );</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a1bbd0880ac98efd74080eb3c8ef18f6c">  109</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="consumption_8cpp.html#a1bbd0880ac98efd74080eb3c8ef18f6c">json_flag_ANIMAL_PRODUCT</a>( <span class="stringliteral">&quot;ANIMAL_PRODUCT&quot;</span> );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab84378f54d9b560be4da46cfd61fd61a">  111</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="consumption_8cpp.html#ab84378f54d9b560be4da46cfd61fd61a">item_category_chems</a>( <span class="stringliteral">&quot;chems&quot;</span> );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af39b0184e307d15344e6631cd30c479e">  113</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="consumption_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a>( <span class="stringliteral">&quot;apparatus&quot;</span> );</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac67e14738c5ef9bb790ea7a74fbd2615">  114</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="consumption_8cpp.html#ac67e14738c5ef9bb790ea7a74fbd2615">itype_dab_pen_on</a>( <span class="stringliteral">&quot;dab_pen_on&quot;</span> );</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac94da8d391815c77827574ea45ba553b">  115</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="consumption_8cpp.html#ac94da8d391815c77827574ea45ba553b">itype_syringe</a>( <span class="stringliteral">&quot;syringe&quot;</span> );</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">  117</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a>( <span class="stringliteral">&quot;BLOODFEEDER&quot;</span> );</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">  118</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a>( <span class="stringliteral">&quot;CANNIBAL&quot;</span> );</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">  119</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a>( <span class="stringliteral">&quot;HEMOVORE&quot;</span> );</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af818d8b81e06cfaa815792270032453f">  120</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a>( <span class="stringliteral">&quot;IMMUNE_SPOIL&quot;</span> );</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a12b3a40517ad5a90dd53ff7314637ac9">  121</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a12b3a40517ad5a90dd53ff7314637ac9">json_flag_NUMB</a>( <span class="stringliteral">&quot;NUMB&quot;</span> );</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a34738600216df5bb152c9fa395859298">  122</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a34738600216df5bb152c9fa395859298">json_flag_PARAIMMUNE</a>( <span class="stringliteral">&quot;PARAIMMUNE&quot;</span> );</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab161c367d797bc9d5e28ce6b0871ece9">  123</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#ab161c367d797bc9d5e28ce6b0871ece9">json_flag_PRED1</a>( <span class="stringliteral">&quot;PRED1&quot;</span> );</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a3fe50e2a044ddb139e163b6ee5307976">  124</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a3fe50e2a044ddb139e163b6ee5307976">json_flag_PRED2</a>( <span class="stringliteral">&quot;PRED2&quot;</span> );</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a069155201566d16196b847fb0cbf9330">  125</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a069155201566d16196b847fb0cbf9330">json_flag_PRED3</a>( <span class="stringliteral">&quot;PRED3&quot;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a0aeb430b1b8655823e9d45ab7aecf11d">  126</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a0aeb430b1b8655823e9d45ab7aecf11d">json_flag_PRED4</a>( <span class="stringliteral">&quot;PRED4&quot;</span> );</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">  127</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a>( <span class="stringliteral">&quot;PSYCHOPATH&quot;</span> );</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">  128</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a>( <span class="stringliteral">&quot;SAPIOVORE&quot;</span> );</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a9c50a91087bb8b69be248a2035381481">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#a9c50a91087bb8b69be248a2035381481">json_flag_SPIRITUAL</a>( <span class="stringliteral">&quot;SPIRITUAL&quot;</span> );</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#afacb3f9c6c50e496fc7589331d4d6900">  130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="consumption_8cpp.html#afacb3f9c6c50e496fc7589331d4d6900">json_flag_STRICT_HUMANITARIAN</a>( <span class="stringliteral">&quot;STRICT_HUMANITARIAN&quot;</span> );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ae218b5b655b85154ca455f105134f9ca">  132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> <a class="code" href="consumption_8cpp.html#ae218b5b655b85154ca455f105134f9ca">material_all</a>( <span class="stringliteral">&quot;all&quot;</span> );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a22b82ff6998caf559fabe67d535d6771">  134</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="consumption_8cpp.html#a22b82ff6998caf559fabe67d535d6771">mon_player_blob</a>( <span class="stringliteral">&quot;mon_player_blob&quot;</span> );</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a3b7437aa889d3736503d4ccdd7743001">  136</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mutation_category_id</a> <a class="code" href="consumption_8cpp.html#a3b7437aa889d3736503d4ccdd7743001">mutation_category_URSINE</a>( <span class="stringliteral">&quot;URSINE&quot;</span> );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="consumption_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>( <span class="stringliteral">&quot;cooking&quot;</span> );</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac038c6319122de04af85fb88e6618601">  139</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="consumption_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>( <span class="stringliteral">&quot;survival&quot;</span> );</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">  141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a>( <span class="stringliteral">&quot;ACIDBLOOD&quot;</span> );</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">  142</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a>( <span class="stringliteral">&quot;AMORPHOUS&quot;</span> );</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af7cc775eaf9d4242e2e88f4dfedc93f7">  143</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af7cc775eaf9d4242e2e88f4dfedc93f7">trait_ANTIFRUIT</a>( <span class="stringliteral">&quot;ANTIFRUIT&quot;</span> );</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a77c556702302ac4ca1a8485f208bebdf">  144</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a77c556702302ac4ca1a8485f208bebdf">trait_ANTIJUNK</a>( <span class="stringliteral">&quot;ANTIJUNK&quot;</span> );</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a7722fb848275ed1493264cbff87a6ca0">  145</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a7722fb848275ed1493264cbff87a6ca0">trait_ANTIWHEAT</a>( <span class="stringliteral">&quot;ANTIWHEAT&quot;</span> );</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">  146</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a>( <span class="stringliteral">&quot;CARNIVORE&quot;</span> );</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">  147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a>( <span class="stringliteral">&quot;EATDEAD&quot;</span> );</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abb2203fc9372a7f9651ccca81239445a">  148</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a>( <span class="stringliteral">&quot;EATHEALTH&quot;</span> );</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abd2ce5a2e5c7ede5e25af994457bd123">  149</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#abd2ce5a2e5c7ede5e25af994457bd123">trait_GOURMAND</a>( <span class="stringliteral">&quot;GOURMAND&quot;</span> );</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a17cdfd8aef2fd5e8fceb6c62d37fa741">  150</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a17cdfd8aef2fd5e8fceb6c62d37fa741">trait_HERBIVORE</a>( <span class="stringliteral">&quot;HERBIVORE&quot;</span> );</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a490ad03dab9bfa0cac3c742ec6b92fa0">  151</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a490ad03dab9bfa0cac3c742ec6b92fa0">trait_HIBERNATE</a>( <span class="stringliteral">&quot;HIBERNATE&quot;</span> );</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#aaa52adaf5d4df3112a266635f08120ed">  152</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#aaa52adaf5d4df3112a266635f08120ed">trait_LACTOSE</a>( <span class="stringliteral">&quot;LACTOSE&quot;</span> );</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af1cffcd5b8f3fa5fd6fe1fca1d45725d">  153</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af1cffcd5b8f3fa5fd6fe1fca1d45725d">trait_MEATARIAN</a>( <span class="stringliteral">&quot;MEATARIAN&quot;</span> );</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac71452586eb6cf87fab888bc561dc897">  154</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>( <span class="stringliteral">&quot;M_DEPENDENT&quot;</span> );</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">  155</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a>( <span class="stringliteral">&quot;M_IMMUNE&quot;</span> );</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af6004e9f3d0f01ca4141a52eeaf5addd">  156</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af6004e9f3d0f01ca4141a52eeaf5addd">trait_PICKYEATER</a>( <span class="stringliteral">&quot;PICKYEATER&quot;</span> );</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a7b1c110dc6b9d344d32e00ae9f70d070">  157</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a7b1c110dc6b9d344d32e00ae9f70d070">trait_PROBOSCIS</a>( <span class="stringliteral">&quot;PROBOSCIS&quot;</span> );</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#aa529aa8fed8701f3f231986398f2d95d">  158</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#aa529aa8fed8701f3f231986398f2d95d">trait_PROJUNK</a>( <span class="stringliteral">&quot;PROJUNK&quot;</span> );</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a70d7f27f057587e54b30196e6c58ad09">  159</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a70d7f27f057587e54b30196e6c58ad09">trait_PROJUNK2</a>( <span class="stringliteral">&quot;PROJUNK2&quot;</span> );</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a0371615cbdf966655d267076abc28b68">  160</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a>( <span class="stringliteral">&quot;RUMINANT&quot;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">  161</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a>( <span class="stringliteral">&quot;SAPROPHAGE&quot;</span> );</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a92fc92f8871feb56f05a24b582966275">  162</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a92fc92f8871feb56f05a24b582966275">trait_SAPROVORE</a>( <span class="stringliteral">&quot;SAPROVORE&quot;</span> );</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">  163</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a>( <span class="stringliteral">&quot;SCHIZOPHRENIC&quot;</span> );</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a21bda02fdebbb5bafebd2ba308e29262">  164</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a21bda02fdebbb5bafebd2ba308e29262">trait_SLIMESPAWNER</a>( <span class="stringliteral">&quot;SLIMESPAWNER&quot;</span> );</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">  165</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a>( <span class="stringliteral">&quot;SPIRITUAL&quot;</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">  166</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a>( <span class="stringliteral">&quot;STIMBOOST&quot;</span> );</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abcd495ec2c957abfe94ca8883f0f793a">  167</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#abcd495ec2c957abfe94ca8883f0f793a">trait_TABLEMANNERS</a>( <span class="stringliteral">&quot;TABLEMANNERS&quot;</span> );</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a6d68a01cb1321b3310ac4ddc8c28b8d0">  168</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a6d68a01cb1321b3310ac4ddc8c28b8d0">trait_THRESH_BIRD</a>( <span class="stringliteral">&quot;THRESH_BIRD&quot;</span> );</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab0274897870729fe991550cf82d246e9">  169</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#ab0274897870729fe991550cf82d246e9">trait_THRESH_CATTLE</a>( <span class="stringliteral">&quot;THRESH_CATTLE&quot;</span> );</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ab2b26b8a5aaccd80452e343236ffe8e7">  170</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#ab2b26b8a5aaccd80452e343236ffe8e7">trait_THRESH_FELINE</a>( <span class="stringliteral">&quot;THRESH_FELINE&quot;</span> );</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#aa9d7670d795db57c4926fef635148e22">  171</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#aa9d7670d795db57c4926fef635148e22">trait_THRESH_LUPINE</a>( <span class="stringliteral">&quot;THRESH_LUPINE&quot;</span> );</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a751a974c94ce8c4da2e59c71da498980">  172</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a751a974c94ce8c4da2e59c71da498980">trait_THRESH_MOUSE</a>( <span class="stringliteral">&quot;THRESH_MOUSE&quot;</span> );</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">  173</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a>( <span class="stringliteral">&quot;THRESH_PLANT&quot;</span> );</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a0f2ff29084284a987321bb533c8134d4">  174</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a0f2ff29084284a987321bb533c8134d4">trait_THRESH_RABBIT</a>( <span class="stringliteral">&quot;THRESH_RABBIT&quot;</span> );</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a9fa9aa0776f043d6f5e8bcfb370bf748">  175</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a9fa9aa0776f043d6f5e8bcfb370bf748">trait_THRESH_RAT</a>( <span class="stringliteral">&quot;THRESH_RAT&quot;</span> );</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a557169ee6dc6d09dfed331f1819983d5">  176</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a557169ee6dc6d09dfed331f1819983d5">trait_THRESH_URSINE</a>( <span class="stringliteral">&quot;THRESH_URSINE&quot;</span> );</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">  177</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a>( <span class="stringliteral">&quot;UNDINE_SLEEP_WATER&quot;</span> );</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a0db82d150be635539d001703c337cb20">  178</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#a0db82d150be635539d001703c337cb20">trait_VEGAN</a>( <span class="stringliteral">&quot;VEGAN&quot;</span> );</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#aa7c6b64e7778501e77a8c8aeda9c6ffb">  179</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#aa7c6b64e7778501e77a8c8aeda9c6ffb">trait_VEGETARIAN</a>( <span class="stringliteral">&quot;VEGETARIAN&quot;</span> );</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">  180</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="consumption_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a>( <span class="stringliteral">&quot;WATERSLEEP&quot;</span> );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">  182</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> <a class="code" href="consumption_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a>( <span class="stringliteral">&quot;human_flesh_vitamin&quot;</span> );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// note: cannot use constants from flag.h (e.g. flag_ALLERGEN_VEGGY) here, as they</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// might be uninitialized at the time these const arrays are created</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a55c2ff48be9d4be89453d697f61961f5">  186</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;flag_id, 6&gt; <a class="code" href="consumption_8cpp.html#a55c2ff48be9d4be89453d697f61961f5">carnivore_blacklist</a> {{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="consumption_8cpp.html#a4ad36e7912b4ee1a06399fb0d87e5e04">json_flag_ALLERGEN_VEGGY</a>, <a class="code" href="consumption_8cpp.html#a7a1248a8f9da268493c91b93bbcb1204">json_flag_ALLERGEN_FRUIT</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="consumption_8cpp.html#a80b109bedc2ce187a7c76835044509a5">json_flag_ALLERGEN_WHEAT</a>, <a class="code" href="consumption_8cpp.html#a496e5a7de548d3dd2cdc09978a3de47d">json_flag_ALLERGEN_NUT</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="consumption_8cpp.html#a54bcd8dd61b0389ffbe892dd9dd5fec2">json_flag_ALLERGEN_BREAD</a>, <a class="code" href="consumption_8cpp.html#ac19dbfb926cd0bd9f257bff5577d138f">json_flag_ALLERGEN_DRIED_VEGETABLE</a></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }};</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#ac15837ea0bd197c8556d41b2af9cee36">  192</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;flag_id, 2&gt; <a class="code" href="consumption_8cpp.html#ac15837ea0bd197c8556d41b2af9cee36">herbivore_blacklist</a> {{</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="consumption_8cpp.html#a67cee0caf6c3fa13ecf6f72ce80b6550">json_flag_ALLERGEN_MEAT</a>, <a class="code" href="consumption_8cpp.html#a29ad24d064c380f684f9475a05bb0756">json_flag_ALLERGEN_EGG</a></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }};</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// TODO: Move pizza scraping here.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a80817baa650043d2c55261f483c601f0">  197</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="consumption_8cpp.html#a80817baa650043d2c55261f483c601f0">compute_default_effective_kcal</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest, <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;you,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> &amp;extra_flags = {} )</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span>( !comest.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>() ) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// As float to avoid rounding too many times</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">float</span> kcal = comest.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;default_nutrition.kcal();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Many raw foods give less calories, as your body has expends more energy digesting them.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">bool</span> cooked = comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5566b196c79a94e4f0c809f1a67f5729">flag_COOKED</a> ) || extra_flags.count( <a class="code" href="flag_8cpp.html#a5566b196c79a94e4f0c809f1a67f5729">flag_COOKED</a> );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a51e7e1a97bfef950595f48cd979c4515">flag_RAW</a> ) &amp;&amp; !cooked ) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        kcal *= 0.75f;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> ) &amp;&amp; comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> ) &amp;&amp;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        comest.<a class="code" href="classitem.html#aca5abd8656e123435b97da00608a5daa">has_any_flag</a>( <a class="code" href="consumption_8cpp.html#a55c2ff48be9d4be89453d697f61961f5">carnivore_blacklist</a> ) ) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// TODO: Comment pizza scrapping</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        kcal *= 0.5f;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> relative_rot = comest.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Saprophages get full nutrition from rotting food</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span>( relative_rot &gt; 1.0f &amp;&amp; !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a> ) ) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// everyone else only gets a portion of the nutrition</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// Scaling linearly from 100% at just-rotten to 0 at halfway-rotten-away</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> rottedness = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( 2 * relative_rot - 2.0f, 0.1f, 1.0f );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        kcal *= ( 1.0f - rottedness );</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    kcal = you.<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a9f9df4958877b98ac3a7253b794aa642">enchant_vals::mod::KCAL</a>, kcal );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( kcal );</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">// Compute default effective vitamins for an item, taking into account player</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">// traits, but not components of the item.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#afd9e2a62c52a28ee974d111c622bbcd0">  235</a></span>&#160;<span class="keyword">static</span> std::map&lt;vitamin_id, int&gt; <a class="code" href="consumption_8cpp.html#afd9e2a62c52a28ee974d111c622bbcd0">compute_default_effective_vitamins</a>(</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;you )</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span>( !it.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>() ) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    std::map&lt;vitamin_id, int&gt; res = it.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;default_nutrition.vitamins();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// for actual vitamins convert RDA to a internal value</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;const vitamin_id, int&gt; &amp;vit : res ) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span>( vit.first-&gt;type() != <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        vit.second = vit.first-&gt;RDA_to_default( vit.second );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;trait : you.<a class="code" href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">get_mutations</a>() ) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmutation__branch.html">mutation_branch</a> &amp;mut = trait.obj();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// make sure to iterate over every material defined for vitamin absorption</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">// TODO: put this loop into a function and utilize it again for bionics</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mat : mut.<a class="code" href="structmutation__branch.html#ac857653bc21cdb5c1122a65def903a9d">vitamin_absorb_multi</a> ) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="comment">// this is where we are able to check if the food actually is changed by the trait</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">if</span>( mat.first == <a class="code" href="consumption_8cpp.html#ae218b5b655b85154ca455f105134f9ca">material_all</a> || it.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( mat.first ) ) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keyword">const</span> std::map&lt;vitamin_id, double&gt; &amp;mat_vit_map = mat.second;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;vit : res ) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    <span class="keyword">auto</span> vit_factor = mat_vit_map.find( vit.first );</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    <span class="keywordflow">if</span>( vit_factor != mat_vit_map.end() ) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        vit.second *= vit_factor-&gt;second;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;const vitamin_id, int&gt; &amp;vit : res ) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        vit.second = you.<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a57b9d61cde2a81fb9d43bc5f2b38bb68">enchant_vals::mod::VITAMIN_ABSORB_MOD</a>,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                     vit.second );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// Calculate the effective nutrients for a given item, taking</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// into account character traits but not item components.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">  278</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structnutrients.html">nutrients</a> <a class="code" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;you, <span class="keyword">const</span> <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> &amp;extra_flags = {} )</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Multiply by 1000 to get it in calories</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.calories = <a class="code" href="consumption_8cpp.html#a80817baa650043d2c55261f483c601f0">compute_default_effective_kcal</a>( comest, you, extra_flags ) * 1000;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const vitamin_id, int&gt; &amp;vit :  <a class="code" href="consumption_8cpp.html#afd9e2a62c52a28ee974d111c622bbcd0">compute_default_effective_vitamins</a>( comest,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            you ) ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.set_vitamin( vit.first, vit.second );</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// Calculate the nutrients that the given character would receive from consuming</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// the given item, taking into account the item components and the character&#39;s</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">// traits.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// This is used by item display, making actual nutrition available to character.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">  295</a></span>&#160;<a class="code" href="structnutrients.html">nutrients</a> <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">Character::compute_effective_nutrients</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest )<span class="keyword"> const</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span>( !comest.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// if item has components, will derive calories from that instead.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>( !comest.<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() &amp;&amp; !comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a> ) ) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> tally{};</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#ae6e5a27a821edd75162d46364a24699b">recipe_charges</a> == 0 ) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="comment">// Avoid division by zero</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">return</span> tally;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : comest.<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> : tvp.second ) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <a class="code" href="structnutrients.html">nutrients</a> component_value = <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( <a class="code" href="structcomponent.html">component</a> );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="structcomponent.html">component</a>.count_by_charges() ) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    component_value *= <a class="code" href="structcomponent.html">component</a>.charges;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="structcomponent.html">component</a>.has_flag( <a class="code" href="flag_8cpp.html#a7e1e05972c269d40d228d92bbea6f9b7">flag_BYPRODUCT</a> ) ) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    tally -= component_value;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    tally += component_value;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> tally / comest.<a class="code" href="classitem.html#ae6e5a27a821edd75162d46364a24699b">recipe_charges</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a>( comest, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">// Calculate range of nutrients obtainable for a given item when crafted via</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">// the given recipe</span></div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">  329</a></span>&#160;std::pair&lt;nutrients, nutrients&gt; <a class="code" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">Character::compute_nutrient_range</a>(</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest, <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;recipe_i,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="namespacespell__effect.html#a5e87478109f7e4aec0eb55250650ec16">std::map</a>&lt;<a class="code" href="classstring__id.html">recipe_id</a>, std::pair&lt;nutrients, nutrients&gt;&gt; &amp;rec_cache,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> &amp;extra_flags )<span class="keyword"> const</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span>( !comest.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// if item has components, will derive calories from that instead.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a> ) ) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> result = <a class="code" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a>( comest, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> { result, result };</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">auto</span> cache_it = rec_cache.find( recipe_i );</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span>( cache_it != rec_cache.end() ) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> cache_it-&gt;second;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> tally_min;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> tally_max;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;rec = *recipe_i;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> our_extra_flags = extra_flags;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>( rec.<a class="code" href="classrecipe.html#aaf9e9415834cc507fd68b89070bd4bb4">hot_result</a>() ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        our_extra_flags.<a class="code" href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">insert</a>( <a class="code" href="flag_8cpp.html#a5566b196c79a94e4f0c809f1a67f5729">flag_COOKED</a> );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> &amp;requirements = rec.<a class="code" href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">simple_requirements</a>();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a> &amp;component_requirements =</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        requirements.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;item_comp&gt; &amp;component_options : component_requirements ) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> this_min;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> this_max;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitem__comp.html">item_comp</a> &amp;component_option : component_options ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            std::pair&lt;nutrients, nutrients&gt; component_option_range =</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <a class="code" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">compute_nutrient_range</a>( component_option.type, rec_cache, our_extra_flags );</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            component_option_range.first *= component_option.count;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            component_option_range.second *= component_option.count;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span>( first ) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                std::tie( this_min, this_max ) = component_option_range;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                this_min.<a class="code" href="structnutrients.html#a03ea8d7d47251651f66a032158aaa30e">min_in_place</a>( component_option_range.first );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                this_max.<a class="code" href="structnutrients.html#af9d45327824853ff3a2a18ca53f18508">max_in_place</a>( component_option_range.second );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        tally_min += this_min;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        tally_max += this_max;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    std::vector&lt;item&gt; byproducts = rec.<a class="code" href="classrecipe.html#a4ed6d7a51cc70ae0190e4f8b4d92b379">create_byproducts</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;byproduct : byproducts ) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> byproduct_nutr = <a class="code" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a>( byproduct, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        tally_min -= byproduct_nutr;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        tally_max -= byproduct_nutr;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">int</span> count = rec.<a class="code" href="classrecipe.html#a5c4a4110edf3bd4a33732d4fd8a9d53f">makes_amount</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    rec_cache[recipe_i] = { tally_min / count, tally_max / count };</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> rec_cache[recipe_i];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">// Calculate the range of nutrients possible for a given item across all</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// possible recipes</span></div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classCharacter.html#aa343bb3f9c2085fb6384089c1b939313">  400</a></span>&#160;std::pair&lt;nutrients, nutrients&gt; <a class="code" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">Character::compute_nutrient_range</a>(</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;comest_id,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="namespacespell__effect.html#a5e87478109f7e4aec0eb55250650ec16">std::map</a>&lt;<a class="code" href="classstring__id.html">recipe_id</a>, std::pair&lt;nutrients, nutrients&gt;&gt; &amp;rec_cache,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> &amp;extra_flags )<span class="keyword"> const</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *comest = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( comest_id );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span>( !comest-&gt;<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a> ) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="classitem.html">item</a> comest_it( comest, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span>( comest-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        comest_it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// The default nutrients are always a possibility</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> min_nutr = <a class="code" href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a>( comest_it, *<span class="keyword">this</span>, extra_flags );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span>( comest-&gt;<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a> ) ||</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a>.<a class="code" href="classrecipe__dictionary.html#a5f22263eae1314377f1c64ff6d6400fe">is_item_on_loop</a>( comest-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() ) ) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">return</span> { min_nutr, min_nutr };</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> max_nutr = min_nutr;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;rec : comest-&gt;<a class="code" href="structitype.html#ab40a0ab92be2b0d0dfb8fc027a8057ec">recipes</a> ) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> this_min;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="structnutrients.html">nutrients</a> this_max;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="classitem.html">item</a> result_it( rec-&gt;<a class="code" href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">result</a>() );</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span>( result_it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() != comest_it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;When creating recipe result expected %s, got %s\n&quot;</span>,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                      comest_it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), result_it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        std::tie( this_min, this_max ) = <a class="code" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">compute_nutrient_range</a>( result_it, rec, rec_cache, extra_flags );</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        min_nutr.<a class="code" href="structnutrients.html#a03ea8d7d47251651f66a032158aaa30e">min_in_place</a>( this_min );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        max_nutr.<a class="code" href="structnutrients.html#af9d45327824853ff3a2a18ca53f18508">max_in_place</a>( this_max );</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> { min_nutr, max_nutr };</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">  442</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">Character::nutrition_for</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest )<span class="keyword"> const</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( comest ).<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() / <a class="code" href="structislot__comestible.html#aecc91e5454fc8c79df0fe6535690f246">islot_comestible::kcal_per_nutr</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">  447</a></span>&#160;std::pair&lt;int, int&gt; <a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">Character::fun_for</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;comest, <span class="keywordtype">bool</span> ignore_already_ate )<span class="keyword"> const</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span>( !comest.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">return</span> std::pair&lt;int, int&gt;( 0, 0 );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// As float to avoid rounding too many times</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">float</span> fun = comest.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Food doesn&#39;t taste as good when you&#39;re sick</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a> ) || <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a> ) ) &amp;&amp; fun &gt; 0 ) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        fun /= 3;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Rotten food should be pretty disgusting</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> relative_rot = comest.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span>( relative_rot &gt; 1.0f &amp;&amp; !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a92fc92f8871feb56f05a24b582966275">trait_SAPROVORE</a> ) ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> rottedness = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( 2 * relative_rot - 2.0f, 0.1f, 1.0f );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">// Three effects:</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">// penalty for rot goes from -2 to -20</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// bonus for tasty food drops from 90% to 0%</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="comment">// disgusting food unfun increases from 110% to 200%</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        fun -= rottedness * 10;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span>( fun &gt; 0 ) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            fun *= ( 1.0f - rottedness );</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            fun *= ( 1.0f + rottedness );</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Food is less enjoyable when eaten too often.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span>( !ignore_already_ate &amp;&amp; ( fun &gt; 0 || comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad9eb40d3a01c2f156cb7fa3de5e1dde4">flag_NEGATIVE_MONOTONY_OK</a> ) ) ) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structconsumption__event.html">consumption_event</a> &amp;event : <a class="code" href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">consumption_history</a> ) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">if</span>( event.time &gt; <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - 2_days &amp;&amp; event.type_id == comest.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() &amp;&amp;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <span class="keyword">event</span>.component_hash == comest.<a class="code" href="classitem.html#a0863a9784ae90c120d91478521163f16">make_component_hash</a>() ) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                fun -= comest.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;monotony_penalty;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="comment">// This effect can&#39;t drop fun below 0, unless the food has the right flag.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                <span class="comment">// 0 is the lowest we&#39;ll go, no need to keep looping.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keywordflow">if</span>( fun &lt;= 0 &amp;&amp; !comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad9eb40d3a01c2f156cb7fa3de5e1dde4">flag_NEGATIVE_MONOTONY_OK</a> ) ) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    fun = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">float</span> fun_max = fun &lt; 0 ? fun * 6.0f : fun * 3.0f;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a372008f80ba38cb2296ee0923413784e">flag_EATEN_COLD</a> ) &amp;&amp; comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> ) ) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span>( fun &gt; 0 ) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            fun *= 2;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            fun = 1;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            fun_max = 5;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a> ) &amp;&amp; !comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) ) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span>( fun &gt; 0 ) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            fun *= 0.5;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="comment">// Melted freezable food tastes 25% worse than frozen freezable food.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="comment">// Frozen freezable food... say that 5 times fast</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            fun *= 1.25;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span>( ( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a454f1a9f0617bf2e288ab3ee856971cb">flag_LUPINE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#aa9d7670d795db57c4926fef635148e22">trait_THRESH_LUPINE</a> ) ) ||</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        ( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0cf3cdc271bdfc98c65d142e215dfa84">flag_FELINE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ab2b26b8a5aaccd80452e343236ffe8e7">trait_THRESH_FELINE</a> ) ) ) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span>( fun &lt; 0 ) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            fun = -fun;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            fun /= 2;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// Cooked blood is OK, but it&#39;s really better raw</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// This is automatically handled by raw blood having negative fun</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) ) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) ) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">if</span>( fun &lt;= 0 ) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                fun += 25;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                fun *= 1.2;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a> ) ) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">if</span>( fun &lt;= 0 ) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                fun += 13;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                fun *= 1.1;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// This cherry soda&#39;s just not the same...</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) &amp;&amp; !comest.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) &amp;&amp; fun &gt; 0 ) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        fun *= 0.5;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abd2ce5a2e5c7ede5e25af994457bd123">trait_GOURMAND</a> ) ) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span>( fun &lt; -1 ) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            fun_max = fun;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            fun /= 2;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fun &gt; 0 ) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            fun_max *= 3;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            fun = fun * 3 / 2;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="consumption_8cpp.html#a3db93d46e4a94d37dbc3874928d73034">bio_faulty_grossfood</a> ) &amp;&amp; comest.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        fun = fun - 13;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span>( fun &lt; 0 &amp;&amp; <a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="consumption_8cpp.html#a1cdd6de85176097b616ddd8e3e0a9239">bio_taste_blocker</a> ) &amp;&amp;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt; <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>(</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    comest.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() ) ) ) ) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        fun = 0;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> { <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( fun ), <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( fun_max ) };</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">  565</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">Character::vitamin_rate</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit )<span class="keyword"> const</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> res = vit.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classvitamin.html#ae60227e2365936a1d53684a54f59835f">rate</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : <a class="code" href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">get_mutations</a>() ) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmutation__branch.html">mutation_branch</a> &amp;mut = m.obj();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keyword">auto</span> iter = mut.<a class="code" href="structmutation__branch.html#ae92480c28083e11a5e61dc535515c17a">vitamin_rates</a>.find( vit );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">if</span>( iter != mut.<a class="code" href="structmutation__branch.html#ae92480c28083e11a5e61dc535515c17a">vitamin_rates</a>.end() &amp;&amp; iter-&gt;second != 0_turns ) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">if</span>( res != 0_turns ) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> recip_vit = 1 / to_turns&lt;float&gt;( res ) + 1 / to_turns&lt;float&gt;( iter-&gt;second );</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                res = recip_vit == 0 ? 0_turns : <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( 1 / recip_vit );</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                res = iter-&gt;second;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="classCharacter.html#a69edf2da4462e3aa44ff5a536fff28ab">  585</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a69edf2da4462e3aa44ff5a536fff28ab">Character::clear_vitamins</a>()</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;{</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.clear();</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>.clear();</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[<a class="code" href="classstring__id.html">vitamin_id</a>, <a class="code" href="classvitamin.html">vitamin</a>] : <a class="code" href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a>() ) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>[<a class="code" href="type__id_8h.html#a62798cd4a1ea702e8d25b8c0f17a4834">vitamin_id</a>] = 0;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[<a class="code" href="type__id_8h.html#a62798cd4a1ea702e8d25b8c0f17a4834">vitamin_id</a>] = { 0, 0 };</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">  595</a></span>&#160;std::map&lt;vitamin_id, int&gt; <a class="code" href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">Character::effect_vitamin_mod</a>( <span class="keyword">const</span> std::map&lt;vitamin_id, int&gt; &amp;vits )</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;{</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    std::vector&lt;std::pair&lt;vitamin_id, float&gt;&gt; <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a9554e55483a415ce775b06f9519b3078">mods</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// Yuck!</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// Construct mods, for easy iteration over to modify vitamins</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a>, std::map&lt;bodypart_id, effect&gt;&gt; &amp;elem : *<a class="code" href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">effects</a> ) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const bodypart_id, effect&gt; &amp;veffect : elem.second ) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> reduced = <a class="code" href="classCreature.html#a6b40041c12e2c414170aad5511878446">resists_effect</a>( veffect.second );</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvitamin__applied__effect.html">vitamin_applied_effect</a> &amp;rate_mod : veffect.second.vit_effects( reduced ) ) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                <span class="keywordflow">if</span>( !rate_mod.absorb_mult ) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a9554e55483a415ce775b06f9519b3078">mods</a>.emplace_back( rate_mod.vitamin, *rate_mod.absorb_mult );</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    std::map&lt;vitamin_id, int&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = vits;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;const vitamin_id, int&gt; &amp;value : <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;vitamin_id, float&gt; &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a9554e55483a415ce775b06f9519b3078">mods</a> ) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span>( value.first == <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.first ) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                value.second *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.second;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">  624</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">Character::vitamin_mod</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit, <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span>( !vit.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Vitamin with id %s does not exist, and cannot be modified&quot;</span>, vit.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// What&#39;s going on here? Emplace returns either an iterator to the inserted</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// item or, if it already exists, an iterator to the (unchanged) extant item</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// (Okay, technically it returns a pair&lt;iterator, bool&gt;, the iterator is what we want)</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.emplace( vit, 0 ).first;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keyword">const</span> <a class="code" href="classvitamin.html">vitamin</a> &amp;v = *it-&gt;first;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span>( qty &gt; 0 ) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        it-&gt;second = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( it-&gt;second + qty, v.<a class="code" href="classvitamin.html#a02118e1482cc2de278511d63b764b7d0">max</a>() );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classCharacter.html#aa81f7189c03db495fc90e44b3421ebc5">update_vitamins</a>( vit );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="comment">// update the daily trackers too while here</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// prevent overflow</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        constexpr <span class="keywordtype">int</span> daily_vitamins_max = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::numeric_limits&lt;int&gt;::max</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span>( daily_vitamins_max - <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[vit].<a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a> &gt;= qty ) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[vit].second += qty;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[vit].second = daily_vitamins_max;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( qty &lt; 0 ) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        it-&gt;second = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( it-&gt;second + qty, v.<a class="code" href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">min</a>() );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="classCharacter.html#aa81f7189c03db495fc90e44b3421ebc5">update_vitamins</a>( vit );</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;vitamin_id, int&gt; &amp;dcy : v.<a class="code" href="classvitamin.html#ab0ecac042b2177081ebd499919bedfdb">decays_into</a>() ) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span>( it-&gt;second != 0 ) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( dcy.first, dcy.second * <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( qty ) );</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">  662</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">Character::vitamins_mod</a>( <span class="keyword">const</span> std::map&lt;vitamin_id, int&gt; &amp;vitamins )</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aae2bc9c34641e5e18b8a3bdc111b4323">needs_food</a>() ) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const vitamin_id, int&gt; &amp;vit : vitamins ) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( vit.first, vit.second );</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="classCharacter.html#a7536f499a8b09536d1d9c8360319fad5">  671</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a7536f499a8b09536d1d9c8360319fad5">Character::vitamin_get</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit )<span class="keyword"> const</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;NO_VITAMINS&quot;</span> ) &amp;&amp; vit-&gt;<a class="code" href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">type</a>() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v = <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.find( vit );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> v != <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.end() ? v-&gt;second : 0;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="classCharacter.html#a315b653b250c40f9c34fd20253f0e69e">  681</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a315b653b250c40f9c34fd20253f0e69e">Character::get_daily_vitamin</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit, <span class="keywordtype">bool</span> actual )<span class="keyword"> const</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;NO_VITAMINS&quot;</span> ) &amp;&amp; vit-&gt;<a class="code" href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">type</a>() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v = <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>.find( vit );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// we didn&#39;t find it</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span>( v == <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>.end() ) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// if we should get the guess or the real value</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> actual ? v-&gt;second.second : v-&gt;second.first;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classCharacter.html#a0932b7b9d2a60fbbb3f529420c8713d8">  696</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a0932b7b9d2a60fbbb3f529420c8713d8">Character::reset_daily_vitamin</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit )</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;NO_VITAMINS&quot;</span> ) &amp;&amp; vit-&gt;<a class="code" href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">type</a>() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[vit] = { 0, 0 };</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classCharacter.html#afd99bd5aa2675097fe6a101696b36d77">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#afd99bd5aa2675097fe6a101696b36d77">Character::vitamin_set</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;vit, <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keyword">auto</span> v = <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.find( vit );</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span>( v == <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.end() ) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        v = <a class="code" href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">vitamin_levels</a>.emplace( vit, 0 ).first;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( vit, qty - v-&gt;second );</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="classCharacter.html#a69245a386351aaece624b82f7fb668d2">  714</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a69245a386351aaece624b82f7fb668d2">Character::metabolic_rate_base</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::string hunger_rate_string( <span class="stringliteral">&quot;PLAYER_HUNGER_RATE&quot;</span> );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">float</span> hunger_rate = get_option&lt; float &gt;( hunger_rate_string );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a335c75c5f9b974aed057bff2c6551d36">enchant_vals::mod::METABOLISM</a>, hunger_rate );</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">// TODO: Make this less chaotic to let NPC retroactive catch up work here</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// TODO: Involve body heat (cold -&gt; higher metabolism, unless cold-blooded)</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">// TODO: Involve stamina (maybe not here?)</span></div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="classCharacter.html#a24a1143537358b4138e3d9d504847a81">  724</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a24a1143537358b4138e3d9d504847a81">Character::metabolic_rate</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// First value is effective hunger, second is nutrition multiplier</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// Note: Values do not match hungry/v.hungry/famished/starving,</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// because effective hunger is affected by speed (which drops when hungry)</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;float, float&gt;&gt; thresholds = {{</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            { 300.0f, 1.0f },</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            { 2000.0f, 0.8f },</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            { 5000.0f, 0.6f },</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            { 8000.0f, 0.5f }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    };</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// Penalize fast survivors</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// TODO: Have cold temperature increase, not decrease, metabolism</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> effective_hunger = ( <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() + <a class="code" href="classCharacter.html#a8824c91d628b74c695d338d71b3efa44">get_starvation</a>() ) * 100.0f / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 50,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                   <a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> modifier = <a class="code" href="cata__utility_8cpp.html#a179b3f9b48b6d93e55bd110a79054d26">multi_lerp</a>( thresholds, effective_hunger );</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> modifier * <a class="code" href="classCharacter.html#a69245a386351aaece624b82f7fb668d2">metabolic_rate_base</a>();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">  746</a></span>&#160;<a class="code" href="classstring__id.html">morale_type</a> <a class="code" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">Character::allergy_type</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food )<span class="keyword"> const</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">using</span> allergy_tuple = std::tuple&lt;trait_id, flag_id, morale_type&gt;;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;allergy_tuple, 8&gt; allergy_tuples = {{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#aa7c6b64e7778501e77a8c8aeda9c6ffb">trait_VEGETARIAN</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a>, <a class="code" href="morale__types_8cpp.html#a98fb04290cac9e315b180364d86ddf53">MORALE_ANTIMEAT</a> ),</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#af1cffcd5b8f3fa5fd6fe1fca1d45725d">trait_MEATARIAN</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a>, <a class="code" href="morale__types_8cpp.html#a6fd60a468220d4ba2d97741631bf84d9">MORALE_ANTIVEGGY</a> ),</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#aaa52adaf5d4df3112a266635f08120ed">trait_LACTOSE</a>, <a class="code" href="flag_8cpp.html#aaf5745695dfba5d85a606041bb9b0692">flag_ALLERGEN_MILK</a>, <a class="code" href="morale__types_8cpp.html#ab7b975d881b9d7221861440bea7199ad">MORALE_LACTOSE</a> ),</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#af7cc775eaf9d4242e2e88f4dfedc93f7">trait_ANTIFRUIT</a>, <a class="code" href="flag_8cpp.html#aac1557e5d416782005713c2acdbc5ab3">flag_ALLERGEN_FRUIT</a>, <a class="code" href="morale__types_8cpp.html#aad0f6497e9bdd2600bec61d7a3ce6846">MORALE_ANTIFRUIT</a> ),</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#a77c556702302ac4ca1a8485f208bebdf">trait_ANTIJUNK</a>, <a class="code" href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a>, <a class="code" href="morale__types_8cpp.html#a7edfa870019cc60861c30d1599ea0d3c">MORALE_ANTIJUNK</a> ),</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            std::make_tuple( <a class="code" href="consumption_8cpp.html#a7722fb848275ed1493264cbff87a6ca0">trait_ANTIWHEAT</a>, <a class="code" href="flag_8cpp.html#a900bd922c7a29feb2590e13662efdd23">flag_ALLERGEN_WHEAT</a>, <a class="code" href="morale__types_8cpp.html#a9cdddeda12b744438b83f90ced17491a">MORALE_ANTIWHEAT</a> )</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    };</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;tp : allergy_tuples ) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( std::get&lt;0&gt;( tp ) ) &amp;&amp;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( std::get&lt;1&gt;( tp ) ) ) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">return</span> std::get&lt;2&gt;( tp );</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="morale__types_8cpp.html#ae95b6eefc4c6ba6583014d4792b51814">MORALE_NULL</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="classCharacter.html#a04df4efd633604ed5b88827b8072a1d2">  769</a></span>&#160;<a class="code" href="classret__val.html">ret_val&lt;edible_rating&gt;</a> <a class="code" href="classCharacter.html#a04df4efd633604ed5b88827b8072a1d2">Character::can_eat</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food )<span class="keyword"> const</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That doesn&#39;t look edible.&quot;</span> ) );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;comest = food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34da07ccc8b142916d801b317ffa84d1">flag_INEDIBLE</a> ) ) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordtype">bool</span> has_compatible_mutation =</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5fbe3c430dd4d29aecc92dbd2b0ed4c7">flag_CATTLE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ab0274897870729fe991550cf82d246e9">trait_THRESH_CATTLE</a> ) ) ||</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0cf3cdc271bdfc98c65d142e215dfa84">flag_FELINE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ab2b26b8a5aaccd80452e343236ffe8e7">trait_THRESH_FELINE</a> ) ) ||</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a454f1a9f0617bf2e288ab3ee856971cb">flag_LUPINE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#aa9d7670d795db57c4926fef635148e22">trait_THRESH_LUPINE</a> ) ) ||</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a124d41689a5783c459aebb9688f1d677">flag_RABBIT</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a0f2ff29084284a987321bb533c8134d4">trait_THRESH_RABBIT</a> ) ) ||</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab6c725040594eae133e1a6e3673f1552">flag_MOUSE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a751a974c94ce8c4da2e59c71da498980">trait_THRESH_MOUSE</a> ) ) ||</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3171a59304f2613ade0a398076b1d474">flag_RAT</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a9fa9aa0776f043d6f5e8bcfb370bf748">trait_THRESH_RAT</a> ) ) ||</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a295179951ea4cf89f532dd102b031a3d">flag_BIRD</a> ) &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a6d68a01cb1321b3310ac4ddc8c28b8d0">trait_THRESH_BIRD</a> ) );</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span>( !has_compatible_mutation ) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That doesn&#39;t look edible to you.&quot;</span> ) );</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5fbe3c430dd4d29aecc92dbd2b0ed4c7">flag_CATTLE</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0cf3cdc271bdfc98c65d142e215dfa84">flag_FELINE</a> ) &amp;&amp;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a454f1a9f0617bf2e288ab3ee856971cb">flag_LUPINE</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a295179951ea4cf89f532dd102b031a3d">flag_BIRD</a> ) ) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That doesn&#39;t look edible.&quot;</span> ) );</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That doesn&#39;t look edible in its current form.&quot;</span> ) );</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> ) ) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>(</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is full of dirt after being on the ground.&quot;</span> ) );</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> eat_verb  = food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> edible    = eat_verb ||  comest-&gt;comesttype == <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> drinkable = !eat_verb &amp;&amp; comest-&gt;comesttype == <a class="code" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="comment">// TODO: This condition occurs way too often. Unify it.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// update Sep. 26 2018: this apparently still occurs way too often. yay!</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() &amp;&amp; ( !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a> ) ||</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                             <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a> ) ) ) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t do that while underwater.&quot;</span> ) );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span>( edible || drinkable ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a> ) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="keywordflow">if</span>( !elem.first-&gt;edible() ) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That doesn&#39;t look edible in its current form.&quot;</span> ) );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="comment">// For all those folks who loved eating Marloss berries.  D:&lt; mwuhahaha</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a29b61c8ac7c9acb43489f440d4b2947f">flag_MYCUS_OK</a> ) ) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;We can&#39;t eat that.  It&#39;s not right for us.&quot;</span> ) );</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6cc23010744e8a0b4f25da27bb3ffef8">flag_EDIBLE_FROZEN</a> ) &amp;&amp;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a> ) ) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">if</span>( edible ) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>(</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s frozen solid.  You must defrost it before you can eat it.&quot;</span> ) );</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span>( drinkable ) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t drink it while it&#39;s frozen.&quot;</span> ) );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *consume_drug = food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;consume_drug&quot;</span> );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span>( consume_drug != <span class="keyword">nullptr</span> ) { <span class="comment">//its a drug)</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keyword">const</span> <a class="code" href="classconsume__drug__iuse.html">consume_drug_iuse</a> *consume_drug_use = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classconsume__drug__iuse.html">consume_drug_iuse</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                ( consume_drug-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;tool : consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a> ) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> has = <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( tool.first )</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                             ? <a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( tool.first, ( tool.second == -1 ) ? 1 : tool.second )</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                             : <a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( tool.first, 1 );</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="keywordflow">if</span>( !has ) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a>,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a %s to consume that!&quot;</span> ),</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                       <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( tool.first ) ) );</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">smoking</a> = food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;SMOKING&quot;</span> );</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">smoking</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        std::optional&lt;std::string&gt; litcig = <a class="code" href="namespaceiuse.html#a85d862264df8d80c14f753c0e823e415">iuse::can_smoke</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">if</span>( litcig.has_value() ) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( litcig.value_or( <span class="stringliteral">&quot;&quot;</span> ) ) );</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span>( !comest-&gt;tool.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> has = <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( comest-&gt;tool )</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                         ? <a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( comest-&gt;tool, 1 )</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                         : <a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( comest-&gt;tool, 1 );</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span>( !has ) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a>,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a %s to consume that!&quot;</span> ),</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                                   <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( comest-&gt;tool ) ) );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">// Here&#39;s why PROBOSCIS is such a negative trait.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a7b1c110dc6b9d344d32e00ae9f70d070">trait_PROBOSCIS</a> ) &amp;&amp; !( drinkable || food.<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() ) ) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ugh, you can&#39;t drink that!&quot;</span> ) );</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> ) &amp;&amp; <a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">nutrition_for</a>( food ) &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        food.<a class="code" href="classitem.html#aca5abd8656e123435b97da00608a5daa">has_any_flag</a>( <a class="code" href="consumption_8cpp.html#a55c2ff48be9d4be89453d697f61961f5">carnivore_blacklist</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> ) ) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Eww.  Inedible plant stuff!&quot;</span> ) );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a17cdfd8aef2fd5e8fceb6c62d37fa741">trait_HERBIVORE</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        food.<a class="code" href="classitem.html#aca5abd8656e123435b97da00608a5daa">has_any_flag</a>( <a class="code" href="consumption_8cpp.html#ac15837ea0bd197c8556d41b2af9cee36">herbivore_blacklist</a> ) ) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="comment">// Like non-cannibal, but more strict!</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The thought of eating that makes you feel sick.&quot;</span> ) );</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keyword">const</span> std::array&lt;flag_id, 6&gt; vegan_blacklist {{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <a class="code" href="consumption_8cpp.html#a67cee0caf6c3fa13ecf6f72ce80b6550">json_flag_ALLERGEN_MEAT</a>, <a class="code" href="consumption_8cpp.html#a29ad24d064c380f684f9475a05bb0756">json_flag_ALLERGEN_EGG</a>,</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <a class="code" href="consumption_8cpp.html#a85b30cf46f1a706091868a4f5e34e7e9">json_flag_ALLERGEN_MILK</a>, <a class="code" href="consumption_8cpp.html#a1bbd0880ac98efd74080eb3c8ef18f6c">json_flag_ANIMAL_PRODUCT</a>,</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <a class="code" href="consumption_8cpp.html#a1ba672ffbd5e68e0474b3f28ddf72c56">json_flag_ALLERGEN_CHEESE</a>, <a class="code" href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        }};</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a0db82d150be635539d001703c337cb20">trait_VEGAN</a> ) &amp;&amp;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        food.<a class="code" href="classitem.html#aca5abd8656e123435b97da00608a5daa">has_any_flag</a>( vegan_blacklist ) ) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re still not going to eat animal products.&quot;</span> ) );</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code" href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">get_mutations</a>() ) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a9e2c24734b538e61e186fb6777b62c25">made_of_any</a>( mut.obj().can_only_eat ) &amp;&amp; !mut.obj().can_only_eat.empty() ) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t eat this.&quot;</span> ) );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af6004e9f3d0f01ca4141a52eeaf5addd">trait_PICKYEATER</a> ) &amp;&amp; !( drinkable || food.<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() ) &amp;&amp;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( food ).first &lt; 0 &amp;&amp; !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a> ) &amp;&amp;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a> ) &amp;&amp; !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a> ) ) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You deserve better food than this.&quot;</span> ) );</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af6004e9f3d0f01ca4141a52eeaf5addd">trait_PICKYEATER</a> ) &amp;&amp; drinkable &amp;&amp; !food.<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() &amp;&amp;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( food ).first &lt; 0 &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; 240 ) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;edible_rating&gt;::make_failure</a>( <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>,</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are not going to drink this.&quot;</span> ) );</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;edible_rating&gt;::make_success</a>();</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;}</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">  923</a></span>&#160;<a class="code" href="classret__val.html">ret_val&lt;edible_rating&gt;</a> <a class="code" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">Character::will_eat</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food, <span class="keywordtype">bool</span> interactive )<span class="keyword"> const</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="classret__val.html">ret_val&lt;edible_rating&gt;</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classCharacter.html#a04df4efd633604ed5b88827b8072a1d2">can_eat</a>( food );</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.success() ) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">if</span>( interactive ) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.c_str() );</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// exit early as we&#39;ve already tested everything in can_eat</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;edible_rating&gt;::make_success</a>();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    std::vector&lt;ret_val&lt;edible_rating&gt;&gt; consequences;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> add_consequence = [&amp;consequences]( <span class="keyword">const</span> std::string &amp; msg, <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedf">edible_rating</a> code ) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        consequences.emplace_back( <a class="code" href="classret__val.html">ret_val&lt;edible_rating&gt;::make_failure</a>( code, msg ) );</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    };</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> saprophage = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a> );</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;comest = food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> saprovore = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a92fc92f8871feb56f05a24b582966275">trait_SAPROVORE</a> );</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">if</span>( !saprophage &amp;&amp; !saprovore ) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is rotten and smells awful!&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b">ROTTEN</a> );</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> carnivore = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> food_is_human_flesh = food.<a class="code" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">has_vitamin</a>( <a class="code" href="consumption_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a> ) ||</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                     ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae424edc38996e744b841b99eceee2a52">flag_STRICT_HUMANITARIANISM</a> ) &amp;&amp;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                                       !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#afacb3f9c6c50e496fc7589331d4d6900">json_flag_STRICT_HUMANITARIAN</a> ) );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span>( ( food_is_human_flesh &amp;&amp; !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#afd88da6401595fae37dec376750634c4">json_character_flag</a>( <span class="stringliteral">&quot;CANNIBAL&quot;</span> ) ) ) &amp;&amp;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        ( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) || ( !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) ) ) ) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The thought of eating human flesh makes you feel sick.&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc">CANNIBALISM</a> );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;parasites &gt; 0 &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> ) &amp;&amp;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a34738600216df5bb152c9fa395859298">json_flag_PARAIMMUNE</a> ) &amp;&amp; ( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) ||</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                ( !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) ) ) ) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        add_consequence( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Consuming this %s probably isn&#39;t very healthy.&quot;</span> ),</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                        food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ),</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                         <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde">PARASITES</a> );</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> edible = comest-&gt;comesttype == <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a> || food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span>( edible &amp;&amp; <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a> ) ) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You still feel nauseous and will probably puke it all up again.&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093">NAUSEA</a> );</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">allergy_type</a>( food ) != <a class="code" href="morale__types_8cpp.html#ae95b6eefc4c6ba6583014d4792b51814">MORALE_NULL</a> ) || ( carnivore &amp;&amp; food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a> ) &amp;&amp;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> ) ) ) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your stomach won&#39;t be happy (allergy).&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507">ALLERGY</a> );</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span>( saprophage &amp;&amp; edible &amp;&amp; !food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aff57c2d9ce2b1ec14e6f149a06856192">flag_FERTILIZER</a> ) ) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="comment">// Note: We&#39;re allowing all non-solid &quot;food&quot;. This includes drugs</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="comment">// Hard-coding fertilizer for now - should be a separate flag later</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="comment">//~ No, we don&#39;t eat &quot;rotten&quot; food. We eat properly aged food, like a normal person.</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="comment">//~ Semantic difference, but greatly facilitates people being proud of their character.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your stomach won&#39;t be happy (not rotten enough).&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f">ALLERGY_WEAK</a> );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        ( food.<a class="code" href="classitem.html#a902e330a0505ae225e2ed05921bdf004">charges_per_volume</a>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a61965ae62b9e92eee00d8a10999145f2">stomach_remaining</a>( *<span class="keyword">this</span> ) ) &lt; 1 ||</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a> ) || <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a> ) ) ) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">if</span>( edible ) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re full already and will be forcing yourself to eat.&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1">TOO_FULL</a> );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            add_consequence( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re full already and will be forcing yourself to drink.&quot;</span> ), <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1">TOO_FULL</a> );</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span>( !consequences.empty() ) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">if</span>( !interactive ) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">return</span> consequences.front();</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        std::string req;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : consequences ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            req += elem.str() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> eat_verb  = food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        std::string food_tame = food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keyword">const</span> <a class="code" href="classnc__color.html">nc_color</a> food_color = food.<a class="code" href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">color_in_inventory</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span>( eat_verb || comest-&gt;comesttype == <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a> ) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            req += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Eat your %s anyway?&quot;</span> ), <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( food_tame, food_color ) );</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !eat_verb &amp;&amp; comest-&gt;comesttype == <a class="code" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a> ) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            req += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Drink your %s anyway?&quot;</span> ), <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( food_tame, food_color ) );</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            req += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Consume your %s anyway?&quot;</span> ), <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( food_tame, food_color ) );</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( req ) ) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">return</span> consequences.front();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// All checks ended, it&#39;s edible (or we&#39;re pretending it is)</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;edible_rating&gt;::make_success</a>();</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">/** Eat a comestible.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">*   @return true if item consumed.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a76e79c12085ff0828efd8fd6669bd718"> 1031</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="consumption_8cpp.html#a76e79c12085ff0828efd8fd6669bd718">eat</a>( <a class="code" href="classitem.html">item</a> &amp;food, <a class="code" href="classCharacter.html">Character</a> &amp;you, <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> )</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;{</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> ? you.<a class="code" href="classCharacter.html#a04df4efd633604ed5b88827b8072a1d2">can_eat</a>( food ) : you.<a class="code" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">will_eat</a>( food, you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() );</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.success() ) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordtype">int</span> charges_used = 0;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7ff45d94507fdbf7369ae269a0f1e52b">has_use</a>() ) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;PETFOOD&quot;</span> ) ) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            charges_used = food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a76600c0d6a88c8d983838f0df2276212">invoke</a>( &amp;you, food, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ).value_or( 0 );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">if</span>( charges_used &lt;= 0 ) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// Note: the block below assumes we decided to eat it</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">// No coming back from here</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        food.<a class="code" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">spill_contents</a>( you );</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> hibernate = you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="consumption_8cpp.html#a490ad03dab9bfa0cac3c742ec6b92fa0">trait_HIBERNATE</a> );</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> nutr = you.<a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">nutrition_for</a>( food );</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> quench = food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> spoiled = food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>();</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// The item is solid food</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> = food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype == <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a> ||</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                      food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// This item is a drink and not a solid food (and not a thick soup)</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> drinkable = !<a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> &amp;&amp; food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype == <a class="code" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// If neither of the above is true then it&#39;s a drug and shouldn&#39;t get mealtime penalty/bonus</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span>( hibernate &amp;&amp;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        ( you.<a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -60 &amp;&amp; you.<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt; -60 ) &amp;&amp;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        ( you.<a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() - nutr &lt; -60 || you.<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() - quench &lt; -60 ) ) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ve begun stockpiling calories and liquid for hibernation.  You get the feeling that you should prepare for bed, just in case, but you&#39;re hungry again, and you could eat a whole week&#39;s worth of food RIGHT NOW.&quot;</span> ) );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> will_vomit = you.<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a61965ae62b9e92eee00d8a10999145f2">stomach_remaining</a>( you ) &lt; food.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &amp;&amp;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( you.<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">capacity</a>( you ) ) / 2,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                 <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( you.<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() ) ) &gt; <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>(</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                                you.<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">capacity</a>( you ) );</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> saprophage = you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a> );</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span>( spoiled &amp;&amp; !saprophage ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ick, this %s doesn&#39;t taste so good&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="consumption_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a> ) ) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 6_minutes, ( nutr + 1 ) * 6_minutes ) );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spoiled &amp;&amp; saprophage ) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mmm, this %s tastes delicious&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">consume_effects</a>( food ) ) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="comment">// Already consumed by using `food.type-&gt;invoke`?</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span>( charges_used &gt; 0 ) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                food.<a class="code" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">mod_charges</a>( -charges_used );</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        food.<a class="code" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">mod_charges</a>( -1 );</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> amorphous = you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a> );</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="comment">// If it&#39;s poisonous... poison us.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// TODO: Move this to a flag</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a> ) ) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> &gt;= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 2, 4 ) ) {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, food.<a class="code" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> * 10_minutes );</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a>, food.<a class="code" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> * 30_minutes );</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> ) ) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a> ) ) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a>, 6_hours );</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">if</span>( amorphous ) {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You assimilate your %s.&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; assimilates a %s.&quot;</span> ),</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                                   food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( drinkable ) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a> ) &amp;&amp;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) &amp;&amp; !spoiled &amp;&amp; food.<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ick, this %s (rotten) doesn&#39;t taste so good&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drink your %s (rotten).&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drink your %s.&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; drinks a %s.&quot;</span> ),</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                                       food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> ) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a> ) &amp;&amp;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) &amp;&amp; !spoiled &amp;&amp; food.<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ick, this %s (rotten) doesn&#39;t taste so good&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You eat your %s (rotten).&quot;</span> ), food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You eat your %s.&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; eats a %s.&quot;</span> ),</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                       food.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;tool )-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">// Tools like lighters get used</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;tool, 1 );</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="consumption_8cpp.html#a1cdd6de85176097b616ddd8e3e0a9239">bio_taste_blocker</a> ) &amp;&amp; food.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() &lt; 0 &amp;&amp;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        you.<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt; <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>(</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                    food.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() ) ) ) ) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        you.<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                             ( food.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() ) ) );</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5bbef01aea76144ff36db0f90bb82061">flag_FUNGAL_VECTOR</a> ) &amp;&amp; !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a> ) ) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">// The fun changes for these effects are applied in fun_for().</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to ignore its mushy texture, but it leaves you with an awful aftertaste.&quot;</span> ) );</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() &gt; 0 ) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a> ) ) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t taste much of anything with this cold.&quot;</span> ) );</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a> ) ) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t taste much of anything with this flu.&quot;</span> ) );</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Chance to become parasitised</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span>( !will_vomit &amp;&amp; !you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="consumption_8cpp.html#a34738600216df5bb152c9fa395859298">json_flag_PARAIMMUNE</a> ) ) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;parasites &gt; 0 &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> ) &amp;&amp;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;parasites ) &amp;&amp; ( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) ||</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    ( !you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a> ) &amp;&amp; !you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) ) ) ) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="keywordflow">switch</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 3 ) ) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a> ) ) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a> ) ) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                    }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                    you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const diseasetype_id, int&gt; &amp;elem : food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;contamination ) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 100 ) &lt;= elem.second ) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            you.<a class="code" href="classCharacter.html#a5666d0ffe9f8891ffd469b1423ae4b0e">expose_to_disease</a>( elem.first );</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731aca2fad4209c1d17ff0c45a845a3ab952">event_type::character_eats_item</a>&gt;( you.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), food.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span>( will_vomit ) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        you.<a class="code" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>();</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    you.<a class="code" href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">consumption_history</a>.emplace_back( food );</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// Clean out consumption_history so it doesn&#39;t get bigger than needed.</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">while</span>( you.<a class="code" href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">consumption_history</a>.front().time &lt; <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - 2_days ) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        you.<a class="code" href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">consumption_history</a>.pop_front();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    you.<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"><a class="line" href="classCharacter.html#abcc868bf2ce6d77beb80fe1e57fec732"> 1229</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#abcc868bf2ce6d77beb80fe1e57fec732">Character::modify_health</a>( <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest )</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;{</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> effective_health = comest.<a class="code" href="structislot__comestible.html#aea71935dc37b7f711efb6f8d9ca5353d">healthy</a>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">// Effectively no cap on health modifiers from food and meds</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> health_cap = 200;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( effective_health, effective_health &gt;= 0 ? health_cap : -health_cap );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;}</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"><a class="line" href="classCharacter.html#a187c642b9a6ea2a8c8b1a257ecd11f3e"> 1237</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a187c642b9a6ea2a8c8b1a257ecd11f3e">Character::modify_stimulation</a>( <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest )</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;{</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">if</span>( comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> == 0 ) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    }</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> current_stim = <a class="code" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> ) * 3 ) &gt; <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( current_stim ) ) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> );</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> &gt; 0 ? <a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> / 2, 1 ) ) : <a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> / 2,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                -1 ) );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a> ) &amp;&amp; ( current_stim &gt; 30 ) &amp;&amp;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        ( comest.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.count( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( <span class="stringliteral">&quot;caffeine&quot;</span> ) ) ) ||</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;          comest.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.count( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( <span class="stringliteral">&quot;amphetamine&quot;</span> ) ) ) ||</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;          comest.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.count( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( <span class="stringliteral">&quot;cocaine&quot;</span> ) ) ) ||</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;          comest.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.count( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( <span class="stringliteral">&quot;crack&quot;</span> ) ) ) ) ) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordtype">int</span> hallu_duration = ( current_stim - comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a> &lt; 30 ) ? current_stim - 30 : comest.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="consumption_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a>, hallu_duration * 30_minutes );</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;comest_stimulant&quot;</span> ).value_or(</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                               <a class="code" href="classtranslation.html">translation</a>() ).translated() );</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;}</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="classCharacter.html#ab630cb0e15ca7dac1a8dc7f678b1baaf"> 1261</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#ab630cb0e15ca7dac1a8dc7f678b1baaf">Character::modify_sleepiness</a>( <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest )</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;{</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( -comest.<a class="code" href="structislot__comestible.html#ae639a11c4df8f98c9f0ddd5e5d6056ac">sleepiness_mod</a> );</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="classCharacter.html#a135907caa62db71b58cb8a46e8180ce6"> 1266</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a135907caa62db71b58cb8a46e8180ce6">Character::modify_addiction</a>( <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest )</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;{</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const addiction_id, int&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a> : comest.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a> ) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="classCharacter.html#ac84dbe117868448cfe201c691aae97ce">add_addiction</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.first, <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.second );</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.first.is_null() &amp;&amp; <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.first-&gt;get_craving_morale() != <a class="code" href="morale__types_8cpp.html#ae95b6eefc4c6ba6583014d4792b51814">MORALE_NULL</a> ) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.first-&gt;get_craving_morale() );</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="classCharacter.html#a2aa55d8bbc2485b0f02b7c4f7af79605"> 1276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a2aa55d8bbc2485b0f02b7c4f7af79605">Character::modify_morale</a>( <a class="code" href="classitem.html">item</a> &amp;food, <span class="keyword">const</span> <span class="keywordtype">int</span> nutr )</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;{</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> morale_time = 2_hours;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> ) &amp;&amp; food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e8c0f9f3287ada7724cea507f6e0987">flag_EATEN_HOT</a> ) ) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        morale_time = 3_hours;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordtype">int</span> clamped_nutr = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 5, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 20, nutr / 10 ) );</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#aaa5338b2599dee343776a16d858acd72">MORALE_FOOD_HOT</a>, clamped_nutr, 20, morale_time, morale_time / 2 );</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    std::pair&lt;int, int&gt; fun = <a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( food );</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span>( fun.first &lt; 0 ) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ae5bf12aa6533cebf50765069d6d78eb0">MORALE_FOOD_BAD</a>, fun.first, fun.second, morale_time, morale_time / 2, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                    food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fun.first &gt; 0 ) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, fun.first, fun.second, morale_time, morale_time / 2, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">// Morale bonus for eating unspoiled food with chair/table nearby</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="comment">// Does not apply to non-ingested consumables like bandages or drugs,</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">// nor to drinks.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ade116ad17485c3e65cae5e4c97bdfe82">flag_NO_INGEST</a> ) &amp;&amp;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype != <span class="stringliteral">&quot;MED&quot;</span> &amp;&amp;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype != <a class="code" href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a> ) {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#ac3bf0bb1a236721dee4d14c530f39bb2">has_nearby_chair</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) &amp;&amp; here.<a class="code" href="classmap.html#a92332e252062d545551d1563dc168f6f">has_nearby_table</a>( <a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), 1 ) ) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abcd495ec2c957abfe94ca8883f0f793a">trait_TABLEMANNERS</a> ) ) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#a2613ba7c206b9ecbf42c719b35d05e94">MORALE_ATE_WITHOUT_TABLE</a> );</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                    <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a570c61f0865469e9c72de5d007d70e0b">MORALE_ATE_WITH_TABLE</a>, 3, 3, 3_hours, 2_hours, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a570c61f0865469e9c72de5d007d70e0b">MORALE_ATE_WITH_TABLE</a>, 1, 1, 3_hours, 2_hours, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abcd495ec2c957abfe94ca8883f0f793a">trait_TABLEMANNERS</a> ) ) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#a570c61f0865469e9c72de5d007d70e0b">MORALE_ATE_WITH_TABLE</a> );</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a2613ba7c206b9ecbf42c719b35d05e94">MORALE_ATE_WITHOUT_TABLE</a>, -2, -4, 3_hours, 2_hours, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> ) ) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a> ) ) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, 36, 72, 2_hours, 1_hours, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, 18, 36, 1_hours, 30_minutes, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> food_is_human_flesh = food.<a class="code" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">has_vitamin</a>( <a class="code" href="consumption_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a> ) ||</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                                     ( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae424edc38996e744b841b99eceee2a52">flag_STRICT_HUMANITARIANISM</a> ) &amp;&amp;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                                       !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#afacb3f9c6c50e496fc7589331d4d6900">json_flag_STRICT_HUMANITARIAN</a> ) );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span>( food_is_human_flesh ) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="comment">// Sapiovores don&#39;t recognize humans as the same species.</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="comment">// But let them possibly feel cool about eating sapient stuff - treat like psycho</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="comment">// However, spiritual sapiovores should still recognize humans as having a soul or special for religious reasons</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> cannibal = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a> );</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> psycho = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a> );</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> sapiovore = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a> );</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> spiritual = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a9c50a91087bb8b69be248a2035381481">json_flag_SPIRITUAL</a> );</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacemorale__mults.html#a79ec1234f37d505b7a12ce3e8ce6fa77">numb</a> = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a12b3a40517ad5a90dd53ff7314637ac9">json_flag_NUMB</a> );</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keywordflow">if</span>( cannibal &amp;&amp; psycho &amp;&amp; spiritual ) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feast upon the human flesh, and in doing so, devour their spirit.&quot;</span> ) );</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="comment">// You&#39;re not really consuming anything special; you just think you are.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 25, 300 );</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cannibal &amp;&amp; psycho ) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feast upon the human flesh.&quot;</span> ) );</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 15, 200 );</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cannibal &amp;&amp; spiritual ) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You consume the sacred human flesh.&quot;</span> ) );</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <span class="comment">// Boosted because you understand the philosophical implications of your actions, and YOU LIKE THEM.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 15, 200 );</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sapiovore &amp;&amp; spiritual ) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You eat the human flesh, and in doing so, devour their spirit.&quot;</span> ) );</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 10, 50 );</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cannibal ) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You indulge your shameful hunger.&quot;</span> ) );</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 10, 50 );</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( psycho &amp;&amp; spiritual ) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You greedily devour the taboo meat.&quot;</span> ) );</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="comment">// Small bonus for violating a taboo.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, 5, 50 );</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a> ) &amp;&amp; food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) ) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The human blood tastes as good as any other.&quot;</span> ) );</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( psycho ) {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Meh.  You&#39;ve eaten worse.&quot;</span> ) );</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sapiovore ) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mmh.  Tastes like venison.&quot;</span> ) );</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a> ) &amp;&amp; food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> ) ) {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>(</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Despite your cravings, you still can&#39;t help feeling weird about drinking somebody&#39;s blood.&quot;</span> ) );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, -10, -30, 30_minutes, 15_minutes );</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spiritual ) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is probably going to count against you if there&#39;s still an afterlife.&quot;</span> ) );</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, -60, -400, 60_minutes, 30_minutes );</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespacemorale__mults.html#a79ec1234f37d505b7a12ce3e8ce6fa77">numb</a> ) {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You find this meal distasteful, but necessary.&quot;</span> ) );</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, -60, -400, 60_minutes, 30_minutes );</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel horrible for eating a person.&quot;</span> ) );</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a>, -60, -400, 60_minutes, 30_minutes );</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">// While raw flesh usually means negative morale, carnivores and cullers get a small bonus.</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// Hunters, predators, and apex predators don&#39;t mind raw flesh at all, maybe even like it.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// Cooked flesh is unaffected, because people with these traits *prefer* it raw. Fat is unaffected.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// Organs are still usually negative due to fun values as low as -35.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">// The PREDATOR_FUN flag shouldn&#39;t be on human flesh, to not interfere with sapiovores/cannibalism.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a65cd643a2329d67a93575027727901f1">flag_PREDATOR_FUN</a> ) ) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> carnivore = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> );</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> culler = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#ab161c367d797bc9d5e28ce6b0871ece9">json_flag_PRED1</a> );</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> hunter = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a3fe50e2a044ddb139e163b6ee5307976">json_flag_PRED2</a> );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> predator = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a069155201566d16196b847fb0cbf9330">json_flag_PRED3</a> );</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> apex_predator = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#a0aeb430b1b8655823e9d45ab7aecf11d">json_flag_PRED4</a> );</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="keywordflow">if</span>( apex_predator ) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="comment">// Largest bonus, balances out to around +5 or +10. Some organs may still be negative.</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a39fc566951d4c0c32246d3bae87d6b6b">MORALE_MEATARIAN</a>, 20, 10 );</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;As you tear into the raw flesh, you feel satisfied with your meal.&quot;</span> ) );</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( predator || hunter ) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            <span class="comment">// Should approximately balance the fun to 0 for normal meat.</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a39fc566951d4c0c32246d3bae87d6b6b">MORALE_MEATARIAN</a>, 15, 5 );</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Raw flesh doesn&#39;t taste all that bad, actually.&quot;</span> ) );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( carnivore || culler ) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <span class="comment">// Only a small bonus (+5), still negative fun.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a39fc566951d4c0c32246d3bae87d6b6b">MORALE_MEATARIAN</a>, 5, 0 );</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This doesn&#39;t taste very good, but meat is meat.&quot;</span> ) );</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// Allergy check for food that is ingested (not gum)</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ade116ad17485c3e65cae5e4c97bdfe82">flag_NO_INGEST</a> ) ) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">morale_type</a> allergy = <a class="code" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">allergy_type</a>( food );</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">if</span>( allergy != <a class="code" href="morale__types_8cpp.html#ae95b6eefc4c6ba6583014d4792b51814">MORALE_NULL</a> ) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your stomach begins gurgling and you feel bloated and ill.&quot;</span> ) );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( allergy, -75, -400, 30_minutes, 24_minutes );</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a> ) ) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#aa529aa8fed8701f3f231986398f2d95d">trait_PROJUNK</a> ) ) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mmm, junk food.&quot;</span> ) );</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a47333d246e87662bad4ddb36c8212855">MORALE_SWEETTOOTH</a>, 5, 30, 30_minutes, 24_minutes );</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a70d7f27f057587e54b30196e6c58ad09">trait_PROJUNK2</a> ) ) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                    <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;When life&#39;s got you down, there&#39;s always sugar.&quot;</span> ) );</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                    <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;They may do what they must you&#39;ve already won.&quot;</span> ) );</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a47333d246e87662bad4ddb36c8212855">MORALE_SWEETTOOTH</a>, 10, 50, 1_hours, 50_minutes );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="comment">// Carnivores CAN eat junk food, but they won&#39;t like it much.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <span class="comment">// Pizza-scraping happens in consume_effects.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> ) &amp;&amp; !food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> ) ) {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your stomach begins gurgling and you feel bloated and ill.&quot;</span> ) );</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a68694c468b07b54d28a9ba55ad62380d">MORALE_NO_DIGEST</a>, -25, -125, 30_minutes, 24_minutes );</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            }</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> = food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype == <a class="code" href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a> ||</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                      food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() &amp;&amp; <a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a> ) ) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="comment">// It&#39;s OK to *drink* things that haven&#39;t rotted.  Alternative is to ban water.  D:</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your stomach begins gurgling and you feel bloated and ill.&quot;</span> ) );</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a68694c468b07b54d28a9ba55ad62380d">MORALE_NO_DIGEST</a>, -75, -400, 30_minutes, 24_minutes );</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a> ) &amp;&amp; ( !<a class="code" href="classCharacter.html#a3ecd6260cdd64e5e520d834f03e449bd">crossed_threshold</a>() ||</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a557169ee6dc6d09dfed331f1819983d5">trait_THRESH_URSINE</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <a class="code" href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">mutation_category_level</a>[<a class="code" href="consumption_8cpp.html#a3b7437aa889d3736503d4ccdd7743001">mutation_category_URSINE</a>] &gt; 20 ) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="keywordtype">int</span> honey_fun = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">mutation_category_level</a>[<a class="code" href="consumption_8cpp.html#a3b7437aa889d3736503d4ccdd7743001">mutation_category_URSINE</a>] / 5, 20 );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">if</span>( honey_fun &lt; 10 ) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You find the sweet taste of honey surprisingly palatable.&quot;</span> ) );</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feast upon the sweet honey.&quot;</span> ) );</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a0526ed49652901e606e16ddc54b34507">MORALE_HONEY</a>, honey_fun, 100 );</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">// Used when determining stomach fullness from eating.</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"><a class="line" href="classCharacter.html#af7942ab199db67bd6c56bc5317ae2b1f"> 1461</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classCharacter.html#af7942ab199db67bd6c56bc5317ae2b1f">Character::compute_effective_food_volume_ratio</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food )<span class="keyword"> const</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keyword">const</span> <a class="code" href="structnutrients.html">nutrients</a> food_nutrients = <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( food );</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> food_weight = ( food.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, food.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() ) );</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordtype">double</span> ratio = 1.0f;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( food_weight ) != 0 ) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        ratio = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( food_nutrients.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() ) / <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( food_weight ),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                          1.0 );</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="keywordflow">if</span>( ratio &gt; 3.0f ) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            ratio = <a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>( 3 * ratio );</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">return</span> ratio;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">// Remove the water volume from the food, as that gets absorbed and used as water.</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">// If the remaining dry volume of the food is less dense than water, crunch it down to a density equal to water.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">// These maths are made easier by the fact that 1 g = 1 mL. Thanks, metric system.</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="classCharacter.html#a7a5185217f0eaf3bf38f6e1ee3587f14"> 1479</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classCharacter.html#a7a5185217f0eaf3bf38f6e1ee3587f14">Character::masticated_volume</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food )<span class="keyword"> const</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> water_vol = ( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench &gt; 0 ) ? food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench *</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                              5_ml : 0_ml;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> water_weight = <a class="code" href="namespaceunits.html#a6d621878032da8dfad8b4e3460c82932">units::from_gram</a>( <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( water_vol ) );</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">// handle the division by zero exception when the food count is 0 with std::max()</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> food_dry_weight = food.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, food.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() ) - water_weight;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> food_dry_volume = food.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, food.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() ) - water_vol;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( food_dry_volume ) != 0 &amp;&amp;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( food_dry_weight ) &lt; <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( food_dry_volume ) ) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        food_dry_volume = <a class="code" href="namespaceunits.html#a4a90c93a4ae16f8f9a6a3bb554c7fa7c">units::from_milliliter</a>( <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( food_dry_weight ) );</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> food_dry_volume;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">// Used when displaying effective food satiation values.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"><a class="line" href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082"> 1497</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">Character::compute_calories_per_effective_volume</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food,</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="keyword">const</span> <a class="code" href="structnutrients.html">nutrients</a> *nutrient <span class="comment">/* = nullptr */</span> )<span class="keyword">const</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">/* Understanding how Calories Per Effective Volume are calculated requires a dive into the</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">    stomach fullness source code. Look at issue #44365*/</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordtype">int</span> kcalories;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">if</span>( nutrient ) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="comment">// if given the optional nutrient argument, we will compute kcal based on that. ( Crafting menu ).</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        kcalories = nutrient-&gt;<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        kcalories = <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( food ).<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>();</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    }</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordtype">double</span> food_vol = <a class="code" href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a>( <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a>( <a class="code" href="classCharacter.html#a7a5185217f0eaf3bf38f6e1ee3587f14">masticated_volume</a>( food ) ), 2 );</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> energy_density_ratio = <a class="code" href="classCharacter.html#af7942ab199db67bd6c56bc5317ae2b1f">compute_effective_food_volume_ratio</a>( food );</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> effective_volume = food_vol * energy_density_ratio;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span>( kcalories == 0 &amp;&amp; effective_volume == 0.0 ) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( kcalories / effective_volume );</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016"> 1518</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016">activate_consume_eocs</a>( <a class="code" href="classCharacter.html">Character</a> &amp;you, <a class="code" href="classitem.html">item</a> &amp;target )</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;{</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="classCharacter.html">Character</a> *char_ptr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html">avatar</a> *<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = you.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>() ) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        char_ptr = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *n = you.<a class="code" href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">as_npc</a>() ) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        char_ptr = n;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc( you, &amp;target );</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( char_ptr ), <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( loc ) );</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest = *target.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">effect_on_condition_id</a> &amp;<a class="code" href="enums_8h.html#aa183bf705d2a0eb8309dfc13fb1adddcae2b21aece1b9f853bc86e1b7ae8b4812">eoc</a> : comest.<a class="code" href="structislot__comestible.html#a0cead51d294f00b5b9be3bdcb98ba030">consumption_eocs</a> ) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <a class="code" href="enums_8h.html#aa183bf705d2a0eb8309dfc13fb1adddcae2b21aece1b9f853bc86e1b7ae8b4812">eoc</a>-&gt;activate( d );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;}</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"><a class="line" href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6"> 1534</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">Character::consume_effects</a>( <a class="code" href="classitem.html">item</a> &amp;food )</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">if</span>( !food.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;called Character::consume_effects with non-comestible&quot;</span> );</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a> ) &amp;&amp; food.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;PLANTBLECH&quot;</span> ) ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="comment">// Was used to cap nutrition and thirst, but no longer does this</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a17cdfd8aef2fd5e8fceb6c62d37fa741">trait_HERBIVORE</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        food.<a class="code" href="classitem.html#aca5abd8656e123435b97da00608a5daa">has_any_flag</a>( <a class="code" href="consumption_8cpp.html#ac15837ea0bd197c8556d41b2af9cee36">herbivore_blacklist</a> ) ) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="comment">// No good can come of this.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest = *food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// Rotten food causes health loss</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> relative_rot = food.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span>( relative_rot &gt; 1.0f &amp;&amp; !<a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="consumption_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a> ) ) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> rottedness = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( 2 * relative_rot - 2.0f, 0.1f, 1.0f );</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="comment">// ~-1 health per 1 nutrition at halfway-rotten-away, ~0 at &quot;just got rotten&quot;</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="comment">// But always round down</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordtype">int</span> h_loss = -rottedness * comest.<a class="code" href="structislot__comestible.html#ac2cb22e853ef3d01e923f5310a34da92">get_default_nutr</a>();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( h_loss, -200 );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a0b22ff8ac3965ca766f92684b914aa73">debugmode::DF_FOOD</a>, <span class="stringliteral">&quot;%d health from %0.2f%% rotten food&quot;</span>, h_loss, rottedness );</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">// Used in hibernation messages.</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> nutr = <a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">nutrition_for</a>( food );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> skip_health = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a70d7f27f057587e54b30196e6c58ad09">trait_PROJUNK2</a> ) &amp;&amp; comest.<a class="code" href="structislot__comestible.html#aea71935dc37b7f711efb6f8d9ca5353d">healthy</a> &lt; 0;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">// We can handle junk just fine</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span>( !skip_health ) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="classCharacter.html#abcc868bf2ce6d77beb80fe1e57fec732">modify_health</a>( comest );</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="classCharacter.html#a187c642b9a6ea2a8c8b1a257ecd11f3e">modify_stimulation</a>( comest );</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="classCharacter.html#ab630cb0e15ca7dac1a8dc7f678b1baaf">modify_sleepiness</a>( comest );</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <a class="code" href="classCharacter.html#a135907caa62db71b58cb8a46e8180ce6">modify_addiction</a>( comest );</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="classCharacter.html#a2aa55d8bbc2485b0f02b7c4f7af79605">modify_morale</a>( food, nutr );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> hibernate = <a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="consumption_8cpp.html#a490ad03dab9bfa0cac3c742ec6b92fa0">trait_HIBERNATE</a> );</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">if</span>( hibernate ) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">if</span>( ( nutr &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; -60 ) || ( comest.<a class="code" href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">quench</a> &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; -60 ) ) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <span class="comment">// Tell the player what&#39;s going on</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You gorge yourself, preparing to hibernate.&quot;</span> ) );</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                <span class="comment">// 50% chance of the food tiring you</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                <a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( nutr );</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">if</span>( ( nutr &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; -200 ) || ( comest.<a class="code" href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">quench</a> &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; -200 ) ) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <span class="comment">// Hibernation should cut burn to 60/day</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel stocked for a day or two.  Got your bed all ready and secured?&quot;</span> ) );</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                <span class="comment">// And another 50%, intended cumulative</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                <a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( nutr );</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">if</span>( ( nutr &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; -400 ) || ( comest.<a class="code" href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">quench</a> &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; -400 ) ) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>(</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mmm.  You can still fit some more in but maybe you should get comfortable and sleep.&quot;</span> ) );</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="comment">// Third check, this one at 66%</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                <a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( nutr );</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">if</span>( ( nutr &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; -600 ) || ( comest.<a class="code" href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">quench</a> &gt; 0 &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; -600 ) ) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That filled a hole!  Time for bed&quot;</span> ) );</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="comment">// At this point, you&#39;re done.  Schlaf gut.</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            <a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( nutr );</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">// Moved here and changed a bit - it was too complex</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="comment">// Incredibly minor stuff like this shouldn&#39;t require complexity</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() &amp;&amp; <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#a21bda02fdebbb5bafebd2ba308e29262">trait_SLIMESPAWNER</a> ) &amp;&amp;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        ( <a class="code" href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">get_healthy_kcal</a>() &lt; <a class="code" href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">get_stored_kcal</a>() + 4000 &amp;&amp;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;          <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() - <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a434f5541ac7b9fb8fd1a4b6219404278">get_water</a>() / 5_ml &lt; -20 ) &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &lt; 40 ) {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100">m_mixed</a>,</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel as though you&#39;re going to split open!  In a good way?&quot;</span> ) );</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( 5 );</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordtype">int</span> numslime = 1;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; numslime; i++ ) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> slime = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code" href="consumption_8cpp.html#a22b82ff6998caf559fabe67d535d6771">mon_player_blob</a>, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                slime-&gt;friendly = -1;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( 40 );</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 40 );</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="comment">//~ slimespawns have *small voices* which may be the Nice equivalent</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="comment">//~ of the Rat King&#39;s ALL CAPS invective.  Probably shared-brain telepathy.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;hey, you look like me!  let&#39;s work together!&quot;</span> ) );</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    }</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> food_nutrients = <a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( food );</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> water_vol = ( food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench &gt; 0 ) ?</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                                    food.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench *</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                                    5_ml : 0_ml;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> food_vol = <a class="code" href="classCharacter.html#a7a5185217f0eaf3bf38f6e1ee3587f14">masticated_volume</a>( food );</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">if</span>( food.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() == 0 ) {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to eat food with count of zero.&quot;</span> );</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> food_weight = ( food.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / food.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() );</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = <a class="code" href="classCharacter.html#af7942ab199db67bd6c56bc5317ae2b1f">compute_effective_food_volume_ratio</a>( food );</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="structfood__summary.html">food_summary</a> ingested{</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        water_vol,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        food_vol * ratio,</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        food_nutrients</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    };</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a0b22ff8ac3965ca766f92684b914aa73">debugmode::DF_FOOD</a>,</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                   <span class="stringliteral">&quot;Effective volume: %d (solid) %d (liquid)\n multiplier: %g calories: %d, weight: %d&quot;</span>,</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                   <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( ingested.solids ), <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( ingested.water ), ratio,</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                   food_nutrients.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>(), <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( food_weight ) );</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// Maybe move tapeworm to digestion</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="consumption_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> ) ) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        ingested.nutr /= 2;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    }</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// to do: reduce nutrition by a factor of the amount of muscle to be rebuilt?</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <a class="code" href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016">activate_consume_eocs</a>( *<span class="keyword">this</span>, food );</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="comment">// GET IN MAH BELLY!</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a96eccd372c5b0f42ca47bfd7bfeabaec">ingest</a>( ingested );</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="comment">// update speculative values</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classavatar.html#afec92019a1c7cdbe52dc959faccdf1ba">add_ingested_kcal</a>( ingested.nutr.calories / 1000 );</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v : ingested.nutr.vitamins() ) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <span class="comment">// update the estimated values for daily vitamins</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="comment">// actual vitamins happen during digestion</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">daily_vitamins</a>[v.first].first += v.second;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;}</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"><a class="line" href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835"> 1673</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">Character::can_estimate_rot</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">get_greater_skill_or_knowledge_level</a>( <a class="code" href="consumption_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a> ) &gt;= 3 ||</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;           <a class="code" href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">get_greater_skill_or_knowledge_level</a>( <a class="code" href="consumption_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) &gt;= 4;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;}</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"><a class="line" href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5"> 1679</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">Character::can_consume_as_is</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <span class="keywordflow">return</span> !it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) || it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6cc23010744e8a0b4f25da27bb3ffef8">flag_EDIBLE_FROZEN</a> ) ||</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;               it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a> );</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="classCharacter.html#ad58bc3e4db2aa237a070695ca2746ee5"> 1688</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classCharacter.html#ad58bc3e4db2aa237a070695ca2746ee5">Character::get_consumable_from</a>( <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="classitem.html">item</a> *<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    it.<a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>( [&amp;]( <a class="code" href="classitem.html">item</a> * it, <a class="code" href="classitem.html">item</a> * ) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">can_consume_as_is</a>( *it ) ) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = it;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38">VisitResponse::ABORT</a>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    } );</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keyword">static</span> <a class="code" href="classitem.html">item</a> null_comestible;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="comment">// Since it&#39;s not const.</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    null_comestible = <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>();</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">return</span> null_comestible;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;}</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"><a class="line" href="classCharacter.html#a15e1412dda3489886688216c4ef7da34"> 1709</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">Character::get_consume_time</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> charges = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, 1 );</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> = <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( it.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) / charges;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span>( 0 == <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> &amp;&amp; it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> = <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> );</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> /</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                         5 ), 1 ) );  <span class="comment">//Default 5 mL (1 tablespoon) per second</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordtype">float</span> consume_time_modifier = 1.0f;<span class="comment">//only for food and drinks</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> eat_verb = it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a> );</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keyword">const</span> std::string comest_type = it.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>() ? it.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span>( eat_verb || comest_type == <span class="stringliteral">&quot;FOOD&quot;</span> ) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> / 5 ); <span class="comment">//Eat 5 mL (1 teaspoon) per second</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        consume_time_modifier = <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998acfad87a34dc4500607772ea99ab1fb00">enchant_vals::mod::CONSUME_TIME_MOD</a>,</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                consume_time_modifier );</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !eat_verb &amp;&amp; comest_type == <span class="stringliteral">&quot;DRINK&quot;</span> ) {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> / 15 ); <span class="comment">//Drink 15 mL (1 tablespoon) per second</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        consume_time_modifier = <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998acfad87a34dc4500607772ea99ab1fb00">enchant_vals::mod::CONSUME_TIME_MOD</a>,</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                                consume_time_modifier );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="structuse__function.html">use_function</a> <span class="keyword">const</span> *fun = it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;heal&quot;</span> ) ) {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        time = <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classheal__actor.html">heal_actor</a> <span class="keyword">const </span>*<span class="keyword">&gt;</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                                          ( fun-&gt;get_actor_ptr() )-&gt;<a class="code" href="classheal__actor.html#aabc136d2d44a5c6a6cfaf2a5ac779ffe">move_cost</a> );</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() ) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *consume_drug = it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;consume_drug&quot;</span> );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">smoking</a> = it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;SMOKING&quot;</span> );</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">adrenaline_injector</a> = it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;ADRENALINE_INJECTOR&quot;</span> );</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordflow">if</span>( consume_drug != <span class="keyword">nullptr</span> ) { <span class="comment">//its a drug</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="keyword">const</span> <a class="code" href="classconsume__drug__iuse.html">consume_drug_iuse</a> *consume_drug_use = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classconsume__drug__iuse.html">consume_drug_iuse</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                    ( consume_drug-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keywordflow">if</span>( consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.find( <a class="code" href="consumption_8cpp.html#ac94da8d391815c77827574ea45ba553b">itype_syringe</a> ) != consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.end() &amp;&amp;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="consumption_8cpp.html#a0378c4d7c8bedb3b625c06e488f25dd9">bio_syringe</a> ) ) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>(</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                           15 );<span class="comment">//injections with the intradermal needle CBM are much quicker than with a normal syringe</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.find( <a class="code" href="consumption_8cpp.html#ac94da8d391815c77827574ea45ba553b">itype_syringe</a> ) !=</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                       consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.end() ) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                time = <a class="code" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( 5 );<span class="comment">//sterile injections take 5 minutes</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.find( <a class="code" href="consumption_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a> ) !=</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                       consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.end() ||</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                       consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.find( <a class="code" href="consumption_8cpp.html#ac67e14738c5ef9bb790ea7a74fbd2615">itype_dab_pen_on</a> ) != consume_drug_use-&gt;<a class="code" href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">tools_needed</a>.end() ) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( 30 );<span class="comment">//smoke a bowl</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( 5 );<span class="comment">//popping a pill is quick</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">smoking</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            time = <a class="code" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( 1 );<span class="comment">//about five minutes for a cig or joint so 1 minute a charge</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">adrenaline_injector</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <span class="comment">//epi-pens, and disinfectant are fairly quick</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( 15 );</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( 5 ); <span class="comment">//probably pills so quick</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        }</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>().<a class="code" href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">get_id</a>() == <a class="code" href="consumption_8cpp.html#ab84378f54d9b560be4da46cfd61fd61a">item_category_chems</a> ) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        time = <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( <a class="code" href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">volume</a> / 15 ),</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                                            1 ) ); <span class="comment">//Consume 15 mL (1 tablespoon) per second</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        consume_time_modifier = <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998acfad87a34dc4500607772ea99ab1fb00">enchant_vals::mod::CONSUME_TIME_MOD</a>,</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                                consume_time_modifier );</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="comment">// Minimum consumption time, without mutations, is always 1 second.</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    time = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1_seconds, time );</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160; </div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">return</span> time * consume_time_modifier;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abfb243f6549dfbca090494f3a25c0e50"> 1774</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="consumption_8cpp.html#abfb243f6549dfbca090494f3a25c0e50">query_consume_ownership</a>( <a class="code" href="classitem.html">item</a> &amp;target, <a class="code" href="classCharacter.html">Character</a> &amp;p )</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;{</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">if</span>( !target.<a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( p, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="keywordtype">bool</span> choice = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_ASK&quot;</span> ) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            choice = <a class="code" href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">Pickup::query_thief</a>();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_HONEST&quot;</span> || !choice ) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        std::vector&lt;npc *&gt; witnesses;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classnpc.html">npc</a> &amp;elem : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_npcs() ) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( elem.pos(), p.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &lt; <a class="code" href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a> &amp;&amp; elem.sees( p.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                witnesses.push_back( &amp;elem );</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classnpc.html">npc</a> *elem : witnesses ) {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            elem-&gt;say( <span class="stringliteral">&quot;&lt;witnessed_thievery&gt;&quot;</span>, 7 );</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">if</span>( !witnesses.empty() &amp;&amp; target.<a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( p, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a97f88c71321338694d7d279b72a55b00">add_faction_warning</a>( target.<a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>() ) ) {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classnpc.html">npc</a> *elem : witnesses ) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                    elem-&gt;make_angry();</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;}</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">/** Consume medication.</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">*   @return true if item consumed.</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"><a class="line" href="consumption_8cpp.html#abe8af68410c678bb0a2ec92e94b4238b"> 1807</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="consumption_8cpp.html#abe8af68410c678bb0a2ec92e94b4238b">consume_med</a>( <a class="code" href="classitem.html">item</a> &amp;target, <a class="code" href="classCharacter.html">Character</a> &amp;you )</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;{</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">if</span>( !target.<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() ) {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> tool_type = target.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;tool;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *req_tool = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( tool_type );</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">if</span>( req_tool-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="keywordflow">if</span>( !( you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( tool_type, 1 ) &amp;&amp;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;               you.<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( tool_type, req_tool-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;charges_per_use ) ) ) {</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a %s to consume that!&quot;</span> ), req_tool-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( tool_type, req_tool-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;charges_per_use );</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordtype">int</span> amount_used = 1;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7ff45d94507fdbf7369ae269a0f1e52b">has_use</a>() ) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        amount_used = target.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a76600c0d6a88c8d983838f0df2276212">invoke</a>( &amp;you, target, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ).value_or( 0 );</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keywordflow">if</span>( amount_used &lt;= 0 ) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="comment">// TODO: Get the target it was used on</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// Otherwise injecting someone will give us addictions etc.</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ade116ad17485c3e65cae5e4c97bdfe82">flag_NO_INGEST</a> ) ) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keyword">const</span> <a class="code" href="structislot__comestible.html">islot_comestible</a> &amp;comest = *target.<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="comment">// Assume that parenteral meds don&#39;t spoil, so don&#39;t apply rot</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        you.<a class="code" href="classCharacter.html#abcc868bf2ce6d77beb80fe1e57fec732">modify_health</a>( comest );</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        you.<a class="code" href="classCharacter.html#a187c642b9a6ea2a8c8b1a257ecd11f3e">modify_stimulation</a>( comest );</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        you.<a class="code" href="classCharacter.html#ab630cb0e15ca7dac1a8dc7f678b1baaf">modify_sleepiness</a>( comest );</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        you.<a class="code" href="classCharacter.html#a135907caa62db71b58cb8a46e8180ce6">modify_addiction</a>( comest );</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        you.<a class="code" href="classCharacter.html#a2aa55d8bbc2485b0f02b7c4f7af79605">modify_morale</a>( target );</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <a class="code" href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016">activate_consume_eocs</a>( you, target );</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <span class="comment">// Take by mouth</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">consume_effects</a>( target ) ) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <a class="code" href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016">activate_consume_eocs</a>( you, target );</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    }</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        target.<a class="code" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">mod_charges</a>( -amount_used );</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;}</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"><a class="line" href="classCharacter.html#af6acf1bc61ff43a2898c8e6cf1dc99a0"> 1857</a></span>&#160;<a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9">trinary</a> <a class="code" href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">Character::consume</a>( <a class="code" href="classitem.html">item</a> &amp;target, <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> )</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have that item.&quot;</span> ) );</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    }</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span>( ( !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="consumption_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    }</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t eat your %s.&quot;</span> ), target.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s tried to eat a %s&quot;</span>, <a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(), target.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; !<a class="code" href="consumption_8cpp.html#abfb243f6549dfbca090494f3a25c0e50">query_consume_ownership</a>( target, *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="consumption_8cpp.html#abe8af68410c678bb0a2ec92e94b4238b">consume_med</a>( target, *<span class="keyword">this</span> ) || <a class="code" href="consumption_8cpp.html#a76e79c12085ff0828efd8fd6669bd718">eat</a>( target, *<span class="keyword">this</span>, <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> ) ) {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731af3d025e4da027a431f94411a64b79edf">event_type::character_consumes_item</a>&gt;( <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), target.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <a class="code" href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">invalidate_weight_carried_cache</a>();</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        target.<a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">return</span> !target.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || target.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt;= 0 ? <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9a5fb1f955b45e38e31789286a1790398d">trinary::ALL</a> : <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9a7c3e1ce969660271ac92e0a5796f5006">trinary::SOME</a>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;}</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"><a class="line" href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d"> 1891</a></span>&#160;<a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9">trinary</a> <a class="code" href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">Character::consume</a>( <a class="code" href="classitem__location.html">item_location</a> loc, <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> )</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;{</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Null loc to consume.&quot;</span> );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classcontents__change__handler.html">contents_change_handler</a> handler;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;target = *loc;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9">trinary</a> result = <a class="code" href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">consume</a>( target, <a class="code" href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a> );</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span>( result != <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a> ) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        handler.<a class="code" href="classcontents__change__handler.html#a327c4c2672f8e662338e72e6a8d1210c">unseal_pocket_containing</a>( loc );</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">if</span>( result == <a class="code" href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9a5fb1f955b45e38e31789286a1790398d">trinary::ALL</a> ) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">if</span>( loc.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() == <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a> ) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() );</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    handler.<a class="code" href="classcontents__change__handler.html#a9d974d798df1e6f9a00bfd01c78c0c3c">handle_by</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div>
<div class="ttc" id="aaddiction_8h_html"><div class="ttname"><a href="addiction_8h.html">addiction.h</a></div></div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acalendar_8h_html_a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612"><div class="ttname"><a href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a></div><div class="ttdeci">@ second</div></div>
<div class="ttc" id="acata__utility_8cpp_html_a179b3f9b48b6d93e55bd110a79054d26"><div class="ttname"><a href="cata__utility_8cpp.html#a179b3f9b48b6d93e55bd110a79054d26">multi_lerp</a></div><div class="ttdeci">float multi_lerp(const std::vector&lt; std::pair&lt; float, float &gt;&gt; &amp;points, float x)</div><div class="ttdoc">From points, finds p1 and p2 such that p1.first &lt; x &lt; p2.first Then linearly interpolates between p1....</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00267">cata_utility.cpp:267</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_a9dbcecb703a6e1111a0552177b6bf9fc"><div class="ttname"><a href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a></div><div class="ttdeci">double round_up(double val, unsigned int dp)</div><div class="ttdoc">Round a value up at a given decimal place.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00054">cata_utility.cpp:54</a></div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">cata_variant_type::addiction_id</a></div><div class="ttdeci">@ addiction_id</div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedf"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedf">edible_rating</a></div><div class="ttdeci">edible_rating</div><div class="ttdoc">how digestible or palatable an item is</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00265">character.h:265</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b">ROTTEN</a></div><div class="ttdeci">@ ROTTEN</div><div class="ttdoc">Rotten (or, for saprophages, not rotten enough)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00281">character.h:281</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a></div><div class="ttdeci">@ INEDIBLE_MUTATION</div><div class="ttdoc">Not food because character has mutated mouth/system.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00271">character.h:271</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde">PARASITES</a></div><div class="ttdeci">@ PARASITES</div><div class="ttdoc">Comestible has parasites.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00279">character.h:279</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc">CANNIBALISM</a></div><div class="ttdeci">@ CANNIBALISM</div><div class="ttdoc">Penalty for eating human flesh (unless psycho/cannibal)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00277">character.h:277</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093">NAUSEA</a></div><div class="ttdeci">@ NAUSEA</div><div class="ttdoc">Can provoke vomiting if you already feel nauseous.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00283">character.h:283</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f">ALLERGY_WEAK</a></div><div class="ttdeci">@ ALLERGY_WEAK</div><div class="ttdoc">Smaller allergy penalty.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00275">character.h:275</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507">ALLERGY</a></div><div class="ttdeci">@ ALLERGY</div><div class="ttdoc">You can eat it, but it will hurt morale because of negative trait such as Hates Fruit.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00273">character.h:273</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1">TOO_FULL</a></div><div class="ttdeci">@ TOO_FULL</div><div class="ttdoc">We can eat this, but we'll suffer from overeat.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00285">character.h:285</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a></div><div class="ttdeci">@ NO_TOOL</div><div class="ttdoc">Some weird stuff that requires a tool we don't have.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00288">character.h:287</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a01a3b9dd92576401225db8f71192f9f0"><div class="ttname"><a href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">Character::mod_pain</a></div><div class="ttdeci">void mod_pain(int npain) override</div><div class="ttdoc">Modifies a pain value by player traits before passing it to Creature::mod_pain()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12483">character.cpp:12483</a></div></div>
<div class="ttc" id="aclassCharacter_html_a04df4efd633604ed5b88827b8072a1d2"><div class="ttname"><a href="classCharacter.html#a04df4efd633604ed5b88827b8072a1d2">Character::can_eat</a></div><div class="ttdeci">ret_val&lt; edible_rating &gt; can_eat(const item &amp;food) const</div><div class="ttdoc">Can the food be [theoretically] eaten no matter the consequences?</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00769">consumption.cpp:769</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0932b7b9d2a60fbbb3f529420c8713d8"><div class="ttname"><a href="classCharacter.html#a0932b7b9d2a60fbbb3f529420c8713d8">Character::reset_daily_vitamin</a></div><div class="ttdeci">void reset_daily_vitamin(const vitamin_id &amp;vit)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00696">consumption.cpp:696</a></div></div>
<div class="ttc" id="aclassCharacter_html_a10008df58d7e74a17110f62d2c45d22b"><div class="ttname"><a href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">Character::consumption_history</a></div><div class="ttdeci">std::list&lt; consumption_event &gt; consumption_history</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02730">character.h:2730</a></div></div>
<div class="ttc" id="aclassCharacter_html_a135907caa62db71b58cb8a46e8180ce6"><div class="ttname"><a href="classCharacter.html#a135907caa62db71b58cb8a46e8180ce6">Character::modify_addiction</a></div><div class="ttdeci">void modify_addiction(const islot_comestible &amp;comest)</div><div class="ttdoc">Used to apply addiction modifications from food and medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01266">consumption.cpp:1266</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1489b6f768867a6f784232eeaf9ebfd1"><div class="ttname"><a href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">Character::get_greater_skill_or_knowledge_level</a></div><div class="ttdeci">float get_greater_skill_or_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03461">character.cpp:3461</a></div></div>
<div class="ttc" id="aclassCharacter_html_a15e1412dda3489886688216c4ef7da34"><div class="ttname"><a href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">Character::get_consume_time</a></div><div class="ttdeci">time_duration get_consume_time(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01709">consumption.cpp:1709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a161460f47c0cb64afa7be4ee4c0eea70"><div class="ttname"><a href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">Character::fun_for</a></div><div class="ttdeci">std::pair&lt; int, int &gt; fun_for(const item &amp;comest, bool ignore_already_ate=false) const</div><div class="ttdoc">Handles the enjoyability value for a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00447">consumption.cpp:447</a></div></div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02852">character.cpp:2852</a></div></div>
<div class="ttc" id="aclassCharacter_html_a187c642b9a6ea2a8c8b1a257ecd11f3e"><div class="ttname"><a href="classCharacter.html#a187c642b9a6ea2a8c8b1a257ecd11f3e">Character::modify_stimulation</a></div><div class="ttdeci">void modify_stimulation(const islot_comestible &amp;comest)</div><div class="ttdoc">Used to apply stimulation modifications from food and medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01237">consumption.cpp:1237</a></div></div>
<div class="ttc" id="aclassCharacter_html_a225de862f8875f9ff96ec8a303213404"><div class="ttname"><a href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">Character::has_active_mutation</a></div><div class="ttdeci">bool has_active_mutation(const trait_id &amp;b) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00613">mutation.cpp:613</a></div></div>
<div class="ttc" id="aclassCharacter_html_a24a1143537358b4138e3d9d504847a81"><div class="ttname"><a href="classCharacter.html#a24a1143537358b4138e3d9d504847a81">Character::metabolic_rate</a></div><div class="ttdeci">float metabolic_rate() const</div><div class="ttdoc">Current metabolic rate due to traits, hunger, speed, etc.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00724">consumption.cpp:724</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2725bcbfa9e92e0590930e6a8e35764c"><div class="ttname"><a href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">Character::rem_morale</a></div><div class="ttdeci">void rem_morale(const morale_type &amp;type, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00154">character_morale.cpp:154</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2aa55d8bbc2485b0f02b7c4f7af79605"><div class="ttname"><a href="classCharacter.html#a2aa55d8bbc2485b0f02b7c4f7af79605">Character::modify_morale</a></div><div class="ttdeci">void modify_morale(item &amp;food, int nutr=0)</div><div class="ttdoc">Used to apply morale modifications from food and medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01276">consumption.cpp:1276</a></div></div>
<div class="ttc" id="aclassCharacter_html_a306dfd8496f2ff25cce5ad2a9cc7f80e"><div class="ttname"><a href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">Character::allergy_type</a></div><div class="ttdeci">morale_type allergy_type(const item &amp;food) const</div><div class="ttdoc">Returns allergy type or MORALE_NULL if not allergic for this character.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00746">consumption.cpp:746</a></div></div>
<div class="ttc" id="aclassCharacter_html_a30ae2557de3be7c7e7f353fffc557c91"><div class="ttname"><a href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">Character::compute_effective_nutrients</a></div><div class="ttdeci">nutrients compute_effective_nutrients(const item &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00295">consumption.cpp:295</a></div></div>
<div class="ttc" id="aclassCharacter_html_a314c7e8043648ef9e6189ed8d9de0654"><div class="ttname"><a href="classCharacter.html#a314c7e8043648ef9e6189ed8d9de0654">Character::vitamin_levels</a></div><div class="ttdeci">std::map&lt; vitamin_id, int &gt; vitamin_levels</div><div class="ttdoc">Current deficiency/excess quantity for each vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03963">character.h:3963</a></div></div>
<div class="ttc" id="aclassCharacter_html_a315b653b250c40f9c34fd20253f0e69e"><div class="ttname"><a href="classCharacter.html#a315b653b250c40f9c34fd20253f0e69e">Character::get_daily_vitamin</a></div><div class="ttdeci">int get_daily_vitamin(const vitamin_id &amp;vit, bool actual=true) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00681">consumption.cpp:681</a></div></div>
<div class="ttc" id="aclassCharacter_html_a33d6e3bbc5090845dc9a9353174b8cbb"><div class="ttname"><a href="classCharacter.html#a33d6e3bbc5090845dc9a9353174b8cbb">Character::daily_vitamins</a></div><div class="ttdeci">std::map&lt; vitamin_id, std::pair&lt; int, int &gt; &gt; daily_vitamins</div><div class="ttdoc">Current quantity for each vitamin today first value is expected second value is actual (digested) in ...</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03965">character.h:3965</a></div></div>
<div class="ttc" id="aclassCharacter_html_a358731acbb8b137aa540bb8d49109ca3"><div class="ttname"><a href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">Character::query_yn</a></div><div class="ttdeci">bool query_yn(const char *const msg, Args &amp;&amp;... args) const</div><div class="ttdoc">It is supposed to hide the query_yn to simplify player vs.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02544">character.h:2544</a></div></div>
<div class="ttc" id="aclassCharacter_html_a379081ad133b17e4ab3d230270b2414d"><div class="ttname"><a href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">Character::i_rem</a></div><div class="ttdeci">item i_rem(const item *it)</div><div class="ttdoc">Remove a specific item from player possession.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00433">character_inventory.cpp:433</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdoc">Use charges in character inventory.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09769">character.cpp:9769</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3ecd6260cdd64e5e520d834f03e449bd"><div class="ttname"><a href="classCharacter.html#a3ecd6260cdd64e5e520d834f03e449bd">Character::crossed_threshold</a></div><div class="ttdeci">bool crossed_threshold() const</div><div class="ttdoc">Returns true if the player has crossed a mutation threshold Player can only cross one mutation thresh...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08498">character.cpp:8498</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c9457eefee7feffba03cf6aa4868082"><div class="ttname"><a href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">Character::compute_calories_per_effective_volume</a></div><div class="ttdeci">int compute_calories_per_effective_volume(const item &amp;food, const nutrients *nutrient=nullptr) const</div><div class="ttdoc">Used to to display how filling a food is.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01497">consumption.cpp:1497</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4eb1793aafe89d34ba7ab96bf9facc19"><div class="ttname"><a href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">Character::will_eat</a></div><div class="ttdeci">ret_val&lt; edible_rating &gt; will_eat(const item &amp;food, bool interactive=false) const</div><div class="ttdoc">Same as can_eat, but takes consequences into account.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00923">consumption.cpp:923</a></div></div>
<div class="ttc" id="aclassCharacter_html_a54f90ca736510c41a6539c8d8ad833b6"><div class="ttname"><a href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">Character::consume_effects</a></div><div class="ttdeci">bool consume_effects(item &amp;food)</div><div class="ttdoc">Handles the effects of consuming an item.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01534">consumption.cpp:1534</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5666d0ffe9f8891ffd469b1423ae4b0e"><div class="ttname"><a href="classCharacter.html#a5666d0ffe9f8891ffd469b1423ae4b0e">Character::expose_to_disease</a></div><div class="ttdeci">void expose_to_disease(const diseasetype_id &amp;dis_type)</div><div class="ttdoc">Determine if character is susceptible to dis_type and if so apply the symptoms.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02288">character.cpp:2288</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02648">bionics.cpp:2648</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5903c5bd493f4300e949d8452eb04835"><div class="ttname"><a href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">Character::can_estimate_rot</a></div><div class="ttdeci">bool can_estimate_rot() const</div><div class="ttdoc">True if the character has enough skill (in cooking or survival) to estimate time to rot.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01673">consumption.cpp:1673</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aa889eacdf39af30d230991dd773bd1"><div class="ttname"><a href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">Character::mod_daily_health</a></div><div class="ttdeci">void mod_daily_health(int nhealthy_mod, int cap)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04334">character.cpp:4334</a></div></div>
<div class="ttc" id="aclassCharacter_html_a63b23888fb1be74df6371f5f349ce558"><div class="ttname"><a href="classCharacter.html#a63b23888fb1be74df6371f5f349ce558">Character::volume</a></div><div class="ttdeci">int volume</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00600">character.h:600</a></div></div>
<div class="ttc" id="aclassCharacter_html_a69245a386351aaece624b82f7fb668d2"><div class="ttname"><a href="classCharacter.html#a69245a386351aaece624b82f7fb668d2">Character::metabolic_rate_base</a></div><div class="ttdeci">float metabolic_rate_base() const</div><div class="ttdoc">Stable base metabolic rate due to traits.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00714">consumption.cpp:714</a></div></div>
<div class="ttc" id="aclassCharacter_html_a69edf2da4462e3aa44ff5a536fff28ab"><div class="ttname"><a href="classCharacter.html#a69edf2da4462e3aa44ff5a536fff28ab">Character::clear_vitamins</a></div><div class="ttdeci">void clear_vitamins()</div><div class="ttdoc">Remove all vitamins.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00585">consumption.cpp:585</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6c503eb356bd61d6433d49d0a5ebf984"><div class="ttname"><a href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">Character::mutation_category_level</a></div><div class="ttdeci">std::map&lt; mutation_category_id, int &gt; mutation_category_level</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03179">character.h:3179</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72b82d2498ae823e0cd6cad311215327"><div class="ttname"><a href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">Character::vomit</a></div><div class="ttdeci">void vomit()</div><div class="ttdoc">Handles Character vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07521">character.cpp:7521</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06742">character.cpp:6742</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7536f499a8b09536d1d9c8360319fad5"><div class="ttname"><a href="classCharacter.html#a7536f499a8b09536d1d9c8360319fad5">Character::vitamin_get</a></div><div class="ttdeci">int vitamin_get(const vitamin_id &amp;vit) const</div><div class="ttdoc">Check current level of a vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00671">consumption.cpp:671</a></div></div>
<div class="ttc" id="aclassCharacter_html_a782c695dee7ed2322f9d2585ede71358"><div class="ttname"><a href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">Character::compute_nutrient_range</a></div><div class="ttdeci">std::pair&lt; nutrients, nutrients &gt; compute_nutrient_range(const item &amp;, const recipe_id &amp;, std::map&lt; recipe_id, std::pair&lt; nutrients, nutrients &gt;&gt; &amp;rec_cache, const cata::flat_set&lt; flag_id &gt; &amp;extra_flags={}) const</div><div class="ttdoc">Get calorie &amp; vitamin contents for a comestible, taking into account character traits.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00329">consumption.cpp:329</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7a5185217f0eaf3bf38f6e1ee3587f14"><div class="ttname"><a href="classCharacter.html#a7a5185217f0eaf3bf38f6e1ee3587f14">Character::masticated_volume</a></div><div class="ttdeci">units::volume masticated_volume(const item &amp;food) const</div><div class="ttdoc">Used to calculate dry volume of a chewed food.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01479">consumption.cpp:1479</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">virtual int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04517">character.cpp:4517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a824a60fef8920f38a6f1e1b35bea4879"><div class="ttname"><a href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">Character::get_stored_kcal</a></div><div class="ttdeci">int get_stored_kcal() const</div><div class="ttdoc">Getter for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04375">character.cpp:4375</a></div></div>
<div class="ttc" id="aclassCharacter_html_a881167b8345723b21ff8c7e54781dcd5"><div class="ttname"><a href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">Character::can_consume_as_is</a></div><div class="ttdeci">bool can_consume_as_is(const item &amp;it) const</div><div class="ttdoc">Check whether the character can consume this very item.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01679">consumption.cpp:1679</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8824c91d628b74c695d338d71b3efa44"><div class="ttname"><a href="classCharacter.html#a8824c91d628b74c695d338d71b3efa44">Character::get_starvation</a></div><div class="ttdeci">int get_starvation() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04503">character.cpp:4503</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">Character::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00976">creature.h:976</a></div></div>
<div class="ttc" id="aclassCharacter_html_a97f88c71321338694d7d279b72a55b00"><div class="ttname"><a href="classCharacter.html#a97f88c71321338694d7d279b72a55b00">Character::add_faction_warning</a></div><div class="ttdeci">bool add_faction_warning(const faction_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12036">character.cpp:12036</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9b2b7e1e9f7bf88c5f0d7ea2155642be"><div class="ttname"><a href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">Character::get_mutations</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; get_mutations(bool include_hidden=true, bool ignore_enchantment=false, const std::function&lt; bool(const mutation_branch &amp;)&gt; &amp;filter=nullptr) const</div><div class="ttdoc">Get the idents of all traits/mutations.</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l04655">newcharacter.cpp:4655</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9ce2644a98b526b5e453b043f5fa49bc"><div class="ttname"><a href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">Character::mod_thirst</a></div><div class="ttdeci">void mod_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04528">character.cpp:4528</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa33f9870c95a95d8a46423c9d6477d99"><div class="ttname"><a href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09586">character.cpp:9586</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa4ecfee35839a07be48afccbe582023e"><div class="ttname"><a href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">Character::stomach</a></div><div class="ttdeci">stomach_contents stomach</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02728">character.h:2728</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa5b5af8930de14abd0df92f007e9d176"><div class="ttname"><a href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">Character::mod_hunger</a></div><div class="ttdeci">void mod_hunger(int nhunger)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04486">character.cpp:4486</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa81f7189c03db495fc90e44b3421ebc5"><div class="ttname"><a href="classCharacter.html#aa81f7189c03db495fc90e44b3421ebc5">Character::update_vitamins</a></div><div class="ttdeci">void update_vitamins(const vitamin_id &amp;vit)</div><div class="ttdoc">Set vitamin deficiency/excess disease states dependent upon current vitamin levels.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08592">character.cpp:8592</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaa88cf522afdfdc90edcbd9fdefca47d"><div class="ttname"><a href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">Character::get_healthy_kcal</a></div><div class="ttdeci">int get_healthy_kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04470">character.cpp:4470</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaaec0279242f05b51af5c8b7bb416bb1"><div class="ttname"><a href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">Character::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if player has a trait, bionic, effect, bodypart, or martial arts buff with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11967">character.cpp:11967</a></div></div>
<div class="ttc" id="aclassCharacter_html_aae2bc9c34641e5e18b8a3bdc111b4323"><div class="ttname"><a href="classCharacter.html#aae2bc9c34641e5e18b8a3bdc111b4323">Character::needs_food</a></div><div class="ttdeci">bool needs_food() const</div><div class="ttdoc">Returns true if character needs food, false if character is an NPC with NO_NPC_FOOD set.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04985">character.cpp:4985</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab630cb0e15ca7dac1a8dc7f678b1baaf"><div class="ttname"><a href="classCharacter.html#ab630cb0e15ca7dac1a8dc7f678b1baaf">Character::modify_sleepiness</a></div><div class="ttdeci">void modify_sleepiness(const islot_comestible &amp;comest)</div><div class="ttdoc">Used to apply sleepiness modifications from food and medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01261">consumption.cpp:1261</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab937dd4b9a2cf84fb446d0da98a62365"><div class="ttname"><a href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">Character::get_hunger</a></div><div class="ttdeci">int get_hunger() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04481">character.cpp:4481</a></div></div>
<div class="ttc" id="aclassCharacter_html_abcc868bf2ce6d77beb80fe1e57fec732"><div class="ttname"><a href="classCharacter.html#abcc868bf2ce6d77beb80fe1e57fec732">Character::modify_health</a></div><div class="ttdeci">void modify_health(const islot_comestible &amp;comest)</div><div class="ttdoc">Used to apply health modifications from food and medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01229">consumption.cpp:1229</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac39374642038bc8b3dff5346d8a92000"><div class="ttname"><a href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">Character::vitamins_mod</a></div><div class="ttdeci">void vitamins_mod(const std::map&lt; vitamin_id, int &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00662">consumption.cpp:662</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac840406f65172cadd93d4274ddd78e15"><div class="ttname"><a href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">Character::mod_stim</a></div><div class="ttdeci">void mod_stim(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06752">character.cpp:6752</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac84dbe117868448cfe201c691aae97ce"><div class="ttname"><a href="classCharacter.html#ac84dbe117868448cfe201c691aae97ce">Character::add_addiction</a></div><div class="ttdeci">void add_addiction(const addiction_id &amp;type, int strength)</div><div class="ttdoc">Adds an addiction to the player.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02020">suffer.cpp:2020</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca04618a096cdf167a88143d66d4aa0a"><div class="ttname"><a href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">Character::vitamin_rate</a></div><div class="ttdeci">time_duration vitamin_rate(const vitamin_id &amp;vit) const</div><div class="ttdoc">Get vitamin usage rate (minutes per unit) accounting for bionics, mutations and effects.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00565">consumption.cpp:565</a></div></div>
<div class="ttc" id="aclassCharacter_html_acc82e3ba51a76736d0e6c58d97a629f9"><div class="ttname"><a href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">Character::effect_vitamin_mod</a></div><div class="ttdeci">std::map&lt; vitamin_id, int &gt; effect_vitamin_mod(const std::map&lt; vitamin_id, int &gt; &amp;)</div><div class="ttdoc">Modify vitamin intake (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00595">consumption.cpp:595</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad58bc3e4db2aa237a070695ca2746ee5"><div class="ttname"><a href="classCharacter.html#ad58bc3e4db2aa237a070695ca2746ee5">Character::get_consumable_from</a></div><div class="ttdeci">item &amp; get_consumable_from(item &amp;it) const</div><div class="ttdoc">Returns a reference to the item itself (if it's consumable), the first of its contents (if it's consu...</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01688">consumption.cpp:1688</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02824">character.cpp:2824</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassCharacter_html_adfe305dc4dab1ce52dc6b46c73f4883f"><div class="ttname"><a href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">Character::nutrition_for</a></div><div class="ttdeci">int nutrition_for(const item &amp;comest) const</div><div class="ttdoc">Handles the nutrition value for a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00442">consumption.cpp:442</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae411805e21f6e2adcca747c5c61b9be0"><div class="ttname"><a href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">Character::vitamin_mod</a></div><div class="ttdeci">int vitamin_mod(const vitamin_id &amp;vit, int qty)</div><div class="ttdoc">Add or subtract vitamins from character storage pools.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00624">consumption.cpp:624</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae7eecab0795b77cbd6fabebc0e140486"><div class="ttname"><a href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">Character::mod_sleepiness</a></div><div class="ttdeci">void mod_sleepiness(int nsleepiness)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04544">character.cpp:4544</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeafb75e7e7e7a3716aef9dfdd778a20d"><div class="ttname"><a href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">Character::consume</a></div><div class="ttdeci">trinary consume(item_location loc, bool force=false)</div><div class="ttdoc">Used for eating object at a location.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01891">consumption.cpp:1891</a></div></div>
<div class="ttc" id="aclassCharacter_html_aec78049b0ee4401d3a4c073663735aad"><div class="ttname"><a href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">Character::has_flag</a></div><div class="ttdeci">virtual bool has_flag(const mon_flag_id &amp;) const</div><div class="ttdoc">This is to prevent clang complaining about overloading a virtual function, the creature version uses ...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00752">creature.h:752</a></div></div>
<div class="ttc" id="aclassCharacter_html_aedc66fc50d352420cae7791b4a0f57f7"><div class="ttname"><a href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">Character::get_speed</a></div><div class="ttdeci">int get_speed() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04192">character.cpp:4192</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7942ab199db67bd6c56bc5317ae2b1f"><div class="ttname"><a href="classCharacter.html#af7942ab199db67bd6c56bc5317ae2b1f">Character::compute_effective_food_volume_ratio</a></div><div class="ttdeci">double compute_effective_food_volume_ratio(const item &amp;food) const</div><div class="ttdoc">Used to compute how filling a food is.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01461">consumption.cpp:1461</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02658">bionics.cpp:2658</a></div></div>
<div class="ttc" id="aclassCharacter_html_afcc7ba8e4203089cb86e515bc2b21a76"><div class="ttname"><a href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">Character::invalidate_weight_carried_cache</a></div><div class="ttdeci">void invalidate_weight_carried_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03097">character.cpp:3097</a></div></div>
<div class="ttc" id="aclassCharacter_html_afd99bd5aa2675097fe6a101696b36d77"><div class="ttname"><a href="classCharacter.html#afd99bd5aa2675097fe6a101696b36d77">Character::vitamin_set</a></div><div class="ttdeci">void vitamin_set(const vitamin_id &amp;vit, int qty)</div><div class="ttdoc">Sets level of a vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00705">consumption.cpp:705</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01959">creature.cpp:1959</a></div></div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00292">creature.cpp:292</a></div></div>
<div class="ttc" id="aclassCreature_html_a5de5f5e0d08deb03b68749608eb360b2"><div class="ttname"><a href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">Creature::as_npc</a></div><div class="ttdeci">virtual npc * as_npc()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00286">creature.h:286</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a6b40041c12e2c414170aad5511878446"><div class="ttname"><a href="classCreature.html#a6b40041c12e2c414170aad5511878446">Creature::resists_effect</a></div><div class="ttdeci">bool resists_effect(const effect &amp;e) const</div><div class="ttdoc">Returns true if the creature resists an effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01928">creature.cpp:1928</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassCreature_html_ada7a49ad443c0522cdd7422d53bef2c1"><div class="ttname"><a href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">Creature::cant_do_underwater</a></div><div class="ttdeci">bool cant_do_underwater(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00280">creature.cpp:280</a></div></div>
<div class="ttc" id="aclassCreature_html_ae14e3b3ab4a876a17538cfe38818356c"><div class="ttname"><a href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">Creature::effects</a></div><div class="ttdeci">pimpl&lt; effects_map &gt; effects</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01204">creature.h:1204</a></div></div>
<div class="ttc" id="aclassCreature_html_af7172e571c5c69240d9f71a01fddf035"><div class="ttname"><a href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">Creature::pos_bub</a></div><div class="ttdeci">tripoint_bub_ms pos_bub() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00183">creature.cpp:183</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassavatar_html_afec92019a1c7cdbe52dc959faccdf1ba"><div class="ttname"><a href="classavatar.html#afec92019a1c7cdbe52dc959faccdf1ba">avatar::add_ingested_kcal</a></div><div class="ttdeci">void add_ingested_kcal(int kcal)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01618">avatar.cpp:1618</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html"><div class="ttname"><a href="classcata_1_1flat__set.html">cata::flat_set</a></div><div class="ttdoc">A SimpleAssociativeContainer implemented as a sorted vector.</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00029">flat_set.h:30</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html_ab427ae6af6b4cd328c0000bc197f881b"><div class="ttname"><a href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">cata::flat_set::insert</a></div><div class="ttdeci">iterator insert(iterator, const value_type &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00151">flat_set.h:151</a></div></div>
<div class="ttc" id="aclassconsume__drug__iuse_html"><div class="ttname"><a href="classconsume__drug__iuse.html">consume_drug_iuse</a></div><div class="ttdoc">This iuse encapsulates the effects of taking a drug.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00239">iuse_actor.h:240</a></div></div>
<div class="ttc" id="aclassconsume__drug__iuse_html_a626aba494d3645ac2276fb1de6471dce"><div class="ttname"><a href="classconsume__drug__iuse.html#a626aba494d3645ac2276fb1de6471dce">consume_drug_iuse::tools_needed</a></div><div class="ttdeci">std::map&lt; itype_id, int &gt; tools_needed</div><div class="ttdoc">Tools needed, but not consumed, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00249">iuse_actor.h:249</a></div></div>
<div class="ttc" id="aclasscontents__change__handler_html"><div class="ttname"><a href="classcontents__change__handler.html">contents_change_handler</a></div><div class="ttdoc">Records a batch of unsealed containers and handles spilling at once.</div><div class="ttdef"><b>Definition:</b> <a href="contents__change__handler_8h_source.html#l00019">contents_change_handler.h:20</a></div></div>
<div class="ttc" id="aclasscontents__change__handler_html_a327c4c2672f8e662338e72e6a8d1210c"><div class="ttname"><a href="classcontents__change__handler.html#a327c4c2672f8e662338e72e6a8d1210c">contents_change_handler::unseal_pocket_containing</a></div><div class="ttdeci">void unseal_pocket_containing(const item_location &amp;loc)</div><div class="ttdoc">Unseal the pocket containing loc and add loc's parent to the list.</div><div class="ttdef"><b>Definition:</b> <a href="contents__change__handler_8cpp_source.html#l00020">contents_change_handler.cpp:20</a></div></div>
<div class="ttc" id="aclasscontents__change__handler_html_a9d974d798df1e6f9a00bfd01c78c0c3c"><div class="ttname"><a href="classcontents__change__handler.html#a9d974d798df1e6f9a00bfd01c78c0c3c">contents_change_handler::handle_by</a></div><div class="ttdeci">void handle_by(Character &amp;guy)</div><div class="ttdoc">Let the guy handle any container that needs spilling.</div><div class="ttdef"><b>Definition:</b> <a href="contents__change__handler_8cpp_source.html#l00037">contents_change_handler.cpp:37</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassheal__actor_html"><div class="ttname"><a href="classheal__actor.html">heal_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00863">iuse_actor.h:864</a></div></div>
<div class="ttc" id="aclassheal__actor_html_aabc136d2d44a5c6a6cfaf2a5ac779ffe"><div class="ttname"><a href="classheal__actor.html#aabc136d2d44a5c6a6cfaf2a5ac779ffe">heal_actor::move_cost</a></div><div class="ttdeci">int move_cost</div><div class="ttdoc">Cost in moves to use the item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00887">iuse_actor.h:887</a></div></div>
<div class="ttc" id="aclassitem__category_html_ab2f1d31be887d993eb4a56f202fb6d39"><div class="ttname"><a href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">item_category::get_id</a></div><div class="ttdeci">item_category_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="item__category_8cpp_source.html#l00097">item_category.cpp:97</a></div></div>
<div class="ttc" id="aclassitem__components_html_ad51343baaea3f73b0653aadab34f2425"><div class="ttname"><a href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">item_components::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8cpp_source.html#l00030">item_components.cpp:30</a></div></div>
<div class="ttc" id="aclassitem__components_html_ae53abc627bb93e24e9710fdb2b2d0153"><div class="ttname"><a href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a></div><div class="ttdeci">std::pair&lt; const itype_id, std::vector&lt; item &gt; &gt; type_vector_pair</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8h_source.html#l00027">item_components.h:27</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a></div><div class="ttdeci">@ character</div></div>
<div class="ttc" id="aclassitem__location_html_a0f73e1c094e3e36d6455d46436e299a9"><div class="ttname"><a href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">item_location::where</a></div><div class="ttdeci">type where() const</div><div class="ttdoc">Returns the type of location where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01001">item_location.cpp:1001</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01041">item_location.cpp:1041</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08623">item.cpp:8623</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a0863a9784ae90c120d91478521163f16"><div class="ttname"><a href="classitem.html#a0863a9784ae90c120d91478521163f16">item::make_component_hash</a></div><div class="ttdeci">uint64_t make_component_hash() const</div><div class="ttdoc">Creates a hash from the itype_ids of this item's components.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12583">item.cpp:12583</a></div></div>
<div class="ttc" id="aclassitem_html_a0b35b9066ad71987b77727af45d96059"><div class="ttname"><a href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02116">item.cpp:2116</a></div></div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclassitem_html_a2e1ea4d40574ffdce04aa81eb128dca9"><div class="ttname"><a href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">item::color_in_inventory</a></div><div class="ttdeci">nc_color color_in_inventory(const Character *ch=nullptr) const</div><div class="ttdoc">Returns the color of the item depending on usefulness for the player character, e....</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06298">item.cpp:6298</a></div></div>
<div class="ttc" id="aclassitem_html_a2ea9b8df7dba40fc847f51563285f5aa"><div class="ttname"><a href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a></div><div class="ttdeci">bool spill_contents(Character &amp;c)</div><div class="ttdoc">Unloads the item's contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10206">item.cpp:10206</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdoc">Total weight of an item accounting for all contained/integrated items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07081">item.cpp:7081</a></div></div>
<div class="ttc" id="aclassitem_html_a326dae8709070c316f6859ef0704bf85"><div class="ttname"><a href="classitem.html#a326dae8709070c316f6859ef0704bf85">item::get_owner</a></div><div class="ttdeci">faction_id get_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02195">item.cpp:2195</a></div></div>
<div class="ttc" id="aclassitem_html_a34f7ae5deade2f4a8fed4f04e81797ce"><div class="ttname"><a href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">item::rotten</a></div><div class="ttdeci">bool rotten() const</div><div class="ttdoc">returns true if item is now rotten after all shelf life has elapsed</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01124">item.h:1124</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a411163e892e27c57b802d0d015c05162"><div class="ttname"><a href="classitem.html#a411163e892e27c57b802d0d015c05162">item::get_comestible</a></div><div class="ttdeci">const cata::value_ptr&lt; islot_comestible &gt; &amp; get_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14803">item.cpp:14803</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a473448af85ae4182f130bd488bf7c0fb"><div class="ttname"><a href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">item::mod_charges</a></div><div class="ttdeci">void mod_charges(int mod)</div><div class="ttdoc">Modify the charges of this item, only use for items counted by charges! The item must have enough cha...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14183">item.cpp:14183</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_a66b0bbc211f6fb668781640c971d3acc"><div class="ttname"><a href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">item::get_comestible_fun</a></div><div class="ttdeci">int get_comestible_fun() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07798">item.cpp:7798</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_a6ba542e70d1c20032e51d3196f035a0d"><div class="ttname"><a href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">item::visit_items</a></div><div class="ttdeci">VisitResponse visit_items(const std::function&lt; VisitResponse(item *, item *)&gt; &amp;func) const override</div><div class="ttdoc">Traverses this object and any child items contained using a visitor pattern.</div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a6c105cc1200608aa11f2a93ab820e52e"><div class="ttname"><a href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">item::get_category_shallow</a></div><div class="ttdeci">const item_category &amp; get_category_shallow() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12354">item.cpp:12354</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1575c31b1dc0df51cbe3a1dfbfef16"><div class="ttname"><a href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Callback when contents of the item are affected in any way other than just processing.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06722">item.cpp:6722</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09667">item.cpp:9667</a></div></div>
<div class="ttc" id="aclassitem_html_a7a87dfe9c9c30a0ee04da41ecc48a3e7"><div class="ttname"><a href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">item::has_own_flag</a></div><div class="ttdeci">bool has_own_flag(const flag_id &amp;f) const</div><div class="ttdoc">Checks whether item itself has given flag (doesn't check item type or gunmods).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07573">item.cpp:7573</a></div></div>
<div class="ttc" id="aclassitem_html_a7d8ce5c60b8038f357ff51aa7e87495c"><div class="ttname"><a href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">item::has_vitamin</a></div><div class="ttdeci">bool has_vitamin(const vitamin_id &amp;vitamin) const</div><div class="ttdoc">Does this item have the specified vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07614">item.cpp:7614</a></div></div>
<div class="ttc" id="aclassitem_html_a7f25e0430419609c538b07f704d6ba7a"><div class="ttname"><a href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">item::is_craft</a></div><div class="ttdeci">bool is_craft() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09930">item.cpp:9930</a></div></div>
<div class="ttc" id="aclassitem_html_a902e330a0505ae225e2ed05921bdf004"><div class="ttname"><a href="classitem.html#a902e330a0505ae225e2ed05921bdf004">item::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol, bool suppress_warning=false) const</div><div class="ttdoc">Number of (charges of) this item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01332">item.cpp:1332</a></div></div>
<div class="ttc" id="aclassitem_html_a9e073e3ce3fcc2e91bdaea5d603e798b"><div class="ttname"><a href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">item::goes_bad</a></div><div class="ttdeci">bool goes_bad() const</div><div class="ttdoc">whether an item is perishable (can rot)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07818">item.cpp:7818</a></div></div>
<div class="ttc" id="aclassitem_html_a9e2c24734b538e61e186fb6777b62c25"><div class="ttname"><a href="classitem.html#a9e2c24734b538e61e186fb6777b62c25">item::made_of_any</a></div><div class="ttdeci">bool made_of_any(const std::set&lt; material_id &gt; &amp;mat_idents) const</div><div class="ttdoc">Check we are made of at least one of a set (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09218">item.cpp:9218</a></div></div>
<div class="ttc" id="aclassitem_html_a9f276bdd47b29bc1649dce5c64cbe433"><div class="ttname"><a href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">item::poison</a></div><div class="ttdeci">int poison</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03138">item.h:3138</a></div></div>
<div class="ttc" id="aclassitem_html_aa344ad5d3082d7a56b1c902fbafb6347"><div class="ttname"><a href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">item::is_medication</a></div><div class="ttdeci">bool is_medication() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09489">item.cpp:9489</a></div></div>
<div class="ttc" id="aclassitem_html_aad45569fa1fdd99d602eabbbbca04f75"><div class="ttname"><a href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a></div><div class="ttdeci">bool is_food() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09480">item.cpp:9480</a></div></div>
<div class="ttc" id="aclassitem_html_ac070089c03e5dc687bae39670edd5401"><div class="ttname"><a href="classitem.html#ac070089c03e5dc687bae39670edd5401">item::is_comestible</a></div><div class="ttdeci">bool is_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09475">item.cpp:9475</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassitem_html_aca5abd8656e123435b97da00608a5daa"><div class="ttname"><a href="classitem.html#aca5abd8656e123435b97da00608a5daa">item::has_any_flag</a></div><div class="ttdeci">bool has_any_flag(const Container &amp;flags) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01952">item.h:1952</a></div></div>
<div class="ttc" id="aclassitem_html_acb2cc7e78ca9e1515b2e44a633d9f25c"><div class="ttname"><a href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">item::components</a></div><div class="ttdeci">item_components components</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03075">item.h:3075</a></div></div>
<div class="ttc" id="aclassitem_html_adfb5ddb3d50f317c79eb7a1a26a63905"><div class="ttname"><a href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">item::get_relative_rot</a></div><div class="ttdeci">double get_relative_rot() const</div><div class="ttdoc">Get rot value relative to shelf life (or 0 if item does not spoil)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07849">item.cpp:7849</a></div></div>
<div class="ttc" id="aclassitem_html_ae6e5a27a821edd75162d46364a24699b"><div class="ttname"><a href="classitem.html#ae6e5a27a821edd75162d46364a24699b">item::recipe_charges</a></div><div class="ttdeci">int recipe_charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03136">item.h:3136</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a92332e252062d545551d1563dc168f6f"><div class="ttname"><a href="classmap.html#a92332e252062d545551d1563dc168f6f">map::has_nearby_table</a></div><div class="ttdeci">bool has_nearby_table(const tripoint_bub_ms &amp;p, int radius=1) const</div><div class="ttdoc">Check whether a table/workbench/vehicle kitchen or other flat surface is nearby that could be used fo...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03613">map.cpp:3613</a></div></div>
<div class="ttc" id="aclassmap_html_ac3bf0bb1a236721dee4d14c530f39bb2"><div class="ttname"><a href="classmap.html#ac3bf0bb1a236721dee4d14c530f39bb2">map::has_nearby_chair</a></div><div class="ttdeci">bool has_nearby_chair(const tripoint &amp;p, int radius=1) const</div><div class="ttdoc">Check whether a chair or vehicle seat is nearby.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03627">map.cpp:3627</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassrecipe__dictionary_html_a5f22263eae1314377f1c64ff6d6400fe"><div class="ttname"><a href="classrecipe__dictionary.html#a5f22263eae1314377f1c64ff6d6400fe">recipe_dictionary::is_item_on_loop</a></div><div class="ttdeci">bool is_item_on_loop(const itype_id &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00499">recipe_dictionary.cpp:499</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00086">recipe.h:87</a></div></div>
<div class="ttc" id="aclassrecipe_html_a4ed6d7a51cc70ae0190e4f8b4d92b379"><div class="ttname"><a href="classrecipe.html#a4ed6d7a51cc70ae0190e4f8b4d92b379">recipe::create_byproducts</a></div><div class="ttdeci">std::vector&lt; item &gt; create_byproducts(int batch=1) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00858">recipe.cpp:858</a></div></div>
<div class="ttc" id="aclassrecipe_html_a5c4a4110edf3bd4a33732d4fd8a9d53f"><div class="ttname"><a href="classrecipe.html#a5c4a4110edf3bd4a33732d4fd8a9d53f">recipe::makes_amount</a></div><div class="ttdeci">int makes_amount() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01514">recipe.cpp:1514</a></div></div>
<div class="ttc" id="aclassrecipe_html_aaf9e9415834cc507fd68b89070bd4bb4"><div class="ttname"><a href="classrecipe.html#aaf9e9415834cc507fd68b89070bd4bb4">recipe::hot_result</a></div><div class="ttdeci">bool hot_result() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01483">recipe.cpp:1483</a></div></div>
<div class="ttc" id="aclassrecipe_html_ad68760d09d83ba4b7793ad831f7973d5"><div class="ttname"><a href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">recipe::simple_requirements</a></div><div class="ttdeci">const requirement_data &amp; simple_requirements() const</div><div class="ttdoc">Fetch combined requirement data (inline and via &quot;using&quot; syntax).</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00147">recipe.h:147</a></div></div>
<div class="ttc" id="aclassrecipe_html_aeefe6a56019c2cdaf9c6754ef65f1b81"><div class="ttname"><a href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">recipe::result</a></div><div class="ttdeci">const itype_id &amp; result() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00111">recipe.h:111</a></div></div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00048">ret_val.h:49</a></div></div>
<div class="ttc" id="aclassret__val_html_a0bbde13713bc279563fa85782599f957"><div class="ttname"><a href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val::make_success</a></div><div class="ttdeci">static ret_val make_success(T val=default_success::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00063">ret_val.h:63</a></div></div>
<div class="ttc" id="aclassret__val_html_a415798e6fd736bd724329890cae0df4a"><div class="ttname"><a href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val::make_failure</a></div><div class="ttdeci">static ret_val make_failure(T val=default_failure::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00067">ret_val.h:67</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a685c0168b039e17ca677a61e21900fe1"><div class="ttname"><a href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">snippet_library::random_from_category</a></div><div class="ttdeci">std::optional&lt; translation &gt; random_from_category(const std::string &amp;cat) const</div><div class="ttdoc">Returns a random snippet out of the given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00286">text_snippets.cpp:286</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a434f5541ac7b9fb8fd1a4b6219404278"><div class="ttname"><a href="classstomach__contents.html#a434f5541ac7b9fb8fd1a4b6219404278">stomach_contents::get_water</a></div><div class="ttdeci">units::volume get_water() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00447">stomach.cpp:447</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a52e4721f4afcc99ddb28d261fc90cc32"><div class="ttname"><a href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">stomach_contents::contains</a></div><div class="ttdeci">units::volume contains() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00316">stomach.cpp:316</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a61965ae62b9e92eee00d8a10999145f2"><div class="ttname"><a href="classstomach__contents.html#a61965ae62b9e92eee00d8a10999145f2">stomach_contents::stomach_remaining</a></div><div class="ttdeci">units::volume stomach_remaining(const Character &amp;owner) const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00311">stomach.cpp:311</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a93a1500302155581c1846aa84314b81b"><div class="ttname"><a href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">stomach_contents::capacity</a></div><div class="ttdeci">units::volume capacity(const Character &amp;owner) const</div><div class="ttdoc">Calculates the capacity of this stomach.</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00305">stomach.cpp:305</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a96eccd372c5b0f42ca47bfd7bfeabaec"><div class="ttname"><a href="classstomach__contents.html#a96eccd372c5b0f42ca47bfd7bfeabaec">stomach_contents::ingest</a></div><div class="ttdeci">void ingest(const food_summary &amp;ingested)</div><div class="ttdoc">Directly adds food to stomach contents.</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00321">stomach.cpp:321</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; bionic_data &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00221">calendar.h:221</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a20688ca0a8848ec0d73636ede90d27ad"><div class="ttname"><a href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a></div><div class="ttdeci">static constexpr time_duration from_minutes(const T m)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00233">calendar.h:233</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a24e810d76ce97cfab15fbe68a32a00ca"><div class="ttname"><a href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a></div><div class="ttdeci">static constexpr time_duration from_seconds(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00229">calendar.h:229</a></div></div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassvisitable_html_aa199bd0ea7a41c50a2de5761dd987338"><div class="ttname"><a href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo, const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01018">visitable.cpp:1018</a></div></div>
<div class="ttc" id="aclassvitamin_html"><div class="ttname"><a href="classvitamin.html">vitamin</a></div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00034">vitamin.h:35</a></div></div>
<div class="ttc" id="aclassvitamin_html_a02118e1482cc2de278511d63b764b7d0"><div class="ttname"><a href="classvitamin.html#a02118e1482cc2de278511d63b764b7d0">vitamin::max</a></div><div class="ttdeci">int max() const</div><div class="ttdoc">Upper bound for any accumulation of this vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00075">vitamin.h:75</a></div></div>
<div class="ttc" id="aclassvitamin_html_ab0ecac042b2177081ebd499919bedfdb"><div class="ttname"><a href="classvitamin.html#ab0ecac042b2177081ebd499919bedfdb">vitamin::decays_into</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; vitamin_id, int &gt; &gt; decays_into() const</div><div class="ttdoc">An array of the other vitamins that this vitamin decays into, and their proportions.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00088">vitamin.h:88</a></div></div>
<div class="ttc" id="aclassvitamin_html_abed8d50d1b8805a7f7ce49ce09ab1b7a"><div class="ttname"><a href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a></div><div class="ttdeci">static const std::map&lt; vitamin_id, vitamin &gt; &amp; all()</div><div class="ttdoc">Get all currently loaded vitamins.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8cpp_source.html#l00101">vitamin.cpp:101</a></div></div>
<div class="ttc" id="aclassvitamin_html_acfc2222126afc9c1040c1d71fb75ebe1"><div class="ttname"><a href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">vitamin::min</a></div><div class="ttdeci">int min() const</div><div class="ttdoc">Lower bound for deficiency of this vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00070">vitamin.h:70</a></div></div>
<div class="ttc" id="aclassvitamin_html_ad77f86e9d837ddf8f19e5f38664743f0"><div class="ttname"><a href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">vitamin::type</a></div><div class="ttdeci">const vitamin_type &amp; type() const</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00043">vitamin.h:43</a></div></div>
<div class="ttc" id="aclassvitamin_html_ae60227e2365936a1d53684a54f59835f"><div class="ttname"><a href="classvitamin.html#ae60227e2365936a1d53684a54f59835f">vitamin::rate</a></div><div class="ttdeci">time_duration rate() const</div><div class="ttdoc">Usage rate of vitamin (time to consume unit) Lower bound is zero whereby vitamin is not required (but...</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00083">vitamin.h:83</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a0371615cbdf966655d267076abc28b68"><div class="ttname"><a href="consumption_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a></div><div class="ttdeci">static const trait_id trait_RUMINANT(&quot;RUMINANT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a0378c4d7c8bedb3b625c06e488f25dd9"><div class="ttname"><a href="consumption_8cpp.html#a0378c4d7c8bedb3b625c06e488f25dd9">bio_syringe</a></div><div class="ttdeci">static const bionic_id bio_syringe(&quot;bio_syringe&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a069155201566d16196b847fb0cbf9330"><div class="ttname"><a href="consumption_8cpp.html#a069155201566d16196b847fb0cbf9330">json_flag_PRED3</a></div><div class="ttdeci">static const json_character_flag json_flag_PRED3(&quot;PRED3&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a074b87b8d18347675f51ed9e6d7e8787"><div class="ttname"><a href="consumption_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a></div><div class="ttdeci">static const efftype_id effect_bloodworms(&quot;bloodworms&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a08ed8f8240259a6a457502b0db459e08"><div class="ttname"><a href="consumption_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a></div><div class="ttdeci">static const efftype_id effect_fungus(&quot;fungus&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a0aeb430b1b8655823e9d45ab7aecf11d"><div class="ttname"><a href="consumption_8cpp.html#a0aeb430b1b8655823e9d45ab7aecf11d">json_flag_PRED4</a></div><div class="ttdeci">static const json_character_flag json_flag_PRED4(&quot;PRED4&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a0db82d150be635539d001703c337cb20"><div class="ttname"><a href="consumption_8cpp.html#a0db82d150be635539d001703c337cb20">trait_VEGAN</a></div><div class="ttdeci">static const trait_id trait_VEGAN(&quot;VEGAN&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a0f2ff29084284a987321bb533c8134d4"><div class="ttname"><a href="consumption_8cpp.html#a0f2ff29084284a987321bb533c8134d4">trait_THRESH_RABBIT</a></div><div class="ttdeci">static const trait_id trait_THRESH_RABBIT(&quot;THRESH_RABBIT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a12b3a40517ad5a90dd53ff7314637ac9"><div class="ttname"><a href="consumption_8cpp.html#a12b3a40517ad5a90dd53ff7314637ac9">json_flag_NUMB</a></div><div class="ttdeci">static const json_character_flag json_flag_NUMB(&quot;NUMB&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a17cdfd8aef2fd5e8fceb6c62d37fa741"><div class="ttname"><a href="consumption_8cpp.html#a17cdfd8aef2fd5e8fceb6c62d37fa741">trait_HERBIVORE</a></div><div class="ttdeci">static const trait_id trait_HERBIVORE(&quot;HERBIVORE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a1ba672ffbd5e68e0474b3f28ddf72c56"><div class="ttname"><a href="consumption_8cpp.html#a1ba672ffbd5e68e0474b3f28ddf72c56">json_flag_ALLERGEN_CHEESE</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_CHEESE(&quot;ALLERGEN_CHEESE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a1bbd0880ac98efd74080eb3c8ef18f6c"><div class="ttname"><a href="consumption_8cpp.html#a1bbd0880ac98efd74080eb3c8ef18f6c">json_flag_ANIMAL_PRODUCT</a></div><div class="ttdeci">static const flag_id json_flag_ANIMAL_PRODUCT(&quot;ANIMAL_PRODUCT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a1cdd6de85176097b616ddd8e3e0a9239"><div class="ttname"><a href="consumption_8cpp.html#a1cdd6de85176097b616ddd8e3e0a9239">bio_taste_blocker</a></div><div class="ttdeci">static const bionic_id bio_taste_blocker(&quot;bio_taste_blocker&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a1d165daff78c283cec6eb4197cb9a4a7"><div class="ttname"><a href="consumption_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a></div><div class="ttdeci">static const efftype_id effect_took_thorazine(&quot;took_thorazine&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a1eb34af6b7fba64663cb266638373e1b"><div class="ttname"><a href="consumption_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a></div><div class="ttdeci">static const trait_id trait_EATDEAD(&quot;EATDEAD&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a21bda02fdebbb5bafebd2ba308e29262"><div class="ttname"><a href="consumption_8cpp.html#a21bda02fdebbb5bafebd2ba308e29262">trait_SLIMESPAWNER</a></div><div class="ttdeci">static const trait_id trait_SLIMESPAWNER(&quot;SLIMESPAWNER&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a22b82ff6998caf559fabe67d535d6771"><div class="ttname"><a href="consumption_8cpp.html#a22b82ff6998caf559fabe67d535d6771">mon_player_blob</a></div><div class="ttdeci">static const mtype_id mon_player_blob(&quot;mon_player_blob&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a29ad24d064c380f684f9475a05bb0756"><div class="ttname"><a href="consumption_8cpp.html#a29ad24d064c380f684f9475a05bb0756">json_flag_ALLERGEN_EGG</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_EGG(&quot;ALLERGEN_EGG&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a2d2463d7a32338731d9a8cd1be4faad0"><div class="ttname"><a href="consumption_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a></div><div class="ttdeci">static const trait_id trait_THRESH_PLANT(&quot;THRESH_PLANT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a308d750c2cc01d70d7622fdee14be3a5"><div class="ttname"><a href="consumption_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a></div><div class="ttdeci">static const trait_id trait_M_IMMUNE(&quot;M_IMMUNE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a3124b68e352cad48fc7848f4dc58973b"><div class="ttname"><a href="consumption_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a></div><div class="ttdeci">static const efftype_id effect_hunger_engorged(&quot;hunger_engorged&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a33d14d146dbc0f416314bdb87d8fca77"><div class="ttname"><a href="consumption_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a></div><div class="ttdeci">static const efftype_id effect_hallu(&quot;hallu&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a34738600216df5bb152c9fa395859298"><div class="ttname"><a href="consumption_8cpp.html#a34738600216df5bb152c9fa395859298">json_flag_PARAIMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_PARAIMMUNE(&quot;PARAIMMUNE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a3b7437aa889d3736503d4ccdd7743001"><div class="ttname"><a href="consumption_8cpp.html#a3b7437aa889d3736503d4ccdd7743001">mutation_category_URSINE</a></div><div class="ttdeci">static const mutation_category_id mutation_category_URSINE(&quot;URSINE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a3db93d46e4a94d37dbc3874928d73034"><div class="ttname"><a href="consumption_8cpp.html#a3db93d46e4a94d37dbc3874928d73034">bio_faulty_grossfood</a></div><div class="ttdeci">static const bionic_id bio_faulty_grossfood(&quot;bio_faulty_grossfood&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a3fe50e2a044ddb139e163b6ee5307976"><div class="ttname"><a href="consumption_8cpp.html#a3fe50e2a044ddb139e163b6ee5307976">json_flag_PRED2</a></div><div class="ttdeci">static const json_character_flag json_flag_PRED2(&quot;PRED2&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a41e08c32ee980d1dd390b1d031c16696"><div class="ttname"><a href="consumption_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a></div><div class="ttdeci">static const efftype_id effect_tapeworm(&quot;tapeworm&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a420b2d13ef1e40e38afb08273b31b016"><div class="ttname"><a href="consumption_8cpp.html#a420b2d13ef1e40e38afb08273b31b016">activate_consume_eocs</a></div><div class="ttdeci">static void activate_consume_eocs(Character &amp;you, item &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01518">consumption.cpp:1518</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a490ad03dab9bfa0cac3c742ec6b92fa0"><div class="ttname"><a href="consumption_8cpp.html#a490ad03dab9bfa0cac3c742ec6b92fa0">trait_HIBERNATE</a></div><div class="ttdeci">static const trait_id trait_HIBERNATE(&quot;HIBERNATE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a496e5a7de548d3dd2cdc09978a3de47d"><div class="ttname"><a href="consumption_8cpp.html#a496e5a7de548d3dd2cdc09978a3de47d">json_flag_ALLERGEN_NUT</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_NUT(&quot;ALLERGEN_NUT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a4ad36e7912b4ee1a06399fb0d87e5e04"><div class="ttname"><a href="consumption_8cpp.html#a4ad36e7912b4ee1a06399fb0d87e5e04">json_flag_ALLERGEN_VEGGY</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_VEGGY(&quot;ALLERGEN_VEGGY&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a4dd26d066c5522c4787f42d46d7249eb"><div class="ttname"><a href="consumption_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a></div><div class="ttdeci">static const json_character_flag json_flag_CANNIBAL(&quot;CANNIBAL&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a4fbf975d8c329497caf15aa91d65a664"><div class="ttname"><a href="consumption_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a></div><div class="ttdeci">static const trait_id trait_CARNIVORE(&quot;CARNIVORE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a5101b830b78cb3ac9eb7f0c8f87b1d3b"><div class="ttname"><a href="consumption_8cpp.html#a5101b830b78cb3ac9eb7f0c8f87b1d3b">comesttype_DRINK</a></div><div class="ttdeci">static const std::string comesttype_DRINK(&quot;DRINK&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a54bcd8dd61b0389ffbe892dd9dd5fec2"><div class="ttname"><a href="consumption_8cpp.html#a54bcd8dd61b0389ffbe892dd9dd5fec2">json_flag_ALLERGEN_BREAD</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_BREAD(&quot;ALLERGEN_BREAD&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a557169ee6dc6d09dfed331f1819983d5"><div class="ttname"><a href="consumption_8cpp.html#a557169ee6dc6d09dfed331f1819983d5">trait_THRESH_URSINE</a></div><div class="ttdeci">static const trait_id trait_THRESH_URSINE(&quot;THRESH_URSINE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a55c2ff48be9d4be89453d697f61961f5"><div class="ttname"><a href="consumption_8cpp.html#a55c2ff48be9d4be89453d697f61961f5">carnivore_blacklist</a></div><div class="ttdeci">static const std::array&lt; flag_id, 6 &gt; carnivore_blacklist</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00186">consumption.cpp:186</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a58effc1a53d07e2adce1c786763fc4bb"><div class="ttname"><a href="consumption_8cpp.html#a58effc1a53d07e2adce1c786763fc4bb">compute_default_effective_nutrients</a></div><div class="ttdeci">static nutrients compute_default_effective_nutrients(const item &amp;comest, const Character &amp;you, const cata::flat_set&lt; flag_id &gt; &amp;extra_flags={})</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00278">consumption.cpp:278</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a603a14607a61f5c6b22c9a58adfc8b3e"><div class="ttname"><a href="consumption_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a></div><div class="ttdeci">static const json_character_flag json_flag_PSYCHOPATH(&quot;PSYCHOPATH&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a67cee0caf6c3fa13ecf6f72ce80b6550"><div class="ttname"><a href="consumption_8cpp.html#a67cee0caf6c3fa13ecf6f72ce80b6550">json_flag_ALLERGEN_MEAT</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_MEAT(&quot;ALLERGEN_MEAT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a6d68a01cb1321b3310ac4ddc8c28b8d0"><div class="ttname"><a href="consumption_8cpp.html#a6d68a01cb1321b3310ac4ddc8c28b8d0">trait_THRESH_BIRD</a></div><div class="ttdeci">static const trait_id trait_THRESH_BIRD(&quot;THRESH_BIRD&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a6e356b8c88f37fd089a667b39f6b4419"><div class="ttname"><a href="consumption_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a></div><div class="ttdeci">static const efftype_id effect_visuals(&quot;visuals&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a70d7f27f057587e54b30196e6c58ad09"><div class="ttname"><a href="consumption_8cpp.html#a70d7f27f057587e54b30196e6c58ad09">trait_PROJUNK2</a></div><div class="ttdeci">static const trait_id trait_PROJUNK2(&quot;PROJUNK2&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a7233d432bb6c3c3fcbef0adcf137d36b"><div class="ttname"><a href="consumption_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a></div><div class="ttdeci">static const efftype_id effect_hunger_near_starving(&quot;hunger_near_starving&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a751a974c94ce8c4da2e59c71da498980"><div class="ttname"><a href="consumption_8cpp.html#a751a974c94ce8c4da2e59c71da498980">trait_THRESH_MOUSE</a></div><div class="ttdeci">static const trait_id trait_THRESH_MOUSE(&quot;THRESH_MOUSE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a76e79c12085ff0828efd8fd6669bd718"><div class="ttname"><a href="consumption_8cpp.html#a76e79c12085ff0828efd8fd6669bd718">eat</a></div><div class="ttdeci">static bool eat(item &amp;food, Character &amp;you, bool force)</div><div class="ttdoc">Eat a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01031">consumption.cpp:1031</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a7722fb848275ed1493264cbff87a6ca0"><div class="ttname"><a href="consumption_8cpp.html#a7722fb848275ed1493264cbff87a6ca0">trait_ANTIWHEAT</a></div><div class="ttdeci">static const trait_id trait_ANTIWHEAT(&quot;ANTIWHEAT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a77c556702302ac4ca1a8485f208bebdf"><div class="ttname"><a href="consumption_8cpp.html#a77c556702302ac4ca1a8485f208bebdf">trait_ANTIJUNK</a></div><div class="ttdeci">static const trait_id trait_ANTIJUNK(&quot;ANTIJUNK&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a7a1248a8f9da268493c91b93bbcb1204"><div class="ttname"><a href="consumption_8cpp.html#a7a1248a8f9da268493c91b93bbcb1204">json_flag_ALLERGEN_FRUIT</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_FRUIT(&quot;ALLERGEN_FRUIT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a7b1c110dc6b9d344d32e00ae9f70d070"><div class="ttname"><a href="consumption_8cpp.html#a7b1c110dc6b9d344d32e00ae9f70d070">trait_PROBOSCIS</a></div><div class="ttdeci">static const trait_id trait_PROBOSCIS(&quot;PROBOSCIS&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a7b80d711466946f3fb75c76a9d47de41"><div class="ttname"><a href="consumption_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a></div><div class="ttdeci">static const trait_id trait_STIMBOOST(&quot;STIMBOOST&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a80817baa650043d2c55261f483c601f0"><div class="ttname"><a href="consumption_8cpp.html#a80817baa650043d2c55261f483c601f0">compute_default_effective_kcal</a></div><div class="ttdeci">static int compute_default_effective_kcal(const item &amp;comest, const Character &amp;you, const cata::flat_set&lt; flag_id &gt; &amp;extra_flags={})</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00197">consumption.cpp:197</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_a80b109bedc2ce187a7c76835044509a5"><div class="ttname"><a href="consumption_8cpp.html#a80b109bedc2ce187a7c76835044509a5">json_flag_ALLERGEN_WHEAT</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_WHEAT(&quot;ALLERGEN_WHEAT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a83f8aa73d75acdd21d82d1874dea1faf"><div class="ttname"><a href="consumption_8cpp.html#a83f8aa73d75acdd21d82d1874dea1faf">json_flag_HEMOVORE</a></div><div class="ttdeci">static const json_character_flag json_flag_HEMOVORE(&quot;HEMOVORE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a85b30cf46f1a706091868a4f5e34e7e9"><div class="ttname"><a href="consumption_8cpp.html#a85b30cf46f1a706091868a4f5e34e7e9">json_flag_ALLERGEN_MILK</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_MILK(&quot;ALLERGEN_MILK&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a8ab43cdb18ab06dc2569f4bdce2b8ae5"><div class="ttname"><a href="consumption_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a></div><div class="ttdeci">static const efftype_id effect_hunger_starving(&quot;hunger_starving&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a8d7d18ea05fab3f3a1c432f1ac02b7ed"><div class="ttname"><a href="consumption_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a></div><div class="ttdeci">static const vitamin_id vitamin_human_flesh_vitamin(&quot;human_flesh_vitamin&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a914db3df05fd548e81adc85699eaaf05"><div class="ttname"><a href="consumption_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a></div><div class="ttdeci">static const efftype_id effect_paincysts(&quot;paincysts&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a92fc92f8871feb56f05a24b582966275"><div class="ttname"><a href="consumption_8cpp.html#a92fc92f8871feb56f05a24b582966275">trait_SAPROVORE</a></div><div class="ttdeci">static const trait_id trait_SAPROVORE(&quot;SAPROVORE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a9c50a91087bb8b69be248a2035381481"><div class="ttname"><a href="consumption_8cpp.html#a9c50a91087bb8b69be248a2035381481">json_flag_SPIRITUAL</a></div><div class="ttdeci">static const json_character_flag json_flag_SPIRITUAL(&quot;SPIRITUAL&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_a9fa9aa0776f043d6f5e8bcfb370bf748"><div class="ttname"><a href="consumption_8cpp.html#a9fa9aa0776f043d6f5e8bcfb370bf748">trait_THRESH_RAT</a></div><div class="ttdeci">static const trait_id trait_THRESH_RAT(&quot;THRESH_RAT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_aa2e65123ffb4aa24bb23f1bf49f5dc01"><div class="ttname"><a href="consumption_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a></div><div class="ttdeci">static const efftype_id effect_hunger_full(&quot;hunger_full&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_aa529aa8fed8701f3f231986398f2d95d"><div class="ttname"><a href="consumption_8cpp.html#aa529aa8fed8701f3f231986398f2d95d">trait_PROJUNK</a></div><div class="ttdeci">static const trait_id trait_PROJUNK(&quot;PROJUNK&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_aa7c6b64e7778501e77a8c8aeda9c6ffb"><div class="ttname"><a href="consumption_8cpp.html#aa7c6b64e7778501e77a8c8aeda9c6ffb">trait_VEGETARIAN</a></div><div class="ttdeci">static const trait_id trait_VEGETARIAN(&quot;VEGETARIAN&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_aa9d7670d795db57c4926fef635148e22"><div class="ttname"><a href="consumption_8cpp.html#aa9d7670d795db57c4926fef635148e22">trait_THRESH_LUPINE</a></div><div class="ttdeci">static const trait_id trait_THRESH_LUPINE(&quot;THRESH_LUPINE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_aaa52adaf5d4df3112a266635f08120ed"><div class="ttname"><a href="consumption_8cpp.html#aaa52adaf5d4df3112a266635f08120ed">trait_LACTOSE</a></div><div class="ttdeci">static const trait_id trait_LACTOSE(&quot;LACTOSE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab0274897870729fe991550cf82d246e9"><div class="ttname"><a href="consumption_8cpp.html#ab0274897870729fe991550cf82d246e9">trait_THRESH_CATTLE</a></div><div class="ttdeci">static const trait_id trait_THRESH_CATTLE(&quot;THRESH_CATTLE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab161c367d797bc9d5e28ce6b0871ece9"><div class="ttname"><a href="consumption_8cpp.html#ab161c367d797bc9d5e28ce6b0871ece9">json_flag_PRED1</a></div><div class="ttdeci">static const json_character_flag json_flag_PRED1(&quot;PRED1&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab2b26b8a5aaccd80452e343236ffe8e7"><div class="ttname"><a href="consumption_8cpp.html#ab2b26b8a5aaccd80452e343236ffe8e7">trait_THRESH_FELINE</a></div><div class="ttdeci">static const trait_id trait_THRESH_FELINE(&quot;THRESH_FELINE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab3388325c8d9a46ddb7af329e1b247fd"><div class="ttname"><a href="consumption_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a></div><div class="ttdeci">static const trait_id trait_AMORPHOUS(&quot;AMORPHOUS&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab3904a4e01276706855605f3b616734a"><div class="ttname"><a href="consumption_8cpp.html#ab3904a4e01276706855605f3b616734a">comesttype_FOOD</a></div><div class="ttdeci">static const std::string comesttype_FOOD(&quot;FOOD&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab558627fa5f7d625a9883d230e8525ae"><div class="ttname"><a href="consumption_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a></div><div class="ttdeci">static const efftype_id effect_flu(&quot;flu&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab84378f54d9b560be4da46cfd61fd61a"><div class="ttname"><a href="consumption_8cpp.html#ab84378f54d9b560be4da46cfd61fd61a">item_category_chems</a></div><div class="ttdeci">static const item_category_id item_category_chems(&quot;chems&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abb2203fc9372a7f9651ccca81239445a"><div class="ttname"><a href="consumption_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a></div><div class="ttdeci">static const trait_id trait_EATHEALTH(&quot;EATHEALTH&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abb27fd44fa9a18a8ee6ea1588a089ab6"><div class="ttname"><a href="consumption_8cpp.html#abb27fd44fa9a18a8ee6ea1588a089ab6">json_flag_BLOODFEEDER</a></div><div class="ttdeci">static const json_character_flag json_flag_BLOODFEEDER(&quot;BLOODFEEDER&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abcd495ec2c957abfe94ca8883f0f793a"><div class="ttname"><a href="consumption_8cpp.html#abcd495ec2c957abfe94ca8883f0f793a">trait_TABLEMANNERS</a></div><div class="ttdeci">static const trait_id trait_TABLEMANNERS(&quot;TABLEMANNERS&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abd2ce5a2e5c7ede5e25af994457bd123"><div class="ttname"><a href="consumption_8cpp.html#abd2ce5a2e5c7ede5e25af994457bd123">trait_GOURMAND</a></div><div class="ttdeci">static const trait_id trait_GOURMAND(&quot;GOURMAND&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abe8af68410c678bb0a2ec92e94b4238b"><div class="ttname"><a href="consumption_8cpp.html#abe8af68410c678bb0a2ec92e94b4238b">consume_med</a></div><div class="ttdeci">static bool consume_med(item &amp;target, Character &amp;you)</div><div class="ttdoc">Consume medication.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01807">consumption.cpp:1807</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_abf29a0f9f2b03dbf9baa8dd6af688d41"><div class="ttname"><a href="consumption_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a></div><div class="ttdeci">static const trait_id trait_WATERSLEEP(&quot;WATERSLEEP&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abf47c050c3a01d3496c3eb251fa9c517"><div class="ttname"><a href="consumption_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a></div><div class="ttdeci">static const trait_id trait_SPIRITUAL(&quot;SPIRITUAL&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_abfb243f6549dfbca090494f3a25c0e50"><div class="ttname"><a href="consumption_8cpp.html#abfb243f6549dfbca090494f3a25c0e50">query_consume_ownership</a></div><div class="ttdeci">static bool query_consume_ownership(item &amp;target, Character &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01774">consumption.cpp:1774</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac00dfe681a5a2f2b03bfe2ad27df1721"><div class="ttname"><a href="consumption_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a></div><div class="ttdeci">static const efftype_id effect_nausea(&quot;nausea&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac038c6319122de04af85fb88e6618601"><div class="ttname"><a href="consumption_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a></div><div class="ttdeci">static const skill_id skill_survival(&quot;survival&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac15837ea0bd197c8556d41b2af9cee36"><div class="ttname"><a href="consumption_8cpp.html#ac15837ea0bd197c8556d41b2af9cee36">herbivore_blacklist</a></div><div class="ttdeci">static const std::array&lt; flag_id, 2 &gt; herbivore_blacklist</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00192">consumption.cpp:192</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac19dbfb926cd0bd9f257bff5577d138f"><div class="ttname"><a href="consumption_8cpp.html#ac19dbfb926cd0bd9f257bff5577d138f">json_flag_ALLERGEN_DRIED_VEGETABLE</a></div><div class="ttdeci">static const flag_id json_flag_ALLERGEN_DRIED_VEGETABLE(&quot;ALLERGEN_DRIED_VEGETABLE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac2ef9940a6c3cfdb20bbeb9eb795091d"><div class="ttname"><a href="consumption_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a></div><div class="ttdeci">static const json_character_flag json_flag_SAPIOVORE(&quot;SAPIOVORE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac67e14738c5ef9bb790ea7a74fbd2615"><div class="ttname"><a href="consumption_8cpp.html#ac67e14738c5ef9bb790ea7a74fbd2615">itype_dab_pen_on</a></div><div class="ttdeci">static const itype_id itype_dab_pen_on(&quot;dab_pen_on&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac71452586eb6cf87fab888bc561dc897"><div class="ttname"><a href="consumption_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_M_DEPENDENT(&quot;M_DEPENDENT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ac94da8d391815c77827574ea45ba553b"><div class="ttname"><a href="consumption_8cpp.html#ac94da8d391815c77827574ea45ba553b">itype_syringe</a></div><div class="ttdeci">static const itype_id itype_syringe(&quot;syringe&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ace42425e1e703ebbe953ade0f6110b7c"><div class="ttname"><a href="consumption_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a></div><div class="ttdeci">static const efftype_id effect_poison(&quot;poison&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ad0e39d29af45ea0a03f280197b35ca72"><div class="ttname"><a href="consumption_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a></div><div class="ttdeci">static const skill_id skill_cooking(&quot;cooking&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ad42a2492eba82e538cb9a07114fe9118"><div class="ttname"><a href="consumption_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a></div><div class="ttdeci">static const efftype_id effect_common_cold(&quot;common_cold&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ad745add32a91e0a8f43b0d57f9d6ca2b"><div class="ttname"><a href="consumption_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a></div><div class="ttdeci">static const trait_id trait_UNDINE_SLEEP_WATER(&quot;UNDINE_SLEEP_WATER&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_add6199d38f99fd7341acd9e5b7f2df63"><div class="ttname"><a href="consumption_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a></div><div class="ttdeci">static const efftype_id effect_foodpoison(&quot;foodpoison&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_ae218b5b655b85154ca455f105134f9ca"><div class="ttname"><a href="consumption_8cpp.html#ae218b5b655b85154ca455f105134f9ca">material_all</a></div><div class="ttdeci">static const material_id material_all(&quot;all&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af18c51d2a8f81b4d06912d40760e9691"><div class="ttname"><a href="consumption_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a></div><div class="ttdeci">static const trait_id trait_ACIDBLOOD(&quot;ACIDBLOOD&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af1cffcd5b8f3fa5fd6fe1fca1d45725d"><div class="ttname"><a href="consumption_8cpp.html#af1cffcd5b8f3fa5fd6fe1fca1d45725d">trait_MEATARIAN</a></div><div class="ttdeci">static const trait_id trait_MEATARIAN(&quot;MEATARIAN&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af2d313b1132870a819487a4e4fd5e6c1"><div class="ttname"><a href="consumption_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a></div><div class="ttdeci">static const trait_id trait_SCHIZOPHRENIC(&quot;SCHIZOPHRENIC&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af39b0184e307d15344e6631cd30c479e"><div class="ttname"><a href="consumption_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a></div><div class="ttdeci">static const itype_id itype_apparatus(&quot;apparatus&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af39c36bbd4b4d5ea9cc11bbaba43570f"><div class="ttname"><a href="consumption_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a></div><div class="ttdeci">static const efftype_id effect_brainworms(&quot;brainworms&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af4487f6f0e0eb0e3a671f5053fe2c219"><div class="ttname"><a href="consumption_8cpp.html#af4487f6f0e0eb0e3a671f5053fe2c219">trait_SAPROPHAGE</a></div><div class="ttdeci">static const trait_id trait_SAPROPHAGE(&quot;SAPROPHAGE&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af6004e9f3d0f01ca4141a52eeaf5addd"><div class="ttname"><a href="consumption_8cpp.html#af6004e9f3d0f01ca4141a52eeaf5addd">trait_PICKYEATER</a></div><div class="ttdeci">static const trait_id trait_PICKYEATER(&quot;PICKYEATER&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af7cc775eaf9d4242e2e88f4dfedc93f7"><div class="ttname"><a href="consumption_8cpp.html#af7cc775eaf9d4242e2e88f4dfedc93f7">trait_ANTIFRUIT</a></div><div class="ttdeci">static const trait_id trait_ANTIFRUIT(&quot;ANTIFRUIT&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_af818d8b81e06cfaa815792270032453f"><div class="ttname"><a href="consumption_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a></div><div class="ttdeci">static const json_character_flag json_flag_IMMUNE_SPOIL(&quot;IMMUNE_SPOIL&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_afacb3f9c6c50e496fc7589331d4d6900"><div class="ttname"><a href="consumption_8cpp.html#afacb3f9c6c50e496fc7589331d4d6900">json_flag_STRICT_HUMANITARIAN</a></div><div class="ttdeci">static const json_character_flag json_flag_STRICT_HUMANITARIAN(&quot;STRICT_HUMANITARIAN&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_afb770e7a1728acdd3e13e46fc82e3b9a"><div class="ttname"><a href="consumption_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a></div><div class="ttdeci">static const efftype_id effect_hunger_famished(&quot;hunger_famished&quot;)</div></div>
<div class="ttc" id="aconsumption_8cpp_html_afd9e2a62c52a28ee974d111c622bbcd0"><div class="ttname"><a href="consumption_8cpp.html#afd9e2a62c52a28ee974d111c622bbcd0">compute_default_effective_vitamins</a></div><div class="ttdeci">static std::map&lt; vitamin_id, int &gt; compute_default_effective_vitamins(const item &amp;it, const Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00235">consumption.cpp:235</a></div></div>
<div class="ttc" id="acontents__change__handler_8h_html"><div class="ttname"><a href="contents__change__handler_8h.html">contents_change_handler.h</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_a4b73e33b57ae387dc418906492d5f998"><div class="ttname"><a href="creature_8h.html#a4b73e33b57ae387dc418906492d5f998">force</a></div><div class="ttdeci">bool force</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00241">creature.h:241</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adialogue_8h_html"><div class="ttname"><a href="dialogue_8h.html">dialogue.h</a></div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aeffect__on__condition_8h_html"><div class="ttname"><a href="effect__on__condition_8h.html">effect_on_condition.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100">m_mixed</a></div><div class="ttdeci">@ m_mixed</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00349">enums.h:349</a></div></div>
<div class="ttc" id="aenums_8h_html_aa183bf705d2a0eb8309dfc13fb1adddcae2b21aece1b9f853bc86e1b7ae8b4812"><div class="ttname"><a href="enums_8h.html#aa183bf705d2a0eb8309dfc13fb1adddcae2b21aece1b9f853bc86e1b7ae8b4812">distraction_type::eoc</a></div><div class="ttdeci">@ eoc</div></div>
<div class="ttc" id="aenums_8h_html_aba0792ae6ae9fa99a07c9c9e6eae94e9"><div class="ttname"><a href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9">trinary</a></div><div class="ttdeci">trinary</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00078">enums.h:78</a></div></div>
<div class="ttc" id="aenums_8h_html_aba0792ae6ae9fa99a07c9c9e6eae94e9a5fb1f955b45e38e31789286a1790398d"><div class="ttname"><a href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9a5fb1f955b45e38e31789286a1790398d">trinary::ALL</a></div><div class="ttdeci">@ ALL</div></div>
<div class="ttc" id="aenums_8h_html_aba0792ae6ae9fa99a07c9c9e6eae94e9a7c3e1ce969660271ac92e0a5796f5006"><div class="ttname"><a href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9a7c3e1ce969660271ac92e0a5796f5006">trinary::SOME</a></div><div class="ttdeci">@ SOME</div></div>
<div class="ttc" id="aenums_8h_html_aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="enums_8h.html#aba0792ae6ae9fa99a07c9c9e6eae94e9ab50339a10e1de285ac99d4c3990b8693">trinary::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="aevent_8h_html"><div class="ttname"><a href="event_8h.html">event.h</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731aca2fad4209c1d17ff0c45a845a3ab952"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731aca2fad4209c1d17ff0c45a845a3ab952">event_type::character_eats_item</a></div><div class="ttdeci">@ character_eats_item</div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731af3d025e4da027a431f94411a64b79edf"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731af3d025e4da027a431f94411a64b79edf">event_type::character_consumes_item</a></div><div class="ttdeci">@ character_consumes_item</div></div>
<div class="ttc" id="aevent__bus_8h_html"><div class="ttname"><a href="event__bus_8h.html">event_bus.h</a></div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a0cf3cdc271bdfc98c65d142e215dfa84"><div class="ttname"><a href="flag_8cpp.html#a0cf3cdc271bdfc98c65d142e215dfa84">flag_FELINE</a></div><div class="ttdeci">const flag_id flag_FELINE(&quot;FELINE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a124d41689a5783c459aebb9688f1d677"><div class="ttname"><a href="flag_8cpp.html#a124d41689a5783c459aebb9688f1d677">flag_RABBIT</a></div><div class="ttdeci">const flag_id flag_RABBIT(&quot;RABBIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a295179951ea4cf89f532dd102b031a3d"><div class="ttname"><a href="flag_8cpp.html#a295179951ea4cf89f532dd102b031a3d">flag_BIRD</a></div><div class="ttdeci">const flag_id flag_BIRD(&quot;BIRD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a29b61c8ac7c9acb43489f440d4b2947f"><div class="ttname"><a href="flag_8cpp.html#a29b61c8ac7c9acb43489f440d4b2947f">flag_MYCUS_OK</a></div><div class="ttdeci">const flag_id flag_MYCUS_OK(&quot;MYCUS_OK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3113b401ba0ad2aa13b463985dd33812"><div class="ttname"><a href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a></div><div class="ttdeci">const flag_id flag_HIDDEN_HALLU(&quot;HIDDEN_HALLU&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3171a59304f2613ade0a398076b1d474"><div class="ttname"><a href="flag_8cpp.html#a3171a59304f2613ade0a398076b1d474">flag_RAT</a></div><div class="ttdeci">const flag_id flag_RAT(&quot;RAT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34bae5f60acc126973461e6dc5162d3a"><div class="ttname"><a href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a></div><div class="ttdeci">const flag_id flag_MUSHY(&quot;MUSHY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34da07ccc8b142916d801b317ffa84d1"><div class="ttname"><a href="flag_8cpp.html#a34da07ccc8b142916d801b317ffa84d1">flag_INEDIBLE</a></div><div class="ttdeci">const flag_id flag_INEDIBLE(&quot;INEDIBLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34e497e60596636a67ecf5ea476840b2"><div class="ttname"><a href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a></div><div class="ttdeci">const flag_id flag_DIRTY(&quot;DIRTY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a372008f80ba38cb2296ee0923413784e"><div class="ttname"><a href="flag_8cpp.html#a372008f80ba38cb2296ee0923413784e">flag_EATEN_COLD</a></div><div class="ttdeci">const flag_id flag_EATEN_COLD(&quot;EATEN_COLD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3e8c0f9f3287ada7724cea507f6e0987"><div class="ttname"><a href="flag_8cpp.html#a3e8c0f9f3287ada7724cea507f6e0987">flag_EATEN_HOT</a></div><div class="ttdeci">const flag_id flag_EATEN_HOT(&quot;EATEN_HOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a454f1a9f0617bf2e288ab3ee856971cb"><div class="ttname"><a href="flag_8cpp.html#a454f1a9f0617bf2e288ab3ee856971cb">flag_LUPINE</a></div><div class="ttdeci">const flag_id flag_LUPINE(&quot;LUPINE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b54cb6ef8d3b5df451b1186e31d2dc1"><div class="ttname"><a href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_VEGGY(&quot;ALLERGEN_VEGGY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b8e4f0bba6610707d99ff84051bd622"><div class="ttname"><a href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a></div><div class="ttdeci">const flag_id flag_NUTRIENT_OVERRIDE(&quot;NUTRIENT_OVERRIDE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4efafd2b42751d5a01f93e10ed31af01"><div class="ttname"><a href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a></div><div class="ttdeci">const flag_id flag_HOT(&quot;HOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a51e7e1a97bfef950595f48cd979c4515"><div class="ttname"><a href="flag_8cpp.html#a51e7e1a97bfef950595f48cd979c4515">flag_RAW</a></div><div class="ttdeci">const flag_id flag_RAW(&quot;RAW&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a544c01e1fca8d55c8b52169ae7a734ac"><div class="ttname"><a href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a></div><div class="ttdeci">const flag_id flag_HEMOVORE_FUN(&quot;HEMOVORE_FUN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5566b196c79a94e4f0c809f1a67f5729"><div class="ttname"><a href="flag_8cpp.html#a5566b196c79a94e4f0c809f1a67f5729">flag_COOKED</a></div><div class="ttdeci">const flag_id flag_COOKED(&quot;COOKED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5bbef01aea76144ff36db0f90bb82061"><div class="ttname"><a href="flag_8cpp.html#a5bbef01aea76144ff36db0f90bb82061">flag_FUNGAL_VECTOR</a></div><div class="ttdeci">const flag_id flag_FUNGAL_VECTOR(&quot;FUNGAL_VECTOR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5fbe3c430dd4d29aecc92dbd2b0ed4c7"><div class="ttname"><a href="flag_8cpp.html#a5fbe3c430dd4d29aecc92dbd2b0ed4c7">flag_CATTLE</a></div><div class="ttdeci">const flag_id flag_CATTLE(&quot;CATTLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a617ff8737418db1b70ad7c05f3044b7a"><div class="ttname"><a href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a></div><div class="ttdeci">const flag_id flag_FROZEN(&quot;FROZEN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a65cd643a2329d67a93575027727901f1"><div class="ttname"><a href="flag_8cpp.html#a65cd643a2329d67a93575027727901f1">flag_PREDATOR_FUN</a></div><div class="ttdeci">const flag_id flag_PREDATOR_FUN(&quot;PREDATOR_FUN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6cc23010744e8a0b4f25da27bb3ffef8"><div class="ttname"><a href="flag_8cpp.html#a6cc23010744e8a0b4f25da27bb3ffef8">flag_EDIBLE_FROZEN</a></div><div class="ttdeci">const flag_id flag_EDIBLE_FROZEN(&quot;EDIBLE_FROZEN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a762c1eb98a1e10deeb0672efc87d72b5"><div class="ttname"><a href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_MEAT(&quot;ALLERGEN_MEAT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7e1e05972c269d40d228d92bbea6f9b7"><div class="ttname"><a href="flag_8cpp.html#a7e1e05972c269d40d228d92bbea6f9b7">flag_BYPRODUCT</a></div><div class="ttdeci">const flag_id flag_BYPRODUCT(&quot;BYPRODUCT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a900bd922c7a29feb2590e13662efdd23"><div class="ttname"><a href="flag_8cpp.html#a900bd922c7a29feb2590e13662efdd23">flag_ALLERGEN_WHEAT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_WHEAT(&quot;ALLERGEN_WHEAT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9b3c7ef799800088949e9bf1a326be7c"><div class="ttname"><a href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a></div><div class="ttdeci">const flag_id flag_COLD(&quot;COLD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aaaeb9d1427a35e25ade0ed04ee039c53"><div class="ttname"><a href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a></div><div class="ttdeci">const flag_id flag_MELTS(&quot;MELTS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aac1557e5d416782005713c2acdbc5ab3"><div class="ttname"><a href="flag_8cpp.html#aac1557e5d416782005713c2acdbc5ab3">flag_ALLERGEN_FRUIT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_FRUIT(&quot;ALLERGEN_FRUIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aaf26d54fdf728a11755dacbea8f50a80"><div class="ttname"><a href="flag_8cpp.html#aaf26d54fdf728a11755dacbea8f50a80">flag_USE_EAT_VERB</a></div><div class="ttdeci">const flag_id flag_USE_EAT_VERB(&quot;USE_EAT_VERB&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aaf5745695dfba5d85a606041bb9b0692"><div class="ttname"><a href="flag_8cpp.html#aaf5745695dfba5d85a606041bb9b0692">flag_ALLERGEN_MILK</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_MILK(&quot;ALLERGEN_MILK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab6c725040594eae133e1a6e3673f1552"><div class="ttname"><a href="flag_8cpp.html#ab6c725040594eae133e1a6e3673f1552">flag_MOUSE</a></div><div class="ttdeci">const flag_id flag_MOUSE(&quot;MOUSE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab9f2755a126ad6d9442e3d71165d6ddd"><div class="ttname"><a href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a></div><div class="ttdeci">const flag_id flag_CARNIVORE_OK(&quot;CARNIVORE_OK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ace6fbf6b1fe17d0a094be54a2c4e3086"><div class="ttname"><a href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a></div><div class="ttdeci">const flag_id flag_URSINE_HONEY(&quot;URSINE_HONEY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad9eb40d3a01c2f156cb7fa3de5e1dde4"><div class="ttname"><a href="flag_8cpp.html#ad9eb40d3a01c2f156cb7fa3de5e1dde4">flag_NEGATIVE_MONOTONY_OK</a></div><div class="ttdeci">const flag_id flag_NEGATIVE_MONOTONY_OK(&quot;NEGATIVE_MONOTONY_OK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ade116ad17485c3e65cae5e4c97bdfe82"><div class="ttname"><a href="flag_8cpp.html#ade116ad17485c3e65cae5e4c97bdfe82">flag_NO_INGEST</a></div><div class="ttdeci">const flag_id flag_NO_INGEST(&quot;NO_INGEST&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae0e47ee3123936862d27d0ee69de4f41"><div class="ttname"><a href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_JUNK(&quot;ALLERGEN_JUNK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae424edc38996e744b841b99eceee2a52"><div class="ttname"><a href="flag_8cpp.html#ae424edc38996e744b841b99eceee2a52">flag_STRICT_HUMANITARIANISM</a></div><div class="ttdeci">const flag_id flag_STRICT_HUMANITARIANISM(&quot;STRICT_HUMANITARIANISM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae8607045269d50f5b92c4e7a4c09e95c"><div class="ttname"><a href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a></div><div class="ttdeci">const flag_id flag_NO_PARASITES(&quot;NO_PARASITES&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aff57c2d9ce2b1ec14e6f149a06856192"><div class="ttname"><a href="flag_8cpp.html#aff57c2d9ce2b1ec14e6f149a06856192">flag_FERTILIZER</a></div><div class="ttdeci">const flag_id flag_FERTILIZER(&quot;FERTILIZER&quot;)</div></div>
<div class="ttc" id="aflag_8h_html"><div class="ttname"><a href="flag_8h.html">flag.h</a></div></div>
<div class="ttc" id="aflat__set_8h_html"><div class="ttname"><a href="flat__set_8h.html">flat_set.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a745392436b19cce3012d4d8dc0fe422c"><div class="ttname"><a href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a></div><div class="ttdeci">constexpr int MAX_VIEW_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00051">game_constants.h:51</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">kb_menu_status::add</a></div><div class="ttdeci">@ add</div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__category_8h_html"><div class="ttname"><a href="item__category_8h.html">item_category.h</a></div></div>
<div class="ttc" id="aitem__components_8h_html"><div class="ttname"><a href="item__components_8h.html">item_components.h</a></div></div>
<div class="ttc" id="aitem__location_8h_html"><div class="ttname"><a href="item__location_8h.html">item_location.h</a></div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aiuse_8h_html"><div class="ttname"><a href="iuse_8h.html">iuse.h</a></div></div>
<div class="ttc" id="aiuse__actor_8h_html"><div class="ttname"><a href="iuse__actor_8h.html">iuse_actor.h</a></div></div>
<div class="ttc" id="aline_8h_html"><div class="ttname"><a href="line_8h.html">line.h</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="amagic__enchantment_8h_html"><div class="ttname"><a href="magic__enchantment_8h.html">magic_enchantment.h</a></div></div>
<div class="ttc" id="amake__static_8h_html"><div class="ttname"><a href="make__static_8h.html">make_static.h</a></div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amaterial_8h_html"><div class="ttname"><a href="material_8h.html">material.h</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_aeb3bbc4ec861ea58cbfca028920e4cc6"><div class="ttname"><a href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">sqrt</a></div><div class="ttdeci">double sqrt(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00061">math_parser_func.h:61</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amorale__types_8cpp_html_a0526ed49652901e606e16ddc54b34507"><div class="ttname"><a href="morale__types_8cpp.html#a0526ed49652901e606e16ddc54b34507">MORALE_HONEY</a></div><div class="ttdeci">const morale_type MORALE_HONEY(&quot;morale_honey&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a2613ba7c206b9ecbf42c719b35d05e94"><div class="ttname"><a href="morale__types_8cpp.html#a2613ba7c206b9ecbf42c719b35d05e94">MORALE_ATE_WITHOUT_TABLE</a></div><div class="ttdeci">const morale_type MORALE_ATE_WITHOUT_TABLE(&quot;morale_ate_without_table&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a39fc566951d4c0c32246d3bae87d6b6b"><div class="ttname"><a href="morale__types_8cpp.html#a39fc566951d4c0c32246d3bae87d6b6b">MORALE_MEATARIAN</a></div><div class="ttdeci">const morale_type MORALE_MEATARIAN(&quot;morale_meatarian&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a47333d246e87662bad4ddb36c8212855"><div class="ttname"><a href="morale__types_8cpp.html#a47333d246e87662bad4ddb36c8212855">MORALE_SWEETTOOTH</a></div><div class="ttdeci">const morale_type MORALE_SWEETTOOTH(&quot;morale_sweettooth&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a570c61f0865469e9c72de5d007d70e0b"><div class="ttname"><a href="morale__types_8cpp.html#a570c61f0865469e9c72de5d007d70e0b">MORALE_ATE_WITH_TABLE</a></div><div class="ttdeci">const morale_type MORALE_ATE_WITH_TABLE(&quot;morale_ate_with_table&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a68694c468b07b54d28a9ba55ad62380d"><div class="ttname"><a href="morale__types_8cpp.html#a68694c468b07b54d28a9ba55ad62380d">MORALE_NO_DIGEST</a></div><div class="ttdeci">const morale_type MORALE_NO_DIGEST(&quot;morale_no_digest&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a6fd60a468220d4ba2d97741631bf84d9"><div class="ttname"><a href="morale__types_8cpp.html#a6fd60a468220d4ba2d97741631bf84d9">MORALE_ANTIVEGGY</a></div><div class="ttdeci">const morale_type MORALE_ANTIVEGGY(&quot;morale_antiveggy&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a7edfa870019cc60861c30d1599ea0d3c"><div class="ttname"><a href="morale__types_8cpp.html#a7edfa870019cc60861c30d1599ea0d3c">MORALE_ANTIJUNK</a></div><div class="ttdeci">const morale_type MORALE_ANTIJUNK(&quot;morale_antijunk&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a98fb04290cac9e315b180364d86ddf53"><div class="ttname"><a href="morale__types_8cpp.html#a98fb04290cac9e315b180364d86ddf53">MORALE_ANTIMEAT</a></div><div class="ttdeci">const morale_type MORALE_ANTIMEAT(&quot;morale_antimeat&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a9cdddeda12b744438b83f90ced17491a"><div class="ttname"><a href="morale__types_8cpp.html#a9cdddeda12b744438b83f90ced17491a">MORALE_ANTIWHEAT</a></div><div class="ttdeci">const morale_type MORALE_ANTIWHEAT(&quot;morale_antiwheat&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_aaa5338b2599dee343776a16d858acd72"><div class="ttname"><a href="morale__types_8cpp.html#aaa5338b2599dee343776a16d858acd72">MORALE_FOOD_HOT</a></div><div class="ttdeci">const morale_type MORALE_FOOD_HOT(&quot;morale_food_hot&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_aad0f6497e9bdd2600bec61d7a3ce6846"><div class="ttname"><a href="morale__types_8cpp.html#aad0f6497e9bdd2600bec61d7a3ce6846">MORALE_ANTIFRUIT</a></div><div class="ttdeci">const morale_type MORALE_ANTIFRUIT(&quot;morale_antifruit&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ab2e7f135d6749b067f488c38bec7eb8c"><div class="ttname"><a href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a></div><div class="ttdeci">const morale_type MORALE_FOOD_GOOD(&quot;morale_food_good&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ab7b975d881b9d7221861440bea7199ad"><div class="ttname"><a href="morale__types_8cpp.html#ab7b975d881b9d7221861440bea7199ad">MORALE_LACTOSE</a></div><div class="ttdeci">const morale_type MORALE_LACTOSE(&quot;morale_lactose&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_abd50d45c43979e0bc6b3fb8ae8add0a2"><div class="ttname"><a href="morale__types_8cpp.html#abd50d45c43979e0bc6b3fb8ae8add0a2">MORALE_CANNIBAL</a></div><div class="ttdeci">const morale_type MORALE_CANNIBAL(&quot;morale_cannibal&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae5bf12aa6533cebf50765069d6d78eb0"><div class="ttname"><a href="morale__types_8cpp.html#ae5bf12aa6533cebf50765069d6d78eb0">MORALE_FOOD_BAD</a></div><div class="ttdeci">const morale_type MORALE_FOOD_BAD(&quot;morale_food_bad&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae95b6eefc4c6ba6583014d4792b51814"><div class="ttname"><a href="morale__types_8cpp.html#ae95b6eefc4c6ba6583014d4792b51814">MORALE_NULL</a></div><div class="ttdeci">const morale_type MORALE_NULL(&quot;morale_null&quot;)</div></div>
<div class="ttc" id="amorale__types_8h_html"><div class="ttname"><a href="morale__types_8h.html">morale_types.h</a></div></div>
<div class="ttc" id="amutation_8h_html"><div class="ttname"><a href="mutation_8h.html">mutation.h</a></div></div>
<div class="ttc" id="anamespacePickup_html_ab150873f2ba005312d65e11cea9d3706"><div class="ttname"><a href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">Pickup::query_thief</a></div><div class="ttdeci">bool query_thief()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00103">pickup.cpp:103</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a9554e55483a415ce775b06f9519b3078"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a9554e55483a415ce775b06f9519b3078">anonymous_namespace{item_tname.cpp}::mods</a></div><div class="ttdeci">std::string mods(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00152">item_tname.cpp:152</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a0b22ff8ac3965ca766f92684b914aa73"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a0b22ff8ac3965ca766f92684b914aa73">debugmode::DF_FOOD</a></div><div class="ttdeci">@ DF_FOOD</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00257">debug.h:257</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a335c75c5f9b974aed057bff2c6551d36"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a335c75c5f9b974aed057bff2c6551d36">enchant_vals::mod::METABOLISM</a></div><div class="ttdeci">@ METABOLISM</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a57b9d61cde2a81fb9d43bc5f2b38bb68"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a57b9d61cde2a81fb9d43bc5f2b38bb68">enchant_vals::mod::VITAMIN_ABSORB_MOD</a></div><div class="ttdeci">@ VITAMIN_ABSORB_MOD</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a9f9df4958877b98ac3a7253b794aa642"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a9f9df4958877b98ac3a7253b794aa642">enchant_vals::mod::KCAL</a></div><div class="ttdeci">@ KCAL</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998acfad87a34dc4500607772ea99ab1fb00"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998acfad87a34dc4500607772ea99ab1fb00">enchant_vals::mod::CONSUME_TIME_MOD</a></div><div class="ttdeci">@ CONSUME_TIME_MOD</div></div>
<div class="ttc" id="anamespaceiuse_html_a25b6693c57aaadaf10455a3799673341"><div class="ttname"><a href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">iuse::adrenaline_injector</a></div><div class="ttdeci">std::optional&lt; int &gt; adrenaline_injector(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05028">iuse.cpp:5028</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a417111224f79dd3394e544f94be5cd84"><div class="ttname"><a href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">iuse::chew</a></div><div class="ttdeci">std::optional&lt; int &gt; chew(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01131">iuse.cpp:1131</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a85d862264df8d80c14f753c0e823e415"><div class="ttname"><a href="namespaceiuse.html#a85d862264df8d80c14f753c0e823e415">iuse::can_smoke</a></div><div class="ttdeci">std::optional&lt; std::string &gt; can_smoke(const Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00451">iuse.cpp:451</a></div></div>
<div class="ttc" id="anamespaceiuse_html_acc9979793768905336b3047886fa5282"><div class="ttname"><a href="namespaceiuse.html#acc9979793768905336b3047886fa5282">iuse::smoking</a></div><div class="ttdeci">std::optional&lt; int &gt; smoking(Character *, item *, const tripoint &amp;)</div><div class="ttdoc">Entry point for intentional bodily intake of smoke via paper wrapped one time use items: cigars,...</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00544">iuse.cpp:544</a></div></div>
<div class="ttc" id="anamespacemorale__mults_html_a79ec1234f37d505b7a12ce3e8ce6fa77"><div class="ttname"><a href="namespacemorale__mults.html#a79ec1234f37d505b7a12ce3e8ce6fa77">morale_mults::numb</a></div><div class="ttdeci">static const morale_mult numb(0.25, 0.25)</div></div>
<div class="ttc" id="anamespacespell__effect_html_a5e87478109f7e4aec0eb55250650ec16"><div class="ttname"><a href="namespacespell__effect.html#a5e87478109f7e4aec0eb55250650ec16">spell_effect::map</a></div><div class="ttdeci">void map(const spell &amp;sp, Creature &amp;caster, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l01374">magic_spell_effect.cpp:1374</a></div></div>
<div class="ttc" id="anamespaceunits_html_a144476d36f26d6e1916493c3636d54dc"><div class="ttname"><a href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a></div><div class="ttdeci">constexpr value_type to_milliliter(const quantity&lt; value_type, volume_in_milliliter_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00316">units.h:316</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4a90c93a4ae16f8f9a6a3bb554c7fa7c"><div class="ttname"><a href="namespaceunits.html#a4a90c93a4ae16f8f9a6a3bb554c7fa7c">units::from_milliliter</a></div><div class="ttdeci">constexpr quantity&lt; value_type, volume_in_milliliter_tag &gt; from_milliliter(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00303">units.h:303</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4e18c5472c3f55e110fb16c9e0fe8c45"><div class="ttname"><a href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a></div><div class="ttdeci">constexpr double to_liter(const volume &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00321">units.h:321</a></div></div>
<div class="ttc" id="anamespaceunits_html_a6d621878032da8dfad8b4e3460c82932"><div class="ttname"><a href="namespaceunits.html#a6d621878032da8dfad8b4e3460c82932">units::from_gram</a></div><div class="ttdeci">constexpr quantity&lt; value_type, mass_in_milligram_tag &gt; from_gram(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00344">units.h:344</a></div></div>
<div class="ttc" id="anamespaceunits_html_a8306911daadc1a4d7a7b46e9786f4a4c"><div class="ttname"><a href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a></div><div class="ttdeci">constexpr value_type to_gram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00364">units.h:364</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9a9f862b2cd8fb3133a67b8bf927b017"><div class="ttname"><a href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a></div><div class="ttdeci">constexpr quantity&lt; value_type, energy_in_millijoule_tag &gt; from_kilojoule(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00555">units.h:555</a></div></div>
<div class="ttc" id="anpc_8h_html"><div class="ttname"><a href="npc_8h.html">npc.h</a></div></div>
<div class="ttc" id="aoptions_8h_html"><div class="ttname"><a href="options_8h.html">options.h</a></div></div>
<div class="ttc" id="apickup_8h_html"><div class="ttname"><a href="pickup_8h.html">pickup.h</a></div></div>
<div class="ttc" id="apimpl_8h_html"><div class="ttname"><a href="pimpl_8h.html">pimpl.h</a></div></div>
<div class="ttc" id="arecipe_8h_html"><div class="ttname"><a href="recipe_8h.html">recipe.h</a></div></div>
<div class="ttc" id="arecipe__dictionary_8cpp_html_a9fdb53bd54fb6dcc5f9b2e1e1b44570f"><div class="ttname"><a href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a></div><div class="ttdeci">recipe_dictionary recipe_dict</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00031">recipe_dictionary.cpp:31</a></div></div>
<div class="ttc" id="arecipe__dictionary_8h_html"><div class="ttname"><a href="recipe__dictionary_8h.html">recipe_dictionary.h</a></div></div>
<div class="ttc" id="arequirements_8h_html"><div class="ttname"><a href="requirements_8h.html">requirements.h</a></div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="astomach_8h_html"><div class="ttname"><a href="stomach_8h.html">stomach.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructconsumption__event_html"><div class="ttname"><a href="structconsumption__event.html">consumption_event</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00406">character.h:406</a></div></div>
<div class="ttc" id="astructdialogue_html"><div class="ttname"><a href="structdialogue.html">dialogue</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00184">dialogue.h:184</a></div></div>
<div class="ttc" id="astructfood__summary_html"><div class="ttname"><a href="structfood__summary.html">food_summary</a></div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00100">stomach.h:100</a></div></div>
<div class="ttc" id="astructislot__comestible_html"><div class="ttname"><a href="structislot__comestible.html">islot_comestible</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00120">itype.h:120</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a0cead51d294f00b5b9be3bdcb98ba030"><div class="ttname"><a href="structislot__comestible.html#a0cead51d294f00b5b9be3bdcb98ba030">islot_comestible::consumption_eocs</a></div><div class="ttdeci">std::vector&lt; effect_on_condition_id &gt; consumption_eocs</div><div class="ttdoc">effect on conditions to apply on consumption</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00171">itype.h:171</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a5cc5c5cdb8cb4246ce4978361dac2fe3"><div class="ttname"><a href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">islot_comestible::addictions</a></div><div class="ttdeci">std::map&lt; addiction_id, int &gt; addictions</div><div class="ttdoc">list of addictions and their potential</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00144">itype.h:144</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aa8ccc76e6c3389ee17cbb14a7625bd39"><div class="ttname"><a href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">islot_comestible::stim</a></div><div class="ttdeci">int stim</div><div class="ttdoc">stimulant effect</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00147">itype.h:147</a></div></div>
<div class="ttc" id="astructislot__comestible_html_ac2cb22e853ef3d01e923f5310a34da92"><div class="ttname"><a href="structislot__comestible.html#ac2cb22e853ef3d01e923f5310a34da92">islot_comestible::get_default_nutr</a></div><div class="ttdeci">int get_default_nutr() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00193">itype.h:193</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aca5554772c9e19eb88c6e50b808b5b64"><div class="ttname"><a href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">islot_comestible::quench</a></div><div class="ttdeci">int quench</div><div class="ttdoc">effect on character thirst (may be negative)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00134">itype.h:134</a></div></div>
<div class="ttc" id="astructislot__comestible_html_ae639a11c4df8f98c9f0ddd5e5d6056ac"><div class="ttname"><a href="structislot__comestible.html#ae639a11c4df8f98c9f0ddd5e5d6056ac">islot_comestible::sleepiness_mod</a></div><div class="ttdeci">int sleepiness_mod</div><div class="ttdoc">sleepiness altering effect</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00150">itype.h:150</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aea71935dc37b7f711efb6f8d9ca5353d"><div class="ttname"><a href="structislot__comestible.html#aea71935dc37b7f711efb6f8d9ca5353d">islot_comestible::healthy</a></div><div class="ttdeci">int healthy</div><div class="ttdoc">TODO: add documentation.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00159">itype.h:159</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aecc91e5454fc8c79df0fe6535690f246"><div class="ttname"><a href="structislot__comestible.html#aecc91e5454fc8c79df0fe6535690f246">islot_comestible::kcal_per_nutr</a></div><div class="ttdeci">static constexpr float kcal_per_nutr</div><div class="ttdoc">1 nutr ~= 8.7kcal (1 nutr/5min = 288 nutr/day at 2500kcal/day)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00187">itype.h:187</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00110">requirements.h:110</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01186">itype.h:1186</a></div></div>
<div class="ttc" id="astructitype_html_a291870408701f0174d8c46b7f770fbaf"><div class="ttname"><a href="structitype.html#a291870408701f0174d8c46b7f770fbaf">itype::get_id</a></div><div class="ttdeci">itype_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01497">itype.h:1497</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00179">itype.cpp:179</a></div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
<div class="ttc" id="astructitype_html_a72121b6b478fae1969a4b559f3ded22f"><div class="ttname"><a href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">itype::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00164">itype.cpp:164</a></div></div>
<div class="ttc" id="astructitype_html_a76600c0d6a88c8d983838f0df2276212"><div class="ttname"><a href="structitype.html#a76600c0d6a88c8d983838f0df2276212">itype::invoke</a></div><div class="ttdeci">std::optional&lt; int &gt; invoke(Character *p, item &amp;it, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00195">itype.cpp:195</a></div></div>
<div class="ttc" id="astructitype_html_a7ff45d94507fdbf7369ae269a0f1e52b"><div class="ttname"><a href="structitype.html#a7ff45d94507fdbf7369ae269a0f1e52b">itype::has_use</a></div><div class="ttdeci">bool has_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00159">itype.cpp:159</a></div></div>
<div class="ttc" id="astructitype_html_a81cfbf195e75fa6b9729cc4ccb89131d"><div class="ttname"><a href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">itype::materials</a></div><div class="ttdeci">std::map&lt; material_id, int &gt; materials</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01303">itype.h:1303</a></div></div>
<div class="ttc" id="astructitype_html_a9defae7ba72f6d0af2e5629c4244f00e"><div class="ttname"><a href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">itype::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01501">itype.h:1501</a></div></div>
<div class="ttc" id="astructitype_html_aa656fede37aaf975ab567bcc5c6a452e"><div class="ttname"><a href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">itype::comestible</a></div><div class="ttdeci">cata::value_ptr&lt; islot_comestible &gt; comestible</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01198">itype.h:1198</a></div></div>
<div class="ttc" id="astructitype_html_ab40a0ab92be2b0d0dfb8fc027a8057ec"><div class="ttname"><a href="structitype.html#ab40a0ab92be2b0d0dfb8fc027a8057ec">itype::recipes</a></div><div class="ttdeci">std::vector&lt; recipe_id &gt; recipes</div><div class="ttdoc">What recipes can make this item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01250">itype.h:1250</a></div></div>
<div class="ttc" id="astructitype_html_abd3ca12912367ae92d488864e09ea921"><div class="ttname"><a href="structitype.html#abd3ca12912367ae92d488864e09ea921">itype::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdoc">Space occupied by items of this type CAUTION: value given is for a default-sized stack.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01389">itype.h:1389</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
<div class="ttc" id="astructitype_html_afc46b586361661f16219f0a465b71c1d"><div class="ttname"><a href="structitype.html#afc46b586361661f16219f0a465b71c1d">itype::can_use</a></div><div class="ttdeci">bool can_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00174">itype.cpp:174</a></div></div>
<div class="ttc" id="astructmutation__branch_html"><div class="ttname"><a href="structmutation__branch.html">mutation_branch</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00172">mutation.h:172</a></div></div>
<div class="ttc" id="astructmutation__branch_html_ac857653bc21cdb5c1122a65def903a9d"><div class="ttname"><a href="structmutation__branch.html#ac857653bc21cdb5c1122a65def903a9d">mutation_branch::vitamin_absorb_multi</a></div><div class="ttdeci">std::map&lt; material_id, std::map&lt; vitamin_id, double &gt; &gt; vitamin_absorb_multi</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00318">mutation.h:318</a></div></div>
<div class="ttc" id="astructmutation__branch_html_ae92480c28083e11a5e61dc535515c17a"><div class="ttname"><a href="structmutation__branch.html#ae92480c28083e11a5e61dc535515c17a">mutation_branch::vitamin_rates</a></div><div class="ttdeci">std::map&lt; vitamin_id, time_duration &gt; vitamin_rates</div><div class="ttdoc">Mutations may adjust one or more of the default vitamin usage rates.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00315">mutation.h:315</a></div></div>
<div class="ttc" id="astructnutrients_html"><div class="ttname"><a href="structnutrients.html">nutrients</a></div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00036">stomach.h:36</a></div></div>
<div class="ttc" id="astructnutrients_html_a03ea8d7d47251651f66a032158aaa30e"><div class="ttname"><a href="structnutrients.html#a03ea8d7d47251651f66a032158aaa30e">nutrients::min_in_place</a></div><div class="ttdeci">void min_in_place(const nutrients &amp;r)</div><div class="ttdoc">Replace the values here with the minimum (or maximum) of themselves and the corresponding values take...</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00015">stomach.cpp:15</a></div></div>
<div class="ttc" id="astructnutrients_html_a27fef4783e99c7f2471a9fabcabe19b5"><div class="ttname"><a href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">nutrients::kcal</a></div><div class="ttdeci">int kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00118">stomach.cpp:118</a></div></div>
<div class="ttc" id="astructnutrients_html_af9d45327824853ff3a2a18ca53f18508"><div class="ttname"><a href="structnutrients.html#af9d45327824853ff3a2a18ca53f18508">nutrients::max_in_place</a></div><div class="ttdeci">void max_in_place(const nutrients &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00033">stomach.cpp:33</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01162">requirements.cpp:1162</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a81eb3f292988bc3b327f50cdcbb74e0c"><div class="ttname"><a href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; item_comp &gt; &gt; alter_item_comp_vector</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00217">requirements.h:217</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
<div class="ttc" id="astructuse__function_html_a468ef5f707dc56c2822d23ea226c9b36"><div class="ttname"><a href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">use_function::get_actor_ptr</a></div><div class="ttdeci">iuse_actor * get_actor_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00314">iuse.h:314</a></div></div>
<div class="ttc" id="astructvitamin__applied__effect_html"><div class="ttname"><a href="structvitamin__applied__effect.html">vitamin_applied_effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00053">effect.h:53</a></div></div>
<div class="ttc" id="atext__snippets_8cpp_html_ac3fc11c159cd056aa15ad7c0b37b070a"><div class="ttname"><a href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a></div><div class="ttdeci">snippet_library SNIPPET</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00015">text_snippets.cpp:15</a></div></div>
<div class="ttc" id="atext__snippets_8h_html"><div class="ttname"><a href="text__snippets_8h.html">text_snippets.h</a></div></div>
<div class="ttc" id="atranslation_8h_html"><div class="ttname"><a href="translation_8h.html">translation.h</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="atype__id_8h_html_a62798cd4a1ea702e8d25b8c0f17a4834"><div class="ttname"><a href="type__id_8h.html#a62798cd4a1ea702e8d25b8c0f17a4834">vitamin_id</a></div><div class="ttdeci">string_id&lt; vitamin &gt; vitamin_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00292">type_id.h:292</a></div></div>
<div class="ttc" id="atype__id_8h_html_afd88da6401595fae37dec376750634c4"><div class="ttname"><a href="type__id_8h.html#afd88da6401595fae37dec376750634c4">json_character_flag</a></div><div class="ttdeci">string_id&lt; json_flag &gt; json_character_flag</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00316">type_id.h:316</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="avalue__ptr_8h_html"><div class="ttname"><a href="value__ptr_8h.html">value_ptr.h</a></div></div>
<div class="ttc" id="avisitable_8h_html"><div class="ttname"><a href="visitable_8h.html">visitable.h</a></div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a></div><div class="ttdeci">@ NEXT</div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38">VisitResponse::ABORT</a></div><div class="ttdeci">@ ABORT</div></div>
<div class="ttc" id="avitamin_8h_html"><div class="ttname"><a href="vitamin_8h.html">vitamin.h</a></div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a></div><div class="ttdeci">@ VITAMIN</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:26 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
