<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: unload_loot_activity_actor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classunload__loot__activity__actor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">unload_loot_activity_actor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for unload_loot_activity_actor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classunload__loot__activity__actor.png" usemap="#unload_5Floot_5Factivity_5Factor_map" alt=""/>
  <map id="unload_5Floot_5Factivity_5Factor_map" name="unload_5Floot_5Factivity_5Factor_map">
<area href="classactivity__actor.html" alt="activity_actor" shape="rect" coords="0,0,160,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a593c2261816673658917622e7b234334"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a593c2261816673658917622e7b234334">unload_loot_activity_actor</a> ()=default</td></tr>
<tr class="separator:a593c2261816673658917622e7b234334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d73f7517a244ed88fde7ee3c2938f79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a5d73f7517a244ed88fde7ee3c2938f79">unload_loot_activity_actor</a> (int <a class="el" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a>)</td></tr>
<tr class="separator:a5d73f7517a244ed88fde7ee3c2938f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7febeda81834bca2f397c099852d95ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a7febeda81834bca2f397c099852d95ae">get_type</a> () const override</td></tr>
<tr class="memdesc:a7febeda81834bca2f397c099852d95ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the activity id of the corresponding activity.  <a href="classunload__loot__activity__actor.html#a7febeda81834bca2f397c099852d95ae">More...</a><br /></td></tr>
<tr class="separator:a7febeda81834bca2f397c099852d95ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d62fd967e29ece87616e359f3fa18df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a6d62fd967e29ece87616e359f3fa18df">start</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;who) override</td></tr>
<tr class="memdesc:a6d62fd967e29ece87616e359f3fa18df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called once at the start of the activity.  <a href="classunload__loot__activity__actor.html#a6d62fd967e29ece87616e359f3fa18df">More...</a><br /></td></tr>
<tr class="separator:a6d62fd967e29ece87616e359f3fa18df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b888d06039dc22af6e04c7f1342d29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a81b888d06039dc22af6e04c7f1342d29">do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;you) override</td></tr>
<tr class="memdesc:a81b888d06039dc22af6e04c7f1342d29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on every turn of the activity It may be used to stop the activity prematurely by setting it to null.  <a href="classunload__loot__activity__actor.html#a81b888d06039dc22af6e04c7f1342d29">More...</a><br /></td></tr>
<tr class="separator:a81b888d06039dc22af6e04c7f1342d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4df94821e50f8250a4204e73b7079c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#ad4df94821e50f8250a4204e73b7079c1">finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;, <a class="el" href="classCharacter.html">Character</a> &amp;) override</td></tr>
<tr class="memdesc:ad4df94821e50f8250a4204e73b7079c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the activity runs out of moves, assuming that it has not already been set to null.  <a href="classunload__loot__activity__actor.html#ad4df94821e50f8250a4204e73b7079c1">More...</a><br /></td></tr>
<tr class="separator:ad4df94821e50f8250a4204e73b7079c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9d3d5231b46c9879b6967e29375e35"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a5d9d3d5231b46c9879b6967e29375e35">clone</a> () const override</td></tr>
<tr class="memdesc:a5d9d3d5231b46c9879b6967e29375e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a deep copy of this object.  <a href="classunload__loot__activity__actor.html#a5d9d3d5231b46c9879b6967e29375e35">More...</a><br /></td></tr>
<tr class="separator:a5d9d3d5231b46c9879b6967e29375e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeedc04b269c89e27a561204f3e703e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#afeedc04b269c89e27a561204f3e703e4">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;jsout) const override</td></tr>
<tr class="memdesc:afeedc04b269c89e27a561204f3e703e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must write any custom members of the derived class to json Note that a static member function for deserialization must also be created and added to the <code>activity_actor_deserializers</code> hashmap in <a class="el" href="activity__actor_8cpp.html">activity_actor.cpp</a>.  <a href="classunload__loot__activity__actor.html#afeedc04b269c89e27a561204f3e703e4">More...</a><br /></td></tr>
<tr class="separator:afeedc04b269c89e27a561204f3e703e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classactivity__actor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classactivity__actor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classactivity__actor.html">activity_actor</a></td></tr>
<tr class="memitem:a54a841cdcaa8200f6131cc676d7e909e inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a54a841cdcaa8200f6131cc676d7e909e">~activity_actor</a> ()=default</td></tr>
<tr class="separator:a54a841cdcaa8200f6131cc676d7e909e inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a7bec038a84479634d1c07cf198d6e3b1">canceled</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;, <a class="el" href="classCharacter.html">Character</a> &amp;)</td></tr>
<tr class="memdesc:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just before <a class="el" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity()</a> executes.  <a href="classactivity__actor.html#a7bec038a84479634d1c07cf198d6e3b1">More...</a><br /></td></tr>
<tr class="separator:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a37b694dc649a2bcad3a2acc98672caa6">can_resume_with</a> (const <a class="el" href="classactivity__actor.html">activity_actor</a> &amp;<a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, const <a class="el" href="classCharacter.html">Character</a> &amp;who) const</td></tr>
<tr class="memdesc:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called in <a class="el" href="classplayer__activity.html#abecfb3ed21a7ab0d7ac168ae9fc135e1" title="Returns true if activities are similar enough that this activity can be resumed instead of starting t...">player_activity::can_resume_with</a> which allows suspended activities to be resumed instead of starting a new activity in certain cases.  <a href="classactivity__actor.html#a37b694dc649a2bcad3a2acc98672caa6">More...</a><br /></td></tr>
<tr class="separator:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af57af39e0e8248b40b90b313093ab96f inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#af57af39e0e8248b40b90b313093ab96f">get_progress_message</a> (const <a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>) const</td></tr>
<tr class="memdesc:af57af39e0e8248b40b90b313093ab96f inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to generate the progress display at the top of the screen.  <a href="classactivity__actor.html#af57af39e0e8248b40b90b313093ab96f">More...</a><br /></td></tr>
<tr class="separator:af57af39e0e8248b40b90b313093ab96f inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a4e36b95612ee7c2bf1282cf0a1bea185">exertion_level</a> () const</td></tr>
<tr class="memdesc:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called every turn, in <a class="el" href="classplayer__activity.html#a8ec4a2e2ed99099a3ecb383063b95345" title="Performs the activity for a single turn.">player_activity::do_turn</a> (with some indirection through <a class="el" href="classplayer__activity.html#a75577f2ff06719f14ce680a8d1308cdd">player_activity::exertion_level</a>) How strenuous this activity level is.  <a href="classactivity__actor.html#a4e36b95612ee7c2bf1282cf0a1bea185">More...</a><br /></td></tr>
<tr class="separator:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a8fe2e2b63dc1fc20ad8ff59c48fdab57">do_drop_invalid_inventory</a> () const</td></tr>
<tr class="memdesc:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override to false in actors that are slow because they frequently invalidate the inventory and trigger excessive drop_invalid_inventory() calls, and can guarantee that it is called appropriately themselves.  <a href="classactivity__actor.html#a8fe2e2b63dc1fc20ad8ff59c48fdab57">More...</a><br /></td></tr>
<tr class="separator:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a35bd39747a3c71dc332e8d7506d88ea8"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a35bd39747a3c71dc332e8d7506d88ea8">deserialize</a> (<a class="el" href="classJsonValue.html">JsonValue</a> &amp;jsin)</td></tr>
<tr class="separator:a35bd39747a3c71dc332e8d7506d88ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a90918953532ed129b1e7db180038ce0e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a></td></tr>
<tr class="separator:a90918953532ed129b1e7db180038ce0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5cc2de583c71bbf268daabc8151a116"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a></td></tr>
<tr class="separator:ac5cc2de583c71bbf268daabc8151a116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5e0e2f4ff541a1250ece30d9f28b9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a></td></tr>
<tr class="separator:aad5e0e2f4ff541a1250ece30d9f28b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae54f821e92dab4d6c919a99776f9ff7"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a></td></tr>
<tr class="separator:aae54f821e92dab4d6c919a99776f9ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e570019585bf13604d57255d66142e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classunload__loot__activity__actor.html#a33e570019585bf13604d57255d66142e">placement</a></td></tr>
<tr class="separator:a33e570019585bf13604d57255d66142e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02100">2100</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a593c2261816673658917622e7b234334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593c2261816673658917622e7b234334">&#9670;&nbsp;</a></span>unload_loot_activity_actor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unload_loot_activity_actor::unload_loot_activity_actor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5d73f7517a244ed88fde7ee3c2938f79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d73f7517a244ed88fde7ee3c2938f79">&#9670;&nbsp;</a></span>unload_loot_activity_actor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unload_loot_activity_actor::unload_loot_activity_actor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>moves</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02104">2104</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;: <a class="code" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a>( <a class="code" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a> ) {}</div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_a90918953532ed129b1e7db180038ce0e"><div class="ttname"><a href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">unload_loot_activity_actor::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02122">activity_actor_definitions.h:2122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5d9d3d5231b46c9879b6967e29375e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9d3d5231b46c9879b6967e29375e35">&#9670;&nbsp;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classactivity__actor.html">activity_actor</a>&gt; unload_loot_activity_actor::clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a deep copy of this object. </p>
<p>Example implementation: </p><div class="fragment"><div class="line"><span class="keyword">class </span>my_activity_actor {</div>
<div class="line">    std::unique_ptr&lt;activity_actor&gt; <a class="code" href="classunload__loot__activity__actor.html#a5d9d3d5231b46c9879b6967e29375e35">clone</a>()<span class="keyword"> const override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> std::make_unique&lt;my_activity_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_a5d9d3d5231b46c9879b6967e29375e35"><div class="ttname"><a href="classunload__loot__activity__actor.html#a5d9d3d5231b46c9879b6967e29375e35">unload_loot_activity_actor::clone</a></div><div class="ttdeci">std::unique_ptr&lt; activity_actor &gt; clone() const override</div><div class="ttdoc">Returns a deep copy of this object.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02114">activity_actor_definitions.h:2114</a></div></div>
</div><!-- fragment --><p> The returned value should behave like the original item and must have the same type. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a0b705537401c10f07320cc4e6491d99f">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02114">2114</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                                                             {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="keywordflow">return</span> std::make_unique&lt;unload_loot_activity_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a35bd39747a3c71dc332e8d7506d88ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35bd39747a3c71dc332e8d7506d88ea8">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt; unload_loot_activity_actor::deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonValue.html">JsonValue</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l06975">6975</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;{</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;    <a class="code" href="classunload__loot__activity__actor.html">unload_loot_activity_actor</a> actor( {} );</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160; </div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> data = jsin.<a class="code" href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">get_object</a>();</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160; </div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;moves&quot;</span>, actor.moves );</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;    data.read( <span class="stringliteral">&quot;num_processed&quot;</span>, actor.num_processed );</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;    data.read( <span class="stringliteral">&quot;stage&quot;</span>, actor.stage );</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;    data.read( <span class="stringliteral">&quot;coord_set&quot;</span>, actor.coord_set );</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;    data.read( <span class="stringliteral">&quot;placement&quot;</span>, actor.placement );</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160; </div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;    <span class="keywordflow">return</span> actor.clone();</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonValue_html_aa90309342403c2e86b358ce996e34a1f"><div class="ttname"><a href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">JsonValue::get_object</a></div><div class="ttdeci">JsonObject get_object() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00268">flexbuffer_json-inl.h:268</a></div></div>
<div class="ttc" id="aclassunload__loot__activity__actor_html"><div class="ttname"><a href="classunload__loot__activity__actor.html">unload_loot_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02100">activity_actor_definitions.h:2101</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00268">JsonValue::get_object()</a>, and <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>.</p>

</div>
</div>
<a id="a81b888d06039dc22af6e04c7f1342d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81b888d06039dc22af6e04c7f1342d29">&#9670;&nbsp;</a></span>do_turn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unload_loot_activity_actor::do_turn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called on every turn of the activity It may be used to stop the activity prematurely by setting it to null. </p>

<p>Implements <a class="el" href="classactivity__actor.html#ad414594da4c234257dc1874724d726c9">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l07039">7039</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;{</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;    <span class="keyword">enum</span> activity_stage : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;        <span class="comment">//Initial stage</span></div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;        <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a> = 0,</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;        <span class="comment">//Think about what to do first: choose destination</span></div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;        THINK,</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;        <span class="comment">//Do activity</span></div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;        DO,</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;    };</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160; </div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;    <a class="code" href="classfaction.html">faction</a> <span class="keyword">const</span> *fac = you.get_faction();</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;    <a class="code" href="classstring__id.html">faction_id</a> fac_id = fac == <span class="keyword">nullptr</span> ? <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a53ae846eb476201fe542a1575b244239">faction_id</a>() : fac-&gt;<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160; </div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> abspos = you.get_location();</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;    <a class="code" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code" href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a>();</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a8a6e17bf2b027fe957361bb7c5d857ce">check_vehicle_zones</a>( here.<a class="code" href="classmap.html#ab2a7030c1e990957e11ae52b58ad7056">get_abs_sub</a>().<a class="code" href="classcoords_1_1coord__point__mut.html#aa94b8bd33e85ce94a3634e6e27ab0cdd">z</a>() ) ) {</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;        mgr.<a class="code" href="classzone__manager.html#a815445722eb24bf8e8f2af3ec9f32a99">cache_vzones</a>();</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;    }</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160; </div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a> ) {</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;        <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a>.clear();</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p :</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;             mgr.<a class="code" href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">get_near</a>( <a class="code" href="activity__actor_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>, abspos, <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;                           fac_id ) ) {</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a>.insert( p.raw() );</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;        }</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160; </div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p :</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;             mgr.<a class="code" href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">get_near</a>( <a class="code" href="activity__actor_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a>, abspos, <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;                           fac_id ) ) {</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a>.insert( p.raw() );</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;        }</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;        <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = THINK;</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;    }</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160; </div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> == THINK ) {</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;        <span class="comment">//initialize num_processed</span></div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;        <a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a> = 0;</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;        std::vector&lt;tripoint_abs_ms&gt; src_set;</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;        src_set.reserve( <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a>.size() );</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p : <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a> ) {</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;            src_set.emplace_back( p );</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;        }</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;        <span class="comment">// sort source tiles by distance</span></div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;src_sorted = <a class="code" href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a>( abspos, src_set );</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160; </div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;src : src_sorted ) {</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;            <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#a33e570019585bf13604d57255d66142e">placement</a> = src.raw();</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a>.erase( src.raw() );</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160; </div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp;src_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( src );</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;            <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( src_loc ) ) {</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;                <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( you.pos() ) ) {</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;                    <span class="comment">// p is implicitly an NPC that has been moved off the map, so reset the activity</span></div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;                    <span class="comment">// and unload them</span></div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;                    you.cancel_activity();</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;                    you.assign_activity( <a class="code" href="activity__actor_8cpp.html#a81ed8763fd3a8844a2f88b0f938d8939">ACT_UNLOAD_LOOT</a> );</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;                    you.set_moves( 0 );</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reload_npcs();</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;                }</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;                std::vector&lt;tripoint_bub_ms&gt; route;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;                route = here.<a class="code" href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">route</a>( you.pos_bub(), src_loc, you.get_pathfinding_settings(),</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;                                    you.get_path_avoid() );</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;                <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;                    <span class="comment">// can&#39;t get there, can&#39;t do anything, skip it</span></div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;                }</div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;                <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = DO;</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;                you.set_destination( route, <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;                you.activity.set_to_null();</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;            }</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160; </div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;            <span class="comment">// skip tiles in IGNORE zone and tiles on fire</span></div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;            <span class="comment">// (to prevent taking out wood off the lit brazier)</span></div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;            <span class="comment">// and inaccessible furniture, like filled charcoal kiln</span></div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;            <span class="keywordflow">if</span>( mgr.<a class="code" href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">has</a>( <a class="code" href="activity__actor_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a>, src, fac_id ) ||</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;                here.<a class="code" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( src_loc, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a> ) != <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;                !here.<a class="code" href="classmap.html#a3014d235b1298cadddb4c412d133ae6b">can_put_items_ter_furn</a>( src_loc ) ) {</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;            }</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160; </div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;            <span class="comment">//nothing to sort?</span></div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;            <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; ovp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( src_loc ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>();</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;            <span class="keywordflow">if</span>( ( !ovp || ovp-&gt;items().empty() ) &amp;&amp; here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src_loc ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;            }</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160; </div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;            <span class="keywordtype">bool</span> is_adjacent_or_closer = <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( you.pos_bub(), src_loc ) &lt;= 1;</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;            <span class="comment">// before we unload any item, check if player is at or</span></div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;            <span class="comment">// adjacent to the loot source tile</span></div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;            <span class="keywordflow">if</span>( !is_adjacent_or_closer ) {</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;                std::vector&lt;tripoint_bub_ms&gt; route;</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;                <span class="keywordtype">bool</span> adjacent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160; </div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;                <span class="comment">// get either direct route or route to nearest adjacent tile if</span></div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;                <span class="comment">// source tile is impassable</span></div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( src_loc ) ) {</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;                    route = here.<a class="code" href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">route</a>( you.pos_bub(), src_loc, you.get_pathfinding_settings(),</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;                                        you.get_path_avoid() );</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;                    <span class="comment">// impassable source tile (locker etc.),</span></div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;                    <span class="comment">// get route to nearest adjacent tile instead</span></div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;                    route = <a class="code" href="activity__handlers_8h.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a>( you, src_loc );</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;                    adjacent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;                }</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160; </div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;                <span class="comment">// check if we found path to source / adjacent tile</span></div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;                <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can&#39;t reach the source tile.&quot;</span> ),</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;                             you.disp_name() );</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;                }</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160; </div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;                <span class="comment">// shorten the route to adjacent tile, if necessary</span></div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;                <span class="keywordflow">if</span>( !adjacent ) {</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;                    route.pop_back();</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;                }</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160; </div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;                <span class="comment">// set the destination and restart activity after player arrives there</span></div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;                <span class="comment">// we don&#39;t need to check for safe mode,</span></div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;                <span class="comment">// activity will be restarted only if</span></div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;                <span class="comment">// player arrives on destination tile</span></div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;                <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = DO;</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;                you.set_destination( route, <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;                you.activity.set_to_null();</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;            }</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = DO;</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;        }</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;    }</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> == DO ) {</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> src( <a class="code" href="classunload__loot__activity__actor.html#a33e570019585bf13604d57255d66142e">placement</a> );</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> src_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( src );</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160; </div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;        <span class="keywordtype">bool</span> is_adjacent_or_closer = <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( you.pos_bub(), src_loc ) &lt;= 1;</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;        <span class="comment">// before we move any item, check if player is at or</span></div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;        <span class="comment">// adjacent to the loot source tile</span></div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;        <span class="keywordflow">if</span>( !is_adjacent_or_closer ) {</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;            <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = THINK;</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;        }</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160; </div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;        <span class="comment">// the boolean in this pair being true indicates the item is from a vehicle storage space</span></div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;        <span class="keyword">auto</span> items = std::vector&lt;std::pair&lt;item *, bool&gt;&gt;();</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;        <a class="code" href="classvehicle.html">vehicle</a> *src_veh;</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;        <span class="keywordtype">int</span> src_part;</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160; </div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;        <span class="comment">//Check source for cargo part</span></div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;        <span class="comment">//map_stack and vehicle_stack are different types but inherit from item_stack</span></div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;        <span class="comment">// TODO: use one for loop</span></div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;        <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; ovp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( src_loc ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>() ) {</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;            src_veh = &amp;ovp-&gt;<a class="code" href="classvehicle.html#a1f80b26dc4684734f1a903605f3cd4a3">vehicle</a>();</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;            src_part = ovp-&gt;part_index();</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : ovp-&gt;items() ) {</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;                items.emplace_back( &amp;it, <span class="keyword">true</span> );</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;            }</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;            src_veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;            src_part = -1;</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;        }</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src_loc ) ) {</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;            items.emplace_back( &amp;it, <span class="keyword">false</span> );</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;        }</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160; </div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;        <span class="keywordtype">bool</span> unload_mods = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;        <span class="keywordtype">bool</span> unload_molle = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;        <span class="keywordtype">bool</span> unload_sparse_only = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;        <span class="keywordtype">int</span> unload_sparse_threshold = 20;</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160; </div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;        std::vector&lt;zone_data const *&gt; <span class="keyword">const</span> <a class="code" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a> = mgr.<a class="code" href="classzone__manager.html#a65c00c5dafbe18e45596f23c6f116efc">get_zones_at</a>( src, <a class="code" href="activity__actor_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>,</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;                fac_id );</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160; </div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;        <span class="comment">// get most open rules out of all stacked zones</span></div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classzone__data.html">zone_data</a> <span class="keyword">const</span> *zone : <a class="code" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a> ) {</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;            <a class="code" href="classunload__options.html">unload_options</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classunload__options.html">unload_options</a> &amp;<span class="keyword">&gt;</span>( zone-&gt;get_options() );</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;            unload_molle |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_molle();</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;            unload_mods |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_mods();</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;            unload_sparse_only |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_sparse_only();</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;            unload_sparse_threshold |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_sparse_threshold();</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;        }</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160; </div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;        <span class="comment">//Skip items that have already been processed</span></div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = items.begin() + <a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a>; it &lt; items.end(); ++it ) {</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160; </div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;            <a class="code" href="classitem.html">item</a> &amp;thisitem = *it-&gt;first;</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160; </div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;            <span class="comment">// skip unpickable liquid</span></div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;            <span class="keywordflow">if</span>( thisitem.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;                ++<a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a>;</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;            }</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160; </div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;            <span class="comment">// skip favorite items in ignore favorite zones</span></div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;            <span class="keywordflow">if</span>( thisitem.<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> &amp;&amp; mgr.<a class="code" href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">has</a>( <a class="code" href="activity__actor_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a>, src, fac_id ) ) {</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;                ++<a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a>;</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;            }</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160; </div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;            <span class="comment">// Only if it&#39;s from a vehicle do we use the vehicle source location information.</span></div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;            <a class="code" href="classvehicle.html">vehicle</a> *this_veh = it-&gt;second ? src_veh : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> this_part = it-&gt;second ? src_part : -1;</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160; </div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;            <span class="comment">// if this item isn&#39;t going anywhere and its not sealed</span></div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;            <span class="comment">// check if it is in a unload zone or a strip corpse zone</span></div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;            <span class="comment">// then we should unload it and see what is inside</span></div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;            <span class="keywordflow">if</span>( mgr.<a class="code" href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">has_near</a>( <a class="code" href="activity__actor_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>, abspos, 1, fac_id ) ||</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;                ( mgr.<a class="code" href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">has_near</a>( <a class="code" href="activity__actor_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a>, abspos, 1, fac_id ) &amp;&amp; it-&gt;first-&gt;is_corpse() ) ) {</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;                <span class="keywordflow">if</span>( you.rate_action_unload( *it-&gt;first ) == <a class="code" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a> &amp;&amp;</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;                    !it-&gt;first-&gt;any_pockets_sealed() ) {</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;                    std::unordered_map&lt;itype_id, int&gt; item_counts;</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;                    <span class="keywordflow">if</span>( unload_sparse_only ) {</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;                        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;                            <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;                                item_counts[contained-&gt;typeId()]++;</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;                            }</div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;                        }</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;                    }</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;                        <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;                        <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;                            <span class="keywordflow">if</span>( unload_sparse_only &amp;&amp;</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;                                item_counts[contained-&gt;typeId()] &gt; unload_sparse_threshold ) {</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;                            }</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;                            <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, this_veh, this_part );</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;                            it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;                        }</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;                        <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;                        }</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;                    }</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;                        <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;                        <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;                            <span class="keywordflow">if</span>( it-&gt;first-&gt;is_ammo_belt() ) {</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;                                <span class="keywordflow">if</span>( it-&gt;first-&gt;type-&gt;magazine-&gt;linkage ) {</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;                                    <a class="code" href="classitem.html">item</a> link( *it-&gt;first-&gt;type-&gt;magazine-&gt;linkage, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, contained-&gt;count() );</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;                                    <span class="keywordflow">if</span>( this_veh != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;                                        <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_this = this_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( this_part );</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;                                        this_veh-&gt;<a class="code" href="classvehicle.html#a4aed7fe17e4b040bda8b6abb431d3673">add_item</a>( vp_this, link );</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;                                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;                                        here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( src_loc, link );</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;                                    }</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;                                }</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;                            }</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;                            <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, this_veh, this_part );</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;                            it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160; </div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;                            <span class="keywordflow">if</span>( it-&gt;first-&gt;has_flag( <a class="code" href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a> ) &amp;&amp; it-&gt;first-&gt;ammo_remaining() == 0 ) {</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;                                <span class="keywordflow">if</span>( this_veh != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;                                    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_this = this_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( this_part );</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;                                    this_veh-&gt;<a class="code" href="classvehicle.html#ab6230bc17faaaf3b8b8935797869bc01">remove_item</a>( vp_this, it-&gt;first );</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;                                    here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( src_loc, it-&gt;first );</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;                                }</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;                            }</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;                        }</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;                        <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;                        }</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;                    }</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) ) {</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;                        <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;                        <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;                            <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, this_veh, this_part );</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;                            it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;                        }</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;                        <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;                        }</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;                    }</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;                }</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;                <span class="comment">// if unloading mods</span></div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;                <span class="keywordflow">if</span>( unload_mods ) {</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;                    <span class="comment">// remove each mod, skip irremovable</span></div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : it-&gt;first-&gt;gunmods() ) {</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;                        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;is_irremovable() ) {</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;                        }</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;                        you.gunmod_remove( *it-&gt;first, *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;                        <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;                        }</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;                    }</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;                }</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160; </div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;                <span class="comment">// if unloading molle</span></div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;                <span class="keywordflow">if</span>( unload_molle ) {</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;                    <span class="keywordflow">while</span>( !it-&gt;first-&gt;get_contents().get_added_pockets().empty() ) {</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;                        <a class="code" href="classitem.html">item</a> removed = it-&gt;first-&gt;<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#ac55902bbff2d7e35351dda96f7c5d63e">remove_pocket</a>( 0 );</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;                        <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a>( you, removed, 1, src_loc, src_loc, this_veh, this_part );</div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;                        <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;                        }</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;                    }</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;                }</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160; </div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;                <span class="comment">// after dumping items go back to start of activity loop</span></div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;                <span class="comment">// so that can re-assess the items in the tile</span></div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;                ++<a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a>;</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;            }</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160; </div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;            <span class="keywordflow">if</span>( you.get_moves() &lt;= 0 ) {</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;            }</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;        }</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160; </div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;        <span class="comment">//this location is sorted</span></div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;        <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> = THINK;</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;    }</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160; </div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;    <span class="comment">// If we got here without restarting the activity, it means we&#39;re done</span></div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s sorted out every item possible.&quot;</span> ), you.disp_name( <span class="keyword">false</span>, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    <span class="keywordflow">if</span>( you.is_npc() ) {</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;        <a class="code" href="classnpc.html">npc</a> *guy = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( &amp;you );</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;        guy-&gt;<a class="code" href="classnpc.html#aefeae3d14dd64533e5bff412e280c2e8">revert_after_activity</a>();</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;    }</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a6caa1977f9f323abdb68e946d0129581"><div class="ttname"><a href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a></div><div class="ttdeci">static void move_item(Character &amp;you, item &amp;it, const int quantity, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest, vehicle *src_veh, int src_part)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l06996">activity_actor.cpp:6996</a></div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_a78bb8f77904a7a889ec2de6833852ea3"><div class="ttname"><a href="activity__actor_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_IGNORE_FAVORITES(&quot;LOOT_IGNORE_FAVORITES&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_a81ed8763fd3a8844a2f88b0f938d8939"><div class="ttname"><a href="activity__actor_8cpp.html#a81ed8763fd3a8844a2f88b0f938d8939">ACT_UNLOAD_LOOT</a></div><div class="ttdeci">static const activity_id ACT_UNLOAD_LOOT(&quot;ACT_UNLOAD_LOOT&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_a83cf82080b034b59d6392bfcc4974866"><div class="ttname"><a href="activity__actor_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a></div><div class="ttdeci">static const zone_type_id zone_type_STRIP_CORPSES(&quot;STRIP_CORPSES&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_ac5c0a2bd227102b1722a85fbbd9e88f3"><div class="ttname"><a href="activity__actor_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a></div><div class="ttdeci">static const zone_type_id zone_type_UNLOAD_ALL(&quot;UNLOAD_ALL&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_ac9f5aa9f4829215e78bae055da0210f2"><div class="ttname"><a href="activity__actor_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_IGNORE(&quot;LOOT_IGNORE&quot;)</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a></div><div class="ttdeci">@ INIT</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ad2d5447f6909e3b1b285e675df5cac54"><div class="ttname"><a href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a></div><div class="ttdeci">std::vector&lt; Point &gt; get_sorted_tiles_by_distance(const Point &amp;center, const Container &amp;tiles)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8h_source.html#l00025">activity_handlers.h:25</a></div></div>
<div class="ttc" id="aactivity__handlers_8h_html_aee54debfe6c899fd8142a504fe09895e"><div class="ttname"><a href="activity__handlers_8h.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a></div><div class="ttdeci">std::vector&lt; tripoint_bub_ms &gt; route_adjacent(const Character &amp;you, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00660">activity_item_handling.cpp:660</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a53ae846eb476201fe542a1575b244239"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a53ae846eb476201fe542a1575b244239">cata_variant_type::faction_id</a></div><div class="ttdeci">@ faction_id</div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_aa94b8bd33e85ce94a3634e6e27ab0cdd"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#aa94b8bd33e85ce94a3634e6e27ab0cdd">coords::coord_point_mut::z</a></div><div class="ttdeci">constexpr auto z() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00167">coordinates.h:167</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclassfaction_html"><div class="ttname"><a href="classfaction.html">faction</a></div><div class="ttdef"><b>Definition:</b> <a href="faction_8h_source.html#l00126">faction.h:127</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac55902bbff2d7e35351dda96f7c5d63e"><div class="ttname"><a href="classitem__contents.html#ac55902bbff2d7e35351dda96f7c5d63e">item_contents::remove_pocket</a></div><div class="ttdeci">item remove_pocket(int index)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02138">item_contents.cpp:2138</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00019">item_stack.cpp:19</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a05c24ca1052a7a8cb9fd314acdb49f40"><div class="ttname"><a href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">item::is_favorite</a></div><div class="ttdeci">bool is_favorite</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03213">item.h:3213</a></div></div>
<div class="ttc" id="aclassitem_html_a10898a02e2696873c90e6b9ea3aca7bc"><div class="ttname"><a href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a></div><div class="ttdeci">std::list&lt; const item * &gt; all_items_top() const</div><div class="ttdoc">returns a list of pointers to all top-level items that are not mods</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14951">item.cpp:14951</a></div></div>
<div class="ttc" id="aclassitem_html_af486ddb23bd7e254cc07ef3ba1ba846d"><div class="ttname"><a href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a></div><div class="ttdeci">bool made_of_from_type(phase_id phase) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09268">item.cpp:9268</a></div></div>
<div class="ttc" id="aclassitem_html_afd9fcc8f19476c95071b72c300f47ad1"><div class="ttname"><a href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">item::get_contents</a></div><div class="ttdeci">item_contents &amp; get_contents()</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03165">item.h:3165</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a1cc29653b8305e7192311c05a0bd4c99"><div class="ttname"><a href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">map::bub_from_abs</a></div><div class="ttdeci">tripoint_bub_ms bub_from_abs(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09647">map.cpp:9647</a></div></div>
<div class="ttc" id="aclassmap_html_a3014d235b1298cadddb4c412d133ae6b"><div class="ttname"><a href="classmap.html#a3014d235b1298cadddb4c412d133ae6b">map::can_put_items_ter_furn</a></div><div class="ttdeci">bool can_put_items_ter_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03097">map.cpp:3097</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06516">map.cpp:6516</a></div></div>
<div class="ttc" id="aclassmap_html_a46608709f68358365d0734b1063fed73"><div class="ttname"><a href="classmap.html#a46608709f68358365d0734b1063fed73">map::inbounds</a></div><div class="ttdeci">bool inbounds(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09057">map.cpp:9057</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmap_html_a8a6e17bf2b027fe957361bb7c5d857ce"><div class="ttname"><a href="classmap.html#a8a6e17bf2b027fe957361bb7c5d857ce">map::check_vehicle_zones</a></div><div class="ttdeci">bool check_vehicle_zones(int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01191">map.cpp:1191</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_ab075f4bc498a7cbf386b8f53b86b017d"><div class="ttname"><a href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, const map_stack::const_iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05001">map.cpp:5001</a></div></div>
<div class="ttc" id="aclassmap_html_ab2a7030c1e990957e11ae52b58ad7056"><div class="ttname"><a href="classmap.html#ab2a7030c1e990957e11ae52b58ad7056">map::get_abs_sub</a></div><div class="ttdeci">tripoint_abs_sm get_abs_sub() const</div><div class="ttdoc">return abs_sub</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09663">map.cpp:9663</a></div></div>
<div class="ttc" id="aclassmap_html_acd464679b3bb514e2568ffdb3260ef0c"><div class="ttname"><a href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">map::route</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; route(const tripoint &amp;f, const tripoint &amp;t, const pathfinding_settings &amp;settings, const std::unordered_set&lt; tripoint &gt; &amp;pre_closed={{ }}) const</div><div class="ttdoc">Calculate the best path using A*.</div><div class="ttdef"><b>Definition:</b> <a href="pathfinding_8cpp_source.html#l00192">pathfinding.cpp:192</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_aefeae3d14dd64533e5bff412e280c2e8"><div class="ttname"><a href="classnpc.html#aefeae3d14dd64533e5bff412e280c2e8">npc::revert_after_activity</a></div><div class="ttdeci">void revert_after_activity()</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00927">npc.cpp:927</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_acf1ddbf380ff79f8fd707a0453b1608b"><div class="ttname"><a href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">optional_vpart_position::cargo</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; cargo() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02710">vehicle.cpp:2710</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; faction &gt;</a></div></div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_a33e570019585bf13604d57255d66142e"><div class="ttname"><a href="classunload__loot__activity__actor.html#a33e570019585bf13604d57255d66142e">unload_loot_activity_actor::placement</a></div><div class="ttdeci">tripoint placement</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02126">activity_actor_definitions.h:2126</a></div></div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_aad5e0e2f4ff541a1250ece30d9f28b9b"><div class="ttname"><a href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">unload_loot_activity_actor::stage</a></div><div class="ttdeci">int stage</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02124">activity_actor_definitions.h:2124</a></div></div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_aae54f821e92dab4d6c919a99776f9ff7"><div class="ttname"><a href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">unload_loot_activity_actor::coord_set</a></div><div class="ttdeci">std::unordered_set&lt; tripoint &gt; coord_set</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02125">activity_actor_definitions.h:2125</a></div></div>
<div class="ttc" id="aclassunload__loot__activity__actor_html_ac5cc2de583c71bbf268daabc8151a116"><div class="ttname"><a href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">unload_loot_activity_actor::num_processed</a></div><div class="ttdeci">int num_processed</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l02123">activity_actor_definitions.h:2123</a></div></div>
<div class="ttc" id="aclassunload__options_html"><div class="ttname"><a href="classunload__options.html">unload_options</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00282">clzones.h:283</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1f80b26dc4684734f1a903605f3cd4a3"><div class="ttname"><a href="classvehicle.html#a1f80b26dc4684734f1a903605f3cd4a3">vehicle::vehicle</a></div><div class="ttdeci">vehicle(const vproto_id &amp;proto_id)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00214">vehicle.cpp:214</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4aed7fe17e4b040bda8b6abb431d3673"><div class="ttname"><a href="classvehicle.html#a4aed7fe17e4b040bda8b6abb431d3673">vehicle::add_item</a></div><div class="ttdeci">std::optional&lt; vehicle_stack::iterator &gt; add_item(vehicle_part &amp;vp, const item &amp;itm)</div><div class="ttdoc">Try to add an item to part's cargo.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05853">vehicle.cpp:5853</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab6230bc17faaaf3b8b8935797869bc01"><div class="ttname"><a href="classvehicle.html#ab6230bc17faaaf3b8b8935797869bc01">vehicle::remove_item</a></div><div class="ttdeci">bool remove_item(vehicle_part &amp;vp, item *it)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05899">vehicle.cpp:5899</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdb2ebf673a32f657ac9e29b842ee7f5"><div class="ttname"><a href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">vehicle::part</a></div><div class="ttdeci">vehicle_part &amp; part(int part_num)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08098">vehicle.cpp:8098</a></div></div>
<div class="ttc" id="aclasszone__data_html"><div class="ttname"><a href="classzone__data.html">zone_data</a></div><div class="ttdoc">These are zones the player can designate.</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00348">clzones.h:349</a></div></div>
<div class="ttc" id="aclasszone__manager_html"><div class="ttname"><a href="classzone__manager.html">zone_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00512">clzones.h:513</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a48a7258f14361522cf75baa31967a6c8"><div class="ttname"><a href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">zone_manager::get_near</a></div><div class="ttdeci">std::unordered_set&lt; tripoint_abs_ms &gt; get_near(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const item *it=nullptr, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01134">clzones.cpp:1134</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a54609d51d21bd8f370ee8b59525eb750"><div class="ttname"><a href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a></div><div class="ttdeci">static zone_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00550">clzones.h:550</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a65c00c5dafbe18e45596f23c6f116efc"><div class="ttname"><a href="classzone__manager.html#a65c00c5dafbe18e45596f23c6f116efc">zone_manager::get_zones_at</a></div><div class="ttdeci">std::vector&lt; zone_data const * &gt; get_zones_at(const tripoint_abs_ms &amp;where, const zone_type_id &amp;type, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01085">clzones.cpp:1085</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a815445722eb24bf8e8f2af3ec9f32a99"><div class="ttname"><a href="classzone__manager.html#a815445722eb24bf8e8f2af3ec9f32a99">zone_manager::cache_vzones</a></div><div class="ttdeci">void cache_vzones(map *pmap=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00909">clzones.cpp:909</a></div></div>
<div class="ttc" id="aclasszone__manager_html_ad606e7d59e9aa0ab5b0fca7e46455345"><div class="ttname"><a href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">zone_manager::has</a></div><div class="ttdeci">bool has(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01003">clzones.cpp:1003</a></div></div>
<div class="ttc" id="aclasszone__manager_html_aff01780bd615c3b526e071efdce01b70"><div class="ttname"><a href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">zone_manager::has_near</a></div><div class="ttdeci">bool has_near(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01011">clzones.cpp:1011</a></div></div>
<div class="ttc" id="aclzones_8h_html_a68d414e1c79f68a26edabb0ee1433e4b"><div class="ttname"><a href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a></div><div class="ttdeci">constexpr int ACTIVITY_SEARCH_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00037">clzones.h:37</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a9d7b6c83d7cf9846d5f1b56e02d88268"><div class="ttname"><a href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a></div><div class="ttdeci">int square_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00755">coordinates.h:755</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a></div><div class="ttdeci">@ GAS</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="afield__type_8cpp_html_a0090428c1f6724209c133c6b04b037cd"><div class="ttname"><a href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a></div><div class="ttdeci">const field_type_str_id fd_fire(&quot;fd_fire&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a413a7d8509ce1b7ded1e24bcba4ad304"><div class="ttname"><a href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a></div><div class="ttdeci">const flag_id flag_MAG_DESTROY(&quot;MAG_DESTROY&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="aitem_8h_html_a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8"><div class="ttname"><a href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a></div><div class="ttdeci">@ good</div><div class="ttdoc">Item permits this action.</div></div>
<div class="ttc" id="amapgen_8h_html_afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5"><div class="ttname"><a href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">mapgen_phase::zones</a></div><div class="ttdeci">@ zones</div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af0e23485ab96118ed88e3e573b597636"><div class="ttname"><a href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">PATH_INFO::options</a></div><div class="ttdeci">cata_path options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00354">path_info.cpp:354</a></div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a></div><div class="ttdeci">@ MAGAZINE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a></div><div class="ttdeci">@ CONTAINER</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00254">vehicle.h:254</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="activity__actor_8cpp.html#a81ed8763fd3a8844a2f88b0f938d8939">ACT_UNLOAD_LOOT</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="clzones_8h_source.html#l00037">ACTIVITY_SEARCH_DISTANCE</a>, <a class="el" href="vehicle_8cpp_source.html#l05853">vehicle::add_item()</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14951">item::all_items_top()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="map_8cpp_source.html#l09647">map::bub_from_abs()</a>, <a class="el" href="clzones_8cpp_source.html#l00909">zone_manager::cache_vzones()</a>, <a class="el" href="map_8cpp_source.html#l03097">map::can_put_items_ter_furn()</a>, <a class="el" href="character_8cpp_source.html#l08983">Character::cancel_activity()</a>, <a class="el" href="vehicle_8cpp_source.html#l02710">optional_vpart_position::cargo()</a>, <a class="el" href="map_8cpp_source.html#l01191">map::check_vehicle_zones()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02125">coord_set</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a53ae846eb476201fe542a1575b244239">faction_id</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">GAS</a>, <a class="el" href="map_8cpp_source.html#l09663">map::get_abs_sub()</a>, <a class="el" href="item_8h_source.html#l03165">item::get_contents()</a>, <a class="el" href="character_8h_source.html#l00768">Character::get_faction()</a>, <a class="el" href="map_8cpp_source.html#l06516">map::get_field()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="clzones_8h_source.html#l00550">zone_manager::get_manager()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="clzones_8cpp_source.html#l01134">zone_manager::get_near()</a>, <a class="el" href="character_8cpp_source.html#l10074">Character::get_path_avoid()</a>, <a class="el" href="character_8cpp_source.html#l10088">Character::get_pathfinding_settings()</a>, <a class="el" href="activity__handlers_8h_source.html#l00025">get_sorted_tiles_by_distance()</a>, <a class="el" href="clzones_8cpp_source.html#l01085">zone_manager::get_zones_at()</a>, <a class="el" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">good</a>, <a class="el" href="character__guns_8cpp_source.html#l00268">Character::gunmod_remove()</a>, <a class="el" href="clzones_8cpp_source.html#l01003">zone_manager::has()</a>, <a class="el" href="clzones_8cpp_source.html#l01011">zone_manager::has_near()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="faction_8h_source.html#l00112">faction_template::id</a>, <a class="el" href="map_8cpp_source.html#l09057">map::inbounds()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a>, <a class="el" href="item_8h_source.html#l03213">item::is_favorite</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l09268">item::made_of_from_type()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">MAGAZINE</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="activity__actor_8cpp_source.html#l06996">move_item()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02123">num_processed</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="vehicle_8cpp_source.html#l08098">vehicle::part()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02126">placement</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="character__ammo_8cpp_source.html#l00207">Character::rate_action_unload()</a>, <a class="el" href="vehicle_8cpp_source.html#l05899">vehicle::remove_item()</a>, <a class="el" href="item__contents_8cpp_source.html#l02138">item_contents::remove_pocket()</a>, <a class="el" href="npc_8cpp_source.html#l00927">npc::revert_after_activity()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00192">map::route()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00660">route_adjacent()</a>, <a class="el" href="character_8cpp_source.html#l11436">Character::set_destination()</a>, <a class="el" href="creature_8cpp_source.html#l02012">Creature::set_moves()</a>, <a class="el" href="player__activity_8cpp_source.html#l00091">player_activity::set_to_null()</a>, <a class="el" href="coordinates_8h_source.html#l00755">square_dist()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02124">stage</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l00214">vehicle::vehicle()</a>, <a class="el" href="coordinates_8h_source.html#l00167">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::z()</a>, <a class="el" href="activity__actor_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a>, <a class="el" href="activity__actor_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a>, <a class="el" href="activity__actor_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a>, <a class="el" href="activity__actor_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>, and <a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a>.</p>

</div>
</div>
<a id="ad4df94821e50f8250a4204e73b7079c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4df94821e50f8250a4204e73b7079c1">&#9670;&nbsp;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unload_loot_activity_actor::finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the activity runs out of moves, assuming that it has not already been set to null. </p>

<p>Implements <a class="el" href="classactivity__actor.html#af48795a3ce174ab25b58db059de179b5">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02112">2112</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;{};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7febeda81834bca2f397c099852d95ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7febeda81834bca2f397c099852d95ae">&#9670;&nbsp;</a></span>get_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a> unload_loot_activity_actor::get_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the activity id of the corresponding activity. </p>

<p>Implements <a class="el" href="classactivity__actor.html#ac085520515863c449d3326a55bdd66d9">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02106">2106</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                                              {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">activity_id</a>( <span class="stringliteral">&quot;ACT_UNLOAD_LOOT&quot;</span> );</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        }</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">cata_variant_type::activity_id</a></div><div class="ttdeci">@ activity_id</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">activity_id</a>.</p>

</div>
</div>
<a id="afeedc04b269c89e27a561204f3e703e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeedc04b269c89e27a561204f3e703e4">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unload_loot_activity_actor::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>jsout</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Must write any custom members of the derived class to json Note that a static member function for deserialization must also be created and added to the <code>activity_actor_deserializers</code> hashmap in <a class="el" href="activity__actor_8cpp.html">activity_actor.cpp</a>. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a3a5855ba3c1236acfe2be439522997cd">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l06962">6962</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;{</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160; </div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;moves&quot;</span>, <a class="code" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a> );</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;num_processed&quot;</span>, <a class="code" href="classunload__loot__activity__actor.html#ac5cc2de583c71bbf268daabc8151a116">num_processed</a> );</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;stage&quot;</span>, <a class="code" href="classunload__loot__activity__actor.html#aad5e0e2f4ff541a1250ece30d9f28b9b">stage</a> );</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;coord_set&quot;</span>, <a class="code" href="classunload__loot__activity__actor.html#aae54f821e92dab4d6c919a99776f9ff7">coord_set</a> );</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;placement&quot;</span>, <a class="code" href="classunload__loot__activity__actor.html#a33e570019585bf13604d57255d66142e">placement</a> );</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160; </div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;    jsout.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor__definitions_8h_source.html#l02125">coord_set</a>, <a class="el" href="json_8cpp_source.html#l02327">JsonOut::end_object()</a>, <a class="el" href="json_8cpp_source.html#l02422">JsonOut::member()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02122">moves</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02123">num_processed</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02126">placement</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l02124">stage</a>, and <a class="el" href="json_8cpp_source.html#l02316">JsonOut::start_object()</a>.</p>

</div>
</div>
<a id="a6d62fd967e29ece87616e359f3fa18df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d62fd967e29ece87616e359f3fa18df">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unload_loot_activity_actor::start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called once at the start of the activity. </p>
<p>This may be used to preform setup actions and/or set <a class="el" href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61" title="The number of moves remaining in this activity before it is complete.">player_activity::moves_left</a>/moves_total. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a7a6d2b0ca0560dfca09ff8919cd9f44a">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l06990">6990</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;{</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_total = <a class="code" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a>;</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_left = <a class="code" href="classunload__loot__activity__actor.html#a90918953532ed129b1e7db180038ce0e">moves</a>;</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, and <a class="el" href="activity__actor__definitions_8h_source.html#l02122">moves</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aae54f821e92dab4d6c919a99776f9ff7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae54f821e92dab4d6c919a99776f9ff7">&#9670;&nbsp;</a></span>coord_set</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; unload_loot_activity_actor::coord_set</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02125">2125</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l07039">do_turn()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06962">serialize()</a>.</p>

</div>
</div>
<a id="a90918953532ed129b1e7db180038ce0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90918953532ed129b1e7db180038ce0e">&#9670;&nbsp;</a></span>moves</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int unload_loot_activity_actor::moves</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02122">2122</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l06962">serialize()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06990">start()</a>.</p>

</div>
</div>
<a id="ac5cc2de583c71bbf268daabc8151a116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5cc2de583c71bbf268daabc8151a116">&#9670;&nbsp;</a></span>num_processed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int unload_loot_activity_actor::num_processed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02123">2123</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l07039">do_turn()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06962">serialize()</a>.</p>

</div>
</div>
<a id="a33e570019585bf13604d57255d66142e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e570019585bf13604d57255d66142e">&#9670;&nbsp;</a></span>placement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> unload_loot_activity_actor::placement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02126">2126</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l07039">do_turn()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06962">serialize()</a>.</p>

</div>
</div>
<a id="aad5e0e2f4ff541a1250ece30d9f28b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5e0e2f4ff541a1250ece30d9f28b9b">&#9670;&nbsp;</a></span>stage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int unload_loot_activity_actor::stage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l02124">2124</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l07039">do_turn()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06962">serialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a></li>
<li>src/<a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:45 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
