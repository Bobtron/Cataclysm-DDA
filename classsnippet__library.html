<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: snippet_library Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsnippet__library-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">snippet_library Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnippet__library_1_1category__snippets.html">category_snippets</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnippet__library_1_1weighted__id.html">weighted_id</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnippet__library_1_1weighted__translation.html">weighted_translation</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac09e30d518cb9b0a7d6904c27d37f5c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ac09e30d518cb9b0a7d6904c27d37f5c0">load_snippet</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jsobj)</td></tr>
<tr class="memdesc:ac09e30d518cb9b0a7d6904c27d37f5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load snippet from the standalone entry, used by the <a class="el" href="classDynamicDataLoader.html">DynamicDataLoader</a>.  <a href="classsnippet__library.html#ac09e30d518cb9b0a7d6904c27d37f5c0">More...</a><br /></td></tr>
<tr class="separator:ac09e30d518cb9b0a7d6904c27d37f5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55d727b514e4af846a131fa956763637"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">add_snippets_from_json</a> (const std::string &amp;category, const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;jarr)</td></tr>
<tr class="memdesc:a55d727b514e4af846a131fa956763637"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load all snippet definitions in the json array into given category.  <a href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">More...</a><br /></td></tr>
<tr class="separator:a55d727b514e4af846a131fa956763637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b8fc0759ba2956485b8913f616c747"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a02b8fc0759ba2956485b8913f616c747">add_snippet_from_json</a> (const std::string &amp;category, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo)</td></tr>
<tr class="memdesc:a02b8fc0759ba2956485b8913f616c747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a single snippet text from the json object.  <a href="classsnippet__library.html#a02b8fc0759ba2956485b8913f616c747">More...</a><br /></td></tr>
<tr class="separator:a02b8fc0759ba2956485b8913f616c747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8657981d672b3074293dd6831b57714"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ac8657981d672b3074293dd6831b57714">reload_names</a> (const <a class="el" href="classcata__path.html">cata_path</a> &amp;path)</td></tr>
<tr class="memdesc:ac8657981d672b3074293dd6831b57714"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load name list from name.h/cpp.  <a href="classsnippet__library.html#ac8657981d672b3074293dd6831b57714">More...</a><br /></td></tr>
<tr class="separator:ac8657981d672b3074293dd6831b57714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2445197cd872aac751100ea5b609243"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#af2445197cd872aac751100ea5b609243">clear_snippets</a> ()</td></tr>
<tr class="separator:af2445197cd872aac751100ea5b609243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04775bb228b86633909183ba39d274d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a04775bb228b86633909183ba39d274d8">has_category</a> (const std::string &amp;category) const</td></tr>
<tr class="separator:a04775bb228b86633909183ba39d274d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54d86a48c6c49bf0a4b6d881bb52a3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">get_snippet_by_id</a> (const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;id) const</td></tr>
<tr class="memdesc:ab54d86a48c6c49bf0a4b6d881bb52a3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the snippet referenced by the id, or std::nullopt if there is no snippet with such id.  <a href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">More...</a><br /></td></tr>
<tr class="separator:ab54d86a48c6c49bf0a4b6d881bb52a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edcf1dde9fb06d1df1b952a3162489e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtalk__effect__t.html">talk_effect_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a6edcf1dde9fb06d1df1b952a3162489e">get_EOC_by_id</a> (const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;id) const</td></tr>
<tr class="memdesc:a6edcf1dde9fb06d1df1b952a3162489e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the EOC connected with the snippet referenced by the id, or std::nullopt if there is no snippet with such id.  <a href="classsnippet__library.html#a6edcf1dde9fb06d1df1b952a3162489e">More...</a><br /></td></tr>
<tr class="separator:a6edcf1dde9fb06d1df1b952a3162489e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f29380eb26d48251c52c2e747c87bfd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a5f29380eb26d48251c52c2e747c87bfd">get_name_by_id</a> (const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;id) const</td></tr>
<tr class="memdesc:a5f29380eb26d48251c52c2e747c87bfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name connected with the snippet referenced by the id, or std::nullopt if there is no snippet with such id.  <a href="classsnippet__library.html#a5f29380eb26d48251c52c2e747c87bfd">More...</a><br /></td></tr>
<tr class="separator:a5f29380eb26d48251c52c2e747c87bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4628a72254a2d3548b472078a77f1c9"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classtranslation.html">translation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#aa4628a72254a2d3548b472078a77f1c9">get_snippet_ref_by_id</a> (const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;id) const</td></tr>
<tr class="memdesc:aa4628a72254a2d3548b472078a77f1c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to the snippet with the id, or a reference to an empty translation object if no such snippet exist.  <a href="classsnippet__library.html#aa4628a72254a2d3548b472078a77f1c9">More...</a><br /></td></tr>
<tr class="separator:aa4628a72254a2d3548b472078a77f1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243a03181727b41cd513d066e7c5b908"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a243a03181727b41cd513d066e7c5b908">has_snippet_with_id</a> (const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;id) const</td></tr>
<tr class="memdesc:a243a03181727b41cd513d066e7c5b908"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if there exists a snippet with the id.  <a href="classsnippet__library.html#a243a03181727b41cd513d066e7c5b908">More...</a><br /></td></tr>
<tr class="separator:a243a03181727b41cd513d066e7c5b908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c546ab8c71efe861ce1400b8d3e1261"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a> (const std::string &amp;str) const</td></tr>
<tr class="memdesc:a2c546ab8c71efe861ce1400b8d3e1261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the tags' respective category.  <a href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">More...</a><br /></td></tr>
<tr class="separator:a2c546ab8c71efe861ce1400b8d3e1261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff12dd426e9f0340f5e861ddd291cea3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#aff12dd426e9f0340f5e861ddd291cea3">random_id_from_category</a> (const std::string &amp;cat) const</td></tr>
<tr class="memdesc:aff12dd426e9f0340f5e861ddd291cea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the id of a random snippet out of the given category.  <a href="classsnippet__library.html#aff12dd426e9f0340f5e861ddd291cea3">More...</a><br /></td></tr>
<tr class="separator:aff12dd426e9f0340f5e861ddd291cea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685c0168b039e17ca677a61e21900fe1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a> (const std::string &amp;cat) const</td></tr>
<tr class="memdesc:a685c0168b039e17ca677a61e21900fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a random snippet out of the given category.  <a href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">More...</a><br /></td></tr>
<tr class="separator:a685c0168b039e17ca677a61e21900fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac95d52c7f23d13cbf2882164d81e0662"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ac95d52c7f23d13cbf2882164d81e0662">random_from_category</a> (const std::string &amp;cat, unsigned int seed) const</td></tr>
<tr class="memdesc:ac95d52c7f23d13cbf2882164d81e0662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the given seed to select a random snippet from the category.  <a href="classsnippet__library.html#ac95d52c7f23d13cbf2882164d81e0662">More...</a><br /></td></tr>
<tr class="separator:ac95d52c7f23d13cbf2882164d81e0662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac60917e4982bf750054e6a3d5f8770dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ac60917e4982bf750054e6a3d5f8770dd">migrate_hash_to_id</a> (int hash)</td></tr>
<tr class="memdesc:ac60917e4982bf750054e6a3d5f8770dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used only for legacy compatibility.  <a href="classsnippet__library.html#ac60917e4982bf750054e6a3d5f8770dd">More...</a><br /></td></tr>
<tr class="separator:ac60917e4982bf750054e6a3d5f8770dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad8613e915145601c84b2721ecaf9d65"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#aad8613e915145601c84b2721ecaf9d65">get_snippets_by_category</a> (const std::string &amp;cat, bool add_null_id=false)</td></tr>
<tr class="separator:aad8613e915145601c84b2721ecaf9d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3a6102f5bf51e26605072508b3088c15"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a></td></tr>
<tr class="separator:a3a6102f5bf51e26605072508b3088c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d136faada747d56ff9b688bbb6a84c"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a90d136faada747d56ff9b688bbb6a84c">name_by_id</a></td></tr>
<tr class="separator:a90d136faada747d56ff9b688bbb6a84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabee535da9b3c62e4d1857794b00d6c9"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="structtalk__effect__t.html">talk_effect_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#aabee535da9b3c62e4d1857794b00d6c9">EOC_by_id</a></td></tr>
<tr class="separator:aabee535da9b3c62e4d1857794b00d6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0e270ac99d472054be52471a02ad48d"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, <a class="el" href="structsnippet__library_1_1category__snippets.html">category_snippets</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a></td></tr>
<tr class="separator:ab0e270ac99d472054be52471a02ad48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f839ecb01f2d078ac5b075d7ce30ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; std::map&lt; int, <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a></td></tr>
<tr class="separator:a83f839ecb01f2d078ac5b075d7ce30ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00020">20</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a02b8fc0759ba2956485b8913f616c747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02b8fc0759ba2956485b8913f616c747">&#9670;&nbsp;</a></span>add_snippet_from_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snippet_library::add_snippet_from_json </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a single snippet text from the json object. </p>
<p>The object should have a "text" member with the text of the snippet. A "id" member is optional and if present gives the snippet text a id, stored in snippets_by_id. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00053">53</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>.has_value() ) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;snippet_library::add_snippet_from_json called after snippet_library::migrate_hash_to_id.&quot;</span> );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a> = std::nullopt;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    uint64_t weight = 1;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classtranslation.html">translation</a> text;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;text&quot;</span>, text );</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;weight&quot;</span>, weight, 1 );</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;id&quot;</span> ) ) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="classstring__id.html">snippet_id</a> <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span>( <span class="keywordtype">id</span>.is_null() ) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;Null snippet id specified&quot;</span> );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.find( <span class="keywordtype">id</span> ) != <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.end() ) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;Duplicate snippet id&quot;</span> );</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        std::vector&lt;weighted_id&gt; &amp;ids = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>].ids;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">const</span> uint64_t weight_acc = ids.empty() ? weight : ids.back().weight_acc + weight;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        ids.emplace_back( weighted_id{ weight_acc, <span class="keywordtype">id</span> } );</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>[<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>] = text;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;effect_on_examine&quot;</span> ) ) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <a class="code" href="classsnippet__library.html#aabee535da9b3c62e4d1857794b00d6c9">EOC_by_id</a>[<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>] = <a class="code" href="structtalk__effect__t.html">talk_effect_t</a>( jo, <span class="stringliteral">&quot;effect_on_examine&quot;</span> );</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classtranslation.html">translation</a> <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;name&quot;</span>, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classsnippet__library.html#a90d136faada747d56ff9b688bbb6a84c">name_by_id</a>[<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>] = <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        std::vector&lt;weighted_translation&gt; &amp;no_id = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>].no_id;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">const</span> uint64_t weight_acc = no_id.empty() ? weight : no_id.back().weight_acc + weight;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        no_id.emplace_back( weighted_translation{ weight_acc, text } );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html_a04b6ce7355b567646a587514fb811c68"><div class="ttname"><a href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">JsonObject::throw_error_at</a></div><div class="ttdeci">void throw_error_at(std::string_view member, const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00358">flexbuffer_json.cpp:358</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a619cb4eae7922f357db47479fc71cf9b"><div class="ttname"><a href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">JsonObject::has_member</a></div><div class="ttdeci">bool has_member(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00944">flexbuffer_json-inl.h:944</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a3a6102f5bf51e26605072508b3088c15"><div class="ttname"><a href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippet_library::snippets_by_id</a></div><div class="ttdeci">std::unordered_map&lt; snippet_id, translation &gt; snippets_by_id</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8h_source.html#l00124">text_snippets.h:124</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a83f839ecb01f2d078ac5b075d7ce30ce"><div class="ttname"><a href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">snippet_library::hash_to_id_migration</a></div><div class="ttdeci">std::optional&lt; std::map&lt; int, snippet_id &gt; &gt; hash_to_id_migration</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8h_source.html#l00147">text_snippets.h:147</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a90d136faada747d56ff9b688bbb6a84c"><div class="ttname"><a href="classsnippet__library.html#a90d136faada747d56ff9b688bbb6a84c">snippet_library::name_by_id</a></div><div class="ttdeci">std::unordered_map&lt; snippet_id, translation &gt; name_by_id</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8h_source.html#l00126">text_snippets.h:126</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_aabee535da9b3c62e4d1857794b00d6c9"><div class="ttname"><a href="classsnippet__library.html#aabee535da9b3c62e4d1857794b00d6c9">snippet_library::EOC_by_id</a></div><div class="ttdeci">std::unordered_map&lt; snippet_id, talk_effect_t &gt; EOC_by_id</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8h_source.html#l00127">text_snippets.h:127</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_ab0e270ac99d472054be52471a02ad48d"><div class="ttname"><a href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippet_library::snippets_by_category</a></div><div class="ttdeci">std::unordered_map&lt; std::string, category_snippets &gt; snippets_by_category</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8h_source.html#l00145">text_snippets.h:145</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; translation &gt;</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a43443191f61bb76aca1c2895eea4ad8f"><div class="ttname"><a href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a></div><div class="ttdeci">void optional(const JsonObject &amp;jo, const bool was_loaded, const std::string_view name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00829">generic_factory.h:829</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a01bb93e9b73c4fc64afc80ffde115c0a"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">anonymous_namespace{item_tname.cpp}::category</a></div><div class="ttdeci">std::string category(item const &amp;it, unsigned int quantity, segment_bitset const &amp;segments)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00540">item_tname.cpp:540</a></div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="aovermap_8cpp_html_a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95"><div class="ttname"><a href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">join_type::mandatory</a></div><div class="ttdeci">@ mandatory</div></div>
<div class="ttc" id="astructtalk__effect__t_html"><div class="ttname"><a href="structtalk__effect__t.html">talk_effect_t</a></div><div class="ttdoc">Defines what happens when the trial succeeds or fails.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00100">dialogue.h:100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__tname_8cpp_source.html#l00540">anonymous_namespace{item_tname.cpp}::category()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="text__snippets_8h_source.html#l00127">EOC_by_id</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="text__snippets_8h_source.html#l00147">hash_to_id_migration</a>, <a class="el" href="basecamp_8h_source.html#l00105">base_camps::id</a>, <a class="el" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="text__snippets_8h_source.html#l00126">name_by_id</a>, <a class="el" href="generic__factory_8h_source.html#l00829">optional()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>, <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>, and <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00031">add_snippets_from_json()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00017">load_snippet()</a>.</p>

</div>
</div>
<a id="a55d727b514e4af846a131fa956763637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d727b514e4af846a131fa956763637">&#9670;&nbsp;</a></span>add_snippets_from_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snippet_library::add_snippets_from_json </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;&#160;</td>
          <td class="paramname"><em>jarr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load all snippet definitions in the json array into given category. </p>
<p>Entries in the array can be simple strings, or json objects (for the later see add_snippet_from_json). </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00031">31</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>.has_value() ) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;snippet_library::add_snippets_from_json called after snippet_library::migrate_hash_to_id.&quot;</span> );</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a> = std::nullopt;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jarr ) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keywordflow">if</span>( entry.test_string() ) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <a class="code" href="classtranslation.html">translation</a> text;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <span class="keywordflow">if</span>( !entry.read( text ) ) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                entry.throw_error( <span class="stringliteral">&quot;Error reading snippet from JSON array&quot;</span> );</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            std::vector&lt;weighted_translation&gt; &amp;no_id = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>].no_id;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <span class="keyword">const</span> uint64_t weight_acc = no_id.empty() ? 1 : no_id.back().weight_acc + 1;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            no_id.emplace_back( weighted_translation{ weight_acc, text } );</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> jo = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <a class="code" href="classsnippet__library.html#a02b8fc0759ba2956485b8913f616c747">add_snippet_from_json</a>( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>, jo );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3b9722313d9692826235c87e73e94f04"><div class="ttname"><a href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">JsonObject::get_object</a></div><div class="ttdeci">JsonObject get_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00864">flexbuffer_json-inl.h:864</a></div></div>
<div class="ttc" id="aclassJsonValue_html"><div class="ttname"><a href="classJsonValue.html">JsonValue</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00166">flexbuffer_json.h:167</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a02b8fc0759ba2956485b8913f616c747"><div class="ttname"><a href="classsnippet__library.html#a02b8fc0759ba2956485b8913f616c747">snippet_library::add_snippet_from_json</a></div><div class="ttdeci">void add_snippet_from_json(const std::string &amp;category, const JsonObject &amp;jo)</div><div class="ttdoc">Load a single snippet text from the json object.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00053">text_snippets.cpp:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, <a class="el" href="item__tname_8cpp_source.html#l00540">anonymous_namespace{item_tname.cpp}::category()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="text__snippets_8h_source.html#l00147">hash_to_id_migration</a>, and <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">Item_factory::load_basic_info()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00017">load_snippet()</a>.</p>

</div>
</div>
<a id="af2445197cd872aac751100ea5b609243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2445197cd872aac751100ea5b609243">&#9670;&nbsp;</a></span>clear_snippets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snippet_library::clear_snippets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00179">179</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a> = std::nullopt;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.clear();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.clear();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// Needed by world creation etc</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classsnippet__library.html#ac8657981d672b3074293dd6831b57714">reload_names</a>( <a class="code" href="namespacePATH__INFO.html#a7d99e469795b55a54109ad70a3313d80">PATH_INFO::names</a>() );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="aclasssnippet__library_html_ac8657981d672b3074293dd6831b57714"><div class="ttname"><a href="classsnippet__library.html#ac8657981d672b3074293dd6831b57714">snippet_library::reload_names</a></div><div class="ttdeci">void reload_names(const cata_path &amp;path)</div><div class="ttdoc">Load name list from name.h/cpp.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00089">text_snippets.cpp:89</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a7d99e469795b55a54109ad70a3313d80"><div class="ttname"><a href="namespacePATH__INFO.html#a7d99e469795b55a54109ad70a3313d80">PATH_INFO::names</a></div><div class="ttdeci">cata_path names()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00530">path_info.cpp:530</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00147">hash_to_id_migration</a>, <a class="el" href="path__info_8cpp_source.html#l00530">PATH_INFO::names()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00089">reload_names()</a>, <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>, and <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00548">DynamicDataLoader::unload_data()</a>.</p>

</div>
</div>
<a id="a2c546ab8c71efe861ce1400b8d3e1261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c546ab8c71efe861ce1400b8d3e1261">&#9670;&nbsp;</a></span>expand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string snippet_library::expand </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the tags' respective category. </p>
<p>For example, if the string is "&lt;okay&gt;&lt;punc&gt;", the function then replaces "&lt;okay&gt;" with a snippet from the "&lt;okay&gt;" category, and "&lt;punc&gt;" with a snippet from the "&lt;punc&gt;" category, and returns, for example, "okay!". If a tag does not have a corresponding category, it is copied to the final string, for example, "drop &lt;yrwp&gt;, &lt;okay&gt;?" may expand to "drop &lt;yrwp&gt;, okay?" because "&lt;yrwp&gt;" is a special tag that does not have a category defined in the JSON files. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00235">235</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">size_t</span> tag_begin = str.find( <span class="charliteral">&#39;&lt;&#39;</span> );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span>( tag_begin == std::string::npos ) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> str;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">size_t</span> tag_end = str.find( <span class="charliteral">&#39;&gt;&#39;</span>, tag_begin + 1 );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span>( tag_end == std::string::npos ) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> str;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    std::string <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a> = str.substr( tag_begin, tag_end - tag_begin + 1 );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    std::optional&lt;translation&gt; <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a> = <a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a> );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>.has_value() ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> str.substr( 0, tag_end + 1 )</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;               + <a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( str.substr( tag_end + 1 ) );</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> str.substr( 0, tag_begin )</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;           + <a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>.value().translated() )</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;           + <a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( str.substr( tag_end + 1 ) );</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div>
<div class="ttc" id="aclasssnippet__library_html_a2c546ab8c71efe861ce1400b8d3e1261"><div class="ttname"><a href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">snippet_library::expand</a></div><div class="ttdeci">std::string expand(const std::string &amp;str) const</div><div class="ttdoc">Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the ...</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00235">text_snippets.cpp:235</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a685c0168b039e17ca677a61e21900fe1"><div class="ttname"><a href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">snippet_library::random_from_category</a></div><div class="ttdeci">std::optional&lt; translation &gt; random_from_category(const std::string &amp;cat) const</div><div class="ttdoc">Returns a random snippet out of the given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00286">text_snippets.cpp:286</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_aad8315087dc1d0ef9212680412a20601"><div class="ttname"><a href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a></div><div class="ttdeci">static int symbol(const T_t &amp;t)</div></div>
<div class="ttc" id="atext__style__check_8h_html_aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79"><div class="ttname"><a href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">text_style_fix::replacement</a></div><div class="ttdeci">@ replacement</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8cpp_source.html#l00286">random_from_category()</a>, <a class="el" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>, and <a class="el" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l02483">jmapgen_monster::apply()</a>, <a class="el" href="mapgen_8cpp_source.html#l02055">jmapgen_graffiti::apply_all_tags()</a>, <a class="el" href="mapgen_8cpp_source.html#l02005">jmapgen_sign::apply_all_tags()</a>, <a class="el" href="npctalk_8cpp_source.html#l04814">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_make_sound()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, <a class="el" href="city_8cpp_source.html#l00044">city::finalize()</a>, <a class="el" href="iuse_8cpp_source.html#l03743">get_music_description()</a>, <a class="el" href="worldfactory_8cpp_source.html#l00066">get_next_valid_worldname()</a>, <a class="el" href="item_8cpp_source.html#l00299">item::item()</a>, <a class="el" href="npc_8cpp_source.html#l00501">npc::load_npc_template()</a>, <a class="el" href="harvest_8cpp_source.html#l00081">harvest_list::message()</a>, <a class="el" href="monattack_8cpp_source.html#l02844">mattack::nurse_assist()</a>, <a class="el" href="npctalk_8cpp_source.html#l02069">parse_tags()</a>, <a class="el" href="monattack_8cpp_source.html#l03033">mattack::photograph()</a>, <a class="el" href="newcharacter_8cpp_source.html#l00372">Character::pick_name()</a>, <a class="el" href="overmap_8cpp_source.html#l07162">overmap::place_radios()</a>, and <a class="el" href="item_8cpp_source.html#l09361">item::set_itype_variant()</a>.</p>

</div>
</div>
<a id="a6edcf1dde9fb06d1df1b952a3162489e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6edcf1dde9fb06d1df1b952a3162489e">&#9670;&nbsp;</a></span>get_EOC_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtalk__effect__t.html">talk_effect_t</a> &gt; snippet_library::get_EOC_by_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the EOC connected with the snippet referenced by the id, or std::nullopt if there is no snippet with such id. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00202">202</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#aabee535da9b3c62e4d1857794b00d6c9">EOC_by_id</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#aabee535da9b3c62e4d1857794b00d6c9">EOC_by_id</a>.end() ) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00127">EOC_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l02387">item::basic_info()</a>.</p>

</div>
</div>
<a id="a5f29380eb26d48251c52c2e747c87bfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f29380eb26d48251c52c2e747c87bfd">&#9670;&nbsp;</a></span>get_name_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt; snippet_library::get_name_by_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the name connected with the snippet referenced by the id, or std::nullopt if there is no snippet with such id. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00211">211</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#a90d136faada747d56ff9b688bbb6a84c">name_by_id</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#a90d136faada747d56ff9b688bbb6a84c">name_by_id</a>.end() ) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00126">name_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="faction_8cpp_source.html#l00818">faction_manager::display()</a>.</p>

</div>
</div>
<a id="ab54d86a48c6c49bf0a4b6d881bb52a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab54d86a48c6c49bf0a4b6d881bb52a3a">&#9670;&nbsp;</a></span>get_snippet_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt; snippet_library::get_snippet_by_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the snippet referenced by the id, or std::nullopt if there is no snippet with such id. </p>
<p>The tags in the snippet are not automatically expanded - you need to call <code><a class="el" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261" title="Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the ...">expand()</a></code> to do that. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00193">193</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.end() ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="gamemode__tutorial_8cpp_source.html#l00383">tutorial_game::add_message()</a>, <a class="el" href="item_8cpp_source.html#l02387">item::basic_info()</a>, <a class="el" href="faction_8cpp_source.html#l00818">faction_manager::display()</a>, <a class="el" href="npctalk_8cpp_source.html#l04814">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_make_sound()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00291">random_from_category()</a>.</p>

</div>
</div>
<a id="aa4628a72254a2d3548b472078a77f1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4628a72254a2d3548b472078a77f1c9">&#9670;&nbsp;</a></span>get_snippet_ref_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classtranslation.html">translation</a> &amp; snippet_library::get_snippet_ref_by_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a reference to the snippet with the id, or a reference to an empty translation object if no such snippet exist. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00220">220</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.end() ) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> empty_translation;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> empty_translation;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00348">get_snippets_by_category()</a>.</p>

</div>
</div>
<a id="aad8613e915145601c84b2721ecaf9d65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8613e915145601c84b2721ecaf9d65">&#9670;&nbsp;</a></span>get_snippets_by_category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, std::string &gt; &gt; snippet_library::get_snippets_by_category </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>add_null_id</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00348">348</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    std::vector&lt;std::pair&lt;snippet_id, std::string&gt;&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classsnippet__library.html#a04775bb228b86633909183ba39d274d8">has_category</a>( cat ) ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    std::unordered_map&lt;std::string, category_snippets&gt;::iterator snipp_cat = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.find(</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                cat );</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span>( snipp_cat != <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.end() ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        category_snippets snipps = snipp_cat-&gt;second;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span>( add_null_id &amp;&amp; !snipps.ids.empty() ) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">snippet_id::NULL_ID</a>(), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">for</span>( weighted_id <span class="keywordtype">id</span> : snipps.ids ) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            std::string desc = <a class="code" href="classsnippet__library.html#aa4628a72254a2d3548b472078a77f1c9">get_snippet_ref_by_id</a>( <span class="keywordtype">id</span>.value ).<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( <span class="keywordtype">id</span>.value, desc );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="ttc" id="aclasssnippet__library_html_a04775bb228b86633909183ba39d274d8"><div class="ttname"><a href="classsnippet__library.html#a04775bb228b86633909183ba39d274d8">snippet_library::has_category</a></div><div class="ttdeci">bool has_category(const std::string &amp;category) const</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00188">text_snippets.cpp:188</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_aa4628a72254a2d3548b472078a77f1c9"><div class="ttname"><a href="classsnippet__library.html#aa4628a72254a2d3548b472078a77f1c9">snippet_library::get_snippet_ref_by_id</a></div><div class="ttdeci">const translation &amp; get_snippet_ref_by_id(const snippet_id &amp;id) const</div><div class="ttdoc">Returns a reference to the snippet with the id, or a reference to an empty translation object if no s...</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00220">text_snippets.cpp:220</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; translation &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; translation &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8cpp_source.html#l00220">get_snippet_ref_by_id()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00188">has_category()</a>, <a class="el" href="text__snippets_8h_source.html#l00142">snippet_library::category_snippets::ids</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; translation &gt;::NULL_ID()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>, and <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wish_8cpp_source.html#l00848">wish_item_callback::key()</a>.</p>

</div>
</div>
<a id="a04775bb228b86633909183ba39d274d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04775bb228b86633909183ba39d274d8">&#9670;&nbsp;</a></span>has_category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool snippet_library::has_category </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>category</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00188">188</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.find( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a> ) != <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.end();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__tname_8cpp_source.html#l00540">anonymous_namespace{item_tname.cpp}::category()</a>, and <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01961">Item_factory::check_definitions()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00348">get_snippets_by_category()</a>, and <a class="el" href="wish_8cpp_source.html#l00848">wish_item_callback::key()</a>.</p>

</div>
</div>
<a id="a243a03181727b41cd513d066e7c5b908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a243a03181727b41cd513d066e7c5b908">&#9670;&nbsp;</a></span>has_snippet_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool snippet_library::has_snippet_with_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if there exists a snippet with the id. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00230">230</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.find( <span class="keywordtype">id</span> ) != <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a>.end();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>.</p>

</div>
</div>
<a id="ac09e30d518cb9b0a7d6904c27d37f5c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09e30d518cb9b0a7d6904c27d37f5c0">&#9670;&nbsp;</a></span>load_snippet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snippet_library::load_snippet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jsobj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load snippet from the standalone entry, used by the <a class="el" href="classDynamicDataLoader.html">DynamicDataLoader</a>. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00017">17</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>.has_value() ) {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;snippet_library::load_snippet called after snippet_library::migrate_hash_to_id.&quot;</span> );</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    }</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a> = std::nullopt;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a> = jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;category&quot;</span> );</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;text&quot;</span> ) ) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <a class="code" href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">add_snippets_from_json</a>( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>, jsobj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;text&quot;</span> ) );</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <a class="code" href="classsnippet__library.html#a02b8fc0759ba2956485b8913f616c747">add_snippet_from_json</a>( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a01bb93e9b73c4fc64afc80ffde115c0a">category</a>, jsobj );</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html_a1abb3808bb2a992716d5ef6f27a32b3c"><div class="ttname"><a href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00813">flexbuffer_json-inl.h:813</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a4d917fcb285203f91b74002565375dce"><div class="ttname"><a href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">JsonObject::has_array</a></div><div class="ttdeci">bool has_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00984">flexbuffer_json-inl.h:984</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a55d727b514e4af846a131fa956763637"><div class="ttname"><a href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">snippet_library::add_snippets_from_json</a></div><div class="ttdeci">void add_snippets_from_json(const std::string &amp;category, const JsonArray &amp;jarr)</div><div class="ttdoc">Load all snippet definitions in the json array into given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00031">text_snippets.cpp:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00031">add_snippets_from_json()</a>, <a class="el" href="item__tname_8cpp_source.html#l00540">anonymous_namespace{item_tname.cpp}::category()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, and <a class="el" href="text__snippets_8h_source.html#l00147">hash_to_id_migration</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00237">DynamicDataLoader::initialize()</a>.</p>

</div>
</div>
<a id="ac60917e4982bf750054e6a3d5f8770dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac60917e4982bf750054e6a3d5f8770dd">&#9670;&nbsp;</a></span>migrate_hash_to_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> snippet_library::migrate_hash_to_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used only for legacy compatibility. </p>
<p><code>hash_to_id_migration</code> will be initialized if it hasn't been yet, and the snippet with the given hash is looked up and returned. If there's no longer any snippet with the given hash, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c" title="Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.">snippet_id::NULL_ID()</a> is returned instead. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00330">330</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>.has_value() ) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>.emplace();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;id_and_text : <a class="code" href="classsnippet__library.html#a3a6102f5bf51e26605072508b3088c15">snippets_by_id</a> ) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            std::optional&lt;int&gt; hash = id_and_text.second.legacy_hash();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span>( hash ) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>-&gt;emplace( hash.value(), id_and_text.first );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>-&gt;find( old_hash );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#a83f839ecb01f2d078ac5b075d7ce30ce">hash_to_id_migration</a>-&gt;end() ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">snippet_id::NULL_ID</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="text__snippets_8h_source.html#l00147">hash_to_id_migration</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; translation &gt;::NULL_ID()</a>, and <a class="el" href="text__snippets_8h_source.html#l00124">snippets_by_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="savegame__json_8cpp_source.html#l02812">item::io()</a>.</p>

</div>
</div>
<a id="a685c0168b039e17ca677a61e21900fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685c0168b039e17ca677a61e21900fe1">&#9670;&nbsp;</a></span>random_from_category() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt; snippet_library::random_from_category </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cat</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a random snippet out of the given category. </p>
<p>Both snippets with or without an id may be returned. If there isn't any snippet in the category, std::nullopt is returned. The tags in the snippet are not automatically expanded - you need to call <code><a class="el" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261" title="Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the ...">expand()</a></code> to do that. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00286">286</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( cat, <a class="code" href="rng_8cpp.html#a63dfb6fd147b791b93d5c0bdc2e87c65">rng_bits</a>() );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="ttc" id="arng_8cpp_html_a63dfb6fd147b791b93d5c0bdc2e87c65"><div class="ttname"><a href="rng_8cpp.html#a63dfb6fd147b791b93d5c0bdc2e87c65">rng_bits</a></div><div class="ttdeci">unsigned int rng_bits()</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00011">rng.cpp:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="rng_8cpp_source.html#l00011">rng_bits()</a>.</p>

<p class="reference">Referenced by <a class="el" href="computer__session_8cpp_source.html#l00895">computer_session::action_amigara_log()</a>, <a class="el" href="computer__session_8cpp_source.html#l00651">computer_session::action_radio_archive()</a>, <a class="el" href="computer__session_8cpp_source.html#l00625">computer_session::action_research()</a>, <a class="el" href="computer__session_8cpp_source.html#l01160">computer_session::action_sr1_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01167">computer_session::action_sr2_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01174">computer_session::action_sr3_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01181">computer_session::action_sr4_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01188">computer_session::action_srcf_1_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01195">computer_session::action_srcf_2_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01205">computer_session::action_srcf_3_mess()</a>, <a class="el" href="computer__session_8cpp_source.html#l01212">computer_session::action_srcf_seal_order()</a>, <a class="el" href="mutation_8cpp_source.html#l00739">Character::activate_mutation()</a>, <a class="el" href="addiction_8cpp_source.html#l00068">alcohol_diazepam_add()</a>, <a class="el" href="addiction_8cpp_source.html#l00257">amphetamine_effect()</a>, <a class="el" href="mapgen_8cpp_source.html#l01979">jmapgen_sign::apply()</a>, <a class="el" href="mapgen_8cpp_source.html#l02031">jmapgen_graffiti::apply()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01241">activity_handlers::butcher_finish()</a>, <a class="el" href="harvest_8cpp_source.html#l00051">harvest_drop_type::butcher_msg()</a>, <a class="el" href="character_8cpp_source.html#l05232">Character::check_needs_extremes()</a>, <a class="el" href="smart__controller__ui_8cpp_source.html#l00133">smart_controller_ui::control()</a>, <a class="el" href="addiction_8cpp_source.html#l00123">crack_coke_add()</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="harvest_8cpp_source.html#l00058">harvest_drop_type::dissect_msg()</a>, <a class="el" href="iuse_8cpp_source.html#l04317">iuse::dog_whistle()</a>, <a class="el" href="iuse_8cpp_source.html#l05497">iuse::einktabletpc()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00235">expand()</a>, <a class="el" href="npctalk_8cpp_source.html#l04814">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_make_sound()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, <a class="el" href="harvest_8cpp_source.html#l00044">harvest_drop_type::field_dress_msg()</a>, <a class="el" href="suffer_8cpp_source.html#l00993">suffer::from_other_mutations()</a>, <a class="el" href="npc_8cpp_source.html#l03404">npc::get_epilogue()</a>, <a class="el" href="help_8cpp_source.html#l00269">get_hint()</a>, <a class="el" href="iuse_8cpp_source.html#l03743">get_music_description()</a>, <a class="el" href="main__menu_8cpp_source.html#l00480">main_menu::init_strings()</a>, <a class="el" href="iuse_8cpp_source.html#l08450">iuse::magic_8_ball()</a>, <a class="el" href="consumption_8cpp_source.html#l01237">Character::modify_stimulation()</a>, <a class="el" href="npctalk__funcs_8cpp_source.html#l00806">talk_function::morale_chat_activity()</a>, <a class="el" href="addiction_8cpp_source.html#l00167">nicotine_effect()</a>, <a class="el" href="game_8cpp_source.html#l05941">game::npc_menu()</a>, <a class="el" href="addiction_8cpp_source.html#l00207">opiate_effect()</a>, <a class="el" href="timed__event_8cpp_source.html#l00325">timed_event::per_turn()</a>, <a class="el" href="overmap_8cpp_source.html#l07162">overmap::place_radios()</a>, <a class="el" href="iuse_8cpp_source.html#l02582">iuse::radio_on()</a>, <a class="el" href="iuse__software__kitten_8cpp_source.html#l00024">robot_finds_kitten::robot_finds_kitten()</a>, <a class="el" href="monattack_8cpp_source.html#l00977">mattack::shocking_reveal()</a>, <a class="el" href="monattack_8cpp_source.html#l04338">mattack::slimespring()</a>, <a class="el" href="monattack_8cpp_source.html#l05538">mattack::speaker()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03709">activity_handlers::tree_communion_do_turn()</a>, and <a class="el" href="effect_8cpp_source.html#l00129">weed_msg()</a>.</p>

</div>
</div>
<a id="ac95d52c7f23d13cbf2882164d81e0662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95d52c7f23d13cbf2882164d81e0662">&#9670;&nbsp;</a></span>random_from_category() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt; snippet_library::random_from_category </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use the given seed to select a random snippet from the category. </p>
<p>For the same seed, the returned snippet stays the same <em>in a single game session</em>, but may change after reloading or restarting a game, due to layout changes in the JSON files, for example. If there isn't any snippet in the category, std::nullopt is returned. The tags in the snippet are not automatically expanded - you need to call <code><a class="el" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261" title="Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the ...">expand()</a></code> to do that.</p>
<p>TODO: make the result stay the same through different game sessions </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00291">291</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.find( cat );</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.end() ) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">const</span> uint64_t ids_weighted_sum =</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        it-&gt;second.ids.empty() ? 0 : it-&gt;second.ids.back().weight_acc;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">const</span> uint64_t weight_sum = ids_weighted_sum +</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                ( it-&gt;second.no_id.empty() ? 0 : it-&gt;second.no_id.back().weight_acc );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>( weight_sum == 0 ) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// uniform_int_distribution always returns zero when the random engine is</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// cata_default_random_engine aka std::minstd_rand0 and the seed is small,</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// so std::mt19937 is used instead. This engine is deterministically seeded,</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// so acceptable.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// NOLINTNEXTLINE(cata-determinism)</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    std::mt19937 <a class="code" href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">generator</a>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    std::uniform_int_distribution&lt;uint64_t&gt; dis( 0, weight_sum - 1 );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">const</span> uint64_t loc = dis( <a class="code" href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">generator</a> );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span>( loc &lt; ids_weighted_sum ) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> sit = std::upper_bound(</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                             it-&gt;second.ids.begin(), it-&gt;second.ids.end(), loc,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        []( <span class="keyword">const</span> uint64_t loc, <span class="keyword">const</span> weighted_id &amp; wid ) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            return loc &lt; wid.weight_acc;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        } );</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">get_snippet_by_id</a>( sit-&gt;value );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> sit = std::upper_bound(</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                             it-&gt;second.no_id.begin(), it-&gt;second.no_id.end(), loc - ids_weighted_sum,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        []( <span class="keyword">const</span> uint64_t loc, <span class="keyword">const</span> weighted_translation &amp; wt ) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            return loc &lt; wt.weight_acc;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        } );</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> sit-&gt;value;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="ttc" id="aclasssnippet__library_html_ab54d86a48c6c49bf0a4b6d881bb52a3a"><div class="ttname"><a href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">snippet_library::get_snippet_by_id</a></div><div class="ttdeci">std::optional&lt; translation &gt; get_snippet_by_id(const snippet_id &amp;id) const</div><div class="ttdoc">Returns the snippet referenced by the id, or std::nullopt if there is no snippet with such id.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00193">text_snippets.cpp:193</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae81079151986b7a91874751dae6720a5"><div class="ttname"><a href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">iuse::seed</a></div><div class="ttdeci">std::optional&lt; int &gt; seed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05301">iuse.cpp:5301</a></div></div>
<div class="ttc" id="anamespacemattack_html_acd587bdbaf562c2ce7521301d277afc7"><div class="ttname"><a href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">mattack::generator</a></div><div class="ttdeci">bool generator(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03920">monattack.cpp:3920</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l03920">mattack::generator()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00193">get_snippet_by_id()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, and <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>.</p>

</div>
</div>
<a id="aff12dd426e9f0340f5e861ddd291cea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff12dd426e9f0340f5e861ddd291cea3">&#9670;&nbsp;</a></span>random_id_from_category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> snippet_library::random_id_from_category </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cat</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the id of a random snippet out of the given category. </p>
<p>Snippets without an id will NOT be returned by this function. If there isn't any snippet in the category, or if none of the snippets in the category has an id, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c" title="Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.">snippet_id::NULL_ID()</a> is returned. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00257">257</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.find( cat );</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>.end() ) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">snippet_id::NULL_ID</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;second.no_id.empty() ) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ids are required, but not specified for some snippets in category %s&quot;</span>, cat );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">const</span> uint64_t weight_sum =</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        it-&gt;second.ids.empty() ? 0 : it-&gt;second.ids.back().weight_acc;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span>( weight_sum == 0 ) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">snippet_id::NULL_ID</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// uniform_int_distribution always returns zero when the random engine is</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// cata_default_random_engine aka std::minstd_rand0 and the seed is small,</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// so std::mt19937 is used instead. This engine is deterministically seeded,</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// so acceptable.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// NOLINTNEXTLINE(cata-determinism)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    std::mt19937 <a class="code" href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">generator</a>( <a class="code" href="rng_8cpp.html#a63dfb6fd147b791b93d5c0bdc2e87c65">rng_bits</a>() );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    std::uniform_int_distribution&lt;uint64_t&gt; dis( 0, weight_sum - 1 );</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> sit = std::upper_bound(</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                         it-&gt;second.ids.begin(), it-&gt;second.ids.end(), dis( <a class="code" href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">generator</a> ),</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    []( <span class="keyword">const</span> uint64_t loc, <span class="keyword">const</span> weighted_id &amp; wid ) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> loc &lt; wid.weight_acc;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    } );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> sit-&gt;value;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="monattack_8cpp_source.html#l03920">mattack::generator()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; translation &gt;::NULL_ID()</a>, <a class="el" href="rng_8cpp_source.html#l00011">rng_bits()</a>, <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>, and <a class="el" href="text__snippets_8h_source.html#l00131">snippet_library::weighted_id::weight_acc</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l04814">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_make_sound()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, and <a class="el" href="item_8cpp_source.html#l00299">item::item()</a>.</p>

</div>
</div>
<a id="ac8657981d672b3074293dd6831b57714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8657981d672b3074293dd6831b57714">&#9670;&nbsp;</a></span>reload_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snippet_library::reload_names </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcata__path.html">cata_path</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load name list from name.h/cpp. </p>

<p class="definition">Definition at line <a class="el" href="text__snippets_8cpp_source.html#l00089">89</a> of file <a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="cata__utility_8cpp.html#a2acae4817a18f00b9df2c758dd42f385">read_from_file_json</a>( path, [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classJsonArray.html">JsonArray</a> &amp; names_json ) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keyword">struct </span>usage_info {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordtype">bool</span> gendered;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            category_snippets *cat;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            category_snippets *male_cat;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            category_snippets *female_cat;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        };</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">const</span> std::unordered_map&lt;std::string, usage_info&gt; usages = {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            { <span class="stringliteral">&quot;backer&quot;</span>, { <span class="keyword">true</span>, <span class="keyword">nullptr</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;male_backer_name&gt;&quot;</span>], &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;female_backer_name&gt;&quot;</span>] } },</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            { <span class="stringliteral">&quot;given&quot;</span>, { <span class="keyword">true</span>, <span class="keyword">nullptr</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;male_given_name&gt;&quot;</span>], &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;female_given_name&gt;&quot;</span>] } },</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            { <span class="stringliteral">&quot;family&quot;</span>, { <span class="keyword">false</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;family_name&gt;&quot;</span>], <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span> } },</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            { <span class="stringliteral">&quot;nick&quot;</span>, { <span class="keyword">false</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;nick_name&gt;&quot;</span>], <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span> } },</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            { <span class="stringliteral">&quot;city&quot;</span>, { <span class="keyword">false</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;city_name&gt;&quot;</span>], <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span> } },</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            { <span class="stringliteral">&quot;world&quot;</span>, { <span class="keyword">false</span>, &amp;<a class="code" href="classsnippet__library.html#ab0e270ac99d472054be52471a02ad48d">snippets_by_category</a>[<span class="stringliteral">&quot;&lt;world_name&gt;&quot;</span>], <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span> } },</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        };</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// First clear previously loaded names</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, usage_info&gt; &amp;kv : usages ) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keyword">const</span> usage_info &amp;<a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a> = kv.second;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>.gendered ) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                use.male_cat-&gt;no_id.clear();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                use.female_cat-&gt;no_id.clear();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                use.cat-&gt;no_id.clear();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> jo : names_json ) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keyword">const</span> std::string usage = jo.get_string( <span class="stringliteral">&quot;usage&quot;</span> );</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> it = usages.find( usage );</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">if</span>( it == usages.end() ) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                debugmsg( <span class="stringliteral">&quot;Unknown name usage %s.&quot;</span>, usage );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                continue;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keyword">const</span> usage_info &amp;info = it-&gt;second;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            std::vector&lt;category_snippets *&gt; cats;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span>( info.gendered ) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                const std::string gender = jo.get_string( <span class="stringliteral">&quot;gender&quot;</span> );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                if( gender == <span class="stringliteral">&quot;unisex&quot;</span> ) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    cats.emplace_back( info.male_cat );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    cats.emplace_back( info.female_cat );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( gender == <span class="stringliteral">&quot;male&quot;</span> ) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    cats.emplace_back( info.male_cat );</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( gender == <span class="stringliteral">&quot;female&quot;</span> ) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    cats.emplace_back( info.female_cat );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    debugmsg( <span class="stringliteral">&quot;Unknown name gender %s.&quot;</span>, gender );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    continue;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                cats.emplace_back( info.cat );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span>( jo.has_array( <span class="stringliteral">&quot;name&quot;</span> ) ) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                for( const std::string n : jo.get_array( <span class="stringliteral">&quot;name&quot;</span> ) ) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    for( category_snippets *const cat : cats ) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                        const uint64_t weight_acc = cat-&gt;no_id.empty() ? 1 : cat-&gt;no_id.back().weight_acc + 1;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        cat-&gt;no_id.emplace_back( weighted_translation{ weight_acc, no_translation( n ) } );</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keyword">const</span> std::string n = jo.get_string( <span class="stringliteral">&quot;name&quot;</span> );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keywordflow">for</span>( category_snippets *<span class="keyword">const</span> cat : cats ) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    <span class="keyword">const</span> uint64_t weight_acc = cat-&gt;no_id.<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ? 1 : cat-&gt;no_id.back().weight_acc + 1;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    cat-&gt;no_id.emplace_back( weighted_translation{ weight_acc, no_translation( n ) } );</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// Add fallback in case no name was loaded</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, usage_info&gt; &amp;kv : usages ) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keyword">const</span> usage_info &amp;<a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a> = kv.second;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>.gendered ) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                if( use.male_cat-&gt;no_id.empty() ) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                    use.male_cat-&gt;no_id.emplace_back( weighted_translation{ 1, to_translation( <span class="stringliteral">&quot;Tom&quot;</span> ) } );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>.female_cat-&gt;no_id.<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    use.female_cat-&gt;no_id.emplace_back( weighted_translation{ 1, to_translation( <span class="stringliteral">&quot;Tom&quot;</span> ) } );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>.cat-&gt;no_id.<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>.cat-&gt;no_id.emplace_back( weighted_translation{ 1, <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Tom&quot;</span> ) } );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    } );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_a2acae4817a18f00b9df2c758dd42f385"><div class="ttname"><a href="cata__utility_8cpp.html#a2acae4817a18f00b9df2c758dd42f385">read_from_file_json</a></div><div class="ttdeci">bool read_from_file_json(const cata_path &amp;path, const std::function&lt; void(const JsonValue &amp;)&gt; &amp;reader)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00562">cata_utility.cpp:562</a></div></div>
<div class="ttc" id="aclassJsonArray_html"><div class="ttname"><a href="classJsonArray.html">JsonArray</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00346">flexbuffer_json.h:347</a></div></div>
<div class="ttc" id="aclassitem_html_ae05d298b2cf91e4c12d5beca5f38c67f"><div class="ttname"><a href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">item::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15135">item.cpp:15135</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a233578a2d65d51f06b773ae57531fb3b"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">game_menus::inv::use</a></div><div class="ttdeci">item_location use(avatar &amp;you)</div><div class="ttdoc">Item activation menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l01180">game_inventory.cpp:1180</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a176e288c640c6506a86330cb10fbe13a"><div class="ttname"><a href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a></div><div class="ttdeci">translation to_translation(const std::string &amp;raw)</div><div class="ttdoc">Shorthands for translation::to_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00420">translation.cpp:420</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l15135">item::empty()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00562">read_from_file_json()</a>, <a class="el" href="text__snippets_8h_source.html#l00145">snippets_by_category</a>, and <a class="el" href="game__inventory_8cpp_source.html#l01180">game_menus::inv::use()</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00179">clear_snippets()</a>, and <a class="el" href="translations_8cpp_source.html#l00078">set_language()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aabee535da9b3c62e4d1857794b00d6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabee535da9b3c62e4d1857794b00d6c9">&#9670;&nbsp;</a></span>EOC_by_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="structtalk__effect__t.html">talk_effect_t</a>&gt; snippet_library::EOC_by_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00127">127</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00202">get_EOC_by_id()</a>.</p>

</div>
</div>
<a id="a83f839ecb01f2d078ac5b075d7ce30ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f839ecb01f2d078ac5b075d7ce30ce">&#9670;&nbsp;</a></span>hash_to_id_migration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;std::map&lt;int, <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>&gt; &gt; snippet_library::hash_to_id_migration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00147">147</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00031">add_snippets_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00179">clear_snippets()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00017">load_snippet()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00330">migrate_hash_to_id()</a>.</p>

</div>
</div>
<a id="a90d136faada747d56ff9b688bbb6a84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d136faada747d56ff9b688bbb6a84c">&#9670;&nbsp;</a></span>name_by_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="classtranslation.html">translation</a>&gt; snippet_library::name_by_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00126">126</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00211">get_name_by_id()</a>.</p>

</div>
</div>
<a id="ab0e270ac99d472054be52471a02ad48d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0e270ac99d472054be52471a02ad48d">&#9670;&nbsp;</a></span>snippets_by_category</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, <a class="el" href="structsnippet__library_1_1category__snippets.html">category_snippets</a>&gt; snippet_library::snippets_by_category</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00145">145</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00031">add_snippets_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00179">clear_snippets()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00348">get_snippets_by_category()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00188">has_category()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00291">random_from_category()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00257">random_id_from_category()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00089">reload_names()</a>.</p>

</div>
</div>
<a id="a3a6102f5bf51e26605072508b3088c15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a6102f5bf51e26605072508b3088c15">&#9670;&nbsp;</a></span>snippets_by_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>, <a class="el" href="classtranslation.html">translation</a>&gt; snippet_library::snippets_by_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="text__snippets_8h_source.html#l00124">124</a> of file <a class="el" href="text__snippets_8h_source.html">text_snippets.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00053">add_snippet_from_json()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00179">clear_snippets()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00193">get_snippet_by_id()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00220">get_snippet_ref_by_id()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00230">has_snippet_with_id()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00330">migrate_hash_to_id()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="text__snippets_8h_source.html">text_snippets.h</a></li>
<li>src/<a class="el" href="text__snippets_8cpp_source.html">text_snippets.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:44 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
