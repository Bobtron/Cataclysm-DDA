<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/activity_handlers.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">activity_handlers.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;list&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;optional&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;unordered_set&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="coordinates_8h_source.html">coordinates.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="requirements_8h_source.html">requirements.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="type__id_8h_source.html">type_id.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="units__fwd_8h_source.html">units_fwd.h</a>&quot;</code><br />
</div>
<p><a href="activity__handlers_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structactivity__reason__info.html">activity_reason_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceactivity__handlers"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html">activity_handlers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1eaf4ee55409f0428c481c9b50246660"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a1eaf4ee55409f0428c481c9b50246660">CATA_SRC_ACTIVITY_HANDLERS_H</a></td></tr>
<tr class="separator:a1eaf4ee55409f0428c481c9b50246660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2cf8ad8704e57889e58223fb5609d7b2"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2">requirement_check_result</a> : int { <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11">SKIP_LOCATION</a> = 0
, <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa7fe8920cd6a1690625fe372a2aed7f1">CAN_DO_LOCATION</a>
, <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf">RETURN_EARLY</a>
 }</td></tr>
<tr class="separator:a2cf8ad8704e57889e58223fb5609d7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c785a0b9eb129639f10c4d6f48b49c1"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1">butcher_type</a> : int { <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4">BLEED</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945">QUICK</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1">FULL</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19">FIELD_DRESS</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60">SKIN</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e">QUARTER</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676">DISMEMBER</a>
, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">DISSECT</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026">NUM_TYPES</a>
<br />
 }</td></tr>
<tr class="separator:a9c785a0b9eb129639f10c4d6f48b49c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8548a48274a06c70c2ef9ee607d8b02"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02">do_activity_reason</a> : int { <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3da50daa2ab101773f862e36f60fc83b">CAN_DO_CONSTRUCTION</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af4545b5034bca16908a3ca2e5d36e561">CAN_DO_FETCH</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a8a970d6aac1a88238196df9f76dbb936">NO_COMPONENTS</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3717f8a9356e78428fc47eafc82952ba">DONT_HAVE_SKILL</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae0ca751541acc5c03da85f1bdfaf7381">NO_ZONE</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a262c70cc17c652f22b841bd342c43c15">ALREADY_DONE</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3eb940520208feac8fca66c627004095">UNKNOWN_ACTIVITY</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a47c7017019c38e00c45feb2b49d7507d">NEEDS_CLEARING</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ac223b6dd767c18283d69443f6c3d2e65">NEEDS_HARVESTING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a7e686404c3a888ef447af195a08ba272">NEEDS_PLANTING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a93c46e32d63cf638ea4708e1cb5b13f0">NEEDS_TILLING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ab05fb3827218c475fb1468d60066e6ab">BLOCKING_TILE</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a979025a482a7764c7e71f6aefd19c52f">NEEDS_BOOK_TO_LEARN</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a5596d452f99bc0a2715578a0e8fbea0d">NEEDS_CHOPPING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02aeb2d455ea0c07089a5292f9eb139decb">NEEDS_TREE_CHOPPING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae4d79744aa8cf0727e83a8203d61ac16">NEEDS_BIG_BUTCHERING</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a152445d6cc1927304a0b6f3e00b72c21">NEEDS_BUTCHERING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a461332123a6505f73ab4e05c543660d4">NEEDS_CUT_HARVESTING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a058149efb2dc60bc613ebfc56ccfc05d">ALREADY_WORKING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af86d171ca957f2674cfc37e55b0a4cbf">NEEDS_VEH_DECONST</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a513b89ee8d15dc895def7fb92af1439e">NEEDS_VEH_REPAIR</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a80a87995fcb7c0d12b4f7a9cab5be243">WOULD_PREVENT_VEH_FLYING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a20b4a3172c253d9ba613d7b89ec3b81a">NEEDS_MINING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae638cee3c1aef3437345e6a79dab7577">NEEDS_MOP</a>
, <br />
&#160;&#160;<a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a23e0c6680fe02718de4606c4e12ef70c">NEEDS_FISHING</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a19a71f4c8b78e5ca7a8cb9ff3592bc09">NEEDS_CRAFT</a>
, <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ad4ccbd20a777be5194d7d6fa91409025">NEEDS_DISASSEMBLE</a>
<br />
 }</td></tr>
<tr class="separator:ae8548a48274a06c70c2ef9ee607d8b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d84fb943914cecb4ecf3e469beeb42c"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a> : int { <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">deliberate</a>
, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">too_large</a>
, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">too_heavy</a>
, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">tumbling</a>
 }</td></tr>
<tr class="separator:a0d84fb943914cecb4ecf3e469beeb42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2d5447f6909e3b1b285e675df5cac54"><td class="memTemplParams" colspan="2">template&lt;typename Point , typename Container &gt; </td></tr>
<tr class="memitem:ad2d5447f6909e3b1b285e675df5cac54"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; Point &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a> (const Point &amp;center, const Container &amp;tiles)</td></tr>
<tr class="separator:ad2d5447f6909e3b1b285e675df5cac54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee54debfe6c899fd8142a504fe09895e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;dest)</td></tr>
<tr class="separator:aee54debfe6c899fd8142a504fe09895e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d7cc8134b8216267135a66883fd943"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#af3d7cc8134b8216267135a66883fd943">butcher_time_to_cut</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="classitem.html">item</a> &amp;corpse_item, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1">butcher_type</a> <a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>)</td></tr>
<tr class="separator:af3d7cc8134b8216267135a66883fd943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa9e42b952ac8bc9192c466f25359c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a9fa9e42b952ac8bc9192c466f25359c3">activity_on_turn_drop</a> ()</td></tr>
<tr class="separator:a9fa9e42b952ac8bc9192c466f25359c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae009bab875edd9d8e908cff9cb996180"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#ae009bab875edd9d8e908cff9cb996180">activity_on_turn_move_loot</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;you)</td></tr>
<tr class="separator:ae009bab875edd9d8e908cff9cb996180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92427c4a20720f251807f7e70db0640b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a92427c4a20720f251807f7e70db0640b">generic_multi_activity_handler</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;you, bool check_only=false)</td></tr>
<tr class="separator:a92427c4a20720f251807f7e70db0640b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5d03615517a9197ec18ea87ddb1bb97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#ad5d03615517a9197ec18ea87ddb1bb97">activity_on_turn_fetch</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ad5d03615517a9197ec18ea87ddb1bb97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f36a889c5495ba4f59f5471bc34d1a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#ae0f36a889c5495ba4f59f5471bc34d1a">get_auto_consume_moves</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, bool food)</td></tr>
<tr class="separator:ae0f36a889c5495ba4f59f5471bc34d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17decf55382abcbe83ee50932b2b9f79"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a17decf55382abcbe83ee50932b2b9f79">try_fuel_fire</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;you, bool starting_fire=false)</td></tr>
<tr class="separator:a17decf55382abcbe83ee50932b2b9f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678a9b1ab0a1e58f70b4d6456aa54586"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a678a9b1ab0a1e58f70b4d6456aa54586">put_into_vehicle_or_drop</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a>, const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;items)</td></tr>
<tr class="separator:a678a9b1ab0a1e58f70b4d6456aa54586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce9799e7e561c67bff76ad18af20772"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#adce9799e7e561c67bff76ad18af20772">put_into_vehicle_or_drop</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a>, const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;items, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;where, bool force_ground=false)</td></tr>
<tr class="separator:adce9799e7e561c67bff76ad18af20772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df266c468d2e586fd85a300503d0230"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classitem__location.html">item_location</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a4df266c468d2e586fd85a300503d0230">drop_on_map</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a> reason, const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;items, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;where)</td></tr>
<tr class="separator:a4df266c468d2e586fd85a300503d0230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af42def09b602ee6a5a570ef955ce4471"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#af42def09b602ee6a5a570ef955ce4471">repair_item_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you, bool no_menu)</td></tr>
<tr class="separator:af42def09b602ee6a5a570ef955ce4471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7deaa8d704a856f10ab282bc998923e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ab7deaa8d704a856f10ab282bc998923e">activity_handlers::resume_for_multi_activities</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you)</td></tr>
<tr class="separator:ab7deaa8d704a856f10ab282bc998923e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a137fd38e9a0c4f157ad290a989c83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac0a137fd38e9a0c4f157ad290a989c83">activity_handlers::generic_game_turn_handler</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you, int morale_bonus, int morale_max_bonus)</td></tr>
<tr class="separator:ac0a137fd38e9a0c4f157ad290a989c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30c393356c580d65b479cd00f69dbf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ab30c393356c580d65b479cd00f69dbf2">activity_handlers::adv_inventory_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="memdesc:ab30c393356c580d65b479cd00f69dbf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">activity_do_turn functions:  <a href="namespaceactivity__handlers.html#ab30c393356c580d65b479cd00f69dbf2">More...</a><br /></td></tr>
<tr class="separator:ab30c393356c580d65b479cd00f69dbf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1974f45b74edad9a3e41fe2ddfad7df6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a1974f45b74edad9a3e41fe2ddfad7df6">activity_handlers::armor_layers_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a1974f45b74edad9a3e41fe2ddfad7df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3484d1c375354963aa74d28b1a411f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9e3484d1c375354963aa74d28b1a411f">activity_handlers::atm_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a9e3484d1c375354963aa74d28b1a411f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc6b32c190f9214ec4e66aa6478faed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a6bc6b32c190f9214ec4e66aa6478faed">activity_handlers::build_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a6bc6b32c190f9214ec4e66aa6478faed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f1b101d8a28caeb26f6308982d95bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a52f1b101d8a28caeb26f6308982d95bb">activity_handlers::dismember_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a52f1b101d8a28caeb26f6308982d95bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcfcefcc5c5351645e0ac031fdb20e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0fcfcefcc5c5351645e0ac031fdb20e9">activity_handlers::chop_trees_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0fcfcefcc5c5351645e0ac031fdb20e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a14dda73f65b4179ac83749b6811831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a6a14dda73f65b4179ac83749b6811831">activity_handlers::consume_drink_menu_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a6a14dda73f65b4179ac83749b6811831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a092b41128906bd29115827293f28c91f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a092b41128906bd29115827293f28c91f">activity_handlers::consume_food_menu_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a092b41128906bd29115827293f28c91f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c21b80fddd572b2b56d2725955ef226"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a7c21b80fddd572b2b56d2725955ef226">activity_handlers::consume_meds_menu_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a7c21b80fddd572b2b56d2725955ef226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e95a39847661b26fa446e7464e92239"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a5e95a39847661b26fa446e7464e92239">activity_handlers::eat_menu_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a5e95a39847661b26fa446e7464e92239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2092ba46244ddd787b3df27e6e5dc5be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a2092ba46244ddd787b3df27e6e5dc5be">activity_handlers::fertilize_plot_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a2092ba46244ddd787b3df27e6e5dc5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b8b5bab56eace47c59c19921694800"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a79b8b5bab56eace47c59c19921694800">activity_handlers::fetch_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a79b8b5bab56eace47c59c19921694800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0950d024f45630d7aa2d280edf041c28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0950d024f45630d7aa2d280edf041c28">activity_handlers::fill_liquid_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0950d024f45630d7aa2d280edf041c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87e3a47f6960f9198b15a163615de31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aa87e3a47f6960f9198b15a163615de31">activity_handlers::find_mount_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aa87e3a47f6960f9198b15a163615de31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c649dd9ad51c65d9cb46de8356dc6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a92c649dd9ad51c65d9cb46de8356dc6d">activity_handlers::fish_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a92c649dd9ad51c65d9cb46de8356dc6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373494a2445d4f4932e45eb55d31ec11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a373494a2445d4f4932e45eb55d31ec11">activity_handlers::game_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a373494a2445d4f4932e45eb55d31ec11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3573e8faa5572a5814b898b6a7bbe057"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a3573e8faa5572a5814b898b6a7bbe057">activity_handlers::generic_game_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a3573e8faa5572a5814b898b6a7bbe057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9c49bc8585fe016a43a2623c6c46e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a7f9c49bc8585fe016a43a2623c6c46e2">activity_handlers::hand_crank_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a7f9c49bc8585fe016a43a2623c6c46e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e3e35b04a5650343b6b5177c0d6e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aa0e3e35b04a5650343b6b5177c0d6e84">activity_handlers::jackhammer_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aa0e3e35b04a5650343b6b5177c0d6e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1775d74bcdd0b18bb1ab7614cbc1a4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#af1775d74bcdd0b18bb1ab7614cbc1a4d">activity_handlers::move_loot_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:af1775d74bcdd0b18bb1ab7614cbc1a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a56c5c7719511683533db8f18ab3bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#af7a56c5c7719511683533db8f18ab3bf">activity_handlers::multiple_butcher_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:af7a56c5c7719511683533db8f18ab3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bb439021440cc4a7cdbd31cdec5eeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a22bb439021440cc4a7cdbd31cdec5eeb">activity_handlers::multiple_chop_planks_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a22bb439021440cc4a7cdbd31cdec5eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a09373c985feb810b828989e25cdc5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a55a09373c985feb810b828989e25cdc5">activity_handlers::multiple_construction_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a55a09373c985feb810b828989e25cdc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e9b0e80d4b8c76f8dc797c26400866"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ad5e9b0e80d4b8c76f8dc797c26400866">activity_handlers::multiple_craft_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ad5e9b0e80d4b8c76f8dc797c26400866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a977699686febdb1db04296b444c0a9d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a977699686febdb1db04296b444c0a9d1">activity_handlers::multiple_dis_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a977699686febdb1db04296b444c0a9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad926e3676d6b2c3c04a51fb0b8aa4106"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ad926e3676d6b2c3c04a51fb0b8aa4106">activity_handlers::multiple_farm_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ad926e3676d6b2c3c04a51fb0b8aa4106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54c9deacd521e1ca44897f0562aba97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ae54c9deacd521e1ca44897f0562aba97">activity_handlers::multiple_fish_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ae54c9deacd521e1ca44897f0562aba97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca8f3c58ef9b6a2e052f1ecce9105b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0ca8f3c58ef9b6a2e052f1ecce9105b5">activity_handlers::multiple_read_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0ca8f3c58ef9b6a2e052f1ecce9105b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f6e37b00b6fdd3e28794dcd19ffc9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac9f6e37b00b6fdd3e28794dcd19ffc9f">activity_handlers::multiple_mine_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac9f6e37b00b6fdd3e28794dcd19ffc9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ad4ebe800db45937ecaffeaada53a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a48ad4ebe800db45937ecaffeaada53a2">activity_handlers::multiple_mop_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a48ad4ebe800db45937ecaffeaada53a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f97e7decd1bdbafaf1cbd53712cf137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0f97e7decd1bdbafaf1cbd53712cf137">activity_handlers::operation_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0f97e7decd1bdbafaf1cbd53712cf137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69163ad62e1a97243f2ac0311cc531e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a69163ad62e1a97243f2ac0311cc531e8">activity_handlers::pickaxe_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a69163ad62e1a97243f2ac0311cc531e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e0f833026f80f45f1376a5a408d254"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ae6e0f833026f80f45f1376a5a408d254">activity_handlers::pulp_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ae6e0f833026f80f45f1376a5a408d254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea90140c8550bdc2b42795df30577492"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aea90140c8550bdc2b42795df30577492">activity_handlers::repair_item_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aea90140c8550bdc2b42795df30577492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52106c6b875d8fd853db8982a999fc3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a52106c6b875d8fd853db8982a999fc3a">activity_handlers::robot_control_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a52106c6b875d8fd853db8982a999fc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0661e968e38ca51f9d9c19aa995297e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0661e968e38ca51f9d9c19aa995297e1">activity_handlers::start_fire_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0661e968e38ca51f9d9c19aa995297e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101a6f2a4332e1ba86e2efd4478fb404"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a101a6f2a4332e1ba86e2efd4478fb404">activity_handlers::study_spell_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a101a6f2a4332e1ba86e2efd4478fb404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07329f0360ccd5e585defb2e9953a832"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a07329f0360ccd5e585defb2e9953a832">activity_handlers::tidy_up_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a07329f0360ccd5e585defb2e9953a832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9d26c27800508981381fc08a0cf2dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a8b9d26c27800508981381fc08a0cf2dc">activity_handlers::travel_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a8b9d26c27800508981381fc08a0cf2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1d2bb62c3e2a2238e1c64566670df99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac1d2bb62c3e2a2238e1c64566670df99">activity_handlers::tree_communion_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac1d2bb62c3e2a2238e1c64566670df99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea1ba7a75a54116f7162daffa61b322"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aaea1ba7a75a54116f7162daffa61b322">activity_handlers::vehicle_deconstruction_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aaea1ba7a75a54116f7162daffa61b322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db978db0bef4af23afceb6ce51dbf4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9db978db0bef4af23afceb6ce51dbf4b">activity_handlers::vehicle_repair_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a9db978db0bef4af23afceb6ce51dbf4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe8684f8ec71ac98540c7622f5e6cd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#acbe8684f8ec71ac98540c7622f5e6cd4">activity_handlers::vibe_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:acbe8684f8ec71ac98540c7622f5e6cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a4a27cd573c8070793af7e09e594c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a78a4a27cd573c8070793af7e09e594c8">activity_handlers::view_recipe_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a78a4a27cd573c8070793af7e09e594c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a469a140fb75ae9c1380d86e8131d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a02a469a140fb75ae9c1380d86e8131d7">activity_handlers::wait_stamina_do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a02a469a140fb75ae9c1380d86e8131d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699de9cc887c2aaf47a847a9a9a7876a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a699de9cc887c2aaf47a847a9a9a7876a">activity_handlers::atm_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="memdesc:a699de9cc887c2aaf47a847a9a9a7876a"><td class="mdescLeft">&#160;</td><td class="mdescRight">activity_finish functions:  <a href="namespaceactivity__handlers.html#a699de9cc887c2aaf47a847a9a9a7876a">More...</a><br /></td></tr>
<tr class="separator:a699de9cc887c2aaf47a847a9a9a7876a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f804e7583deaa0702f5b4781ab684be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0f804e7583deaa0702f5b4781ab684be">activity_handlers::butcher_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0f804e7583deaa0702f5b4781ab684be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6c34b4161c1427460c6f9620f120e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aec6c34b4161c1427460c6f9620f120e3">activity_handlers::eat_menu_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aec6c34b4161c1427460c6f9620f120e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff0a6d758bcce65fd464b4a456522ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9ff0a6d758bcce65fd464b4a456522ad">activity_handlers::fish_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a9ff0a6d758bcce65fd464b4a456522ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4982c626858a2693a3f73cebadf9a787"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a4982c626858a2693a3f73cebadf9a787">activity_handlers::generic_game_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a4982c626858a2693a3f73cebadf9a787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3690e4b02b436d3890db8ebcb11dc16b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a3690e4b02b436d3890db8ebcb11dc16b">activity_handlers::gunmod_add_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a3690e4b02b436d3890db8ebcb11dc16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f23296a78cdeebaec6c91d4d808e54f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a0f23296a78cdeebaec6c91d4d808e54f">activity_handlers::heat_item_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a0f23296a78cdeebaec6c91d4d808e54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6226d52d2dd2406661af5f12d1a9f280"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a6226d52d2dd2406661af5f12d1a9f280">activity_handlers::jackhammer_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a6226d52d2dd2406661af5f12d1a9f280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1fdce1697836b1fd5a9325ce294b8a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac1fdce1697836b1fd5a9325ce294b8a8">activity_handlers::mend_item_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac1fdce1697836b1fd5a9325ce294b8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8927a0628ca96a5f8c2b248c0f09df9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ad8927a0628ca96a5f8c2b248c0f09df9">activity_handlers::operation_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ad8927a0628ca96a5f8c2b248c0f09df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0ff5260b9fc48acc37fc7c841f9927"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ada0ff5260b9fc48acc37fc7c841f9927">activity_handlers::pickaxe_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ada0ff5260b9fc48acc37fc7c841f9927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f80c031aa4cfaaf1377362ae743b7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a55f80c031aa4cfaaf1377362ae743b7e">activity_handlers::plant_seed_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a55f80c031aa4cfaaf1377362ae743b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d49675a2dd40d564b228d148e87f3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac6d49675a2dd40d564b228d148e87f3d">activity_handlers::pull_creature_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac6d49675a2dd40d564b228d148e87f3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2b6fb674e5fb238ee76d47fa71b8c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9c2b6fb674e5fb238ee76d47fa71b8c6">activity_handlers::pulp_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a9c2b6fb674e5fb238ee76d47fa71b8c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3209dd1e7be48cb5d5edfb6a2d634e68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a3209dd1e7be48cb5d5edfb6a2d634e68">activity_handlers::repair_item_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a3209dd1e7be48cb5d5edfb6a2d634e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e80cff128827daa531e28a3c5456aff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a8e80cff128827daa531e28a3c5456aff">activity_handlers::robot_control_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a8e80cff128827daa531e28a3c5456aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab205ba6f87a55622bc3bfd4f35449acc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ab205ba6f87a55622bc3bfd4f35449acc">activity_handlers::socialize_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ab205ba6f87a55622bc3bfd4f35449acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcc770710dd847f007d94a99bbefba9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9dcc770710dd847f007d94a99bbefba9">activity_handlers::spellcasting_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a9dcc770710dd847f007d94a99bbefba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4613babfdd09250d43d9b08436e94d29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a4613babfdd09250d43d9b08436e94d29">activity_handlers::start_engines_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a4613babfdd09250d43d9b08436e94d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bc620f2ec10d207e837717bb3d44bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a56bc620f2ec10d207e837717bb3d44bf">activity_handlers::start_fire_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a56bc620f2ec10d207e837717bb3d44bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca76a1d288c91569522c080d77909ca5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#aca76a1d288c91569522c080d77909ca5">activity_handlers::study_spell_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:aca76a1d288c91569522c080d77909ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900c5466304c8886a6f296bd36292d33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a900c5466304c8886a6f296bd36292d33">activity_handlers::teach_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a900c5466304c8886a6f296bd36292d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add378b450481a1cdb9c3cee86497bd55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#add378b450481a1cdb9c3cee86497bd55">activity_handlers::toolmod_add_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:add378b450481a1cdb9c3cee86497bd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66b097eaad4cc3328a6556cdf7c99b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac66b097eaad4cc3328a6556cdf7c99b8">activity_handlers::train_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac66b097eaad4cc3328a6556cdf7c99b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adca413558d74472373783fa182450be2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#adca413558d74472373783fa182450be2">activity_handlers::vehicle_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:adca413558d74472373783fa182450be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d424bad738f6b9265c396ba3b54ba63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a6d424bad738f6b9265c396ba3b54ba63">activity_handlers::vibe_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a6d424bad738f6b9265c396ba3b54ba63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a084a2269f161b8854f09aa919cb153"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a5a084a2269f161b8854f09aa919cb153">activity_handlers::view_recipe_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a5a084a2269f161b8854f09aa919cb153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09968d0d1d49f9fd0c9dc272f05b9fbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a09968d0d1d49f9fd0c9dc272f05b9fbf">activity_handlers::wait_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a09968d0d1d49f9fd0c9dc272f05b9fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522096d801c145a5d38f0983859e80a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a522096d801c145a5d38f0983859e80a9">activity_handlers::wait_npc_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a522096d801c145a5d38f0983859e80a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04b20c30c4364591669000d72da8fbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#ac04b20c30c4364591669000d72da8fbe">activity_handlers::wait_stamina_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:ac04b20c30c4364591669000d72da8fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2312022b00d64496fcfd7bb2e5ca0894"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a2312022b00d64496fcfd7bb2e5ca0894">activity_handlers::wait_weather_finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> *<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> *you)</td></tr>
<tr class="separator:a2312022b00d64496fcfd7bb2e5ca0894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e87301f5548ff4bc7076a59fcde638"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">activity_handlers::move_cost</a> (const <a class="el" href="classitem.html">item</a> &amp;it, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;src, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;dest)</td></tr>
<tr class="separator:a88e87301f5548ff4bc7076a59fcde638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7ab9dd02a49fba807b136441f71f82"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a9d7ab9dd02a49fba807b136441f71f82">activity_handlers::move_cost_cart</a> (const <a class="el" href="classitem.html">item</a> &amp;it, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;src, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;dest, const <a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a> &amp;capacity)</td></tr>
<tr class="separator:a9d7ab9dd02a49fba807b136441f71f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687e2a6c96df590791fe09bd5faa3fac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a687e2a6c96df590791fe09bd5faa3fac">activity_handlers::move_cost_inv</a> (const <a class="el" href="classitem.html">item</a> &amp;it, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;src, const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;dest)</td></tr>
<tr class="separator:a687e2a6c96df590791fe09bd5faa3fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a622706d46a39d8b7c6f2a0b7f3b65684"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="activity__handlers_8h.html#a622706d46a39d8b7c6f2a0b7f3b65684">do_activity_reason_string</a></td></tr>
<tr class="separator:a622706d46a39d8b7c6f2a0b7f3b65684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3efd76dd9f787ed27ed14706258055"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa1d78dc8ed51214e518b5114fe24490ae">std::map</a>&lt; <a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>, std::function&lt; void(<a class="el" href="classplayer__activity.html">player_activity</a> *, <a class="el" href="classCharacter.html">Character</a> *)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a6c3efd76dd9f787ed27ed14706258055">activity_handlers::do_turn_functions</a></td></tr>
<tr class="separator:a6c3efd76dd9f787ed27ed14706258055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e26a36d37487999b4a7b068a773583"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa1d78dc8ed51214e518b5114fe24490ae">std::map</a>&lt; <a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>, std::function&lt; void(<a class="el" href="classplayer__activity.html">player_activity</a> *, <a class="el" href="classCharacter.html">Character</a> *)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceactivity__handlers.html#a94e26a36d37487999b4a7b068a773583">activity_handlers::finish_functions</a></td></tr>
<tr class="separator:a94e26a36d37487999b4a7b068a773583"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1eaf4ee55409f0428c481c9b50246660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eaf4ee55409f0428c481c9b50246660">&#9670;&nbsp;</a></span>CATA_SRC_ACTIVITY_HANDLERS_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CATA_SRC_ACTIVITY_HANDLERS_H</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00003">3</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a9c785a0b9eb129639f10c4d6f48b49c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c785a0b9eb129639f10c4d6f48b49c1">&#9670;&nbsp;</a></span>butcher_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1">butcher_type</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4"></a>BLEED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945"></a>QUICK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1"></a>FULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19"></a>FIELD_DRESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60"></a>SKIN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e"></a>QUARTER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676"></a>DISMEMBER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c"></a>DISSECT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026"></a>NUM_TYPES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00048">48</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                        : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4">BLEED</a>,          <span class="comment">// bleeding a corpse</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945">QUICK</a>,          <span class="comment">// quick butchery</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1">FULL</a>,           <span class="comment">// full workshop butchery</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19">FIELD_DRESS</a>,    <span class="comment">// field dressing a corpse</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60">SKIN</a>,           <span class="comment">// skinning a corpse</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e">QUARTER</a>,        <span class="comment">// quarter a corpse</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676">DISMEMBER</a>,      <span class="comment">// destroy a corpse</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">DISSECT</a>,        <span class="comment">// dissect a corpse for CBMs</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026">NUM_TYPES</a>       <span class="comment">// always keep at the end, number of butchery types</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;};</div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1">repeat_type::FULL</a></div><div class="ttdeci">@ FULL</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60">butcher_type::SKIN</a></div><div class="ttdeci">@ SKIN</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e">butcher_type::QUARTER</a></div><div class="ttdeci">@ QUARTER</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19">butcher_type::FIELD_DRESS</a></div><div class="ttdeci">@ FIELD_DRESS</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4">butcher_type::BLEED</a></div><div class="ttdeci">@ BLEED</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026">butcher_type::NUM_TYPES</a></div><div class="ttdeci">@ NUM_TYPES</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945">butcher_type::QUICK</a></div><div class="ttdeci">@ QUICK</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676">butcher_type::DISMEMBER</a></div><div class="ttdeci">@ DISMEMBER</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">butcher_type::DISSECT</a></div><div class="ttdeci">@ DISSECT</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8548a48274a06c70c2ef9ee607d8b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8548a48274a06c70c2ef9ee607d8b02">&#9670;&nbsp;</a></span>do_activity_reason</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02">do_activity_reason</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a3da50daa2ab101773f862e36f60fc83b"></a>CAN_DO_CONSTRUCTION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02af4545b5034bca16908a3ca2e5d36e561"></a>CAN_DO_FETCH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a8a970d6aac1a88238196df9f76dbb936"></a>NO_COMPONENTS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a3717f8a9356e78428fc47eafc82952ba"></a>DONT_HAVE_SKILL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ae0ca751541acc5c03da85f1bdfaf7381"></a>NO_ZONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a262c70cc17c652f22b841bd342c43c15"></a>ALREADY_DONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a3eb940520208feac8fca66c627004095"></a>UNKNOWN_ACTIVITY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a47c7017019c38e00c45feb2b49d7507d"></a>NEEDS_CLEARING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ac223b6dd767c18283d69443f6c3d2e65"></a>NEEDS_HARVESTING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a7e686404c3a888ef447af195a08ba272"></a>NEEDS_PLANTING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a93c46e32d63cf638ea4708e1cb5b13f0"></a>NEEDS_TILLING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ab05fb3827218c475fb1468d60066e6ab"></a>BLOCKING_TILE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a979025a482a7764c7e71f6aefd19c52f"></a>NEEDS_BOOK_TO_LEARN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a5596d452f99bc0a2715578a0e8fbea0d"></a>NEEDS_CHOPPING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02aeb2d455ea0c07089a5292f9eb139decb"></a>NEEDS_TREE_CHOPPING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ae4d79744aa8cf0727e83a8203d61ac16"></a>NEEDS_BIG_BUTCHERING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a152445d6cc1927304a0b6f3e00b72c21"></a>NEEDS_BUTCHERING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a461332123a6505f73ab4e05c543660d4"></a>NEEDS_CUT_HARVESTING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a058149efb2dc60bc613ebfc56ccfc05d"></a>ALREADY_WORKING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02af86d171ca957f2674cfc37e55b0a4cbf"></a>NEEDS_VEH_DECONST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a513b89ee8d15dc895def7fb92af1439e"></a>NEEDS_VEH_REPAIR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a80a87995fcb7c0d12b4f7a9cab5be243"></a>WOULD_PREVENT_VEH_FLYING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a20b4a3172c253d9ba613d7b89ec3b81a"></a>NEEDS_MINING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ae638cee3c1aef3437345e6a79dab7577"></a>NEEDS_MOP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a23e0c6680fe02718de4606c4e12ef70c"></a>NEEDS_FISHING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02a19a71f4c8b78e5ca7a8cb9ff3592bc09"></a>NEEDS_CRAFT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8548a48274a06c70c2ef9ee607d8b02ad4ccbd20a777be5194d7d6fa91409025"></a>NEEDS_DISASSEMBLE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00060">60</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                              : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3da50daa2ab101773f862e36f60fc83b">CAN_DO_CONSTRUCTION</a>,    <span class="comment">// Can do construction.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af4545b5034bca16908a3ca2e5d36e561">CAN_DO_FETCH</a>,           <span class="comment">// Can do fetch - this is usually the default result for fetch task</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a8a970d6aac1a88238196df9f76dbb936">NO_COMPONENTS</a>,          <span class="comment">// can&#39;t do the activity there due to lack of components /tools</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3717f8a9356e78428fc47eafc82952ba">DONT_HAVE_SKILL</a>,        <span class="comment">// don&#39;t have the required skill</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae0ca751541acc5c03da85f1bdfaf7381">NO_ZONE</a>,                <span class="comment">// There is no required zone anymore</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a262c70cc17c652f22b841bd342c43c15">ALREADY_DONE</a>,           <span class="comment">// the activity is done already ( maybe by someone else )</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3eb940520208feac8fca66c627004095">UNKNOWN_ACTIVITY</a>,       <span class="comment">// This is probably an error - got to the end of function with no previous reason</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a47c7017019c38e00c45feb2b49d7507d">NEEDS_CLEARING</a>,         <span class="comment">// For farming - tile was neglected and became overgrown, can be cleared.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ac223b6dd767c18283d69443f6c3d2e65">NEEDS_HARVESTING</a>,       <span class="comment">// For farming - tile is harvestable now.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a7e686404c3a888ef447af195a08ba272">NEEDS_PLANTING</a>,         <span class="comment">// For farming - tile can be planted</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a93c46e32d63cf638ea4708e1cb5b13f0">NEEDS_TILLING</a>,          <span class="comment">// For farming - tile can be tilled</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ab05fb3827218c475fb1468d60066e6ab">BLOCKING_TILE</a>,           <span class="comment">// Something has made it&#39;s way onto the tile, so the activity cannot proceed</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a979025a482a7764c7e71f6aefd19c52f">NEEDS_BOOK_TO_LEARN</a>,    <span class="comment">// There is book to learn</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a5596d452f99bc0a2715578a0e8fbea0d">NEEDS_CHOPPING</a>,         <span class="comment">// There is wood there to be chopped</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02aeb2d455ea0c07089a5292f9eb139decb">NEEDS_TREE_CHOPPING</a>,    <span class="comment">// There is a tree there that needs to be chopped</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae4d79744aa8cf0727e83a8203d61ac16">NEEDS_BIG_BUTCHERING</a>,   <span class="comment">// There is at least one corpse there to butcher, and it&#39;s a big one</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a152445d6cc1927304a0b6f3e00b72c21">NEEDS_BUTCHERING</a>,       <span class="comment">// THere is at least one corpse there to butcher, and there&#39;s no need for additional tools</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a461332123a6505f73ab4e05c543660d4">NEEDS_CUT_HARVESTING</a>,   <span class="comment">// There is a plant there which needs a grass-cutting tool to harvest</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a058149efb2dc60bc613ebfc56ccfc05d">ALREADY_WORKING</a>,        <span class="comment">// somebody is already working there</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af86d171ca957f2674cfc37e55b0a4cbf">NEEDS_VEH_DECONST</a>,       <span class="comment">// There is a vehicle part there that we can deconstruct, given the right tools.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a513b89ee8d15dc895def7fb92af1439e">NEEDS_VEH_REPAIR</a>,       <span class="comment">// There is a vehicle part there that can be repaired, given the right tools.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a80a87995fcb7c0d12b4f7a9cab5be243">WOULD_PREVENT_VEH_FLYING</a>, <span class="comment">// Attempting to perform this activity on a vehicle would prevent it from flying</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a20b4a3172c253d9ba613d7b89ec3b81a">NEEDS_MINING</a>,           <span class="comment">// This spot can be mined, if the right tool is present.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae638cee3c1aef3437345e6a79dab7577">NEEDS_MOP</a>,               <span class="comment">// This spot can be mopped, if a mop is present.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a23e0c6680fe02718de4606c4e12ef70c">NEEDS_FISHING</a>,           <span class="comment">// This spot can be fished, if the right tool is present.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a19a71f4c8b78e5ca7a8cb9ff3592bc09">NEEDS_CRAFT</a>,             <span class="comment">// There is at least one item to craft.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ad4ccbd20a777be5194d7d6fa91409025">NEEDS_DISASSEMBLE</a>        <span class="comment">// There is at least one item to disassemble.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a058149efb2dc60bc613ebfc56ccfc05d"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a058149efb2dc60bc613ebfc56ccfc05d">do_activity_reason::ALREADY_WORKING</a></div><div class="ttdeci">@ ALREADY_WORKING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a152445d6cc1927304a0b6f3e00b72c21"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a152445d6cc1927304a0b6f3e00b72c21">do_activity_reason::NEEDS_BUTCHERING</a></div><div class="ttdeci">@ NEEDS_BUTCHERING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a19a71f4c8b78e5ca7a8cb9ff3592bc09"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a19a71f4c8b78e5ca7a8cb9ff3592bc09">do_activity_reason::NEEDS_CRAFT</a></div><div class="ttdeci">@ NEEDS_CRAFT</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a20b4a3172c253d9ba613d7b89ec3b81a"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a20b4a3172c253d9ba613d7b89ec3b81a">do_activity_reason::NEEDS_MINING</a></div><div class="ttdeci">@ NEEDS_MINING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a23e0c6680fe02718de4606c4e12ef70c"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a23e0c6680fe02718de4606c4e12ef70c">do_activity_reason::NEEDS_FISHING</a></div><div class="ttdeci">@ NEEDS_FISHING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a262c70cc17c652f22b841bd342c43c15"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a262c70cc17c652f22b841bd342c43c15">do_activity_reason::ALREADY_DONE</a></div><div class="ttdeci">@ ALREADY_DONE</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a3717f8a9356e78428fc47eafc82952ba"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3717f8a9356e78428fc47eafc82952ba">do_activity_reason::DONT_HAVE_SKILL</a></div><div class="ttdeci">@ DONT_HAVE_SKILL</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a3da50daa2ab101773f862e36f60fc83b"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3da50daa2ab101773f862e36f60fc83b">do_activity_reason::CAN_DO_CONSTRUCTION</a></div><div class="ttdeci">@ CAN_DO_CONSTRUCTION</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a3eb940520208feac8fca66c627004095"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a3eb940520208feac8fca66c627004095">do_activity_reason::UNKNOWN_ACTIVITY</a></div><div class="ttdeci">@ UNKNOWN_ACTIVITY</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a461332123a6505f73ab4e05c543660d4"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a461332123a6505f73ab4e05c543660d4">do_activity_reason::NEEDS_CUT_HARVESTING</a></div><div class="ttdeci">@ NEEDS_CUT_HARVESTING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a47c7017019c38e00c45feb2b49d7507d"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a47c7017019c38e00c45feb2b49d7507d">do_activity_reason::NEEDS_CLEARING</a></div><div class="ttdeci">@ NEEDS_CLEARING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a513b89ee8d15dc895def7fb92af1439e"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a513b89ee8d15dc895def7fb92af1439e">do_activity_reason::NEEDS_VEH_REPAIR</a></div><div class="ttdeci">@ NEEDS_VEH_REPAIR</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a5596d452f99bc0a2715578a0e8fbea0d"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a5596d452f99bc0a2715578a0e8fbea0d">do_activity_reason::NEEDS_CHOPPING</a></div><div class="ttdeci">@ NEEDS_CHOPPING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a7e686404c3a888ef447af195a08ba272"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a7e686404c3a888ef447af195a08ba272">do_activity_reason::NEEDS_PLANTING</a></div><div class="ttdeci">@ NEEDS_PLANTING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a80a87995fcb7c0d12b4f7a9cab5be243"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a80a87995fcb7c0d12b4f7a9cab5be243">do_activity_reason::WOULD_PREVENT_VEH_FLYING</a></div><div class="ttdeci">@ WOULD_PREVENT_VEH_FLYING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a8a970d6aac1a88238196df9f76dbb936"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a8a970d6aac1a88238196df9f76dbb936">do_activity_reason::NO_COMPONENTS</a></div><div class="ttdeci">@ NO_COMPONENTS</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a93c46e32d63cf638ea4708e1cb5b13f0"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a93c46e32d63cf638ea4708e1cb5b13f0">do_activity_reason::NEEDS_TILLING</a></div><div class="ttdeci">@ NEEDS_TILLING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02a979025a482a7764c7e71f6aefd19c52f"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02a979025a482a7764c7e71f6aefd19c52f">do_activity_reason::NEEDS_BOOK_TO_LEARN</a></div><div class="ttdeci">@ NEEDS_BOOK_TO_LEARN</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ab05fb3827218c475fb1468d60066e6ab"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ab05fb3827218c475fb1468d60066e6ab">do_activity_reason::BLOCKING_TILE</a></div><div class="ttdeci">@ BLOCKING_TILE</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ac223b6dd767c18283d69443f6c3d2e65"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ac223b6dd767c18283d69443f6c3d2e65">do_activity_reason::NEEDS_HARVESTING</a></div><div class="ttdeci">@ NEEDS_HARVESTING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ad4ccbd20a777be5194d7d6fa91409025"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ad4ccbd20a777be5194d7d6fa91409025">do_activity_reason::NEEDS_DISASSEMBLE</a></div><div class="ttdeci">@ NEEDS_DISASSEMBLE</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ae0ca751541acc5c03da85f1bdfaf7381"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae0ca751541acc5c03da85f1bdfaf7381">do_activity_reason::NO_ZONE</a></div><div class="ttdeci">@ NO_ZONE</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ae4d79744aa8cf0727e83a8203d61ac16"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae4d79744aa8cf0727e83a8203d61ac16">do_activity_reason::NEEDS_BIG_BUTCHERING</a></div><div class="ttdeci">@ NEEDS_BIG_BUTCHERING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02ae638cee3c1aef3437345e6a79dab7577"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02ae638cee3c1aef3437345e6a79dab7577">do_activity_reason::NEEDS_MOP</a></div><div class="ttdeci">@ NEEDS_MOP</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02aeb2d455ea0c07089a5292f9eb139decb"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02aeb2d455ea0c07089a5292f9eb139decb">do_activity_reason::NEEDS_TREE_CHOPPING</a></div><div class="ttdeci">@ NEEDS_TREE_CHOPPING</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02af4545b5034bca16908a3ca2e5d36e561"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af4545b5034bca16908a3ca2e5d36e561">do_activity_reason::CAN_DO_FETCH</a></div><div class="ttdeci">@ CAN_DO_FETCH</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ae8548a48274a06c70c2ef9ee607d8b02af86d171ca957f2674cfc37e55b0a4cbf"><div class="ttname"><a href="activity__handlers_8h.html#ae8548a48274a06c70c2ef9ee607d8b02af86d171ca957f2674cfc37e55b0a4cbf">do_activity_reason::NEEDS_VEH_DECONST</a></div><div class="ttdeci">@ NEEDS_VEH_DECONST</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d84fb943914cecb4ecf3e469beeb42c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d84fb943914cecb4ecf3e469beeb42c">&#9670;&nbsp;</a></span>item_drop_reason</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb"></a>deliberate&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a"></a>too_large&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e"></a>too_heavy&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51"></a>tumbling&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00170">170</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                            : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">deliberate</a>,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">too_large</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">too_heavy</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">tumbling</a></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;};</div>
<div class="ttc" id="aactivity__handlers_8h_html_a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb"><div class="ttname"><a href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a></div><div class="ttdeci">@ deliberate</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51"><div class="ttname"><a href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">item_drop_reason::tumbling</a></div><div class="ttdeci">@ tumbling</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a"><div class="ttname"><a href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">item_drop_reason::too_large</a></div><div class="ttdeci">@ too_large</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e"><div class="ttname"><a href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">item_drop_reason::too_heavy</a></div><div class="ttdeci">@ too_heavy</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cf8ad8704e57889e58223fb5609d7b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cf8ad8704e57889e58223fb5609d7b2">&#9670;&nbsp;</a></span>requirement_check_result</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2">requirement_check_result</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11"></a>SKIP_LOCATION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cf8ad8704e57889e58223fb5609d7b2aa7fe8920cd6a1690625fe372a2aed7f1"></a>CAN_DO_LOCATION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf"></a>RETURN_EARLY&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00042">42</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                    : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11">SKIP_LOCATION</a> = 0,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa7fe8920cd6a1690625fe372a2aed7f1">CAN_DO_LOCATION</a>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf">RETURN_EARLY</a>       <span class="comment">//another activity like a fetch activity has been started.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;};</div>
<div class="ttc" id="aactivity__handlers_8h_html_a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf"><div class="ttname"><a href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf">requirement_check_result::RETURN_EARLY</a></div><div class="ttdeci">@ RETURN_EARLY</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a2cf8ad8704e57889e58223fb5609d7b2aa7fe8920cd6a1690625fe372a2aed7f1"><div class="ttname"><a href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa7fe8920cd6a1690625fe372a2aed7f1">requirement_check_result::CAN_DO_LOCATION</a></div><div class="ttdeci">@ CAN_DO_LOCATION</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11"><div class="ttname"><a href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11">requirement_check_result::SKIP_LOCATION</a></div><div class="ttdeci">@ SKIP_LOCATION</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9fa9e42b952ac8bc9192c466f25359c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa9e42b952ac8bc9192c466f25359c3">&#9670;&nbsp;</a></span>activity_on_turn_drop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void activity_on_turn_drop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad5d03615517a9197ec18ea87ddb1bb97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5d03615517a9197ec18ea87ddb1bb97">&#9670;&nbsp;</a></span>activity_on_turn_fetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void activity_on_turn_fetch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>you</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae009bab875edd9d8e908cff9cb996180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae009bab875edd9d8e908cff9cb996180">&#9670;&nbsp;</a></span>activity_on_turn_move_loot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void activity_on_turn_move_loot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l01991">1991</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;{</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="keyword">enum</span> activity_stage : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="comment">//Initial stage</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a> = 0,</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <span class="comment">//Think about what to do first: choose destination</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        THINK,</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="comment">//Do activity</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        DO,</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    };</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordtype">int</span> &amp;stage = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.index;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="comment">//Prepare activity stage</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="keywordflow">if</span>( stage &lt; 0 ) {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        stage = <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a>;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="comment">//num_processed</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.values.push_back( 0 );</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    }</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordtype">int</span> &amp;num_processed = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.values[ 0 ];</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> abspos = you.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>();</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <a class="code" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code" href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a>();</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a8a6e17bf2b027fe957361bb7c5d857ce">check_vehicle_zones</a>( here.<a class="code" href="classmap.html#ab2a7030c1e990957e11ae52b58ad7056">get_abs_sub</a>().<a class="code" href="classcoords_1_1coord__point__mut.html#aa94b8bd33e85ce94a3634e6e27ab0cdd">z</a>() ) ) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        mgr.<a class="code" href="classzone__manager.html#a815445722eb24bf8e8f2af3ec9f32a99">cache_vzones</a>();</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keywordflow">if</span>( stage == INIT ) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coord_set.clear();</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p :</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;             mgr.<a class="code" href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">get_near</a>( <a class="code" href="activity__item__handling_8cpp.html#a5a86c44ff9433e6f488251b0bc38c0c7">zone_type_LOOT_UNSORTED</a>, abspos, <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                           <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ) {</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coord_set.insert( p.raw() );</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        }</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        stage = THINK;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span>( stage == THINK ) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="comment">//initialize num_processed</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        num_processed = 0;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        std::vector&lt;tripoint_abs_ms&gt; src_set;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        src_set.reserve( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coord_set.size() );</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p : <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coord_set ) {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            src_set.emplace_back( p );</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        }</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        <span class="comment">// sort source tiles by distance</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;src_sorted = <a class="code" href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a>( abspos, src_set );</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;src : src_sorted ) {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.placement = src;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coord_set.erase( src.raw() );</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> src_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( src );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( src_loc ) ) {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                    <span class="comment">// p is implicitly an NPC that has been moved off the map, so reset the activity</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                    <span class="comment">// and unload them</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                    you.<a class="code" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">cancel_activity</a>();</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="activity__item__handling_8cpp.html#a0313dde9b91b312463fd84bf985b42a6">ACT_MOVE_LOOT</a> );</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                    you.<a class="code" href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">set_moves</a>( 0 );</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reload_npcs();</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                std::vector&lt;tripoint_bub_ms&gt; route;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                route = here.<a class="code" href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">route</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), src_loc, you.<a class="code" href="classCharacter.html#aa7240b1a7ad2b5c556a6aeafc2132d46">get_pathfinding_settings</a>(),</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                                    you.<a class="code" href="classCharacter.html#ac432601d2b42dd795be5e600ef66776f">get_path_avoid</a>() );</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                    <span class="comment">// can&#39;t get there, can&#39;t do anything, skip it</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                stage = DO;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                you.<a class="code" href="classCharacter.html#a1fcff25d37d85299d85a3ba2c1cfc368">set_destination</a>( route, <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a765ca7b3410253c05939a8c1f1999c4a">set_to_null</a>();</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            }</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160; </div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            std::vector&lt;zone_data const *&gt; <a class="code" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a>;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            <span class="keywordtype">bool</span> ignore_contents = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            <span class="comment">// check ignorable zones for ignore_contents enabled</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="classzone__type.html">zone_type</a> : <a class="code" href="clzones_8cpp.html#a1449f0ce4c69aea63eb789e0438c5ebf">ignorable_zone_types</a> ) {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                <span class="comment">// add zones using mgr.get_zones_at</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classzone__data.html">zone_data</a> <span class="keyword">const</span> *zone : mgr.<a class="code" href="classzone__manager.html#a65c00c5dafbe18e45596f23c6f116efc">get_zones_at</a>( src, <a class="code" href="classzone__type.html">zone_type</a>, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                    <a class="code" href="classignorable__options.html">ignorable_options</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classignorable__options.html">ignorable_options</a> &amp;<span class="keyword">&gt;</span>( zone-&gt;get_options() );</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.get_ignore_contents() ) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                        ignore_contents = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                    }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                }</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                <span class="keywordflow">if</span>( ignore_contents ) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                }</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            <span class="comment">// skip tiles in IGNORE zone or with ignore option,</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            <span class="comment">// tiles on fire (to prevent taking out wood off the lit brazier)</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="comment">// and inaccessible furniture, like filled charcoal kiln</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            <span class="keywordflow">if</span>( mgr.<a class="code" href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">has</a>( <a class="code" href="activity__item__handling_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a>, src, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ||</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                ignore_contents ||</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                here.<a class="code" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( src_loc, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a> ) != <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                !here.<a class="code" href="classmap.html#a3014d235b1298cadddb4c412d133ae6b">can_put_items_ter_furn</a>( src_loc ) ) {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            }</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            <span class="comment">//nothing to sort?</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( src_loc ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>();</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="keywordflow">if</span>( ( !vp || vp-&gt;items().empty() ) &amp;&amp; here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src_loc ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;            }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordtype">bool</span> is_adjacent_or_closer = <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), src_loc ) &lt;= 1;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            <span class="comment">// before we move any item, check if player is at or</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            <span class="comment">// adjacent to the loot source tile</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            <span class="keywordflow">if</span>( !is_adjacent_or_closer ) {</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                std::vector&lt;tripoint_bub_ms&gt; route;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                <span class="keywordtype">bool</span> adjacent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                <span class="comment">// get either direct route or route to nearest adjacent tile if</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                <span class="comment">// source tile is impassable</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( src_loc ) ) {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                    route = here.<a class="code" href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">route</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), src_loc, you.<a class="code" href="classCharacter.html#aa7240b1a7ad2b5c556a6aeafc2132d46">get_pathfinding_settings</a>(),</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                        you.<a class="code" href="classCharacter.html#ac432601d2b42dd795be5e600ef66776f">get_path_avoid</a>() );</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                    <span class="comment">// impassable source tile (locker etc.),</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                    <span class="comment">// get route to nearest adjacent tile instead</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                    route = <a class="code" href="activity__item__handling_8cpp.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a>( you, src_loc );</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                    adjacent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                <span class="comment">// check if we found path to source / adjacent tile</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can&#39;t reach the source tile.  Try to sort out loot without a cart.&quot;</span> ),</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                             you.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                }</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160; </div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                <span class="comment">// shorten the route to adjacent tile, if necessary</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                <span class="keywordflow">if</span>( !adjacent ) {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                    route.pop_back();</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                <span class="comment">// set the destination and restart activity after player arrives there</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                <span class="comment">// we don&#39;t need to check for safe mode,</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                <span class="comment">// activity will be restarted only if</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                <span class="comment">// player arrives on destination tile</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                stage = DO;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                you.<a class="code" href="classCharacter.html#a1fcff25d37d85299d85a3ba2c1cfc368">set_destination</a>( route, <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a765ca7b3410253c05939a8c1f1999c4a">set_to_null</a>();</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            stage = DO;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        }</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">if</span>( stage == DO ) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> src( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.placement );</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> src_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( src );</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordtype">bool</span> is_adjacent_or_closer = <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), src_loc ) &lt;= 1;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="comment">// before we move any item, check if player is at or</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <span class="comment">// adjacent to the loot source tile</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="keywordflow">if</span>( !is_adjacent_or_closer ) {</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;            stage = THINK;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <span class="comment">// the boolean in this pair being true indicates the item is from a vehicle storage space</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keyword">auto</span> items = std::vector&lt;std::pair&lt;item *, bool&gt;&gt;();</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vpr = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( src_loc ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>();</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="comment">//Check source for cargo part</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <span class="comment">//map_stack and vehicle_stack are different types but inherit from item_stack</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="comment">// TODO: use one for loop</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="keywordflow">if</span>( vpr ) {</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : vpr-&gt;items() ) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                items.emplace_back( &amp;it, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        }</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src_loc ) ) {</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            items.emplace_back( &amp;it, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        }</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        <span class="keywordtype">bool</span> unload_mods = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="keywordtype">bool</span> unload_molle = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="keywordtype">bool</span> unload_sparse_only = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <span class="keywordtype">int</span> unload_sparse_threshold = 20;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        <span class="keywordtype">bool</span> unload_always = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        std::vector&lt;zone_data const *&gt; <span class="keyword">const</span> <a class="code" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a> = mgr.<a class="code" href="classzone__manager.html#a65c00c5dafbe18e45596f23c6f116efc">get_zones_at</a>( src, <a class="code" href="activity__item__handling_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>,</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) );</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        <span class="comment">// get most open rules out of all stacked zones</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classzone__data.html">zone_data</a> <span class="keyword">const</span> *zone : zones ) {</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            <a class="code" href="classunload__options.html">unload_options</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classunload__options.html">unload_options</a> &amp;<span class="keyword">&gt;</span>( zone-&gt;get_options() );</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;            unload_molle |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_molle();</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            unload_mods |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_mods();</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            unload_sparse_only |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_sparse_only();</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            unload_sparse_threshold |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_sparse_threshold();</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            unload_always |= <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.unload_always();</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="comment">//Skip items that have already been processed</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = items.begin() + num_processed; it &lt; items.end(); ++it ) {</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            ++num_processed;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <a class="code" href="classitem.html">item</a> &amp;thisitem = *it-&gt;first;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            <span class="comment">// skip items not owned by you</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="keywordflow">if</span>( !thisitem.<a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( you, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            <span class="comment">// skip unpickable liquid</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">if</span>( !thisitem.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a> ) ) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            <span class="comment">// skip favorite items in ignore favorite zones</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            <span class="keywordflow">if</span>( thisitem.<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> &amp;&amp; mgr.<a class="code" href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">has</a>( <a class="code" href="activity__item__handling_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a>, src, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ) {</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            <span class="comment">// Only if it&#39;s from a vehicle do we use the vehicle source location information.</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vpr_src = it-&gt;second ? vpr : std::nullopt;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">zone_type_id</a> <span class="keywordtype">id</span> = mgr.<a class="code" href="classzone__manager.html#a84d04a4cd3ab24eaaaa9fcffa391d968">get_near_zone_type_for_item</a>( thisitem, abspos,</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                                    <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) );</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <span class="comment">// checks whether the item is already on correct loot zone or not</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            <span class="comment">// if it is, we can skip such item, if not we move the item to correct pile</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            <span class="comment">// think empty bag on food pile, after you ate the content</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <span class="keywordflow">if</span>( <span class="keywordtype">id</span> != <a class="code" href="activity__item__handling_8cpp.html#a8ddf1157b82b74beca1728cac948f471">zone_type_LOOT_CUSTOM</a> &amp;&amp; mgr.<a class="code" href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">has</a>( <span class="keywordtype">id</span>, src, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ) {</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <span class="keywordflow">if</span>( <span class="keywordtype">id</span> == <a class="code" href="activity__item__handling_8cpp.html#a8ddf1157b82b74beca1728cac948f471">zone_type_LOOT_CUSTOM</a> &amp;&amp;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                mgr.<a class="code" href="classzone__manager.html#a7ad03a72d360f636998d0af4eba0112f">custom_loot_has</a>( src, &amp;thisitem, <a class="code" href="activity__item__handling_8cpp.html#a8ddf1157b82b74beca1728cac948f471">zone_type_LOOT_CUSTOM</a>, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ) {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <span class="keyword">const</span> std::unordered_set&lt;tripoint_abs_ms&gt; dest_set =</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                mgr.<a class="code" href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">get_near</a>( <span class="keywordtype">id</span>, abspos, <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, &amp;thisitem, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) );</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="comment">// if this item isn&#39;t going anywhere and its not sealed</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="comment">// check if it is in a unload zone or a strip corpse zone</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <span class="comment">// then we should unload it and see what is inside</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            <span class="keywordtype">bool</span> move_and_reset = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="keywordtype">bool</span> moved_something = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <span class="keywordflow">if</span>( mgr.<a class="code" href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">has_near</a>( <a class="code" href="activity__item__handling_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>, abspos, 1, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) ||</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                ( mgr.<a class="code" href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">has_near</a>( <a class="code" href="activity__item__handling_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a>, abspos, 1, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) ) &amp;&amp; it-&gt;first-&gt;is_corpse() ) ) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                <span class="keywordflow">if</span>( dest_set.empty() || unload_always ) {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a95d247efd4f6640eb0ee824bb160e7c8">rate_action_unload</a>( *it-&gt;first ) == <a class="code" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a> &amp;&amp;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                        !it-&gt;first-&gt;any_pockets_sealed() ) {</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                        std::unordered_map&lt;itype_id, int&gt; item_counts;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                        <span class="keywordflow">if</span>( unload_sparse_only ) {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                                    item_counts[contained-&gt;typeId()]++;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                                }</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                            }</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                        }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                            <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                            <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                                <span class="keywordflow">if</span>( unload_sparse_only &amp;&amp;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                    item_counts[contained-&gt;typeId()] &gt; unload_sparse_threshold ) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                                <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, vpr_src );</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                                it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                            }</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                        }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                            <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                            <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                                <span class="keywordflow">if</span>( it-&gt;first-&gt;is_ammo_belt() ) {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                                    <span class="keywordflow">if</span>( it-&gt;first-&gt;type-&gt;magazine-&gt;linkage ) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                                        <a class="code" href="classitem.html">item</a> link( *it-&gt;first-&gt;type-&gt;magazine-&gt;linkage, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, contained-&gt;count() );</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                                        <span class="keywordflow">if</span>( vpr_src ) {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                                            vpr_src-&gt;vehicle().add_item( vpr_src-&gt;part(), link );</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                                            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( src_loc, link );</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                                        }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                                    }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                                }</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                                <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, vpr_src );</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                                it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                            }</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                        }</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : it-&gt;first-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) ) {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                            <span class="comment">// no liquids don&#39;t want to spill stuff</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                            <span class="keywordflow">if</span>( !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !contained-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, *contained, contained-&gt;count(), src_loc, src_loc, vpr_src );</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                                it-&gt;first-&gt;remove_item( *contained );</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                            }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                        }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                        moved_something = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160; </div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                    }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                    <span class="comment">// if unloading mods</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                    <span class="keywordflow">if</span>( unload_mods ) {</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                        <span class="comment">// remove each mod, skip irremovable</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : it-&gt;first-&gt;gunmods() ) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                            <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;is_irremovable() ) {</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                            }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                            you.<a class="code" href="classCharacter.html#a4ca4029275194684d9c7f7c2f2b55316">gunmod_remove</a>( *it-&gt;first, *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                            <span class="comment">// need to return so the activity starts</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                        }</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                    <span class="comment">// if unloading molle</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                    <span class="keywordflow">if</span>( unload_molle ) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                        <span class="keywordflow">while</span>( !it-&gt;first-&gt;get_contents().get_added_pockets().empty() ) {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                            <a class="code" href="classitem.html">item</a> removed = it-&gt;first-&gt;<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#ac55902bbff2d7e35351dda96f7c5d63e">remove_pocket</a>( 0 );</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                            <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, removed, 1, src_loc, src_loc, vpr_src );</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                            moved_something = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                        }</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                    }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                    <span class="keywordflow">if</span>( it-&gt;first-&gt;has_flag( <a class="code" href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a> ) &amp;&amp; it-&gt;first-&gt;ammo_remaining() == 0 ) {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                        <span class="keywordflow">if</span>( vpr_src ) {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                            vpr_src-&gt;vehicle().remove_item( vpr_src-&gt;part(), it-&gt;first );</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                            here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( src_loc, it-&gt;first );</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                        }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                        num_processed = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( num_processed - 1, 0 );</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                    }</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                    <span class="comment">// after dumping items go back to start of activity loop</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                    <span class="comment">// so that can re-assess the items in the tile</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                    <span class="comment">// perhaps move the last item first however</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                    <span class="keywordflow">if</span>( unload_always &amp;&amp; moved_something ) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                        move_and_reset = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( moved_something ) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                    }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160; </div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            }</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;dest : dest_set ) {</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> dest_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( dest );</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                <a class="code" href="classunits_1_1quantity.html">units::volume</a> free_space;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                <span class="comment">//Check destination for cargo part</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; ovp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( dest_loc ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>() ) {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                    free_space = ovp-&gt;items().free_volume();</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                    free_space = here.<a class="code" href="classmap.html#a5aed3d4e04f4571603bb532f95f08f47">free_volume</a>( dest_loc );</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                }</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                <span class="comment">// skip tiles with inaccessible furniture, like filled charcoal kiln</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a3014d235b1298cadddb4c412d133ae6b">can_put_items_ter_furn</a>( dest_loc ) ||</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                    <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( dest_loc ).<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() ) &gt;= <a class="code" href="game__constants_8h.html#aee38c8a585c0020fc8ade031dab65393">MAX_ITEM_IN_SQUARE</a> ) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                }</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160; </div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                <span class="comment">// check free space at destination</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                <span class="keywordflow">if</span>( free_space &gt;= thisitem.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, thisitem, thisitem.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>(), src_loc, dest_loc, vpr_src );</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                    <span class="comment">// moved item away from source so decrement</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                    <span class="keywordflow">if</span>( num_processed &gt; 0 ) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                        --num_processed;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                    }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            }</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &lt;= 0 || move_and_reset ) {</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        <span class="comment">//this location is sorted</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        stage = THINK;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160; </div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">// If we got here without restarting the activity, it means we&#39;re done</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s sorted out every item possible.&quot;</span> ), you.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>( <span class="keyword">false</span>, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <a class="code" href="classnpc.html">npc</a> *guy = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( &amp;you );</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        guy-&gt;<a class="code" href="classnpc.html#aefeae3d14dd64533e5bff412e280c2e8">revert_after_activity</a>();</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    }</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a765ca7b3410253c05939a8c1f1999c4a">set_to_null</a>();</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;}</div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a></div><div class="ttdeci">@ INIT</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_ad2d5447f6909e3b1b285e675df5cac54"><div class="ttname"><a href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a></div><div class="ttdeci">std::vector&lt; Point &gt; get_sorted_tiles_by_distance(const Point &amp;center, const Container &amp;tiles)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8h_source.html#l00025">activity_handlers.h:25</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a0313dde9b91b312463fd84bf985b42a6"><div class="ttname"><a href="activity__item__handling_8cpp.html#a0313dde9b91b312463fd84bf985b42a6">ACT_MOVE_LOOT</a></div><div class="ttdeci">static const activity_id ACT_MOVE_LOOT(&quot;ACT_MOVE_LOOT&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a5a86c44ff9433e6f488251b0bc38c0c7"><div class="ttname"><a href="activity__item__handling_8cpp.html#a5a86c44ff9433e6f488251b0bc38c0c7">zone_type_LOOT_UNSORTED</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_UNSORTED(&quot;LOOT_UNSORTED&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a78bb8f77904a7a889ec2de6833852ea3"><div class="ttname"><a href="activity__item__handling_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_IGNORE_FAVORITES(&quot;LOOT_IGNORE_FAVORITES&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a83cf82080b034b59d6392bfcc4974866"><div class="ttname"><a href="activity__item__handling_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a></div><div class="ttdeci">static const zone_type_id zone_type_STRIP_CORPSES(&quot;STRIP_CORPSES&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a8ddf1157b82b74beca1728cac948f471"><div class="ttname"><a href="activity__item__handling_8cpp.html#a8ddf1157b82b74beca1728cac948f471">zone_type_LOOT_CUSTOM</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_CUSTOM(&quot;LOOT_CUSTOM&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a931deb6f55d7516a0fb6b95e4b976678"><div class="ttname"><a href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a></div><div class="ttdeci">static void move_item(Character &amp;you, item &amp;it, const int quantity, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest, const std::optional&lt; vpart_reference &gt; &amp;vpr_src, const activity_id &amp;activity_to_restore=activity_id::NULL_ID())</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00614">activity_item_handling.cpp:614</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_ac5c0a2bd227102b1722a85fbbd9e88f3"><div class="ttname"><a href="activity__item__handling_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a></div><div class="ttdeci">static const zone_type_id zone_type_UNLOAD_ALL(&quot;UNLOAD_ALL&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_ac9f5aa9f4829215e78bae055da0210f2"><div class="ttname"><a href="activity__item__handling_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a></div><div class="ttdeci">static const zone_type_id zone_type_LOOT_IGNORE(&quot;LOOT_IGNORE&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_aee54debfe6c899fd8142a504fe09895e"><div class="ttname"><a href="activity__item__handling_8cpp.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a></div><div class="ttdeci">std::vector&lt; tripoint_bub_ms &gt; route_adjacent(const Character &amp;you, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00660">activity_item_handling.cpp:660</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00829">character.cpp:829</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1fcff25d37d85299d85a3ba2c1cfc368"><div class="ttname"><a href="classCharacter.html#a1fcff25d37d85299d85a3ba2c1cfc368">Character::set_destination</a></div><div class="ttdeci">void set_destination(const std::vector&lt; tripoint_bub_ms &gt; &amp;route, const player_activity &amp;new_destination_activity=player_activity())</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11436">character.cpp:11436</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4ca4029275194684d9c7f7c2f2b55316"><div class="ttname"><a href="classCharacter.html#a4ca4029275194684d9c7f7c2f2b55316">Character::gunmod_remove</a></div><div class="ttdeci">bool gunmod_remove(item &amp;gun, item &amp;mod)</div><div class="ttdoc">Starts activity to remove gunmod after unloading any contained ammo.</div><div class="ttdef"><b>Definition:</b> <a href="character__guns_8cpp_source.html#l00268">character_guns.cpp:268</a></div></div>
<div class="ttc" id="aclassCharacter_html_a597968eba450c923b56a1c9cac1676dc"><div class="ttname"><a href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity</a></div><div class="ttdeci">void cancel_activity()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08983">character.cpp:8983</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a95d247efd4f6640eb0ee824bb160e7c8"><div class="ttname"><a href="classCharacter.html#a95d247efd4f6640eb0ee824bb160e7c8">Character::rate_action_unload</a></div><div class="ttdeci">hint_rating rate_action_unload(const item &amp;it) const</div><div class="ttdoc">Whether a tool or a gun can be unloaded.</div><div class="ttdef"><b>Definition:</b> <a href="character__ammo_8cpp_source.html#l00207">character_ammo.cpp:207</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa7240b1a7ad2b5c556a6aeafc2132d46"><div class="ttname"><a href="classCharacter.html#aa7240b1a7ad2b5c556a6aeafc2132d46">Character::get_pathfinding_settings</a></div><div class="ttdeci">const pathfinding_settings &amp; get_pathfinding_settings() const override</div><div class="ttdoc">Returns settings for pathfinding.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10088">character.cpp:10088</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac432601d2b42dd795be5e600ef66776f"><div class="ttname"><a href="classCharacter.html#ac432601d2b42dd795be5e600ef66776f">Character::get_path_avoid</a></div><div class="ttdeci">std::unordered_set&lt; tripoint &gt; get_path_avoid() const override</div><div class="ttdoc">Returns a set of points we do not want to path through.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10074">character.cpp:10074</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a3261de1530798f5b934a71b9a4e17f5b"><div class="ttname"><a href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">Creature::get_location</a></div><div class="ttdeci">tripoint_abs_ms get_location() const</div><div class="ttdoc">Returns the location of the creature in map square coordinates (the most detailed coordinate system),...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03232">creature.cpp:3232</a></div></div>
<div class="ttc" id="aclassCreature_html_af3d3fb7cfb98cf3c36f0f0681414274a"><div class="ttname"><a href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">Creature::get_moves</a></div><div class="ttdeci">int get_moves() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02004">creature.cpp:2004</a></div></div>
<div class="ttc" id="aclassCreature_html_af7172e571c5c69240d9f71a01fddf035"><div class="ttname"><a href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">Creature::pos_bub</a></div><div class="ttdeci">tripoint_bub_ms pos_bub() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00183">creature.cpp:183</a></div></div>
<div class="ttc" id="aclassCreature_html_af826bfbdc9d7f81a8b9e53775f43d080"><div class="ttname"><a href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">Creature::set_moves</a></div><div class="ttdeci">void set_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02012">creature.cpp:2012</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_aa94b8bd33e85ce94a3634e6e27ab0cdd"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#aa94b8bd33e85ce94a3634e6e27ab0cdd">coords::coord_point_mut::z</a></div><div class="ttdeci">constexpr auto z() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00167">coordinates.h:167</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclassignorable__options_html"><div class="ttname"><a href="classignorable__options.html">ignorable_options</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00213">clzones.h:214</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac55902bbff2d7e35351dda96f7c5d63e"><div class="ttname"><a href="classitem__contents.html#ac55902bbff2d7e35351dda96f7c5d63e">item_contents::remove_pocket</a></div><div class="ttdeci">item remove_pocket(int index)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02138">item_contents.cpp:2138</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a09718022e82be5bc5dd6d84463521751"><div class="ttname"><a href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">item_stack::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00014">item_stack.cpp:14</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00019">item_stack.cpp:19</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08623">item.cpp:8623</a></div></div>
<div class="ttc" id="aclassitem_html_a05c24ca1052a7a8cb9fd314acdb49f40"><div class="ttname"><a href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">item::is_favorite</a></div><div class="ttdeci">bool is_favorite</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03213">item.h:3213</a></div></div>
<div class="ttc" id="aclassitem_html_a0b35b9066ad71987b77727af45d96059"><div class="ttname"><a href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02116">item.cpp:2116</a></div></div>
<div class="ttc" id="aclassitem_html_a10898a02e2696873c90e6b9ea3aca7bc"><div class="ttname"><a href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a></div><div class="ttdeci">std::list&lt; const item * &gt; all_items_top() const</div><div class="ttdoc">returns a list of pointers to all top-level items that are not mods</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14951">item.cpp:14951</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_af486ddb23bd7e254cc07ef3ba1ba846d"><div class="ttname"><a href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a></div><div class="ttdeci">bool made_of_from_type(phase_id phase) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09268">item.cpp:9268</a></div></div>
<div class="ttc" id="aclassitem_html_afd9fcc8f19476c95071b72c300f47ad1"><div class="ttname"><a href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">item::get_contents</a></div><div class="ttdeci">item_contents &amp; get_contents()</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03165">item.h:3165</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a1cc29653b8305e7192311c05a0bd4c99"><div class="ttname"><a href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">map::bub_from_abs</a></div><div class="ttdeci">tripoint_bub_ms bub_from_abs(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09647">map.cpp:9647</a></div></div>
<div class="ttc" id="aclassmap_html_a3014d235b1298cadddb4c412d133ae6b"><div class="ttname"><a href="classmap.html#a3014d235b1298cadddb4c412d133ae6b">map::can_put_items_ter_furn</a></div><div class="ttdeci">bool can_put_items_ter_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03097">map.cpp:3097</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06516">map.cpp:6516</a></div></div>
<div class="ttc" id="aclassmap_html_a46608709f68358365d0734b1063fed73"><div class="ttname"><a href="classmap.html#a46608709f68358365d0734b1063fed73">map::inbounds</a></div><div class="ttdeci">bool inbounds(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09057">map.cpp:9057</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmap_html_a5aed3d4e04f4571603bb532f95f08f47"><div class="ttname"><a href="classmap.html#a5aed3d4e04f4571603bb532f95f08f47">map::free_volume</a></div><div class="ttdeci">units::volume free_volume(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05156">map.cpp:5156</a></div></div>
<div class="ttc" id="aclassmap_html_a8a6e17bf2b027fe957361bb7c5d857ce"><div class="ttname"><a href="classmap.html#a8a6e17bf2b027fe957361bb7c5d857ce">map::check_vehicle_zones</a></div><div class="ttdeci">bool check_vehicle_zones(int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01191">map.cpp:1191</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_ab075f4bc498a7cbf386b8f53b86b017d"><div class="ttname"><a href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, const map_stack::const_iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05001">map.cpp:5001</a></div></div>
<div class="ttc" id="aclassmap_html_ab2a7030c1e990957e11ae52b58ad7056"><div class="ttname"><a href="classmap.html#ab2a7030c1e990957e11ae52b58ad7056">map::get_abs_sub</a></div><div class="ttdeci">tripoint_abs_sm get_abs_sub() const</div><div class="ttdoc">return abs_sub</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09663">map.cpp:9663</a></div></div>
<div class="ttc" id="aclassmap_html_acd464679b3bb514e2568ffdb3260ef0c"><div class="ttname"><a href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">map::route</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; route(const tripoint &amp;f, const tripoint &amp;t, const pathfinding_settings &amp;settings, const std::unordered_set&lt; tripoint &gt; &amp;pre_closed={{ }}) const</div><div class="ttdoc">Calculate the best path using A*.</div><div class="ttdef"><b>Definition:</b> <a href="pathfinding_8cpp_source.html#l00192">pathfinding.cpp:192</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_aefeae3d14dd64533e5bff412e280c2e8"><div class="ttname"><a href="classnpc.html#aefeae3d14dd64533e5bff412e280c2e8">npc::revert_after_activity</a></div><div class="ttdeci">void revert_after_activity()</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00927">npc.cpp:927</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_acf1ddbf380ff79f8fd707a0453b1608b"><div class="ttname"><a href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">optional_vpart_position::cargo</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; cargo() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02710">vehicle.cpp:2710</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a765ca7b3410253c05939a8c1f1999c4a"><div class="ttname"><a href="classplayer__activity.html#a765ca7b3410253c05939a8c1f1999c4a">player_activity::set_to_null</a></div><div class="ttdeci">void set_to_null()</div><div class="ttdoc">This replaces the former usage act.type = ACT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8cpp_source.html#l00091">player_activity.cpp:91</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; zone_type &gt;</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassunload__options_html"><div class="ttname"><a href="classunload__options.html">unload_options</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00282">clzones.h:283</a></div></div>
<div class="ttc" id="aclasszone__data_html"><div class="ttname"><a href="classzone__data.html">zone_data</a></div><div class="ttdoc">These are zones the player can designate.</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00348">clzones.h:349</a></div></div>
<div class="ttc" id="aclasszone__manager_html"><div class="ttname"><a href="classzone__manager.html">zone_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00512">clzones.h:513</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a48a7258f14361522cf75baa31967a6c8"><div class="ttname"><a href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">zone_manager::get_near</a></div><div class="ttdeci">std::unordered_set&lt; tripoint_abs_ms &gt; get_near(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const item *it=nullptr, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01134">clzones.cpp:1134</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a54609d51d21bd8f370ee8b59525eb750"><div class="ttname"><a href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a></div><div class="ttdeci">static zone_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00550">clzones.h:550</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a65c00c5dafbe18e45596f23c6f116efc"><div class="ttname"><a href="classzone__manager.html#a65c00c5dafbe18e45596f23c6f116efc">zone_manager::get_zones_at</a></div><div class="ttdeci">std::vector&lt; zone_data const * &gt; get_zones_at(const tripoint_abs_ms &amp;where, const zone_type_id &amp;type, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01085">clzones.cpp:1085</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a7ad03a72d360f636998d0af4eba0112f"><div class="ttname"><a href="classzone__manager.html#a7ad03a72d360f636998d0af4eba0112f">zone_manager::custom_loot_has</a></div><div class="ttdeci">bool custom_loot_has(const tripoint_abs_ms &amp;where, const item *it, const zone_type_id &amp;ztype, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01104">clzones.cpp:1104</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a815445722eb24bf8e8f2af3ec9f32a99"><div class="ttname"><a href="classzone__manager.html#a815445722eb24bf8e8f2af3ec9f32a99">zone_manager::cache_vzones</a></div><div class="ttdeci">void cache_vzones(map *pmap=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00909">clzones.cpp:909</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a84d04a4cd3ab24eaaaa9fcffa391d968"><div class="ttname"><a href="classzone__manager.html#a84d04a4cd3ab24eaaaa9fcffa391d968">zone_manager::get_near_zone_type_for_item</a></div><div class="ttdeci">zone_type_id get_near_zone_type_for_item(const item &amp;it, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01202">clzones.cpp:1202</a></div></div>
<div class="ttc" id="aclasszone__manager_html_ad606e7d59e9aa0ab5b0fca7e46455345"><div class="ttname"><a href="classzone__manager.html#ad606e7d59e9aa0ab5b0fca7e46455345">zone_manager::has</a></div><div class="ttdeci">bool has(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01003">clzones.cpp:1003</a></div></div>
<div class="ttc" id="aclasszone__manager_html_aff01780bd615c3b526e071efdce01b70"><div class="ttname"><a href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">zone_manager::has_near</a></div><div class="ttdeci">bool has_near(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01011">clzones.cpp:1011</a></div></div>
<div class="ttc" id="aclasszone__type_html"><div class="ttname"><a href="classzone__type.html">zone_type</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00041">clzones.h:42</a></div></div>
<div class="ttc" id="aclzones_8cpp_html_a1449f0ce4c69aea63eb789e0438c5ebf"><div class="ttname"><a href="clzones_8cpp.html#a1449f0ce4c69aea63eb789e0438c5ebf">ignorable_zone_types</a></div><div class="ttdeci">const std::vector&lt; zone_type_id &gt; ignorable_zone_types</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00083">clzones.cpp:83</a></div></div>
<div class="ttc" id="aclzones_8h_html_a68d414e1c79f68a26edabb0ee1433e4b"><div class="ttname"><a href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a></div><div class="ttdeci">constexpr int ACTIVITY_SEARCH_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00037">clzones.h:37</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a9d7b6c83d7cf9846d5f1b56e02d88268"><div class="ttname"><a href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a></div><div class="ttdeci">int square_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00755">coordinates.h:755</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a></div><div class="ttdeci">@ GAS</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a></div><div class="ttdeci">@ SOLID</div></div>
<div class="ttc" id="afield__type_8cpp_html_a0090428c1f6724209c133c6b04b037cd"><div class="ttname"><a href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a></div><div class="ttdeci">const field_type_str_id fd_fire(&quot;fd_fire&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a413a7d8509ce1b7ded1e24bcba4ad304"><div class="ttname"><a href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a></div><div class="ttdeci">const flag_id flag_MAG_DESTROY(&quot;MAG_DESTROY&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aee38c8a585c0020fc8ade031dab65393"><div class="ttname"><a href="game__constants_8h.html#aee38c8a585c0020fc8ade031dab65393">MAX_ITEM_IN_SQUARE</a></div><div class="ttdeci">constexpr int MAX_ITEM_IN_SQUARE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00028">game_constants.h:28</a></div></div>
<div class="ttc" id="aitem_8h_html_a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8"><div class="ttname"><a href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a></div><div class="ttdeci">@ good</div><div class="ttdoc">Item permits this action.</div></div>
<div class="ttc" id="amapgen_8h_html_afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5"><div class="ttname"><a href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">mapgen_phase::zones</a></div><div class="ttdeci">@ zones</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af0e23485ab96118ed88e3e573b597636"><div class="ttname"><a href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">PATH_INFO::options</a></div><div class="ttdeci">cata_path options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00354">path_info.cpp:354</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02activity__item__handling_8cpp_03_html_aab8b18d8c76720082dd1cc7ecff939e5"><div class="ttname"><a href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">anonymous_namespace{activity_item_handling.cpp}::_fac_id</a></div><div class="ttdeci">faction_id _fac_id(Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00160">activity_item_handling.cpp:160</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a></div><div class="ttdeci">@ MAGAZINE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a></div><div class="ttdeci">@ CONTAINER</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00160">anonymous_namespace{activity_item_handling.cpp}::_fac_id()</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="activity__item__handling_8cpp.html#a0313dde9b91b312463fd84bf985b42a6">ACT_MOVE_LOOT</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="clzones_8h_source.html#l00037">ACTIVITY_SEARCH_DISTANCE</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14951">item::all_items_top()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l09662">item::any_pockets_sealed()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="map_8cpp_source.html#l09647">map::bub_from_abs()</a>, <a class="el" href="clzones_8cpp_source.html#l00909">zone_manager::cache_vzones()</a>, <a class="el" href="map_8cpp_source.html#l03097">map::can_put_items_ter_furn()</a>, <a class="el" href="character_8cpp_source.html#l08983">Character::cancel_activity()</a>, <a class="el" href="vehicle_8cpp_source.html#l02710">optional_vpart_position::cargo()</a>, <a class="el" href="map_8cpp_source.html#l01191">map::check_vehicle_zones()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="clzones_8cpp_source.html#l01104">zone_manager::custom_loot_has()</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="flag_8cpp.html#a413a7d8509ce1b7ded1e24bcba4ad304">flag_MAG_DESTROY</a>, <a class="el" href="map_8cpp_source.html#l05156">map::free_volume()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">GAS</a>, <a class="el" href="map_8cpp_source.html#l09663">map::get_abs_sub()</a>, <a class="el" href="item__contents_8cpp_source.html#l02107">item_contents::get_added_pockets()</a>, <a class="el" href="item_8h_source.html#l03165">item::get_contents()</a>, <a class="el" href="map_8cpp_source.html#l06516">map::get_field()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="clzones_8h_source.html#l00550">zone_manager::get_manager()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="clzones_8cpp_source.html#l01134">zone_manager::get_near()</a>, <a class="el" href="clzones_8cpp_source.html#l01202">zone_manager::get_near_zone_type_for_item()</a>, <a class="el" href="character_8cpp_source.html#l10074">Character::get_path_avoid()</a>, <a class="el" href="character_8cpp_source.html#l10088">Character::get_pathfinding_settings()</a>, <a class="el" href="activity__handlers_8h_source.html#l00025">get_sorted_tiles_by_distance()</a>, <a class="el" href="clzones_8cpp_source.html#l01085">zone_manager::get_zones_at()</a>, <a class="el" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">good</a>, <a class="el" href="character__guns_8cpp_source.html#l00268">Character::gunmod_remove()</a>, <a class="el" href="item_8cpp_source.html#l11217">item::gunmods()</a>, <a class="el" href="clzones_8cpp_source.html#l01003">zone_manager::has()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="clzones_8cpp_source.html#l01011">zone_manager::has_near()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="clzones_8cpp_source.html#l00083">ignorable_zone_types</a>, <a class="el" href="map_8cpp_source.html#l09057">map::inbounds()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a>, <a class="el" href="item_8cpp_source.html#l09460">item::is_ammo_belt()</a>, <a class="el" href="item_8cpp_source.html#l09526">item::is_corpse()</a>, <a class="el" href="item_8h_source.html#l03213">item::is_favorite</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="item_8cpp_source.html#l02116">item::is_owned_by()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l09268">item::made_of_from_type()</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">MAGAZINE</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="game__constants_8h_source.html#l00028">MAX_ITEM_IN_SQUARE</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00614">move_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="character__ammo_8cpp_source.html#l00207">Character::rate_action_unload()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, <a class="el" href="visitable_8cpp_source.html#l00543">visitable::remove_item()</a>, <a class="el" href="item__contents_8cpp_source.html#l02138">item_contents::remove_pocket()</a>, <a class="el" href="npc_8cpp_source.html#l00927">npc::revert_after_activity()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00192">map::route()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00660">route_adjacent()</a>, <a class="el" href="character_8cpp_source.html#l11436">Character::set_destination()</a>, <a class="el" href="creature_8cpp_source.html#l02012">Creature::set_moves()</a>, <a class="el" href="player__activity_8cpp_source.html#l00091">player_activity::set_to_null()</a>, <a class="el" href="item__stack_8cpp_source.html#l00014">item_stack::size()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">SOLID</a>, <a class="el" href="coordinates_8h_source.html#l00755">square_dist()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>, <a class="el" href="coordinates_8h_source.html#l00167">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::z()</a>, <a class="el" href="activity__item__handling_8cpp.html#a8ddf1157b82b74beca1728cac948f471">zone_type_LOOT_CUSTOM</a>, <a class="el" href="activity__item__handling_8cpp.html#ac9f5aa9f4829215e78bae055da0210f2">zone_type_LOOT_IGNORE</a>, <a class="el" href="activity__item__handling_8cpp.html#a78bb8f77904a7a889ec2de6833852ea3">zone_type_LOOT_IGNORE_FAVORITES</a>, <a class="el" href="activity__item__handling_8cpp.html#a5a86c44ff9433e6f488251b0bc38c0c7">zone_type_LOOT_UNSORTED</a>, <a class="el" href="activity__item__handling_8cpp.html#a83cf82080b034b59d6392bfcc4974866">zone_type_STRIP_CORPSES</a>, <a class="el" href="activity__item__handling_8cpp.html#ac5c0a2bd227102b1722a85fbbd9e88f3">zone_type_UNLOAD_ALL</a>, and <a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06ea26f94136f5db8afd4e9df1e512f7fdc5">zones</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02811">activity_handlers::move_loot_do_turn()</a>.</p>

</div>
</div>
<a id="af3d7cc8134b8216267135a66883fd943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d7cc8134b8216267135a66883fd943">&#9670;&nbsp;</a></span>butcher_time_to_cut()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int butcher_time_to_cut </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>corpse_item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1">butcher_type</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__handlers_8cpp_source.html#l00676">676</a> of file <a class="el" href="activity__handlers_8cpp_source.html">activity_handlers.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> &amp;<a class="code" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f">corpse</a> = *corpse_item.<a class="code" href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">get_mtype</a>();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> factor = you.<a class="code" href="classCharacter.html#a7e7d7abe0c0968dc880ce005e82bb225">max_quality</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">butcher_type::DISSECT</a> ? <a class="code" href="activity__handlers_8cpp.html#a79102cccd879186fb2a3e9a0443c604d">qual_CUT_FINE</a> : <a class="code" href="activity__handlers_8cpp.html#a3fc86f1d1632ea68f1f84cb278dc1674">qual_BUTCHER</a>,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                        <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> );</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">int</span> time_to_cut;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f">corpse</a>.size ) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// Time (roughly) in turns to cut up the corpse</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a>:</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            time_to_cut = 150;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a>:</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            time_to_cut = 300;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">creature_size::medium</a>:</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            time_to_cut = 450;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a>:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            time_to_cut = 600;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a>:</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            time_to_cut = 1800;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Invalid creature_size on %s&quot;</span>, <a class="code" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f">corpse</a>.nname() );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            time_to_cut = 450; <span class="comment">// default to medium</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// At factor 0, base 100 time_to_cut remains 100. At factor 50, it&#39;s 50 , at factor 75 it&#39;s 25</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    time_to_cut *= <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 25, 100 - factor );</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945">butcher_type::QUICK</a>:</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4">butcher_type::BLEED</a>:</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1">butcher_type::FULL</a>:</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">if</span>( !corpse_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a> ) || corpse_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a> ) ) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                time_to_cut *= 6;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                time_to_cut *= 4;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19">butcher_type::FIELD_DRESS</a>:</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60">butcher_type::SKIN</a>:</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            time_to_cut *= 2;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e">butcher_type::QUARTER</a>:</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            time_to_cut /= 4;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">if</span>( time_to_cut &lt; 1200 ) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                time_to_cut = 1200;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676">butcher_type::DISMEMBER</a>:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            time_to_cut /= 10;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            <span class="keywordflow">if</span>( time_to_cut &lt; 600 ) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                time_to_cut = 600;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">butcher_type::DISSECT</a>:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            time_to_cut *= 6;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026">butcher_type::NUM_TYPES</a>:</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Invalid butcher_type&quot;</span> );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span>( corpse_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a> ) ) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        time_to_cut /= 4;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    time_to_cut *= ( 1.0f - ( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a080121ea19d921b4045567a96a32e149">get_num_crafting_helpers</a>( 3 ) / 10.0f ) );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> time_to_cut;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="ttc" id="aactive__item__cache_8h_html_acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f"><div class="ttname"><a href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f">special_item_type::corpse</a></div><div class="ttdeci">@ corpse</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_a3fc86f1d1632ea68f1f84cb278dc1674"><div class="ttname"><a href="activity__handlers_8cpp.html#a3fc86f1d1632ea68f1f84cb278dc1674">qual_BUTCHER</a></div><div class="ttdeci">static const quality_id qual_BUTCHER(&quot;BUTCHER&quot;)</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_a79102cccd879186fb2a3e9a0443c604d"><div class="ttname"><a href="activity__handlers_8cpp.html#a79102cccd879186fb2a3e9a0443c604d">qual_CUT_FINE</a></div><div class="ttdeci">static const quality_id qual_CUT_FINE(&quot;CUT_FINE&quot;)</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1"><div class="ttname"><a href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1">butcher_type::FULL</a></div><div class="ttdeci">@ FULL</div></div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a080121ea19d921b4045567a96a32e149"><div class="ttname"><a href="classCharacter.html#a080121ea19d921b4045567a96a32e149">Character::get_num_crafting_helpers</a></div><div class="ttdeci">int get_num_crafting_helpers(int max) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00213">character_crafting.cpp:213</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7e7d7abe0c0968dc880ce005e82bb225"><div class="ttname"><a href="classCharacter.html#a7e7d7abe0c0968dc880ce005e82bb225">Character::max_quality</a></div><div class="ttdeci">int max_quality(const quality_id &amp;qual) const override</div><div class="ttdoc">Return maximum tool quality level provided by instance or INT_MIN if not found.</div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a66ba4b05a8ea5f9f15e4694027235aae"><div class="ttname"><a href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">item::get_mtype</a></div><div class="ttdeci">const mtype * get_mtype() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09531">item.cpp:9531</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">creature_size::medium</a></div><div class="ttdeci">@ medium</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a></div><div class="ttdeci">@ large</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a></div><div class="ttdeci">@ huge</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a5095a4bb5199bf4c0981de000e15b8bd"><div class="ttname"><a href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a></div><div class="ttdeci">const flag_id flag_FIELD_DRESS_FAILED(&quot;FIELD_DRESS_FAILED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_acaf5771186b622ceab78decadc42556f"><div class="ttname"><a href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a></div><div class="ttdeci">const flag_id flag_QUARTERED(&quot;QUARTERED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_add083f5a0fd286f98a1b027d93eccbac"><div class="ttname"><a href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a></div><div class="ttdeci">const flag_id flag_FIELD_DRESS(&quot;FIELD_DRESS&quot;)</div></div>
<div class="ttc" id="agame__constants_8h_html_afec5544a31d4183805cff025dd84b5f4"><div class="ttname"><a href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a></div><div class="ttdeci">constexpr int PICKUP_RANGE</div><div class="ttdoc">Items on the map with at most this distance to the player are considered available for crafting,...</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00070">game_constants.h:70</a></div></div>
<div class="ttc" id="astructmtype_html"><div class="ttname"><a href="structmtype.html">mtype</a></div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00284">mtype.h:284</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a3231652c784c69bcf1504d6b0439fbb4">BLEED</a>, <a class="el" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5ae89196f1cb52069efe1f4bf0942bcb7f">corpse</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aed52d52f4dad044645ddfc2d25594676">DISMEMBER</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1af734ba3ddbf22f68f41ab312d3bbe00c">DISSECT</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a255ca9fde7704b792f84cca0361fbc19">FIELD_DRESS</a>, <a class="el" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a>, <a class="el" href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a>, <a class="el" href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1aba7de5bc6888294e5884b024a4c894f1">FULL</a>, <a class="el" href="item_8cpp_source.html#l09531">item::get_mtype()</a>, <a class="el" href="character__crafting_8cpp_source.html#l00213">Character::get_num_crafting_helpers()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">huge</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="classCharacter.html#a7e7d7abe0c0968dc880ce005e82bb225">Character::max_quality()</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a34b297af0d2f4a6024a59d0d3a318026">NUM_TYPES</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="activity__handlers_8cpp.html#a3fc86f1d1632ea68f1f84cb278dc1674">qual_BUTCHER</a>, <a class="el" href="activity__handlers_8cpp.html#a79102cccd879186fb2a3e9a0443c604d">qual_CUT_FINE</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a2127749533f087678c2ff775d060024e">QUARTER</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a7c77dcebcec67792afc15f80522fd945">QUICK</a>, <a class="el" href="activity__handlers_8h.html#a9c785a0b9eb129639f10c4d6f48b49c1a017ef937cce02f08a30f875ebcb80a60">SKIN</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a>, and <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">tiny</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l09448">butcher_submenu()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l00429">set_up_butchery()</a>.</p>

</div>
</div>
<a id="a4df266c468d2e586fd85a300503d0230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4df266c468d2e586fd85a300503d0230">&#9670;&nbsp;</a></span>drop_on_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classitem__location.html">item_location</a>&gt; drop_on_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l00339">339</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span>( items.empty() ) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> std::string ter_name = here.<a class="code" href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">name</a>( where );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_move_there = here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( where );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a>( items ) ) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it = items.front();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dropcount = items.size() * it.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keyword">const</span> std::string it_name = it.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( dropcount );</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">switch</span>( reason ) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a>:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="keywordflow">if</span>( can_move_there ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;You drop your %1$s on the %2$s.&quot;</span>,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                   <span class="stringliteral">&quot;You drop your %1$s on the %2$s.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;&lt;npcname&gt; drops their %1$s on the %2$s.&quot;</span>,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                   <span class="stringliteral">&quot;&lt;npcname&gt; drops their %1$s on the %2$s.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        it_name, ter_name</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                        <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;You put your %1$s in the %2$s.&quot;</span>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                   <span class="stringliteral">&quot;You put your %1$s in the %2$s.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;&lt;npcname&gt; puts their %1$s in the %2$s.&quot;</span>,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                   <span class="stringliteral">&quot;&lt;npcname&gt; puts their %1$s in the %2$s.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        it_name, ter_name</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">item_drop_reason::too_large</a>:</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;There&#39;s no room in your inventory for the %s, so you drop it.&quot;</span>,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                               <span class="stringliteral">&quot;There&#39;s no room in your inventory for the %s, so you drop them.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    it_name</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">item_drop_reason::too_heavy</a>:</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;The %s is too heavy to carry, so you drop it.&quot;</span>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                               <span class="stringliteral">&quot;The %s is too heavy to carry, so you drop them.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    it_name</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                );</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">item_drop_reason::tumbling</a>:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                    <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Your %1$s tumbles to the %2$s.&quot;</span>,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                               <span class="stringliteral">&quot;Your %1$s tumble to the %2$s.&quot;</span>, dropcount ),</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                    it_name, ter_name</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_NOTES_DROPPED_FAVORITES&quot;</span> ) &amp;&amp; it.<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> your_pos = you.<a class="code" href="classCreature.html#a14ecbd8f044628463354090421a805b4">global_omt_location</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#aac77ae4ff8b1cb0f8f51bcf0497d40af">has_note</a>( your_pos ) ) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a3d05210f2ba34eb4e4908d4791691d84">add_note</a>( your_pos, it.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a3d05210f2ba34eb4e4908d4791691d84">add_note</a>( your_pos, <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a2508c1962e125f20509e6e5c13cf298f">note</a>( your_pos ) + <span class="stringliteral">&quot;; &quot;</span> + it.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">switch</span>( reason ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a>:</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="keywordflow">if</span>( can_move_there ) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drop several items on the %s.&quot;</span> ),</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; drops several items on the %s.&quot;</span> ),</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                        ter_name</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You put several items in the %s.&quot;</span> ),</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; puts several items in the %s.&quot;</span> ),</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        ter_name</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    );</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">item_drop_reason::too_large</a>:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">item_drop_reason::too_heavy</a>:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">item_drop_reason::tumbling</a>:</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Some items tumble to the %s.&quot;</span> ), ter_name );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    std::vector&lt;item_location&gt; items_dropped;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;dropped_item = here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( where, it );</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        items_dropped.emplace_back( <a class="code" href="classmap__cursor.html">map_cursor</a>( where.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() ), &amp;dropped_item );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="classitem.html">item</a>( it ).<a class="code" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">handle_pickup_ownership</a>( you );</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    you.<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> items_dropped;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_ad519af899571e96094ca0cd2e286b38b"><div class="ttname"><a href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a></div><div class="ttdeci">static bool same_type(const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00186">activity_item_handling.cpp:186</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCreature_html_a14ecbd8f044628463354090421a805b4"><div class="ttname"><a href="classCreature.html#a14ecbd8f044628463354090421a805b4">Creature::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdoc">Returns the location of the creature in global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03242">creature.cpp:3242</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06855">item.cpp:6855</a></div></div>
<div class="ttc" id="aclassitem_html_a9113a7b590ad5a3d343de910de33aff2"><div class="ttname"><a href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">item::handle_pickup_ownership</a></div><div class="ttdeci">void handle_pickup_ownership(Character &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06595">item.cpp:6595</a></div></div>
<div class="ttc" id="aclassmap__cursor_html"><div class="ttname"><a href="classmap__cursor.html">map_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8h_source.html#l00015">map_selector.h:16</a></div></div>
<div class="ttc" id="aclassmap_html_a148fb7ddc87ffb1da97dd33e0529c983"><div class="ttname"><a href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">map::name</a></div><div class="ttdeci">std::string name(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01684">map.cpp:1684</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a2508c1962e125f20509e6e5c13cf298f"><div class="ttname"><a href="classovermapbuffer.html#a2508c1962e125f20509e6e5c13cf298f">overmapbuffer::note</a></div><div class="ttdeci">const std::string &amp; note(const tripoint_abs_omt &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00391">overmapbuffer.cpp:391</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a3d05210f2ba34eb4e4908d4791691d84"><div class="ttname"><a href="classovermapbuffer.html#a3d05210f2ba34eb4e4908d4791691d84">overmapbuffer::add_note</a></div><div class="ttdeci">void add_note(const tripoint_abs_omt &amp;, const std::string &amp;message)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00258">overmapbuffer.cpp:258</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aac77ae4ff8b1cb0f8f51bcf0497d40af"><div class="ttname"><a href="classovermapbuffer.html#aac77ae4ff8b1cb0f8f51bcf0497d40af">overmapbuffer::has_note</a></div><div class="ttdeci">bool has_note(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Uses global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00375">overmapbuffer.cpp:375</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="atranslations_8h_html_a45dd4e3da9b83845bcd1c2d8e80cf802"><div class="ttname"><a href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a></div><div class="ttdeci">#define n_gettext(STRING1, STRING2, COUNT)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00091">translations.h:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00258">overmapbuffer::add_note()</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">deliberate</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l03242">Creature::global_omt_location()</a>, <a class="el" href="item_8cpp_source.html#l06595">item::handle_pickup_ownership()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00375">overmapbuffer::has_note()</a>, <a class="el" href="item_8h_source.html#l03213">item::is_favorite</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="map_8cpp_source.html#l01684">map::name()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00391">overmapbuffer::note()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00186">same_type()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42caff8308727957bfea9d0a143e9fc77e5e">too_heavy</a>, <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca7a45a1d1bfe36a2c1205fbd1b450d80a">too_large</a>, and <a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca5d678b593bf07d40cb146abdb74e5d51">tumbling</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l00885">butchery_drops_harvest()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02330">move_items_activity_actor::do_turn()</a>, <a class="el" href="npctalk__funcs_8cpp_source.html#l01046">talk_function::player_weapon_drop()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00448">put_into_vehicle_or_drop()</a>.</p>

</div>
</div>
<a id="a92427c4a20720f251807f7e70db0640b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92427c4a20720f251807f7e70db0640b">&#9670;&nbsp;</a></span>generic_multi_activity_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool generic_multi_activity_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_only</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l03153">3153</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;{</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> abspos = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="comment">// NOLINTNEXTLINE(performance-unnecessary-copy-initialization)</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    <a class="code" href="classstring__id.html">activity_id</a> activity_to_restore = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <span class="comment">// Nuke the current activity, leaving the backlog alone</span></div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <span class="keywordflow">if</span>( !check_only ) {</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;        you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a> = <a class="code" href="classplayer__activity.html">player_activity</a>();</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    }</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <span class="comment">// now we setup the target spots based on which activity is occurring</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <span class="comment">// the set of target work spots - potentially after we have fetched required tools.</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    std::unordered_set&lt;tripoint_abs_ms&gt; src_set =</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;        <a class="code" href="activity__item__handling_8cpp.html#a768121987a0255885a7613f2dfcdaba7">generic_multi_activity_locations</a>( you, activity_to_restore );</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <span class="comment">// now we have our final set of points</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    std::vector&lt;tripoint_abs_ms&gt; src_sorted = <a class="code" href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a>( abspos, src_set );</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="comment">// now loop through the work-spot tiles and judge whether its worth traveling to it yet</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <span class="comment">// or if we need to fetch something first.</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160; </div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <span class="comment">// check: if a fetch act was assigned but no need to do that anymore, restore our task</span></div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="comment">// may cause infinite loop if something goes wrong</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="comment">// Maybe it makes more harm than good? I don&#39;t know.</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="keywordflow">if</span>( activity_to_restore == <a class="code" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>( <a class="code" href="activity__item__handling_8cpp.html#a36a6f3fc9f4495cb137954996c82ab6a">ACT_FETCH_REQUIRED</a> ) &amp;&amp; src_sorted.empty() ) {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <span class="comment">// remind what you failed to fetch</span></div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        <span class="keywordflow">if</span>( !check_only &amp;&amp; !you.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.empty() ) {</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            <a class="code" href="classplayer__activity.html">player_activity</a> &amp;act_prev = you.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.front();</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;            <span class="keywordflow">if</span>( !act_prev.<a class="code" href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">str_values</a>.empty() &amp;&amp; you.<a class="code" href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">as_npc</a>() ) {</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                you.<a class="code" href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">as_npc</a>()-&gt;<a class="code" href="classnpc.html#abb6a5aefceeaa114ad6099c4b37060af">job</a>.<a class="code" href="classjob__data.html#a74adef0b6a154ba1114e84e70fc93872">fetch_history</a>[act_prev.<a class="code" href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">str_values</a>.back()] = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            }</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        }</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;src : src_sorted ) {</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp;src_loc = here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( src );</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( src_loc ) &amp;&amp; !check_only ) {</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                <span class="comment">// p is implicitly an NPC that has been moved off the map, so reset the activity</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                <span class="comment">// and unload them</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( activity_to_restore );</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                you.<a class="code" href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">set_moves</a>( 0 );</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reload_npcs();</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;            }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;            <span class="keyword">const</span> std::vector&lt;tripoint_bub_ms&gt; route = <a class="code" href="activity__item__handling_8cpp.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a>( you, src_loc );</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;            <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                <span class="comment">// can&#39;t get there, can&#39;t do anything, skip it</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;            }</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;            you.<a class="code" href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">set_moves</a>( 0 );</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            you.<a class="code" href="classCharacter.html#a1fcff25d37d85299d85a3ba2c1cfc368">set_destination</a>( route, <a class="code" href="classplayer__activity.html">player_activity</a>( activity_to_restore ) );</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        }</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <a class="code" href="structactivity__reason__info.html">activity_reason_info</a> act_info = <a class="code" href="activity__item__handling_8cpp.html#a79f7da86e850dc5776f39b6907d25d08">can_do_activity_there</a>( activity_to_restore, you,</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                                        src_loc, <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a> );</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <span class="comment">// see activity_handlers.h enum for requirement_check_result</span></div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        <span class="keyword">const</span> <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2">requirement_check_result</a> req_res = <a class="code" href="activity__item__handling_8cpp.html#a8cccae9a646f9b9764fe3ebee9229b5d">generic_multi_activity_check_requirement</a>(</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                    you, activity_to_restore, act_info, src, src_loc, src_set, check_only );</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        <span class="keywordflow">if</span>( req_res == <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11">requirement_check_result::SKIP_LOCATION</a> ) {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( req_res == <a class="code" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf">requirement_check_result::RETURN_EARLY</a> ) {</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;        }</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        std::vector&lt;tripoint_bub_ms&gt; route_workbench;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="keywordflow">if</span>( activity_to_restore == <a class="code" href="activity__item__handling_8cpp.html#a511fe586e9d302639c9c2a5350b625a1">ACT_MULTIPLE_CRAFT</a> || activity_to_restore == <a class="code" href="activity__item__handling_8cpp.html#a0bf80913bbfc0d330bd9190438a857c2">ACT_MULTIPLE_DIS</a> ) {</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <span class="comment">// returns empty vector if we can&#39;t reach best tile</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <span class="comment">// or we are already on the best tile</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            route_workbench = <a class="code" href="activity__item__handling_8cpp.html#a98a715a8ba96e7eabffe56d9e4f07ce0">route_best_workbench</a>( you, src_loc );</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        }</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        <span class="comment">// If we are doing disassemble we need to stand on the &quot;best&quot; tile</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), src_loc ) &gt; 1 || !route_workbench.empty() ) {</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            std::vector&lt;tripoint_bub_ms&gt; route;</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <span class="comment">// find best workbench if possible</span></div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            <span class="keywordflow">if</span>( !route_workbench.empty() ) {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;                route = route_workbench;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                route = <a class="code" href="activity__item__handling_8cpp.html#aee54debfe6c899fd8142a504fe09895e">route_adjacent</a>( you, src_loc );</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;            }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            <span class="comment">// check if we found path to source / adjacent tile</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            <span class="keywordflow">if</span>( route.empty() ) {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;                <a class="code" href="activity__item__handling_8cpp.html#a286ad9829915e56b21542c2c31628437">check_npc_revert</a>( you );</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <span class="keywordflow">if</span>( !check_only ) {</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;                <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &lt;= 0 ) {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                    <span class="comment">// Restart activity and break from cycle.</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( activity_to_restore );</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                }</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;                <span class="comment">// set the destination and restart activity after player arrives there</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;                <span class="comment">// we don&#39;t need to check for safe mode,</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                <span class="comment">// activity will be restarted only if</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;                <span class="comment">// player arrives on destination tile</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                you.<a class="code" href="classCharacter.html#a1fcff25d37d85299d85a3ba2c1cfc368">set_destination</a>( route, <a class="code" href="classplayer__activity.html">player_activity</a>( activity_to_restore ) );</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            }</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160; </div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="comment">// we checked if the work spot was in darkness earlier</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="comment">// but there is a niche case where the player is in darkness but the work spot is not</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        <span class="comment">// this can create infinite loops</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        <span class="comment">// and we can&#39;t check player.pos() for darkness before they&#39;ve traveled to where they are going to be.</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        <span class="comment">// but now we are here, we check</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;        <span class="keywordflow">if</span>( activity_to_restore != <a class="code" href="activity__item__handling_8cpp.html#a3ba251501edde65d85515f5febd2fd8b">ACT_TIDY_UP</a> &amp;&amp;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;            activity_to_restore != <a class="code" href="activity__item__handling_8cpp.html#a74091aa1f3e821c29fc8b902d6a0f20f">ACT_MULTIPLE_MOP</a> &amp;&amp;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;            activity_to_restore != <a class="code" href="activity__item__handling_8cpp.html#a0313dde9b91b312463fd84bf985b42a6">ACT_MOVE_LOOT</a> &amp;&amp;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;            activity_to_restore != <a class="code" href="activity__item__handling_8cpp.html#a36a6f3fc9f4495cb137954996c82ab6a">ACT_FETCH_REQUIRED</a> &amp;&amp;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            you.<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &gt; 4.0 ) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is too dark to work here.&quot;</span> ) );</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        }</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">if</span>( !check_only ) {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="activity__item__handling_8cpp.html#a6cb64816a36037375d7d133100ce4368">generic_multi_activity_do</a>( you, activity_to_restore, act_info, src, src_loc ) ) {</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                <span class="comment">// if the activity was successful</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                <span class="comment">// then a new activity was assigned</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;                <span class="comment">// and the backlog was given the multi-act</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;            }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        }</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    }</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <span class="keywordflow">if</span>( !check_only ) {</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &lt;= 0 ) {</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            <span class="comment">// Restart activity and break from cycle.</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( activity_to_restore );</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;            you.<a class="code" href="classCharacter.html#a4052e65bf4b774aaa9ce459719fa0c82">activity_vehicle_part_index</a> = -1;</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        }</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;        <span class="comment">// if we got here, we need to revert otherwise NPC will be stuck in AI Limbo and have a head explosion.</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.empty() || src_set.empty() ) {</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;            <a class="code" href="activity__item__handling_8cpp.html#a286ad9829915e56b21542c2c31628437">check_npc_revert</a>( you );</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classplayer__activity.html">player_activity</a>( activity_to_restore ).is_multi_type() ) {</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;                you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">activity_id::NULL_ID</a>() );</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            }</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        }</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        you.<a class="code" href="classCharacter.html#a4052e65bf4b774aaa9ce459719fa0c82">activity_vehicle_part_index</a> = -1;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    }</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <span class="comment">// scanned every location, tried every path.</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;}</div>
<div class="ttc" id="aactivity__handlers_8h_html_a2cf8ad8704e57889e58223fb5609d7b2"><div class="ttname"><a href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2">requirement_check_result</a></div><div class="ttdeci">requirement_check_result</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8h_source.html#l00042">activity_handlers.h:42</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a0bf80913bbfc0d330bd9190438a857c2"><div class="ttname"><a href="activity__item__handling_8cpp.html#a0bf80913bbfc0d330bd9190438a857c2">ACT_MULTIPLE_DIS</a></div><div class="ttdeci">static const activity_id ACT_MULTIPLE_DIS(&quot;ACT_MULTIPLE_DIS&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a286ad9829915e56b21542c2c31628437"><div class="ttname"><a href="activity__item__handling_8cpp.html#a286ad9829915e56b21542c2c31628437">check_npc_revert</a></div><div class="ttdeci">static void check_npc_revert(Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l02480">activity_item_handling.cpp:2480</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a36a6f3fc9f4495cb137954996c82ab6a"><div class="ttname"><a href="activity__item__handling_8cpp.html#a36a6f3fc9f4495cb137954996c82ab6a">ACT_FETCH_REQUIRED</a></div><div class="ttdeci">static const activity_id ACT_FETCH_REQUIRED(&quot;ACT_FETCH_REQUIRED&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a3ba251501edde65d85515f5febd2fd8b"><div class="ttname"><a href="activity__item__handling_8cpp.html#a3ba251501edde65d85515f5febd2fd8b">ACT_TIDY_UP</a></div><div class="ttdeci">static const activity_id ACT_TIDY_UP(&quot;ACT_TIDY_UP&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a511fe586e9d302639c9c2a5350b625a1"><div class="ttname"><a href="activity__item__handling_8cpp.html#a511fe586e9d302639c9c2a5350b625a1">ACT_MULTIPLE_CRAFT</a></div><div class="ttdeci">static const activity_id ACT_MULTIPLE_CRAFT(&quot;ACT_MULTIPLE_CRAFT&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a6cb64816a36037375d7d133100ce4368"><div class="ttname"><a href="activity__item__handling_8cpp.html#a6cb64816a36037375d7d133100ce4368">generic_multi_activity_do</a></div><div class="ttdeci">static bool generic_multi_activity_do(Character &amp;you, const activity_id &amp;act_id, const activity_reason_info &amp;act_info, const tripoint_abs_ms &amp;src, const tripoint_bub_ms &amp;src_loc)</div><div class="ttdoc">Do activity at this location.</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l02970">activity_item_handling.cpp:2970</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a74091aa1f3e821c29fc8b902d6a0f20f"><div class="ttname"><a href="activity__item__handling_8cpp.html#a74091aa1f3e821c29fc8b902d6a0f20f">ACT_MULTIPLE_MOP</a></div><div class="ttdeci">static const activity_id ACT_MULTIPLE_MOP(&quot;ACT_MULTIPLE_MOP&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a768121987a0255885a7613f2dfcdaba7"><div class="ttname"><a href="activity__item__handling_8cpp.html#a768121987a0255885a7613f2dfcdaba7">generic_multi_activity_locations</a></div><div class="ttdeci">static std::unordered_set&lt; tripoint_abs_ms &gt; generic_multi_activity_locations(Character &amp;you, const activity_id &amp;act_id)</div><div class="ttdoc">Determine all locations for this generic activity.</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l02538">activity_item_handling.cpp:2538</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a79f7da86e850dc5776f39b6907d25d08"><div class="ttname"><a href="activity__item__handling_8cpp.html#a79f7da86e850dc5776f39b6907d25d08">can_do_activity_there</a></div><div class="ttdeci">static activity_reason_info can_do_activity_there(const activity_id &amp;act, Character &amp;you, const tripoint_bub_ms &amp;src_loc, const int distance=ACTIVITY_SEARCH_DISTANCE)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l01004">activity_item_handling.cpp:1004</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a8cccae9a646f9b9764fe3ebee9229b5d"><div class="ttname"><a href="activity__item__handling_8cpp.html#a8cccae9a646f9b9764fe3ebee9229b5d">generic_multi_activity_check_requirement</a></div><div class="ttdeci">static requirement_check_result generic_multi_activity_check_requirement(Character &amp;you, const activity_id &amp;act_id, activity_reason_info &amp;act_info, const tripoint_abs_ms &amp;src, const tripoint_bub_ms &amp;src_loc, const std::unordered_set&lt; tripoint_abs_ms &gt; &amp;src_set, const bool check_only=false)</div><div class="ttdoc">Check if this activity can not be done immediately because it has some requirements.</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l02702">activity_item_handling.cpp:2702</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a98a715a8ba96e7eabffe56d9e4f07ce0"><div class="ttname"><a href="activity__item__handling_8cpp.html#a98a715a8ba96e7eabffe56d9e4f07ce0">route_best_workbench</a></div><div class="ttdeci">static std::vector&lt; tripoint_bub_ms &gt; route_best_workbench(const Character &amp;you, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00687">activity_item_handling.cpp:687</a></div></div>
<div class="ttc" id="aactivity__type_8h_html_a61b219d1f1a69a8d5e8af6b500f09354"><div class="ttname"><a href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a></div><div class="ttdeci">string_id&lt; activity_type &gt; activity_id</div><div class="ttdef"><b>Definition:</b> <a href="activity__type_8h_source.html#l00019">activity_type.h:19</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4052e65bf4b774aaa9ce459719fa0c82"><div class="ttname"><a href="classCharacter.html#a4052e65bf4b774aaa9ce459719fa0c82">Character::activity_vehicle_part_index</a></div><div class="ttdeci">int activity_vehicle_part_index</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02804">character.h:2804</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad2f8dc354e09863a8d257b353a749caa"><div class="ttname"><a href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">Character::backlog</a></div><div class="ttdeci">std::list&lt; player_activity &gt; backlog</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02710">character.h:2710</a></div></div>
<div class="ttc" id="aclassCreature_html_a5de5f5e0d08deb03b68749608eb360b2"><div class="ttname"><a href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">Creature::as_npc</a></div><div class="ttdeci">virtual npc * as_npc()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00286">creature.h:286</a></div></div>
<div class="ttc" id="aclassjob__data_html_a74adef0b6a154ba1114e84e70fc93872"><div class="ttname"><a href="classjob__data.html#a74adef0b6a154ba1114e84e70fc93872">job_data::fetch_history</a></div><div class="ttdeci">std::unordered_map&lt; std::string, time_point &gt; fetch_history</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00160">npc.h:160</a></div></div>
<div class="ttc" id="aclassmap_html_ac868b594b36b6b9bbcb130650fd4f61f"><div class="ttname"><a href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">map::getglobal</a></div><div class="ttdeci">tripoint_abs_ms getglobal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09625">map.cpp:9625</a></div></div>
<div class="ttc" id="aclassnpc_html_abb6a5aefceeaa114ad6099c4b37060af"><div class="ttname"><a href="classnpc.html#abb6a5aefceeaa114ad6099c4b37060af">npc::job</a></div><div class="ttdeci">job_data job</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l01416">npc.h:1416</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00032">player_activity.h:33</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a1b2c5a44b184330e2384906fe0727210"><div class="ttname"><a href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">player_activity::str_values</a></div><div class="ttdeci">std::vector&lt; std::string &gt; str_values</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00063">player_activity.h:63</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; activity_type &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; activity_type &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="astructactivity__reason__info_html"><div class="ttname"><a href="structactivity__reason__info.html">activity_reason_info</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8h_source.html#l00122">activity_handlers.h:122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="activity__item__handling_8cpp.html#a36a6f3fc9f4495cb137954996c82ab6a">ACT_FETCH_REQUIRED</a>, <a class="el" href="activity__item__handling_8cpp.html#a0313dde9b91b312463fd84bf985b42a6">ACT_MOVE_LOOT</a>, <a class="el" href="activity__item__handling_8cpp.html#a511fe586e9d302639c9c2a5350b625a1">ACT_MULTIPLE_CRAFT</a>, <a class="el" href="activity__item__handling_8cpp.html#a0bf80913bbfc0d330bd9190438a857c2">ACT_MULTIPLE_DIS</a>, <a class="el" href="activity__item__handling_8cpp.html#a74091aa1f3e821c29fc8b902d6a0f20f">ACT_MULTIPLE_MOP</a>, <a class="el" href="activity__item__handling_8cpp.html#a3ba251501edde65d85515f5febd2fd8b">ACT_TIDY_UP</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="clzones_8h_source.html#l00037">ACTIVITY_SEARCH_DISTANCE</a>, <a class="el" href="character_8h_source.html#l02804">Character::activity_vehicle_part_index</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00286">Creature::as_npc()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8h_source.html#l02710">Character::backlog</a>, <a class="el" href="map_8cpp_source.html#l09647">map::bub_from_abs()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01004">can_do_activity_there()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02480">check_npc_revert()</a>, <a class="el" href="npc_8h_source.html#l00160">job_data::fetch_history</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02702">generic_multi_activity_check_requirement()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02970">generic_multi_activity_do()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02538">generic_multi_activity_locations()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="activity__handlers_8h_source.html#l00025">get_sorted_tiles_by_distance()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00054">string_id&lt; T &gt;::id()</a>, <a class="el" href="map_8cpp_source.html#l09057">map::inbounds()</a>, <a class="el" href="npc_8h_source.html#l01416">npc::job</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; activity_type &gt;::NULL_ID()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2a2ccc76f26f3c78bc4cdd3c0442b230bf">RETURN_EARLY</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00660">route_adjacent()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00687">route_best_workbench()</a>, <a class="el" href="character_8cpp_source.html#l11436">Character::set_destination()</a>, <a class="el" href="creature_8cpp_source.html#l02012">Creature::set_moves()</a>, <a class="el" href="activity__handlers_8h.html#a2cf8ad8704e57889e58223fb5609d7b2aa805007ada46e5f4b430aadb96a2fb11">SKIP_LOCATION</a>, <a class="el" href="coordinates_8h_source.html#l00755">square_dist()</a>, <a class="el" href="player__activity_8h_source.html#l00063">player_activity::str_values</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l03430">activity_handlers::chop_trees_do_turn()</a>, <a class="el" href="npcmove_8cpp_source.html#l03989">npc::do_player_activity()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03440">activity_handlers::fetch_do_turn()</a>, <a class="el" href="npcmove_8cpp_source.html#l03262">npc::find_job_to_perform()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03400">activity_handlers::multiple_butcher_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03395">activity_handlers::multiple_chop_planks_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03380">activity_handlers::multiple_construction_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03405">activity_handlers::multiple_craft_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03410">activity_handlers::multiple_dis_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03435">activity_handlers::multiple_farm_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03375">activity_handlers::multiple_fish_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03385">activity_handlers::multiple_mine_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03390">activity_handlers::multiple_mop_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03415">activity_handlers::multiple_read_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03370">activity_handlers::tidy_up_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03420">activity_handlers::vehicle_deconstruction_do_turn()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03425">activity_handlers::vehicle_repair_do_turn()</a>.</p>

</div>
</div>
<a id="ae0f36a889c5495ba4f59f5471bc34d1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0f36a889c5495ba4f59f5471bc34d1a">&#9670;&nbsp;</a></span>get_auto_consume_moves()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_auto_consume_moves </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>food</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l03448">3448</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;{</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    }</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160; </div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> = you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <a class="code" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code" href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a>();</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <a class="code" href="classstring__id.html">zone_type_id</a> consume_type_zone( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <span class="keywordflow">if</span>( food ) {</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;        consume_type_zone = <a class="code" href="activity__item__handling_8cpp.html#a67e4c35739e2ee7569dd24d16a50b995">zone_type_AUTO_EAT</a>;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;        consume_type_zone = <a class="code" href="activity__item__handling_8cpp.html#a28de51416f1cf143a5cf4e3c9593b6d5">zone_type_AUTO_DRINK</a>;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    }</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <span class="keyword">const</span> std::unordered_set&lt;tripoint_abs_ms&gt; &amp;dest_set =</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;        mgr.<a class="code" href="classzone__manager.html#a48a7258f14361522cf75baa31967a6c8">get_near</a>( consume_type_zone, here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ), <a class="code" href="clzones_8h.html#a68d414e1c79f68a26edabb0ee1433e4b">ACTIVITY_SEARCH_DISTANCE</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                      <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) );</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="keywordflow">if</span>( dest_set.empty() ) {</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    }</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> best_comestible;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;loc : dest_set ) {</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        <span class="keywordflow">if</span>( loc.z() != you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) {</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;        }</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160; </div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> visit = [&amp;]( <a class="code" href="classitem__location.html">item_location</a> &amp; it ) {</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">can_consume_as_is</a>( *it ) ) {</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            }</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;            <span class="keywordflow">if</span>( it-&gt;has_flag( <a class="code" href="activity__item__handling_8cpp.html#a6282046d5d6ffd6f19f43df6f7e43470">json_flag_NO_AUTO_CONSUME</a> ) ) {</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;                <span class="comment">// ignored due to NO_AUTO_CONSUME flag</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            }</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;            <span class="keywordflow">if</span>( it-&gt;is_null() || it-&gt;is_craft() || !it-&gt;is_food() ||</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                you.<a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( *it ).first &lt; -5 ) {</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                <span class="comment">// not good eatings.</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            }</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;            <span class="keywordflow">if</span>( food &amp;&amp; you.<a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( *it ).<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() &lt; 50 ) {</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;                <span class="comment">// not filling enough</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            }</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">will_eat</a>( *it, <span class="keyword">false</span> ).success() ) {</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                <span class="comment">// wont like it, cannibal meat etc</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            }</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            <span class="keywordflow">if</span>( !it-&gt;is_owned_by( you, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                <span class="comment">// it aint ours.</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;            }</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;            <span class="keywordflow">if</span>( !food &amp;&amp; it-&gt;get_comestible()-&gt;quench &lt; 15 ) {</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                <span class="comment">// not quenching enough</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            }</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            <span class="keywordflow">if</span>( !food &amp;&amp; it-&gt;is_watertight_container() &amp;&amp; it-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a> ) ) {</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                <span class="comment">// it&#39;s frozen</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;            }</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;            <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *usef = it-&gt;type-&gt;get_use( <span class="stringliteral">&quot;BLECH_BECAUSE_UNCLEAN&quot;</span> );</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;            <span class="keywordflow">if</span>( usef ) {</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;                <span class="comment">// it&#39;s unclean</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;            }</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;            <span class="keywordflow">if</span>( it-&gt;get_comestible()-&gt;addictions.count( <a class="code" href="activity__item__handling_8cpp.html#a88b13f1de450b031faca664215d286ad">addiction_alcohol</a> ) &amp;&amp;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                !you.<a class="code" href="classCharacter.html#acf81461003c9a79f81281c6aa9520ea9">has_addiction</a>( <a class="code" href="activity__item__handling_8cpp.html#a88b13f1de450b031faca664215d286ad">addiction_alcohol</a> ) ) {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160; </div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;            <span class="keywordflow">if</span>( !best_comestible || <a class="code" href="activity__item__handling_8cpp.html#a40c4de3dd8641e4fb9ba93f52d80c685">comestible_sort_compare</a>( you, it, best_comestible ) ) {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                best_comestible = it;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;            }</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160; </div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;        };</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( here.<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( loc ) );</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_cargo = vp.<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>() ) {</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : vp_cargo-&gt;items() ) {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                    <a class="code" href="classitem__location.html">item_location</a> i_loc( <a class="code" href="classvehicle__cursor.html">vehicle_cursor</a>( vp-&gt;vehicle(), vp-&gt;part_index() ), &amp;it );</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                    <a class="code" href="activity__item__handling_8cpp.html#a89183657f4d35053f18f160975e9f46d">visit_item_contents</a>( i_loc, visit );</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                }</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;            }</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( here.<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( loc ) ) ) {</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                <a class="code" href="classitem__location.html">item_location</a> i_loc( <a class="code" href="classmap__cursor.html">map_cursor</a>( here.<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( loc ) ), &amp;it );</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                <a class="code" href="activity__item__handling_8cpp.html#a89183657f4d35053f18f160975e9f46d">visit_item_contents</a>( i_loc, visit );</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;            }</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;        }</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    }</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160; </div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="keywordflow">if</span>( best_comestible ) {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;        <span class="comment">//The moves it takes you to walk there and back.</span></div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;        <span class="keywordtype">int</span> consume_moves = 2 * you.<a class="code" href="classCharacter.html#a85e40d1109c07460a6e03ff0421c7e2d">run_cost</a>( 100, <span class="keyword">false</span> ) * <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(),</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;                            best_comestible.<a class="code" href="classitem__location.html#a34c1c7c6ce962dbe787ce5bc4fe36786">pos_bub</a>() ), 1 );</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        consume_moves += to_moves&lt;int&gt;( you.<a class="code" href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">get_consume_time</a>( *best_comestible ) );</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160; </div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;        you.<a class="code" href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">consume</a>( best_comestible );</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;        <span class="comment">// eat() may have removed the item, so check its still there.</span></div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;        <span class="keywordflow">if</span>( best_comestible.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() &amp;&amp; best_comestible-&gt;<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            best_comestible-&gt;<a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160; </div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        <span class="keywordflow">return</span> consume_moves;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    }</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a28de51416f1cf143a5cf4e3c9593b6d5"><div class="ttname"><a href="activity__item__handling_8cpp.html#a28de51416f1cf143a5cf4e3c9593b6d5">zone_type_AUTO_DRINK</a></div><div class="ttdeci">static const zone_type_id zone_type_AUTO_DRINK(&quot;AUTO_DRINK&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a40c4de3dd8641e4fb9ba93f52d80c685"><div class="ttname"><a href="activity__item__handling_8cpp.html#a40c4de3dd8641e4fb9ba93f52d80c685">comestible_sort_compare</a></div><div class="ttdeci">static bool comestible_sort_compare(Character &amp;you, const item_location &amp;lhs, const item_location &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l03435">activity_item_handling.cpp:3435</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a6282046d5d6ffd6f19f43df6f7e43470"><div class="ttname"><a href="activity__item__handling_8cpp.html#a6282046d5d6ffd6f19f43df6f7e43470">json_flag_NO_AUTO_CONSUME</a></div><div class="ttdeci">static const flag_id json_flag_NO_AUTO_CONSUME(&quot;NO_AUTO_CONSUME&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a67e4c35739e2ee7569dd24d16a50b995"><div class="ttname"><a href="activity__item__handling_8cpp.html#a67e4c35739e2ee7569dd24d16a50b995">zone_type_AUTO_EAT</a></div><div class="ttdeci">static const zone_type_id zone_type_AUTO_EAT(&quot;AUTO_EAT&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a88b13f1de450b031faca664215d286ad"><div class="ttname"><a href="activity__item__handling_8cpp.html#a88b13f1de450b031faca664215d286ad">addiction_alcohol</a></div><div class="ttdeci">static const addiction_id addiction_alcohol(&quot;alcohol&quot;)</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a89183657f4d35053f18f160975e9f46d"><div class="ttname"><a href="activity__item__handling_8cpp.html#a89183657f4d35053f18f160975e9f46d">visit_item_contents</a></div><div class="ttdeci">static VisitResponse visit_item_contents(item_location &amp;loc, const std::function&lt; VisitResponse(item_location &amp;)&gt; &amp;func)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l03370">activity_item_handling.cpp:3370</a></div></div>
<div class="ttc" id="aclassCharacter_html_a15e1412dda3489886688216c4ef7da34"><div class="ttname"><a href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">Character::get_consume_time</a></div><div class="ttdeci">time_duration get_consume_time(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01709">consumption.cpp:1709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a161460f47c0cb64afa7be4ee4c0eea70"><div class="ttname"><a href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">Character::fun_for</a></div><div class="ttdeci">std::pair&lt; int, int &gt; fun_for(const item &amp;comest, bool ignore_already_ate=false) const</div><div class="ttdoc">Handles the enjoyability value for a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00447">consumption.cpp:447</a></div></div>
<div class="ttc" id="aclassCharacter_html_a30ae2557de3be7c7e7f353fffc557c91"><div class="ttname"><a href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">Character::compute_effective_nutrients</a></div><div class="ttdeci">nutrients compute_effective_nutrients(const item &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00295">consumption.cpp:295</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4eb1793aafe89d34ba7ab96bf9facc19"><div class="ttname"><a href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">Character::will_eat</a></div><div class="ttdeci">ret_val&lt; edible_rating &gt; will_eat(const item &amp;food, bool interactive=false) const</div><div class="ttdoc">Same as can_eat, but takes consequences into account.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00923">consumption.cpp:923</a></div></div>
<div class="ttc" id="aclassCharacter_html_a85e40d1109c07460a6e03ff0421c7e2d"><div class="ttname"><a href="classCharacter.html#a85e40d1109c07460a6e03ff0421c7e2d">Character::run_cost</a></div><div class="ttdeci">int run_cost(int base_cost, bool diag=false) const</div><div class="ttdoc">Returns the player's modified base movement cost.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10243">character.cpp:10243</a></div></div>
<div class="ttc" id="aclassCharacter_html_a881167b8345723b21ff8c7e54781dcd5"><div class="ttname"><a href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">Character::can_consume_as_is</a></div><div class="ttdeci">bool can_consume_as_is(const item &amp;it) const</div><div class="ttdoc">Check whether the character can consume this very item.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01679">consumption.cpp:1679</a></div></div>
<div class="ttc" id="aclassCharacter_html_acf81461003c9a79f81281c6aa9520ea9"><div class="ttname"><a href="classCharacter.html#acf81461003c9a79f81281c6aa9520ea9">Character::has_addiction</a></div><div class="ttdeci">bool has_addiction(const addiction_id &amp;type) const</div><div class="ttdoc">Returns true if the player has an addiction of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02068">suffer.cpp:2068</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeafb75e7e7e7a3716aef9dfdd778a20d"><div class="ttname"><a href="classCharacter.html#aeafb75e7e7e7a3716aef9dfdd778a20d">Character::consume</a></div><div class="ttdeci">trinary consume(item_location loc, bool force=false)</div><div class="ttdoc">Used for eating object at a location.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01891">consumption.cpp:1891</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a34c1c7c6ce962dbe787ce5bc4fe36786"><div class="ttname"><a href="classitem__location.html#a34c1c7c6ce962dbe787ce5bc4fe36786">item_location::pos_bub</a></div><div class="ttdeci">tripoint_bub_ms pos_bub() const</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01016">item_location.cpp:1016</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1575c31b1dc0df51cbe3a1dfbfef16"><div class="ttname"><a href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Callback when contents of the item are affected in any way other than just processing.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06722">item.cpp:6722</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09667">item.cpp:9667</a></div></div>
<div class="ttc" id="aclassmap_html_a426c21f7244ff80a61685a89e9146fec"><div class="ttname"><a href="classmap.html#a426c21f7244ff80a61685a89e9146fec">map::getlocal</a></div><div class="ttdeci">tripoint getlocal(const tripoint &amp;p) const</div><div class="ttdoc">Inverse of getabs.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09635">map.cpp:9635</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassvehicle__cursor_html"><div class="ttname"><a href="classvehicle__cursor.html">vehicle_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__selector_8h_source.html#l00018">vehicle_selector.h:19</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="astructnutrients_html_a27fef4783e99c7f2471a9fabcabe19b5"><div class="ttname"><a href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">nutrients::kcal</a></div><div class="ttdeci">int kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00118">stomach.cpp:118</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a></div><div class="ttdeci">@ NEXT</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__item__handling_8cpp_source.html#l00160">anonymous_namespace{activity_item_handling.cpp}::_fac_id()</a>, <a class="el" href="clzones_8h_source.html#l00037">ACTIVITY_SEARCH_DISTANCE</a>, <a class="el" href="activity__item__handling_8cpp.html#a88b13f1de450b031faca664215d286ad">addiction_alcohol</a>, <a class="el" href="consumption_8cpp_source.html#l01679">Character::can_consume_as_is()</a>, <a class="el" href="vehicle_8cpp_source.html#l02710">optional_vpart_position::cargo()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03435">comestible_sort_compare()</a>, <a class="el" href="consumption_8cpp_source.html#l00295">Character::compute_effective_nutrients()</a>, <a class="el" href="consumption_8cpp_source.html#l01891">Character::consume()</a>, <a class="el" href="consumption_8cpp_source.html#l00447">Character::fun_for()</a>, <a class="el" href="item_8cpp_source.html#l14803">item::get_comestible()</a>, <a class="el" href="consumption_8cpp_source.html#l01709">Character::get_consume_time()</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="clzones_8h_source.html#l00550">zone_manager::get_manager()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="clzones_8cpp_source.html#l01134">zone_manager::get_near()</a>, <a class="el" href="itype_8cpp_source.html#l00179">itype::get_use()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="map_8cpp_source.html#l09635">map::getlocal()</a>, <a class="el" href="suffer_8cpp_source.html#l02068">Character::has_addiction()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l09667">item::is_container()</a>, <a class="el" href="item_8cpp_source.html#l09930">item::is_craft()</a>, <a class="el" href="item_8cpp_source.html#l09480">item::is_food()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="item_8cpp_source.html#l02116">item::is_owned_by()</a>, <a class="el" href="item_8cpp_source.html#l09741">item::is_watertight_container()</a>, <a class="el" href="activity__item__handling_8cpp.html#a6282046d5d6ffd6f19f43df6f7e43470">json_flag_NO_AUTO_CONSUME</a>, <a class="el" href="stomach_8cpp_source.html#l00118">nutrients::kcal()</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">NEXT</a>, <a class="el" href="item_8cpp_source.html#l06722">item::on_contents_changed()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="item__location_8cpp_source.html#l01016">item_location::pos_bub()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="character_8cpp_source.html#l10243">Character::run_cost()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">SOLID</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03370">visit_item_contents()</a>, <a class="el" href="consumption_8cpp_source.html#l00923">Character::will_eat()</a>, <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>, <a class="el" href="activity__item__handling_8cpp.html#a28de51416f1cf143a5cf4e3c9593b6d5">zone_type_AUTO_DRINK</a>, and <a class="el" href="activity__item__handling_8cpp.html#a67e4c35739e2ee7569dd24d16a50b995">zone_type_AUTO_EAT</a>.</p>

<p class="reference">Referenced by <a class="el" href="player__activity_8cpp_source.html#l00230">player_activity::do_turn()</a>.</p>

</div>
</div>
<a id="ad2d5447f6909e3b1b285e675df5cac54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d5447f6909e3b1b285e675df5cac54">&#9670;&nbsp;</a></span>get_sorted_tiles_by_distance()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Point , typename Container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point&gt; get_sorted_tiles_by_distance </td>
          <td>(</td>
          <td class="paramtype">const Point &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Container &amp;&#160;</td>
          <td class="paramname"><em>tiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00025">25</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> cmp = [<a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>]( <span class="keyword">const</span> Point &amp; <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>, <span class="keyword">const</span> Point &amp; <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> da = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> );</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> db = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> );</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">return</span> da &lt; db;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    };</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    std::vector&lt;Point&gt; <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>( tiles.begin(), tiles.end() );</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    std::sort( <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>.begin(), <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>.end(), cmp );</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="ttc" id="acreature_8h_html_aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126"><div class="ttname"><a href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">get_body_part_flags::sorted</a></div><div class="ttdeci">@ sorted</div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00410">enums.h:410</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">static constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01566">magic.cpp:1566</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01566">a</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="enums_8h_source.html#l00410">center</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, and <a class="el" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01991">activity_on_turn_move_loot()</a>, <a class="el" href="activity__actor_8cpp_source.html#l07039">unload_loot_activity_actor::do_turn()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03330">find_refuel_spot_zone()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03153">generic_multi_activity_handler()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03522">perform_zone_activity_turn()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00660">route_adjacent()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00687">route_best_workbench()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l01809">tidy_activity()</a>.</p>

</div>
</div>
<a id="a678a9b1ab0a1e58f70b4d6456aa54586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678a9b1ab0a1e58f70b4d6456aa54586">&#9670;&nbsp;</a></span>put_into_vehicle_or_drop() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void put_into_vehicle_or_drop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l00442">442</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="activity__item__handling_8cpp.html#a9f76499b878ab5ff7fed1c5e4ee8dd68">put_into_vehicle_or_drop</a>( you, reason, items, you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>() );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a9f76499b878ab5ff7fed1c5e4ee8dd68"><div class="ttname"><a href="activity__item__handling_8cpp.html#a9f76499b878ab5ff7fed1c5e4ee8dd68">put_into_vehicle_or_drop</a></div><div class="ttdeci">void put_into_vehicle_or_drop(Character &amp;you, item_drop_reason reason, const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00442">activity_item_handling.cpp:442</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00442">put_into_vehicle_or_drop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l11580">Character::add_or_drop_with_msg()</a>, <a class="el" href="character_8cpp_source.html#l08207">Character::apply_damage()</a>, <a class="el" href="crafting_8cpp_source.html#l02795">Character::complete_disassemble()</a>, <a class="el" href="veh__interact_8cpp_source.html#l03087">veh_interact::complete_vehicle()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03064">damage_item()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00739">Character::dispose_item()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02330">move_items_activity_actor::do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l04175">drop_activity_actor::do_turn()</a>, <a class="el" href="suffer_8cpp_source.html#l00975">suffer::from_item_dropping()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l01230">Character::hardcoded_effects()</a>, <a class="el" href="vehicle_8cpp_source.html#l06828">vehicle::invalidate_towing()</a>, <a class="el" href="character_8cpp_source.html#l09078">Character::migrate_items_to_storage()</a>, <a class="el" href="activity__actor_8cpp_source.html#l06996">move_item()</a>, <a class="el" href="crafting_8cpp_source.html#l00822">place_craft_or_disassembly()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00442">put_into_vehicle_or_drop()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00878">vehicle::reload_seeds()</a>, <a class="el" href="crafting_8cpp_source.html#l00737">set_item_inventory()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l01809">tidy_activity()</a>.</p>

</div>
</div>
<a id="adce9799e7e561c67bff76ad18af20772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adce9799e7e561c67bff76ad18af20772">&#9670;&nbsp;</a></span>put_into_vehicle_or_drop() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void put_into_vehicle_or_drop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42c">item_drop_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::list&lt; <a class="el" href="classitem.html">item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_ground</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l00448">448</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( where ).<a class="code" href="classoptional__vpart__position.html#acf1ddbf380ff79f8fd707a0453b1608b">cargo</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span>( vp &amp;&amp; !force_ground ) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="activity__item__handling_8cpp.html#a5ef48a6295fdd4c19f207b2807d74b32">put_into_vehicle</a>( you, reason, items, *vp );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="activity__item__handling_8cpp.html#a4df266c468d2e586fd85a300503d0230">drop_on_map</a>( you, reason, items, where );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a4df266c468d2e586fd85a300503d0230"><div class="ttname"><a href="activity__item__handling_8cpp.html#a4df266c468d2e586fd85a300503d0230">drop_on_map</a></div><div class="ttdeci">std::vector&lt; item_location &gt; drop_on_map(Character &amp;you, item_drop_reason reason, const std::list&lt; item &gt; &amp;items, const tripoint_bub_ms &amp;where)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00339">activity_item_handling.cpp:339</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a5ef48a6295fdd4c19f207b2807d74b32"><div class="ttname"><a href="activity__item__handling_8cpp.html#a5ef48a6295fdd4c19f207b2807d74b32">put_into_vehicle</a></div><div class="ttdeci">static void put_into_vehicle(Character &amp;c, item_drop_reason reason, const std::list&lt; item &gt; &amp;items, const vpart_reference &amp;vpr)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00216">activity_item_handling.cpp:216</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02710">optional_vpart_position::cargo()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00339">drop_on_map()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00216">put_into_vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

</div>
</div>
<a id="af42def09b602ee6a5a570ef955ce4471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af42def09b602ee6a5a570ef955ce4471">&#9670;&nbsp;</a></span>repair_item_finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void repair_item_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> *&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>no_menu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__handlers_8cpp_source.html#l02385">2385</a> of file <a class="el" href="activity__handlers_8cpp_source.html">activity_handlers.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;{</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keyword">const</span> std::string iuse_name_string = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;get_str_value( 0, <span class="stringliteral">&quot;repair_item&quot;</span> );</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0">repeat_type</a> repeat = <span class="keyword">static_cast&lt;</span><a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0">repeat_type</a><span class="keyword">&gt;</span>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;get_value( 0,</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a> ) ) );</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <a class="code" href="structweldrig__hack.html">weldrig_hack</a> w_hack;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> *ploc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160; </div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.empty() ) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        ploc = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.data();</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="classitem.html">item</a> *main_tool = &amp;( !w_hack.<a class="code" href="structweldrig__hack.html#a9feb5e5891a584255ca0ec5d3370d137">init</a>( *<a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> ) ?</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                         ploc ?</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                         **ploc : you-&gt;<a class="code" href="classCharacter.html#a654ed96afe759517e0bf1a31c7a3ea11">i_at</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;index ) : w_hack.<a class="code" href="structweldrig__hack.html#a85a9f3c211b76d185c369fd23fbca028">get_item</a>() );</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span>( main_tool == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Empty main tool for repair&quot;</span> );</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <a class="code" href="classitem.html">item</a> *used_tool = main_tool-&gt;<a class="code" href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">get_usable_item</a>( iuse_name_string );</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="keywordflow">if</span>( used_tool == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Lost tool used for long repair&quot;</span> );</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160; </div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *use_fun = used_tool-&gt;<a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( iuse_name_string );</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="comment">// TODO: De-uglify this block. Something like get_use&lt;iuse_actor_type&gt;() maybe?</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keyword">const</span> <a class="code" href="classrepair__item__actor.html">repair_item_actor</a> *actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classrepair__item__actor.html">repair_item_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                                     ( use_fun-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="keywordflow">if</span>( actor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;iuse_actor type descriptor and actual type mismatch&quot;</span> );</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160; </div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="comment">// Valid Repeat choice and target, attempt repair.</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span>( repeat != <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a> &amp;&amp; <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.size() &gt;= 2 ) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> &amp;fix_location = <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets[1];</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        <span class="comment">// Remember our level: we want to stop retrying on level up</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> old_level = you-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( actor-&gt;<a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> );</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="keyword">const</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">repair_item_actor::attempt_hint</a> attempt = actor-&gt;<a class="code" href="classrepair__item__actor.html#ab4479ce41bc825be8ef544c7fad5e98a">repair</a>( *you, *used_tool,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                fix_location, repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a282f1a1d551ded88da62de91bbf75a24">repeat_type::REFIT_ONCE</a> || repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0ad823cb3b9e18b6b9d0d305845f550dd4">repeat_type::REFIT_FULL</a> );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160; </div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="comment">// If the item being repaired has been destroyed stop further</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <span class="comment">// processing in case the items being used for the repair was</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="comment">// contained by the item being repaired, which will result</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="comment">// in the tool being invalid</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keywordflow">if</span>( attempt == <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">repair_item_actor::AS_DESTROYED</a> ) {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">if</span>( attempt != <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">repair_item_actor::AS_CANT</a> ) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            <span class="keywordflow">if</span>( ploc &amp;&amp; ploc-&gt;where() == <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae">item_location::type::map</a> ) {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                used_tool-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( used_tool-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), ploc-&gt;position(), you );</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                you-&gt;<a class="code" href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">consume_charges</a>( *used_tool, used_tool-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() );</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="comment">// TODO: Allow setting this in the actor</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="comment">// TODO: Don&#39;t use charges_to_use: welder has 50 charges per use, soldering iron has 1</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">if</span>( !used_tool-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( you ) ) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            you-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s ran out of charges.&quot;</span> ), used_tool-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <span class="comment">// Print message explaining why we stopped</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="comment">// But only if we didn&#39;t destroy the item (because then it&#39;s obvious)</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> destroyed = attempt == <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">repair_item_actor::AS_DESTROYED</a>;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> cannot_continue_repair = attempt == <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">repair_item_actor::AS_CANT</a> || destroyed ||</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                            !actor-&gt;<a class="code" href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">can_repair_target</a>( *you, *fix_location, !destroyed, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keywordflow">if</span>( cannot_continue_repair ) {</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            <span class="comment">// Cannot continue to repair target, select another target.</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;            <span class="comment">// **Warning**: as soon as the item is popped back, it is destroyed and can&#39;t be used anymore!</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.pop_back();</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160; </div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> event_happened = attempt == <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">repair_item_actor::AS_FAILURE</a> ||</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                                    attempt == <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">repair_item_actor::AS_SUCCESS</a> ||</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                                    old_level != <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( you-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( actor-&gt;<a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> ) );</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> can_refit = !destroyed &amp;&amp; !cannot_continue_repair &amp;&amp;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                               fix_location-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) &amp;&amp;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                               !fix_location-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> );</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> need_input =</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            ( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aa32d16355630f112473d1ae254519c24">repeat_type::ONCE</a> ) ||</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;            ( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a030d962d0faa148f02848881a3b4fdb6">repeat_type::EVENT</a> &amp;&amp; event_happened ) ||</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            ( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1">repeat_type::FULL</a> &amp;&amp; cannot_continue_repair ) ||</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;            ( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a282f1a1d551ded88da62de91bbf75a24">repeat_type::REFIT_ONCE</a> ) ||</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            ( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0ad823cb3b9e18b6b9d0d305845f550dd4">repeat_type::REFIT_FULL</a> &amp;&amp; !can_refit );</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="keywordflow">if</span>( need_input ) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;            repeat = <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a>;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            <span class="keywordflow">if</span>( no_menu ) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    }</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="comment">// Check tool is valid before we query target and Repeat choice.</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">if</span>( !actor-&gt;<a class="code" href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">can_use_tool</a>( *you, *used_tool, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    }</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160; </div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="comment">// target selection and validation.</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="keywordflow">while</span>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.size() &lt; 2 ) {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> item_loc = <a class="code" href="namespacegame__menus_1_1inv.html#a6e416b2407239009d0fdff81d31e105f">game_menus::inv::repair</a>( *you, actor, main_tool );</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160; </div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <span class="keywordflow">if</span>( item_loc == <a class="code" href="classitem__location.html#ac32191753a11cc2f4aa2ad6d50e6405b">item_location::nowhere</a> ) {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            you-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <span class="keywordflow">if</span>( actor-&gt;<a class="code" href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">can_repair_target</a>( *you, *item_loc, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets.emplace_back( item_loc );</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            repeat = <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    }</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;fix = *<a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;targets[1];</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_refit = fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) &amp;&amp; !fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> );</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span>( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a> ) {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> level = you-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( actor-&gt;<a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> );</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a> action_type = actor-&gt;<a class="code" href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">default_action</a>( fix, level );</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        <span class="keywordflow">if</span>( action_type == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">repair_item_actor::RT_NOTHING</a> ) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            you-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You won&#39;t learn anything more by doing that.&quot;</span> ) );</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keyword">const</span> std::pair&lt;float, float&gt; chance = actor-&gt;<a class="code" href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">repair_chance</a>( *you, fix, action_type );</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <span class="keywordflow">if</span>( chance.first &lt;= 0.0f ) {</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;            action_type = <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">repair_item_actor::RT_PRACTICE</a>;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        }</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        std::string <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s %s\n&quot;</span> ),</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                                           <a class="code" href="classrepair__item__actor.html#acb6ed71ea38c7a55709a42145e05a139">repair_item_actor::action_description</a>( action_type ),</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                                           fix.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <a class="code" href="classstring__id.html">ammotype</a> current_ammo;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        std::string ammo_name;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        <span class="keywordflow">if</span>( used_tool-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) || used_tool-&gt;<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            ammo_name = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            current_ammo = <a class="code" href="activity__handlers_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( used_tool-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;            ammo_name = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;bionic power&quot;</span> );</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160; </div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;            <span class="keywordflow">if</span>( used_tool-&gt;<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>().<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                current_ammo = <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( used_tool-&gt;<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                current_ammo = <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( used_tool-&gt;<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>() )-&gt;ammo-&gt;type;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            }</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            ammo_name = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( used_tool-&gt;<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>() );</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        }</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160; </div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        <span class="keywordtype">int</span> ammo_remaining = used_tool-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( you, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160; </div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        std::set&lt;itype_id&gt; valid_entries = actor-&gt;<a class="code" href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">get_valid_repair_materials</a>( fix );</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = you-&gt;<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() ) {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; <a class="code" href="structcomponent.html">component</a> ) {</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="structcomponent.html">component</a>.allow_crafting_component();</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            };</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a>;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        std::vector&lt;std::string&gt; <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a>;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;component_id : valid_entries ) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( component_id ) ) {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                <span class="keywordflow">if</span>( crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( component_id, 1 ) ) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                    <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a>.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s (%d)&quot;</span> ), <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( component_id ),</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                                                            crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( component_id ) ) );</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                }</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( crafting_inv.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( component_id, 1, <span class="keyword">false</span>, filter ) ) {</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a>.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s (%d)&quot;</span> ), <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( component_id ),</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                                                        crafting_inv.<a class="code" href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">amount_of</a>( component_id, <span class="keyword">false</span> ) ) );</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        }</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160; </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Charges: &lt;color_light_blue&gt;%s/%s&lt;/color&gt; %s (%s per use)\n&quot;</span> ),</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                                ammo_remaining, used_tool-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( current_ammo, <span class="keyword">true</span> ),</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                                ammo_name,</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                                used_tool-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() );</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Materials available: %s\n&quot;</span> ), <a class="code" href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a>( <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a>, <span class="stringliteral">&quot;, &quot;</span> ) );</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skill used: &lt;color_light_blue&gt;%s (%s)&lt;/color&gt;\n&quot;</span> ),</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                                actor-&gt;<a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(), level );</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Success chance: &lt;color_light_blue&gt;%.1f&lt;/color&gt;%%\n&quot;</span> ),</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                                100.0f * chance.first );</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage chance: &lt;color_light_blue&gt;%.1f&lt;/color&gt;%%&quot;</span> ),</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                                100.0f * chance.second );</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;values.empty() ) {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;values.resize( 1 );</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        }</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            repeat = <a class="code" href="activity__handlers_8cpp.html#a15ddb03afc951d11521f2270faf91ea1">repeat_menu</a>( <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a>, repeat, can_refit );</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            <span class="keywordflow">if</span>( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a2027c027133e22c8929e2874dc44dd36">repeat_type::CANCEL</a> ) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;set_to_null();</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            }</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;values[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( repeat );</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;            <span class="comment">// BACK selected, redo target selection next.</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;            <span class="keywordflow">if</span>( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a> ) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                you-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.pop_back();</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            <span class="keywordflow">if</span>( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1">repeat_type::FULL</a> &amp;&amp; fix.<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt;= fix.<a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">degradation</a>() &amp;&amp; !can_refit ) {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = fix.<a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() &gt; 0 ?</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is repaired as much as possible, considering the degradation.&quot;</span> ) :</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is already fully repaired.&quot;</span> );</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                you-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, msg, fix.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                repeat = <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;            }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        } <span class="keywordflow">while</span>( repeat == <a class="code" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">repeat_type::INIT</a> );</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="comment">// Otherwise keep retrying</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>-&gt;moves_left = actor-&gt;<a class="code" href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">move_cost</a>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;}</div>
<div class="ttc" id="aactivity__handlers_8cpp_html_a13798283d6d3fdd8f38838da9d52fd19"><div class="ttname"><a href="activity__handlers_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a></div><div class="ttdeci">static const ammotype ammo_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_a15ddb03afc951d11521f2270faf91ea1"><div class="ttname"><a href="activity__handlers_8cpp.html#a15ddb03afc951d11521f2270faf91ea1">repeat_menu</a></div><div class="ttdeci">static repeat_type repeat_menu(const std::string &amp;title, repeat_type last_selection, const bool can_refit)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02281">activity_handlers.cpp:2281</a></div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0">repeat_type</a></div><div class="ttdeci">repeat_type</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02253">activity_handlers.cpp:2253</a></div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0a030d962d0faa148f02848881a3b4fdb6"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a030d962d0faa148f02848881a3b4fdb6">repeat_type::EVENT</a></div><div class="ttdeci">@ EVENT</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0a2027c027133e22c8929e2874dc44dd36"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a2027c027133e22c8929e2874dc44dd36">repeat_type::CANCEL</a></div><div class="ttdeci">@ CANCEL</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0a282f1a1d551ded88da62de91bbf75a24"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a282f1a1d551ded88da62de91bbf75a24">repeat_type::REFIT_ONCE</a></div><div class="ttdeci">@ REFIT_ONCE</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0aa32d16355630f112473d1ae254519c24"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aa32d16355630f112473d1ae254519c24">repeat_type::ONCE</a></div><div class="ttdeci">@ ONCE</div></div>
<div class="ttc" id="aactivity__handlers_8cpp_html_abf200789b850cb7dfcd2effbf86c21f0ad823cb3b9e18b6b9d0d305845f550dd4"><div class="ttname"><a href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0ad823cb3b9e18b6b9d0d305845f550dd4">repeat_type::REFIT_FULL</a></div><div class="ttdeci">@ REFIT_FULL</div></div>
<div class="ttc" id="acata__utility_8h_html_ac991956646ae07083eff5852c753b886"><div class="ttname"><a href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a></div><div class="ttdeci">std::string string_join(const Container &amp;iterable, const std::string &amp;joiner)</div><div class="ttdoc">Joins an iterable (class implementing begin() and end()) of elements into a single string with specif...</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00495">cata_utility.h:495</a></div></div>
<div class="ttc" id="aclassCharacter_html_a440c45f92704e6fe31024a90f10ac9c1"><div class="ttname"><a href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">Character::consume_charges</a></div><div class="ttdeci">bool consume_charges(item &amp;used, int qty)</div><div class="ttdoc">Consume charges of a tool or comestible item, potentially destroying it in the process.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07239">character.cpp:7239</a></div></div>
<div class="ttc" id="aclassCharacter_html_a654ed96afe759517e0bf1a31c7a3ea11"><div class="ttname"><a href="classCharacter.html#a654ed96afe759517e0bf1a31c7a3ea11">Character::i_at</a></div><div class="ttdeci">item &amp; i_at(int position)</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00428">character_inventory.cpp:428</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassSkill_html_a11c69074ce9b251983f170510808bd85"><div class="ttname"><a href="classSkill.html#a11c69074ce9b251983f170510808bd85">Skill::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00071">skill.h:71</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassinventory_html_a5702debf38c9bd88deab93d7979c2511"><div class="ttname"><a href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassinventory_html_a67cbf53a62daa5d2bbda87304fc26f81"><div class="ttname"><a href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">inventory::amount_of</a></div><div class="ttdeci">int amount_of(const itype_id &amp;what, bool pseudo=true, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const override</div><div class="ttdoc">Count items matching id including both this instance and any contained items.</div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae">item_location::type::map</a></div><div class="ttdeci">@ map</div></div>
<div class="ttc" id="aclassitem__location_html_ac32191753a11cc2f4aa2ad6d50e6405b"><div class="ttname"><a href="classitem__location.html#ac32191753a11cc2f4aa2ad6d50e6405b">item_location::nowhere</a></div><div class="ttdeci">static const item_location nowhere</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00041">item_location.h:41</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aclassitem_html_a2e08e5c910eb01fa126e04e6f1d27e52"><div class="ttname"><a href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">item::degradation</a></div><div class="ttdeci">int degradation() const</div><div class="ttdoc">How much degradation has the item accumulated?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00863">item.cpp:863</a></div></div>
<div class="ttc" id="aclassitem_html_a3682b03a3c445a08950a9c9acfefe2a3"><div class="ttname"><a href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">item::has_link_data</a></div><div class="ttdeci">bool has_link_data() const</div><div class="ttdoc">Returns true if the item has valid link_data. Does not mean the link actually connects to anything; u...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13314">item.cpp:13314</a></div></div>
<div class="ttc" id="aclassitem_html_a3cfb7b101196af982e1e59280f1fe3e6"><div class="ttname"><a href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">item::get_usable_item</a></div><div class="ttdeci">const item * get_usable_item(const std::string &amp;use_name) const</div><div class="ttdoc">Checks this item and its contents (recursively) for types that have use_function with type use_name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11508">item.cpp:11508</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a5093379156498b4d523b3ac1f733adc4"><div class="ttname"><a href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a></div><div class="ttdeci">bool is_filthy() const</div><div class="ttdoc">Marks the item as filthy, so characters with squeamish trait can't wear it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14652">item.cpp:14652</a></div></div>
<div class="ttc" id="aclassitem_html_a57b10fc9db286a3449ddc92ab3d896f5"><div class="ttname"><a href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo (if available) and return the amount of ammo that was consumed Consume order: loaded ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10878">item.cpp:10878</a></div></div>
<div class="ttc" id="aclassitem_html_a624c3b7ec10ae766a9e75718af71e647"><div class="ttname"><a href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type, returns &quot;null&quot; if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11021">item.cpp:11021</a></div></div>
<div class="ttc" id="aclassitem_html_a71dac02bae8b97487391d5540a89bc1c"><div class="ttname"><a href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">item::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;use_name) const</div><div class="ttdoc">Returns the pointer to use_function with name use_name assigned to the type of this item or any of it...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11463">item.cpp:11463</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassitem_html_ab07d96e30c441a84435972df842f4c77"><div class="ttname"><a href="classitem.html#ab07d96e30c441a84435972df842f4c77">item::ammo_default</a></div><div class="ttdeci">itype_id ammo_default(bool conversion=true) const</div><div class="ttdoc">Default ammo for the the item magazine pocket, if item has ammo_types().</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11081">item.cpp:11081</a></div></div>
<div class="ttc" id="aclassitem_html_adb2689178dd21563b3536a3ed0e83336"><div class="ttname"><a href="classitem.html#adb2689178dd21563b3536a3ed0e83336">item::damage_level</a></div><div class="ttdeci">int damage_level(bool precise=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00876">item.cpp:876</a></div></div>
<div class="ttc" id="aclassitem_html_ae8a58c6fe3c80cded11d6f3ccfa548a3"><div class="ttname"><a href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdoc">How much damage has the item sustained?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00858">item.cpp:858</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a979cd5aca677ff30dcbb767d4a3980d2"><div class="ttname"><a href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">player_activity::targets</a></div><div class="ttdeci">std::vector&lt; item_location &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00061">player_activity.h:61</a></div></div>
<div class="ttc" id="aclassread__only__visitable_html_a97ab02b5ae44854ce2869532a222ee8d"><div class="ttname"><a href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">read_only_visitable::has_charges</a></div><div class="ttdeci">virtual bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00223">visitable.cpp:223</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html"><div class="ttname"><a href="classrepair__item__actor.html">repair_item_actor</a></div><div class="ttdoc">Repair an item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00773">iuse_actor.h:774</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a17ffc0c3f8468701dc0553b50ab72a40"><div class="ttname"><a href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">repair_item_actor::default_action</a></div><div class="ttdeci">repair_type default_action(const item &amp;fix, int current_skill_level) const</div><div class="ttdoc">What are we most likely trying to do with this item?</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l03027">iuse_actor.cpp:3027</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fe"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a></div><div class="ttdeci">repair_type</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00802">iuse_actor.h:802</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">repair_item_actor::RT_PRACTICE</a></div><div class="ttdeci">@ RT_PRACTICE</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00809">iuse_actor.h:809</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">repair_item_actor::RT_NOTHING</a></div><div class="ttdeci">@ RT_NOTHING</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00803">iuse_actor.h:803</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a8127a68c52e50b325de6511fee2dcdd5"><div class="ttname"><a href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">repair_item_actor::can_use_tool</a></div><div class="ttdeci">bool can_use_tool(const Character &amp;p, const item &amp;tool, bool print_msg) const</div><div class="ttdoc">Checks if we are allowed to use the tool.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02685">iuse_actor.cpp:2685</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a8db98a186012b12626b1ef7ce0f38036"><div class="ttname"><a href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">repair_item_actor::move_cost</a></div><div class="ttdeci">int move_cost</div><div class="ttdoc">Move cost for every attempt.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00790">iuse_actor.h:790</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091ae"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">repair_item_actor::attempt_hint</a></div><div class="ttdeci">attempt_hint</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00792">iuse_actor.h:792</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">repair_item_actor::AS_CANT</a></div><div class="ttdeci">@ AS_CANT</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00797">iuse_actor.h:797</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">repair_item_actor::AS_FAILURE</a></div><div class="ttdeci">@ AS_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00795">iuse_actor.h:795</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">repair_item_actor::AS_DESTROYED</a></div><div class="ttdeci">@ AS_DESTROYED</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00796">iuse_actor.h:796</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">repair_item_actor::AS_SUCCESS</a></div><div class="ttdeci">@ AS_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00793">iuse_actor.h:793</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ab4479ce41bc825be8ef544c7fad5e98a"><div class="ttname"><a href="classrepair__item__actor.html#ab4479ce41bc825be8ef544c7fad5e98a">repair_item_actor::repair</a></div><div class="ttdeci">attempt_hint repair(Character &amp;pl, item &amp;tool, item_location &amp;fix, bool refit_only=false) const</div><div class="ttdoc">Attempts to repair target item with selected tool.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l03094">iuse_actor.cpp:3094</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_acb6ed71ea38c7a55709a42145e05a139"><div class="ttname"><a href="classrepair__item__actor.html#acb6ed71ea38c7a55709a42145e05a139">repair_item_actor::action_description</a></div><div class="ttdeci">static std::string action_description(repair_type)</div><div class="ttdoc">Describes members of repair_type enum.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l03227">iuse_actor.cpp:3227</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_acb7af13e43794ca1ee41803c49a966b3"><div class="ttname"><a href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">repair_item_actor::get_valid_repair_materials</a></div><div class="ttdeci">std::set&lt; itype_id &gt; get_valid_repair_materials(const item &amp;fix) const</div><div class="ttdoc">Returns a list of items that can be used to repair this item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02764">iuse_actor.cpp:2764</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ad31b7e5209e6e0c8439cbdd49ce6da8c"><div class="ttname"><a href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">repair_item_actor::used_skill</a></div><div class="ttdeci">skill_id used_skill</div><div class="ttdoc">Skill used.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00779">iuse_actor.h:779</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ae38080060108420290e8ef53a93d7de7"><div class="ttname"><a href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">repair_item_actor::can_repair_target</a></div><div class="ttdeci">bool can_repair_target(Character &amp;pl, const item &amp;fix, bool print_msg, bool check_consumed_available) const</div><div class="ttdoc">Checks if repairs on target item are possible.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02909">iuse_actor.cpp:2909</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_af589becfbe6ffa1725253e91818267be"><div class="ttname"><a href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">repair_item_actor::repair_chance</a></div><div class="ttdeci">std::pair&lt; float, float &gt; repair_chance(const Character &amp;pl, const item &amp;fix, repair_type action_type) const</div><div class="ttdoc">Returns the chance to repair and to damage an item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02969">iuse_actor.cpp:2969</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aclassvisitable_html_aa199bd0ea7a41c50a2de5761dd987338"><div class="ttname"><a href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo, const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01018">visitable.cpp:1018</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3e2d3cbf6b78ce65033d1f9cbf1f59bf"><div class="ttname"><a href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a></div><div class="ttdeci">const flag_id flag_USE_UPS(&quot;USE_UPS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7d8a64454549e0bab5aa7d7a7091f9d1"><div class="ttname"><a href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a></div><div class="ttdeci">const flag_id flag_USES_BIONIC_POWER(&quot;USES_BIONIC_POWER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aab1184bf751613f16480d6412006f74e"><div class="ttname"><a href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a></div><div class="ttdeci">const flag_id flag_FIT(&quot;FIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac2e75bd71461a88a762c817f199feb23"><div class="ttname"><a href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a></div><div class="ttdeci">const flag_id flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03267">item.h:3267</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a62fc9d4e4ca8f0e62b4556f5f65b666c"><div class="ttname"><a href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a></div><div class="ttdeci">std::unique_ptr&lt; Item_factory &gt; item_controller</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00126">item_factory.cpp:126</a></div></div>
<div class="ttc" id="amaterial_8h_html_a7c650ea68616193580d8d5a366026b6a"><div class="ttname"><a href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a></div><div class="ttdeci">std::vector&lt; material_type &gt; material_list</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00024">material.h:24</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a6e416b2407239009d0fdff81d31e105f"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a6e416b2407239009d0fdff81d31e105f">game_menus::inv::repair</a></div><div class="ttdeci">item_location repair(Character &amp;you, const repair_item_actor *actor, const item *main_tool)</div><div class="ttdoc">Repair menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02106">game_inventory.cpp:2106</a></div></div>
<div class="ttc" id="anamespacemusic_html_a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220"><div class="ttname"><a href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">music::title</a></div><div class="ttdeci">@ title</div><div class="ttdef"><b>Definition:</b> <a href="music_8h_source.html#l00014">music.h:14</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructuse__function_html_a468ef5f707dc56c2822d23ea226c9b36"><div class="ttname"><a href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">use_function::get_actor_ptr</a></div><div class="ttdeci">iuse_actor * get_actor_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00314">iuse.h:314</a></div></div>
<div class="ttc" id="astructweldrig__hack_html"><div class="ttname"><a href="structweldrig__hack.html">weldrig_hack</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02313">activity_handlers.cpp:2313</a></div></div>
<div class="ttc" id="astructweldrig__hack_html_a85a9f3c211b76d185c369fd23fbca028"><div class="ttname"><a href="structweldrig__hack.html#a85a9f3c211b76d185c369fd23fbca028">weldrig_hack::get_item</a></div><div class="ttdeci">item &amp; get_item()</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02335">activity_handlers.cpp:2335</a></div></div>
<div class="ttc" id="astructweldrig__hack_html_a9feb5e5891a584255ca0ec5d3370d137"><div class="ttname"><a href="structweldrig__hack.html#a9feb5e5891a584255ca0ec5d3370d137">weldrig_hack::init</a></div><div class="ttdeci">bool init(const player_activity &amp;act)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02319">activity_handlers.cpp:2319</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03227">repair_item_actor::action_description()</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="activity__handlers_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>, <a class="el" href="item_8cpp_source.html#l10801">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l11021">item::ammo_current()</a>, <a class="el" href="item_8cpp_source.html#l11081">item::ammo_default()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">inventory::amount_of()</a>, <a class="el" href="iuse__actor_8h_source.html#l00797">repair_item_actor::AS_CANT</a>, <a class="el" href="iuse__actor_8h_source.html#l00796">repair_item_actor::AS_DESTROYED</a>, <a class="el" href="iuse__actor_8h_source.html#l00795">repair_item_actor::AS_FAILURE</a>, <a class="el" href="iuse__actor_8h_source.html#l00793">repair_item_actor::AS_SUCCESS</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02909">repair_item_actor::can_repair_target()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02685">repair_item_actor::can_use_tool()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a2027c027133e22c8929e2874dc44dd36">CANCEL</a>, <a class="el" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of()</a>, <a class="el" href="character_8cpp_source.html#l07239">Character::consume_charges()</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="item_8cpp_source.html#l00858">item::damage()</a>, <a class="el" href="item_8cpp_source.html#l00876">item::damage_level()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03027">repair_item_actor::default_action()</a>, <a class="el" href="item_8cpp_source.html#l00863">item::degradation()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a030d962d0faa148f02848881a3b4fdb6">EVENT</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a>, <a class="el" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a>, <a class="el" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aba7de5bc6888294e5884b024a4c894f1">FULL</a>, <a class="el" href="iuse_8h_source.html#l00314">use_function::get_actor_ptr()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02335">weldrig_hack::get_item()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="item_8cpp_source.html#l11508">item::get_usable_item()</a>, <a class="el" href="item_8cpp_source.html#l11463">item::get_use()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02764">repair_item_actor::get_valid_repair_materials()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="visitable_8cpp_source.html#l00223">read_only_visitable::has_charges()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l13314">item::has_link_data()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00428">Character::i_at()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0afaee4ca3c30ee18148ce3ada37466498">INIT</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02319">weldrig_hack::init()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="item_8cpp_source.html#l14652">item::is_filthy()</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="item__factory_8cpp_source.html#l00126">item_controller</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae">item_location::map</a>, <a class="el" href="iuse__actor_8h_source.html#l00790">repair_item_actor::move_cost</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="item__location_8h_source.html#l00041">item_location::nowhere</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0aa32d16355630f112473d1ae254519c24">ONCE</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0ad823cb3b9e18b6b9d0d305845f550dd4">REFIT_FULL</a>, <a class="el" href="activity__handlers_8cpp.html#abf200789b850cb7dfcd2effbf86c21f0a282f1a1d551ded88da62de91bbf75a24">REFIT_ONCE</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair_item_actor::repair()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02106">game_menus::inv::repair()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02969">repair_item_actor::repair_chance()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02281">repeat_menu()</a>, <a class="el" href="iuse__actor_8h_source.html#l00803">repair_item_actor::RT_NOTHING</a>, <a class="el" href="iuse__actor_8h_source.html#l00809">repair_item_actor::RT_PRACTICE</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="cata__utility_8h_source.html#l00495">string_join()</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, <a class="el" href="music_8h_source.html#l00014">music::title</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="iuse__actor_8h_source.html#l00779">repair_item_actor::used_skill</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02380">activity_handlers::repair_item_finish()</a>.</p>

</div>
</div>
<a id="aee54debfe6c899fd8142a504fe09895e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee54debfe6c899fd8142a504fe09895e">&#9670;&nbsp;</a></span>route_adjacent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>&gt; route_adjacent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l00660">660</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;{</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    std::unordered_set&lt;tripoint_bub_ms&gt; passable_tiles;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp;tp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( dest, 1 ) ) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span>( tp != you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>() &amp;&amp; here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( tp ) ) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            passable_tiles.emplace( tp );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keyword">const</span> std::vector&lt;tripoint_bub_ms&gt; &amp;<a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a> =</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="activity__handlers_8h.html#ad2d5447f6909e3b1b285e675df5cac54">get_sorted_tiles_by_distance</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), passable_tiles );</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keyword">const</span> std::unordered_set&lt;tripoint&gt; &amp;avoid = you.<a class="code" href="classCharacter.html#ac432601d2b42dd795be5e600ef66776f">get_path_avoid</a>();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> &amp;tp : sorted ) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        std::vector&lt;tripoint_bub_ms&gt; route =</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            here.<a class="code" href="classmap.html#acd464679b3bb514e2568ffdb3260ef0c">route</a>( you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>(), tp, you.<a class="code" href="classCharacter.html#aa7240b1a7ad2b5c556a6aeafc2132d46">get_pathfinding_settings</a>(), avoid );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span>( !route.empty() ) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keywordflow">return</span> route;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l10074">Character::get_path_avoid()</a>, <a class="el" href="character_8cpp_source.html#l10088">Character::get_pathfinding_settings()</a>, <a class="el" href="activity__handlers_8h_source.html#l00025">get_sorted_tiles_by_distance()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00192">map::route()</a>, and <a class="el" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea26decc94d83c358f67f11c3cbd99b126">sorted</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01991">activity_on_turn_move_loot()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01004">can_do_activity_there()</a>, <a class="el" href="activity__actor_8cpp_source.html#l07039">unload_loot_activity_actor::do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02992">activity_handlers::find_mount_do_turn()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03153">generic_multi_activity_handler()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l02538">generic_multi_activity_locations()</a>.</p>

</div>
</div>
<a id="a17decf55382abcbe83ee50932b2b9f79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17decf55382abcbe83ee50932b2b9f79">&#9670;&nbsp;</a></span>try_fuel_fire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool try_fuel_fire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>starting_fire</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__item__handling_8cpp_source.html#l03559">3559</a> of file <a class="el" href="activity__item__handling_8cpp_source.html">activity_item_handling.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;{</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> = you.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>();</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    std::vector&lt;tripoint_bub_ms&gt; adjacent = <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> );</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    adjacent.erase( adjacent.begin() );</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160; </div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    std::optional&lt;tripoint_bub_ms&gt; best_fire =</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        starting_fire ? here.<a class="code" href="classmap.html#a1cc29653b8305e7192311c05a0bd4c99">bub_from_abs</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.placement ) : <a class="code" href="activity__item__handling_8cpp.html#a77b83a76441a3de24f4967b1011cd5b2">find_best_fire</a>( adjacent, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160; </div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="keywordflow">if</span>( !best_fire || !here.<a class="code" href="classmap.html#ab669e4df068956bf9b69599c85c2a0b2">accessible_items</a>( *best_fire ) ) {</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    }</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160; </div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    std::optional&lt;tripoint_bub_ms&gt; refuel_spot = <a class="code" href="activity__item__handling_8cpp.html#a73bd9ecc766e5e972e316acbca22929d">find_refuel_spot_zone</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="namespaceanonymous__namespace_02activity__item__handling_8cpp_03.html#aab8b18d8c76720082dd1cc7ecff939e5">_fac_id</a>( you ) );</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    <span class="keywordflow">if</span>( !refuel_spot ) {</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        refuel_spot = <a class="code" href="activity__item__handling_8cpp.html#aed2c11c38b80787186df9e97b24f9adb">find_refuel_spot_trap</a>( adjacent, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <span class="keywordflow">if</span>( !refuel_spot ) {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;        }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;    }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    <span class="comment">// Special case: fire containers allow burning logs, so use them as fuel if fire is contained</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;    <span class="keywordtype">bool</span> contained = here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af750a4c95295d69ca74da7e774111bfb">ter_furn_flag::TFLAG_FIRE_CONTAINER</a>, *best_fire );</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;    <a class="code" href="structfire__data.html">fire_data</a> fd( 1, contained );</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> fire_age = here.<a class="code" href="classmap.html#a1e2d0ee9656a17039576cad540e73dff">get_field_age</a>( *best_fire, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a> );</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160; </div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    <span class="comment">// Maybe TODO: - refueling in the rain could use more fuel</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <span class="comment">// First, simulate expected burn per turn, to see if we need more fuel</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> fuel_on_fire = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( *best_fire );</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : fuel_on_fire ) {</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        it.simulate_burn( fd );</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <span class="comment">// Unconstrained fires grow below -50_minutes age</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;        <span class="keywordflow">if</span>( !contained &amp;&amp; fire_age &lt; -40_minutes &amp;&amp; fd.fuel_produced &gt; 1.0f &amp;&amp;</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;            !it.made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            <span class="comment">// Too much - we don&#39;t want a firestorm!</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;            <span class="comment">// Move item back to refueling pile</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            <span class="comment">// Note: move_item() handles messages (they&#39;re the generic &quot;you drop x&quot;)</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;            <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, it, 0, *best_fire, *refuel_spot, std::nullopt );</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        }</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    }</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160; </div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <span class="comment">// Enough to sustain the fire</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;    <span class="comment">// TODO: It&#39;s not enough in the rain</span></div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="keywordflow">if</span>( !starting_fire &amp;&amp; ( fd.fuel_produced &gt;= 1.0f || fire_age &lt; 10_minutes ) ) {</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    }</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160; </div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    <span class="comment">// We need to move fuel from stash to fire</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> potential_fuel = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( *refuel_spot );</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : potential_fuel ) {</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        <span class="keywordflow">if</span>( it.made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        }</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160; </div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        <span class="keywordtype">float</span> last_fuel = fd.fuel_produced;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        it.simulate_burn( fd );</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        <span class="keywordflow">if</span>( fd.fuel_produced &gt; last_fuel ) {</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <span class="keywordtype">int</span> quantity = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( it.charges, it.charges_per_volume( 250_ml ) ) );</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            <span class="comment">// Note: move_item() handles messages (they&#39;re the generic &quot;you drop x&quot;)</span></div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;            <a class="code" href="activity__item__handling_8cpp.html#a931deb6f55d7516a0fb6b95e4b976678">move_item</a>( you, it, quantity, *refuel_spot, *best_fire, std::nullopt );</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        }</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    }</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a73bd9ecc766e5e972e316acbca22929d"><div class="ttname"><a href="activity__item__handling_8cpp.html#a73bd9ecc766e5e972e316acbca22929d">find_refuel_spot_zone</a></div><div class="ttdeci">static std::optional&lt; tripoint_bub_ms &gt; find_refuel_spot_zone(const tripoint_bub_ms &amp;center, const faction_id &amp;fac)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l03330">activity_item_handling.cpp:3330</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a77b83a76441a3de24f4967b1011cd5b2"><div class="ttname"><a href="activity__item__handling_8cpp.html#a77b83a76441a3de24f4967b1011cd5b2">find_best_fire</a></div><div class="ttdeci">static std::optional&lt; tripoint_bub_ms &gt; find_best_fire(const std::vector&lt; tripoint_bub_ms &gt; &amp;from, const tripoint_bub_ms &amp;center)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l03294">activity_item_handling.cpp:3294</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_aed2c11c38b80787186df9e97b24f9adb"><div class="ttname"><a href="activity__item__handling_8cpp.html#aed2c11c38b80787186df9e97b24f9adb">find_refuel_spot_trap</a></div><div class="ttdeci">static std::optional&lt; tripoint_bub_ms &gt; find_refuel_spot_trap(const std::vector&lt; tripoint_bub_ms &gt; &amp;from, const tripoint_bub_ms &amp;center)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l03352">activity_item_handling.cpp:3352</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00106">map.h:107</a></div></div>
<div class="ttc" id="aclassmap_html_a09ef3e8c2e6664e3ed98d1e1e18a4b4f"><div class="ttname"><a href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">map::has_flag_furn</a></div><div class="ttdeci">bool has_flag_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03112">map.cpp:3112</a></div></div>
<div class="ttc" id="aclassmap_html_a1e2d0ee9656a17039576cad540e73dff"><div class="ttname"><a href="classmap.html#a1e2d0ee9656a17039576cad540e73dff">map::get_field_age</a></div><div class="ttdeci">time_duration get_field_age(const tripoint &amp;p, const field_type_id &amp;type) const</div><div class="ttdoc">Get the age of a field entry (field_entry::age), if there is no field of that type,...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06465">map.cpp:6465</a></div></div>
<div class="ttc" id="aclassmap_html_ab669e4df068956bf9b69599c85c2a0b2"><div class="ttname"><a href="classmap.html#ab669e4df068956bf9b69599c85c2a0b2">map::accessible_items</a></div><div class="ttdeci">bool accessible_items(const tripoint &amp;t) const</div><div class="ttdoc">Check whether the player can access the items located .</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l07834">map.cpp:7834</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a560abf1cd341e88e2f13f454ec2ecc99"><div class="ttname"><a href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00848">coordinates.h:848</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054af750a4c95295d69ca74da7e774111bfb"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af750a4c95295d69ca74da7e774111bfb">ter_furn_flag::TFLAG_FIRE_CONTAINER</a></div><div class="ttdeci">@ TFLAG_FIRE_CONTAINER</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="astructfire__data_html"><div class="ttname"><a href="structfire__data.html">fire_data</a></div><div class="ttdoc">Contains the state of a fire in one tile on one turn.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00018">fire.h:18</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__item__handling_8cpp_source.html#l00160">anonymous_namespace{activity_item_handling.cpp}::_fac_id()</a>, <a class="el" href="map_8cpp_source.html#l07834">map::accessible_items()</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="map_8cpp_source.html#l09647">map::bub_from_abs()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="item_8cpp_source.html#l01332">item::charges_per_volume()</a>, <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03294">find_best_fire()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03352">find_refuel_spot_trap()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03330">find_refuel_spot_zone()</a>, <a class="el" href="fire_8h_source.html#l00028">fire_data::fuel_produced</a>, <a class="el" href="map_8cpp_source.html#l06465">map::get_field_age()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00614">move_item()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="item_8cpp_source.html#l11713">item::simulate_burn()</a>, and <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af750a4c95295d69ca74da7e774111bfb">TFLAG_FIRE_CONTAINER</a>.</p>

<p class="reference">Referenced by <a class="el" href="player__activity_8cpp_source.html#l00230">player_activity::do_turn()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l01869">activity_handlers::start_fire_do_turn()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a622706d46a39d8b7c6f2a0b7f3b65684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622706d46a39d8b7c6f2a0b7f3b65684">&#9670;&nbsp;</a></span>do_activity_reason_string</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ab45cffe084dd3d20d928bee85e7b0f21">std::string</a>&gt; do_activity_reason_string</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;CAN_DO_CONSTRUCTION&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;CAN_DO_FETCH&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NO_COMPONENTS&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;DONT_HAVE_SKILL&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NO_ZONE&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;ALREADY_DONE&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;UNKNOWN_ACTIVITY&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_CLEARING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_HARVESTING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_PLANTING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_TILLING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;BLOCKING_TILE&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_BOOK_TO_LEARN&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_CHOPPING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_TREE_CHOPPING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_BIG_BUTCHERING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_BUTCHERING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_CUT_HARVESTING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;ALREADY_WORKING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_VEH_DECONST&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_VEH_REPAIR&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;WOULD_PREVENT_VEH_FLYING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_MINING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_MOP&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_FISHING&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_CRAFT&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;NEEDS_DISASSEMBLE&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="activity__handlers_8h_source.html#l00092">92</a> of file <a class="el" href="activity__handlers_8h_source.html">activity_handlers.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l02702">generic_multi_activity_check_requirement()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:32 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
