<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/character_escape.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">character_escape.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="character__escape_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__attire_8h.html">character_attire.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__martial__arts_8h.html">character_martial_arts.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature__tracker_8h.html">creature_tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="damage_8h.html">damage.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flag_8h.html">flag.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__pocket_8h.html">item_pocket.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map__iterator_8h.html">map_iterator.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="martialarts_8h.html">martialarts.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtype_8h.html">mtype.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pimpl_8h.html">pimpl.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="point_8h.html">point.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translation_8h.html">translation.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">character_modifier_id</a></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a3ae152db1439b9f44f410867d2e0a71d">   33</a></span>&#160;<a class="code" href="character__escape_8cpp.html#a3ae152db1439b9f44f410867d2e0a71d">character_modifier_grab_break_limb_mod</a>( <span class="stringliteral">&quot;grab_break_limb_mod&quot;</span> );</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">   35</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a>( <span class="stringliteral">&quot;beartrap&quot;</span> );</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a309e3746ea5d262a99d79a007dcd8478">   36</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#a309e3746ea5d262a99d79a007dcd8478">effect_crushed</a>( <span class="stringliteral">&quot;crushed&quot;</span> );</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">   37</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>( <span class="stringliteral">&quot;downed&quot;</span> );</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">   38</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a>( <span class="stringliteral">&quot;heavysnare&quot;</span> );</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#ad6ab53abeb2f3ee43a7a05f378f58952">   39</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#ad6ab53abeb2f3ee43a7a05f378f58952">effect_in_pit</a>( <span class="stringliteral">&quot;in_pit&quot;</span> );</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">   40</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a>( <span class="stringliteral">&quot;lightsnare&quot;</span> );</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">   41</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a>( <span class="stringliteral">&quot;webbed&quot;</span> );</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">   43</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a>( <span class="stringliteral">&quot;GRAB&quot;</span> );</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#afa8cd18f8cff7e46bf11b06dc41a681a">   45</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="character__escape_8cpp.html#afa8cd18f8cff7e46bf11b06dc41a681a">itype_rope_6</a>( <span class="stringliteral">&quot;rope_6&quot;</span> );</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a4fc4b0aba8e236a37be3103f20538220">   46</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="character__escape_8cpp.html#a4fc4b0aba8e236a37be3103f20538220">itype_snare_trigger</a>( <span class="stringliteral">&quot;snare_trigger&quot;</span> );</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">   48</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">json_flag_DOWNED_RECOVERY</a>( <span class="stringliteral">&quot;DOWNED_RECOVERY&quot;</span> );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a016b0edc4b45fa8c6b728ba811a3c6d2">   50</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">limb_score_id</a> <a class="code" href="character__escape_8cpp.html#a016b0edc4b45fa8c6b728ba811a3c6d2">limb_score_balance</a>( <span class="stringliteral">&quot;balance&quot;</span> );</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a39ed030b1d7b9d4b72bcc6e3a7fc1ab0">   51</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">limb_score_id</a> <a class="code" href="character__escape_8cpp.html#a39ed030b1d7b9d4b72bcc6e3a7fc1ab0">limb_score_grip</a>( <span class="stringliteral">&quot;grip&quot;</span> );</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a8751ef846def36cb3c192fc18d34cc3b">   52</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">limb_score_id</a> <a class="code" href="character__escape_8cpp.html#a8751ef846def36cb3c192fc18d34cc3b">limb_score_manip</a>( <span class="stringliteral">&quot;manip&quot;</span> );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a917f093dcdc3861c86a6adf734a52641">   54</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="character__escape_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a>( <span class="stringliteral">&quot;melee&quot;</span> );</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#ad22b82ceedf236ed05df55e661444c76">   55</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="character__escape_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a>( <span class="stringliteral">&quot;unarmed&quot;</span> );</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a0651a103f4530a625fc7defcd7372b37">   57</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__escape_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a>( <span class="stringliteral">&quot;SLIMY&quot;</span> );</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="character__escape_8cpp.html#a71121068c9dffa61c7039a6176c68250">   58</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__escape_8cpp.html#a71121068c9dffa61c7039a6176c68250">trait_VISCOUS</a>( <span class="stringliteral">&quot;VISCOUS&quot;</span> );</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">   60</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">Character::can_escape_trap</a>( <span class="keywordtype">int</span> difficulty, <span class="keywordtype">bool</span> manip = <span class="keyword">false</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">int</span> chance = <a class="code" href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">get_arm_str</a>();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    chance *= manip ? <a class="code" href="classCharacter.html#adac3431fb1398a94b0efa74945af8484">get_limb_score</a>( <a class="code" href="character__escape_8cpp.html#a8751ef846def36cb3c192fc18d34cc3b">limb_score_manip</a> ) : <a class="code" href="classCharacter.html#adac3431fb1398a94b0efa74945af8484">get_limb_score</a>( <a class="code" href="character__escape_8cpp.html#a39ed030b1d7b9d4b72bcc6e3a7fc1ab0">limb_score_grip</a> );</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( chance, difficulty );</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classCharacter.html#a8d6be6cfee36abb28f13fb86722bc751">   67</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a8d6be6cfee36abb28f13fb86722bc751">Character::try_remove_downed</a>()</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">    /** @EFFECT_DEX increases chance to stand up when knocked down */</span><span class="comment"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">    /** @EFFECT_ARM_STR increases chance to stand up when knocked down, slightly */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// Downed reduces balance score to 10% unless resisted, multiply to compensate</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">int</span> chance = ( <a class="code" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() + <a class="code" href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">get_arm_str</a>() / 2.0 ) * <a class="code" href="classCharacter.html#adac3431fb1398a94b0efa74945af8484">get_limb_score</a>( <a class="code" href="character__escape_8cpp.html#a016b0edc4b45fa8c6b728ba811a3c6d2">limb_score_balance</a> ) * 10.0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// Always 2,5% chance to stand up</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    chance += <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">json_flag_DOWNED_RECOVERY</a> ) ? 20 : 1;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( chance, 40 ) ) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You struggle to stand.&quot;</span> ) );</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                               <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">json_flag_DOWNED_RECOVERY</a> ) ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You deftly roll to your feet.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stand up.&quot;</span> ),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                               <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">json_flag_DOWNED_RECOVERY</a> ) ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; deftly rolls to their feet.&quot;</span> ) :</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; stands up.&quot;</span> ) );</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> );</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classCharacter.html#afa4867fd3c65eb1f4fe0d5d64bef1cf6">   87</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#afa4867fd3c65eb1f4fe0d5d64bef1cf6">Character::try_remove_bear_trap</a>()</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">/* Real bear traps can&#39;t be removed without the proper tools or immense strength; eventually this should</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">       allow normal players two options: removal of the limb or removal of the trap from the ground</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">       (at which point the player could later remove it from the leg with the right tools).</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">       As such we are currently making it a bit easier for players and NPC&#39;s to get out of bear traps.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// If is riding, then despite the character having the effect, it is the mounted creature that escapes.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides &gt;= 18 ) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides, 200 ) ) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                mon-&gt;remove_effect( <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a> );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a> );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s escapes the bear trap!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s tries to free itself from the bear trap, but can&#39;t get loose!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 100 ) ) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a> );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself from the bear trap!&quot;</span> ),</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves from the bear trap!&quot;</span> ) );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself from the bear trap, but can&#39;t get loose!&quot;</span> ) );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classCharacter.html#a424c2ed63fa7eccde582c12d5a97ccd3">  119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a424c2ed63fa7eccde582c12d5a97ccd3">Character::try_remove_lightsnare</a>()</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides, 12 ) ) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            mon-&gt;remove_effect( <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a> );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s escapes the light snare!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 12 ) ) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a> );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself from the light snare!&quot;</span> ),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves from the light snare!&quot;</span> ) );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself from the light snare, but can&#39;t get loose!&quot;</span> ) );</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classCharacter.html#a15ec381cee46269f4cf9e6350279a55b">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a15ec381cee46269f4cf9e6350279a55b">Character::try_remove_heavysnare</a>()</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides &gt;= 7 ) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides, 32 ) ) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                mon-&gt;remove_effect( <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a> );</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a> );</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="character__escape_8cpp.html#afa8cd18f8cff7e46bf11b06dc41a681a">itype_rope_6</a> );</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="character__escape_8cpp.html#a4fc4b0aba8e236a37be3103f20538220">itype_snare_trigger</a> );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s escapes the heavy snare!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 32 - <a class="code" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a> );</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself from the heavy snare!&quot;</span> ),</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves from the heavy snare!&quot;</span> ) );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="classitem.html">item</a> rope( <span class="stringliteral">&quot;rope_6&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="classitem.html">item</a> snare( <span class="stringliteral">&quot;snare_trigger&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), rope );</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), snare );</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself from the heavy snare, but can&#39;t get loose!&quot;</span> ) );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classCharacter.html#a9e1ccab8ff3dbde3fbd288bbf1c234f9">  170</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a9e1ccab8ff3dbde3fbd288bbf1c234f9">Character::try_remove_crushed</a>()</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 100 ) ) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#a309e3746ea5d262a99d79a007dcd8478">effect_crushed</a> );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself from the rubble!&quot;</span> ),</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves from the rubble!&quot;</span> ) );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself from the rubble, but can&#39;t get loose!&quot;</span> ) );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classCharacter.html#a0a77e01c55ba24cea5cdacc16373c423">  181</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a0a77e01c55ba24cea5cdacc16373c423">Character::try_remove_grab</a>( <span class="keywordtype">bool</span> attacking )</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">// Use the same calc as monster::move_effect</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span>( mon-&gt;has_effect_with_flag( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) ) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;<a class="code" href="structgrab.html">grab</a> : mon-&gt;get_effects_with_flag( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) ) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> effid = <a class="code" href="structgrab.html">grab</a>.get_effect_type()-&gt;id;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_skill + mon-&gt;type-&gt;melee_damage.total_damage(),</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                             mon-&gt;get_effect_int( effid ) ) ) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s tries to break free, but fails!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s breaks free from the grab!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    mon-&gt;remove_effect( effid );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="comment">// No chivalrous zombies letting you go after pulling you off your horse</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are pulled from your %s!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <a class="code" href="classCharacter.html#a85a591640ed5dec800bd4e6e42241fbf">forced_dismount</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">has_effect_with_flag</a>( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) ) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// Need to know who&#39;s around for targeted removal</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// No need to recalculate it in-loop, breaking previous grabs doesn&#39;t change skills</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordtype">float</span> skill_factor = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 0.8f,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                       <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="character__escape_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> ) ) / 10, 0.1f ),</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                               <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="character__escape_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> ) ) / 8, 0.1f ) ) );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordtype">int</span> grab_break_factor = <a class="code" href="classCharacter.html#a951d934cb1eaf57e53e7aca48012d17a">has_grab_break_tec</a>() ? 10 : 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtripoint__range.html">tripoint_range&lt;tripoint&gt;</a> &amp;surrounding = here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1, 0 );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// Iterate through all our grabs and attempt to break them one by one</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;eff : <a class="code" href="classCreature.html#a952f5a3103775159e193c6ee4e60979b">get_effects_with_flag</a>( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) ) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordtype">float</span> escape_chance = 1.0f;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordtype">float</span> grabber_roll = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( eff.get_intensity() );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// We need to figure out which monster is responsible for this grab early for good messaging</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="comment">// For now, one grabber per limb TODO: handle multiple grabbers and decrement intensity</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="classmonster.html">monster</a> *grabber = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> loc : surrounding ) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <a class="code" href="classmonster.html">monster</a> *mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( loc );</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code" href="classmonster.html#a1ff84827bdbc7ba7be2fffb53f5362e6">is_grabbing</a>( eff.get_bp().id() ) ) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>, <span class="stringliteral">&quot;Grabber %s found&quot;</span>, mon-&gt;<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    grabber = mon;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">// Something went wrong, remove grab to be sure and throw an error</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">if</span>( grabber == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( eff.get_id(), eff.get_bp() );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>, <span class="stringliteral">&quot;Orphan grab found and removed&quot;</span> );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment">// Short out the check when attacking after removing any orphan grabs</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">if</span>( attacking ) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                               <span class="stringliteral">&quot;Grab break check triggered by an attack, only removing orphan grabs allowed&quot;</span> );</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordtype">bool</span> torn_pocket = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            std::vector&lt;item_pocket *&gt; pd = <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a>.<a class="code" href="classoutfit.html#a8989ae0dd1bbe2e8bde9ad4945125289">grab_drop_pockets</a>( eff.get_bp() );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span>( !pd.empty() ) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment">// choose an item to be ripped off</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordtype">int</span> index = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, pd.size() - 1 );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordtype">int</span> chance = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( eff.get_id(), eff.get_bp() ) );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordtype">int</span> sturdiness = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, pd[index]-&gt;get_pocket_data()-&gt;ripoff * 10 );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>, <span class="stringliteral">&quot;Tearoff pocket %s chosen, sturdiness %d, tearing chance %d&quot;</span>,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                               pd[index]-&gt;<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(), sturdiness, chance );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="comment">// the item is ripped off your character</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">if</span>( sturdiness &lt; chance ) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    pd[index]-&gt;spill_contents( <a class="code" href="classCharacter.html#a7db38cfe9df5a59341ed2008089df3f9">adjacent_tile</a>() );</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;As you struggle to escape the grab something comes loose and falls to the ground!&quot;</span> ),</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;As &lt;npcname&gt; struggles to escape the grab something comes loose and falls to the ground!&quot;</span> ) );</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;As you struggle to escape the grab something comes loose and falls to the ground!&quot;</span> ) );</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    torn_pocket = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="comment">// Limb factor we check directly</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">// Stats might get modified by certain grabby effects, check them to be safe</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordtype">float</span> stat_factor = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() / 2, <a class="code" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() / 3 );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordtype">float</span> limb_factor = <a class="code" href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">get_modifier</a>( <a class="code" href="character__escape_8cpp.html#a3ae152db1439b9f44f410867d2e0a71d">character_modifier_grab_break_limb_mod</a> );</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            escape_chance = ( skill_factor * limb_factor ) * 100 + stat_factor;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            grabber_roll = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( grabber_roll, escape_chance ) + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 10 );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            escape_chance += grab_break_factor;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__escape_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__escape_8cpp.html#a71121068c9dffa61c7039a6176c68250">trait_VISCOUS</a> ) ) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> slime_factor = <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a>.<a class="code" href="classoutfit.html#a087ea131fcd9e1682ed2e35a0e9febbc">clothing_wetness_mult</a>( eff.get_bp() ) * 6;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="comment">// Slime offers a 6% bonus to escaping from a grab on a naked body part.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="comment">// Slime exudes from the skin and will only soak through clothes according to their combined breathability and coverage.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="comment">// Since the attacker is grabbing at the outermost layer, that 6% is multiplied by clothing_wetness_mult for that body part.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                escape_chance += slime_factor;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                               <span class="stringliteral">&quot;%s is slimy, escape chance increased by %f&quot;</span>,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                               eff.get_bp()-&gt;name, slime_factor );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                           <span class="stringliteral">&quot;Attempting to break grab on %s, grab strength roll %.1f, skill factor %.1f, limb factor %.1f, stat bonus %.1f, grab break bonus %d, escape chance %.1f, final chance %.1f %%&quot;</span>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                           eff.get_bp()-&gt;name, grabber_roll, skill_factor, limb_factor, stat_factor, grab_break_factor,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                           escape_chance,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                           escape_chance * 100 / grabber_roll );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span>( torn_pocket ) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                escape_chance *= 1.5f;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                               <span class="stringliteral">&quot;Pocket torn off in the attempt, escape chance increased to %.1f&quot;</span>,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                               escape_chance * 100 / eff.get_intensity() );</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="comment">// Every attempt burns some stamina - maybe some moves?</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <a class="code" href="classCharacter.html#a704ab09b0d8a22f5dddd96c8ebc22639">burn_energy_arms</a>( -5 * eff.get_intensity() );</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( escape_chance, grabber_roll ) ) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                grabber-&gt;<a class="code" href="classmonster.html#aa16651738b2e1ab517fde90b5108fc89">remove_grab</a>( eff.get_bp().id() );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a>, <span class="stringliteral">&quot;Removed grab effect %s from monster %s&quot;</span>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                               eff.get_bp()-&gt;name, grabber-&gt;<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">if</span>( grab_break_factor &gt; 0 ) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;get_grab_break( *this ).avatar_message.translated(),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                       grabber-&gt;<a class="code" href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">disp_name</a>() );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You break %s grab on your %s!&quot;</span> ),</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; breaks %s grab on their %s!&quot;</span> ), grabber-&gt;<a class="code" href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">disp_name</a>( <span class="keyword">true</span> ),</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                           eff.get_bp()-&gt;name );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="comment">// Remove only this one grab</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( eff.get_id(), eff.get_bp() );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to break %s grab on your %s, but fail!&quot;</span> ),</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; tries to break out of the grab, but fails!&quot;</span> ), grabber-&gt;<a class="code" href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">disp_name</a>( <span class="keyword">true</span> ),</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                       eff.get_bp()-&gt;name );</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// We have attempted to break every grab but have failed to break at least one</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// Attacks only get the abbreviated grab check, grabs don&#39;t prevent attacking</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">has_effect_with_flag</a>( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) &amp;&amp; !attacking ) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classCharacter.html#a7d3ec69103f2584de4a682d9761a2ff0">  331</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a7d3ec69103f2584de4a682d9761a2ff0">Character::try_remove_webs</a>()</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    6 * <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> ) ) ) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s breaks free of the webs!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            mon-&gt;remove_effect( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> );</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> );</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 6 * <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> ) ) ) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself from the webs!&quot;</span> ),</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves from the webs!&quot;</span> ) );</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> );</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself from the webs, but can&#39;t get loose!&quot;</span> ) );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classCharacter.html#a9679a3524ce4f0fbf043944378aa7e59">  350</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a9679a3524ce4f0fbf043944378aa7e59">Character::try_remove_impeding_effect</a>()</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;eff : <a class="code" href="classCreature.html#a952f5a3103775159e193c6ee4e60979b">get_effects_with_flag</a>( <a class="code" href="flag_8cpp.html#a8173eeb9948b3cf79ca9df9f7b8373fc">flag_EFFECT_IMPEDING</a> ) ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> &amp;eff_id = eff.get_id();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keyword">auto</span> *mon = <a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( mon-&gt;type-&gt;melee_dice * mon-&gt;type-&gt;melee_sides,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                        6 * <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( eff_id ) ) ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s breaks free!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                mon-&gt;remove_effect( eff_id );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( eff_id );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            }<span class="comment"></span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">            /** @EFFECT_STR increases chance to escape webs */</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 6 * <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( eff_id ) ) ) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You free yourself!&quot;</span> ),</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; frees themselves!&quot;</span> ) );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( eff_id );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to free yourself, but can&#39;t!&quot;</span> ) );</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">  373</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">Character::move_effects</a>( <span class="keywordtype">bool</span> attacking )</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> ) ) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="classCharacter.html#a8d6be6cfee36abb28f13fb86722bc751">try_remove_downed</a>();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> ) ) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="classCharacter.html#a7d3ec69103f2584de4a682d9761a2ff0">try_remove_webs</a>();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a> ) ) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="classCharacter.html#a424c2ed63fa7eccde582c12d5a97ccd3">try_remove_lightsnare</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a> ) ) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="classCharacter.html#a15ec381cee46269f4cf9e6350279a55b">try_remove_heavysnare</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a> ) ) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="classCharacter.html#afa4867fd3c65eb1f4fe0d5d64bef1cf6">try_remove_bear_trap</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#a309e3746ea5d262a99d79a007dcd8478">effect_crushed</a> ) ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="classCharacter.html#a9e1ccab8ff3dbde3fbd288bbf1c234f9">try_remove_crushed</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">has_effect_with_flag</a>( <a class="code" href="flag_8cpp.html#a8173eeb9948b3cf79ca9df9f7b8373fc">flag_EFFECT_IMPEDING</a> ) ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="classCharacter.html#a9679a3524ce4f0fbf043944378aa7e59">try_remove_impeding_effect</a>();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// Below this point are things that allow for movement if they succeed</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Currently we only have one thing that forces movement if you succeed, should we get more</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// than this will need to be reworked to only have success effects if /all/ checks succeed</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#ad6ab53abeb2f3ee43a7a05f378f58952">effect_in_pit</a> ) ) {<span class="comment"></span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">        /** @EFFECT_DEX increases chance to escape pit, slightly */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">can_escape_trap</a>( 40 - <a class="code" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> / 2 ) ) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to escape the pit, but slip back in.&quot;</span> ) );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You escape the pit!&quot;</span> ),</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; escapes the pit!&quot;</span> ) );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__escape_8cpp.html#ad6ab53abeb2f3ee43a7a05f378f58952">effect_in_pit</a> );</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// Attempt to break grabs, only check for orphan grabs on attack</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) ) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a0a77e01c55ba24cea5cdacc16373c423">try_remove_grab</a>( attacking );</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classCharacter.html#a0f49fabe8d085391349e498070cc044c">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a0f49fabe8d085391349e498070cc044c">Character::wait_effects</a>( <span class="keywordtype">bool</span> attacking )</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> ) ) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="classCharacter.html#a8d6be6cfee36abb28f13fb86722bc751">try_remove_downed</a>();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a> ) ) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="classCharacter.html#afa4867fd3c65eb1f4fe0d5d64bef1cf6">try_remove_bear_trap</a>();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a> ) ) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="classCharacter.html#a424c2ed63fa7eccde582c12d5a97ccd3">try_remove_lightsnare</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a> ) ) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="classCharacter.html#a15ec381cee46269f4cf9e6350279a55b">try_remove_heavysnare</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a> ) ) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="classCharacter.html#a7d3ec69103f2584de4a682d9761a2ff0">try_remove_webs</a>();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">has_effect_with_flag</a>( <a class="code" href="flag_8cpp.html#a8173eeb9948b3cf79ca9df9f7b8373fc">flag_EFFECT_IMPEDING</a> ) ) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="classCharacter.html#a9679a3524ce4f0fbf043944378aa7e59">try_remove_impeding_effect</a>();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a> ) &amp;&amp; !attacking &amp;&amp; !<a class="code" href="classCharacter.html#a0a77e01c55ba24cea5cdacc16373c423">try_remove_grab</a>( <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00784">calendar.cpp:784</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter__attire_8h_html"><div class="ttname"><a href="character__attire_8h.html">character_attire.h</a></div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a016b0edc4b45fa8c6b728ba811a3c6d2"><div class="ttname"><a href="character__escape_8cpp.html#a016b0edc4b45fa8c6b728ba811a3c6d2">limb_score_balance</a></div><div class="ttdeci">static const limb_score_id limb_score_balance(&quot;balance&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a0651a103f4530a625fc7defcd7372b37"><div class="ttname"><a href="character__escape_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a></div><div class="ttdeci">static const trait_id trait_SLIMY(&quot;SLIMY&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a08481f62adb6937636ea44b855311037"><div class="ttname"><a href="character__escape_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a></div><div class="ttdeci">static const efftype_id effect_downed(&quot;downed&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a11d45bc0bc6102e76713dccfc624cbf4"><div class="ttname"><a href="character__escape_8cpp.html#a11d45bc0bc6102e76713dccfc624cbf4">effect_lightsnare</a></div><div class="ttdeci">static const efftype_id effect_lightsnare(&quot;lightsnare&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a309e3746ea5d262a99d79a007dcd8478"><div class="ttname"><a href="character__escape_8cpp.html#a309e3746ea5d262a99d79a007dcd8478">effect_crushed</a></div><div class="ttdeci">static const efftype_id effect_crushed(&quot;crushed&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a39ed030b1d7b9d4b72bcc6e3a7fc1ab0"><div class="ttname"><a href="character__escape_8cpp.html#a39ed030b1d7b9d4b72bcc6e3a7fc1ab0">limb_score_grip</a></div><div class="ttdeci">static const limb_score_id limb_score_grip(&quot;grip&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a3ae152db1439b9f44f410867d2e0a71d"><div class="ttname"><a href="character__escape_8cpp.html#a3ae152db1439b9f44f410867d2e0a71d">character_modifier_grab_break_limb_mod</a></div><div class="ttdeci">static const character_modifier_id character_modifier_grab_break_limb_mod(&quot;grab_break_limb_mod&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a4fc4b0aba8e236a37be3103f20538220"><div class="ttname"><a href="character__escape_8cpp.html#a4fc4b0aba8e236a37be3103f20538220">itype_snare_trigger</a></div><div class="ttdeci">static const itype_id itype_snare_trigger(&quot;snare_trigger&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a71121068c9dffa61c7039a6176c68250"><div class="ttname"><a href="character__escape_8cpp.html#a71121068c9dffa61c7039a6176c68250">trait_VISCOUS</a></div><div class="ttdeci">static const trait_id trait_VISCOUS(&quot;VISCOUS&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a8751ef846def36cb3c192fc18d34cc3b"><div class="ttname"><a href="character__escape_8cpp.html#a8751ef846def36cb3c192fc18d34cc3b">limb_score_manip</a></div><div class="ttdeci">static const limb_score_id limb_score_manip(&quot;manip&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a917f093dcdc3861c86a6adf734a52641"><div class="ttname"><a href="character__escape_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a></div><div class="ttdeci">static const skill_id skill_melee(&quot;melee&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_a975c4e946bc9a2d7a15e75a68743ed4e"><div class="ttname"><a href="character__escape_8cpp.html#a975c4e946bc9a2d7a15e75a68743ed4e">json_flag_DOWNED_RECOVERY</a></div><div class="ttdeci">static const json_character_flag json_flag_DOWNED_RECOVERY(&quot;DOWNED_RECOVERY&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_aa222d693ccc29efba86a3bb9f18add4e"><div class="ttname"><a href="character__escape_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a></div><div class="ttdeci">static const efftype_id effect_webbed(&quot;webbed&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_ab41f4e77a586e85f347f7151266b9dd5"><div class="ttname"><a href="character__escape_8cpp.html#ab41f4e77a586e85f347f7151266b9dd5">json_flag_GRAB</a></div><div class="ttdeci">static const flag_id json_flag_GRAB(&quot;GRAB&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_ac6bddea0c05309bc6d54e962a7dff763"><div class="ttname"><a href="character__escape_8cpp.html#ac6bddea0c05309bc6d54e962a7dff763">effect_beartrap</a></div><div class="ttdeci">static const efftype_id effect_beartrap(&quot;beartrap&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_ad22b82ceedf236ed05df55e661444c76"><div class="ttname"><a href="character__escape_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a></div><div class="ttdeci">static const skill_id skill_unarmed(&quot;unarmed&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_ad6ab53abeb2f3ee43a7a05f378f58952"><div class="ttname"><a href="character__escape_8cpp.html#ad6ab53abeb2f3ee43a7a05f378f58952">effect_in_pit</a></div><div class="ttdeci">static const efftype_id effect_in_pit(&quot;in_pit&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_ae940cd81463820c5f0fc145179c7c386"><div class="ttname"><a href="character__escape_8cpp.html#ae940cd81463820c5f0fc145179c7c386">effect_heavysnare</a></div><div class="ttdeci">static const efftype_id effect_heavysnare(&quot;heavysnare&quot;)</div></div>
<div class="ttc" id="acharacter__escape_8cpp_html_afa8cd18f8cff7e46bf11b06dc41a681a"><div class="ttname"><a href="character__escape_8cpp.html#afa8cd18f8cff7e46bf11b06dc41a681a">itype_rope_6</a></div><div class="ttdeci">static const itype_id itype_rope_6(&quot;rope_6&quot;)</div></div>
<div class="ttc" id="acharacter__martial__arts_8h_html"><div class="ttname"><a href="character__martial__arts_8h.html">character_martial_arts.h</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0a77e01c55ba24cea5cdacc16373c423"><div class="ttname"><a href="classCharacter.html#a0a77e01c55ba24cea5cdacc16373c423">Character::try_remove_grab</a></div><div class="ttdeci">bool try_remove_grab(bool attacking=false)</div><div class="ttdoc">Series of checks to remove effects for waiting or moving.</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00181">character_escape.cpp:181</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0f49fabe8d085391349e498070cc044c"><div class="ttname"><a href="classCharacter.html#a0f49fabe8d085391349e498070cc044c">Character::wait_effects</a></div><div class="ttdeci">void wait_effects(bool attacking=false)</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00427">character_escape.cpp:427</a></div></div>
<div class="ttc" id="aclassCharacter_html_a15ec381cee46269f4cf9e6350279a55b"><div class="ttname"><a href="classCharacter.html#a15ec381cee46269f4cf9e6350279a55b">Character::try_remove_heavysnare</a></div><div class="ttdeci">void try_remove_heavysnare()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00140">character_escape.cpp:140</a></div></div>
<div class="ttc" id="aclassCharacter_html_a191d57983e5a0064be49504c11e8b56a"><div class="ttname"><a href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">Character::get_modifier</a></div><div class="ttdeci">float get_modifier(const character_modifier_id &amp;mod, const skill_id &amp;skill=skill_id::NULL_ID()) const</div><div class="ttdef"><b>Definition:</b> <a href="character__modifier_8cpp_source.html#l00401">character_modifier.cpp:401</a></div></div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02724">character.h:2724</a></div></div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04131">character.cpp:4131</a></div></div>
<div class="ttc" id="aclassCharacter_html_a37772343c5d5a20510bafe1890a5a839"><div class="ttname"><a href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">Character::move_effects</a></div><div class="ttdeci">bool move_effects(bool attacking) override</div><div class="ttdoc">Processes effects which may prevent the Character from moving (bear traps, crushed,...</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00373">character_escape.cpp:373</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00578">character.h:578</a></div></div>
<div class="ttc" id="aclassCharacter_html_a424c2ed63fa7eccde582c12d5a97ccd3"><div class="ttname"><a href="classCharacter.html#a424c2ed63fa7eccde582c12d5a97ccd3">Character::try_remove_lightsnare</a></div><div class="ttdeci">void try_remove_lightsnare()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00119">character_escape.cpp:119</a></div></div>
<div class="ttc" id="aclassCharacter_html_a46302dc71cfc84856e8af85ddb61c7e1"><div class="ttname"><a href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">Character::worn</a></div><div class="ttdeci">outfit worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02690">character.h:2690</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04127">character.cpp:4127</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01732">character.cpp:1732</a></div></div>
<div class="ttc" id="aclassCharacter_html_a704ab09b0d8a22f5dddd96c8ebc22639"><div class="ttname"><a href="classCharacter.html#a704ab09b0d8a22f5dddd96c8ebc22639">Character::burn_energy_arms</a></div><div class="ttdeci">void burn_energy_arms(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06916">character.cpp:6916</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7cf71d2bd6c350f2ceda3f1d64046e63"><div class="ttname"><a href="classCharacter.html#a7cf71d2bd6c350f2ceda3f1d64046e63">Character::add_msg_player_or_npc</a></div><div class="ttdeci">virtual void add_msg_player_or_npc(const std::string &amp;, const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01060">creature.h:1060</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7d3ec69103f2584de4a682d9761a2ff0"><div class="ttname"><a href="classCharacter.html#a7d3ec69103f2584de4a682d9761a2ff0">Character::try_remove_webs</a></div><div class="ttdeci">void try_remove_webs()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00331">character_escape.cpp:331</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7db38cfe9df5a59341ed2008089df3f9"><div class="ttname"><a href="classCharacter.html#a7db38cfe9df5a59341ed2008089df3f9">Character::adjacent_tile</a></div><div class="ttdeci">tripoint adjacent_tile() const</div><div class="ttdoc">Returns an unoccupied, safe adjacent point.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07563">character.cpp:7563</a></div></div>
<div class="ttc" id="aclassCharacter_html_a85a591640ed5dec800bd4e6e42241fbf"><div class="ttname"><a href="classCharacter.html#a85a591640ed5dec800bd4e6e42241fbf">Character::forced_dismount</a></div><div class="ttdeci">void forced_dismount()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01737">character.cpp:1737</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8d6be6cfee36abb28f13fb86722bc751"><div class="ttname"><a href="classCharacter.html#a8d6be6cfee36abb28f13fb86722bc751">Character::try_remove_downed</a></div><div class="ttdeci">void try_remove_downed()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00067">character_escape.cpp:67</a></div></div>
<div class="ttc" id="aclassCharacter_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">Character::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00976">creature.h:976</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassCharacter_html_a951d934cb1eaf57e53e7aca48012d17a"><div class="ttname"><a href="classCharacter.html#a951d934cb1eaf57e53e7aca48012d17a">Character::has_grab_break_tec</a></div><div class="ttdeci">bool has_grab_break_tec() const override</div><div class="ttdoc">Returns true if the player has a grab breaking technique available.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01765">martialarts.cpp:1765</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9679a3524ce4f0fbf043944378aa7e59"><div class="ttname"><a href="classCharacter.html#a9679a3524ce4f0fbf043944378aa7e59">Character::try_remove_impeding_effect</a></div><div class="ttdeci">void try_remove_impeding_effect()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00350">character_escape.cpp:350</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9e1ccab8ff3dbde3fbd288bbf1c234f9"><div class="ttname"><a href="classCharacter.html#a9e1ccab8ff3dbde3fbd288bbf1c234f9">Character::try_remove_crushed</a></div><div class="ttdeci">void try_remove_crushed()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00170">character_escape.cpp:170</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac3d46549b7cdaac1f98991167ad5f1b3"><div class="ttname"><a href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">Character::mounted_creature</a></div><div class="ttdeci">shared_ptr_fast&lt; monster &gt; mounted_creature</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02800">character.h:2800</a></div></div>
<div class="ttc" id="aclassCharacter_html_adac3431fb1398a94b0efa74945af8484"><div class="ttname"><a href="classCharacter.html#adac3431fb1398a94b0efa74945af8484">Character::get_limb_score</a></div><div class="ttdeci">float get_limb_score(const limb_score_id &amp;score, const body_part_type::type &amp;bp=body_part_type::type::num_types, int override_encumb=-1, int override_wounds=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="character__modifier_8cpp_source.html#l00226">character_modifier.cpp:226</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_aec78049b0ee4401d3a4c073663735aad"><div class="ttname"><a href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">Character::has_flag</a></div><div class="ttdeci">virtual bool has_flag(const mon_flag_id &amp;) const</div><div class="ttdoc">This is to prevent clang complaining about overloading a virtual function, the creature version uses ...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00752">creature.h:752</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af707ac7d1e7995274f21a9f0ac740c9a"><div class="ttname"><a href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">Character::get_arm_str</a></div><div class="ttdeci">int get_arm_str() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04200">character.cpp:4200</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa4867fd3c65eb1f4fe0d5d64bef1cf6"><div class="ttname"><a href="classCharacter.html#afa4867fd3c65eb1f4fe0d5d64bef1cf6">Character::try_remove_bear_trap</a></div><div class="ttdeci">void try_remove_bear_trap()</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00087">character_escape.cpp:87</a></div></div>
<div class="ttc" id="aclassCharacter_html_afb3bc202bd5a0042434d1a022aba4a81"><div class="ttname"><a href="classCharacter.html#afb3bc202bd5a0042434d1a022aba4a81">Character::can_escape_trap</a></div><div class="ttdeci">bool can_escape_trap(int difficulty, bool manip) const</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00060">character_escape.cpp:60</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_a952f5a3103775159e193c6ee4e60979b"><div class="ttname"><a href="classCreature.html#a952f5a3103775159e193c6ee4e60979b">Creature::get_effects_with_flag</a></div><div class="ttdeci">std::vector&lt; std::reference_wrapper&lt; const effect &gt; &gt; get_effects_with_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01808">creature.cpp:1808</a></div></div>
<div class="ttc" id="aclassCreature_html_a9689d4816bc2d1204c53c114190fde50"><div class="ttname"><a href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">Creature::get_effect_int</a></div><div class="ttdeci">int get_effect_int(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns the intensity of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01872">creature.cpp:1872</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassCreature_html_aed2af9ad3e8abd06b3c3c4f1adaf607e"><div class="ttname"><a href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">Creature::has_effect_with_flag</a></div><div class="ttdeci">bool has_effect_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has any effect with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01792">creature.cpp:1792</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00260">effect.h:261</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a4417ea41f79e4b624612ae64ebac1d07"><div class="ttname"><a href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0, const std::set&lt; flag_id &gt; &amp;flags={}, const std::string &amp;variant=&quot;&quot;, const std::string &amp;faction=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05100">map.cpp:5100</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a1ff84827bdbc7ba7be2fffb53f5362e6"><div class="ttname"><a href="classmonster.html#a1ff84827bdbc7ba7be2fffb53f5362e6">monster::is_grabbing</a></div><div class="ttdeci">bool is_grabbing(bodypart_str_id bp)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02519">monster.cpp:2519</a></div></div>
<div class="ttc" id="aclassmonster_html_a7cb9d9786d11c2c0926d3482d3f51ffe"><div class="ttname"><a href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">monster::name</a></div><div class="ttdeci">std::string name(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00722">monster.cpp:722</a></div></div>
<div class="ttc" id="aclassmonster_html_aa16651738b2e1ab517fde90b5108fc89"><div class="ttname"><a href="classmonster.html#aa16651738b2e1ab517fde90b5108fc89">monster::remove_grab</a></div><div class="ttdeci">void remove_grab(bodypart_str_id bp)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02511">monster.cpp:2511</a></div></div>
<div class="ttc" id="aclassmonster_html_af3444e4763b1dd53e75c5ea50fd8ba9f"><div class="ttname"><a href="classmonster.html#af3444e4763b1dd53e75c5ea50fd8ba9f">monster::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00775">monster.cpp:775</a></div></div>
<div class="ttc" id="aclassoutfit_html_a087ea131fcd9e1682ed2e35a0e9febbc"><div class="ttname"><a href="classoutfit.html#a087ea131fcd9e1682ed2e35a0e9febbc">outfit::clothing_wetness_mult</a></div><div class="ttdeci">float clothing_wetness_mult(const bodypart_id &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l02629">character_attire.cpp:2629</a></div></div>
<div class="ttc" id="aclassoutfit_html_a8989ae0dd1bbe2e8bde9ad4945125289"><div class="ttname"><a href="classoutfit.html#a8989ae0dd1bbe2e8bde9ad4945125289">outfit::grab_drop_pockets</a></div><div class="ttdeci">std::vector&lt; item_pocket * &gt; grab_drop_pockets()</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l02650">character_attire.cpp:2650</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; character_modifier &gt;</a></div></div>
<div class="ttc" id="aclasstripoint__range_html"><div class="ttname"><a href="classtripoint__range.html">tripoint_range</a></div><div class="ttdef"><b>Definition:</b> <a href="map__iterator_8h_source.html#l00012">map_iterator.h:13</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html"><div class="ttname"><a href="creature__tracker_8h.html">creature_tracker.h</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="adamage_8h_html"><div class="ttname"><a href="damage_8h.html">damage.h</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a8173eeb9948b3cf79ca9df9f7b8373fc"><div class="ttname"><a href="flag_8cpp.html#a8173eeb9948b3cf79ca9df9f7b8373fc">flag_EFFECT_IMPEDING</a></div><div class="ttdeci">const flag_id flag_EFFECT_IMPEDING(&quot;EFFECT_IMPEDING&quot;)</div></div>
<div class="ttc" id="aflag_8h_html"><div class="ttname"><a href="flag_8h.html">flag.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__pocket_8h_html"><div class="ttname"><a href="item__pocket_8h.html">item_pocket.h</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amap__iterator_8h_html"><div class="ttname"><a href="map__iterator_8h.html">map_iterator.h</a></div></div>
<div class="ttc" id="amartialarts_8h_html"><div class="ttname"><a href="martialarts_8h.html">martialarts.h</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amtype_8h_html"><div class="ttname"><a href="mtype_8h.html">mtype.h</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a06b26a3d79dd171e505cf88e89ede5bb">debugmode::DF_MATTACK</a></div><div class="ttdeci">@ DF_MATTACK</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00262">debug.h:262</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="apimpl_8h_html"><div class="ttname"><a href="pimpl_8h.html">pimpl.h</a></div></div>
<div class="ttc" id="apoint_8h_html"><div class="ttname"><a href="point_8h.html">point.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="astructgrab_html"><div class="ttname"><a href="structgrab.html">grab</a></div><div class="ttdef"><b>Definition:</b> <a href="mattack__actors_8h_source.html#l00075">mattack_actors.h:75</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="atranslation_8h_html"><div class="ttname"><a href="translation_8h.html">translation.h</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:26 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
