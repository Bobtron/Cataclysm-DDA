<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: dialogue Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="structdialogue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dialogue Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="dialogue_8h_source.html">dialogue.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7ceba192f34968276a0e86a30b3a569b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__topic.html">talk_topic</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a7ceba192f34968276a0e86a30b3a569b">opt</a> (<a class="el" href="classdialogue__window.html">dialogue_window</a> &amp;d_win, const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;topic)</td></tr>
<tr class="separator:a7ceba192f34968276a0e86a30b3a569b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c27fbdb8e2dae85a86720eb5a11bc87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a8c27fbdb8e2dae85a86720eb5a11bc87">dialogue</a> ()=default</td></tr>
<tr class="separator:a8c27fbdb8e2dae85a86720eb5a11bc87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9911380f8973b0ad09709dd428a1746"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#af9911380f8973b0ad09709dd428a1746">dialogue</a> (const <a class="el" href="structdialogue.html">dialogue</a> &amp;d)</td></tr>
<tr class="separator:af9911380f8973b0ad09709dd428a1746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5d08aaebf3af8f017f93d529d44698"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a3b5d08aaebf3af8f017f93d529d44698">dialogue</a> (<a class="el" href="structdialogue.html">dialogue</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a3b5d08aaebf3af8f017f93d529d44698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af599c40bde1747fefd003f27151452bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#af599c40bde1747fefd003f27151452bf">operator=</a> (const <a class="el" href="structdialogue.html">dialogue</a> &amp;)</td></tr>
<tr class="separator:af599c40bde1747fefd003f27151452bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc84991ebea278008276cb1f98f67e66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#afc84991ebea278008276cb1f98f67e66">operator=</a> (<a class="el" href="structdialogue.html">dialogue</a> &amp;&amp;)=default</td></tr>
<tr class="separator:afc84991ebea278008276cb1f98f67e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9fee6b0be720714a70220a9ac8f786c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ae9fee6b0be720714a70220a9ac8f786c">dialogue</a> (std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; alpha_in, std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; beta_in)</td></tr>
<tr class="separator:ae9fee6b0be720714a70220a9ac8f786c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9593a1095c04353ef678940e605e78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#afd9593a1095c04353ef678940e605e78">dialogue</a> (std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; alpha_in, std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; beta_in, const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt;&gt; &amp;cond)</td></tr>
<tr class="separator:afd9593a1095c04353ef678940e605e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c34fae878ddd5bc1e47c2199ccdbfa0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a4c34fae878ddd5bc1e47c2199ccdbfa0">dialogue</a> (std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; alpha_in, std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt; beta_in, const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt;&gt; &amp;cond, const std::unordered_map&lt; std::string, std::string &gt; &amp;ctx)</td></tr>
<tr class="separator:a4c34fae878ddd5bc1e47c2199ccdbfa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4204ef07d9db03f188e23a832f2915c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtalker.html">talker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a> (bool is_beta) const</td></tr>
<tr class="separator:a4204ef07d9db03f188e23a832f2915c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32c86877be5f78069596a846bbc0cbd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ad32c86877be5f78069596a846bbc0cbd">dynamic_line</a> (const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;topic)</td></tr>
<tr class="separator:ad32c86877be5f78069596a846bbc0cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7343c934a16a58a3324e970a2c5693b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ae7343c934a16a58a3324e970a2c5693b">apply_speaker_effects</a> (const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;the_topic)</td></tr>
<tr class="separator:ae7343c934a16a58a3324e970a2c5693b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac074903e749e4c545aac860ebc4a19a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ac074903e749e4c545aac860ebc4a19a2">gen_responses</a> (const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;topic)</td></tr>
<tr class="separator:ac074903e749e4c545aac860ebc4a19a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8eef62024b216c155b913ff1c9e8e40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#af8eef62024b216c155b913ff1c9e8e40">add_topic</a> (const std::string &amp;topic)</td></tr>
<tr class="separator:af8eef62024b216c155b913ff1c9e8e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ee2de29d9de689f777018668e00196"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a85ee2de29d9de689f777018668e00196">add_topic</a> (const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;topic)</td></tr>
<tr class="separator:a85ee2de29d9de689f777018668e00196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1d716834958c323b7a213564097152"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a9f1d716834958c323b7a213564097152">set_value</a> (const std::string &amp;key, const std::string &amp;value)</td></tr>
<tr class="separator:a9f1d716834958c323b7a213564097152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16866232da3554091bbcbc9c36b36d95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a16866232da3554091bbcbc9c36b36d95">remove_value</a> (const std::string &amp;key)</td></tr>
<tr class="separator:a16866232da3554091bbcbc9c36b36d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1c28df053324719955d026ce04c296"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a5f1c28df053324719955d026ce04c296">get_value</a> (const std::string &amp;key) const</td></tr>
<tr class="separator:a5f1c28df053324719955d026ce04c296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2306f9312691d79ae537271545048105"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a2306f9312691d79ae537271545048105">maybe_get_value</a> (const std::string &amp;key) const</td></tr>
<tr class="separator:a2306f9312691d79ae537271545048105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b43734f396689f00e32bc85cf8f3e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a89b43734f396689f00e32bc85cf8f3e9">set_conditional</a> (const std::string &amp;key, const std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt; &amp;value)</td></tr>
<tr class="separator:a89b43734f396689f00e32bc85cf8f3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a048cb04c5c2beeb05cdbfcb89dcfaf01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a048cb04c5c2beeb05cdbfcb89dcfaf01">evaluate_conditional</a> (const std::string &amp;key, <a class="el" href="structdialogue.html">dialogue</a> &amp;d)</td></tr>
<tr class="separator:a048cb04c5c2beeb05cdbfcb89dcfaf01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d74e9f39dedfa3e29f4e8d517bb20b3"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; std::string, std::string &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a2d74e9f39dedfa3e29f4e8d517bb20b3">get_context</a> () const</td></tr>
<tr class="separator:a2d74e9f39dedfa3e29f4e8d517bb20b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a20f20f7513214d8d3e85669f7f919"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#aa9a20f20f7513214d8d3e85669f7f919">get_conditionals</a> () const</td></tr>
<tr class="separator:aa9a20f20f7513214d8d3e85669f7f919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bfa556c65a327f15f6ca78dbcd7c21a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a9bfa556c65a327f15f6ca78dbcd7c21a">amend_callstack</a> (const std::string &amp;value)</td></tr>
<tr class="separator:a9bfa556c65a327f15f6ca78dbcd7c21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f13d548123aa0d5243d30dbdbeea826"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a> () const</td></tr>
<tr class="separator:a7f13d548123aa0d5243d30dbdbeea826"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aaa677a645faccbd6f4ac7781b7ceb894"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#aaa677a645faccbd6f4ac7781b7ceb894">done</a> = false</td></tr>
<tr class="memdesc:aaa677a645faccbd6f4ac7781b7ceb894"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, we are done talking and the dialog ends.  <a href="structdialogue.html#aaa677a645faccbd6f4ac7781b7ceb894">More...</a><br /></td></tr>
<tr class="separator:aaa677a645faccbd6f4ac7781b7ceb894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90f3050bf6d9257d3e16b69086f526e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtalk__topic.html">talk_topic</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">topic_stack</a></td></tr>
<tr class="separator:aa90f3050bf6d9257d3e16b69086f526e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0883e28c7c29ffdfb4ba6cd2fcf2d06"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classmission.html">mission</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">missions_assigned</a></td></tr>
<tr class="memdesc:af0883e28c7c29ffdfb4ba6cd2fcf2d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Missions that have been assigned by this npc to the player they currently speak to.  <a href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">More...</a><br /></td></tr>
<tr class="separator:af0883e28c7c29ffdfb4ba6cd2fcf2d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b356491a4ba3a81d77cc9a12a207856"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a8b356491a4ba3a81d77cc9a12a207856">cur_item</a></td></tr>
<tr class="separator:a8b356491a4ba3a81d77cc9a12a207856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691be501b1d6b306af9f18ef48d1f01a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a691be501b1d6b306af9f18ef48d1f01a">reason</a></td></tr>
<tr class="separator:a691be501b1d6b306af9f18ef48d1f01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23fd3c22838562075db010d68e8ce55f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a23fd3c22838562075db010d68e8ce55f">by_radio</a> = false</td></tr>
<tr class="memdesc:a23fd3c22838562075db010d68e8ce55f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This dialogue is happening over a radio.  <a href="structdialogue.html#a23fd3c22838562075db010d68e8ce55f">More...</a><br /></td></tr>
<tr class="separator:a23fd3c22838562075db010d68e8ce55f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015666472bdcaf3a21d69dbdfa40dc1c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtalk__response.html">talk_response</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a></td></tr>
<tr class="memdesc:a015666472bdcaf3a21d69dbdfa40dc1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible responses from the player character, filled in <a class="el" href="structdialogue.html#ac074903e749e4c545aac860ebc4a19a2">gen_responses</a>.  <a href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">More...</a><br /></td></tr>
<tr class="separator:a015666472bdcaf3a21d69dbdfa40dc1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac987b3dc38e2963e3dc1c48428db380"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a></td></tr>
<tr class="separator:aac987b3dc38e2963e3dc1c48428db380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54fd2f389b1557af627131516f6890f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a></td></tr>
<tr class="separator:ab54fd2f389b1557af627131516f6890f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:acc03b8a868625fd7d74772bed41abdc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a> (const std::string &amp;text, const std::string &amp;r, bool first=false)</td></tr>
<tr class="memdesc:acc03b8a868625fd7d74772bed41abdc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one.  <a href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">More...</a><br /></td></tr>
<tr class="separator:acc03b8a868625fd7d74772bed41abdc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a099d9372066f6a2d00a7a4140307a4a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">add_response_done</a> (const std::string &amp;text)</td></tr>
<tr class="memdesc:a099d9372066f6a2d00a7a4140307a4a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a response with the result TALK_DONE.  <a href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">More...</a><br /></td></tr>
<tr class="separator:a099d9372066f6a2d00a7a4140307a4a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bf9da647cd274f90afdb7b5331c6a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a> (const std::string &amp;text)</td></tr>
<tr class="memdesc:ae0bf9da647cd274f90afdb7b5331c6a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a response with the result TALK_NONE.  <a href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">More...</a><br /></td></tr>
<tr class="separator:ae0bf9da647cd274f90afdb7b5331c6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1460d4b520068e8cc420ff626d4b4d3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a1460d4b520068e8cc420ff626d4b4d3e">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="dialogue_8h.html#a43aa00543a5e6b790faa3cea84ba01b6">dialogue_fun_ptr</a> &amp;effect_success, bool first=false)</td></tr>
<tr class="memdesc:a1460d4b520068e8cc420ff626d4b4d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and executes the given action.  <a href="structdialogue.html#a1460d4b520068e8cc420ff626d4b4d3e">More...</a><br /></td></tr>
<tr class="separator:a1460d4b520068e8cc420ff626d4b4d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5172a0ca990c9f7c0e5acfa9c2efc1f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a5172a0ca990c9f7c0e5acfa9c2efc1f8">add_response</a> (const std::string &amp;text, const std::string &amp;r, const std::function&lt; void(<a class="el" href="classnpc.html">npc</a> &amp;)&gt; &amp;effect_success, <a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71">dialogue_consequence</a> consequence, bool first=false)</td></tr>
<tr class="memdesc:a5172a0ca990c9f7c0e5acfa9c2efc1f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and executes the given action.  <a href="structdialogue.html#a5172a0ca990c9f7c0e5acfa9c2efc1f8">More...</a><br /></td></tr>
<tr class="separator:a5172a0ca990c9f7c0e5acfa9c2efc1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6fb4b6e79356838e69df8b5d126668"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a3b6fb4b6e79356838e69df8b5d126668">add_response</a> (const std::string &amp;text, const std::string &amp;r, <a class="el" href="classmission.html">mission</a> *miss, bool first=false)</td></tr>
<tr class="memdesc:a3b6fb4b6e79356838e69df8b5d126668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about mission to the given one.  <a href="structdialogue.html#a3b6fb4b6e79356838e69df8b5d126668">More...</a><br /></td></tr>
<tr class="separator:a3b6fb4b6e79356838e69df8b5d126668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627a44501ac098ea98dfabf899721001"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a627a44501ac098ea98dfabf899721001">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a> &amp;skill, bool first=false)</td></tr>
<tr class="memdesc:a627a44501ac098ea98dfabf899721001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about skill to the given one.  <a href="structdialogue.html#a627a44501ac098ea98dfabf899721001">More...</a><br /></td></tr>
<tr class="separator:a627a44501ac098ea98dfabf899721001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d121d9bc181f627dfe3cddebf949a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ac8d121d9bc181f627dfe3cddebf949a3">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="type__id_8h.html#a3eacdceec9e9a9ff9da9c9167aacc582">proficiency_id</a> &amp;<a class="el" href="classproficiency.html">proficiency</a>, bool first=false)</td></tr>
<tr class="memdesc:ac8d121d9bc181f627dfe3cddebf949a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about proficiency to the given one.  <a href="structdialogue.html#ac8d121d9bc181f627dfe3cddebf949a3">More...</a><br /></td></tr>
<tr class="separator:ac8d121d9bc181f627dfe3cddebf949a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8e7620d131749e9476dee09bdff623"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#adc8e7620d131749e9476dee09bdff623">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp, bool first=false)</td></tr>
<tr class="memdesc:adc8e7620d131749e9476dee09bdff623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about magic spell to the given one.  <a href="structdialogue.html#adc8e7620d131749e9476dee09bdff623">More...</a><br /></td></tr>
<tr class="separator:adc8e7620d131749e9476dee09bdff623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a850b0c5f6c2513c87ef1b92ef3839f5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a850b0c5f6c2513c87ef1b92ef3839f5f">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="classmartialart.html">martialart</a> &amp;style, bool first=false)</td></tr>
<tr class="memdesc:a850b0c5f6c2513c87ef1b92ef3839f5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about martial art style to the given one.  <a href="structdialogue.html#a850b0c5f6c2513c87ef1b92ef3839f5f">More...</a><br /></td></tr>
<tr class="separator:a850b0c5f6c2513c87ef1b92ef3839f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc28e17720c32efcc2d603278cdf543f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtalk__response.html">talk_response</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#adc28e17720c32efcc2d603278cdf543f">add_response</a> (const std::string &amp;text, const std::string &amp;r, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;item_type, bool first=false)</td></tr>
<tr class="memdesc:adc28e17720c32efcc2d603278cdf543f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a simple response that switches the topic to the new one and sets the currently talked about item type to the given one.  <a href="structdialogue.html#adc28e17720c32efcc2d603278cdf543f">More...</a><br /></td></tr>
<tr class="separator:adc28e17720c32efcc2d603278cdf543f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad780435f9d234429325eef47a81673d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ad780435f9d234429325eef47a81673d5">get_best_quit_response</a> ()</td></tr>
<tr class="memdesc:ad780435f9d234429325eef47a81673d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the best response to use when the player is trying to quit.  <a href="structdialogue.html#ad780435f9d234429325eef47a81673d5">More...</a><br /></td></tr>
<tr class="separator:ad780435f9d234429325eef47a81673d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab1772390a9c74cd9e3a68078741696c2"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a></td></tr>
<tr class="memdesc:ab1772390a9c74cd9e3a68078741696c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The talker that speaks (almost certainly representing the avatar, ie <a class="el" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar()</a> )  <a href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">More...</a><br /></td></tr>
<tr class="separator:ab1772390a9c74cd9e3a68078741696c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af57807b78ce93c05493ea92fcf69b246"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a></td></tr>
<tr class="memdesc:af57807b78ce93c05493ea92fcf69b246"><td class="mdescLeft">&#160;</td><td class="mdescRight">The talker responded to alpha, usually a <a class="el" href="classtalker__npc.html">talker_npc</a>.  <a href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">More...</a><br /></td></tr>
<tr class="separator:af57807b78ce93c05493ea92fcf69b246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2aba079b2bc8d5f237f65b3afeaf6a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlazy.html">lazy</a>&lt; std::unordered_map&lt; std::string, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a></td></tr>
<tr class="separator:ae2aba079b2bc8d5f237f65b3afeaf6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e62f92651989e72ce6bab1c719be87"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a></td></tr>
<tr class="separator:a66e62f92651989e72ce6bab1c719be87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c26d027c003374496e4e11b146106b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlazy.html">lazy</a>&lt; std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a></td></tr>
<tr class="separator:a7c26d027c003374496e4e11b146106b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00184">184</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8c27fbdb8e2dae85a86720eb5a11bc87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c27fbdb8e2dae85a86720eb5a11bc87">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af9911380f8973b0ad09709dd428a1746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9911380f8973b0ad09709dd428a1746">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02379">2379</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                                      : <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a>( d.<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ), <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a>( d.<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> )</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;{</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> ) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a> = d.<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#ac3ad15e3e14bf5c6d429b752e89f8ea9">clone</a>();</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a> = d.<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#ac3ad15e3e14bf5c6d429b752e89f8ea9">clone</a>();</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> &amp;&amp; !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Constructed a dialogue with no actors!  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">if</span>( d.<a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>.<a class="code" href="structlazy.html#a25e176f6c52aa83e607f000f4cd1ec84">has_value</a>() ) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a> = *d.<a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">if</span>( d.<a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>.<a class="code" href="structlazy.html#a25e176f6c52aa83e607f000f4cd1ec84">has_value</a>() ) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a> = *d.<a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a> = d.<a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div>
<div class="ttc" id="aclasstalker_html_ac3ad15e3e14bf5c6d429b752e89f8ea9"><div class="ttname"><a href="classtalker.html#ac3ad15e3e14bf5c6d429b752e89f8ea9">talker::clone</a></div><div class="ttdeci">virtual std::unique_ptr&lt; talker &gt; clone() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00039">talker.h:39</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="astructdialogue_html_a4204ef07d9db03f188e23a832f2915c8"><div class="ttname"><a href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">dialogue::actor</a></div><div class="ttdeci">talker * actor(bool is_beta) const</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02357">npctalk.cpp:2357</a></div></div>
<div class="ttc" id="astructdialogue_html_a66e62f92651989e72ce6bab1c719be87"><div class="ttname"><a href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">dialogue::callstack</a></div><div class="ttdeci">std::string callstack</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00253">dialogue.h:253</a></div></div>
<div class="ttc" id="astructdialogue_html_a7c26d027c003374496e4e11b146106b0"><div class="ttname"><a href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">dialogue::conditionals</a></div><div class="ttdeci">lazy&lt; std::unordered_map&lt; std::string, std::function&lt; bool(dialogue &amp;)&gt; &gt; &gt; conditionals</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00256">dialogue.h:256</a></div></div>
<div class="ttc" id="astructdialogue_html_a7f13d548123aa0d5243d30dbdbeea826"><div class="ttname"><a href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">dialogue::get_callstack</a></div><div class="ttdeci">std::string get_callstack() const</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02349">npctalk.cpp:2349</a></div></div>
<div class="ttc" id="astructdialogue_html_aac987b3dc38e2963e3dc1c48428db380"><div class="ttname"><a href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">dialogue::has_beta</a></div><div class="ttdeci">bool has_beta</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00224">dialogue.h:224</a></div></div>
<div class="ttc" id="astructdialogue_html_ab1772390a9c74cd9e3a68078741696c2"><div class="ttname"><a href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">dialogue::alpha</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; alpha</div><div class="ttdoc">The talker that speaks (almost certainly representing the avatar, ie get_avatar() )</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00244">dialogue.h:244</a></div></div>
<div class="ttc" id="astructdialogue_html_ab54fd2f389b1557af627131516f6890f"><div class="ttname"><a href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">dialogue::has_alpha</a></div><div class="ttdeci">bool has_alpha</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00225">dialogue.h:225</a></div></div>
<div class="ttc" id="astructdialogue_html_ae2aba079b2bc8d5f237f65b3afeaf6a1"><div class="ttname"><a href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">dialogue::context</a></div><div class="ttdeci">lazy&lt; std::unordered_map&lt; std::string, std::string &gt; &gt; context</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00251">dialogue.h:251</a></div></div>
<div class="ttc" id="astructdialogue_html_af57807b78ce93c05493ea92fcf69b246"><div class="ttname"><a href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">dialogue::beta</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; beta</div><div class="ttdoc">The talker responded to alpha, usually a talker_npc.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00248">dialogue.h:248</a></div></div>
<div class="ttc" id="astructlazy_html_a25e176f6c52aa83e607f000f4cd1ec84"><div class="ttname"><a href="structlazy.html#a25e176f6c52aa83e607f000f4cd1ec84">lazy::has_value</a></div><div class="ttdeci">bool has_value() const</div><div class="ttdef"><b>Definition:</b> <a href="cata__lazy_8h_source.html#l00020">cata_lazy.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="dialogue_8h_source.html#l00244">alpha</a>, <a class="el" href="dialogue_8h_source.html#l00248">beta</a>, <a class="el" href="dialogue_8h_source.html#l00253">callstack</a>, <a class="el" href="talker_8h_source.html#l00039">talker::clone()</a>, <a class="el" href="dialogue_8h_source.html#l00256">conditionals</a>, <a class="el" href="dialogue_8h_source.html#l00251">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>, <a class="el" href="dialogue_8h_source.html#l00225">has_alpha</a>, <a class="el" href="dialogue_8h_source.html#l00224">has_beta</a>, and <a class="el" href="cata__lazy_8h_source.html#l00020">lazy&lt; T, typename &gt;::has_value()</a>.</p>

</div>
</div>
<a id="a3b5d08aaebf3af8f017f93d529d44698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5d08aaebf3af8f017f93d529d44698">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdialogue.html">dialogue</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae9fee6b0be720714a70220a9ac8f786c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9fee6b0be720714a70220a9ac8f786c">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>alpha_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>beta_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02399">2399</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                                                    : <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a>( std::move( alpha_in ) ), <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a>( std::move( beta_in ) )</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;{</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> = <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> = <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> &amp;&amp; !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Constructed a dialogue with no actors!  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    }</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00244">alpha</a>, <a class="el" href="dialogue_8h_source.html#l00248">beta</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>, <a class="el" href="dialogue_8h_source.html#l00225">has_alpha</a>, and <a class="el" href="dialogue_8h_source.html#l00224">has_beta</a>.</p>

</div>
</div>
<a id="afd9593a1095c04353ef678940e605e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9593a1095c04353ef678940e605e78">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>alpha_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>beta_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>cond</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02409">2409</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                                                                                               : <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a>( std::move(</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                                    alpha_in ) ), <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a>( std::move( beta_in ) ), <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>( cond )</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;{</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> = <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> = <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> &amp;&amp; !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Constructed a dialogue with no actors!  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00244">alpha</a>, <a class="el" href="dialogue_8h_source.html#l00248">beta</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>, <a class="el" href="dialogue_8h_source.html#l00225">has_alpha</a>, and <a class="el" href="dialogue_8h_source.html#l00224">has_beta</a>.</p>

</div>
</div>
<a id="a4c34fae878ddd5bc1e47c2199ccdbfa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c34fae878ddd5bc1e47c2199ccdbfa0">&#9670;&nbsp;</a></span>dialogue() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dialogue::dialogue </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>alpha_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classtalker.html">talker</a> &gt;&#160;</td>
          <td class="paramname"><em>beta_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02421">2421</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                                                                        : <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a>( std::move( alpha_in ) ),</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a>( std::move( beta_in ) ), <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>( ctx ), <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>( cond )</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;{</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> = <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> = <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160; </div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> &amp;&amp; !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Constructed a dialogue with no actors!  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    }</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00244">alpha</a>, <a class="el" href="dialogue_8h_source.html#l00248">beta</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>, <a class="el" href="dialogue_8h_source.html#l00225">has_alpha</a>, and <a class="el" href="dialogue_8h_source.html#l00224">has_beta</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4204ef07d9db03f188e23a832f2915c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4204ef07d9db03f188e23a832f2915c8">&#9670;&nbsp;</a></span>actor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtalker.html">talker</a> * dialogue::actor </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_beta</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02357">2357</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;{</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> &amp;&amp; !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> ) {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to use a dialogue with no actors!  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02math__parser__diag_8cpp_03.html#a01806021d3d3038c171f48c604872bcf">is_beta</a> &amp;&amp; !<a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to use an invalid beta talker.  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <span class="comment">// Try to avoid a crash by using the alpha if it exists</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> ) {</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a>.get();</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        }</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceanonymous__namespace_02math__parser__diag_8cpp_03.html#a01806021d3d3038c171f48c604872bcf">is_beta</a> &amp;&amp; !<a class="code" href="structdialogue.html#ab54fd2f389b1557af627131516f6890f">has_alpha</a> ) {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to use an invalid alpha talker.  %s&quot;</span>, <a class="code" href="structdialogue.html#a7f13d548123aa0d5243d30dbdbeea826">get_callstack</a>() );</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        <span class="comment">// Try to avoid a crash by using the beta if it exists</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#aac987b3dc38e2963e3dc1c48428db380">has_beta</a> ) {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a>.get();</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="namespaceanonymous__namespace_02math__parser__diag_8cpp_03.html#a01806021d3d3038c171f48c604872bcf">is_beta</a> ? <a class="code" href="structdialogue.html#af57807b78ce93c05493ea92fcf69b246">beta</a> : <a class="code" href="structdialogue.html#ab1772390a9c74cd9e3a68078741696c2">alpha</a> ).get();</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;}</div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser__diag_8cpp_03_html_a01806021d3d3038c171f48c604872bcf"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser__diag_8cpp_03.html#a01806021d3d3038c171f48c604872bcf">anonymous_namespace{math_parser_diag.cpp}::is_beta</a></div><div class="ttdeci">bool is_beta(char scope)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__diag_8cpp_source.html#l00059">math_parser_diag.cpp:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00244">alpha</a>, <a class="el" href="dialogue_8h_source.html#l00248">beta</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>, <a class="el" href="dialogue_8h_source.html#l00225">has_alpha</a>, <a class="el" href="dialogue_8h_source.html#l00224">has_beta</a>, and <a class="el" href="math__parser__diag_8cpp_source.html#l00059">anonymous_namespace{math_parser_diag.cpp}::is_beta()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02277">add_topic()</a>, <a class="el" href="npctalk_8cpp_source.html#l06246">talk_effect_t::apply()</a>, <a class="el" href="npctalk_8cpp_source.html#l01914">talk_trial::calc_chance()</a>, <a class="el" href="npctalk_8cpp_source.html#l02435">talk_response::create_option_line()</a>, <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l01420">dynamic_line()</a>, <a class="el" href="npctalk_8cpp_source.html#l04748">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_activate()</a>, <a class="el" href="npctalk_8cpp_source.html#l03453">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_add_debt()</a>, <a class="el" href="npctalk_8cpp_source.html#l05732">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_add_faction_trust()</a>, <a class="el" href="npctalk_8cpp_source.html#l04099">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_add_mission()</a>, <a class="el" href="npctalk_8cpp_source.html#l05703">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_add_morale()</a>, <a class="el" href="npctalk_8cpp_source.html#l04309">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_add_wet()</a>, <a class="el" href="npctalk_8cpp_source.html#l04296">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_assign_activity()</a>, <a class="el" href="npctalk_8cpp_source.html#l04527">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_attack()</a>, <a class="el" href="npctalk_8cpp_source.html#l03994">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_bulk_trade_accept()</a>, <a class="el" href="npctalk_8cpp_source.html#l04447">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_cast_spell()</a>, <a class="el" href="npctalk_8cpp_source.html#l03445">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_change_faction_rep()</a>, <a class="el" href="npctalk_8cpp_source.html#l03491">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_clear_npc_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l03348">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_consume_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l04549">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_die()</a>, <a class="el" href="npctalk_8cpp_source.html#l06092">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_field()</a>, <a class="el" href="npctalk_8cpp_source.html#l04144">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_forget_recipe()</a>, <a class="el" href="npctalk_8cpp_source.html#l05768">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_give_equipment()</a>, <a class="el" href="npctalk_8cpp_source.html#l03975">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_guard_pos()</a>, <a class="el" href="npctalk_8cpp_source.html#l04134">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_learn_recipe()</a>, <a class="el" href="npctalk_8cpp_source.html#l03534">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_location_variable()</a>, <a class="el" href="npctalk_8cpp_source.html#l05740">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_lose_faction_trust()</a>, <a class="el" href="npctalk_8cpp_source.html#l05723">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_lose_morale()</a>, <a class="el" href="npctalk_8cpp_source.html#l04814">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_make_sound()</a>, <a class="el" href="npctalk_8cpp_source.html#l05330">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_map_run_item_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l03839">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_mapgen_update()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, <a class="el" href="npctalk_8cpp_source.html#l04435">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_mod_healthy()</a>, <a class="el" href="npctalk_8cpp_source.html#l03508">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_aim_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l03525">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_cbm_recharge_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l03516">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_cbm_reserve_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l03437">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_change_class()</a>, <a class="el" href="npctalk_8cpp_source.html#l03429">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_change_faction()</a>, <a class="el" href="npctalk_8cpp_source.html#l03499">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_engagement_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l04165">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_first_topic()</a>, <a class="el" href="npctalk_8cpp_source.html#l04092">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_gets_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l03944">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_goal()</a>, <a class="el" href="npctalk_8cpp_source.html#l04688">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_offer_mission()</a>, <a class="el" href="npctalk_8cpp_source.html#l04321">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_open_dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l04556">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_prevent_death()</a>, <a class="el" href="npctalk_8cpp_source.html#l05459">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_queue_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l03403">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_remove_item_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05626">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_roll_remainder()</a>, <a class="el" href="npctalk_8cpp_source.html#l04931">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_selector()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05298">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_inv_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05250">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_monster_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05188">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_npc_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l04714">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_flag()</a>, <a class="el" href="npctalk_8cpp_source.html#l03483">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_npc_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l04582">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_string_var()</a>, <a class="el" href="npctalk_8cpp_source.html#l05411">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_talker()</a>, <a class="el" href="npctalk_8cpp_source.html#l05798">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_spawn_monster()</a>, <a class="el" href="npctalk_8cpp_source.html#l05978">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_spawn_npc()</a>, <a class="el" href="npctalk_8cpp_source.html#l04360">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_take_control()</a>, <a class="el" href="npctalk_8cpp_source.html#l06129">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_teleport()</a>, <a class="el" href="npctalk_8cpp_source.html#l03475">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_toggle_npc_rule()</a>, <a class="el" href="npctalk_8cpp_source.html#l04796">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_transform_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l03759">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_transform_radius()</a>, <a class="el" href="npctalk_8cpp_source.html#l04154">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_turn_cost()</a>, <a class="el" href="npctalk_8cpp_source.html#l03258">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_u_buy_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l04107">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_u_buy_monster()</a>, <a class="el" href="npctalk_8cpp_source.html#l03302">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_u_sell_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l03415">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_u_spend_cash()</a>, <a class="el" href="npctalk_8cpp_source.html#l04731">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_unset_flag()</a>, <a class="el" href="npctalk_8cpp_source.html#l06168">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_wants_to_talk()</a>, <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l07069">json_talk_topic::gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l02496">talk_effect_t::get_consequence()</a>, <a class="el" href="condition_8cpp_source.html#l02183">conditional_t::get_set_dbl()</a>, <a class="el" href="condition_8cpp_source.html#l00374">get_tripoint_from_var()</a>, <a class="el" href="npctalk_8cpp_source.html#l06977">json_dynamic_line_effect::json_dynamic_line_effect()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00010">maybe_read_var_value()</a>, <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>, <a class="el" href="npctalk_8cpp_source.html#l01889">parse_mod()</a>, <a class="el" href="npctalk_8cpp_source.html#l05422">talk_effect_fun::anonymous_namespace{npctalk.cpp}::process_eoc()</a>, <a class="el" href="npctalk_8cpp_source.html#l03122">talk_effect_fun::anonymous_namespace{npctalk.cpp}::receive_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l01952">talk_trial::roll()</a>, <a class="el" href="npctalk_8cpp_source.html#l02808">run_item_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l06787">translate_gendered_line()</a>, <a class="el" href="npctalk_8cpp_source.html#l06278">talk_effect_t::update_missions()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="acc03b8a868625fd7d74772bed41abdc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc03b8a868625fd7d74772bed41abdc7">&#9670;&nbsp;</a></span>add_response() <span class="overload">[1/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one. </p>
<p>If first == true, force this topic to the front of the responses. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01592">1592</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;{</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> result = <a class="code" href="structtalk__response.html">talk_response</a>();</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    result.<a class="code" href="structtalk__response.html#a523306165171388dc0e4a1aae486466f">truetext</a> = <a class="code" href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a>( text );</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    result.<a class="code" href="structtalk__response.html#a838c5e67add9d5865a33743c23ba88d8">truefalse_condition</a> = []( <span class="keyword">const</span> <a class="code" href="structdialogue.html">dialogue</a> &amp; ) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    };</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    result.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#a52fa0697f1c378cdea64c440e735e16d">next_topic</a> = <a class="code" href="structtalk__topic.html">talk_topic</a>( r );</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span>( first ) {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.insert( <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.begin(), result );</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.front();</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.push_back( result );</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.back();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;}</div>
<div class="ttc" id="astructdialogue_html"><div class="ttname"><a href="structdialogue.html">dialogue</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00184">dialogue.h:184</a></div></div>
<div class="ttc" id="astructdialogue_html_a015666472bdcaf3a21d69dbdfa40dc1c"><div class="ttname"><a href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">dialogue::responses</a></div><div class="ttdeci">std::vector&lt; talk_response &gt; responses</div><div class="ttdoc">Possible responses from the player character, filled in gen_responses.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00219">dialogue.h:219</a></div></div>
<div class="ttc" id="astructtalk__effect__t_html_a52fa0697f1c378cdea64c440e735e16d"><div class="ttname"><a href="structtalk__effect__t.html#a52fa0697f1c378cdea64c440e735e16d">talk_effect_t::next_topic</a></div><div class="ttdeci">talk_topic next_topic</div><div class="ttdoc">Topic to switch to.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00114">dialogue.h:114</a></div></div>
<div class="ttc" id="astructtalk__response_html"><div class="ttname"><a href="structtalk__response.html">talk_response</a></div><div class="ttdoc">This defines possible responses from the player character.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00150">dialogue.h:150</a></div></div>
<div class="ttc" id="astructtalk__response_html_a523306165171388dc0e4a1aae486466f"><div class="ttname"><a href="structtalk__response.html#a523306165171388dc0e4a1aae486466f">talk_response::truetext</a></div><div class="ttdeci">translation truetext</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00159">dialogue.h:159</a></div></div>
<div class="ttc" id="astructtalk__response_html_a838c5e67add9d5865a33743c23ba88d8"><div class="ttname"><a href="structtalk__response.html#a838c5e67add9d5865a33743c23ba88d8">talk_response::truefalse_condition</a></div><div class="ttdeci">std::function&lt; bool(dialogue &amp;)&gt; truefalse_condition</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00161">dialogue.h:161</a></div></div>
<div class="ttc" id="astructtalk__response_html_ad8139bb3b9e773a743ac88f9e64fef50"><div class="ttname"><a href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">talk_response::success</a></div><div class="ttdeci">talk_effect_t success</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00173">dialogue.h:173</a></div></div>
<div class="ttc" id="astructtalk__topic_html"><div class="ttname"><a href="structtalk__topic.html">talk_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00083">dialogue.h:83</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a7afa19f8e1a45d955fc6fbaa420a6760"><div class="ttname"><a href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a></div><div class="ttdeci">translation no_translation(const std::string &amp;str)</div><div class="ttdoc">Shorthand for translation::no_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00441">translation.cpp:441</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00114">talk_effect_t::next_topic</a>, <a class="el" href="translation_8cpp_source.html#l00441">no_translation()</a>, <a class="el" href="dialogue_8h_source.html#l00219">responses</a>, <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>, <a class="el" href="dialogue_8h_source.html#l00161">talk_response::truefalse_condition</a>, and <a class="el" href="dialogue_8h_source.html#l00159">talk_response::truetext</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01620">add_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l01610">add_response_done()</a>, <a class="el" href="npctalk_8cpp_source.html#l01615">add_response_none()</a>, and <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>.</p>

</div>
</div>
<a id="a1460d4b520068e8cc420ff626d4b4d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1460d4b520068e8cc420ff626d4b4d3e">&#9670;&nbsp;</a></span>add_response() <span class="overload">[2/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="dialogue_8h.html#a43aa00543a5e6b790faa3cea84ba01b6">dialogue_fun_ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>effect_success</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and executes the given action. </p>
<p>The response always succeeds. Consequence is based on function used. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01620">1620</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;{</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    result.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#a023566a8a58cfe398f303bd45a799dab">set_effect</a>( effect_success );</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;}</div>
<div class="ttc" id="astructdialogue_html_acc03b8a868625fd7d74772bed41abdc7"><div class="ttname"><a href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">dialogue::add_response</a></div><div class="ttdeci">talk_response &amp; add_response(const std::string &amp;text, const std::string &amp;r, bool first=false)</div><div class="ttdoc">Add a simple response that switches the topic to the new one.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01592">npctalk.cpp:1592</a></div></div>
<div class="ttc" id="astructtalk__effect__t_html_a023566a8a58cfe398f303bd45a799dab"><div class="ttname"><a href="structtalk__effect__t.html#a023566a8a58cfe398f303bd45a799dab">talk_effect_t::set_effect</a></div><div class="ttdeci">void set_effect(talkfunction_ptr)</div><div class="ttdoc">Sets an effect and consequence based on function pointer.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l06230">npctalk.cpp:6230</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l06230">talk_effect_t::set_effect()</a>, and <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>.</p>

</div>
</div>
<a id="adc28e17720c32efcc2d603278cdf543f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc28e17720c32efcc2d603278cdf543f">&#9670;&nbsp;</a></span>add_response() <span class="overload">[3/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>item_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about item type to the given one. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01680">1680</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;{</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">if</span>( item_type.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;explicitly specified null item&quot;</span> );</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    result.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#a52fa0697f1c378cdea64c440e735e16d">next_topic</a>.<a class="code" href="structtalk__topic.html#a9d6a1c6c153013048c53e837c4b254e9">item_type</a> = item_type;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;}</div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="astructtalk__topic_html_a9d6a1c6c153013048c53e837c4b254e9"><div class="ttname"><a href="structtalk__topic.html#a9d6a1c6c153013048c53e837c4b254e9">talk_topic::item_type</a></div><div class="ttdeci">itype_id item_type</div><div class="ttdoc">If we're talking about an item, this should be its type.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00091">dialogue.h:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="dialogue_8h_source.html#l00091">talk_topic::item_type</a>, <a class="el" href="dialogue_8h_source.html#l00114">talk_effect_t::next_topic</a>, and <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>.</p>

</div>
</div>
<a id="a850b0c5f6c2513c87ef1b92ef3839f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a850b0c5f6c2513c87ef1b92ef3839f5f">&#9670;&nbsp;</a></span>add_response() <span class="overload">[4/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmartialart.html">martialart</a> &amp;&#160;</td>
          <td class="paramname"><em>style</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about martial art style to the given one. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01672">1672</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;{</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    result.<a class="code" href="structtalk__response.html#aa75afb0466c174a9e8f32362f721b74e">style</a> = style.<a class="code" href="classmartialart.html#a431f147007f56fadd9ca30b3d9b2b47f">id</a>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div>
<div class="ttc" id="aclassmartialart_html_a431f147007f56fadd9ca30b3d9b2b47f"><div class="ttname"><a href="classmartialart.html#a431f147007f56fadd9ca30b3d9b2b47f">martialart::id</a></div><div class="ttdeci">matype_id id</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00364">martialarts.h:364</a></div></div>
<div class="ttc" id="astructtalk__response_html_aa75afb0466c174a9e8f32362f721b74e"><div class="ttname"><a href="structtalk__response.html#aa75afb0466c174a9e8f32362f721b74e">talk_response::style</a></div><div class="ttdeci">matype_id style</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00169">dialogue.h:169</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="martialarts_8h_source.html#l00364">martialart::id</a>, and <a class="el" href="dialogue_8h_source.html#l00169">talk_response::style</a>.</p>

</div>
</div>
<a id="ac8d121d9bc181f627dfe3cddebf949a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8d121d9bc181f627dfe3cddebf949a3">&#9670;&nbsp;</a></span>add_response() <span class="overload">[5/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a3eacdceec9e9a9ff9da9c9167aacc582">proficiency_id</a> &amp;&#160;</td>
          <td class="paramname"><em>proficiency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about proficiency to the given one. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01656">1656</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;{</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    result.<a class="code" href="structtalk__response.html#ad670d0e196318294b1af7119d3247fd6">proficiency</a> = <a class="code" href="classproficiency.html">proficiency</a>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;}</div>
<div class="ttc" id="aclassproficiency_html"><div class="ttname"><a href="classproficiency.html">proficiency</a></div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8h_source.html#l00063">proficiency.h:64</a></div></div>
<div class="ttc" id="astructtalk__response_html_ad670d0e196318294b1af7119d3247fd6"><div class="ttname"><a href="structtalk__response.html#ad670d0e196318294b1af7119d3247fd6">talk_response::proficiency</a></div><div class="ttdeci">proficiency_id proficiency</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00171">dialogue.h:171</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, and <a class="el" href="dialogue_8h_source.html#l00171">talk_response::proficiency</a>.</p>

</div>
</div>
<a id="a627a44501ac098ea98dfabf899721001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627a44501ac098ea98dfabf899721001">&#9670;&nbsp;</a></span>add_response() <span class="overload">[6/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a> &amp;&#160;</td>
          <td class="paramname"><em>skill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about skill to the given one. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01648">1648</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;{</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    result.<a class="code" href="structtalk__response.html#a82b6f31da554bd5c1557260c3020071d">skill</a> = skill;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;}</div>
<div class="ttc" id="astructtalk__response_html_a82b6f31da554bd5c1557260c3020071d"><div class="ttname"><a href="structtalk__response.html#a82b6f31da554bd5c1557260c3020071d">talk_response::skill</a></div><div class="ttdeci">skill_id skill</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00168">dialogue.h:168</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, and <a class="el" href="dialogue_8h_source.html#l00168">talk_response::skill</a>.</p>

</div>
</div>
<a id="adc8e7620d131749e9476dee09bdff623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8e7620d131749e9476dee09bdff623">&#9670;&nbsp;</a></span>add_response() <span class="overload">[7/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about magic spell to the given one. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01664">1664</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;{</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    result.<a class="code" href="structtalk__response.html#a04ab6d99176d921f37482f8a8adb5956">dialogue_spell</a> = sp;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
<div class="ttc" id="astructtalk__response_html_a04ab6d99176d921f37482f8a8adb5956"><div class="ttname"><a href="structtalk__response.html#a04ab6d99176d921f37482f8a8adb5956">talk_response::dialogue_spell</a></div><div class="ttdeci">spell_id dialogue_spell</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00170">dialogue.h:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, and <a class="el" href="dialogue_8h_source.html#l00170">talk_response::dialogue_spell</a>.</p>

</div>
</div>
<a id="a5172a0ca990c9f7c0e5acfa9c2efc1f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5172a0ca990c9f7c0e5acfa9c2efc1f8">&#9670;&nbsp;</a></span>add_response() <span class="overload">[8/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classnpc.html">npc</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>effect_success</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71">dialogue_consequence</a>&#160;</td>
          <td class="paramname"><em>consequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and executes the given action. </p>
<p>The response always succeeds. Consequence must be explicitly specified. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01628">1628</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;{</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    result.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#aea8759bfe3fc58600f3e1c0aede6cc40">set_effect_consequence</a>( effect_success, consequence );</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;}</div>
<div class="ttc" id="astructtalk__effect__t_html_aea8759bfe3fc58600f3e1c0aede6cc40"><div class="ttname"><a href="structtalk__effect__t.html#aea8759bfe3fc58600f3e1c0aede6cc40">talk_effect_t::set_effect_consequence</a></div><div class="ttdeci">void set_effect_consequence(const talk_effect_fun_t &amp;fun, dialogue_consequence con)</div><div class="ttdoc">Sets an effect to a function object and consequence to explicitly given one.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l06210">npctalk.cpp:6210</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l06210">talk_effect_t::set_effect_consequence()</a>, and <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>.</p>

</div>
</div>
<a id="a3b6fb4b6e79356838e69df8b5d126668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6fb4b6e79356838e69df8b5d126668">&#9670;&nbsp;</a></span>add_response() <span class="overload">[9/9]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmission.html">mission</a> *&#160;</td>
          <td class="paramname"><em>miss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a simple response that switches the topic to the new one and sets the currently talked about mission to the given one. </p>
<p>The mission pointer must be valid. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01637">1637</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;{</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span>( miss == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to select null mission&quot;</span> );</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> &amp;result = <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, r, first );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    result.<a class="code" href="structtalk__response.html#a14b39e3cef1a8083579f2cc033f82bf0">mission_selected</a> = miss;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="ttc" id="astructtalk__response_html_a14b39e3cef1a8083579f2cc033f82bf0"><div class="ttname"><a href="structtalk__response.html#a14b39e3cef1a8083579f2cc033f82bf0">talk_response::mission_selected</a></div><div class="ttdeci">mission * mission_selected</div><div class="ttdoc">The following values are forwarded to the chatbin of the NPC (see npc_chatbin).</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00167">dialogue.h:167</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="dialogue_8h_source.html#l00167">talk_response::mission_selected</a>.</p>

</div>
</div>
<a id="a099d9372066f6a2d00a7a4140307a4a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a099d9372066f6a2d00a7a4140307a4a0">&#9670;&nbsp;</a></span>add_response_done()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response_done </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a response with the result TALK_DONE. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01610">1610</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_DONE&quot;</span> );</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>.</p>

</div>
</div>
<a id="ae0bf9da647cd274f90afdb7b5331c6a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bf9da647cd274f90afdb7b5331c6a1">&#9670;&nbsp;</a></span>add_response_none()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__response.html">talk_response</a> &amp; dialogue::add_response_none </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a response with the result TALK_NONE. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01615">1615</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;{</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_NONE&quot;</span> );</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>.</p>

</div>
</div>
<a id="af8eef62024b216c155b913ff1c9e8e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8eef62024b216c155b913ff1c9e8e40">&#9670;&nbsp;</a></span>add_topic() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::add_topic </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02277">2277</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;{</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc() ) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <a class="code" href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">topic_stack</a>.emplace_back( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc()-&gt;get_specified_talk_topic( topic_id ) );</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        <a class="code" href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">topic_stack</a>.emplace_back( topic_id );</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;}</div>
<div class="ttc" id="astructdialogue_html_aa90f3050bf6d9257d3e16b69086f526e"><div class="ttname"><a href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">dialogue::topic_stack</a></div><div class="ttdeci">std::vector&lt; talk_topic &gt; topic_stack</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00189">dialogue.h:189</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, and <a class="el" href="dialogue_8h_source.html#l00189">topic_stack</a>.</p>

</div>
</div>
<a id="a85ee2de29d9de689f777018668e00196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85ee2de29d9de689f777018668e00196">&#9670;&nbsp;</a></span>add_topic() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::add_topic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02286">2286</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;{</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc() ) {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        std::string <span class="keyword">const</span> &amp;newid = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">get_npc</a>()-&gt;<a class="code" href="classnpc.html#a4485cd59cb87344d33d9ebe501ed52b8">get_specified_talk_topic</a>( topic.<a class="code" href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">id</a> );</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">topic_stack</a>.emplace_back( newid, topic.<a class="code" href="structtalk__topic.html#a9d6a1c6c153013048c53e837c4b254e9">item_type</a>, topic.<a class="code" href="structtalk__topic.html#a0338329b3ab39b9e209bc1f583338cd2">reason</a> );</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <a class="code" href="structdialogue.html#aa90f3050bf6d9257d3e16b69086f526e">topic_stack</a>.push_back( topic );</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;}</div>
<div class="ttc" id="aclassnpc_html_a4485cd59cb87344d33d9ebe501ed52b8"><div class="ttname"><a href="classnpc.html#a4485cd59cb87344d33d9ebe501ed52b8">npc::get_specified_talk_topic</a></div><div class="ttdeci">std::string const  &amp; get_specified_talk_topic(std::string const &amp;topic_id)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l07189">npctalk.cpp:7189</a></div></div>
<div class="ttc" id="aclasstalker_html_a623669b6b3cfb0a15114547919504eeb"><div class="ttname"><a href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">talker::get_npc</a></div><div class="ttdeci">virtual npc * get_npc()</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00049">talker.h:49</a></div></div>
<div class="ttc" id="astructtalk__topic_html_a0338329b3ab39b9e209bc1f583338cd2"><div class="ttname"><a href="structtalk__topic.html#a0338329b3ab39b9e209bc1f583338cd2">talk_topic::reason</a></div><div class="ttdeci">std::string reason</div><div class="ttdoc">Reason for denying a request.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00093">dialogue.h:93</a></div></div>
<div class="ttc" id="astructtalk__topic_html_ad8e4ad510315bdbd4d4183b2f4d5bf08"><div class="ttname"><a href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">talk_topic::id</a></div><div class="ttdeci">std::string id</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00089">dialogue.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="talker_8h_source.html#l00049">talker::get_npc()</a>, <a class="el" href="npctalk_8cpp_source.html#l07189">npc::get_specified_talk_topic()</a>, <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, <a class="el" href="dialogue_8h_source.html#l00091">talk_topic::item_type</a>, <a class="el" href="dialogue_8h_source.html#l00093">talk_topic::reason</a>, and <a class="el" href="dialogue_8h_source.html#l00189">topic_stack</a>.</p>

</div>
</div>
<a id="a9bfa556c65a327f15f6ca78dbcd7c21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bfa556c65a327f15f6ca78dbcd7c21a">&#9670;&nbsp;</a></span>amend_callstack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::amend_callstack </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02340">2340</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;{</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a>.empty() ) {</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a> += <span class="stringliteral">&quot; \\ &quot;</span> + value;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a> = value;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00253">callstack</a>.</p>

<p class="reference">Referenced by <a class="el" href="effect__on__condition_8cpp_source.html#l00314">effect_on_condition::activate()</a>, and <a class="el" href="npctalk_8cpp_source.html#l04906">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_until()</a>.</p>

</div>
</div>
<a id="ae7343c934a16a58a3324e970a2c5693b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7343c934a16a58a3324e970a2c5693b">&#9670;&nbsp;</a></span>apply_speaker_effects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::apply_speaker_effects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;&#160;</td>
          <td class="paramname"><em>the_topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01578">1578</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;{</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keyword">const</span> std::string &amp;topic = the_topic.<a class="code" href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">id</a>;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.find( topic );</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.end() ) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classjson__dynamic__line__effect.html">json_dynamic_line_effect</a> &amp;npc_effect : iter-&gt;second.get_speaker_effects() ) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">if</span>( npc_effect.test_condition( *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            npc_effect.apply( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div>
<div class="ttc" id="aclassjson__dynamic__line__effect_html"><div class="ttname"><a href="classjson__dynamic__line__effect.html">json_dynamic_line_effect</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00405">dialogue.h:406</a></div></div>
<div class="ttc" id="anpctalk_8cpp_html_a9d58f009a148e9132fad232a12f96306"><div class="ttname"><a href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a></div><div class="ttdeci">static std::map&lt; std::string, json_talk_topic &gt; json_talk_topics</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l00122">npctalk.cpp:122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, and <a class="el" href="npctalk_8cpp_source.html#l00122">json_talk_topics</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>.</p>

</div>
</div>
<a id="ad32c86877be5f78069596a846bbc0cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32c86877be5f78069596a846bbc0cbd">&#9670;&nbsp;</a></span>dynamic_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string dialogue::dynamic_line </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01420">1420</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;{</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span>( !the_topic.item_type.is_null() ) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <a class="code" href="structdialogue.html#a8b356491a4ba3a81d77cc9a12a207856">cur_item</a> = the_topic.item_type;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// For compatibility</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keyword">const</span> std::string &amp;topic = the_topic.<a class="code" href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">id</a>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.find( topic );</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.end() ) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        std::string <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> = iter-&gt;second.get_dynamic_line( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>.empty() ) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_NPC_NOFACE&quot;</span> ) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;%s stays silent.&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_NOFACE&quot;</span> ) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You can&#39;t talk without your face.&quot;</span> );</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_DEAF&quot;</span> ) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You are deaf and can&#39;t talk.&quot;</span> );</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_DEAF_ANGRY&quot;</span> ) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You are deaf and can&#39;t talk.  When you don&#39;t respond, %s becomes angry!&quot;</span> ),</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_MUTE&quot;</span> ) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You are mute and can&#39;t talk.&quot;</span> );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_MUTE_ANGRY&quot;</span> ) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You are mute and can&#39;t talk.  When you don&#39;t respond, %s becomes angry!&quot;</span> ),</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_CHURL&quot;</span> ) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;Thou art but a lowley churl and ye know not this newe tongue.  %s seems unable to understand what you&#39;re saying.&quot;</span> ),</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_CHURL_ANGRY&quot;</span> ) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;Thou art but a lowley churl and ye know not this newe tongue.  Unable to understand your dialect, %s becomes angry!&quot;</span> ),</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_CHURL_TRADE&quot;</span> ) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;Thou art but a lowley churl wyth litel understonding of this newe langage, yet %s can understand you and seems willing to trade!&quot;</span> ),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_SEDATED&quot;</span> ) {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s is sedated and can&#39;t be moved or woken up until the &quot;</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                                 <span class="stringliteral">&quot;medication or sedation wears off.\nYou estimate it will wear &quot;</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                                 <span class="stringliteral">&quot;off in %2$s.&quot;</span> ),</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                              <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name(),</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                              <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( player_character.<a class="code" href="classCharacter.html#a3b1b2725c59e60ed979d8a72ceb2e106">estimate_effect_dur</a>( <a class="code" href="npctalk_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a>,</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                                                <a class="code" href="npctalk_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a>, 90_minutes, 60_minutes, 6,</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                                                *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc() ) ) );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// Those topics are handled by the mission system, see there.</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::unordered_set&lt;std::string&gt; mission_topics = { {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <span class="stringliteral">&quot;TALK_MISSION_DESCRIBE&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_DESCRIBE_URGENT&quot;</span>,</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <span class="stringliteral">&quot;TALK_MISSION_OFFER&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_ACCEPTED&quot;</span>,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <span class="stringliteral">&quot;TALK_MISSION_REJECTED&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_ADVICE&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_INQUIRE&quot;</span>,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <span class="stringliteral">&quot;TALK_MISSION_SUCCESS&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_SUCCESS_LIE&quot;</span>, <span class="stringliteral">&quot;TALK_MISSION_FAILURE&quot;</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    };</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span>( mission_topics.count( topic ) &gt; 0 ) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <a class="code" href="classmission.html">mission</a> *miss = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#acb6e8de988bb8515632bd0899bdf8a70">selected_mission</a>();</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">if</span>( miss == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;mission_selected == nullptr; BUG!  (npctalk.cpp:dynamic_line)&quot;</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmission__type.html">mission_type</a> &amp;<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = miss-&gt;<a class="code" href="classmission.html#af99364a9afac4abce5af8a056835f95d">get_type</a>();</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="comment">// TODO: make it a member of the mission class, maybe at mission instance specific data</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keyword">const</span> std::string &amp;<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = miss-&gt;<a class="code" href="classmission.html#af93190af153b0339b7cc7c1ecbc7dd68">dialogue_for_topic</a>( topic );</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.empty() ) {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Bug in npctalk.cpp:dynamic_line.  Wrong mission_id(%s) or topic(%s)&quot;</span>,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                      <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.id.c_str(), topic.c_str() );</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_MISSION_SUCCESS&quot;</span> &amp;&amp; miss-&gt;<a class="code" href="classmission.html#a6e010e306880612d64fdfc4b44486dc9">has_follow_up</a>() ) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <span class="keywordflow">switch</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 3 ) ) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;  And I have more I&#39;d like you to do.&quot;</span> );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;  I could use a hand with something else if you are interested.&quot;</span> );</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;  If you are interested, I have another job for you.&quot;</span> );</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    }</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_NONE&quot;</span> || topic == <span class="stringliteral">&quot;TALK_DONE&quot;</span> ) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">get_npc</a>()-&gt;<a class="code" href="classnpc.html#ac53fbaa9d7ba82b585a16468de52be02">chat_snippets</a>().<a class="code" href="structdialogue__chatbin__snippets.html#a2ace38d0625b09bed03086ebe1d5449e">snip_bye</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_TRAIN&quot;</span> ) {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.empty() &amp;&amp; player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.front().id() == <a class="code" href="npctalk_8cpp.html#adae7b5637b7de5925762730601b77ffd">ACT_TRAIN</a> ) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Shall we resume?&quot;</span> );</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;skills_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;styles_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;spells_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                   <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;proficiencies_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) ).empty() ) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sorry, but it doesn&#39;t seem I have anything to teach you.&quot;</span> );</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Here&#39;s what I can teach you&quot;</span> );</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_TRAIN_NPC&quot;</span> ) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;skills_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;styles_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;spells_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) ).empty() &amp;&amp;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;proficiencies_offered_to( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) ).empty() ) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sorry, there&#39;s nothing I can learn from you.&quot;</span> );</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sure, I&#39;m all ears.&quot;</span> );</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR&quot;</span> ) {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What do you want me to teach?&quot;</span> );</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_HOW_MUCH_FURTHER&quot;</span> ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#ac816087de6d747c52da0660134ccf9d4">distance_to_goal</a>();</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_DESCRIBE_MISSION&quot;</span> ) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#ab88f403fafcc98ab9dfb4ee73cc0fba5">get_job_description</a>();</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_SHOUT&quot;</span> ) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#a7d72732d934fc2cf860bdedf7de756a7">shout</a>();</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;is_deaf() ) {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You yell, but can&#39;t hear yourself.&quot;</span> );</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;is_mute() ) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You yell, but can&#39;t form words.&quot;</span> );</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You yell.&quot;</span> );</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_SIZE_UP&quot;</span> ) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a9368683fa07a530eb13b74f6555e2116">evaluation_by</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_ASSESS_PERSON&quot;</span> ) {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a803816beb2c536753a7029675f34a940">view_personality_traits</a>();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_LOOK_AT&quot;</span> ) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;can_see() ) {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&amp;&quot;</span> + <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#ae744b546f5aab5fb784ce3517efd8630">short_description</a>();</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&amp;You&#39;re blind and can&#39;t look at %s.&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_OPINION&quot;</span> ) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&amp;&quot;</span> + <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a83bb0909bd4bbccccdf2319ad93bb3f9">opinion_text</a>();</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( topic == <span class="stringliteral">&quot;TALK_MIND_CONTROL&quot;</span> ) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;enslave_mind() ) {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;YES, MASTER!&quot;</span> );</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;I don&#39;t know what to say for %s. (BUG (npctalk.cpp:dynamic_line))&quot;</span>, topic );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a3cbd6a4aa555daec83ee03cc90dd7715"><div class="ttname"><a href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a></div><div class="ttdeci">std::string to_string_approx(const time_duration &amp;dur, const bool verbose)</div><div class="ttdoc">Returns approximate duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00587">calendar.cpp:587</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3b1b2725c59e60ed979d8a72ceb2e106"><div class="ttname"><a href="classCharacter.html#a3b1b2725c59e60ed979d8a72ceb2e106">Character::estimate_effect_dur</a></div><div class="ttdeci">time_duration estimate_effect_dur(const skill_id &amp;relevant_skill, const efftype_id &amp;effect, const time_duration &amp;error_magnitude, const time_duration &amp;minimum_error, int threshold, const Creature &amp;target) const</div><div class="ttdoc">Estimate effect duration based on player relevant skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11993">character.cpp:11993</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad2f8dc354e09863a8d257b353a749caa"><div class="ttname"><a href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">Character::backlog</a></div><div class="ttdeci">std::list&lt; player_activity &gt; backlog</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02710">character.h:2710</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassmission_html"><div class="ttname"><a href="classmission.html">mission</a></div><div class="ttdef"><b>Definition:</b> <a href="mission_8h_source.html#l00272">mission.h:273</a></div></div>
<div class="ttc" id="aclassmission_html_a6e010e306880612d64fdfc4b44486dc9"><div class="ttname"><a href="classmission.html#a6e010e306880612d64fdfc4b44486dc9">mission::has_follow_up</a></div><div class="ttdeci">bool has_follow_up() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00724">mission.cpp:724</a></div></div>
<div class="ttc" id="aclassmission_html_af93190af153b0339b7cc7c1ecbc7dd68"><div class="ttname"><a href="classmission.html#af93190af153b0339b7cc7c1ecbc7dd68">mission::dialogue_for_topic</a></div><div class="ttdeci">std::string dialogue_for_topic(const std::string &amp;topic) const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00840">mission.cpp:840</a></div></div>
<div class="ttc" id="aclassmission_html_af99364a9afac4abce5af8a056835f95d"><div class="ttname"><a href="classmission.html#af99364a9afac4abce5af8a056835f95d">mission::get_type</a></div><div class="ttdeci">const mission_type &amp; get_type() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00714">mission.cpp:714</a></div></div>
<div class="ttc" id="aclassnpc_html_ac53fbaa9d7ba82b585a16468de52be02"><div class="ttname"><a href="classnpc.html#ac53fbaa9d7ba82b585a16468de52be02">npc::chat_snippets</a></div><div class="ttdeci">const dialogue_chatbin_snippets &amp; chat_snippets() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l03805">npc.cpp:3805</a></div></div>
<div class="ttc" id="aclasstalker_html_a7d72732d934fc2cf860bdedf7de756a7"><div class="ttname"><a href="classtalker.html#a7d72732d934fc2cf860bdedf7de756a7">talker::shout</a></div><div class="ttdeci">virtual void shout(const std::string &amp;=&quot;&quot;, bool=false)</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00550">talker.h:550</a></div></div>
<div class="ttc" id="aclasstalker_html_a803816beb2c536753a7029675f34a940"><div class="ttname"><a href="classtalker.html#a803816beb2c536753a7029675f34a940">talker::view_personality_traits</a></div><div class="ttdeci">virtual std::string view_personality_traits() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00491">talker.h:491</a></div></div>
<div class="ttc" id="aclasstalker_html_a83bb0909bd4bbccccdf2319ad93bb3f9"><div class="ttname"><a href="classtalker.html#a83bb0909bd4bbccccdf2319ad93bb3f9">talker::opinion_text</a></div><div class="ttdeci">virtual std::string opinion_text() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00556">talker.h:556</a></div></div>
<div class="ttc" id="aclasstalker_html_a9368683fa07a530eb13b74f6555e2116"><div class="ttname"><a href="classtalker.html#a9368683fa07a530eb13b74f6555e2116">talker::evaluation_by</a></div><div class="ttdeci">virtual std::string evaluation_by(const talker &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00488">talker.h:488</a></div></div>
<div class="ttc" id="aclasstalker_html_ab88f403fafcc98ab9dfb4ee73cc0fba5"><div class="ttname"><a href="classtalker.html#ab88f403fafcc98ab9dfb4ee73cc0fba5">talker::get_job_description</a></div><div class="ttdeci">virtual std::string get_job_description() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00485">talker.h:485</a></div></div>
<div class="ttc" id="aclasstalker_html_ac816087de6d747c52da0660134ccf9d4"><div class="ttname"><a href="classtalker.html#ac816087de6d747c52da0660134ccf9d4">talker::distance_to_goal</a></div><div class="ttdeci">virtual std::string distance_to_goal() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00114">talker.h:114</a></div></div>
<div class="ttc" id="aclasstalker_html_acb6e8de988bb8515632bd0899bdf8a70"><div class="ttname"><a href="classtalker.html#acb6e8de988bb8515632bd0899bdf8a70">talker::selected_mission</a></div><div class="ttdeci">virtual mission * selected_mission() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00445">talker.h:445</a></div></div>
<div class="ttc" id="aclasstalker_html_ae744b546f5aab5fb784ce3517efd8630"><div class="ttname"><a href="classtalker.html#ae744b546f5aab5fb784ce3517efd8630">talker::short_description</a></div><div class="ttdeci">virtual std::string short_description() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00494">talker.h:494</a></div></div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">ot_match_type::type</a></div><div class="ttdeci">@ type</div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anpctalk_8cpp_html_a1a6476e8888f0929f469fd9af2d629bc"><div class="ttname"><a href="npctalk_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a></div><div class="ttdeci">static const efftype_id effect_narcosis(&quot;narcosis&quot;)</div></div>
<div class="ttc" id="anpctalk_8cpp_html_aaf598d0fedebd89ec20f768da3b5fd8a"><div class="ttname"><a href="npctalk_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a></div><div class="ttdeci">static const skill_id skill_firstaid(&quot;firstaid&quot;)</div></div>
<div class="ttc" id="anpctalk_8cpp_html_adae7b5637b7de5925762730601b77ffd"><div class="ttname"><a href="npctalk_8cpp.html#adae7b5637b7de5925762730601b77ffd">ACT_TRAIN</a></div><div class="ttdeci">static const activity_id ACT_TRAIN(&quot;ACT_TRAIN&quot;)</div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructdialogue__chatbin__snippets_html_a2ace38d0625b09bed03086ebe1d5449e"><div class="ttname"><a href="structdialogue__chatbin__snippets.html#a2ace38d0625b09bed03086ebe1d5449e">dialogue_chatbin_snippets::snip_bye</a></div><div class="ttdeci">translation snip_bye</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__chatbin_8h_source.html#l00135">dialogue_chatbin.h:135</a></div></div>
<div class="ttc" id="astructdialogue_html_a8b356491a4ba3a81d77cc9a12a207856"><div class="ttname"><a href="structdialogue.html#a8b356491a4ba3a81d77cc9a12a207856">dialogue::cur_item</a></div><div class="ttdeci">itype_id cur_item</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00208">dialogue.h:208</a></div></div>
<div class="ttc" id="astructmission__type_html"><div class="ttname"><a href="structmission__type.html">mission_type</a></div><div class="ttdef"><b>Definition:</b> <a href="mission_8h_source.html#l00178">mission.h:178</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="npctalk_8cpp.html#adae7b5637b7de5925762730601b77ffd">ACT_TRAIN</a>, <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="character_8h_source.html#l02710">Character::backlog</a>, <a class="el" href="npc_8cpp_source.html#l03805">npc::chat_snippets()</a>, <a class="el" href="dialogue_8h_source.html#l00208">cur_item</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="mission_8cpp_source.html#l00840">mission::dialogue_for_topic()</a>, <a class="el" href="talker_8h_source.html#l00114">talker::distance_to_goal()</a>, <a class="el" href="npctalk_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a>, <a class="el" href="character_8cpp_source.html#l11993">Character::estimate_effect_dur()</a>, <a class="el" href="talker_8h_source.html#l00488">talker::evaluation_by()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="talker_8h_source.html#l00485">talker::get_job_description()</a>, <a class="el" href="talker_8h_source.html#l00049">talker::get_npc()</a>, <a class="el" href="mission_8cpp_source.html#l00714">mission::get_type()</a>, <a class="el" href="mission_8cpp_source.html#l00724">mission::has_follow_up()</a>, <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="dialogue_8h_source.html#l00091">talk_topic::item_type</a>, <a class="el" href="npctalk_8cpp_source.html#l00122">json_talk_topics</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="talker_8h_source.html#l00556">talker::opinion_text()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="talker_8h_source.html#l00445">talker::selected_mission()</a>, <a class="el" href="talker_8h_source.html#l00494">talker::short_description()</a>, <a class="el" href="talker_8h_source.html#l00550">talker::shout()</a>, <a class="el" href="npctalk_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a>, <a class="el" href="dialogue__chatbin_8h_source.html#l00135">dialogue_chatbin_snippets::snip_bye</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="calendar_8cpp_source.html#l00587">to_string_approx()</a>, <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, and <a class="el" href="talker_8h_source.html#l00491">talker::view_personality_traits()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>.</p>

</div>
</div>
<a id="a048cb04c5c2beeb05cdbfcb89dcfaf01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a048cb04c5c2beeb05cdbfcb89dcfaf01">&#9670;&nbsp;</a></span>evaluate_conditional()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dialogue::evaluate_conditional </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02323">2323</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;{</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>-&gt;find( key );</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span> ( it == <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>-&gt;end() ) ? false : it-&gt;second( d );</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00256">conditionals</a>.</p>

</div>
</div>
<a id="ac074903e749e4c545aac860ebc4a19a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac074903e749e4c545aac860ebc4a19a2">&#9670;&nbsp;</a></span>gen_responses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::gen_responses </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l01692">1692</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;{</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.clear();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.find( the_topic.id );</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="npctalk_8cpp.html#a9d58f009a148e9132fad232a12f96306">json_talk_topics</a>.end() ) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <a class="code" href="classjson__talk__topic.html">json_talk_topic</a> &amp;jtt = iter-&gt;second;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">if</span>( jtt.<a class="code" href="classjson__talk__topic.html#a37dae88b07a4b0a36250545a10fcad6e">gen_responses</a>( *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        }</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_MISSION_LIST&quot;</span> ) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;available_missions().<a class="code" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() == 1 ) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tell me about it.&quot;</span> ), <span class="stringliteral">&quot;TALK_MISSION_OFFER&quot;</span>,</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                          <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;available_missions().front(), <span class="keyword">true</span> );</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classmission.html">mission</a> *&amp;<a class="code" href="classmission.html">mission</a> : <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;available_missions() ) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="classmission.html">mission</a>-&gt;<a class="code" href="classmission.html#af99364a9afac4abce5af8a056835f95d">get_type</a>().<a class="code" href="structmission__type.html#a55e4f0b0675cecbcedc54fb6fb84f20d">tname</a>(), <span class="stringliteral">&quot;TALK_MISSION_OFFER&quot;</span>, <a class="code" href="classmission.html">mission</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_MISSION_LIST_ASSIGNED&quot;</span> ) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">missions_assigned</a>.size() == 1 ) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;I have news.&quot;</span> ), <span class="stringliteral">&quot;TALK_MISSION_INQUIRE&quot;</span>, <a class="code" href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">missions_assigned</a>.front() );</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classmission.html">mission</a> *&amp;miss_it : <a class="code" href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">missions_assigned</a> ) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( miss_it-&gt;get_type().tname(), <span class="stringliteral">&quot;TALK_MISSION_INQUIRE&quot;</span>, miss_it );</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_TRAIN_NPC&quot;</span> ) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keyword">const</span> std::vector&lt;matype_id&gt; &amp;styles = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#a02998a68660f84a215fea63cda91997a">styles_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keyword">const</span> std::vector&lt;skill_id&gt; &amp;<a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3aa658279f9b983958149f31e4d8487673">skills</a> = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#a668791e8fe409191a414584ba0c83a7c">skills_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="keyword">const</span> std::vector&lt;spell_id&gt; &amp;spells = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#a6e11697ed5c67bcdbcf4026ab2e00ef4">spells_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keyword">const</span> std::vector&lt;proficiency_id&gt; &amp;profs =</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;<a class="code" href="classtalker.html#a375ca34db96c41a1fe4368c383a1a911">proficiencies_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3aa658279f9b983958149f31e4d8487673">skills</a>.empty() &amp;&amp; styles.empty() &amp;&amp; spells.empty() &amp;&amp; profs.empty() ) {</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oh, okay.&quot;</span> ) );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> &amp;sp : spells ) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spell&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;spell_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ), sp ) );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_NPC_START&quot;</span>, sp );</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> &amp;ma : styles ) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Style&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;style_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ), ma ) );</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_NPC_START&quot;</span>, ma.obj() );</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;sk : skills ) {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skill&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;skill_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ), sk ) );</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            <span class="keywordflow">if</span>( !text.empty() &amp;&amp; !sk-&gt;obsolete() ) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_NPC_START&quot;</span>, sk );</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> &amp;pr : profs ) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proficiency&quot;</span> ),</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                               <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;proficiency_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> ), pr ) );</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_NPC_START&quot;</span>, pr );</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Eh, never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR&quot;</span> ) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="keyword">const</span> std::vector&lt;skill_id&gt; &amp;sklist = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a92494ecf6ee766fc32953f03e63c9405">skills_teacheable</a>();</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keyword">const</span> std::vector&lt;proficiency_id&gt; &amp;prlist = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a15cb085696f6aba84b9cf027e9605b86">proficiencies_teacheable</a>();</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keyword">const</span> std::vector&lt;matype_id&gt; &amp;malist = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#aa22010d80935593ca739ff851fd548fb">styles_teacheable</a>();</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keyword">const</span> std::vector&lt;spell_id&gt; &amp;splist = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a0d9e41cc8b0017093cfef89f267e8ded">spells_teacheable</a>();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">if</span>( sklist.empty() &amp;&amp; prlist.empty() &amp;&amp; malist.empty() &amp;&amp; splist.empty() ) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oh, okay.&quot;</span> ) );</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;sk : sklist ) {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">if</span>( sk-&gt;obsolete() ) {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skill&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;skill_seminar_text( sk ) );</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR_START&quot;</span>, sk );</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> &amp;pr : prlist ) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proficiency&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;proficiency_seminar_text( pr ) );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR_START&quot;</span>, pr );</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> &amp;ma : malist ) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Style&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;style_seminar_text( ma ) );</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR_START&quot;</span>, ma.obj() );</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> &amp;sp : splist ) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spell&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;spell_seminar_text( sp ) );</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_SEMINAR_START&quot;</span>, sp );</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Eh, never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_TRAIN&quot;</span> ) {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.empty() &amp;&amp; player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.front().id() == <a class="code" href="npctalk_8cpp.html#adae7b5637b7de5925762730601b77ffd">ACT_TRAIN</a> &amp;&amp;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.front().index == <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;getID().<a class="code" href="structdialogue.html#a5f1c28df053324719955d026ce04c296">get_value</a>() ) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="classplayer__activity.html">player_activity</a> &amp;backlog = player_character.<a class="code" href="classCharacter.html#ad2f8dc354e09863a8d257b353a749caa">backlog</a>.front();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> skillt( backlog.<a class="code" href="classplayer__activity.html#a878a082cf9150511f6ab911b3c9d30aa">name</a> );</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <span class="comment">// TODO: This is potentially dangerous. A skill and a martial art</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="comment">// could have the same ident!</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="keywordflow">if</span>( !skillt.is_valid() ) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> styleid = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">matype_id</a>( backlog.<a class="code" href="classplayer__activity.html#a878a082cf9150511f6ab911b3c9d30aa">name</a> );</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="keywordflow">if</span>( !styleid.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> profid = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6dfa2d63e7afc669426c9544b629e688">proficiency_id</a>( backlog.<a class="code" href="classplayer__activity.html#a878a082cf9150511f6ab911b3c9d30aa">name</a> );</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                    <span class="keywordflow">if</span>( !profid.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> &amp;sp_id = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( backlog.<a class="code" href="classplayer__activity.html#a878a082cf9150511f6ab911b3c9d30aa">name</a> );</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                        <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;knows_spell( sp_id ) ) {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                            <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yes, let&#39;s resume training %s&quot;</span> ),</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                                                         sp_id-&gt;<a class="code" href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">name</a> ), <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, sp_id );</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                        }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                        <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yes, let&#39;s resume training %s&quot;</span> ),</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                                                     profid-&gt;<a class="code" href="classproficiency.html#af9bf37649c3e186489841ddd1c23f0cf">name</a>() ), <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, profid );</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                    }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmartialart.html">martialart</a> &amp;style = styleid.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                    <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yes, let&#39;s resume training %s&quot;</span> ),</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                                                 style.<a class="code" href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">name</a> ), <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, style );</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yes, let&#39;s resume training %s&quot;</span> ), skillt-&gt;name() ),</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                              <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, skillt );</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keyword">const</span> std::vector&lt;matype_id&gt; &amp;styles = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a02998a68660f84a215fea63cda91997a">styles_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keyword">const</span> std::vector&lt;skill_id&gt; &amp;trainable = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a668791e8fe409191a414584ba0c83a7c">skills_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keyword">const</span> std::vector&lt;spell_id&gt; &amp;teachable = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a6e11697ed5c67bcdbcf4026ab2e00ef4">spells_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keyword">const</span> std::vector&lt;proficiency_id&gt; &amp;<a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a4abd12c6fdc126c14e6a17e2718dc719">proficiencies</a> = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a375ca34db96c41a1fe4368c383a1a911">proficiencies_offered_to</a>( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>(</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                    <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">if</span>( trainable.empty() &amp;&amp; styles.empty() &amp;&amp; teachable.empty() &amp;&amp; <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a4abd12c6fdc126c14e6a17e2718dc719">proficiencies</a>.empty() ) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oh, okay.&quot;</span> ) );</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> &amp;sp : teachable ) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spell&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;spell_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ), sp ) );</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, sp );</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> &amp;style_id : styles ) {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Style&quot;</span> ),</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                               <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;style_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ), style_id ) );</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, style_id.obj() );</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;trained : trainable ) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skill&quot;</span> ),</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                               <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;skill_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ), trained ) );</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">if</span>( !text.empty() &amp;&amp; !trained-&gt;obsolete() ) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, trained );</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            }</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> &amp;trained : proficiencies ) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <span class="keyword">const</span> std::string &amp;text =</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proficiency&quot;</span> ),</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                               <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;proficiency_training_text( *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> ), trained ) );</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">if</span>( !text.empty() ) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( text, <span class="stringliteral">&quot;TALK_TRAIN_START&quot;</span>, trained );</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            }</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Eh, never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( the_topic.id == <span class="stringliteral">&quot;TALK_HOW_MUCH_FURTHER&quot;</span> ) {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <a class="code" href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">add_response_none</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Okay, thanks.&quot;</span> ) );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <a class="code" href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">add_response_done</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Let&#39;s keep moving.&quot;</span> ) );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;has_trait( <a class="code" href="npctalk_8cpp.html#a37a1fab8c4f17e009841e255f68b5733">trait_DEBUG_MIND_CONTROL</a> ) &amp;&amp; !<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;is_player_ally() ) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;OBEY ME!&quot;</span> ), <span class="stringliteral">&quot;TALK_MIND_CONTROL&quot;</span> );</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <a class="code" href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">add_response_done</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bye.&quot;</span> ) );</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="npctalk_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a> ) &amp;&amp; ( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc_trust() &gt;= 0 ) &amp;&amp;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        ( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc_anger() &lt;= 0 ) &amp;&amp; ( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;int_cur() &gt;= 9 ) &amp;&amp;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        !( the_topic.id == <span class="stringliteral">&quot;TALK_CHURL_FRIENDLY&quot;</span> ) ) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <a class="code" href="structdialogue.html#acc03b8a868625fd7d74772bed41abdc7">add_response</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ho there, otherwyrldly devyl!  Have yow ware for to chaffare?&quot;</span> ),</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                      <span class="stringliteral">&quot;TALK_CHURL_FRIENDLY&quot;</span> );</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <a class="code" href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">add_response_done</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Farewell!&quot;</span> ) );</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.empty() ) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <a class="code" href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">add_response_done</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bye.&quot;</span> ) );</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">cata_variant_type::spell_id</a></div><div class="ttdeci">@ spell_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">cata_variant_type::matype_id</a></div><div class="ttdeci">@ matype_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a6dfa2d63e7afc669426c9544b629e688"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6dfa2d63e7afc669426c9544b629e688">cata_variant_type::proficiency_id</a></div><div class="ttdeci">@ proficiency_id</div></div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassjson__talk__topic_html"><div class="ttname"><a href="classjson__talk__topic.html">json_talk_topic</a></div><div class="ttdoc">Talk topic definitions load from json.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00419">dialogue.h:420</a></div></div>
<div class="ttc" id="aclassjson__talk__topic_html_a37dae88b07a4b0a36250545a10fcad6e"><div class="ttname"><a href="classjson__talk__topic.html#a37dae88b07a4b0a36250545a10fcad6e">json_talk_topic::gen_responses</a></div><div class="ttdeci">bool gen_responses(dialogue &amp;d) const</div><div class="ttdoc">Callback from dialogue::gen_responses, it should add the response from here into the list of possible...</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l07069">npctalk.cpp:7069</a></div></div>
<div class="ttc" id="aclassmartialart_html"><div class="ttname"><a href="classmartialart.html">martialart</a></div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00296">martialarts.h:297</a></div></div>
<div class="ttc" id="aclassmartialart_html_a755de10d91b0292258efb0ab55b80cbc"><div class="ttname"><a href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">martialart::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00367">martialarts.h:367</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00032">player_activity.h:33</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a878a082cf9150511f6ab911b3c9d30aa"><div class="ttname"><a href="classplayer__activity.html#a878a082cf9150511f6ab911b3c9d30aa">player_activity::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00060">player_activity.h:60</a></div></div>
<div class="ttc" id="aclassproficiency_html_af9bf37649c3e186489841ddd1c23f0cf"><div class="ttname"><a href="classproficiency.html#af9bf37649c3e186489841ddd1c23f0cf">proficiency::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8cpp_source.html#l00170">proficiency.cpp:170</a></div></div>
<div class="ttc" id="aclassspell__type_html_adcac4bcd0931ffd34281a9eed747d93c"><div class="ttname"><a href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">spell_type::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00210">magic.h:210</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; spell_type &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="aclasstalker_html_a02998a68660f84a215fea63cda91997a"><div class="ttname"><a href="classtalker.html#a02998a68660f84a215fea63cda91997a">talker::styles_offered_to</a></div><div class="ttdeci">virtual std::vector&lt; matype_id &gt; styles_offered_to(const talker &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00303">talker.h:303</a></div></div>
<div class="ttc" id="aclasstalker_html_a0d9e41cc8b0017093cfef89f267e8ded"><div class="ttname"><a href="classtalker.html#a0d9e41cc8b0017093cfef89f267e8ded">talker::spells_teacheable</a></div><div class="ttdeci">virtual std::vector&lt; spell_id &gt; spells_teacheable() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00312">talker.h:312</a></div></div>
<div class="ttc" id="aclasstalker_html_a15cb085696f6aba84b9cf027e9605b86"><div class="ttname"><a href="classtalker.html#a15cb085696f6aba84b9cf027e9605b86">talker::proficiencies_teacheable</a></div><div class="ttdeci">virtual std::vector&lt; proficiency_id &gt; proficiencies_teacheable() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00288">talker.h:288</a></div></div>
<div class="ttc" id="aclasstalker_html_a375ca34db96c41a1fe4368c383a1a911"><div class="ttname"><a href="classtalker.html#a375ca34db96c41a1fe4368c383a1a911">talker::proficiencies_offered_to</a></div><div class="ttdeci">virtual std::vector&lt; proficiency_id &gt; proficiencies_offered_to(const talker &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00291">talker.h:291</a></div></div>
<div class="ttc" id="aclasstalker_html_a668791e8fe409191a414584ba0c83a7c"><div class="ttname"><a href="classtalker.html#a668791e8fe409191a414584ba0c83a7c">talker::skills_offered_to</a></div><div class="ttdeci">virtual std::vector&lt; skill_id &gt; skills_offered_to(const talker &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00276">talker.h:276</a></div></div>
<div class="ttc" id="aclasstalker_html_a6e11697ed5c67bcdbcf4026ab2e00ef4"><div class="ttname"><a href="classtalker.html#a6e11697ed5c67bcdbcf4026ab2e00ef4">talker::spells_offered_to</a></div><div class="ttdeci">virtual std::vector&lt; spell_id &gt; spells_offered_to(talker &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00315">talker.h:315</a></div></div>
<div class="ttc" id="aclasstalker_html_a92494ecf6ee766fc32953f03e63c9405"><div class="ttname"><a href="classtalker.html#a92494ecf6ee766fc32953f03e63c9405">talker::skills_teacheable</a></div><div class="ttdeci">virtual std::vector&lt; skill_id &gt; skills_teacheable() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00279">talker.h:279</a></div></div>
<div class="ttc" id="aclasstalker_html_aa22010d80935593ca739ff851fd548fb"><div class="ttname"><a href="classtalker.html#aa22010d80935593ca739ff851fd548fb">talker::styles_teacheable</a></div><div class="ttdeci">virtual std::vector&lt; matype_id &gt; styles_teacheable() const</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00300">talker.h:300</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3a4abd12c6fdc126c14e6a17e2718dc719"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a4abd12c6fdc126c14e6a17e2718dc719">anonymous_namespace{player_display.cpp}::player_display_tab::proficiencies</a></div><div class="ttdeci">@ proficiencies</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3aa658279f9b983958149f31e4d8487673"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3aa658279f9b983958149f31e4d8487673">anonymous_namespace{player_display.cpp}::player_display_tab::skills</a></div><div class="ttdeci">@ skills</div></div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00066">omdata.h:66</a></div></div>
<div class="ttc" id="anpctalk_8cpp_html_a37a1fab8c4f17e009841e255f68b5733"><div class="ttname"><a href="npctalk_8cpp.html#a37a1fab8c4f17e009841e255f68b5733">trait_DEBUG_MIND_CONTROL</a></div><div class="ttdeci">static const trait_id trait_DEBUG_MIND_CONTROL(&quot;DEBUG_MIND_CONTROL&quot;)</div></div>
<div class="ttc" id="anpctalk_8cpp_html_a9a647a2dbecb7b90acbdbe6fba9a0256"><div class="ttname"><a href="npctalk_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a></div><div class="ttdeci">static const trait_id trait_PROF_CHURL(&quot;PROF_CHURL&quot;)</div></div>
<div class="ttc" id="astructdialogue_html_a099d9372066f6a2d00a7a4140307a4a0"><div class="ttname"><a href="structdialogue.html#a099d9372066f6a2d00a7a4140307a4a0">dialogue::add_response_done</a></div><div class="ttdeci">talk_response &amp; add_response_done(const std::string &amp;text)</div><div class="ttdoc">Add a response with the result TALK_DONE.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01610">npctalk.cpp:1610</a></div></div>
<div class="ttc" id="astructdialogue_html_a5f1c28df053324719955d026ce04c296"><div class="ttname"><a href="structdialogue.html#a5f1c28df053324719955d026ce04c296">dialogue::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02306">npctalk.cpp:2306</a></div></div>
<div class="ttc" id="astructdialogue_html_ae0bf9da647cd274f90afdb7b5331c6a1"><div class="ttname"><a href="structdialogue.html#ae0bf9da647cd274f90afdb7b5331c6a1">dialogue::add_response_none</a></div><div class="ttdeci">talk_response &amp; add_response_none(const std::string &amp;text)</div><div class="ttdoc">Add a response with the result TALK_NONE.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01615">npctalk.cpp:1615</a></div></div>
<div class="ttc" id="astructdialogue_html_af0883e28c7c29ffdfb4ba6cd2fcf2d06"><div class="ttname"><a href="structdialogue.html#af0883e28c7c29ffdfb4ba6cd2fcf2d06">dialogue::missions_assigned</a></div><div class="ttdeci">std::vector&lt; mission * &gt; missions_assigned</div><div class="ttdoc">Missions that have been assigned by this npc to the player they currently speak to.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00192">dialogue.h:192</a></div></div>
<div class="ttc" id="astructmission__type_html_a55e4f0b0675cecbcedc54fb6fb84f20d"><div class="ttname"><a href="structmission__type.html#a55e4f0b0675cecbcedc54fb6fb84f20d">mission_type::tname</a></div><div class="ttdeci">std::string tname() const</div><div class="ttdoc">Returns the translated name.</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00072">mission.cpp:72</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="npctalk_8cpp.html#adae7b5637b7de5925762730601b77ffd">ACT_TRAIN</a>, <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l01610">add_response_done()</a>, <a class="el" href="npctalk_8cpp_source.html#l01615">add_response_none()</a>, <a class="el" href="character_8h_source.html#l02710">Character::backlog</a>, <a class="el" href="npctalk_8cpp_source.html#l07069">json_talk_topic::gen_responses()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="mission_8cpp_source.html#l00714">mission::get_type()</a>, <a class="el" href="npctalk_8cpp_source.html#l02306">get_value()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="npctalk_8cpp_source.html#l00122">json_talk_topics</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">matype_id</a>, <a class="el" href="dialogue_8h_source.html#l00192">missions_assigned</a>, <a class="el" href="magic_8h_source.html#l00210">spell_type::name</a>, <a class="el" href="martialarts_8h_source.html#l00367">martialart::name</a>, <a class="el" href="player__activity_8h_source.html#l00060">player_activity::name</a>, <a class="el" href="proficiency_8cpp_source.html#l00170">proficiency::name()</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="talker_8h_source.html#l00291">talker::proficiencies_offered_to()</a>, <a class="el" href="talker_8h_source.html#l00288">talker::proficiencies_teacheable()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6dfa2d63e7afc669426c9544b629e688">proficiency_id</a>, <a class="el" href="dialogue_8h_source.html#l00219">responses</a>, <a class="el" href="omdata_8h_source.html#l00066">om_direction::size</a>, <a class="el" href="talker_8h_source.html#l00276">talker::skills_offered_to()</a>, <a class="el" href="talker_8h_source.html#l00279">talker::skills_teacheable()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>, <a class="el" href="talker_8h_source.html#l00315">talker::spells_offered_to()</a>, <a class="el" href="talker_8h_source.html#l00312">talker::spells_teacheable()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="talker_8h_source.html#l00303">talker::styles_offered_to()</a>, <a class="el" href="talker_8h_source.html#l00300">talker::styles_teacheable()</a>, <a class="el" href="mission_8cpp_source.html#l00072">mission_type::tname()</a>, <a class="el" href="npctalk_8cpp.html#a37a1fab8c4f17e009841e255f68b5733">trait_DEBUG_MIND_CONTROL</a>, and <a class="el" href="npctalk_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>.</p>

</div>
</div>
<a id="ad780435f9d234429325eef47a81673d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad780435f9d234429325eef47a81673d5">&#9670;&nbsp;</a></span>get_best_quit_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dialogue::get_best_quit_response </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the best response to use when the player is trying to quit. </p>
<p>Returns the index into the response list. </p>

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02671">2671</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;{</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.size() == 1 ) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="comment">// Only one response. Use it. Consequences will be prompted for by the caller.</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    }</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160; </div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="comment">// Find relevant responses</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.size(); ++i ) {</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtalk__response.html">talk_response</a> &amp;response = <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>[i];</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <span class="keywordflow">if</span>( response.<a class="code" href="structtalk__response.html#a9838a8fadffa22d0ea7a6385cce26cde">trial</a>.<a class="code" href="structtalk__trial.html#ab47dfc76f3a74ecc18ccbf169508be0f">calc_chance</a>( *<span class="keyword">this</span> ) &lt; 100 ) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            <span class="comment">// Don&#39;t pick anything with a chance to fail.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        }</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160; </div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <span class="keywordflow">if</span>( !response.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#aa36913602deb4bfc90dd451afb6032ea">effects</a>.empty() ) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            <span class="comment">// Don&#39;t pick anything with side effects</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        }</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160; </div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        <span class="comment">// Unfortunately, while we&#39;d like to be able to go &quot;back&quot; from nested dialogue trees, the</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <span class="comment">// topic stack doesn&#39;t always shrink. Returning to the previous topic is sometimes done</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <span class="comment">// with TALK_NONE, or sometimes by referencing the topic id directly. No solution really</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        <span class="comment">// gives us something that feels right in all cases, so we only support completely leaving</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="comment">// the conversation via the quit key.</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        <span class="keywordflow">if</span>( response.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a>.<a class="code" href="structtalk__effect__t.html#a52fa0697f1c378cdea64c440e735e16d">next_topic</a>.<a class="code" href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">id</a> == <span class="stringliteral">&quot;TALK_DONE&quot;</span> ) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.size(); <span class="comment">// Didn&#39;t find a good option</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;}</div>
<div class="ttc" id="astructtalk__effect__t_html_aa36913602deb4bfc90dd451afb6032ea"><div class="ttname"><a href="structtalk__effect__t.html#aa36913602deb4bfc90dd451afb6032ea">talk_effect_t::effects</a></div><div class="ttdeci">std::vector&lt; talk_effect_fun_t &gt; effects</div><div class="ttdoc">Functions that are called when the response is chosen.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00142">dialogue.h:142</a></div></div>
<div class="ttc" id="astructtalk__response_html_a9838a8fadffa22d0ea7a6385cce26cde"><div class="ttname"><a href="structtalk__response.html#a9838a8fadffa22d0ea7a6385cce26cde">talk_response::trial</a></div><div class="ttdeci">talk_trial trial</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00163">dialogue.h:163</a></div></div>
<div class="ttc" id="astructtalk__trial_html_ab47dfc76f3a74ecc18ccbf169508be0f"><div class="ttname"><a href="structtalk__trial.html#ab47dfc76f3a74ecc18ccbf169508be0f">talk_trial::calc_chance</a></div><div class="ttdeci">int calc_chance(dialogue &amp;d) const</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01914">npctalk.cpp:1914</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l01914">talk_trial::calc_chance()</a>, <a class="el" href="dialogue_8h_source.html#l00142">talk_effect_t::effects</a>, <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, <a class="el" href="dialogue_8h_source.html#l00114">talk_effect_t::next_topic</a>, <a class="el" href="dialogue_8h_source.html#l00219">responses</a>, <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>, and <a class="el" href="dialogue_8h_source.html#l00163">talk_response::trial</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>.</p>

</div>
</div>
<a id="a7f13d548123aa0d5243d30dbdbeea826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f13d548123aa0d5243d30dbdbeea826">&#9670;&nbsp;</a></span>get_callstack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string dialogue::get_callstack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02349">2349</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;{</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a>.empty() ) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Callstack: &quot;</span> + <a class="code" href="structdialogue.html#a66e62f92651989e72ce6bab1c719be87">callstack</a>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    }</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00253">callstack</a>.</p>

<p class="reference">Referenced by <a class="el" href="condition_8cpp_source.html#l02315">eoc_math::act()</a>, <a class="el" href="effect__on__condition_8cpp_source.html#l00314">effect_on_condition::activate()</a>, <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00162">dbl_or_var_part::evaluate()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00199">duration_or_var_part::evaluate()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00126">abstract_str_or_var&lt; T &gt;::evaluate()</a>, <a class="el" href="npctalk_8cpp_source.html#l04447">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_cast_spell()</a>, <a class="el" href="npctalk_8cpp_source.html#l05459">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_queue_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05626">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_roll_remainder()</a>, <a class="el" href="npctalk_8cpp_source.html#l05188">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_npc_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05798">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_spawn_monster()</a>, <a class="el" href="dialogue__helpers_8cpp_source.html#l00010">maybe_read_var_value()</a>, <a class="el" href="npctalk_8cpp_source.html#l05422">talk_effect_fun::anonymous_namespace{npctalk.cpp}::process_eoc()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="aa9a20f20f7513214d8d3e85669f7f919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a20f20f7513214d8d3e85669f7f919">&#9670;&nbsp;</a></span>get_conditionals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; std::string, std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt; &gt; &amp; dialogue::get_conditionals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02335">2335</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;{</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00256">conditionals</a>.</p>

<p class="reference">Referenced by <a class="el" href="effect__on__condition_8cpp_source.html#l00314">effect_on_condition::activate()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05250">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_monster_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05188">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_npc_eocs()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02808">run_item_eocs()</a>.</p>

</div>
</div>
<a id="a2d74e9f39dedfa3e29f4e8d517bb20b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d74e9f39dedfa3e29f4e8d517bb20b3">&#9670;&nbsp;</a></span>get_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; std::string, std::string &gt; &amp; dialogue::get_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02329">2329</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;{</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00251">context</a>.</p>

<p class="reference">Referenced by <a class="el" href="effect__on__condition_8cpp_source.html#l00314">effect_on_condition::activate()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l05250">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_monster_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05188">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_npc_eocs()</a>, <a class="el" href="npctalk_8cpp_source.html#l05422">talk_effect_fun::anonymous_namespace{npctalk.cpp}::process_eoc()</a>, <a class="el" href="effect__on__condition_8cpp_source.html#l00283">process_reactivation()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02808">run_item_eocs()</a>.</p>

</div>
</div>
<a id="a5f1c28df053324719955d026ce04c296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f1c28df053324719955d026ce04c296">&#9670;&nbsp;</a></span>get_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string dialogue::get_value </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02306">2306</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;{</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdialogue.html#a2306f9312691d79ae537271545048105">maybe_get_value</a>( key ).value_or( std::string{} );</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;}</div>
<div class="ttc" id="astructdialogue_html_a2306f9312691d79ae537271545048105"><div class="ttname"><a href="structdialogue.html#a2306f9312691d79ae537271545048105">dialogue::maybe_get_value</a></div><div class="ttdeci">std::optional&lt; std::string &gt; maybe_get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02311">npctalk.cpp:2311</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk_8cpp_source.html#l02311">maybe_get_value()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l02069">parse_tags()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="a2306f9312691d79ae537271545048105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2306f9312691d79ae537271545048105">&#9670;&nbsp;</a></span>maybe_get_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; std::string &gt; dialogue::maybe_get_value </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02311">2311</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;{</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>-&gt;find( key );</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">return</span> it == <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>-&gt;end() ? std::nullopt : std::optional&lt;std::string&gt; { it-&gt;second };</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00251">context</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02306">get_value()</a>, and <a class="el" href="dialogue__helpers_8cpp_source.html#l00010">maybe_read_var_value()</a>.</p>

</div>
</div>
<a id="af599c40bde1747fefd003f27151452bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af599c40bde1747fefd003f27151452bf">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdialogue.html">dialogue</a>&amp; dialogue::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afc84991ebea278008276cb1f98f67e66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc84991ebea278008276cb1f98f67e66">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdialogue.html">dialogue</a>&amp; dialogue::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdialogue.html">dialogue</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ceba192f34968276a0e86a30b3a569b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ceba192f34968276a0e86a30b3a569b">&#9670;&nbsp;</a></span>opt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtalk__topic.html">talk_topic</a> dialogue::opt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdialogue__window.html">dialogue_window</a> &amp;&#160;</td>
          <td class="paramname"><em>d_win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtalk__topic.html">talk_topic</a> &amp;&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02524">2524</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;{</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    d_win.<a class="code" href="classdialogue__window.html#a6f992e1b79011963eb84acb14f6f65ab">add_history_separator</a>();</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160; </div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> <a class="code" href="namespaceui.html">ui</a>;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> resize_cb = [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#af610137ba7cf09a9596822a35ae720a2">resize</a>( <a class="code" href="namespaceui.html">ui</a> );</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    };</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_screen_resize( resize_cb );</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    resize_cb( <a class="code" href="namespaceui.html">ui</a> );</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="comment">// Construct full line</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    std::string challenge = <a class="code" href="structdialogue.html#ad32c86877be5f78069596a846bbc0cbd">dynamic_line</a>( topic );</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <a class="code" href="structdialogue.html#ac074903e749e4c545aac860ebc4a19a2">gen_responses</a>( topic );</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="comment">// Put quotes around challenge (unless it&#39;s an action)</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordflow">if</span>( challenge[0] != <span class="charliteral">&#39;*&#39;</span> &amp;&amp; challenge[0] != <span class="charliteral">&#39;&amp;&#39;</span> ) {</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        challenge = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;%s\&quot;&quot;</span> ), challenge );</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">// Parse any tags in challenge</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc() ) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <a class="code" href="npctalk_8cpp.html#a13dcf795383c76a06112b906efacac43">parse_tags</a>( challenge, *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;get_character(), *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;get_npc(), *<span class="keyword">this</span>,</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                    topic.<a class="code" href="structtalk__topic.html#a9d6a1c6c153013048c53e837c4b254e9">item_type</a> );</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        <a class="code" href="npctalk_8cpp.html#a13dcf795383c76a06112b906efacac43">parse_tags</a>( challenge, *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;get_character(), *<a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">false</span> )-&gt;get_character(), *<span class="keyword">this</span>,</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                    topic.<a class="code" href="structtalk__topic.html#a9d6a1c6c153013048c53e837c4b254e9">item_type</a> );</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    }</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    challenge = <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( challenge );</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    d_win.<a class="code" href="classdialogue__window.html#afb4665acb4a3cc4310435d49a2930b9d">clear_history_highlights</a>();</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <span class="keywordflow">if</span>( challenge[0] == <span class="charliteral">&#39;&amp;&#39;</span> ) {</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="comment">// No name prepended!</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        challenge = challenge.substr( 1 );</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#afb2bb598605b85cc66c1199b88fec328">add_to_history</a>( challenge );</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( challenge[0] == <span class="charliteral">&#39;*&#39;</span> ) {</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="comment">// Prepend name</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        challenge = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;npc does something&quot;</span>, <span class="stringliteral">&quot;%s %s&quot;</span> ), <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name(),</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                                   challenge.substr( 1 ) );</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#afb2bb598605b85cc66c1199b88fec328">add_to_history</a>( challenge );</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <a class="code" href="classnpc.html">npc</a> *npc_actor = <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a623669b6b3cfb0a15114547919504eeb">get_npc</a>();</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#afb2bb598605b85cc66c1199b88fec328">add_to_history</a>( challenge, d_win.<a class="code" href="classdialogue__window.html#a415d8e1754fcd97de6e206063562e847">is_not_conversation</a> ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name(),</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                              npc_actor ? npc_actor-&gt;<a class="code" href="classnpc.html#acf1b8241a8bd376dd32403cba43bbbc8">basic_symbol_color</a>() : <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160; </div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <a class="code" href="structdialogue.html#ae7343c934a16a58a3324e970a2c5693b">apply_speaker_effects</a>( topic );</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>.empty() ) {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;No dialogue responses&quot;</span> );</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structtalk__topic.html">talk_topic</a>( <span class="stringliteral">&quot;TALK_NONE&quot;</span> );</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    }</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160; </div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <a class="code" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;DIALOGUE_CHOOSE_RESPONSE&quot;</span> );</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    d_win.<a class="code" href="classdialogue__window.html#a4f55f5d7d469e31379c0b341f76c37b2">set_up_scrolling</a>( ctxt );</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;CONFIRM&quot;</span> );</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;ANY_INPUT&quot;</span> );</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    std::vector&lt;talk_data&gt; response_lines;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    std::vector&lt;input_event&gt; response_hotkeys;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> generate_response_lines = [&amp;]() {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="preprocessor">#if defined(__ANDROID__)</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        ctxt.get_registered_manual_keys().clear();</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <span class="keyword">const</span> <a class="code" href="classhotkey__queue.html">hotkey_queue</a> &amp;queue = <a class="code" href="classhotkey__queue.html#aadef3624ec1ea2dffb1476c241e1778b">hotkey_queue::alphabets</a>();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        response_lines.clear();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        response_hotkeys.clear();</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        <a class="code" href="structinput__event.html">input_event</a> evt = ctxt.first_unassigned_hotkey( queue );</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structtalk__response.html">talk_response</a> &amp;response : <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a> ) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;            <span class="keyword">const</span> <a class="code" href="structtalk__data.html">talk_data</a> &amp;td = response.create_option_line( *<span class="keyword">this</span>, evt, d_win.<a class="code" href="classdialogue__window.html#a1439e095b1be640c0aed528b27683558">is_computer</a> );</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            response_lines.emplace_back( td );</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            response_hotkeys.emplace_back( evt );</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="preprocessor">#if defined(__ANDROID__)</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            ctxt.register_manual_key( evt.<a class="code" href="structinput__event.html#a65c76de4d19d30a3b9fe386d7ee0aaed">get_first_input</a>(), td.<a class="code" href="structtalk__data.html#adc24ab6abf7fb3236382587d805d40c5">text</a> );</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;            evt = ctxt.next_unassigned_hotkey( queue, evt );</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        }</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#a5cf276a4a97d763c039fc5fae56a07c6">set_responses</a>( response_lines );</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    };</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    generate_response_lines();</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        d_win.<a class="code" href="classdialogue__window.html#a070a3be30fe7ab80458cde08a232105f">draw</a>( d_win.<a class="code" href="classdialogue__window.html#a415d8e1754fcd97de6e206063562e847">is_not_conversation</a> ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;disp_name() );</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    } );</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160; </div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="keywordtype">size_t</span> response_ind = response_hotkeys.size();</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a>;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        std::string <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <a class="code" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <a class="code" href="structinput__event.html">input_event</a> evt;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = ctxt.handle_input();</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;            evt = ctxt.get_raw_input();</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            d_win.<a class="code" href="classdialogue__window.html#aae4a3d9f38c372335333a859a55d4475">handle_scrolling</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, ctxt );</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            <a class="code" href="structtalk__topic.html">talk_topic</a> st = <a class="code" href="npctalk_8cpp.html#ad8bb67b521ee561fe70e9c07c67c9b7f">special_talk</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> );</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordflow">if</span>( st.<a class="code" href="structtalk__topic.html#ad8e4ad510315bdbd4d4183b2f4d5bf08">id</a> != <span class="stringliteral">&quot;TALK_NONE&quot;</span> ) {</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                <span class="keywordflow">return</span> st;</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            }</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> ) {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                <span class="comment">// Reallocate hotkeys as keybindings may have changed</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                generate_response_lines();</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CONFIRM&quot;</span> ) {</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                response_ind = d_win.<a class="code" href="classdialogue__window.html#aa2519dabf41097cd54289ac61112e855">sel_response</a>;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;ANY_INPUT&quot;</span> ) {</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                <span class="comment">// Check real hotkeys</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span> hotkey_it = std::find( response_hotkeys.begin(),</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                                                  response_hotkeys.end(), evt );</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                response_ind = std::distance( response_hotkeys.begin(), hotkey_it );</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                response_ind = <a class="code" href="structdialogue.html#ad780435f9d234429325eef47a81673d5">get_best_quit_response</a>();</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;            }</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        } <span class="keywordflow">while</span>( response_ind &gt;= response_hotkeys.size() ||</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                 ( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> != <span class="stringliteral">&quot;ANY_INPUT&quot;</span> &amp;&amp; <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> != <span class="stringliteral">&quot;QUIT&quot;</span> &amp;&amp; <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> != <span class="stringliteral">&quot;CONFIRM&quot;</span> ) );</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <a class="code" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        std::set&lt;dialogue_consequence&gt; consequences = <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>[response_ind].get_consequences( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        <span class="keywordflow">if</span>( consequences.count( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a38be931b73e384a6a576c499c50c0aee">dialogue_consequence::hostile</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            <a class="code" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a> = <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You may be attacked!  Proceed?&quot;</span> ) );</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( consequences.count( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71aea1759cac1069121edc08cd421358edc">dialogue_consequence::helpless</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            <a class="code" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a> = <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll be helpless!  Proceed?&quot;</span> ) );</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        }</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    } <span class="keywordflow">while</span>( !<a class="code" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a> );</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    d_win.<a class="code" href="classdialogue__window.html#a6f992e1b79011963eb84acb14f6f65ab">add_history_separator</a>();</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    d_win.<a class="code" href="classdialogue__window.html#afb2bb598605b85cc66c1199b88fec328">add_to_history</a>( response_lines[response_ind].text, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&quot;</span> ), <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> );</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <a class="code" href="structtalk__response.html">talk_response</a> chosen = <a class="code" href="structdialogue.html#a015666472bdcaf3a21d69dbdfa40dc1c">responses</a>[response_ind];</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    <span class="keywordflow">if</span>( chosen.<a class="code" href="structtalk__response.html#a14b39e3cef1a8083579f2cc033f82bf0">mission_selected</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a64b7fd215eaf45722c3246c6777f98b9">select_mission</a>( chosen.<a class="code" href="structtalk__response.html#a14b39e3cef1a8083579f2cc033f82bf0">mission_selected</a> );</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// We can&#39;t set both skill and style or training will bug out</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="comment">// TODO: Allow setting both skill and style</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="structdialogue.html#a4204ef07d9db03f188e23a832f2915c8">actor</a>( <span class="keyword">true</span> )-&gt;<a class="code" href="classtalker.html#a0bdd95ea4f02cd250b05f38eabb23de3">store_chosen_training</a>( chosen.<a class="code" href="structtalk__response.html#a82b6f31da554bd5c1557260c3020071d">skill</a>, chosen.<a class="code" href="structtalk__response.html#aa75afb0466c174a9e8f32362f721b74e">style</a>, chosen.<a class="code" href="structtalk__response.html#a04ab6d99176d921f37482f8a8adb5956">dialogue_spell</a>,</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                                          chosen.<a class="code" href="structtalk__response.html#ad670d0e196318294b1af7119d3247fd6">proficiency</a> );</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">success</a> = chosen.<a class="code" href="structtalk__response.html#a9838a8fadffa22d0ea7a6385cce26cde">trial</a>.<a class="code" href="structtalk__trial.html#a8e9846caf634471cac79d911ae9d9177">roll</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <a class="code" href="structtalk__effect__t.html">talk_effect_t</a> <span class="keyword">const</span> &amp;<a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a2bb387c51f0ebdab53cc485d53694d37">effects</a> = <a class="code" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">success</a> ? chosen.<a class="code" href="structtalk__response.html#ad8139bb3b9e773a743ac88f9e64fef50">success</a> : chosen.<a class="code" href="structtalk__response.html#a44a669e1b41824179618ba1121a5a54f">failure</a>;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <a class="code" href="structtalk__topic.html">talk_topic</a> ret_topic =  <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a2bb387c51f0ebdab53cc485d53694d37">effects</a>.apply( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <a class="code" href="structtalk__effect__t.html#ac521d336b18ff781d2cadf137b4e43b3">talk_effect_t::update_missions</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keywordflow">return</span> ret_topic;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;}</div>
<div class="ttc" id="aclassdialogue__window_html_a070a3be30fe7ab80458cde08a232105f"><div class="ttname"><a href="classdialogue__window.html#a070a3be30fe7ab80458cde08a232105f">dialogue_window::draw</a></div><div class="ttdeci">void draw(const std::string &amp;npc_name)</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00047">dialogue_win.cpp:47</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_a1439e095b1be640c0aed528b27683558"><div class="ttname"><a href="classdialogue__window.html#a1439e095b1be640c0aed528b27683558">dialogue_window::is_computer</a></div><div class="ttdeci">bool is_computer</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8h_source.html#l00050">dialogue_win.h:50</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_a415d8e1754fcd97de6e206063562e847"><div class="ttname"><a href="classdialogue__window.html#a415d8e1754fcd97de6e206063562e847">dialogue_window::is_not_conversation</a></div><div class="ttdeci">bool is_not_conversation</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8h_source.html#l00051">dialogue_win.h:51</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_a4f55f5d7d469e31379c0b341f76c37b2"><div class="ttname"><a href="classdialogue__window.html#a4f55f5d7d469e31379c0b341f76c37b2">dialogue_window::set_up_scrolling</a></div><div class="ttdeci">void set_up_scrolling(input_context &amp;ctxt) const</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00110">dialogue_win.cpp:110</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_a5cf276a4a97d763c039fc5fae56a07c6"><div class="ttname"><a href="classdialogue__window.html#a5cf276a4a97d763c039fc5fae56a07c6">dialogue_window::set_responses</a></div><div class="ttdeci">void set_responses(const std::vector&lt; talk_data &gt; &amp;responses)</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00183">dialogue_win.cpp:183</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_a6f992e1b79011963eb84acb14f6f65ab"><div class="ttname"><a href="classdialogue__window.html#a6f992e1b79011963eb84acb14f6f65ab">dialogue_window::add_history_separator</a></div><div class="ttdeci">void add_history_separator()</div><div class="ttdoc">Adds a separator to the conversation history.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00142">dialogue_win.cpp:142</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_aa2519dabf41097cd54289ac61112e855"><div class="ttname"><a href="classdialogue__window.html#aa2519dabf41097cd54289ac61112e855">dialogue_window::sel_response</a></div><div class="ttdeci">int sel_response</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8h_source.html#l00052">dialogue_win.h:52</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_aae4a3d9f38c372335333a859a55d4475"><div class="ttname"><a href="classdialogue__window.html#aae4a3d9f38c372335333a859a55d4475">dialogue_window::handle_scrolling</a></div><div class="ttdeci">void handle_scrolling(std::string &amp;action, input_context &amp;ctxt)</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00101">dialogue_win.cpp:101</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_af610137ba7cf09a9596822a35ae720a2"><div class="ttname"><a href="classdialogue__window.html#af610137ba7cf09a9596822a35ae720a2">dialogue_window::resize</a></div><div class="ttdeci">void resize(ui_adaptor &amp;ui)</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00029">dialogue_win.cpp:29</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_afb2bb598605b85cc66c1199b88fec328"><div class="ttname"><a href="classdialogue__window.html#afb2bb598605b85cc66c1199b88fec328">dialogue_window::add_to_history</a></div><div class="ttdeci">void add_to_history(const std::string &amp;text)</div><div class="ttdoc">Adds a message to the conversation history.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00130">dialogue_win.cpp:130</a></div></div>
<div class="ttc" id="aclassdialogue__window_html_afb4665acb4a3cc4310435d49a2930b9d"><div class="ttname"><a href="classdialogue__window.html#afb4665acb4a3cc4310435d49a2930b9d">dialogue_window::clear_history_highlights</a></div><div class="ttdeci">void clear_history_highlights()</div><div class="ttdoc">Unhighlights all messages.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00147">dialogue_win.cpp:147</a></div></div>
<div class="ttc" id="aclasshotkey__queue_html"><div class="ttname"><a href="classhotkey__queue.html">hotkey_queue</a></div><div class="ttdef"><b>Definition:</b> <a href="input__context_8h_source.html#l00483">input_context.h:484</a></div></div>
<div class="ttc" id="aclasshotkey__queue_html_aadef3624ec1ea2dffb1476c241e1778b"><div class="ttname"><a href="classhotkey__queue.html#aadef3624ec1ea2dffb1476c241e1778b">hotkey_queue::alphabets</a></div><div class="ttdeci">static const hotkey_queue &amp; alphabets()</div><div class="ttdoc">In keychar mode: a-z, A-Z In keycode mode: a-z, shift a-z.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l01413">input_context.cpp:1413</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8h_source.html#l00039">input_context.h:40</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_acf1b8241a8bd376dd32403cba43bbbc8"><div class="ttname"><a href="classnpc.html#acf1b8241a8bd376dd32403cba43bbbc8">npc::basic_symbol_color</a></div><div class="ttdeci">nc_color basic_symbol_color() const override</div><div class="ttdoc">Creature symbol color.</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02556">npc.cpp:2556</a></div></div>
<div class="ttc" id="aclasstalker_html_a0bdd95ea4f02cd250b05f38eabb23de3"><div class="ttname"><a href="classtalker.html#a0bdd95ea4f02cd250b05f38eabb23de3">talker::store_chosen_training</a></div><div class="ttdeci">virtual void store_chosen_training(const skill_id &amp;, const matype_id &amp;, const spell_id &amp;, const proficiency_id &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00324">talker.h:324</a></div></div>
<div class="ttc" id="aclasstalker_html_a64b7fd215eaf45722c3246c6777f98b9"><div class="ttname"><a href="classtalker.html#a64b7fd215eaf45722c3246c6777f98b9">talker::select_mission</a></div><div class="ttdeci">virtual void select_mission(mission *)</div><div class="ttdef"><b>Definition:</b> <a href="talker_8h_source.html#l00448">talker.h:448</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00074">ui_manager.h:75</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a38be931b73e384a6a576c499c50c0aee"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a38be931b73e384a6a576c499c50c0aee">hostile</a></div><div class="ttdeci">@ hostile</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00041">dialogue.h:41</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71aea1759cac1069121edc08cd421358edc"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71aea1759cac1069121edc08cd421358edc">helpless</a></div><div class="ttdeci">@ helpless</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00042">dialogue.h:42</a></div></div>
<div class="ttc" id="aenums_8h_html_a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75"><div class="ttname"><a href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">aim_exit::okay</a></div><div class="ttdeci">@ okay</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3a2bb387c51f0ebdab53cc485d53694d37"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a2bb387c51f0ebdab53cc485d53694d37">anonymous_namespace{player_display.cpp}::player_display_tab::effects</a></div><div class="ttdeci">@ effects</div></div>
<div class="ttc" id="anamespacebehavior_html_af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">behavior::status_t::success</a></div><div class="ttdeci">@ success</div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00504">ui_manager.cpp:504</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00024">overmap_ui.h:25</a></div></div>
<div class="ttc" id="anpctalk_8cpp_html_a13dcf795383c76a06112b906efacac43"><div class="ttname"><a href="npctalk_8cpp.html#a13dcf795383c76a06112b906efacac43">parse_tags</a></div><div class="ttdeci">void parse_tags(std::string &amp;phrase, const Character &amp;u, const Character &amp;me, const itype_id &amp;item_type)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02056">npctalk.cpp:2056</a></div></div>
<div class="ttc" id="anpctalk_8cpp_html_ad8bb67b521ee561fe70e9c07c67c9b7f"><div class="ttname"><a href="npctalk_8cpp.html#ad8bb67b521ee561fe70e9c07c67c9b7f">special_talk</a></div><div class="ttdeci">static const talk_topic &amp; special_talk(const std::string &amp;action)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02504">npctalk.cpp:2504</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a71e024973a8beccd4a228d00ebd9503a"><div class="ttname"><a href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a></div><div class="ttdeci">std::string uppercase_first_letter(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02558">output.cpp:2558</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="astructdialogue_html_ac074903e749e4c545aac860ebc4a19a2"><div class="ttname"><a href="structdialogue.html#ac074903e749e4c545aac860ebc4a19a2">dialogue::gen_responses</a></div><div class="ttdeci">void gen_responses(const talk_topic &amp;topic)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01692">npctalk.cpp:1692</a></div></div>
<div class="ttc" id="astructdialogue_html_ad32c86877be5f78069596a846bbc0cbd"><div class="ttname"><a href="structdialogue.html#ad32c86877be5f78069596a846bbc0cbd">dialogue::dynamic_line</a></div><div class="ttdeci">std::string dynamic_line(const talk_topic &amp;topic)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01420">npctalk.cpp:1420</a></div></div>
<div class="ttc" id="astructdialogue_html_ad780435f9d234429325eef47a81673d5"><div class="ttname"><a href="structdialogue.html#ad780435f9d234429325eef47a81673d5">dialogue::get_best_quit_response</a></div><div class="ttdeci">int get_best_quit_response()</div><div class="ttdoc">Finds the best response to use when the player is trying to quit.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l02671">npctalk.cpp:2671</a></div></div>
<div class="ttc" id="astructdialogue_html_ae7343c934a16a58a3324e970a2c5693b"><div class="ttname"><a href="structdialogue.html#ae7343c934a16a58a3324e970a2c5693b">dialogue::apply_speaker_effects</a></div><div class="ttdeci">void apply_speaker_effects(const talk_topic &amp;the_topic)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01578">npctalk.cpp:1578</a></div></div>
<div class="ttc" id="astructinput__event_html"><div class="ttname"><a href="structinput__event.html">input_event</a></div><div class="ttdoc">An instance of an input, like a keypress etc.</div><div class="ttdef"><b>Definition:</b> <a href="input__enums_8h_source.html#l00063">input_enums.h:63</a></div></div>
<div class="ttc" id="astructinput__event_html_a65c76de4d19d30a3b9fe386d7ee0aaed"><div class="ttname"><a href="structinput__event.html#a65c76de4d19d30a3b9fe386d7ee0aaed">input_event::get_first_input</a></div><div class="ttdeci">int get_first_input() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00098">input.cpp:98</a></div></div>
<div class="ttc" id="astructtalk__data_html"><div class="ttname"><a href="structtalk__data.html">talk_data</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8h_source.html#l00017">dialogue_win.h:17</a></div></div>
<div class="ttc" id="astructtalk__data_html_adc24ab6abf7fb3236382587d805d40c5"><div class="ttname"><a href="structtalk__data.html#adc24ab6abf7fb3236382587d805d40c5">talk_data::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8h_source.html#l00020">dialogue_win.h:20</a></div></div>
<div class="ttc" id="astructtalk__effect__t_html"><div class="ttname"><a href="structtalk__effect__t.html">talk_effect_t</a></div><div class="ttdoc">Defines what happens when the trial succeeds or fails.</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00100">dialogue.h:100</a></div></div>
<div class="ttc" id="astructtalk__effect__t_html_ac521d336b18ff781d2cadf137b4e43b3"><div class="ttname"><a href="structtalk__effect__t.html#ac521d336b18ff781d2cadf137b4e43b3">talk_effect_t::update_missions</a></div><div class="ttdeci">static void update_missions(dialogue &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l06278">npctalk.cpp:6278</a></div></div>
<div class="ttc" id="astructtalk__response_html_a44a669e1b41824179618ba1121a5a54f"><div class="ttname"><a href="structtalk__response.html#a44a669e1b41824179618ba1121a5a54f">talk_response::failure</a></div><div class="ttdeci">talk_effect_t failure</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00174">dialogue.h:174</a></div></div>
<div class="ttc" id="astructtalk__trial_html_a8e9846caf634471cac79d911ae9d9177"><div class="ttname"><a href="structtalk__trial.html#a8e9846caf634471cac79d911ae9d9177">talk_trial::roll</a></div><div class="ttdeci">bool roll(dialogue &amp;d) const</div><div class="ttdoc">Roll for success or failure of this trial.</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01952">npctalk.cpp:1952</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00142">dialogue_window::add_history_separator()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00130">dialogue_window::add_to_history()</a>, <a class="el" href="input__context_8cpp_source.html#l01413">hotkey_queue::alphabets()</a>, <a class="el" href="npctalk_8cpp_source.html#l01578">apply_speaker_effects()</a>, <a class="el" href="npc_8cpp_source.html#l02556">npc::basic_symbol_color()</a>, <a class="el" href="color_8h_source.html#l00027">c_light_blue</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00147">dialogue_window::clear_history_highlights()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="dialogue_8h_source.html#l00170">talk_response::dialogue_spell</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00047">dialogue_window::draw()</a>, <a class="el" href="npctalk_8cpp_source.html#l01420">dynamic_line()</a>, <a class="el" href="dialogue_8h_source.html#l00174">talk_response::failure</a>, <a class="el" href="input__context_8cpp_source.html#l01332">input_context::first_unassigned_hotkey()</a>, <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l02671">get_best_quit_response()</a>, <a class="el" href="input_8cpp_source.html#l00098">input_event::get_first_input()</a>, <a class="el" href="talker_8h_source.html#l00049">talker::get_npc()</a>, <a class="el" href="input__context_8cpp_source.html#l01132">input_context::get_raw_input()</a>, <a class="el" href="input__context_8cpp_source.html#l00427">input_context::handle_input()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00101">dialogue_window::handle_scrolling()</a>, <a class="el" href="dialogue_8h_source.html#l00042">helpless</a>, <a class="el" href="dialogue_8h_source.html#l00041">hostile</a>, <a class="el" href="dialogue_8h_source.html#l00089">talk_topic::id</a>, <a class="el" href="dialogue__win_8h_source.html#l00050">dialogue_window::is_computer</a>, <a class="el" href="dialogue__win_8h_source.html#l00051">dialogue_window::is_not_conversation</a>, <a class="el" href="dialogue_8h_source.html#l00091">talk_topic::item_type</a>, <a class="el" href="dialogue_8h_source.html#l00167">talk_response::mission_selected</a>, <a class="el" href="input__context_8cpp_source.html#l01342">input_context::next_unassigned_hotkey()</a>, <a class="el" href="enums_8h.html#a4e9f163ad07562a548642459ea9474e0adf8fede7ff71608e24a5576326e41c75">okay</a>, <a class="el" href="npctalk_8cpp_source.html#l02056">parse_tags()</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="dialogue_8h_source.html#l00171">talk_response::proficiency</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00504">ui_manager::redraw()</a>, <a class="el" href="input__context_8cpp_source.html#l00180">input_context::register_action()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00029">dialogue_window::resize()</a>, <a class="el" href="dialogue_8h_source.html#l00219">responses</a>, <a class="el" href="npctalk_8cpp_source.html#l01952">talk_trial::roll()</a>, <a class="el" href="dialogue__win_8h_source.html#l00052">dialogue_window::sel_response</a>, <a class="el" href="talker_8h_source.html#l00448">talker::select_mission()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00183">dialogue_window::set_responses()</a>, <a class="el" href="dialogue__win_8cpp_source.html#l00110">dialogue_window::set_up_scrolling()</a>, <a class="el" href="dialogue_8h_source.html#l00168">talk_response::skill</a>, <a class="el" href="npctalk_8cpp_source.html#l02504">special_talk()</a>, <a class="el" href="talker_8h_source.html#l00324">talker::store_chosen_training()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="dialogue_8h_source.html#l00169">talk_response::style</a>, <a class="el" href="dialogue_8h_source.html#l00173">talk_response::success</a>, <a class="el" href="dialogue__win_8h_source.html#l00020">talk_data::text</a>, <a class="el" href="dialogue_8h_source.html#l00163">talk_response::trial</a>, <a class="el" href="npctalk_8cpp_source.html#l06278">talk_effect_t::update_missions()</a>, and <a class="el" href="output_8cpp_source.html#l02558">uppercase_first_letter()</a>.</p>

</div>
</div>
<a id="a16866232da3554091bbcbc9c36b36d95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16866232da3554091bbcbc9c36b36d95">&#9670;&nbsp;</a></span>remove_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::remove_value </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02301">2301</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;{</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>-&gt;erase( key );</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00251">context</a>.</p>

</div>
</div>
<a id="a89b43734f396689f00e32bc85cf8f3e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89b43734f396689f00e32bc85cf8f3e9">&#9670;&nbsp;</a></span>set_conditional()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::set_conditional </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; bool(<a class="el" href="structdialogue.html">dialogue</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02317">2317</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <a class="code" href="structdialogue.html#a7c26d027c003374496e4e11b146106b0">conditionals</a>[key] = value;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00256">conditionals</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l04617">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_condition()</a>.</p>

</div>
</div>
<a id="a9f1d716834958c323b7a213564097152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1d716834958c323b7a213564097152">&#9670;&nbsp;</a></span>set_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialogue::set_value </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="npctalk_8cpp_source.html#l02296">2296</a> of file <a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;{</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="structdialogue.html#ae2aba079b2bc8d5f237f65b3afeaf6a1">context</a>[key] = value;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00251">context</a>.</p>

<p class="reference">Referenced by <a class="el" href="mutation_8cpp_source.html#l00739">Character::activate_mutation()</a>, <a class="el" href="iexamine__actors_8cpp_source.html#l00250">eoc_examine_actor::call()</a>, <a class="el" href="mutation_8cpp_source.html#l00917">Character::deactivate_mutation()</a>, <a class="el" href="npctalk_8cpp_source.html#l04931">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_selector()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="suffer_8cpp_source.html#l00232">suffer::mutation_power()</a>, <a class="el" href="damage_8cpp_source.html#l00433">damage_type::ondamage_effects()</a>, <a class="el" href="effect__on__condition_8cpp_source.html#l00232">process_eocs()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab1772390a9c74cd9e3a68078741696c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1772390a9c74cd9e3a68078741696c2">&#9670;&nbsp;</a></span>alpha</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classtalker.html">talker</a>&gt; dialogue::alpha</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The talker that speaks (almost certainly representing the avatar, ie <a class="el" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar()</a> ) </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00244">244</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>.</p>

</div>
</div>
<a id="af57807b78ce93c05493ea92fcf69b246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af57807b78ce93c05493ea92fcf69b246">&#9670;&nbsp;</a></span>beta</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classtalker.html">talker</a>&gt; dialogue::beta</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The talker responded to alpha, usually a <a class="el" href="classtalker__npc.html">talker_npc</a>. </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00248">248</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>.</p>

</div>
</div>
<a id="a23fd3c22838562075db010d68e8ce55f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23fd3c22838562075db010d68e8ce55f">&#9670;&nbsp;</a></span>by_radio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dialogue::by_radio = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This dialogue is happening over a radio. </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00215">215</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01358">avatar::talk_to()</a>.</p>

</div>
</div>
<a id="a66e62f92651989e72ce6bab1c719be87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e62f92651989e72ce6bab1c719be87">&#9670;&nbsp;</a></span>callstack</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dialogue::callstack</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00253">253</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02340">amend_callstack()</a>, <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02349">get_callstack()</a>.</p>

</div>
</div>
<a id="a7c26d027c003374496e4e11b146106b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c26d027c003374496e4e11b146106b0">&#9670;&nbsp;</a></span>conditionals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlazy.html">lazy</a>&lt;std::unordered_map&lt;std::string, std::function&lt;bool( <a class="el" href="structdialogue.html">dialogue</a> &amp; )&gt; &gt; &gt; dialogue::conditionals</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00256">256</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l02323">evaluate_conditional()</a>, <a class="el" href="npctalk_8cpp_source.html#l02335">get_conditionals()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02317">set_conditional()</a>.</p>

</div>
</div>
<a id="ae2aba079b2bc8d5f237f65b3afeaf6a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2aba079b2bc8d5f237f65b3afeaf6a1">&#9670;&nbsp;</a></span>context</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlazy.html">lazy</a>&lt;std::unordered_map&lt;std::string, std::string&gt; &gt; dialogue::context</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00251">251</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l02329">get_context()</a>, <a class="el" href="npctalk_8cpp_source.html#l02311">maybe_get_value()</a>, <a class="el" href="npctalk_8cpp_source.html#l02301">remove_value()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02296">set_value()</a>.</p>

</div>
</div>
<a id="a8b356491a4ba3a81d77cc9a12a207856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b356491a4ba3a81d77cc9a12a207856">&#9670;&nbsp;</a></span>cur_item</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> dialogue::cur_item</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00208">208</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01420">dynamic_line()</a>, and <a class="el" href="npctalk_8cpp_source.html#l03994">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_bulk_trade_accept()</a>.</p>

</div>
</div>
<a id="aaa677a645faccbd6f4ac7781b7ceb894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa677a645faccbd6f4ac7781b7ceb894">&#9670;&nbsp;</a></span>done</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dialogue::done = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If true, we are done talking and the dialog ends. </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00188">188</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

</div>
</div>
<a id="ab54fd2f389b1557af627131516f6890f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab54fd2f389b1557af627131516f6890f">&#9670;&nbsp;</a></span>has_alpha</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dialogue::has_alpha</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00225">225</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, <a class="el" href="npctalk_8cpp_source.html#l05459">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_queue_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l04931">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_selector()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l04582">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_string_var()</a>, <a class="el" href="npctalk_8cpp_source.html#l05422">talk_effect_fun::anonymous_namespace{npctalk.cpp}::process_eoc()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="aac987b3dc38e2963e3dc1c48428db380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac987b3dc38e2963e3dc1c48428db380">&#9670;&nbsp;</a></span>has_beta</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dialogue::has_beta</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00224">224</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02357">actor()</a>, <a class="el" href="npctalk_8cpp_source.html#l06246">talk_effect_t::apply()</a>, <a class="el" href="npctalk_8cpp_source.html#l02379">dialogue()</a>, <a class="el" href="npctalk_8cpp_source.html#l03839">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_mapgen_update()</a>, <a class="el" href="npctalk_8cpp_source.html#l04173">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_message()</a>, <a class="el" href="npctalk_8cpp_source.html#l04688">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_offer_mission()</a>, <a class="el" href="npctalk_8cpp_source.html#l04931">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_selector()</a>, <a class="el" href="npctalk_8cpp_source.html#l05091">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_run_eoc_with()</a>, <a class="el" href="npctalk_8cpp_source.html#l04582">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_set_string_var()</a>, <a class="el" href="npctalk_8cpp_source.html#l03122">talk_effect_fun::anonymous_namespace{npctalk.cpp}::receive_item()</a>, <a class="el" href="npctalk_8cpp_source.html#l06278">talk_effect_t::update_missions()</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="af0883e28c7c29ffdfb4ba6cd2fcf2d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0883e28c7c29ffdfb4ba6cd2fcf2d06">&#9670;&nbsp;</a></span>missions_assigned</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classmission.html">mission</a> *&gt; dialogue::missions_assigned</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Missions that have been assigned by this npc to the player they currently speak to. </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00192">192</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>, <a class="el" href="mission_8cpp_source.html#l00467">mission::is_complete()</a>, and <a class="el" href="npctalk_8cpp_source.html#l06278">talk_effect_t::update_missions()</a>.</p>

</div>
</div>
<a id="a691be501b1d6b306af9f18ef48d1f01a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a691be501b1d6b306af9f18ef48d1f01a">&#9670;&nbsp;</a></span>reason</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dialogue::reason</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00209">209</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l04092">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_npc_gets_item()</a>, and <a class="el" href="widget_8cpp_source.html#l00304">widget_clause::meets_condition()</a>.</p>

</div>
</div>
<a id="a015666472bdcaf3a21d69dbdfa40dc1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015666472bdcaf3a21d69dbdfa40dc1c">&#9670;&nbsp;</a></span>responses</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtalk__response.html">talk_response</a>&gt; dialogue::responses</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Possible responses from the player character, filled in <a class="el" href="structdialogue.html#ac074903e749e4c545aac860ebc4a19a2">gen_responses</a>. </p>

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00219">219</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l01592">add_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l06772">json_talk_response::gen_repeat_response()</a>, <a class="el" href="npctalk_8cpp_source.html#l01692">gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l07069">json_talk_topic::gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l06749">json_talk_response::gen_responses()</a>, <a class="el" href="npctalk_8cpp_source.html#l02671">get_best_quit_response()</a>, and <a class="el" href="npctalk_8cpp_source.html#l02524">opt()</a>.</p>

</div>
</div>
<a id="aa90f3050bf6d9257d3e16b69086f526e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90f3050bf6d9257d3e16b69086f526e">&#9670;&nbsp;</a></span>topic_stack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtalk__topic.html">talk_topic</a>&gt; dialogue::topic_stack</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dialogue_8h_source.html#l00189">189</a> of file <a class="el" href="dialogue_8h_source.html">dialogue.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l02277">add_topic()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>src/<a class="el" href="dialogue_8h_source.html">dialogue.h</a></li>
<li>src/<a class="el" href="npctalk_8cpp_source.html">npctalk.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:37 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
