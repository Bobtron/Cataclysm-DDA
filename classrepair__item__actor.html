<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: repair_item_actor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classrepair__item__actor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">repair_item_actor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Repair an item.  
 <a href="classrepair__item__actor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for repair_item_actor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classrepair__item__actor.png" usemap="#repair_5Fitem_5Factor_map" alt=""/>
  <map id="repair_5Fitem_5Factor_map" name="repair_5Fitem_5Factor_map">
<area href="classiuse__actor.html" alt="iuse_actor" shape="rect" coords="0,0,111,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9a0fbea23cd5e9494e6d57c98d7091ae"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">attempt_hint</a> : int { <br />
&#160;&#160;<a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a> = 0
, <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>
, <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">AS_FAILURE</a>
, <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">AS_DESTROYED</a>
, <br />
&#160;&#160;<a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>
, <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9">AS_CANT_USE_TOOL</a>
, <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeafc9cadc1c5707829ba56cb24a808075c">AS_CANT_YET</a>
<br />
 }</td></tr>
<tr class="separator:a9a0fbea23cd5e9494e6d57c98d7091ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181063ab4b7e6de08c14f7e15b2563fe"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_type</a> : int { <br />
&#160;&#160;<a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">RT_NOTHING</a> = 0
, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">RT_REPAIR</a> = 1
, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a> = 2
, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">RT_DOWNSIZING</a> = 3
, <br />
&#160;&#160;<a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">RT_UPSIZING</a> = 4
, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">RT_PRACTICE</a> = 6
, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea9ef819ffe70cdc4d96e821bcca6aeba9">NUM_REPAIR_TYPES</a> = 7
<br />
 }</td></tr>
<tr class="separator:a181063ab4b7e6de08c14f7e15b2563fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab4479ce41bc825be8ef544c7fad5e98a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">attempt_hint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#ab4479ce41bc825be8ef544c7fad5e98a">repair</a> (<a class="el" href="classCharacter.html">Character</a> &amp;pl, <a class="el" href="classitem.html">item</a> &amp;tool, <a class="el" href="classitem__location.html">item_location</a> &amp;fix, bool refit_only=false) const</td></tr>
<tr class="memdesc:ab4479ce41bc825be8ef544c7fad5e98a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to repair target item with selected tool.  <a href="classrepair__item__actor.html#ab4479ce41bc825be8ef544c7fad5e98a">More...</a><br /></td></tr>
<tr class="separator:ab4479ce41bc825be8ef544c7fad5e98a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae38080060108420290e8ef53a93d7de7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">can_repair_target</a> (<a class="el" href="classCharacter.html">Character</a> &amp;pl, const <a class="el" href="classitem.html">item</a> &amp;fix, bool print_msg, bool check_consumed_available) const</td></tr>
<tr class="memdesc:ae38080060108420290e8ef53a93d7de7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if repairs on target item are possible.  <a href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">More...</a><br /></td></tr>
<tr class="separator:ae38080060108420290e8ef53a93d7de7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8127a68c52e50b325de6511fee2dcdd5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">can_use_tool</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;p, const <a class="el" href="classitem.html">item</a> &amp;tool, bool print_msg) const</td></tr>
<tr class="memdesc:a8127a68c52e50b325de6511fee2dcdd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if we are allowed to use the tool.  <a href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">More...</a><br /></td></tr>
<tr class="separator:a8127a68c52e50b325de6511fee2dcdd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7af13e43794ca1ee41803c49a966b3"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">get_valid_repair_materials</a> (const <a class="el" href="classitem.html">item</a> &amp;fix) const</td></tr>
<tr class="memdesc:acb7af13e43794ca1ee41803c49a966b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of items that can be used to repair this item.  <a href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">More...</a><br /></td></tr>
<tr class="separator:acb7af13e43794ca1ee41803c49a966b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8454ab3c65c72e15f831a6b916a3f65"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a> (<a class="el" href="classCharacter.html">Character</a> &amp;pl, const <a class="el" href="classitem.html">item</a> &amp;fix, bool print_msg, bool just_check, bool check_consumed_available) const</td></tr>
<tr class="memdesc:ab8454ab3c65c72e15f831a6b916a3f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if components are available.  <a href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">More...</a><br /></td></tr>
<tr class="separator:ab8454ab3c65c72e15f831a6b916a3f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af589becfbe6ffa1725253e91818267be"><td class="memItemLeft" align="right" valign="top">std::pair&lt; float, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">repair_chance</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;pl, const <a class="el" href="classitem.html">item</a> &amp;fix, <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_type</a> action_type) const</td></tr>
<tr class="memdesc:af589becfbe6ffa1725253e91818267be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the chance to repair and to damage an item.  <a href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">More...</a><br /></td></tr>
<tr class="separator:af589becfbe6ffa1725253e91818267be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ffc0c3f8468701dc0553b50ab72a40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">default_action</a> (const <a class="el" href="classitem.html">item</a> &amp;fix, int current_skill_level) const</td></tr>
<tr class="memdesc:a17ffc0c3f8468701dc0553b50ab72a40"><td class="mdescLeft">&#160;</td><td class="mdescRight">What are we most likely trying to do with this item?  <a href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">More...</a><br /></td></tr>
<tr class="separator:a17ffc0c3f8468701dc0553b50ab72a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac510427b83a5a419cefd89dae86cded1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#ac510427b83a5a419cefd89dae86cded1">repair_recipe_difficulty</a> (const <a class="el" href="classitem.html">item</a> &amp;fix) const</td></tr>
<tr class="memdesc:ac510427b83a5a419cefd89dae86cded1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the difficulty to repair an item based on its materials.  <a href="classrepair__item__actor.html#ac510427b83a5a419cefd89dae86cded1">More...</a><br /></td></tr>
<tr class="separator:ac510427b83a5a419cefd89dae86cded1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0b8234ce73a9f98b9b1a2f7085d01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a22a0b8234ce73a9f98b9b1a2f7085d01">repair_item_actor</a> (const std::string &amp;<a class="el" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a>=&quot;repair_item&quot;)</td></tr>
<tr class="separator:a22a0b8234ce73a9f98b9b1a2f7085d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61cfe62b7aeaa9d2063d773344efc5a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#af61cfe62b7aeaa9d2063d773344efc5a">~repair_item_actor</a> () override=default</td></tr>
<tr class="separator:af61cfe62b7aeaa9d2063d773344efc5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e0557a8eb4d6e7ba3a5243e4bd4cb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a35e0557a8eb4d6e7ba3a5243e4bd4cb8">load</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;obj) override</td></tr>
<tr class="separator:a35e0557a8eb4d6e7ba3a5243e4bd4cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6472a0173dbc81ddcd4818fb95f2d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#acd6472a0173dbc81ddcd4818fb95f2d7">use</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;) const override</td></tr>
<tr class="separator:acd6472a0173dbc81ddcd4818fb95f2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59cd64c17e3d9a977e444c21ff3899d5"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classiuse__actor.html">iuse_actor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a59cd64c17e3d9a977e444c21ff3899d5">clone</a> () const override</td></tr>
<tr class="memdesc:a59cd64c17e3d9a977e444c21ff3899d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a deep copy of this object.  <a href="classrepair__item__actor.html#a59cd64c17e3d9a977e444c21ff3899d5">More...</a><br /></td></tr>
<tr class="separator:a59cd64c17e3d9a977e444c21ff3899d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ec853d6f27aa41fd3cd7fe1443a1f93"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a2ec853d6f27aa41fd3cd7fe1443a1f93">get_name</a> () const override</td></tr>
<tr class="memdesc:a2ec853d6f27aa41fd3cd7fe1443a1f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the translated name of the action.  <a href="classrepair__item__actor.html#a2ec853d6f27aa41fd3cd7fe1443a1f93">More...</a><br /></td></tr>
<tr class="separator:a2ec853d6f27aa41fd3cd7fe1443a1f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a036b33fed8af0d97a4225c5293b7dbd5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a036b33fed8af0d97a4225c5293b7dbd5">get_description</a> () const override</td></tr>
<tr class="memdesc:a036b33fed8af0d97a4225c5293b7dbd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the translated description of the action.  <a href="classrepair__item__actor.html#a036b33fed8af0d97a4225c5293b7dbd5">More...</a><br /></td></tr>
<tr class="separator:a036b33fed8af0d97a4225c5293b7dbd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classiuse__actor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classiuse__actor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classiuse__actor.html">iuse_actor</a></td></tr>
<tr class="memitem:a2dad7b4ac740759a1db73515af5f7f99 inherit pub_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#a2dad7b4ac740759a1db73515af5f7f99">~iuse_actor</a> ()=default</td></tr>
<tr class="separator:a2dad7b4ac740759a1db73515af5f7f99 inherit pub_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4f27c8e1cf99054c4e28074f3954b0 inherit pub_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classret__val.html">ret_val</a>&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#afe4f27c8e1cf99054c4e28074f3954b0">can_use</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="classitem.html">item</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;) const</td></tr>
<tr class="separator:afe4f27c8e1cf99054c4e28074f3954b0 inherit pub_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0955326b251f45c76a7a16e84b6b9e6 inherit pub_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#aa0955326b251f45c76a7a16e84b6b9e6">info</a> (const <a class="el" href="classitem.html">item</a> &amp;, std::vector&lt; <a class="el" href="structiteminfo.html">iteminfo</a> &gt; &amp;) const</td></tr>
<tr class="separator:aa0955326b251f45c76a7a16e84b6b9e6 inherit pub_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012da399f97dd64e29a78e477a202b8e inherit pub_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#a012da399f97dd64e29a78e477a202b8e">is_valid</a> () const</td></tr>
<tr class="memdesc:a012da399f97dd64e29a78e477a202b8e inherit pub_methods_classiuse__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the actor is valid (exists in the generator).  <a href="classiuse__actor.html#a012da399f97dd64e29a78e477a202b8e">More...</a><br /></td></tr>
<tr class="separator:a012da399f97dd64e29a78e477a202b8e inherit pub_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7123b9e8ee6610ef1694f0451f05624 inherit pub_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#ae7123b9e8ee6610ef1694f0451f05624">finalize</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;)</td></tr>
<tr class="memdesc:ae7123b9e8ee6610ef1694f0451f05624 inherit pub_methods_classiuse__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalizes the actor.  <a href="classiuse__actor.html#ae7123b9e8ee6610ef1694f0451f05624">More...</a><br /></td></tr>
<tr class="separator:ae7123b9e8ee6610ef1694f0451f05624 inherit pub_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:acb6ed71ea38c7a55709a42145e05a139"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#acb6ed71ea38c7a55709a42145e05a139">action_description</a> (<a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_type</a>)</td></tr>
<tr class="memdesc:acb6ed71ea38c7a55709a42145e05a139"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes members of <code>repair_type</code> enum.  <a href="classrepair__item__actor.html#acb6ed71ea38c7a55709a42145e05a139">More...</a><br /></td></tr>
<tr class="separator:acb6ed71ea38c7a55709a42145e05a139"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3637545676dcad064a40196dda0c841c"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a3637545676dcad064a40196dda0c841c">materials</a></td></tr>
<tr class="memdesc:a3637545676dcad064a40196dda0c841c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Materials we are allowed to repair.  <a href="classrepair__item__actor.html#a3637545676dcad064a40196dda0c841c">More...</a><br /></td></tr>
<tr class="separator:a3637545676dcad064a40196dda0c841c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad31b7e5209e6e0c8439cbdd49ce6da8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a></td></tr>
<tr class="memdesc:ad31b7e5209e6e0c8439cbdd49ce6da8c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSkill.html">Skill</a> used.  <a href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">More...</a><br /></td></tr>
<tr class="separator:ad31b7e5209e6e0c8439cbdd49ce6da8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f79271d4dd3e2c7b53698bb0e582d53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">trains_skill_to</a> = 0</td></tr>
<tr class="memdesc:a2f79271d4dd3e2c7b53698bb0e582d53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum skill level that can be gained by using this actor.  <a href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">More...</a><br /></td></tr>
<tr class="separator:a2f79271d4dd3e2c7b53698bb0e582d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a686a5cfa2b736595ee5751cfa3d69d58"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">cost_scaling</a> = 1.0f</td></tr>
<tr class="memdesc:a686a5cfa2b736595ee5751cfa3d69d58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Volume of materials required (and used up) as percentage of repaired item's volume.  <a href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">More...</a><br /></td></tr>
<tr class="separator:a686a5cfa2b736595ee5751cfa3d69d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877a82dc874cae408ead7691ba9e1274"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">tool_quality</a> = 0</td></tr>
<tr class="memdesc:a877a82dc874cae408ead7691ba9e1274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra value added to skill roll.  <a href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">More...</a><br /></td></tr>
<tr class="separator:a877a82dc874cae408ead7691ba9e1274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db98a186012b12626b1ef7ce0f38036"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">move_cost</a> = 0</td></tr>
<tr class="memdesc:a8db98a186012b12626b1ef7ce0f38036"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move cost for every attempt.  <a href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">More...</a><br /></td></tr>
<tr class="separator:a8db98a186012b12626b1ef7ce0f38036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classiuse__actor"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classiuse__actor')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classiuse__actor.html">iuse_actor</a></td></tr>
<tr class="memitem:a5bfc0cc8ea9046eb540641ff464af80c inherit pub_attribs_classiuse__actor"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a></td></tr>
<tr class="memdesc:a5bfc0cc8ea9046eb540641ff464af80c inherit pub_attribs_classiuse__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the action.  <a href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">More...</a><br /></td></tr>
<tr class="separator:a5bfc0cc8ea9046eb540641ff464af80c inherit pub_attribs_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d48ce3563f6107d1ead2463560b523e inherit pub_attribs_classiuse__actor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#a6d48ce3563f6107d1ead2463560b523e">cost</a></td></tr>
<tr class="memdesc:a6d48ce3563f6107d1ead2463560b523e inherit pub_attribs_classiuse__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Units of ammo required per invocation (or use value from base item if negative)  <a href="classiuse__actor.html#a6d48ce3563f6107d1ead2463560b523e">More...</a><br /></td></tr>
<tr class="separator:a6d48ce3563f6107d1ead2463560b523e inherit pub_attribs_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classiuse__actor"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classiuse__actor')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classiuse__actor.html">iuse_actor</a></td></tr>
<tr class="memitem:a3e13735b7baa2c93610ccb78abda2d09 inherit pro_methods_classiuse__actor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiuse__actor.html#a3e13735b7baa2c93610ccb78abda2d09">iuse_actor</a> (const std::string &amp;<a class="el" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a>, int <a class="el" href="classiuse__actor.html#a6d48ce3563f6107d1ead2463560b523e">cost</a>=-1)</td></tr>
<tr class="separator:a3e13735b7baa2c93610ccb78abda2d09 inherit pro_methods_classiuse__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Repair an item. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00773">773</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a9a0fbea23cd5e9494e6d57c98d7091ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a0fbea23cd5e9494e6d57c98d7091ae">&#9670;&nbsp;</a></span>attempt_hint</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">repair_item_actor::attempt_hint</a> : int</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa"></a>AS_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7"></a>AS_RETRY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074"></a>AS_FAILURE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639"></a>AS_DESTROYED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d"></a>AS_CANT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9"></a>AS_CANT_USE_TOOL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9a0fbea23cd5e9494e6d57c98d7091aeafc9cadc1c5707829ba56cb24a808075c"></a>AS_CANT_YET&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00792">792</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                          : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a> = 0,     <span class="comment">// Success, but can retry</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>,           <span class="comment">// Failed, but can retry</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">AS_FAILURE</a>,         <span class="comment">// Failed hard, don&#39;t retry</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">AS_DESTROYED</a>,       <span class="comment">// Failed and destroyed item</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>,            <span class="comment">// Couldn&#39;t attempt</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9">AS_CANT_USE_TOOL</a>,   <span class="comment">// Cannot use tool</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeafc9cadc1c5707829ba56cb24a808075c">AS_CANT_YET</a>         <span class="comment">// Skill too low</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        };</div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">repair_item_actor::AS_CANT</a></div><div class="ttdeci">@ AS_CANT</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00797">iuse_actor.h:797</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">repair_item_actor::AS_FAILURE</a></div><div class="ttdeci">@ AS_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00795">iuse_actor.h:795</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9">repair_item_actor::AS_CANT_USE_TOOL</a></div><div class="ttdeci">@ AS_CANT_USE_TOOL</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00798">iuse_actor.h:798</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">repair_item_actor::AS_DESTROYED</a></div><div class="ttdeci">@ AS_DESTROYED</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00796">iuse_actor.h:796</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">repair_item_actor::AS_RETRY</a></div><div class="ttdeci">@ AS_RETRY</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00794">iuse_actor.h:794</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">repair_item_actor::AS_SUCCESS</a></div><div class="ttdeci">@ AS_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00793">iuse_actor.h:793</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a9a0fbea23cd5e9494e6d57c98d7091aeafc9cadc1c5707829ba56cb24a808075c"><div class="ttname"><a href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeafc9cadc1c5707829ba56cb24a808075c">repair_item_actor::AS_CANT_YET</a></div><div class="ttdeci">@ AS_CANT_YET</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00800">iuse_actor.h:799</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a181063ab4b7e6de08c14f7e15b2563fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a181063ab4b7e6de08c14f7e15b2563fe">&#9670;&nbsp;</a></span>repair_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a> : int</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b"></a>RT_NOTHING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29"></a>RT_REPAIR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce"></a>RT_REFIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0"></a>RT_DOWNSIZING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf"></a>RT_UPSIZING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1"></a>RT_PRACTICE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a181063ab4b7e6de08c14f7e15b2563fea9ef819ffe70cdc4d96e821bcca6aeba9"></a>NUM_REPAIR_TYPES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00802">802</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                         : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">RT_NOTHING</a> = 0,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">RT_REPAIR</a> = 1,          <span class="comment">// Just repairing damage</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a> = 2,           <span class="comment">// Refitting</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">RT_DOWNSIZING</a> = 3,      <span class="comment">// When small, reduce clothing to small size</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">RT_UPSIZING</a> = 4,        <span class="comment">// When normal, increase clothing to normal size</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="comment">// value of 5 obsoleted, previously used for reinforcing</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">RT_PRACTICE</a> = 6,        <span class="comment">// Wanted to reinforce, but can&#39;t</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea9ef819ffe70cdc4d96e821bcca6aeba9">NUM_REPAIR_TYPES</a> = 7</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        };</div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">repair_item_actor::RT_REFIT</a></div><div class="ttdeci">@ RT_REFIT</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00805">iuse_actor.h:805</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">repair_item_actor::RT_REPAIR</a></div><div class="ttdeci">@ RT_REPAIR</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00804">iuse_actor.h:804</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">repair_item_actor::RT_UPSIZING</a></div><div class="ttdeci">@ RT_UPSIZING</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00807">iuse_actor.h:807</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">repair_item_actor::RT_DOWNSIZING</a></div><div class="ttdeci">@ RT_DOWNSIZING</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00806">iuse_actor.h:806</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">repair_item_actor::RT_PRACTICE</a></div><div class="ttdeci">@ RT_PRACTICE</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00809">iuse_actor.h:809</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">repair_item_actor::RT_NOTHING</a></div><div class="ttdeci">@ RT_NOTHING</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00803">iuse_actor.h:803</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fea9ef819ffe70cdc4d96e821bcca6aeba9"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea9ef819ffe70cdc4d96e821bcca6aeba9">repair_item_actor::NUM_REPAIR_TYPES</a></div><div class="ttdeci">@ NUM_REPAIR_TYPES</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00811">iuse_actor.h:810</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a22a0b8234ce73a9f98b9b1a2f7085d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a0b8234ce73a9f98b9b1a2f7085d01">&#9670;&nbsp;</a></span>repair_item_actor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repair_item_actor::repair_item_actor </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em> = <code>&quot;repair_item&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00852">852</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;: <a class="code" href="classiuse__actor.html#a3e13735b7baa2c93610ccb78abda2d09">iuse_actor</a>( <a class="code" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a> ) {}</div>
<div class="ttc" id="aclassiuse__actor_html_a3e13735b7baa2c93610ccb78abda2d09"><div class="ttname"><a href="classiuse__actor.html#a3e13735b7baa2c93610ccb78abda2d09">iuse_actor::iuse_actor</a></div><div class="ttdeci">iuse_actor(const std::string &amp;type, int cost=-1)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00255">iuse.h:255</a></div></div>
<div class="ttc" id="aclassiuse__actor_html_a5bfc0cc8ea9046eb540641ff464af80c"><div class="ttname"><a href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">iuse_actor::type</a></div><div class="ttdeci">const std::string type</div><div class="ttdoc">The type of the action.</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00262">iuse.h:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af61cfe62b7aeaa9d2063d773344efc5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61cfe62b7aeaa9d2063d773344efc5a">&#9670;&nbsp;</a></span>~repair_item_actor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repair_item_actor::~repair_item_actor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acb6ed71ea38c7a55709a42145e05a139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb6ed71ea38c7a55709a42145e05a139">&#9670;&nbsp;</a></span>action_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string repair_item_actor::action_description </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a>&#160;</td>
          <td class="paramname"><em>rt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Describes members of <code>repair_type</code> enum. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l03227">3227</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;{</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, NUM_REPAIR_TYPES&gt; arr = {{</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Nothing&quot;</span> ),</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Repairing&quot;</span> ),</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Refitting&quot;</span> ),</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Downsizing&quot;</span> ),</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Upsizing&quot;</span> ),</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <span class="stringliteral">&quot;Obsolete&quot;</span>,</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            <a class="code" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Practicing&quot;</span> )</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        }</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    };</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( arr[rt] );</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;}</div>
<div class="ttc" id="atranslations_8h_html_a0b3ab525ec6b450b2487e7644255fa7c"><div class="ttname"><a href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a></div><div class="ttdeci">#define translate_marker(x)</div><div class="ttdoc">Marks a string literal to be extracted for translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00017">translations.h:17</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, and <a class="el" href="translations_8h_source.html#l00017">translate_marker</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="ae38080060108420290e8ef53a93d7de7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae38080060108420290e8ef53a93d7de7">&#9670;&nbsp;</a></span>can_repair_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool repair_item_actor::can_repair_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>pl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>print_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_consumed_available</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if repairs on target item are possible. </p>
<p>Excludes checks on tool. Doesn't just estimate - should not return true if repairs are not possible or false if they are. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pl</td><td>character performing the fix </td></tr>
    <tr><td class="paramname">fix</td><td>item to repair </td></tr>
    <tr><td class="paramname">print_msg</td><td>prints message to player if check fails </td></tr>
    <tr><td class="paramname">check_consumed_available</td><td>if true check materials consumed by repair are available for <code>pl</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if check succeeds </dd></dl>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02909">2909</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;{</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    <span class="comment">// In some rare cases (indices getting scrambled after inventory overflow)</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="comment">//  our `fix` can be a different item.</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have that item!&quot;</span> ) );</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        }</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    }</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#ac690c252311f4c021cb82c9487d35242">is_firearm</a>() ) {</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That requires gunsmithing tools.&quot;</span> ) );</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        }</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    }</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a> ) ) {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot repair this type of item.&quot;</span> ) );</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        }</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    }</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160; </div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keywordflow">if</span>( any_of( <a class="code" href="namespacematerials.html">materials</a>.begin(), <a class="code" href="namespacematerials.html">materials</a>.end(), [&amp;fix]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; mat ) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    return mat.obj()</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;               .repaired_with() == fix.typeId();</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    } ) ) {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This can be used to repair other items, not itself.&quot;</span> ) );</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a>( pl, fix, print_msg, <span class="keyword">true</span>, check_consumed_available ) ) {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160; </div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_be_refitted = fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> );</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">if</span>( can_be_refitted &amp;&amp; !fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    }</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> resizing_matters = fix.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( pl ) != <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a>;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> = pl.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a>;</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_resize = <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> != fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a> );</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    <span class="keywordflow">if</span>( can_be_refitted &amp;&amp; resizing_matters &amp;&amp; can_resize ) {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    }</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; fix.<a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">degradation</a>() ) {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    }</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160; </div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot improve your %s any more this way.&quot;</span> ), fix.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6ab1a86cb826d5faa1244cb7a4674700"><div class="ttname"><a href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">Character::get_size</a></div><div class="ttdeci">creature_size get_size() const override</div><div class="ttdoc">Get size class of character.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00824">character.cpp:824</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassitem_html_a2e08e5c910eb01fa126e04e6f1d27e52"><div class="ttname"><a href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">item::degradation</a></div><div class="ttdeci">int degradation() const</div><div class="ttdoc">How much degradation has the item accumulated?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00863">item.cpp:863</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a></div><div class="ttdeci">@ ignore</div></div>
<div class="ttc" id="aclassitem_html_ac690c252311f4c021cb82c9487d35242"><div class="ttname"><a href="classitem.html#ac690c252311f4c021cb82c9487d35242">item::is_firearm</a></div><div class="ttdeci">bool is_firearm() const</div><div class="ttdoc">Does it require gunsmithing tools to repair.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09405">item.cpp:9405</a></div></div>
<div class="ttc" id="aclassitem_html_ac72213261395e0c525121ee6d2553a97"><div class="ttname"><a href="classitem.html#ac72213261395e0c525121ee6d2553a97">item::get_sizing</a></div><div class="ttdeci">sizing get_sizing(const Character &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02038">item.cpp:2038</a></div></div>
<div class="ttc" id="aclassitem_html_ae8a58c6fe3c80cded11d6f3ccfa548a3"><div class="ttname"><a href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdoc">How much damage has the item sustained?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00858">item.cpp:858</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ab8454ab3c65c72e15f831a6b916a3f65"><div class="ttname"><a href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">repair_item_actor::handle_components</a></div><div class="ttdeci">bool handle_components(Character &amp;pl, const item &amp;fix, bool print_msg, bool just_check, bool check_consumed_available) const</div><div class="ttdoc">Returns if components are available.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02781">iuse_actor.cpp:2781</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; material_type &gt;</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a0c4794877bf330a3ebe213d225ec32db"><div class="ttname"><a href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a></div><div class="ttdeci">const flag_id flag_NO_REPAIR(&quot;NO_REPAIR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3316fede84004fcf20073e46c58f2114"><div class="ttname"><a href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a></div><div class="ttdeci">const flag_id flag_UNDERSIZE(&quot;UNDERSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aab1184bf751613f16480d6412006f74e"><div class="ttname"><a href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a></div><div class="ttdeci">const flag_id flag_FIT(&quot;FIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac2e75bd71461a88a762c817f199feb23"><div class="ttname"><a href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a></div><div class="ttdeci">const flag_id flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="anamespacematerials_html"><div class="ttname"><a href="namespacematerials.html">materials</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00175">material.h:176</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="item_8cpp_source.html#l00858">item::damage()</a>, <a class="el" href="item_8cpp_source.html#l00863">item::degradation()</a>, <a class="el" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a>, <a class="el" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a>, <a class="el" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="character_8cpp_source.html#l00824">Character::get_size()</a>, <a class="el" href="item_8cpp_source.html#l02038">item::get_sizing()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02781">handle_components()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::ignore</a>, <a class="el" href="item_8cpp_source.html#l09405">item::is_firearm()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">tiny</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game__inventory_8cpp_source.html#l02085">repair_inventory_preset::is_shown()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="a8127a68c52e50b325de6511fee2dcdd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8127a68c52e50b325de6511fee2dcdd5">&#9670;&nbsp;</a></span>can_use_tool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool repair_item_actor::can_use_tool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>tool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>print_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if we are allowed to use the tool. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02685">2685</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;{</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse__actor_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            p.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t do that while incorporeal.&quot;</span> ),</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; can&#39;t do that while incorporeal.&quot;</span> ) );</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        }</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    }</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>( print_msg ) ) {</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    }</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>( print_msg ) ) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see to do that!&quot;</span> ) );</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        }</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    }</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="keywordflow">if</span>( !tool.<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;p ) ) {</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your tool does not have enough charges to do that.&quot;</span> ) );</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        }</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    }</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a35e813323d0b9a1754cb6fdb078aafa2"><div class="ttname"><a href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">Character::cant_do_mounted</a></div><div class="ttdeci">bool cant_do_mounted(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01720">character.cpp:1720</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_ada7a49ad443c0522cdd7422d53bef2c1"><div class="ttname"><a href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">Creature::cant_do_underwater</a></div><div class="ttdeci">bool cant_do_underwater(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00280">creature.cpp:280</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aiuse__actor_8cpp_html_ad4dff5f85ae2547eaf44f2f058f984d1"><div class="ttname"><a href="iuse__actor_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a></div><div class="ttdeci">static const efftype_id effect_incorporeal(&quot;incorporeal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="iuse__actor_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, and <a class="el" href="enums_8h_source.html#l00352">m_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02743">use()</a>.</p>

</div>
</div>
<a id="a59cd64c17e3d9a977e444c21ff3899d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59cd64c17e3d9a977e444c21ff3899d5">&#9670;&nbsp;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classiuse__actor.html">iuse_actor</a> &gt; repair_item_actor::clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a deep copy of this object. </p>
<p>Example implementation: </p><div class="fragment"><div class="line"><span class="keyword">class </span>my_iuse_actor {</div>
<div class="line">    std::unique_ptr&lt;iuse_actor&gt; <a class="code" href="classrepair__item__actor.html#a59cd64c17e3d9a977e444c21ff3899d5">clone</a>()<span class="keyword"> const override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> std::make_unique&lt;my_iuse_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassrepair__item__actor_html_a59cd64c17e3d9a977e444c21ff3899d5"><div class="ttname"><a href="classrepair__item__actor.html#a59cd64c17e3d9a977e444c21ff3899d5">repair_item_actor::clone</a></div><div class="ttdeci">std::unique_ptr&lt; iuse_actor &gt; clone() const override</div><div class="ttdoc">Returns a deep copy of this object.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02759">iuse_actor.cpp:2759</a></div></div>
</div><!-- fragment --><p> The returned value should behave like the original item and must have the same type. </p>

<p>Implements <a class="el" href="classiuse__actor.html#a3dc842d294b3edcf10da0886d3e257e1">iuse_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02759">2759</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;{</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;repair_item_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a17ffc0c3f8468701dc0553b50ab72a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17ffc0c3f8468701dc0553b50ab72a40">&#9670;&nbsp;</a></span>default_action()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a> repair_item_actor::default_action </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_skill_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>What are we most likely trying to do with this item? </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l03027">3027</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;{</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; fix.<a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">degradation</a>() ) {</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">RT_REPAIR</a>;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    }</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160; </div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_be_refitted = fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> );</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> doesnt_fit = !fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> );</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">if</span>( doesnt_fit &amp;&amp; can_be_refitted ) {</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a>;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    }</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160; </div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> smol = player_character.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a>;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160; </div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_undersized = fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a> );</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_oversized = fix.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a465180aa3b409ee617f564f29ec8ce4f">flag_OVERSIZE</a> );</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> resizing_matters = fix.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( player_character ) != <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> too_big_while_smol = smol &amp;&amp; !is_undersized &amp;&amp; !is_oversized;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">if</span>( too_big_while_smol &amp;&amp; can_be_refitted &amp;&amp; resizing_matters ) {</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">RT_DOWNSIZING</a>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    }</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> too_small_while_big = !smol &amp;&amp; is_undersized &amp;&amp; !is_oversized;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="keywordflow">if</span>( too_small_while_big &amp;&amp; can_be_refitted &amp;&amp; resizing_matters ) {</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">RT_UPSIZING</a>;</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    }</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="keywordflow">if</span>( current_skill_level &lt;= <a class="code" href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">trains_skill_to</a> ) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">RT_PRACTICE</a>;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    }</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160; </div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">RT_NOTHING</a>;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a2f79271d4dd3e2c7b53698bb0e582d53"><div class="ttname"><a href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">repair_item_actor::trains_skill_to</a></div><div class="ttdeci">int trains_skill_to</div><div class="ttdoc">Maximum skill level that can be gained by using this actor.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00781">iuse_actor.h:781</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a465180aa3b409ee617f564f29ec8ce4f"><div class="ttname"><a href="flag_8cpp.html#a465180aa3b409ee617f564f29ec8ce4f">flag_OVERSIZE</a></div><div class="ttdeci">const flag_id flag_OVERSIZE(&quot;OVERSIZE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l00858">item::damage()</a>, <a class="el" href="item_8cpp_source.html#l00863">item::degradation()</a>, <a class="el" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a>, <a class="el" href="flag_8cpp.html#a465180aa3b409ee617f564f29ec8ce4f">flag_OVERSIZE</a>, <a class="el" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l00824">Character::get_size()</a>, <a class="el" href="item_8cpp_source.html#l02038">item::get_sizing()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::ignore</a>, <a class="el" href="iuse__actor_8h_source.html#l00806">RT_DOWNSIZING</a>, <a class="el" href="iuse__actor_8h_source.html#l00803">RT_NOTHING</a>, <a class="el" href="iuse__actor_8h_source.html#l00809">RT_PRACTICE</a>, <a class="el" href="iuse__actor_8h_source.html#l00805">RT_REFIT</a>, <a class="el" href="iuse__actor_8h_source.html#l00804">RT_REPAIR</a>, <a class="el" href="iuse__actor_8h_source.html#l00807">RT_UPSIZING</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">tiny</a>, and <a class="el" href="iuse__actor_8h_source.html#l00781">trains_skill_to</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="a036b33fed8af0d97a4225c5293b7dbd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a036b33fed8af0d97a4225c5293b7dbd5">&#9670;&nbsp;</a></span>get_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string repair_item_actor::get_description </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the translated description of the action. </p>
<p>It is used for the item action menu. </p>

<p>Reimplemented from <a class="el" href="classiuse__actor.html#aca092c6ef6cef505f32d5f7532e09169">iuse_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l03248">3248</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;{</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="keyword">const</span> std::string mats = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="namespacematerials.html">materials</a>.begin(), <a class="code" href="namespacematerials.html">materials</a>.end(),</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; mid ) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        return mid-&gt;name();</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    } );</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Repair %s&quot;</span> ), mats );</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;}</div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

</div>
</div>
<a id="a2ec853d6f27aa41fd3cd7fe1443a1f93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ec853d6f27aa41fd3cd7fe1443a1f93">&#9670;&nbsp;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string repair_item_actor::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the translated name of the action. </p>
<p>It is used for the item action menu. </p>

<p>Reimplemented from <a class="el" href="classiuse__actor.html#a4c0e5b1f19b2f17d2a40220bc8ac28dc">iuse_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l03243">3243</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;{</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Repair&quot;</span> );</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>.</p>

</div>
</div>
<a id="acb7af13e43794ca1ee41803c49a966b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7af13e43794ca1ee41803c49a966b3">&#9670;&nbsp;</a></span>get_valid_repair_materials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; repair_item_actor::get_valid_repair_materials </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of items that can be used to repair this item. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02764">2764</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;{</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    std::set&lt;itype_id&gt; valid_entries;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mat : <a class="code" href="namespacematerials.html">materials</a> ) {</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#ae34a4e6720079fcb1ec1814f046422e8">can_repair_with</a>( mat ) ) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;component_id = mat.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().repaired_with();</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;            <span class="comment">// Certain (different!) materials are repaired with the same components (steel, iron, hard steel use scrap metal).</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            <span class="comment">// This checks avoids adding the same component twice, which is annoying to the user.</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            <span class="keywordflow">if</span>( valid_entries.find( component_id ) != valid_entries.end() ) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            }</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            valid_entries.insert( component_id );</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        }</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    }</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="keywordflow">return</span> valid_entries;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_ae34a4e6720079fcb1ec1814f046422e8"><div class="ttname"><a href="classitem.html#ae34a4e6720079fcb1ec1814f046422e8">item::can_repair_with</a></div><div class="ttdeci">bool can_repair_with(const material_id &amp;mat_ident) const</div><div class="ttdoc">Check we can repair with this material (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09254">item.cpp:9254</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l09254">item::can_repair_with()</a>, and <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l02781">handle_components()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="ab8454ab3c65c72e15f831a6b916a3f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8454ab3c65c72e15f831a6b916a3f65">&#9670;&nbsp;</a></span>handle_components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool repair_item_actor::handle_components </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>pl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>print_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>just_check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_consumed_available</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns if components are available. </p>
<p>Consumes them if <code>just_check</code> is false. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pl</td><td>character performing the fix </td></tr>
    <tr><td class="paramname">fix</td><td>item to repair </td></tr>
    <tr><td class="paramname">print_msg</td><td>prints message to player if check fails </td></tr>
    <tr><td class="paramname">just_check</td><td>only checks, doesn't consume </td></tr>
    <tr><td class="paramname">check_consumed_available</td><td>if false skips checking if materials consumed by repair are available for <code>pl</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if check succeeds </dd></dl>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02781">2781</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;{</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="comment">// Entries valid for repaired items</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    std::set&lt;itype_id&gt; valid_entries = <a class="code" href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">get_valid_repair_materials</a>( fix );</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordflow">if</span>( valid_entries.empty() ) {</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is not made of any of:&quot;</span> ),</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                                  fix.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mat_name : <a class="code" href="namespacematerials.html">materials</a> ) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> &amp;mat = mat_name.obj();</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s (repaired using %s)&quot;</span> ), mat.<a class="code" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>(),</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                                      <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( mat.<a class="code" href="classmaterial__type.html#a1c6c3154c2e5743007165f8a76ef0958">repaired_with</a>(), 2 ) );</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            }</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;        }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160; </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    }</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160; </div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = pl.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160; </div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="comment">// Repairing or modifying items requires at least 1 repair item,</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="comment">//  otherwise number is related to size of item</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <span class="comment">// Round up if checking, but roll if actually consuming</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="comment">// TODO: should 250_ml be part of the cost_scaling?</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> items_needed = std::max&lt;int&gt;( 1, just_check ?</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;                                            <a class="code" href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">std::ceil</a>( fix.<a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>() / 250_ml * <a class="code" href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">cost_scaling</a> ) :</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                                            <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( fix.<a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>() / 250_ml * <a class="code" href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">cost_scaling</a> ) );</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keywordflow">if</span>( fix.<a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() ) {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; <a class="code" href="structcomponent.html">component</a> ) {</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structcomponent.html">component</a>.allow_crafting_component();</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        };</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    }</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160; </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="comment">// Go through all discovered repair items and see if we have any of them available</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    std::vector&lt;item_comp&gt; comps;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;component_id : valid_entries ) {</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( component_id ) ) {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            <span class="keywordflow">if</span>( crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( component_id, items_needed ) ) {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                comps.emplace_back( component_id, items_needed );</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            }</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( crafting_inv.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( component_id, items_needed, <span class="keyword">false</span>, <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> ) ) {</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            comps.emplace_back( component_id, items_needed );</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        }</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordflow">if</span>( check_consumed_available &amp;&amp; comps.empty() ) {</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <span class="keywordflow">if</span>( print_msg ) {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;mat_comp : valid_entries ) {</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have enough clean %s to do that.  Have: %d, need: %d&quot;</span> ),</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                                      <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( mat_comp, 2 ),</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                                      <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( mat_comp )-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ?</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                                      crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( mat_comp, items_needed ) :</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                                      crafting_inv.<a class="code" href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">amount_of</a>( mat_comp, <span class="keyword">false</span> ),</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                                      items_needed );</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;            }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        }</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    }</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160; </div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="keywordflow">if</span>( !just_check ) {</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        <span class="keywordflow">if</span>( comps.empty() ) {</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            <span class="comment">// This shouldn&#39;t happen - the check in can_repair_target should prevent it</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <span class="comment">// But report it, just in case</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted repair with no components&quot;</span> );</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        }</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        pl.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( comps, 1, <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> );</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a5d161e8df8122b5f3d74a081ee8d12cf"><div class="ttname"><a href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">Character::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02029">crafting.cpp:2029</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassinventory_html_a5702debf38c9bd88deab93d7979c2511"><div class="ttname"><a href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassinventory_html_a67cbf53a62daa5d2bbda87304fc26f81"><div class="ttname"><a href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">inventory::amount_of</a></div><div class="ttdeci">int amount_of(const itype_id &amp;what, bool pseudo=true, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const override</div><div class="ttdoc">Count items matching id including both this instance and any contained items.</div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclassitem_html_a1d9c8bbf0bc8223ce3bde8876e99ec8e"><div class="ttname"><a href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">item::base_volume</a></div><div class="ttdeci">units::volume base_volume() const</div><div class="ttdoc">Simplified, faster volume check for when processing time is important and exact volume is not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07330">item.cpp:7330</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a5093379156498b4d523b3ac1f733adc4"><div class="ttname"><a href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a></div><div class="ttdeci">bool is_filthy() const</div><div class="ttdoc">Marks the item as filthy, so characters with squeamish trait can't wear it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14652">item.cpp:14652</a></div></div>
<div class="ttc" id="aclassmaterial__type_html"><div class="ttname"><a href="classmaterial__type.html">material_type</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00070">material.h:71</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a1c6c3154c2e5743007165f8a76ef0958"><div class="ttname"><a href="classmaterial__type.html#a1c6c3154c2e5743007165f8a76ef0958">material_type::repaired_with</a></div><div class="ttdeci">itype_id repaired_with() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00209">material.cpp:209</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a7583dadd47fed32747f6e9611fcbf267"><div class="ttname"><a href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">material_type::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00199">material.cpp:199</a></div></div>
<div class="ttc" id="aclassread__only__visitable_html_a97ab02b5ae44854ce2869532a222ee8d"><div class="ttname"><a href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">read_only_visitable::has_charges</a></div><div class="ttdeci">virtual bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00223">visitable.cpp:223</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a686a5cfa2b736595ee5751cfa3d69d58"><div class="ttname"><a href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">repair_item_actor::cost_scaling</a></div><div class="ttdeci">float cost_scaling</div><div class="ttdoc">Volume of materials required (and used up) as percentage of repaired item's volume.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00786">iuse_actor.h:786</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_acb7af13e43794ca1ee41803c49a966b3"><div class="ttname"><a href="classrepair__item__actor.html#acb7af13e43794ca1ee41803c49a966b3">repair_item_actor::get_valid_repair_materials</a></div><div class="ttdeci">std::set&lt; itype_id &gt; get_valid_repair_materials(const item &amp;fix) const</div><div class="ttdoc">Returns a list of items that can be used to repair this item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02764">iuse_actor.cpp:2764</a></div></div>
<div class="ttc" id="aclassvisitable_html_aa199bd0ea7a41c50a2de5761dd987338"><div class="ttname"><a href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo, const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01018">visitable.cpp:1018</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03267">item.h:3267</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_ac9196b0cf8d9dd209db9fc00a69a55f6"><div class="ttname"><a href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">ceil</a></div><div class="ttdeci">double ceil(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00100">math_parser_func.h:100</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00134">rng.cpp:134</a></div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructitype_html_a9defae7ba72f6d0af2e5629c4244f00e"><div class="ttname"><a href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">itype::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01501">itype.h:1501</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="classinventory.html#a67cbf53a62daa5d2bbda87304fc26f81">inventory::amount_of()</a>, <a class="el" href="item_8cpp_source.html#l07330">item::base_volume()</a>, <a class="el" href="math__parser__func_8h_source.html#l00100">ceil()</a>, <a class="el" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="iuse__actor_8h_source.html#l00786">cost_scaling</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="itype_8h_source.html#l01501">itype::count_by_charges()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02764">get_valid_repair_materials()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="visitable_8cpp_source.html#l00223">read_only_visitable::has_charges()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="item_8cpp_source.html#l14652">item::is_filthy()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="material_8cpp_source.html#l00199">material_type::name()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="material_8cpp_source.html#l00209">material_type::repaired_with()</a>, <a class="el" href="rng_8cpp_source.html#l00134">roll_remainder()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l02909">can_repair_target()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>.</p>

</div>
</div>
<a id="a35e0557a8eb4d6e7ba3a5243e4bd4cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e0557a8eb4d6e7ba3a5243e4bd4cb8">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void repair_item_actor::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classiuse__actor.html#aa93b616e6f6e450b098209ad19ae78c4">iuse_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02663">2663</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;{</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="comment">// Mandatory:</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;materials&quot;</span> ) ) {</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        <a class="code" href="namespacematerials.html">materials</a>.emplace( <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> );</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    }</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="comment">// TODO: Make skill non-mandatory while still erroring on invalid skill</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keyword">const</span> std::string skill_string = obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;skill&quot;</span> );</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>( skill_string );</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a>.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        obj.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;skill&quot;</span>, <span class="stringliteral">&quot;Invalid skill&quot;</span> );</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <a class="code" href="classrepair__item__actor.html#a686a5cfa2b736595ee5751cfa3d69d58">cost_scaling</a> = obj.<a class="code" href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">get_float</a>( <span class="stringliteral">&quot;cost_scaling&quot;</span> );</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160; </div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="comment">// Optional</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <a class="code" href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">tool_quality</a> = obj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;tool_quality&quot;</span>, 0 );</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <a class="code" href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">move_cost</a>    = obj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;move_cost&quot;</span>, 500 );</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <a class="code" href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">trains_skill_to</a> = obj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;trains_skill_to&quot;</span>, 5 ) - 1;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">cata_variant_type::skill_id</a></div><div class="ttdeci">@ skill_id</div></div>
<div class="ttc" id="aclassJsonObject_html_a04b6ce7355b567646a587514fb811c68"><div class="ttname"><a href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">JsonObject::throw_error_at</a></div><div class="ttdeci">void throw_error_at(std::string_view member, const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00358">flexbuffer_json.cpp:358</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a1abb3808bb2a992716d5ef6f27a32b3c"><div class="ttname"><a href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00813">flexbuffer_json-inl.h:813</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a532ea812759469d654c7fde4738d11d5"><div class="ttname"><a href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">JsonObject::get_int</a></div><div class="ttdeci">int get_int(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00840">flexbuffer_json-inl.h:840</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a7d82ab1c2da0cb67c6315b86104c3c84"><div class="ttname"><a href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">JsonObject::get_float</a></div><div class="ttdeci">double get_float(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00845">flexbuffer_json-inl.h:845</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a877a82dc874cae408ead7691ba9e1274"><div class="ttname"><a href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">repair_item_actor::tool_quality</a></div><div class="ttdeci">int tool_quality</div><div class="ttdoc">Extra value added to skill roll.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00788">iuse_actor.h:788</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a8db98a186012b12626b1ef7ce0f38036"><div class="ttname"><a href="classrepair__item__actor.html#a8db98a186012b12626b1ef7ce0f38036">repair_item_actor::move_cost</a></div><div class="ttdeci">int move_cost</div><div class="ttdoc">Move cost for every attempt.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00790">iuse_actor.h:790</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ad31b7e5209e6e0c8439cbdd49ce6da8c"><div class="ttname"><a href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">repair_item_actor::used_skill</a></div><div class="ttdeci">skill_id used_skill</div><div class="ttdoc">Skill used.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00779">iuse_actor.h:779</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse__actor_8h_source.html#l00786">cost_scaling</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00845">JsonObject::get_float()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="iuse__actor_8h_source.html#l00790">move_cost</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, <a class="el" href="iuse__actor_8h_source.html#l00788">tool_quality</a>, <a class="el" href="iuse__actor_8h_source.html#l00781">trains_skill_to</a>, and <a class="el" href="iuse__actor_8h_source.html#l00779">used_skill</a>.</p>

</div>
</div>
<a id="ab4479ce41bc825be8ef544c7fad5e98a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4479ce41bc825be8ef544c7fad5e98a">&#9670;&nbsp;</a></span>repair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091ae">repair_item_actor::attempt_hint</a> repair_item_actor::repair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>pl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>tool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>refit_only</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to repair target item with selected tool. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l03094">3094</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;{</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">can_use_tool</a>( pl, tool, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6f3fcbd00a5594c7a4fa4c31278744a9">AS_CANT_USE_TOOL</a>;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    }</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">can_repair_target</a>( pl, *fix, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    }</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160; </div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> current_skill_level = pl.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> );</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a> <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="keywordflow">if</span>( refit_only ) {</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        <span class="keywordflow">if</span>( fix-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s already fits!&quot;</span> ), fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !fix-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This %s cannot be refitted!&quot;</span> ), fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a>;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        }</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code" href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">default_action</a>( *fix, current_skill_level );</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    }</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> chance = <a class="code" href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">repair_chance</a>( pl, *fix, <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> );</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="keywordtype">int</span> practice_amount = <a class="code" href="classrepair__item__actor.html#ac510427b83a5a419cefd89dae86cded1">repair_recipe_difficulty</a>( *fix ) / 2 + 1;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordtype">float</span> roll_value = <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0, 1.0 );</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="keyword">enum</span> roll_result {</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a>,</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        FAILURE,</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <a class="code" href="item__factory_8cpp.html#a8f7bcec6b00c167032b7e25a7def045aa31ba17aa58cdb681423f07ca21a6efc7">NEUTRAL</a></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    } roll;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160; </div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keywordflow">if</span>( roll_value &gt; 1.0f - chance.second ) {</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        roll = FAILURE;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( roll_value &lt; chance.first ) {</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        roll = <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a>;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        roll = <a class="code" href="item__factory_8cpp.html#a8f7bcec6b00c167032b7e25a7def045aa31ba17aa58cdb681423f07ca21a6efc7">NEUTRAL</a>;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    }</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160; </div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">RT_NOTHING</a> ) {</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You won&#39;t learn anything more by doing that.&quot;</span> ) );</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    }</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160; </div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <span class="comment">// If not for this if, it would spam a lot</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <span class="keywordflow">if</span>( current_skill_level &gt; <a class="code" href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">trains_skill_to</a> ) {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;        practice_amount = 0;</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    }</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    pl.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a>, practice_amount, <a class="code" href="classrepair__item__actor.html#a2f79271d4dd3e2c7b53698bb0e582d53">trains_skill_to</a> );</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160; </div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    <span class="keywordflow">if</span>( roll == FAILURE ) {</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <span class="keywordflow">if</span>( chance.first &lt;= 0.0f ) {</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It seems working on your %s is just beyond your current level of expertise.&quot;</span> ),</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                                  fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;        }</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="iuse__actor_8cpp.html#ad9d40fdf0dc5db8a9a4fcf0e649946cc">damage_item</a>( pl, fix ) ? <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeaa8d66930d9f8a0f1e584adac16592639">AS_DESTROYED</a> : <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea6cea63469ca1cac06f958926b4abd074">AS_FAILURE</a>;</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    }</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160; </div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">RT_PRACTICE</a> ) {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>;</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160; </div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">RT_REPAIR</a> ) {</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;        <span class="keywordflow">if</span>( roll == <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> ) {</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;            <span class="keyword">const</span> std::string startdurability = fix-&gt;<a class="code" href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb">durability_indicator</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            <a class="code" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a>( pl, *fix, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160; </div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;            fix-&gt;<a class="code" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">mod_damage</a>( -<a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a> );</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160; </div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            <span class="keyword">const</span> std::string resultdurability = fix-&gt;<a class="code" href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb">durability_indicator</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            <span class="keywordflow">if</span>( fix-&gt;<a class="code" href="classitem.html#a50c31a32b49c4418a24ff4b14552a7ff">repairable_levels</a>() ) {</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You repair your %s!  ( %s-&gt; %s)&quot;</span> ),</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                                      fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( 1, <span class="keyword">false</span> ), startdurability, resultdurability );</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You repair your %s completely!  ( %s-&gt; %s)&quot;</span> ),</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                                      fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( 1, <span class="keyword">false</span> ), startdurability, resultdurability );</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            }</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a>;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        }</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160; </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160; </div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a> ) {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        <span class="keywordflow">if</span>( roll == <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> ) {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            <span class="keywordflow">if</span>( !fix-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take your %s in, improving the fit.&quot;</span> ),</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;                                      fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;                fix-&gt;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> );</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160; </div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;                pl.<a class="code" href="classCharacter.html#a1842708b111b8ef4f6602f0ddc8fb052">calc_encumbrance</a>();</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;            <a class="code" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a>( pl, *fix, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        }</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160; </div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160; </div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">RT_DOWNSIZING</a> ) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <span class="comment">//We don&#39;t need to check for smallness or undersize because DOWNSIZING already guarantees that</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <span class="keywordflow">if</span>( roll == <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> ) {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You resize the %s to accommodate your tiny build.&quot;</span> ),</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                                  fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>().c_str() );</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            fix-&gt;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a> );</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            pl.<a class="code" href="classCharacter.html#a1842708b111b8ef4f6602f0ddc8fb052">calc_encumbrance</a>();</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;            <a class="code" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a>( pl, *fix, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        }</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>;</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    }</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160; </div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">RT_UPSIZING</a> ) {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        <span class="comment">//We don&#39;t need to check for smallness or undersize because UPSIZING already guarantees that</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <span class="keywordflow">if</span>( roll == <a class="code" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> ) {</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You adjust the %s back to its normal size.&quot;</span> ),</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                                  fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>().c_str() );</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            fix-&gt;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a> );</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            pl.<a class="code" href="classCharacter.html#a1842708b111b8ef4f6602f0ddc8fb052">calc_encumbrance</a>();</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <a class="code" href="classrepair__item__actor.html#ab8454ab3c65c72e15f831a6b916a3f65">handle_components</a>( pl, *fix, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeac607bbddf7d4c4757d0df4fd5734fcfa">AS_SUCCESS</a>;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aeabd597ce8f3aa6e05cf09043a66c339e7">AS_RETRY</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160; </div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    pl.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot improve your %s any more this way.&quot;</span> ), fix-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classrepair__item__actor.html#a9a0fbea23cd5e9494e6d57c98d7091aea63bc23a49f179b4d001a4132a4f3099d">AS_CANT</a>;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c"><div class="ttname"><a href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">hack_result::SUCCESS</a></div><div class="ttdeci">@ SUCCESS</div></div>
<div class="ttc" id="aclassCharacter_html_a1842708b111b8ef4f6602f0ddc8fb052"><div class="ttname"><a href="classCharacter.html#a1842708b111b8ef4f6602f0ddc8fb052">Character::calc_encumbrance</a></div><div class="ttdeci">void calc_encumbrance()</div><div class="ttdoc">Recalculate encumbrance for all body parts.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03870">character.cpp:3870</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6535a02158a1d6b23b0a6bb623dfae19"><div class="ttname"><a href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">Character::practice</a></div><div class="ttdeci">bool practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02683">character.cpp:2683</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassitem_html_a2db7dbf79421ad17155d6b26b56bd483"><div class="ttname"><a href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">item::mod_damage</a></div><div class="ttdeci">bool mod_damage(int qty)</div><div class="ttdoc">Apply damage to const itemrained by min_damage and max_damage.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08927">item.cpp:8927</a></div></div>
<div class="ttc" id="aclassitem_html_a50c31a32b49c4418a24ff4b14552a7ff"><div class="ttname"><a href="classitem.html#a50c31a32b49c4418a24ff4b14552a7ff">item::repairable_levels</a></div><div class="ttdeci">int repairable_levels() const</div><div class="ttdoc">Returns how many damage levels can be repaired on this item Example: item with 100 damage returns 1 (...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08952">item.cpp:8952</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a80ef6d13a5545c5d32af710fedf717eb"><div class="ttname"><a href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb">item::durability_indicator</a></div><div class="ttdeci">std::string durability_indicator(bool include_intact=false) const</div><div class="ttdoc">Provides a prefix for the durability state of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09039">item.cpp:9039</a></div></div>
<div class="ttc" id="aclassitem_html_aed157a025c9aef5188bd5eadf5d556ab"><div class="ttname"><a href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">item::unset_flag</a></div><div class="ttdeci">item &amp; unset_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter removing an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07641">item.cpp:7641</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a17ffc0c3f8468701dc0553b50ab72a40"><div class="ttname"><a href="classrepair__item__actor.html#a17ffc0c3f8468701dc0553b50ab72a40">repair_item_actor::default_action</a></div><div class="ttdeci">repair_type default_action(const item &amp;fix, int current_skill_level) const</div><div class="ttdoc">What are we most likely trying to do with this item?</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l03027">iuse_actor.cpp:3027</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a181063ab4b7e6de08c14f7e15b2563fe"><div class="ttname"><a href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a></div><div class="ttdeci">repair_type</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00802">iuse_actor.h:802</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_a8127a68c52e50b325de6511fee2dcdd5"><div class="ttname"><a href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">repair_item_actor::can_use_tool</a></div><div class="ttdeci">bool can_use_tool(const Character &amp;p, const item &amp;tool, bool print_msg) const</div><div class="ttdoc">Checks if we are allowed to use the tool.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02685">iuse_actor.cpp:2685</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ac510427b83a5a419cefd89dae86cded1"><div class="ttname"><a href="classrepair__item__actor.html#ac510427b83a5a419cefd89dae86cded1">repair_item_actor::repair_recipe_difficulty</a></div><div class="ttdeci">int repair_recipe_difficulty(const item &amp;fix) const</div><div class="ttdoc">Calculates the difficulty to repair an item based on its materials.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02885">iuse_actor.cpp:2885</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_ae38080060108420290e8ef53a93d7de7"><div class="ttname"><a href="classrepair__item__actor.html#ae38080060108420290e8ef53a93d7de7">repair_item_actor::can_repair_target</a></div><div class="ttdeci">bool can_repair_target(Character &amp;pl, const item &amp;fix, bool print_msg, bool check_consumed_available) const</div><div class="ttdoc">Checks if repairs on target item are possible.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02909">iuse_actor.cpp:2909</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html_af589becfbe6ffa1725253e91818267be"><div class="ttname"><a href="classrepair__item__actor.html#af589becfbe6ffa1725253e91818267be">repair_item_actor::repair_chance</a></div><div class="ttdeci">std::pair&lt; float, float &gt; repair_chance(const Character &amp;pl, const item &amp;fix, repair_type action_type) const</div><div class="ttdoc">Returns the chance to repair and to damage an item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02969">iuse_actor.cpp:2969</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a8f7bcec6b00c167032b7e25a7def045aa31ba17aa58cdb681423f07ca21a6efc7"><div class="ttname"><a href="item__factory_8cpp.html#a8f7bcec6b00c167032b7e25a7def045aa31ba17aa58cdb681423f07ca21a6efc7">balance_val::NEUTRAL</a></div><div class="ttdeci">@ NEUTRAL</div></div>
<div class="ttc" id="aiuse__actor_8cpp_html_ad9d40fdf0dc5db8a9a4fcf0e649946cc"><div class="ttname"><a href="iuse__actor_8cpp.html#ad9d40fdf0dc5db8a9a4fcf0e649946cc">damage_item</a></div><div class="ttdeci">static bool damage_item(Character &amp;pl, item_location &amp;fix)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l03064">iuse_actor.cpp:3064</a></div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00027">rng.cpp:27</a></div></div>
<div class="ttc" id="astructitype_html_acbc6974858332fd6933f71a304312d7f"><div class="ttname"><a href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a></div><div class="ttdeci">static constexpr int damage_scale</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01465">itype.h:1465</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse__actor_8h_source.html#l00797">AS_CANT</a>, <a class="el" href="iuse__actor_8h_source.html#l00798">AS_CANT_USE_TOOL</a>, <a class="el" href="iuse__actor_8h_source.html#l00796">AS_DESTROYED</a>, <a class="el" href="iuse__actor_8h_source.html#l00795">AS_FAILURE</a>, <a class="el" href="iuse__actor_8h_source.html#l00794">AS_RETRY</a>, <a class="el" href="iuse__actor_8h_source.html#l00793">AS_SUCCESS</a>, <a class="el" href="character_8cpp_source.html#l03870">Character::calc_encumbrance()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02909">can_repair_target()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02685">can_use_tool()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03064">damage_item()</a>, <a class="el" href="itype_8h_source.html#l01465">itype::damage_scale</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03027">default_action()</a>, <a class="el" href="item_8cpp_source.html#l09039">item::durability_indicator()</a>, <a class="el" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a>, <a class="el" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02781">handle_components()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="item_8cpp_source.html#l08927">item::mod_damage()</a>, <a class="el" href="item__factory_8cpp.html#a8f7bcec6b00c167032b7e25a7def045aa31ba17aa58cdb681423f07ca21a6efc7">NEUTRAL</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02969">repair_chance()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02885">repair_recipe_difficulty()</a>, <a class="el" href="item_8cpp_source.html#l08952">item::repairable_levels()</a>, <a class="el" href="rng_8cpp_source.html#l00027">rng_float()</a>, <a class="el" href="iuse__actor_8h_source.html#l00806">RT_DOWNSIZING</a>, <a class="el" href="iuse__actor_8h_source.html#l00803">RT_NOTHING</a>, <a class="el" href="iuse__actor_8h_source.html#l00809">RT_PRACTICE</a>, <a class="el" href="iuse__actor_8h_source.html#l00805">RT_REFIT</a>, <a class="el" href="iuse__actor_8h_source.html#l00804">RT_REPAIR</a>, <a class="el" href="iuse__actor_8h_source.html#l00807">RT_UPSIZING</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="activity__actor_8cpp.html#afa49420d382315e0204865baa3b1afb0ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse__actor_8h_source.html#l00781">trains_skill_to</a>, <a class="el" href="item_8cpp_source.html#l07641">item::unset_flag()</a>, and <a class="el" href="iuse__actor_8h_source.html#l00779">used_skill</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="af589becfbe6ffa1725253e91818267be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af589becfbe6ffa1725253e91818267be">&#9670;&nbsp;</a></span>repair_chance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; float, float &gt; repair_item_actor::repair_chance </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>pl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fe">repair_item_actor::repair_type</a>&#160;</td>
          <td class="paramname"><em>action_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the chance to repair and to damage an item. </p>
Tailor randomly improves clothing repair efforts Mechanics randomly improves metal repair efforts Dexterity reduces the chances of damaging an item when repairing 
<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02969">2969</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="comment">    /** @EFFECT_TAILOR randomly improves clothing repair efforts */</span><span class="comment"></span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="comment">    /** @EFFECT_MECHANICS randomly improves metal repair efforts */</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> skill = pl.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classrepair__item__actor.html#ad31b7e5209e6e0c8439cbdd49ce6da8c">used_skill</a> );</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> material_difficulty = <a class="code" href="classrepair__item__actor.html#ac510427b83a5a419cefd89dae86cded1">repair_recipe_difficulty</a>( fix );</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keywordtype">int</span> action_difficulty = 0;</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordflow">switch</span>( action_type ) {</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea80f4159b229c75535b5464e693f32e5b">RT_NOTHING</a>: <span class="comment">/* fallthrough */</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea2a377af0d7ba501ec13ff4453fc17db0">RT_DOWNSIZING</a>: <span class="comment">/* fallthrough */</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea25dc2d78ed34354fba150a1a4e8cb1bf">RT_UPSIZING</a>:</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea1a2de14c779a7b09dc5eb4ec31341b29">RT_REPAIR</a>:</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;            action_difficulty = fix.<a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>();</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea173e2c4d52ef82293d133bcf272ec6ce">RT_REFIT</a>:</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;            <span class="comment">// Let&#39;s make refitting as hard as recovering an almost-wrecked item</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;            action_difficulty = fix.<a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() / <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a>;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classrepair__item__actor.html#a181063ab4b7e6de08c14f7e15b2563fea63874384dd91d071fed451618879cac1">RT_PRACTICE</a>:</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            <span class="comment">// Skill gain scales with recipe difficulty, so practice difficulty should too</span></div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;            action_difficulty = material_difficulty;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;            <span class="comment">// 5 is obsoleted reinforcing, remove after 0.H</span></div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;            action_difficulty = 1&#39;000&#39;000; <span class="comment">// ensure failure</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;    }</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> difficulty = material_difficulty + action_difficulty;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="comment">// Sample numbers - cotton and wool have diff 1, plastic diff 3 and kevlar diff 4:</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="comment">// This assumes that training is false, and under almost all circumstances that should be the case</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="comment">// Item     | Damage | Skill | Dex | Success | Failure</span></div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <span class="comment">// Hoodie   |   1    |   0   |  8  |  4.0%   |  1.4%</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <span class="comment">// Hoodie   | Refit  |   0   |  8  |  2.0%   |  2.4%</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="comment">// Hoodie   | Refit  |   2   |  8  |  6.0%   |  0.4%</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="comment">// Hoodie   | Refit  |   2   |  12 |  6.0%   |  0.0%</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="comment">// Hoodie   | Refit  |   4   |  8  |  10.0%  |  0.0%</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="comment">// Socks    |   3    |   0   |  8  |  2.0%   |  2.4%</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <span class="comment">// Boots    |   1    |   0   |  8  |  0.0%   |  3.4%</span></div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <span class="comment">// Raincoat | Refit  |   2   |  8  |  2.0%   |  2.4%</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <span class="comment">// Raincoat | Refit  |   2   |  12 |  2.0%   |  1.6%</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="comment">// Ski mask | Refit  |   2   |  8  |  4.0%   |  1.4%</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <span class="comment">// Raincoat | Refit  |   2   |  8  |  4.0%   |  1.4%</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="comment">// Turnout  | Refit  |   2   |  8  |  0.0%   |  4.4%</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="comment">// Turnout  | Refit  |   4   |  8  |  2.0%   |  2.4%</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160; </div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <span class="keywordtype">float</span> success_chance = ( 10 + 2 * skill - 2 * difficulty + <a class="code" href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">tool_quality</a> / 5.0f ) / 100.0f;<span class="comment"></span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="comment">    /** @EFFECT_DEX reduces the chances of damaging an item when repairing */</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="keywordtype">float</span> damage_chance = ( difficulty - skill - ( <a class="code" href="classrepair__item__actor.html#a877a82dc874cae408ead7691ba9e1274">tool_quality</a> + pl.<a class="code" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> ) / 5.0f ) / 100.0f;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160; </div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    damage_chance = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 1.0f, damage_chance ) );</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    success_chance = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 1.0f - damage_chance, success_chance ) );</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="keywordflow">return</span> std::make_pair( success_chance, damage_chance );</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00578">character.h:578</a></div></div>
<div class="ttc" id="aclassitem_html_a216affc51dde30087c21fa5689a5c5e9"><div class="ttname"><a href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">item::max_damage</a></div><div class="ttdeci">int max_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08900">item.cpp:8900</a></div></div>
<div class="ttc" id="aclassitem_html_adb2689178dd21563b3536a3ed0e83336"><div class="ttname"><a href="classitem.html#adb2689178dd21563b3536a3ed0e83336">item::damage_level</a></div><div class="ttdeci">int damage_level(bool precise=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00876">item.cpp:876</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l00876">item::damage_level()</a>, <a class="el" href="itype_8h_source.html#l01465">itype::damage_scale</a>, <a class="el" href="character_8h_source.html#l00578">Character::dex_cur</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="item_8cpp_source.html#l08900">item::max_damage()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02885">repair_recipe_difficulty()</a>, <a class="el" href="iuse__actor_8h_source.html#l00806">RT_DOWNSIZING</a>, <a class="el" href="iuse__actor_8h_source.html#l00803">RT_NOTHING</a>, <a class="el" href="iuse__actor_8h_source.html#l00809">RT_PRACTICE</a>, <a class="el" href="iuse__actor_8h_source.html#l00805">RT_REFIT</a>, <a class="el" href="iuse__actor_8h_source.html#l00804">RT_REPAIR</a>, <a class="el" href="iuse__actor_8h_source.html#l00807">RT_UPSIZING</a>, <a class="el" href="iuse__actor_8h_source.html#l00788">tool_quality</a>, and <a class="el" href="iuse__actor_8h_source.html#l00779">used_skill</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="ac510427b83a5a419cefd89dae86cded1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac510427b83a5a419cefd89dae86cded1">&#9670;&nbsp;</a></span>repair_recipe_difficulty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int repair_item_actor::repair_recipe_difficulty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fix</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the difficulty to repair an item based on its materials. </p>
<p>Normally the difficulty to repair is that of the most difficult material. If the item has a repairs_like, use the materials of that item instead. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02885">2885</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;{</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    std::pair&lt;int, bool&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="iuse__actor_8cpp.html#afa2a92ba1826bac1626bbf907d4e7e79">find_repair_difficulty</a>( *fix.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    <span class="keywordtype">int</span> diff = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    <span class="keywordtype">bool</span> defined = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.second;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160; </div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="comment">// See if there&#39;s a repairs_like that has a defined difficulty</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">if</span>( !defined &amp;&amp; !fix.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a27af038e705697a2b9feff2a14e9cef5">repairs_like</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="iuse__actor_8cpp.html#afa2a92ba1826bac1626bbf907d4e7e79">find_repair_difficulty</a>( fix.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a27af038e705697a2b9feff2a14e9cef5">repairs_like</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>() );</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.second ) {</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;            diff = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            defined = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        }</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    }</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="comment">// If we still don&#39;t find a difficulty, difficulty is 10</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <span class="keywordflow">if</span>( !defined ) {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        diff = 10;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    }</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160; </div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="keywordflow">return</span> diff;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aiuse__actor_8cpp_html_afa2a92ba1826bac1626bbf907d4e7e79"><div class="ttname"><a href="iuse__actor_8cpp.html#afa2a92ba1826bac1626bbf907d4e7e79">find_repair_difficulty</a></div><div class="ttdeci">static std::pair&lt; int, bool &gt; find_repair_difficulty(const itype &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02865">iuse_actor.cpp:2865</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="astructitype_html_a27af038e705697a2b9feff2a14e9cef5"><div class="ttname"><a href="structitype.html#a27af038e705697a2b9feff2a14e9cef5">itype::repairs_like</a></div><div class="ttdeci">itype_id repairs_like</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01262">itype.h:1262</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse__actor_8cpp_source.html#l02865">find_repair_difficulty()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="itype_8h_source.html#l01262">itype::repairs_like</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02969">repair_chance()</a>, and <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>.</p>

</div>
</div>
<a id="acd6472a0173dbc81ddcd4818fb95f2d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6472a0173dbc81ddcd4818fb95f2d7">&#9670;&nbsp;</a></span>use()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; repair_item_actor::use </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classiuse__actor.html#a573bc3aaee8207257625376b157567b3">iuse_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8cpp_source.html#l02743">2743</a> of file <a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;{</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classrepair__item__actor.html#a8127a68c52e50b325de6511fee2dcdd5">can_use_tool</a>( *p, it, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    }</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse__actor_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a>, 0, p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( &amp;it ), INT_MIN );</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="comment">// We also need to store the repair actor subtype in the activity</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">str_values</a>.push_back( <a class="code" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a> );</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="comment">// storing of item_location to support repairs by tools on the ground</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( <a class="code" href="iuse__actor_8cpp.html#a8249467ba898c874fefb5e39dc159d14">get_item_location</a>( *p, it, position ) );</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="comment">// All repairs are done in the activity, including charge cost and target item selection</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a50ca774a69b5d6e12f7fba07434d9b35"><div class="ttname"><a href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">Character::get_item_position</a></div><div class="ttdeci">int get_item_position(const item *it) const</div><div class="ttdoc">Returns the item position (suitable for i_at or similar) of a specific item.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00565">character_inventory.cpp:565</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a1b2c5a44b184330e2384906fe0727210"><div class="ttname"><a href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">player_activity::str_values</a></div><div class="ttdeci">std::vector&lt; std::string &gt; str_values</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00063">player_activity.h:63</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a979cd5aca677ff30dcbb767d4a3980d2"><div class="ttname"><a href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">player_activity::targets</a></div><div class="ttdeci">std::vector&lt; item_location &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00061">player_activity.h:61</a></div></div>
<div class="ttc" id="aiuse__actor_8cpp_html_a1c07be3a760c8f593258e8c0da77fbfe"><div class="ttname"><a href="iuse__actor_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a></div><div class="ttdeci">static const activity_id ACT_REPAIR_ITEM(&quot;ACT_REPAIR_ITEM&quot;)</div></div>
<div class="ttc" id="aiuse__actor_8cpp_html_a8249467ba898c874fefb5e39dc159d14"><div class="ttname"><a href="iuse__actor_8cpp.html#a8249467ba898c874fefb5e39dc159d14">get_item_location</a></div><div class="ttdeci">static item_location get_item_location(Character &amp;p, item &amp;it, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02716">iuse_actor.cpp:2716</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse__actor_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02685">can_use_tool()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02716">get_item_location()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00565">Character::get_item_position()</a>, <a class="el" href="player__activity_8h_source.html#l00063">player_activity::str_values</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, and <a class="el" href="iuse_8h_source.html#l00262">iuse_actor::type</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a686a5cfa2b736595ee5751cfa3d69d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a686a5cfa2b736595ee5751cfa3d69d58">&#9670;&nbsp;</a></span>cost_scaling</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float repair_item_actor::cost_scaling = 1.0f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Volume of materials required (and used up) as percentage of repaired item's volume. </p>
<p>Set to 0 to always use just 1 component. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00786">786</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l02781">handle_components()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02663">load()</a>, and <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>.</p>

</div>
</div>
<a id="a3637545676dcad064a40196dda0c841c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3637545676dcad064a40196dda0c841c">&#9670;&nbsp;</a></span>materials</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>&gt; repair_item_actor::materials</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Materials we are allowed to repair. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00777">777</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

</div>
</div>
<a id="a8db98a186012b12626b1ef7ce0f38036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db98a186012b12626b1ef7ce0f38036">&#9670;&nbsp;</a></span>move_cost</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int repair_item_actor::move_cost = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move cost for every attempt. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00790">790</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l02663">load()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<a id="a877a82dc874cae408ead7691ba9e1274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877a82dc874cae408ead7691ba9e1274">&#9670;&nbsp;</a></span>tool_quality</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int repair_item_actor::tool_quality = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extra value added to skill roll. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00788">788</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l02663">load()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02969">repair_chance()</a>.</p>

</div>
</div>
<a id="a2f79271d4dd3e2c7b53698bb0e582d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f79271d4dd3e2c7b53698bb0e582d53">&#9670;&nbsp;</a></span>trains_skill_to</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int repair_item_actor::trains_skill_to = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum skill level that can be gained by using this actor. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00781">781</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03027">default_action()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02663">load()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>.</p>

</div>
</div>
<a id="ad31b7e5209e6e0c8439cbdd49ce6da8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad31b7e5209e6e0c8439cbdd49ce6da8c">&#9670;&nbsp;</a></span>used_skill</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a> repair_item_actor::used_skill</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classSkill.html">Skill</a> used. </p>

<p class="definition">Definition at line <a class="el" href="iuse__actor_8h_source.html#l00779">779</a> of file <a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="game__inventory_8cpp_source.html#l02095">get_repair_hint()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02663">load()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03094">repair()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02969">repair_chance()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02019">repair_inventory_preset::repair_inventory_preset()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l02385">repair_item_finish()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="iuse__actor_8h_source.html">iuse_actor.h</a></li>
<li>src/<a class="el" href="iuse__actor_8cpp_source.html">iuse_actor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:43 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
