<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: Item_modifier Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classItem__modifier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Item_modifier Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Creates a single item, but can change various aspects of the created item.  
 <a href="classItem__modifier.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="item__group_8h_source.html">item_group.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3939ceb2f16e8990386adaf2e44e1c59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a3939ceb2f16e8990386adaf2e44e1c59">Item_modifier</a> ()</td></tr>
<tr class="separator:a3939ceb2f16e8990386adaf2e44e1c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd9c7c25fba2d51fdd9d9fd231adcdf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a2bd9c7c25fba2d51fdd9d9fd231adcdf">Item_modifier</a> (<a class="el" href="classItem__modifier.html">Item_modifier</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a2bd9c7c25fba2d51fdd9d9fd231adcdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ef3c847eef99206588b82eec2c569e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a60ef3c847eef99206588b82eec2c569e">modify</a> (<a class="el" href="classitem.html">item</a> &amp;new_item, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const</td></tr>
<tr class="separator:a60ef3c847eef99206588b82eec2c569e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad676fe700c23d95a0686743094a11894"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#ad676fe700c23d95a0686743094a11894">check_consistency</a> (const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const</td></tr>
<tr class="separator:ad676fe700c23d95a0686743094a11894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e1826c691a31f40dc293a6e53e8741"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a03e1826c691a31f40dc293a6e53e8741">remove_item</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;itemid)</td></tr>
<tr class="separator:a03e1826c691a31f40dc293a6e53e8741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaf1ee1089f8af02d2e54927211b0e15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#aeaf1ee1089f8af02d2e54927211b0e15">replace_items</a> (const std::unordered_map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; &amp;replacements) const</td></tr>
<tr class="separator:aeaf1ee1089f8af02d2e54927211b0e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2ebb01079005737a9969e3974a3f4202"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a></td></tr>
<tr class="separator:a2ebb01079005737a9969e3974a3f4202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ce9168146a3480610954de3bd4b0e9"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a52ce9168146a3480610954de3bd4b0e9">count</a></td></tr>
<tr class="separator:a52ce9168146a3480610954de3bd4b0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3483befcea35a8740a31ec5349ddf7a5"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">dirt</a></td></tr>
<tr class="memdesc:a3483befcea35a8740a31ec5349ddf7a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Charges to spawn the item with, if this turns out to be negative, the default charges are used.  <a href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">More...</a><br /></td></tr>
<tr class="separator:a3483befcea35a8740a31ec5349ddf7a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9abd149a2d2734f7dd0f71b7c2957a"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a></td></tr>
<tr class="separator:a7f9abd149a2d2734f7dd0f71b7c2957a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fc2ffec0292c47cd45d020b71b4d71"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a></td></tr>
<tr class="memdesc:af2fc2ffec0292c47cd45d020b71b4d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ammo for guns.  <a href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">More...</a><br /></td></tr>
<tr class="separator:af2fc2ffec0292c47cd45d020b71b4d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc5594f7806fc9daa8abba7183b593d1"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a></td></tr>
<tr class="memdesc:abc5594f7806fc9daa8abba7183b593d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Item should spawn inside this container, can be NULL, if item should not spawn in a container.  <a href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">More...</a><br /></td></tr>
<tr class="separator:abc5594f7806fc9daa8abba7183b593d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f143ebb9e6bbded754cc3e7dcde6b0"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a></td></tr>
<tr class="memdesc:ac9f143ebb9e6bbded754cc3e7dcde6b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is used to create the contents of an item.  <a href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">More...</a><br /></td></tr>
<tr class="separator:ac9f143ebb9e6bbded754cc3e7dcde6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132b390cd7ab706137a8d51662242029"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">sealed</a> = true</td></tr>
<tr class="separator:a132b390cd7ab706137a8d51662242029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d9e6672bbd21ac24d77966528149df"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">custom_flags</a></td></tr>
<tr class="memdesc:a07d9e6672bbd21ac24d77966528149df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom flags to be added to the item.  <a href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">More...</a><br /></td></tr>
<tr class="separator:a07d9e6672bbd21ac24d77966528149df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4cec2f060e7f317f6a6590eed5e4993"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">variant</a></td></tr>
<tr class="memdesc:aa4cec2f060e7f317f6a6590eed5e4993"><td class="mdescLeft">&#160;</td><td class="mdescRight">gun variant id, for guns with variants  <a href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">More...</a><br /></td></tr>
<tr class="separator:aa4cec2f060e7f317f6a6590eed5e4993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8b3b6d2fb77988d71fd2cb41dd2faf9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">snippets</a></td></tr>
<tr class="memdesc:af8b3b6d2fb77988d71fd2cb41dd2faf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom sub set of snippets to be randomly chosen from and then applied to the item.  <a href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">More...</a><br /></td></tr>
<tr class="separator:af8b3b6d2fb77988d71fd2cb41dd2faf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e036946d90f5caaaa887883c674cc59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">with_ammo</a></td></tr>
<tr class="memdesc:a7e036946d90f5caaaa887883c674cc59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chance [0-100%] for items to spawn with ammo (plus default magazine if necessary)  <a href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">More...</a><br /></td></tr>
<tr class="separator:a7e036946d90f5caaaa887883c674cc59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6eccdc3679a34aeaff69d2f3102ad0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">with_magazine</a></td></tr>
<tr class="memdesc:af6eccdc3679a34aeaff69d2f3102ad0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chance [0-100%] for items to spawn with their default magazine (if any)  <a href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">More...</a><br /></td></tr>
<tr class="separator:af6eccdc3679a34aeaff69d2f3102ad0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Creates a single item, but can change various aspects of the created item. </p>
<p>This is basically a wrapper around <a class="el" href="classSingle__item__creator.html">Single_item_creator</a> that adds item properties. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00238">238</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3939ceb2f16e8990386adaf2e44e1c59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3939ceb2f16e8990386adaf2e44e1c59">&#9670;&nbsp;</a></span>Item_modifier() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Item_modifier::Item_modifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8cpp_source.html#l00502">502</a> of file <a class="el" href="item__group_8cpp_source.html">item_group.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    : <a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>( 0, 0 )</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    , <a class="code" href="classItem__modifier.html#a52ce9168146a3480610954de3bd4b0e9">count</a>( -1, -1 )</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// Dirt in guns is capped unless overwritten in the itemgroup</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">// most guns should not be very dirty or dirty at all</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    , <a class="code" href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">dirt</a>( 0, 500 )</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    , <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>( -1, -1 )</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    , <a class="code" href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">with_ammo</a>( 0 )</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    , <a class="code" href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">with_magazine</a>( 0 )</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="ttc" id="aclassItem__modifier_html_a2ebb01079005737a9969e3974a3f4202"><div class="ttname"><a href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">Item_modifier::damage</a></div><div class="ttdeci">std::pair&lt; int, int &gt; damage</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00241">item_group.h:241</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a3483befcea35a8740a31ec5349ddf7a5"><div class="ttname"><a href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">Item_modifier::dirt</a></div><div class="ttdeci">std::pair&lt; int, int &gt; dirt</div><div class="ttdoc">Charges to spawn the item with, if this turns out to be negative, the default charges are used.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00247">item_group.h:247</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a52ce9168146a3480610954de3bd4b0e9"><div class="ttname"><a href="classItem__modifier.html#a52ce9168146a3480610954de3bd4b0e9">Item_modifier::count</a></div><div class="ttdeci">std::pair&lt; int, int &gt; count</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00242">item_group.h:242</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a7e036946d90f5caaaa887883c674cc59"><div class="ttname"><a href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">Item_modifier::with_ammo</a></div><div class="ttdeci">int with_ammo</div><div class="ttdoc">Chance [0-100%] for items to spawn with ammo (plus default magazine if necessary)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00295">item_group.h:295</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a7f9abd149a2d2734f7dd0f71b7c2957a"><div class="ttname"><a href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">Item_modifier::charges</a></div><div class="ttdeci">std::pair&lt; int, int &gt; charges</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00248">item_group.h:248</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_af6eccdc3679a34aeaff69d2f3102ad0f"><div class="ttname"><a href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">Item_modifier::with_magazine</a></div><div class="ttdeci">int with_magazine</div><div class="ttdoc">Chance [0-100%] for items to spawn with their default magazine (if any)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00297">item_group.h:297</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bd9c7c25fba2d51fdd9d9fd231adcdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd9c7c25fba2d51fdd9d9fd231adcdf">&#9670;&nbsp;</a></span>Item_modifier() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Item_modifier::Item_modifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classItem__modifier.html">Item_modifier</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad676fe700c23d95a0686743094a11894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad676fe700c23d95a0686743094a11894">&#9670;&nbsp;</a></span>check_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_modifier::check_consistency </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8cpp_source.html#l00729">729</a> of file <a class="el" href="item__group_8cpp_source.html">item_group.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;{</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>-&gt;check_consistency( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>-&gt;check_consistency( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span>( with_ammo &lt; 0 || with_ammo &gt; 100 ) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;in %s: Item modifier&#39;s ammo chance %d is out of range&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="code" href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">with_ammo</a> );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span>( with_magazine &lt; 0 || with_magazine &gt; 100 ) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;in %s: Item modifier&#39;s magazine chance %d is out of range&quot;</span>,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                  <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="code" href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">with_magazine</a> );</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="ttc" id="aclassItem__modifier_html_abc5594f7806fc9daa8abba7183b593d1"><div class="ttname"><a href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">Item_modifier::container</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; container</div><div class="ttdoc">Item should spawn inside this container, can be NULL, if item should not spawn in a container.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00263">item_group.h:263</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_af2fc2ffec0292c47cd45d020b71b4d71"><div class="ttname"><a href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">Item_modifier::ammo</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; ammo</div><div class="ttdoc">Ammo for guns.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00253">item_group.h:253</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8h_source.html#l00253">ammo</a>, <a class="el" href="item__group_8h_source.html#l00263">container</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__group_8h_source.html#l00295">with_ammo</a>, and <a class="el" href="item__group_8h_source.html#l00297">with_magazine</a>.</p>

</div>
</div>
<a id="a60ef3c847eef99206588b82eec2c569e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60ef3c847eef99206588b82eec2c569e">&#9670;&nbsp;</a></span>modify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_modifier::modify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>new_item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8cpp_source.html#l00514">514</a> of file <a class="el" href="item__group_8cpp_source.html">item_group.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    new_item.<a class="code" href="classitem.html#afebc00bf525bada288b71deebbc84d84">set_damage</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>.first, <a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>.second ) );</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    new_item.<a class="code" href="classitem.html#a68dcc193f7192ee4a989abe18f93597a">rand_degradation</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// no need for dirt if it&#39;s a bow</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !new_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a> ) &amp;&amp;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        !new_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a8b16e2df6770ff1c280c38e754697b0d">flag_NON_FOULING</a> ) ) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordtype">int</span> random_dirt = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">dirt</a>.first, <a class="code" href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">dirt</a>.second );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="comment">// if gun RNG is dirty, must add dirt fault to allow cleaning</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">if</span>( random_dirt &gt; 0 ) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            new_item.<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;dirt&quot;</span>, random_dirt );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            new_item.<a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.emplace( <span class="stringliteral">&quot;fault_gun_dirt&quot;</span> );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="comment">// chance to be unlubed, but only if it&#39;s not a laser or something</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) &amp;&amp; !new_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a270355ff5a5dad2150df29d799ef075d">flag_NEEDS_NO_LUBE</a> ) ) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            new_item.<a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.emplace( <span class="stringliteral">&quot;fault_gun_unlubricated&quot;</span> );</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    new_item.<a class="code" href="classitem.html#a2307462a36b9809493966946645c2bc4">set_itype_variant</a>( <a class="code" href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">variant</a> );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">// create container here from modifier or from default to get max charges later</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        std::optional&lt;item&gt; cont;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            cont = <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>-&gt;create_single( new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a>.has_value() &amp;&amp;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                   !new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a>-&gt;is_null() ) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            cont = <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( *new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a>, new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">default_container_variant</a>.has_value() ) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                cont-&gt;set_itype_variant( *new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">default_container_variant</a> );</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordtype">int</span> max_capacity = -1;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.first != -1 &amp;&amp; <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.second == -1 &amp;&amp; ( new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ||</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                new_item.<a class="code" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">uses_magazine</a>() ) ) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordtype">int</span> max_ammo = 0;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <span class="comment">// Get the ammo capacity of the new item itself</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                max_ammo = new_item.<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template(</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                                       new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>().<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="comment">// Get the capacity of the item&#39;s default magazine</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                max_ammo = <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>() )-&gt;magazine-&gt;capacity;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">// Don&#39;t change the ammo capacity from 0 if the item isn&#39;t a magazine</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="comment">// and doesn&#39;t have a default magazine with a capacity</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">if</span>( max_ammo &gt; 0 ) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                max_capacity = max_ammo;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span>( max_capacity == -1 &amp;&amp; cont.has_value() &amp;&amp; !cont-&gt;is_null() &amp;&amp;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            ( new_item.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ||</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;              ( !new_item.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; !new_item.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) ) ) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a> == 0_gram ) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                max_capacity = new_item.<a class="code" href="classitem.html#a902e330a0505ae225e2ed05921bdf004">charges_per_volume</a>( cont-&gt;get_total_capacity() );</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                max_capacity = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( new_item.<a class="code" href="classitem.html#a902e330a0505ae225e2ed05921bdf004">charges_per_volume</a>( cont-&gt;get_total_capacity() ),</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                         new_item.<a class="code" href="classitem.html#a732ea713c6965bb7a15ba7f2fe08f2b5">charges_per_weight</a>( cont-&gt;get_total_weight_capacity() ) );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> charges_not_set = <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.first == -1 &amp;&amp; <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.second == -1;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordtype">int</span> ch = -1;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span>( !charges_not_set ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordtype">int</span> charges_min = <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.first == -1 ? 0 : <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.first;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordtype">int</span> charges_max = <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.second == -1 ? max_capacity : <a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>.second;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span>( charges_min == -1 &amp;&amp; charges_max != -1 ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                charges_min = 0;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="keywordflow">if</span>( max_capacity != -1 &amp;&amp; ( charges_max &gt; max_capacity || ( charges_min != 1 &amp;&amp;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                        charges_max == -1 ) ) ) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                charges_max = max_capacity;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span>( charges_min &gt; charges_max ) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                charges_min = charges_max;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            ch = charges_min == charges_max ? charges_min : <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( charges_min,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    charges_max );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cont.has_value() &amp;&amp; !cont-&gt;is_null() &amp;&amp; new_item.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, max_capacity );</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span>( ch != -1 ) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || new_item.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                <span class="comment">// food, ammo</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="comment">// count_by_charges requires that charges is at least 1. It makes no sense to</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="comment">// spawn a &quot;water (0)&quot; item.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, ch );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">if</span>( !new_item.<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() &amp;&amp; !new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>().<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <a class="code" href="classitem.html">item</a> mag( new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>() );</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <span class="keywordflow">if</span>( !mag.ammo_default().is_null() ) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        mag.ammo_set( mag.ammo_default(), ch );</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    new_item.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( mag, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    new_item.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), ch );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    new_item.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( new_item.<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), ch );</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;in %s: tried to set ammo for %s which does not have ammo or a magazine&quot;</span>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                              <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, new_item.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af2971652c35b420d02faa9337c51c00b">can_have_charges</a>() ) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = ch;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">if</span>( ch &gt; 0 &amp;&amp; ( new_item.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) ) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> ammo_id;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a> ) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                ammo_id = <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>-&gt;create_single( new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() ).typeId();</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() ) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                ammo_id = new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>() &amp;&amp; new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>()-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo ) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                ammo_id = new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>()-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">if</span>( ammo_id &amp;&amp; !ammo_id.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                new_item.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_id, ch );</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to set ammo for %s which does not have ammo or a magazine&quot;</span>,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                          new_item.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="comment">// Make sure the item is in valid state</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                                             new_item.<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type ) );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                new_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ||</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            new_item.<a class="code" href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordtype">bool</span> spawn_ammo = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 99 ) &lt; <a class="code" href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">with_ammo</a> &amp;&amp; new_item.<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 &amp;&amp; ch == -1 &amp;&amp;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                              ( !new_item.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() || new_item.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;rand_charges.empty() );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="keywordtype">bool</span> spawn_mag = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 99 ) &lt; <a class="code" href="classItem__modifier.html#af6eccdc3679a34aeaff69d2f3102ad0f">with_magazine</a> &amp;&amp; !new_item.<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() &amp;&amp;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                             !new_item.<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="keywordflow">if</span>( spawn_mag ) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <a class="code" href="classitem.html">item</a> mag( new_item.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>(), new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="keywordflow">if</span>( spawn_ammo &amp;&amp; !mag.ammo_default().is_null() ) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                    mag.ammo_set( mag.ammo_default() );</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                new_item.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( mag, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spawn_ammo &amp;&amp; !new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>().<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a> ) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> am = <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>-&gt;create_single( new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    new_item.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( am.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    new_item.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( new_item.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span>( cont.has_value() &amp;&amp; !cont-&gt;is_null() ) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keyword">const</span> <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type = <a class="code" href="item__group_8cpp.html#a195b0dd971250f55e9698c44cd061469">guess_pocket_for</a>( *cont, new_item );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            cont-&gt;put_in( new_item, pk_type );</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            cont-&gt;add_automatic_whitelist();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            new_item = std::move( *cont );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">sealed</a> ) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                new_item.<a class="code" href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">seal</a>();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="classItem__spawn__data.html#ab03f2bbb2cf2ea2e5f24d801be0f67ee">Item_spawn_data::ItemList</a> contentitems;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <a class="code" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a>-&gt;create( contentitems, new_item.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : contentitems ) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <span class="comment">// custom code for directly attaching pockets to MOLLE vests</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = new_item.<a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;attach_molle&quot;</span> );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> &amp;&amp; it.can_attach_as_pocket() ) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmolle__attach__actor.html">molle_attach_actor</a> *actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classmolle__attach__actor.html">molle_attach_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                                  ( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>-&gt;get_actor_ptr() );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> vacancies = actor-&gt;<a class="code" href="classmolle__attach__actor.html#a4d2d0ba1f41a92c3c403fea44a090105">size</a> - new_item.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#a93911494043a3597b10e3a820b09b614">get_additional_space_used</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="comment">// intentionally might lose items here if they don&#39;t fit this is because it&#39;s</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="comment">// impossible to know in a spawn group how much stuff could end up in it</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                <span class="comment">// if you roll 3, 3 size items in a 3 slot vest you shouldn&#39;t get an error</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <span class="comment">// but you should get a vest with at least the first one</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <span class="keywordflow">if</span>( it.get_pocket_size() &lt;= vacancies ) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                    new_item.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#a22e91e86426ac88558160d052d171822">add_pocket</a>( it );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keyword">const</span> <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type = <a class="code" href="item__group_8cpp.html#a195b0dd971250f55e9698c44cd061469">guess_pocket_for</a>( new_item, it );</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                new_item.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( it, pk_type );</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">sealed</a> ) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            new_item.<a class="code" href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">seal</a>();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag : <a class="code" href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">custom_flags</a> ) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        new_item.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( flag );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">snippets</a>.empty() ) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        new_item.<a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> = <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code" href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">snippets</a> );</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a07d9e6672bbd21ac24d77966528149df"><div class="ttname"><a href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">Item_modifier::custom_flags</a></div><div class="ttdeci">std::vector&lt; flag_id &gt; custom_flags</div><div class="ttdoc">Custom flags to be added to the item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00272">item_group.h:272</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a132b390cd7ab706137a8d51662242029"><div class="ttname"><a href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">Item_modifier::sealed</a></div><div class="ttdeci">bool sealed</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00268">item_group.h:268</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_aa4cec2f060e7f317f6a6590eed5e4993"><div class="ttname"><a href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">Item_modifier::variant</a></div><div class="ttdeci">std::string variant</div><div class="ttdoc">gun variant id, for guns with variants</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00277">item_group.h:277</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_ac9f143ebb9e6bbded754cc3e7dcde6b0"><div class="ttname"><a href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">Item_modifier::contents</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; contents</div><div class="ttdoc">This is used to create the contents of an item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00267">item_group.h:267</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_af8b3b6d2fb77988d71fd2cb41dd2faf9"><div class="ttname"><a href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">Item_modifier::snippets</a></div><div class="ttdeci">std::vector&lt; snippet_id &gt; snippets</div><div class="ttdoc">Custom sub set of snippets to be randomly chosen from and then applied to the item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00282">item_group.h:282</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_ab03f2bbb2cf2ea2e5f24d801be0f67ee"><div class="ttname"><a href="classItem__spawn__data.html#ab03f2bbb2cf2ea2e5f24d801be0f67ee">Item_spawn_data::ItemList</a></div><div class="ttdeci">std::vector&lt; item &gt; ItemList</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00128">item_group.h:128</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a22e91e86426ac88558160d052d171822"><div class="ttname"><a href="classitem__contents.html#a22e91e86426ac88558160d052d171822">item_contents::add_pocket</a></div><div class="ttdeci">void add_pocket(const item &amp;pocket)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02119">item_contents.cpp:2119</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a93911494043a3597b10e3a820b09b614"><div class="ttname"><a href="classitem__contents.html#a93911494043a3597b10e3a820b09b614">item_contents::get_additional_space_used</a></div><div class="ttdeci">int get_additional_space_used() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02205">item_contents.cpp:2205</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a018fe1a11eaa7e18cae915d683088c02"><div class="ttname"><a href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">item::put_in</a></div><div class="ttdeci">ret_val&lt; void &gt; put_in(const item &amp;payload, pocket_type pk_type, bool unseal_pockets=false, Character *carrier=nullptr)</div><div class="ttdoc">Puts the given item into this one.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01784">item.cpp:1784</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aclassitem_html_a159a8d7dbb5135f556838aec5e223287"><div class="ttname"><a href="classitem.html#a159a8d7dbb5135f556838aec5e223287">item::magazine_default</a></div><div class="ttdeci">itype_id magazine_default(bool conversion=false) const</div><div class="ttdoc">Get the default magazine type (if any) for the current effective ammo type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11185">item.cpp:11185</a></div></div>
<div class="ttc" id="aclassitem_html_a2307462a36b9809493966946645c2bc4"><div class="ttname"><a href="classitem.html#a2307462a36b9809493966946645c2bc4">item::set_itype_variant</a></div><div class="ttdeci">void set_itype_variant(const std::string &amp;variant)</div><div class="ttdoc">Set the gun variant of this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09361">item.cpp:9361</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09297">item.cpp:9297</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a46b9bb1181827a365eb83d935c663677"><div class="ttname"><a href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a></div><div class="ttdeci">time_point birthday() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14686">item.cpp:14686</a></div></div>
<div class="ttc" id="aclassitem_html_a4938361b8fe897c4e85d66020ef91aff"><div class="ttname"><a href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a></div><div class="ttdeci">void set_var(const std::string &amp;name, int value)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01809">item.cpp:1809</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_a54040b19e6b59078c7736a141e0d6c6a"><div class="ttname"><a href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">item::has_pocket_type</a></div><div class="ttdeci">bool has_pocket_type(pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09685">item.cpp:9685</a></div></div>
<div class="ttc" id="aclassitem_html_a59a03649a0636c70e776054db688564a"><div class="ttname"><a href="classitem.html#a59a03649a0636c70e776054db688564a">item::is_tool</a></div><div class="ttdeci">bool is_tool() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09953">item.cpp:9953</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a660699e1c63b2ab0b4e5ac88e61d8ad6"><div class="ttname"><a href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">item::faults</a></div><div class="ttdeci">cata::heap&lt; std::set&lt; fault_id &gt; &gt; faults</div><div class="ttdoc">What faults (if any) currently apply to this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03077">item.h:3077</a></div></div>
<div class="ttc" id="aclassitem_html_a66a57361dab03b70d84eb8f7afca1d10"><div class="ttname"><a href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">item::uses_magazine</a></div><div class="ttdeci">bool uses_magazine() const</div><div class="ttdoc">Does item have magazine well.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11180">item.cpp:11180</a></div></div>
<div class="ttc" id="aclassitem_html_a68dcc193f7192ee4a989abe18f93597a"><div class="ttname"><a href="classitem.html#a68dcc193f7192ee4a989abe18f93597a">item::rand_degradation</a></div><div class="ttdeci">void rand_degradation()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00868">item.cpp:868</a></div></div>
<div class="ttc" id="aclassitem_html_a6a3f16444c412bce4b75a7d600d6a3fe"><div class="ttname"><a href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a></div><div class="ttdeci">item &amp; ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Filter setting the ammo for this instance Any existing ammo is removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00719">item.cpp:719</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a71dac02bae8b97487391d5540a89bc1c"><div class="ttname"><a href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">item::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;use_name) const</div><div class="ttdoc">Returns the pointer to use_function with name use_name assigned to the type of this item or any of it...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11463">item.cpp:11463</a></div></div>
<div class="ttc" id="aclassitem_html_a732ea713c6965bb7a15ba7f2fe08f2b5"><div class="ttname"><a href="classitem.html#a732ea713c6965bb7a15ba7f2fe08f2b5">item::charges_per_weight</a></div><div class="ttdeci">int charges_per_weight(const units::mass &amp;m, bool suppress_warning=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01356">item.cpp:1356</a></div></div>
<div class="ttc" id="aclassitem_html_a8997128dc1d0b04bc66d1cada9e4fba5"><div class="ttname"><a href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">item::seal</a></div><div class="ttdeci">bool seal()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09648">item.cpp:9648</a></div></div>
<div class="ttc" id="aclassitem_html_a902e330a0505ae225e2ed05921bdf004"><div class="ttname"><a href="classitem.html#a902e330a0505ae225e2ed05921bdf004">item::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol, bool suppress_warning=false) const</div><div class="ttdoc">Number of (charges of) this item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01332">item.cpp:1332</a></div></div>
<div class="ttc" id="aclassitem_html_aa475db2839de54a872f47b7c238e214a"><div class="ttname"><a href="classitem.html#aa475db2839de54a872f47b7c238e214a">item::snip_id</a></div><div class="ttdeci">snippet_id snip_id</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03140">item.h:3140</a></div></div>
<div class="ttc" id="aclassitem_html_aa7e9319c5779e2e1c550158ee8a2cc98"><div class="ttname"><a href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">item::magazine_integral</a></div><div class="ttdeci">bool magazine_integral() const</div><div class="ttdoc">Can item load ammo like a magazine (has magazine pocket)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11175">item.cpp:11175</a></div></div>
<div class="ttc" id="aclassitem_html_ab07d96e30c441a84435972df842f4c77"><div class="ttname"><a href="classitem.html#ab07d96e30c441a84435972df842f4c77">item::ammo_default</a></div><div class="ttdeci">itype_id ammo_default(bool conversion=true) const</div><div class="ttdoc">Default ammo for the the item magazine pocket, if item has ammo_types().</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11081">item.cpp:11081</a></div></div>
<div class="ttc" id="aclassitem_html_ab22fc9a4e0f9c6f5569b93e00deccfac"><div class="ttname"><a href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a></div><div class="ttdeci">item * magazine_current()</div><div class="ttdoc">Currently loaded magazine (if any)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11207">item.cpp:11207</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassitem_html_adce43f2490a85e2dc212a26ce5ded4fc"><div class="ttname"><a href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">item::is_magazine</a></div><div class="ttdeci">bool is_magazine() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09445">item.cpp:9445</a></div></div>
<div class="ttc" id="aclassitem_html_afd9fcc8f19476c95071b72c300f47ad1"><div class="ttname"><a href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">item::get_contents</a></div><div class="ttdeci">item_contents &amp; get_contents()</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03165">item.h:3165</a></div></div>
<div class="ttc" id="aclassitem_html_afebc00bf525bada288b71deebbc84d84"><div class="ttname"><a href="classitem.html#afebc00bf525bada288b71deebbc84d84">item::set_damage</a></div><div class="ttdeci">void set_damage(int qty)</div><div class="ttdoc">Sets item damage constrained by [degradation and max_damage].</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00905">item.cpp:905</a></div></div>
<div class="ttc" id="aclassmolle__attach__actor_html"><div class="ttname"><a href="classmolle__attach__actor.html">molle_attach_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01014">iuse_actor.h:1015</a></div></div>
<div class="ttc" id="aclassmolle__attach__actor_html_a4d2d0ba1f41a92c3c403fea44a090105"><div class="ttname"><a href="classmolle__attach__actor.html#a4d2d0ba1f41a92c3c403fea44a090105">molle_attach_actor::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01019">iuse_actor.h:1019</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aflag_8cpp_html_a270355ff5a5dad2150df29d799ef075d"><div class="ttname"><a href="flag_8cpp.html#a270355ff5a5dad2150df29d799ef075d">flag_NEEDS_NO_LUBE</a></div><div class="ttdeci">const flag_id flag_NEEDS_NO_LUBE(&quot;NEEDS_NO_LUBE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a8b16e2df6770ff1c280c38e754697b0d"><div class="ttname"><a href="flag_8cpp.html#a8b16e2df6770ff1c280c38e754697b0d">flag_NON_FOULING</a></div><div class="ttdeci">const flag_id flag_NON_FOULING(&quot;NON_FOULING&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa1084eab5da5ecd3f6efe55e0216eb96"><div class="ttname"><a href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a></div><div class="ttdeci">const flag_id flag_PRIMITIVE_RANGED_WEAPON(&quot;PRIMITIVE_RANGED_WEAPON&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a62fc9d4e4ca8f0e62b4556f5f65b666c"><div class="ttname"><a href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a></div><div class="ttdeci">std::unique_ptr&lt; Item_factory &gt; item_controller</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00126">item_factory.cpp:126</a></div></div>
<div class="ttc" id="aitem__group_8cpp_html_a195b0dd971250f55e9698c44cd061469"><div class="ttname"><a href="item__group_8cpp.html#a195b0dd971250f55e9698c44cd061469">guess_pocket_for</a></div><div class="ttdeci">static pocket_type guess_pocket_for(const item &amp;container, const item &amp;payload)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00094">item_group.cpp:94</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a></div><div class="ttdeci">pocket_type</div><div class="ttdef"><b>Definition:</b> <a href="pocket__type_8h_source.html#l00007">pocket_type.h:7</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00104">rng.h:104</a></div></div>
<div class="ttc" id="astructitype_html_a4ecb806dae208ff275b4aa50ffcd3902"><div class="ttname"><a href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">itype::weight</a></div><div class="ttdeci">units::mass weight</div><div class="ttdoc">Weight of item ( or each stack member )</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01234">itype.h:1234</a></div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
<div class="ttc" id="astructitype_html_aaf325d340c06130e2fd994e54400a012"><div class="ttname"><a href="structitype.html#aaf325d340c06130e2fd994e54400a012">itype::default_container</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; default_container</div><div class="ttdoc">unique string identifier for this type</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01280">itype.h:1280</a></div></div>
<div class="ttc" id="astructitype_html_ab7a866401e21c24a50a5823c5dbc80f8"><div class="ttname"><a href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">itype::default_container_variant</a></div><div class="ttdeci">std::optional&lt; std::string &gt; default_container_variant</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01281">itype.h:1281</a></div></div>
<div class="ttc" id="astructitype_html_aba9992b8bc80b65d4153370b3e0755ec"><div class="ttname"><a href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">itype::magazine</a></div><div class="ttdeci">cata::value_ptr&lt; islot_magazine &gt; magazine</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01209">itype.h:1209</a></div></div>
<div class="ttc" id="astructitype_html_af2971652c35b420d02faa9337c51c00b"><div class="ttname"><a href="structitype.html#af2971652c35b420d02faa9337c51c00b">itype::can_have_charges</a></div><div class="ttdeci">bool can_have_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00236">itype.cpp:236</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="item__contents_8cpp_source.html#l02119">item_contents::add_pocket()</a>, <a class="el" href="item__group_8h_source.html#l00253">ammo</a>, <a class="el" href="item_8cpp_source.html#l10801">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l11081">item::ammo_default()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l00719">item::ammo_set()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8cpp_source.html#l00236">itype::can_have_charges()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="item__group_8h_source.html#l00248">charges</a>, <a class="el" href="item_8cpp_source.html#l01332">item::charges_per_volume()</a>, <a class="el" href="item_8cpp_source.html#l01356">item::charges_per_weight()</a>, <a class="el" href="item__group_8h_source.html#l00263">container</a>, <a class="el" href="item__group_8h_source.html#l00267">contents</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="item__group_8h_source.html#l00272">custom_flags</a>, <a class="el" href="item__group_8h_source.html#l00241">damage</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="itype_8h_source.html#l01280">itype::default_container</a>, <a class="el" href="itype_8h_source.html#l01281">itype::default_container_variant</a>, <a class="el" href="item__group_8h_source.html#l00247">dirt</a>, <a class="el" href="item_8h_source.html#l03077">item::faults</a>, <a class="el" href="flag_8cpp.html#a270355ff5a5dad2150df29d799ef075d">flag_NEEDS_NO_LUBE</a>, <a class="el" href="flag_8cpp.html#a8b16e2df6770ff1c280c38e754697b0d">flag_NON_FOULING</a>, <a class="el" href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a>, <a class="el" href="item__contents_8cpp_source.html#l02205">item_contents::get_additional_space_used()</a>, <a class="el" href="item_8h_source.html#l03165">item::get_contents()</a>, <a class="el" href="item_8cpp_source.html#l11463">item::get_use()</a>, <a class="el" href="item__group_8cpp_source.html#l00094">guess_pocket_for()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l09685">item::has_pocket_type()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="item_8cpp_source.html#l09445">item::is_magazine()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="item_8cpp_source.html#l09953">item::is_tool()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>, <a class="el" href="item__factory_8cpp_source.html#l00126">item_controller</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="item_8cpp_source.html#l11207">item::magazine_current()</a>, <a class="el" href="item_8cpp_source.html#l11185">item::magazine_default()</a>, <a class="el" href="item_8cpp_source.html#l11175">item::magazine_integral()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="item_8cpp_source.html#l01784">item::put_in()</a>, <a class="el" href="item_8cpp_source.html#l00868">item::rand_degradation()</a>, <a class="el" href="rng_8h_source.html#l00104">random_entry()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8cpp_source.html#l09648">item::seal()</a>, <a class="el" href="item__group_8h_source.html#l00268">sealed</a>, <a class="el" href="item_8cpp_source.html#l00905">item::set_damage()</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="item_8cpp_source.html#l09361">item::set_itype_variant()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="iuse__actor_8h_source.html#l01019">molle_attach_actor::size</a>, <a class="el" href="item_8h_source.html#l03140">item::snip_id</a>, <a class="el" href="item__group_8h_source.html#l00282">snippets</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="item_8cpp_source.html#l11180">item::uses_magazine()</a>, <a class="el" href="item__group_8h_source.html#l00277">variant</a>, <a class="el" href="itype_8h_source.html#l01234">itype::weight</a>, <a class="el" href="item__group_8h_source.html#l00295">with_ammo</a>, and <a class="el" href="item__group_8h_source.html#l00297">with_magazine</a>.</p>

</div>
</div>
<a id="a03e1826c691a31f40dc293a6e53e8741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e1826c691a31f40dc293a6e53e8741">&#9670;&nbsp;</a></span>remove_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_modifier::remove_item </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>itemid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8cpp_source.html#l00746">746</a> of file <a class="el" href="item__group_8cpp_source.html">item_group.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>-&gt;remove_item( itemid ) ) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>.reset();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>-&gt;remove_item( itemid ) ) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>.reset();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8h_source.html#l00253">ammo</a>, and <a class="el" href="item__group_8h_source.html#l00263">container</a>.</p>

</div>
</div>
<a id="aeaf1ee1089f8af02d2e54927211b0e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaf1ee1089f8af02d2e54927211b0e15">&#9670;&nbsp;</a></span>replace_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_modifier::replace_items </td>
          <td>(</td>
          <td class="paramtype">const std::unordered_map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>replacements</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8cpp_source.html#l00762">762</a> of file <a class="el" href="item__group_8cpp_source.html">item_group.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;{</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a> ) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>-&gt;replace_items( replacements );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a> ) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>-&gt;replace_items( replacements );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a> ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a>-&gt;replace_items( replacements );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8h_source.html#l00253">ammo</a>, <a class="el" href="item__group_8h_source.html#l00263">container</a>, and <a class="el" href="item__group_8h_source.html#l00267">contents</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af2fc2ffec0292c47cd45d020b71b4d71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fc2ffec0292c47cd45d020b71b4d71">&#9670;&nbsp;</a></span>ammo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classItem__spawn__data.html">Item_spawn_data</a>&gt; Item_modifier::ammo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ammo for guns. </p>
<p>If NULL the gun spawns without ammo. This takes <a class="el" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a> and <a class="el" href="classItem__modifier.html#a7e036946d90f5caaaa887883c674cc59">with_ammo</a> into account. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00253">253</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, <a class="el" href="item__group_8cpp_source.html#l00729">check_consistency()</a>, <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>, <a class="el" href="item__group_8cpp_source.html#l00746">remove_item()</a>, and <a class="el" href="item__group_8cpp_source.html#l00762">replace_items()</a>.</p>

</div>
</div>
<a id="a7f9abd149a2d2734f7dd0f71b7c2957a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f9abd149a2d2734f7dd0f71b7c2957a">&#9670;&nbsp;</a></span>charges</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int, int&gt; Item_modifier::charges</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00248">248</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="abc5594f7806fc9daa8abba7183b593d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc5594f7806fc9daa8abba7183b593d1">&#9670;&nbsp;</a></span>container</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classItem__spawn__data.html">Item_spawn_data</a>&gt; Item_modifier::container</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Item should spawn inside this container, can be NULL, if item should not spawn in a container. </p>
<p>If the created item is a liquid and it uses the default charges, it will expand/shrink to fill the container completely. If it is created with to much charges, they are reduced. If it is created with the non-default charges, but it still fits it is not changed. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00263">263</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, <a class="el" href="item__group_8cpp_source.html#l00729">check_consistency()</a>, <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>, <a class="el" href="item__group_8cpp_source.html#l00746">remove_item()</a>, and <a class="el" href="item__group_8cpp_source.html#l00762">replace_items()</a>.</p>

</div>
</div>
<a id="ac9f143ebb9e6bbded754cc3e7dcde6b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f143ebb9e6bbded754cc3e7dcde6b0">&#9670;&nbsp;</a></span>contents</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classItem__spawn__data.html">Item_spawn_data</a>&gt; Item_modifier::contents</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is used to create the contents of an item. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00267">267</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>, and <a class="el" href="item__group_8cpp_source.html#l00762">replace_items()</a>.</p>

</div>
</div>
<a id="a52ce9168146a3480610954de3bd4b0e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52ce9168146a3480610954de3bd4b0e9">&#9670;&nbsp;</a></span>count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int, int&gt; Item_modifier::count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00242">242</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>.</p>

</div>
</div>
<a id="a07d9e6672bbd21ac24d77966528149df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d9e6672bbd21ac24d77966528149df">&#9670;&nbsp;</a></span>custom_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a>&gt; Item_modifier::custom_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Custom flags to be added to the item. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00272">272</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="a2ebb01079005737a9969e3974a3f4202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ebb01079005737a9969e3974a3f4202">&#9670;&nbsp;</a></span>damage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int, int&gt; Item_modifier::damage</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00241">241</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="a3483befcea35a8740a31ec5349ddf7a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3483befcea35a8740a31ec5349ddf7a5">&#9670;&nbsp;</a></span>dirt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int, int&gt; Item_modifier::dirt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Charges to spawn the item with, if this turns out to be negative, the default charges are used. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00247">247</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="a132b390cd7ab706137a8d51662242029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132b390cd7ab706137a8d51662242029">&#9670;&nbsp;</a></span>sealed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_modifier::sealed = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00268">268</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="af8b3b6d2fb77988d71fd2cb41dd2faf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8b3b6d2fb77988d71fd2cb41dd2faf9">&#9670;&nbsp;</a></span>snippets</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="type__id_8h.html#a84db133d54da75a181233bc4ba230e4c">snippet_id</a>&gt; Item_modifier::snippets</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Custom sub set of snippets to be randomly chosen from and then applied to the item. </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00282">282</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="aa4cec2f060e7f317f6a6590eed5e4993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4cec2f060e7f317f6a6590eed5e4993">&#9670;&nbsp;</a></span>variant</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Item_modifier::variant</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gun variant id, for guns with variants </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00277">277</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04957">Item_factory::add_entry()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="a7e036946d90f5caaaa887883c674cc59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e036946d90f5caaaa887883c674cc59">&#9670;&nbsp;</a></span>with_ammo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Item_modifier::with_ammo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chance [0-100%] for items to spawn with ammo (plus default magazine if necessary) </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00295">295</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__group_8cpp_source.html#l00729">check_consistency()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<a id="af6eccdc3679a34aeaff69d2f3102ad0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6eccdc3679a34aeaff69d2f3102ad0f">&#9670;&nbsp;</a></span>with_magazine</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Item_modifier::with_magazine</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chance [0-100%] for items to spawn with their default magazine (if any) </p>

<p class="definition">Definition at line <a class="el" href="item__group_8h_source.html#l00297">297</a> of file <a class="el" href="item__group_8h_source.html">item_group.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__group_8cpp_source.html#l00729">check_consistency()</a>, and <a class="el" href="item__group_8cpp_source.html#l00514">modify()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="item__group_8h_source.html">item_group.h</a></li>
<li>src/<a class="el" href="item__group_8cpp_source.html">item_group.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:40 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
