<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: trap Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="structtrap-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">trap Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Some traps aren't actually traps in the usual sense of the word.  
 <a href="structtrap.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="trap_8h_source.html">trap.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a01b0ef8443ac5ba4e7455880ca2dc44b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a> () const</td></tr>
<tr class="separator:a01b0ef8443ac5ba4e7455880ca2dc44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafab5c450397fa7ea6430a9334c2859c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a> () const</td></tr>
<tr class="memdesc:aafab5c450397fa7ea6430a9334c2859c"><td class="mdescLeft">&#160;</td><td class="mdescRight">There are special always invisible traps.  <a href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">More...</a><br /></td></tr>
<tr class="separator:aafab5c450397fa7ea6430a9334c2859c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4f7bfc2d5eb64598a4650d47cd3029"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a6e4f7bfc2d5eb64598a4650d47cd3029">operator==</a> (const <a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a> &amp;<a class="el" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a>) const</td></tr>
<tr class="separator:a6e4f7bfc2d5eb64598a4650d47cd3029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fd24c994876f92198c760ddde2358f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#aa1fd24c994876f92198c760ddde2358f">operator!=</a> (const <a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a> &amp;<a class="el" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a>) const</td></tr>
<tr class="separator:aa1fd24c994876f92198c760ddde2358f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4cdf3b26a6dae70dd4f078680531a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7e4cdf3b26a6dae70dd4f078680531a8">has_flag</a> (const <a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a> &amp;flag) const</td></tr>
<tr class="separator:a7e4cdf3b26a6dae70dd4f078680531a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d8d91c648be5b56d85040cdef6fd8c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a20d8d91c648be5b56d85040cdef6fd8c">has_memorial_msg</a> () const</td></tr>
<tr class="separator:a20d8d91c648be5b56d85040cdef6fd8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d6fcf18e888cf4da69f6faa01df1cf"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a69d6fcf18e888cf4da69f6faa01df1cf">memorial_msg</a> (bool <a class="el" href="newcharacter_8cpp.html#a1d22ab3ab1f5b7b3d7b9491dcd8787b4">male</a>) const</td></tr>
<tr class="separator:a69d6fcf18e888cf4da69f6faa01df1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10939455022c6811948587a1d431155d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a10939455022c6811948587a1d431155d">examine</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp) const</td></tr>
<tr class="memdesc:a10939455022c6811948587a1d431155d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the player examines a tile.  <a href="structtrap.html#a10939455022c6811948587a1d431155d">More...</a><br /></td></tr>
<tr class="separator:a10939455022c6811948587a1d431155d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1e069186296d3adb2cf9a941a0c0a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a9703e9c28f208c9af0bee38564a5df0b">update_mapgen_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a3e1e069186296d3adb2cf9a941a0c0a8">map_regen_target</a> () const</td></tr>
<tr class="separator:a3e1e069186296d3adb2cf9a941a0c0a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6aca9abdabfc0381ca8e3438da9e84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a2a6aca9abdabfc0381ca8e3438da9e84">get_avoidance</a> () const</td></tr>
<tr class="memdesc:a2a6aca9abdabfc0381ca8e3438da9e84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether triggering the trap can be avoid (if greater than 0) and if so, this is compared to dodge skill (with some adjustments).  <a href="structtrap.html#a2a6aca9abdabfc0381ca8e3438da9e84">More...</a><br /></td></tr>
<tr class="separator:a2a6aca9abdabfc0381ca8e3438da9e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8f59b97597d373f7cb0bbcf061e794"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#adc8f59b97597d373f7cb0bbcf061e794">is_benign</a> () const</td></tr>
<tr class="memdesc:adc8f59b97597d373f7cb0bbcf061e794"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, this is not really a trap and there won't be any safety queries before stepping onto it (e.g.  <a href="structtrap.html#adc8f59b97597d373f7cb0bbcf061e794">More...</a><br /></td></tr>
<tr class="separator:adc8f59b97597d373f7cb0bbcf061e794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a8812efed086442e3e13ca36e50c1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a45a8812efed086442e3e13ca36e50c1d">easy_take_down</a> () const</td></tr>
<tr class="separator:a45a8812efed086442e3e13ca36e50c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb693398e2e48ad4e375f884ff02040"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a4eb693398e2e48ad4e375f884ff02040">is_trivial_to_spot</a> () const</td></tr>
<tr class="separator:a4eb693398e2e48ad4e375f884ff02040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9325b1c5da75604d17041a178a32a4f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a9325b1c5da75604d17041a178a32a4f0">can_not_be_disarmed</a> () const</td></tr>
<tr class="memdesc:a9325b1c5da75604d17041a178a32a4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Some traps are part of the terrain (e.g.  <a href="structtrap.html#a9325b1c5da75604d17041a178a32a4f0">More...</a><br /></td></tr>
<tr class="separator:a9325b1c5da75604d17041a178a32a4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af93e0b8182db7c9d25654a32ae4b86be"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#af93e0b8182db7c9d25654a32ae4b86be">detected_by_ground_sonar</a> () const</td></tr>
<tr class="memdesc:af93e0b8182db7c9d25654a32ae4b86be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this kind of trap will be detected by ground sonar (e.g.  <a href="structtrap.html#af93e0b8182db7c9d25654a32ae4b86be">More...</a><br /></td></tr>
<tr class="separator:af93e0b8182db7c9d25654a32ae4b86be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb79cdedc0f01eae32ff5b0eee3b0ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a9fb79cdedc0f01eae32ff5b0eee3b0ff">detected_by_echolocation</a> () const</td></tr>
<tr class="memdesc:a9fb79cdedc0f01eae32ff5b0eee3b0ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this kind of trap will be detected by regular sonar ( it is not buried and it's a solid object ).  <a href="structtrap.html#a9fb79cdedc0f01eae32ff5b0eee3b0ff">More...</a><br /></td></tr>
<tr class="separator:a9fb79cdedc0f01eae32ff5b0eee3b0ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefc8440f9684bc6694c3c14dc59a727"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">detect_trap</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, const <a class="el" href="classCharacter.html">Character</a> &amp;p) const</td></tr>
<tr class="memdesc:afefc8440f9684bc6694c3c14dc59a727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Player has not yet seen the trap and returns the variable chance, at this moment, of whether the trap is seen or not.  <a href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">More...</a><br /></td></tr>
<tr class="separator:afefc8440f9684bc6694c3c14dc59a727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb5ff27f9f78475035f22aabdcfe834"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">can_see</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, const <a class="el" href="classCharacter.html">Character</a> &amp;p) const</td></tr>
<tr class="memdesc:abeb5ff27f9f78475035f22aabdcfe834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can player/npc p see this kind of trap, either by their memory (they known there is the trap) or by the visibility of the trap (the trap is not hidden at all)?  <a href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">More...</a><br /></td></tr>
<tr class="separator:abeb5ff27f9f78475035f22aabdcfe834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10cbb8e248563510e7b3ad6c7299da5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ad10cbb8e248563510e7b3ad6c7299da5">has_trigger_msg</a> () const</td></tr>
<tr class="separator:ad10cbb8e248563510e7b3ad6c7299da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9bc5805568828afc9a8e56b11a1065"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7e9bc5805568828afc9a8e56b11a1065">get_trigger_message_u</a> () const</td></tr>
<tr class="memdesc:a7e9bc5805568828afc9a8e56b11a1065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a trap-specific trigger message when player steps on it.  <a href="structtrap.html#a7e9bc5805568828afc9a8e56b11a1065">More...</a><br /></td></tr>
<tr class="separator:a7e9bc5805568828afc9a8e56b11a1065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80ccab2e5909209a56a81555d3863f2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ab80ccab2e5909209a56a81555d3863f2">get_trigger_message_npc</a> () const</td></tr>
<tr class="memdesc:ab80ccab2e5909209a56a81555d3863f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a trap-specific trigger message when NPC or a monster steps on it.  <a href="structtrap.html#ab80ccab2e5909209a56a81555d3863f2">More...</a><br /></td></tr>
<tr class="separator:ab80ccab2e5909209a56a81555d3863f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dcb7429a503f2fb5c90842cfb25715"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a03dcb7429a503f2fb5c90842cfb25715">trigger</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, <a class="el" href="classCreature.html">Creature</a> &amp;<a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>) const</td></tr>
<tr class="memdesc:a03dcb7429a503f2fb5c90842cfb25715"><td class="mdescLeft">&#160;</td><td class="mdescRight">This applies the effects of the trap to the world and possibly to the triggering object (creature, item).  <a href="structtrap.html#a03dcb7429a503f2fb5c90842cfb25715">More...</a><br /></td></tr>
<tr class="separator:a03dcb7429a503f2fb5c90842cfb25715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f82fbd0bd8e9929bf1d8934cf22ccd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ab9f82fbd0bd8e9929bf1d8934cf22ccd">trigger</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, <a class="el" href="classitem.html">item</a> &amp;<a class="el" href="classitem.html">item</a>) const</td></tr>
<tr class="separator:ab9f82fbd0bd8e9929bf1d8934cf22ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a692520c48fed23dc934168a3becebb27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a692520c48fed23dc934168a3becebb27">trigger</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos) const</td></tr>
<tr class="separator:a692520c48fed23dc934168a3becebb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bc509c6fa1aec956f63ec03980e593"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#aa7bc509c6fa1aec956f63ec03980e593">triggered_by_item</a> (const <a class="el" href="classitem.html">item</a> &amp;itm) const</td></tr>
<tr class="memdesc:aa7bc509c6fa1aec956f63ec03980e593"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the given item is throw onto the trap, does it trigger the trap?  <a href="structtrap.html#aa7bc509c6fa1aec956f63ec03980e593">More...</a><br /></td></tr>
<tr class="separator:aa7bc509c6fa1aec956f63ec03980e593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b4fcf67a39a8ca75ac910055bb99c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#aa6b4fcf67a39a8ca75ac910055bb99c6">on_disarmed</a> (<a class="el" href="classmap.html">map</a> &amp;m, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="memdesc:aa6b4fcf67a39a8ca75ac910055bb99c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a trap at the given point in the map has been disarmed.  <a href="structtrap.html#aa6b4fcf67a39a8ca75ac910055bb99c6">More...</a><br /></td></tr>
<tr class="separator:aa6b4fcf67a39a8ca75ac910055bb99c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8342e2f67509ba3c791ff104126f47e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a8342e2f67509ba3c791ff104126f47e4">get_trap_radius</a> () const</td></tr>
<tr class="memdesc:a8342e2f67509ba3c791ff104126f47e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is used when defining area this trap occupies.  <a href="structtrap.html#a8342e2f67509ba3c791ff104126f47e4">More...</a><br /></td></tr>
<tr class="separator:a8342e2f67509ba3c791ff104126f47e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9ac96c5c81eb31093e049ffeac8b4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a> () const</td></tr>
<tr class="memdesc:a6a9ac96c5c81eb31093e049ffeac8b4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this is the null-traps, aka no trap at all.  <a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">More...</a><br /></td></tr>
<tr class="separator:a6a9ac96c5c81eb31093e049ffeac8b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe3a3019275e719bc9d4d49f49560ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#affe3a3019275e719bc9d4d49f49560ec">load</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="structtrap.html#aa1358791b26c268a7b167421e458352e">src</a>)</td></tr>
<tr class="memdesc:affe3a3019275e719bc9d4d49f49560ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads this specific trap.  <a href="structtrap.html#affe3a3019275e719bc9d4d49f49560ec">More...</a><br /></td></tr>
<tr class="separator:affe3a3019275e719bc9d4d49f49560ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ec16974750f233639325a1a26c60af"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a03ec16974750f233639325a1a26c60af">debug_describe</a> () const</td></tr>
<tr class="separator:a03ec16974750f233639325a1a26c60af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Initialization</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Those functions are used by the <a class="el" href="classDynamicDataLoader.html">DynamicDataLoader</a>, see there. </p>
</div></td></tr>
<tr class="memitem:a12144546805827604a11ba0959805943"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a12144546805827604a11ba0959805943">load_trap</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;<a class="el" href="structtrap.html#aa1358791b26c268a7b167421e458352e">src</a>)</td></tr>
<tr class="memdesc:a12144546805827604a11ba0959805943"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the trap and adds it to the trapmap, and the traplist.  <a href="structtrap.html#a12144546805827604a11ba0959805943">More...</a><br /></td></tr>
<tr class="separator:a12144546805827604a11ba0959805943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3459bc15692baad14fa65b985251137f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a3459bc15692baad14fa65b985251137f">reset</a> ()</td></tr>
<tr class="memdesc:a3459bc15692baad14fa65b985251137f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the loaded trap objects in trapmap and traplist.  <a href="structtrap.html#a3459bc15692baad14fa65b985251137f">More...</a><br /></td></tr>
<tr class="separator:a3459bc15692baad14fa65b985251137f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cde54061e737d7f81c0a605cce70f0e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7cde54061e737d7f81c0a605cce70f0e">finalize</a> ()</td></tr>
<tr class="memdesc:a7cde54061e737d7f81c0a605cce70f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the actual <a class="el" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> of the loaded traps in the global tr_* variables.  <a href="structtrap.html#a7cde54061e737d7f81c0a605cce70f0e">More...</a><br /></td></tr>
<tr class="separator:a7cde54061e737d7f81c0a605cce70f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c0ca32b5c9badd2668fd9b5c7c91fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ad3c0ca32b5c9badd2668fd9b5c7c91fc">check_consistency</a> ()</td></tr>
<tr class="memdesc:ad3c0ca32b5c9badd2668fd9b5c7c91fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks internal consistency (reference to other things like item ids etc.)  <a href="structtrap.html#ad3c0ca32b5c9badd2668fd9b5c7c91fc">More...</a><br /></td></tr>
<tr class="separator:ad3c0ca32b5c9badd2668fd9b5c7c91fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d4f2d0ba3ca652e09d818843b7f49dd"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a4d4f2d0ba3ca652e09d818843b7f49dd">count</a> ()</td></tr>
<tr class="separator:a4d4f2d0ba3ca652e09d818843b7f49dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af4ff2a16113fc1dd7c53285c0f91c126"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#aaf07656eb0d8c6676fbb1849d92cfa26">trap_str_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a></td></tr>
<tr class="separator:af4ff2a16113fc1dd7c53285c0f91c126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1358791b26c268a7b167421e458352e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; <a class="el" href="type__id_8h.html#aaf07656eb0d8c6676fbb1849d92cfa26">trap_str_id</a>, <a class="el" href="type__id_8h.html#aabcbcb9fb77661ba75c47b6287318e03">mod_id</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#aa1358791b26c268a7b167421e458352e">src</a></td></tr>
<tr class="separator:aa1358791b26c268a7b167421e458352e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2767aee5179ad23b3ad0b6b4b2415af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a></td></tr>
<tr class="separator:ab2767aee5179ad23b3ad0b6b4b2415af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7515b4e5f59ad2a035e5030455bf3e62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a> = false</td></tr>
<tr class="separator:a7515b4e5f59ad2a035e5030455bf3e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975d50578595efdc3b93fb32bab0e41b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a975d50578595efdc3b93fb32bab0e41b">sym</a> = 0</td></tr>
<tr class="separator:a975d50578595efdc3b93fb32bab0e41b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92373743ed980b356de173c228c79499"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnc__color.html">nc_color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a92373743ed980b356de173c228c79499">color</a></td></tr>
<tr class="separator:a92373743ed980b356de173c228c79499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a204b98d9b542a70ab2781c13af441202"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfake__spell.html">fake_spell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a204b98d9b542a70ab2781c13af441202">spell_data</a></td></tr>
<tr class="separator:a204b98d9b542a70ab2781c13af441202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e32dc8e92c961fb52b3086421c62b8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">comfort</a> = 0</td></tr>
<tr class="separator:a9e32dc8e92c961fb52b3086421c62b8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0225c40a1174da35a613b1451f779e67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a93cd1578a96bdf194d4ec88eb50d904e">units::temperature_delta</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a0225c40a1174da35a613b1451f779e67">floor_bedding_warmth</a> = 0_C_delta</td></tr>
<tr class="separator:a0225c40a1174da35a613b1451f779e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03491b6455522e29bcbd457283b88c6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvehicle__handle__trap__data.html">vehicle_handle_trap_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a></td></tr>
<tr class="separator:a03491b6455522e29bcbd457283b88c6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7a862026cc04677a44a7d945c786edd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">trigger</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, <a class="el" href="classCreature.html">Creature</a> *<a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, <a class="el" href="classitem.html">item</a> *<a class="el" href="classitem.html">item</a>) const</td></tr>
<tr class="memdesc:a7a862026cc04677a44a7d945c786edd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger trap effects.  <a href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">More...</a><br /></td></tr>
<tr class="separator:a7a862026cc04677a44a7d945c786edd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0913f4b2535ae7fe8b5550b974b31a18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a> = 1</td></tr>
<tr class="memdesc:a0913f4b2535ae7fe8b5550b974b31a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">How easy it is to spot the trap.  <a href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">More...</a><br /></td></tr>
<tr class="separator:a0913f4b2535ae7fe8b5550b974b31a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd8117e839b760a9ffa187d3670f4ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">avoidance</a> = 0</td></tr>
<tr class="separator:a7dd8117e839b760a9ffa187d3670f4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf38effe374d03f39b3647a27e3c3a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> = 0</td></tr>
<tr class="separator:abbf38effe374d03f39b3647a27e3c3a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43fd5f8fec40e3bb6ca7e07fa7ae6b3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">trap_radius</a> = 0</td></tr>
<tr class="separator:a43fd5f8fec40e3bb6ca7e07fa7ae6b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10039a239822fb13066d9e61c82f5bf5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">benign</a> = false</td></tr>
<tr class="separator:a10039a239822fb13066d9e61c82f5bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af528369ecffbd6666b411fbbb466bc4e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#af528369ecffbd6666b411fbbb466bc4e">always_invisible</a> = false</td></tr>
<tr class="separator:af528369ecffbd6666b411fbbb466bc4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcaa7079f22ae4a94049e2c9ef74288"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a9703e9c28f208c9af0bee38564a5df0b">update_mapgen_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a9dcaa7079f22ae4a94049e2c9ef74288">map_regen</a></td></tr>
<tr class="separator:a9dcaa7079f22ae4a94049e2c9ef74288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b38533ac3a1c9c1f6a6844d0ee04a91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trap_8h.html#ae42e32fdf80c3174f94a4b2f02401473">trap_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a5b38533ac3a1c9c1f6a6844d0ee04a91">act</a></td></tr>
<tr class="separator:a5b38533ac3a1c9c1f6a6844d0ee04a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02fbeb44ab900ad347efe01ed6c6ffa0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtranslation.html">translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a02fbeb44ab900ad347efe01ed6c6ffa0">name_</a></td></tr>
<tr class="separator:a02fbeb44ab900ad347efe01ed6c6ffa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aab01ac905f9a67b9615524fbdb372b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">memorial_male</a></td></tr>
<tr class="separator:a8aab01ac905f9a67b9615524fbdb372b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8395d17975e4ff75551655927956120e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a8395d17975e4ff75551655927956120e">memorial_female</a></td></tr>
<tr class="separator:a8395d17975e4ff75551655927956120e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04866b832034fdc1af766e8af59a8ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ae04866b832034fdc1af766e8af59a8ea">trigger_message_u</a></td></tr>
<tr class="separator:ae04866b832034fdc1af766e8af59a8ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651463227d8f686d8b87a8fdc92b7db5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classtranslation.html">translation</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a651463227d8f686d8b87a8fdc92b7db5">trigger_message_npc</a></td></tr>
<tr class="separator:a651463227d8f686d8b87a8fdc92b7db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17431593aa1c217242800cb11ce59b18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1flat__set.html">cata::flat_set</a>&lt; <a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a17431593aa1c217242800cb11ce59b18">_flags</a></td></tr>
<tr class="separator:a17431593aa1c217242800cb11ce59b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8454e37107896cc58505a62dd6724e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">trigger_weight</a> = 500_gram</td></tr>
<tr class="memdesc:a5e8454e37107896cc58505a62dd6724e"><td class="mdescLeft">&#160;</td><td class="mdescRight">If an item with this weight or more is thrown onto the trap, it triggers.  <a href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">More...</a><br /></td></tr>
<tr class="separator:a5e8454e37107896cc58505a62dd6724e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8fcf2bc9d6746ef30f5f8a75ba765f3"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a> = {0, 0}</td></tr>
<tr class="memdesc:ae8fcf2bc9d6746ef30f5f8a75ba765f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines how much sound is needed to trigger the trap.  <a href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">More...</a><br /></td></tr>
<tr class="separator:ae8fcf2bc9d6746ef30f5f8a75ba765f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cea2683be1199ec40d943540d3a78ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">funnel_radius_mm</a> = 0</td></tr>
<tr class="separator:a2cea2683be1199ec40d943540d3a78ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdb4b9b037b1554a9bbf01b9db1f8387"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::tuple&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int, int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#abdb4b9b037b1554a9bbf01b9db1f8387">components</a></td></tr>
<tr class="separator:abdb4b9b037b1554a9bbf01b9db1f8387"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Funnels</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpf8d8e9b2f605b638e6c6b8c631d23c64"></a>Traps can act as funnels, for this they need a <a class="el" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">trap::funnel_radius_mm</a> &gt; 0.</p>
<p>Funnels are usual not hidden at all (<a class="el" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">trap::visibility</a> == 0), are <a class="el" href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">trap::benign</a> and can be picked up easily (<a class="el" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">trap::difficulty</a> == 0). The funnel filling is handled in <a class="el" href="weather_8cpp.html">weather.cpp</a>. is_funnel is used the check whether the funnel specific code should be run for this trap. </p>
</td></tr>
<tr class="memitem:a1df9fdf246ce84494eb68dcd6e59cb5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a1df9fdf246ce84494eb68dcd6e59cb5f">is_funnel</a> () const</td></tr>
<tr class="separator:a1df9fdf246ce84494eb68dcd6e59cb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf799ace26686fd97c953f49ecd94acbb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">funnel_turns_per_charge</a> (double rain_depth_mm_per_hour) const</td></tr>
<tr class="separator:gaf799ace26686fd97c953f49ecd94acbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da1f2f4955bb1cc23a32b880edad689"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a8da1f2f4955bb1cc23a32b880edad689">has_sound_trigger</a> () const</td></tr>
<tr class="separator:a8da1f2f4955bb1cc23a32b880edad689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a82fa60a84ac16cd22289bcae631d98"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a3a82fa60a84ac16cd22289bcae631d98">triggered_by_sound</a> (int vol, int dist) const</td></tr>
<tr class="separator:a3a82fa60a84ac16cd22289bcae631d98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffbc9e94465251d8486a7a7ff31e76c"><td class="memItemLeft" align="right" valign="top">static const std::vector&lt; const <a class="el" href="structtrap.html">trap</a> * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#afffbc9e94465251d8486a7a7ff31e76c">get_funnels</a> ()</td></tr>
<tr class="memdesc:afffbc9e94465251d8486a7a7ff31e76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all trap objects that are actually funnels (is_funnel returns true for all of them).  <a href="structtrap.html#afffbc9e94465251d8486a7a7ff31e76c">More...</a><br /></td></tr>
<tr class="separator:afffbc9e94465251d8486a7a7ff31e76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744ba139645a50bc69eb33703a43e337"><td class="memItemLeft" align="right" valign="top">static const std::vector&lt; const <a class="el" href="structtrap.html">trap</a> * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrap.html#a744ba139645a50bc69eb33703a43e337">get_sound_triggered_traps</a> ()</td></tr>
<tr class="separator:a744ba139645a50bc69eb33703a43e337"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Some traps aren't actually traps in the usual sense of the word. </p>
<p>We use traps to implement funnels (the main map keeps a list of traps and we iterate over that list during rain in order to fill the containers with water). Use <a class="el" href="structtrap.html#adc8f59b97597d373f7cb0bbcf061e794">is_benign</a> to check for that kind of "non-dangerous" traps. Traps that are not benign are considered dangerous.</p>
<p>Some traps are always invisible. They are never revealed as such to the player. They can still be triggered. Use <a class="el" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a> to check for that.</p>
<p>Traps names can be empty. This usually applies to always invisible traps.</p>
<p>Some traps are always revealed to the player (e.g. funnels). Other traps can be spotted when the player is close (also needs perception stat).</p>
<p>Use <a class="el" href="classmap.html#a2578f467596e13fb8631fd01126a9667">map::can_see_trap_at</a> or <a class="el" href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">trap::can_see</a> to check whether a creature knows about a given trap. Monsters / NPCs should base their behavior on that information and not on a simple check for any trap being there (e.g. don't use <code>map::tr_at(...).<a class="el" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f" title="Whether this is the null-traps, aka no trap at all.">is_null()</a></code> - that would reveal the existence of the trap). </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00109">109</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9325b1c5da75604d17041a178a32a4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9325b1c5da75604d17041a178a32a4f0">&#9670;&nbsp;</a></span>can_not_be_disarmed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::can_not_be_disarmed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Some traps are part of the terrain (e.g. </p>
<p>pits) and can therefore not be disarmed via the usual mechanics. They can be "disarmed" by changing the terrain they are part of. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00440">440</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> &gt;= 99;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="ttc" id="astructtrap_html_abbf38effe374d03f39b3647a27e3c3a7"><div class="ttname"><a href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">trap::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00134">trap.h:134</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00134">difficulty</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>.</p>

</div>
</div>
<a id="abeb5ff27f9f78475035f22aabdcfe834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb5ff27f9f78475035f22aabdcfe834">&#9670;&nbsp;</a></span>can_see()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::can_see </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can player/npc p see this kind of trap, either by their memory (they known there is the trap) or by the visibility of the trap (the trap is not hidden at all)? </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00320">320</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// There is no trap at all, so logically one can not see it.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a>() ) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a> &lt; 0 || p.<a class="code" href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">knows_trap</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7cf3a039fed01ee44525ea41940cb00d"><div class="ttname"><a href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">Character::knows_trap</a></div><div class="ttdeci">bool knows_trap(const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10700">character.cpp:10700</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="astructtrap_html_a0913f4b2535ae7fe8b5550b974b31a18"><div class="ttname"><a href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">trap::visibility</a></div><div class="ttdeci">int visibility</div><div class="ttdoc">How easy it is to spot the trap.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00126">trap.h:126</a></div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00366">trap.cpp:366</a></div></div>
<div class="ttc" id="astructtrap_html_aafab5c450397fa7ea6430a9334c2859c"><div class="ttname"><a href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">trap::is_always_invisible</a></div><div class="ttdeci">bool is_always_invisible() const</div><div class="ttdoc">There are special always invisible traps.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00172">trap.h:172</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00172">is_always_invisible()</a>, <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, <a class="el" href="character_8cpp_source.html#l10700">Character::knows_trap()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="trap_8h_source.html#l00126">visibility</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l07563">Character::adjacent_tile()</a>, <a class="el" href="character_8cpp_source.html#l12012">Character::avoid_trap()</a>, <a class="el" href="map_8cpp_source.html#l06208">map::can_see_trap_at()</a>, <a class="el" href="iuse_8cpp_source.html#l05715">colorized_trap_name_at()</a>, <a class="el" href="map_8cpp_source.html#l07104">map::draw_maptile()</a>, <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>, <a class="el" href="game_8cpp_source.html#l10433">game::get_dangerous_tile()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01218">vehicle::handle_trap()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00060">advanced_inv_area::init()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03807">place_trap_actor::is_allowed()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03849">place_and_add_as_known()</a>, <a class="el" href="game_8cpp_source.html#l06729">game::print_trap_info()</a>, and <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>.</p>

</div>
</div>
<a id="ad3c0ca32b5c9badd2668fd9b5c7c91fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c0ca32b5c9badd2668fd9b5c7c91fc">&#9670;&nbsp;</a></span>check_consistency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void trap::check_consistency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks internal consistency (reference to other things like item ids etc.) </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00423">423</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrap.html">trap</a> &amp;t : <a class="code" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">trap_factory</a>.get_all() ) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;i : t.components ) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;item_type = std::get&lt;0&gt;( i );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( item_type ) ) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;trap %s has unknown item as component %s&quot;</span>, t.id.str(), item_type.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a4c54ded219374a2f5f80e8eee192dcdf"><div class="ttname"><a href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a></div><div class="ttdeci">static bool type_is_defined(const itype_id &amp;id)</div><div class="ttdoc">Check whether the type id refers to a known type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14576">item.cpp:14576</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02trap_8cpp_03_html_a1c896103efb8cfa33089e20350d7e2e7"><div class="ttname"><a href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a></div><div class="ttdeci">generic_factory&lt; trap &gt; trap_factory(&quot;trap&quot;)</div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdoc">Some traps aren't actually traps in the usual sense of the word.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00109">trap.h:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a>, and <a class="el" href="item_8cpp_source.html#l14576">item::type_is_defined()</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00782">DynamicDataLoader::check_consistency()</a>.</p>

</div>
</div>
<a id="a4d4f2d0ba3ca652e09d818843b7f49dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d4f2d0ba3ca652e09d818843b7f49dd">&#9670;&nbsp;</a></span>count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t trap::count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00127">127</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">trap_factory</a>.size();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00241">map::map()</a>.</p>

</div>
</div>
<a id="a03ec16974750f233639325a1a26c60af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03ec16974750f233639325a1a26c60af">&#9670;&nbsp;</a></span>debug_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string trap::debug_describe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00462">462</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Visible: %d\nAvoidance: %d\nDifficulty: %d\nBenign: %s&quot;</span> ), <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a>,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                          <a class="code" href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">avoidance</a>, <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a>, <a class="code" href="structtrap.html#adc8f59b97597d373f7cb0bbcf061e794">is_benign</a>() ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yes&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No&quot;</span> ) );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructtrap_html_a7dd8117e839b760a9ffa187d3670f4ed"><div class="ttname"><a href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">trap::avoidance</a></div><div class="ttdeci">int avoidance</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00128">trap.h:128</a></div></div>
<div class="ttc" id="astructtrap_html_adc8f59b97597d373f7cb0bbcf061e794"><div class="ttname"><a href="structtrap.html#adc8f59b97597d373f7cb0bbcf061e794">trap::is_benign</a></div><div class="ttdeci">bool is_benign() const</div><div class="ttdoc">If true, this is not really a trap and there won't be any safety queries before stepping onto it (e....</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00221">trap.h:221</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="trap_8h_source.html#l00128">avoidance</a>, <a class="el" href="trap_8h_source.html#l00134">difficulty</a>, <a class="el" href="trap_8h_source.html#l00221">is_benign()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="trap_8h_source.html#l00126">visibility</a>.</p>

</div>
</div>
<a id="afefc8440f9684bc6694c3c14dc59a727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afefc8440f9684bc6694c3c14dc59a727">&#9670;&nbsp;</a></span>detect_trap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::detect_trap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Player has not yet seen the trap and returns the variable chance, at this moment, of whether the trap is seen or not. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00265">265</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// * Buried landmines, the silent killer, have a visibility of 10.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Assuming no knowledge of traps or proficiencies, and average per/int (8 each),</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// most characters will get a mean_roll of 6.5 against a trap that is one tile away.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// With a std deviation of 3, that leaves a ~12% chance of spotting a landmine when you are next to it (per turn).</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// This gets worse if you are sleep deprived, or can&#39;t see as well.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Obviously it rapidly gets better as your skills improve, with most of the improvement coming from proficiencies.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// Devices skill is helpful for spotting traps</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> traps_skill_level = p.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="trap_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a> );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// Perception is the main stat for spotting traps, int helps a bit.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// In this case, stats are more important than skills.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> weighted_stat_average = ( 4.0f * p.<a class="code" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> + p.<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> ) / 5.0f;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Eye encumbrance will penalize spotting</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> encumbrance_penalty = p.<a class="code" href="classCharacter.html#aef9cb6bfa6f5446ffbdf160e18ffdb86">encumb</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;eyes&quot;</span> ) ) / 10.0f;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// The further away the trap is, the harder it is to spot.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Subtract 1 so that we don&#39;t get an unfair penalty when not quite on top of the trap.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> distance_penalty = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( p.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) - 1;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">int</span> proficiency_effect = -1;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// Without at least a basic traps proficiency, your skill level is effectively three levels lower.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="trap_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a> ) ) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        proficiency_effect += 1;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// If you have the basic traps prof, negate the above penalty</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="trap_8cpp.html#ab26bd7eb4aa388fe47209f9014a68f62">proficiency_prof_spotting</a> ) ) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        proficiency_effect += 3;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// If you have the spotting proficiency, add a whopping 9 effective skill levels.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="trap_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a> ) ) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        proficiency_effect += 1;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="comment">// Knowing how to set effective traps gives you a considerable bonus to spotting them as well.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// For every 1000 points of sleep deprivation, reduce your roll by 1.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// As of this writing, sleep deprivation passively increases at the rate of 1 point per minute.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> sleepiness_penalty = p.<a class="code" href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">get_sleep_deprivation</a>() / 1000.0f;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> mean_roll = weighted_stat_average + ( traps_skill_level / 3.0f ) +</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                            proficiency_effect - distance_penalty - sleepiness_penalty - encumbrance_penalty;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> roll = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="rng_8cpp.html#a3a6a7e6245951426223e02f989bdd6a4">normal_roll</a>( mean_roll, 3 ) );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aef66c859d4dc6b5575c1b64398852cf0">debugmode::DF_CHARACTER</a>,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                   <span class="stringliteral">&quot;Character %s rolling to detect trap %s. Actual roll: %i, average roll: %f, roll required to detect: %i.&quot;</span>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                   p.<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(), <a class="code" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), roll, mean_roll, <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a> );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> roll &gt; <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00032">bodypart.h:32</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72472dd1bc3a1fba8b053682ae5a2244"><div class="ttname"><a href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">Character::has_proficiency</a></div><div class="ttdeci">bool has_proficiency(const proficiency_id &amp;prof) const</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00019">character_proficiency.cpp:19</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00579">character.h:579</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab2db9a91b7251e1ca4c1735c9cc2bf52"><div class="ttname"><a href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">Character::get_sleep_deprivation</a></div><div class="ttdeci">int get_sleep_deprivation() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04609">character.cpp:4609</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad8a2bb942a756787aced3b83319176ff"><div class="ttname"><a href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">Character::per_cur</a></div><div class="ttdeci">int per_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00580">character.h:580</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_aef9cb6bfa6f5446ffbdf160e18ffdb86"><div class="ttname"><a href="classCharacter.html#aef9cb6bfa6f5446ffbdf160e18ffdb86">Character::encumb</a></div><div class="ttdeci">int encumb(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns ENC provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04046">character.cpp:4046</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2aef66c859d4dc6b5575c1b64398852cf0"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aef66c859d4dc6b5575c1b64398852cf0">debugmode::DF_CHARACTER</a></div><div class="ttdeci">@ DF_CHARACTER</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00250">debug.h:250</a></div></div>
<div class="ttc" id="arng_8cpp_html_a3a6a7e6245951426223e02f989bdd6a4"><div class="ttname"><a href="rng_8cpp.html#a3a6a7e6245951426223e02f989bdd6a4">normal_roll</a></div><div class="ttdeci">double normal_roll(double mean, double stddev)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00078">rng.cpp:78</a></div></div>
<div class="ttc" id="astructtrap_html_a01b0ef8443ac5ba4e7455880ca2dc44b"><div class="ttname"><a href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">trap::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00228">trap.cpp:228</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a2771ba40119675f04bcbf7651be1aed6"><div class="ttname"><a href="trap_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_trapsetting(&quot;prof_trapsetting&quot;)</div></div>
<div class="ttc" id="atrap_8cpp_html_a9353c39452c59a433c7c4c301386e91f"><div class="ttname"><a href="trap_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a></div><div class="ttdeci">static const skill_id skill_traps(&quot;traps&quot;)</div></div>
<div class="ttc" id="atrap_8cpp_html_ab26bd7eb4aa388fe47209f9014a68f62"><div class="ttname"><a href="trap_8cpp.html#ab26bd7eb4aa388fe47209f9014a68f62">proficiency_prof_spotting</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_spotting(&quot;prof_spotting&quot;)</div></div>
<div class="ttc" id="atrap_8cpp_html_ad31a1a0c6c31e108afecb4d49bdc03bd"><div class="ttname"><a href="trap_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_traps(&quot;prof_traps&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="debug_8h_source.html#l00250">debugmode::DF_CHARACTER</a>, <a class="el" href="character_8cpp_source.html#l04046">Character::encumb()</a>, <a class="el" href="character_8cpp_source.html#l05731">Character::get_name()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l04609">Character::get_sleep_deprivation()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00019">Character::has_proficiency()</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="trap_8cpp_source.html#l00228">name()</a>, <a class="el" href="rng_8cpp_source.html#l00078">normal_roll()</a>, <a class="el" href="character_8h_source.html#l00580">Character::per_cur</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="trap_8cpp.html#ab26bd7eb4aa388fe47209f9014a68f62">proficiency_prof_spotting</a>, <a class="el" href="trap_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a>, <a class="el" href="trap_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="trap_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, and <a class="el" href="trap_8h_source.html#l00126">visibility</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>.</p>

</div>
</div>
<a id="a9fb79cdedc0f01eae32ff5b0eee3b0ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb79cdedc0f01eae32ff5b0eee3b0ff">&#9670;&nbsp;</a></span>detected_by_echolocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::detected_by_echolocation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether this kind of trap will be detected by regular sonar ( it is not buried and it's a solid object ). </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00260">260</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7e4cdf3b26a6dae70dd4f078680531a8">has_flag</a>( <a class="code" href="trap_8cpp.html#a7a5cc6e3b52cc05c75c8bb8158298d93">json_flag_ECHOLOCATION_DETECTABLE</a> );</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="ttc" id="astructtrap_html_a7e4cdf3b26a6dae70dd4f078680531a8"><div class="ttname"><a href="structtrap.html#a7e4cdf3b26a6dae70dd4f078680531a8">trap::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00183">trap.h:183</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a7a5cc6e3b52cc05c75c8bb8158298d93"><div class="ttname"><a href="trap_8cpp.html#a7a5cc6e3b52cc05c75c8bb8158298d93">json_flag_ECHOLOCATION_DETECTABLE</a></div><div class="ttdeci">static const flag_id json_flag_ECHOLOCATION_DETECTABLE(&quot;ECHOLOCATION_DETECTABLE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00183">has_flag()</a>, and <a class="el" href="trap_8cpp.html#a7a5cc6e3b52cc05c75c8bb8158298d93">json_flag_ECHOLOCATION_DETECTABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l10561">Character::echo_pulse()</a>.</p>

</div>
</div>
<a id="af93e0b8182db7c9d25654a32ae4b86be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af93e0b8182db7c9d25654a32ae4b86be">&#9670;&nbsp;</a></span>detected_by_ground_sonar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::detected_by_ground_sonar </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether this kind of trap will be detected by ground sonar (e.g. </p>
<p>via the bionic). </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00252">252</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7e4cdf3b26a6dae70dd4f078680531a8">has_flag</a>( <a class="code" href="trap_8cpp.html#af6237465e07f168afbdf3f2eeafe7e15">json_flag_SONAR_DETECTABLE</a> );</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div>
<div class="ttc" id="atrap_8cpp_html_af6237465e07f168afbdf3f2eeafe7e15"><div class="ttname"><a href="trap_8cpp.html#af6237465e07f168afbdf3f2eeafe7e15">json_flag_SONAR_DETECTABLE</a></div><div class="ttdeci">static const flag_id json_flag_SONAR_DETECTABLE(&quot;SONAR_DETECTABLE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00183">has_flag()</a>, and <a class="el" href="trap_8cpp.html#af6237465e07f168afbdf3f2eeafe7e15">json_flag_SONAR_DETECTABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>.</p>

</div>
</div>
<a id="a45a8812efed086442e3e13ca36e50c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a8812efed086442e3e13ca36e50c1d">&#9670;&nbsp;</a></span>easy_take_down()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::easy_take_down </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>True for traps that can simply be taken down without any skill check or similar. This usually applies to traps like funnels, rollmat. </dd></dl>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00435">435</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">avoidance</a> == 0 &amp;&amp; <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> == 0;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00128">avoidance</a>, and <a class="el" href="trap_8h_source.html#l00134">difficulty</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>.</p>

</div>
</div>
<a id="a10939455022c6811948587a1d431155d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10939455022c6811948587a1d431155d">&#9670;&nbsp;</a></span>examine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::examine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when the player examines a tile. </p>
<p>This is supposed to handled all kind of interaction of the player with the trap, including removal. It also handles visibility of the trap, and it does nothing when called on the null trap. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04535">4535</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;{</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    <span class="comment">// If the player can&#39;t see the trap, they can&#39;t interact with it.</span></div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">can_see</a>( examp, player_character ) ) {</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    }</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160; </div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    }</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160; </div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#a9325b1c5da75604d17041a178a32a4f0">can_not_be_disarmed</a>() ) {</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;        <span class="keywordflow">if</span>( <span class="keywordtype">id</span> != <a class="code" href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a> ) {</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s looks too dangerous to mess with.  Best leave it alone.&quot;</span> ), <a class="code" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>() );</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;        }</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    }</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="comment">// Some traps are not actual traps. Those should get a different query, no skill checks, and the option to grab it right away.</span></div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;    <span class="comment">// If there is a telepad and we are anchored, there is no risk involved in disarming it also.</span></div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#a45a8812efed086442e3e13ca36e50c1d">easy_take_down</a>() || ( <span class="keywordtype">id</span> == <a class="code" href="trap_8cpp.html#a46c5d5849ba6e179da01f4cf38fd5b17">tr_telepad</a> &amp;&amp;</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;                              player_character.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>(</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;                                  <a class="code" href="flag_8cpp.html#a33ed86d72888dab961b45fbeffc32897">flag_DIMENSIONAL_ANCHOR</a> ) ) ) { <span class="comment">// Separated so saying no doesn&#39;t trigger the other query.</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is a %s there.  Take down?&quot;</span> ), <a class="code" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>() ) ) {</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        }</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is taken down.&quot;</span> ), <a class="code" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>() );</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;        <a class="code" href="structtrap.html#aa6b4fcf67a39a8ca75ac910055bb99c6">on_disarmed</a>( here, examp );</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    }</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160; </div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is a %s there.  Disarm?&quot;</span> ), <a class="code" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>() ) ) {</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> traps_skill_level = player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a> );</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> traps_knowledge_level = player_character.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( <a class="code" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a> );</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> weighted_stat_average = ( 2.0f * player_character.<a class="code" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> + 3.0f *</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;                                              player_character.<a class="code" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> +</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;                                              player_character.<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> ) / 6.0f;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;        <span class="keywordtype">int</span> proficiency_effect = -2;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;        <span class="comment">// Without at least a basic traps proficiency, your skill level is effectively 2 levels lower.</span></div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iexamine_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a> ) ) {</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;            proficiency_effect = 0;</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;            <span class="comment">// If you have the basic traps prof, negate the above penalty</span></div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;        }</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a3a3bfa368c00e5241458f5313ec7831a">proficiency_prof_disarming</a> ) ) {</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;            proficiency_effect = 4;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;            <span class="comment">// If you have the disarming proficiency, your skill level is effectively 4 levels higher.</span></div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;        }</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a> ) ) {</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;            proficiency_effect += 1;</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;            <span class="comment">// Knowing how to set traps does give you a small bonus to disarming them as well, regardless of your other bonuses.</span></div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;        }</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> mean_roll = ( ( traps_skill_level + traps_knowledge_level ) / 2 ) +</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;                                ( weighted_stat_average / 4.0f ) + proficiency_effect;</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160; </div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        <span class="keywordtype">int</span> roll = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="rng_8cpp.html#a3a6a7e6245951426223e02f989bdd6a4">normal_roll</a>( mean_roll, 3 ) );</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160; </div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a>, <span class="stringliteral">&quot;Rolled %i, mean_roll %g. difficulty %i.&quot;</span>, roll,</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;                       mean_roll, <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> );</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160; </div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;        <span class="comment">//Difficulty 0 traps should succeed regardless of proficiencies. (i.e caltrops and nailboards)</span></div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;        <span class="keywordflow">if</span>( roll &gt;= <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> || <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> == 0 ) {</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You disarm the trap!&quot;</span> ) );</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;            <a class="code" href="structtrap.html#aa6b4fcf67a39a8ca75ac910055bb99c6">on_disarmed</a>( here, examp );</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> &gt; 1.25 * traps_skill_level ) { <span class="comment">// failure might have set off trap</span></div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;                player_character.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, 1.5 * ( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> - traps_skill_level ) );</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;            }</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( roll &gt;= ( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> * .8 ) ) {</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fail to disarm the trap.&quot;</span> ) );</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> &gt; 1.25 * traps_skill_level ) {</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;                player_character.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, 1.5 * ( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> - traps_skill_level ) );</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;            }</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fail to disarm the trap, and you set it off!&quot;</span> ) );</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;            <a class="code" href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">trigger</a>( examp, player_character );</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> - roll &lt;= 6 ) {</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;                <span class="comment">// Give xp for failing, but not if we failed terribly (in which</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;                <span class="comment">// case the trap may not be disarmable).</span></div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;                player_character.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, 2 * <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> );</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;            }</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;        }</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;        <span class="comment">//Picking up bubble wrap continuously could powerlevel trap proficiencies, with no risk involved.</span></div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> != 0 ) {</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;            player_character.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="iexamine_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a>, 5_minutes );</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;            <span class="comment">// Disarming a trap gives you a token bonus to learning to set them properly.</span></div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;            player_character.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a>, 30_seconds );</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;            player_character.<a class="code" href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">practice_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a3a3bfa368c00e5241458f5313ec7831a">proficiency_prof_disarming</a>, 5_minutes );</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;        }</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160; </div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;    }</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassCharacter_html_a35e813323d0b9a1754cb6fdb078aafa2"><div class="ttname"><a href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">Character::cant_do_mounted</a></div><div class="ttdeci">bool cant_do_mounted(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01720">character.cpp:1720</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00578">character.h:578</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4226b37a0e4383461e0fd072586a394a"><div class="ttname"><a href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">Character::get_knowledge_level</a></div><div class="ttdeci">int get_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03441">character.cpp:3441</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6535a02158a1d6b23b0a6bb623dfae19"><div class="ttname"><a href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">Character::practice</a></div><div class="ttdeci">bool practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02683">character.cpp:2683</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa376cb5765a50c43ee63c4a3b151832e"><div class="ttname"><a href="classCharacter.html#aa376cb5765a50c43ee63c4a3b151832e">Character::practice_proficiency</a></div><div class="ttdeci">bool practice_proficiency(const proficiency_id &amp;prof, const time_duration &amp;amount, const std::optional&lt; time_duration &gt; &amp;max=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00071">character_proficiency.cpp:71</a></div></div>
<div class="ttc" id="aclassCharacter_html_addcf2c54cf8c3920f66328e2441830fb"><div class="ttname"><a href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00548">character_attire.cpp:548</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a33ed86d72888dab961b45fbeffc32897"><div class="ttname"><a href="flag_8cpp.html#a33ed86d72888dab961b45fbeffc32897">flag_DIMENSIONAL_ANCHOR</a></div><div class="ttdeci">const flag_id flag_DIMENSIONAL_ANCHOR(&quot;DIMENSIONAL_ANCHOR&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2771ba40119675f04bcbf7651be1aed6"><div class="ttname"><a href="iexamine_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_trapsetting(&quot;prof_trapsetting&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3a3bfa368c00e5241458f5313ec7831a"><div class="ttname"><a href="iexamine_8cpp.html#a3a3bfa368c00e5241458f5313ec7831a">proficiency_prof_disarming</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_disarming(&quot;prof_disarming&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9353c39452c59a433c7c4c301386e91f"><div class="ttname"><a href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a></div><div class="ttdeci">static const skill_id skill_traps(&quot;traps&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad31a1a0c6c31e108afecb4d49bdc03bd"><div class="ttname"><a href="iexamine_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_traps(&quot;prof_traps&quot;)</div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a></div><div class="ttdeci">@ DF_IEXAMINE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00259">debug.h:259</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="astructtrap_html_a45a8812efed086442e3e13ca36e50c1d"><div class="ttname"><a href="structtrap.html#a45a8812efed086442e3e13ca36e50c1d">trap::easy_take_down</a></div><div class="ttdeci">bool easy_take_down() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00435">trap.cpp:435</a></div></div>
<div class="ttc" id="astructtrap_html_a7a862026cc04677a44a7d945c786edd0"><div class="ttname"><a href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">trap::trigger</a></div><div class="ttdeci">void trigger(const tripoint &amp;pos, Creature *creature, item *item) const</div><div class="ttdoc">Trigger trap effects.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00350">trap.cpp:350</a></div></div>
<div class="ttc" id="astructtrap_html_a9325b1c5da75604d17041a178a32a4f0"><div class="ttname"><a href="structtrap.html#a9325b1c5da75604d17041a178a32a4f0">trap::can_not_be_disarmed</a></div><div class="ttdeci">bool can_not_be_disarmed() const</div><div class="ttdoc">Some traps are part of the terrain (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00440">trap.cpp:440</a></div></div>
<div class="ttc" id="astructtrap_html_aa6b4fcf67a39a8ca75ac910055bb99c6"><div class="ttname"><a href="structtrap.html#aa6b4fcf67a39a8ca75ac910055bb99c6">trap::on_disarmed</a></div><div class="ttdeci">void on_disarmed(map &amp;m, const tripoint &amp;p) const</div><div class="ttdoc">Called when a trap at the given point in the map has been disarmed.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00406">trap.cpp:406</a></div></div>
<div class="ttc" id="astructtrap_html_abeb5ff27f9f78475035f22aabdcfe834"><div class="ttname"><a href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">trap::can_see</a></div><div class="ttdeci">bool can_see(const tripoint &amp;pos, const Character &amp;p) const</div><div class="ttdoc">Can player/npc p see this kind of trap, either by their memory (they known there is the trap) or by t...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00320">trap.cpp:320</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a46c5d5849ba6e179da01f4cf38fd5b17"><div class="ttname"><a href="trap_8cpp.html#a46c5d5849ba6e179da01f4cf38fd5b17">tr_telepad</a></div><div class="ttdeci">const trap_str_id tr_telepad(&quot;tr_telepad&quot;)</div></div>
<div class="ttc" id="atrap_8cpp_html_a9d7e5dc72cb6e99095b4cb3d0d26ecd4"><div class="ttname"><a href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a></div><div class="ttdeci">const trap_str_id tr_ledge(&quot;tr_ledge&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="trap_8cpp_source.html#l00440">can_not_be_disarmed()</a>, <a class="el" href="trap_8cpp_source.html#l00320">can_see()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="character_8h_source.html#l00578">Character::dex_cur</a>, <a class="el" href="debug_8h_source.html#l00259">debugmode::DF_IEXAMINE</a>, <a class="el" href="trap_8h_source.html#l00134">difficulty</a>, <a class="el" href="trap_8cpp_source.html#l00435">easy_take_down()</a>, <a class="el" href="flag_8cpp.html#a33ed86d72888dab961b45fbeffc32897">flag_DIMENSIONAL_ANCHOR</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="character_8cpp_source.html#l03441">Character::get_knowledge_level()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00019">Character::has_proficiency()</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="trap_8cpp_source.html#l00228">name()</a>, <a class="el" href="rng_8cpp_source.html#l00078">normal_roll()</a>, <a class="el" href="trap_8cpp_source.html#l00406">on_disarmed()</a>, <a class="el" href="character_8h_source.html#l00580">Character::per_cur</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00071">Character::practice_proficiency()</a>, <a class="el" href="iexamine_8cpp.html#a3a3bfa368c00e5241458f5313ec7831a">proficiency_prof_disarming</a>, <a class="el" href="iexamine_8cpp.html#ad31a1a0c6c31e108afecb4d49bdc03bd">proficiency_prof_traps</a>, <a class="el" href="iexamine_8cpp.html#a2771ba40119675f04bcbf7651be1aed6">proficiency_prof_trapsetting</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="iexamine_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, <a class="el" href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a>, <a class="el" href="trap_8cpp.html#a46c5d5849ba6e179da01f4cf38fd5b17">tr_telepad</a>, <a class="el" href="trap_8cpp_source.html#l00350">trigger()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>.</p>

</div>
</div>
<a id="a7cde54061e737d7f81c0a605cce70f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cde54061e737d7f81c0a605cce70f0e">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void trap::finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores the actual <a class="el" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> of the loaded traps in the global tr_* variables. </p>
<p>It also sets the trap ids of the terrain types that have built-in traps. Must be called after all traps have been loaded. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00445">445</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrap.html">trap</a> &amp;t_const : <a class="code" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">trap_factory</a>.get_all() ) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="structtrap.html">trap</a> &amp;t = <span class="keyword">const_cast&lt;</span><a class="code" href="structtrap.html">trap</a> &amp;<span class="keyword">&gt;</span>( t_const );</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// We need to set int ids manually now</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        t.<a class="code" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> = t.<a class="code" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span>( t.<a class="code" href="structtrap.html#a1df9fdf246ce84494eb68dcd6e59cb5f">is_funnel</a>() ) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <a class="code" href="trap_8cpp.html#a8149ff482a37aa5d47ca76e6ad3f54b7">funnel_traps</a>.push_back( &amp;t );</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span>( t.<a class="code" href="structtrap.html#a8da1f2f4955bb1cc23a32b880edad689">has_sound_trigger</a>() ) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <a class="code" href="trap_8cpp.html#a84bb10a20abc66ee67b5c51d792c144e">sound_triggered_traps</a>.push_back( &amp;t );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="trap_8cpp.html#a7b8e40eb2b50e3841e2d9f2d0531226a">tr_null</a> = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">trap_str_id::NULL_ID</a>().<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; trap &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; trap &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="astructtrap_html_a1df9fdf246ce84494eb68dcd6e59cb5f"><div class="ttname"><a href="structtrap.html#a1df9fdf246ce84494eb68dcd6e59cb5f">trap::is_funnel</a></div><div class="ttdeci">bool is_funnel() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00376">trap.cpp:376</a></div></div>
<div class="ttc" id="astructtrap_html_a8da1f2f4955bb1cc23a32b880edad689"><div class="ttname"><a href="structtrap.html#a8da1f2f4955bb1cc23a32b880edad689">trap::has_sound_trigger</a></div><div class="ttdeci">bool has_sound_trigger() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00381">trap.cpp:381</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00112">trap.h:112</a></div></div>
<div class="ttc" id="astructtrap_html_af4ff2a16113fc1dd7c53285c0f91c126"><div class="ttname"><a href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">trap::id</a></div><div class="ttdeci">trap_str_id id</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00110">trap.h:110</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a7b8e40eb2b50e3841e2d9f2d0531226a"><div class="ttname"><a href="trap_8cpp.html#a7b8e40eb2b50e3841e2d9f2d0531226a">tr_null</a></div><div class="ttdeci">trap_id tr_null</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00421">trap.cpp:421</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a8149ff482a37aa5d47ca76e6ad3f54b7"><div class="ttname"><a href="trap_8cpp.html#a8149ff482a37aa5d47ca76e6ad3f54b7">funnel_traps</a></div><div class="ttdeci">static std::vector&lt; const trap * &gt; funnel_traps</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00113">trap.cpp:113</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a84bb10a20abc66ee67b5c51d792c144e"><div class="ttname"><a href="trap_8cpp.html#a84bb10a20abc66ee67b5c51d792c144e">sound_triggered_traps</a></div><div class="ttdeci">static std::vector&lt; const trap * &gt; sound_triggered_traps</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00120">trap.cpp:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00113">funnel_traps</a>, <a class="el" href="trap_8cpp_source.html#l00381">has_sound_trigger()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00054">string_id&lt; T &gt;::id()</a>, <a class="el" href="trap_8h_source.html#l00110">id</a>, <a class="el" href="trap_8cpp_source.html#l00376">is_funnel()</a>, <a class="el" href="trap_8h_source.html#l00112">loadid</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; trap &gt;::NULL_ID()</a>, <a class="el" href="trap_8cpp_source.html#l00120">sound_triggered_traps</a>, <a class="el" href="trap_8cpp_source.html#l00421">tr_null</a>, and <a class="el" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00677">DynamicDataLoader::finalize_loaded_data()</a>.</p>

</div>
</div>
<a id="a2a6aca9abdabfc0381ca8e3438da9e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a6aca9abdabfc0381ca8e3438da9e84">&#9670;&nbsp;</a></span>get_avoidance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::get_avoidance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether triggering the trap can be avoid (if greater than 0) and if so, this is compared to dodge skill (with some adjustments). </p>
<p>Smaller values means it's easier to dodge. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00214">214</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                  {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">avoidance</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00128">avoidance</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l12012">Character::avoid_trap()</a>, and <a class="el" href="monster_8cpp_source.html#l01186">monster::avoid_trap()</a>.</p>

</div>
</div>
<a id="afffbc9e94465251d8486a7a7ff31e76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffbc9e94465251d8486a7a7ff31e76c">&#9670;&nbsp;</a></span>get_funnels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; const <a class="el" href="structtrap.html">trap</a> * &gt; &amp; trap::get_funnels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns all trap objects that are actually funnels (is_funnel returns true for all of them). </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00115">115</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="trap_8cpp.html#a8149ff482a37aa5d47ca76e6ad3f54b7">funnel_traps</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00113">funnel_traps</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00357">fill_water_collectors()</a>.</p>

</div>
</div>
<a id="a744ba139645a50bc69eb33703a43e337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744ba139645a50bc69eb33703a43e337">&#9670;&nbsp;</a></span>get_sound_triggered_traps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; const <a class="el" href="structtrap.html">trap</a> * &gt; &amp; trap::get_sound_triggered_traps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00122">122</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="trap_8cpp.html#a84bb10a20abc66ee67b5c51d792c144e">sound_triggered_traps</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00120">sound_triggered_traps</a>.</p>

<p class="reference">Referenced by <a class="el" href="sounds_8cpp_source.html#l00472">sounds::process_sounds()</a>.</p>

</div>
</div>
<a id="a8342e2f67509ba3c791ff104126f47e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8342e2f67509ba3c791ff104126f47e4">&#9670;&nbsp;</a></span>get_trap_radius()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::get_trap_radius </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is used when defining area this trap occupies. </p>
<p>A value of 0 means trap occupies exactly 1 tile. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00312">312</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                    {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">trap_radius</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_a43fd5f8fec40e3bb6ca7e07fa7ae6b3f"><div class="ttname"><a href="structtrap.html#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">trap::trap_radius</a></div><div class="ttdeci">int trap_radius</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00136">trap.h:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00136">trap_radius</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__actor_8cpp_source.html#l03859">place_trap_actor::use()</a>.</p>

</div>
</div>
<a id="ab80ccab2e5909209a56a81555d3863f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab80ccab2e5909209a56a81555d3863f2">&#9670;&nbsp;</a></span>get_trigger_message_npc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string trap::get_trigger_message_npc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints a trap-specific trigger message when NPC or a monster steps on it. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00267">267</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                                  {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a651463227d8f686d8b87a8fdc92b7db5">trigger_message_npc</a>-&gt;translated();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_a651463227d8f686d8b87a8fdc92b7db5"><div class="ttname"><a href="structtrap.html#a651463227d8f686d8b87a8fdc92b7db5">trap::trigger_message_npc</a></div><div class="ttdeci">std::optional&lt; translation &gt; trigger_message_npc</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00147">trap.h:147</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00147">trigger_message_npc</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, and <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>.</p>

</div>
</div>
<a id="a7e9bc5805568828afc9a8e56b11a1065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9bc5805568828afc9a8e56b11a1065">&#9670;&nbsp;</a></span>get_trigger_message_u()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string trap::get_trigger_message_u </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints a trap-specific trigger message when player steps on it. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00261">261</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                                {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#ae04866b832034fdc1af766e8af59a8ea">trigger_message_u</a>-&gt;translated();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_ae04866b832034fdc1af766e8af59a8ea"><div class="ttname"><a href="structtrap.html#ae04866b832034fdc1af766e8af59a8ea">trap::trigger_message_u</a></div><div class="ttdeci">std::optional&lt; translation &gt; trigger_message_u</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00146">trap.h:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00146">trigger_message_u</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, and <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>.</p>

</div>
</div>
<a id="a7e4cdf3b26a6dae70dd4f078680531a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e4cdf3b26a6dae70dd4f078680531a8">&#9670;&nbsp;</a></span>has_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::has_flag </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a> &amp;&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00183">183</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                   {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a17431593aa1c217242800cb11ce59b18">_flags</a>.count( flag );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_a17431593aa1c217242800cb11ce59b18"><div class="ttname"><a href="structtrap.html#a17431593aa1c217242800cb11ce59b18">trap::_flags</a></div><div class="ttdeci">cata::flat_set&lt; flag_id &gt; _flags</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00149">trap.h:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00149">_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="trapfunc_8cpp_source.html#l01556">trapfunc::cast_spell()</a>, <a class="el" href="construction_8cpp_source.html#l01276">construct::check_support_below()</a>, <a class="el" href="map_8cpp_source.html#l09887">map::creature_on_trap()</a>, <a class="el" href="trap_8cpp_source.html#l00260">detected_by_echolocation()</a>, <a class="el" href="trap_8cpp_source.html#l00252">detected_by_ground_sonar()</a>, <a class="el" href="game_8cpp_source.html#l01687">get_convection_temperature()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>, and <a class="el" href="magic__ter__fur__transform_8cpp_source.html#l00216">ter_furn_transform::transform()</a>.</p>

</div>
</div>
<a id="a20d8d91c648be5b56d85040cdef6fd8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d8d91c648be5b56d85040cdef6fd8c">&#9670;&nbsp;</a></span>has_memorial_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::has_memorial_msg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00187">187</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                      {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">memorial_male</a> &amp;&amp; <a class="code" href="structtrap.html#a8395d17975e4ff75551655927956120e">memorial_female</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_a8395d17975e4ff75551655927956120e"><div class="ttname"><a href="structtrap.html#a8395d17975e4ff75551655927956120e">trap::memorial_female</a></div><div class="ttdeci">std::optional&lt; translation &gt; memorial_female</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00144">trap.h:144</a></div></div>
<div class="ttc" id="astructtrap_html_a8aab01ac905f9a67b9615524fbdb372b"><div class="ttname"><a href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">trap::memorial_male</a></div><div class="ttdeci">std::optional&lt; translation &gt; memorial_male</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00143">trap.h:143</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00144">memorial_female</a>, and <a class="el" href="trap_8h_source.html#l00143">memorial_male</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorial__logger_8cpp_source.html#l00424">memorial_logger::notify()</a>.</p>

</div>
</div>
<a id="a8da1f2f4955bb1cc23a32b880edad689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da1f2f4955bb1cc23a32b880edad689">&#9670;&nbsp;</a></span>has_sound_trigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::has_sound_trigger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00381">381</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_sound_thresh = <a class="code" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a>.first &gt; 0 &amp;&amp; <a class="code" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a>.second &gt; 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() &amp;&amp; has_sound_thresh;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="ttc" id="astructtrap_html_ae8fcf2bc9d6746ef30f5f8a75ba765f3"><div class="ttname"><a href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">trap::sound_threshold</a></div><div class="ttdeci">std::pair&lt; int, int &gt; sound_threshold</div><div class="ttdoc">Determines how much sound is needed to trigger the trap.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00158">trap.h:158</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, and <a class="el" href="trap_8h_source.html#l00158">sound_threshold</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00445">finalize()</a>.</p>

</div>
</div>
<a id="ad10cbb8e248563510e7b3ad6c7299da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad10cbb8e248563510e7b3ad6c7299da5">&#9670;&nbsp;</a></span>has_trigger_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::has_trigger_msg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00255">255</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                     {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#ae04866b832034fdc1af766e8af59a8ea">trigger_message_u</a> &amp;&amp; <a class="code" href="structtrap.html#a651463227d8f686d8b87a8fdc92b7db5">trigger_message_npc</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00147">trigger_message_npc</a>, and <a class="el" href="trap_8h_source.html#l00146">trigger_message_u</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, and <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>.</p>

</div>
</div>
<a id="aafab5c450397fa7ea6430a9334c2859c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafab5c450397fa7ea6430a9334c2859c">&#9670;&nbsp;</a></span>is_always_invisible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::is_always_invisible </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>There are special always invisible traps. </p>
<p>See player::search_surroundings </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00172">172</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                         {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#af528369ecffbd6666b411fbbb466bc4e">always_invisible</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_af528369ecffbd6666b411fbbb466bc4e"><div class="ttname"><a href="structtrap.html#af528369ecffbd6666b411fbbb466bc4e">trap::always_invisible</a></div><div class="ttdeci">bool always_invisible</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00138">trap.h:138</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00138">always_invisible</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00320">can_see()</a>, <a class="el" href="trap_8cpp_source.html#l00245">is_trivial_to_spot()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, and <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>.</p>

</div>
</div>
<a id="adc8f59b97597d373f7cb0bbcf061e794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8f59b97597d373f7cb0bbcf061e794">&#9670;&nbsp;</a></span>is_benign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::is_benign </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, this is not really a trap and there won't be any safety queries before stepping onto it (e.g. </p>
<p>for funnels). </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00221">221</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">benign</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="ttc" id="astructtrap_html_a10039a239822fb13066d9e61c82f5bf5"><div class="ttname"><a href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">trap::benign</a></div><div class="ttdeci">bool benign</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00137">trap.h:137</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00137">benign</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l07563">Character::adjacent_tile()</a>, <a class="el" href="trap_8cpp_source.html#l00462">debug_describe()</a>, <a class="el" href="game_8cpp_source.html#l10433">game::get_dangerous_tile()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00060">advanced_inv_area::init()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03807">place_trap_actor::is_allowed()</a>, <a class="el" href="monmove_8cpp_source.html#l00237">monster::know_danger_at()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00192">map::route()</a>, and <a class="el" href="map_8cpp_source.html#l10326">map::update_pathfinding_cache()</a>.</p>

</div>
</div>
<a id="a1df9fdf246ce84494eb68dcd6e59cb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df9fdf246ce84494eb68dcd6e59cb5f">&#9670;&nbsp;</a></span>is_funnel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::is_funnel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00376">376</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() &amp;&amp; <a class="code" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">funnel_radius_mm</a> &gt; 0;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="ttc" id="astructtrap_html_a2cea2683be1199ec40d943540d3a78ff"><div class="ttname"><a href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">trap::funnel_radius_mm</a></div><div class="ttdeci">int funnel_radius_mm</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00159">trap.h:159</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00159">funnel_radius_mm</a>, and <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l08346">map::fill_funnels()</a>, <a class="el" href="trap_8cpp_source.html#l00445">finalize()</a>, and <a class="el" href="weather_8cpp_source.html#l00217">retroactively_fill_from_funnel()</a>.</p>

</div>
</div>
<a id="a6a9ac96c5c81eb31093e049ffeac8b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a9ac96c5c81eb31093e049ffeac8b4f">&#9670;&nbsp;</a></span>is_null()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::is_null </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether this is the null-traps, aka no trap at all. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00366">366</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code" href="trap_8cpp.html#a7b8e40eb2b50e3841e2d9f2d0531226a">tr_null</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00112">loadid</a>, and <a class="el" href="trap_8cpp_source.html#l00421">tr_null</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l10706">Character::add_known_trap()</a>, <a class="el" href="character_8cpp_source.html#l05543">Character::base_comfort_value()</a>, <a class="el" href="iuse_8cpp_source.html#l03225">iuse::can_goo()</a>, <a class="el" href="game_8cpp_source.html#l11356">game::can_move_furniture()</a>, <a class="el" href="trap_8cpp_source.html#l00320">can_see()</a>, <a class="el" href="construction_8cpp_source.html#l01243">construct::check_empty()</a>, <a class="el" href="construction_8cpp_source.html#l01236">construct::check_empty_lite()</a>, <a class="el" href="construction_8cpp_source.html#l01360">construct::check_no_trap()</a>, <a class="el" href="construction_8cpp_source.html#l01276">construct::check_support_below()</a>, <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>, <a class="el" href="npctalk_8cpp_source.html#l03534">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_location_variable()</a>, <a class="el" href="character_8cpp_source.html#l09216">Character::floor_bedding_warmth()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01218">vehicle::handle_trap()</a>, <a class="el" href="trap_8cpp_source.html#l00381">has_sound_trigger()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03807">place_trap_actor::is_allowed()</a>, <a class="el" href="trap_8cpp_source.html#l00376">is_funnel()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>, <a class="el" href="map__extras_8cpp_source.html#l02078">MapExtras::mx_city_trap()</a>, <a class="el" href="map__extras_8cpp_source.html#l00464">MapExtras::mx_minefield()</a>, <a class="el" href="item_8cpp_source.html#l13054">item::process_corpse()</a>, <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>, <a class="el" href="trap_8cpp_source.html#l00332">trigger()</a>, <a class="el" href="trap_8cpp_source.html#l00371">triggered_by_item()</a>, <a class="el" href="trap_8cpp_source.html#l00387">triggered_by_sound()</a>, and <a class="el" href="editmap_8cpp_source.html#l00704">editmap::update_view_with_help()</a>.</p>

</div>
</div>
<a id="a4eb693398e2e48ad4e375f884ff02040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eb693398e2e48ad4e375f884ff02040">&#9670;&nbsp;</a></span>is_trivial_to_spot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::is_trivial_to_spot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00245">245</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// @TODO technically the trap may not be detected even with visibility == 0, see trap::detect_trap</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a> &lt;= 0 &amp;&amp; !<a class="code" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00172">is_always_invisible()</a>, and <a class="el" href="trap_8h_source.html#l00126">visibility</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>.</p>

</div>
</div>
<a id="affe3a3019275e719bc9d4d49f49560ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe3a3019275e719bc9d4d49f49560ec">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads this specific trap. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00137">137</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;name&quot;</span>, <a class="code" href="structtrap.html#a02fbeb44ab900ad347efe01ed6c6ffa0">name_</a> );</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="assign_8cpp.html#a5581e512c94617323eeed670afe0e49a">assign</a>( jo, <span class="stringliteral">&quot;color&quot;</span>, <a class="code" href="structtrap.html#a92373743ed980b356de173c228c79499">color</a> ) ) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        jo.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <span class="stringliteral">&quot;missing mandatory member \&quot;color\&quot;&quot;</span> );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;symbol&quot;</span>, <a class="code" href="structtrap.html#a975d50578595efdc3b93fb32bab0e41b">sym</a>, <a class="code" href="generic__factory_8cpp.html#ad156991d6c86e2010c0a432ee7476331">one_char_symbol_reader</a> );</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;visibility&quot;</span>, <a class="code" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">visibility</a> );</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;avoidance&quot;</span>, <a class="code" href="structtrap.html#a7dd8117e839b760a9ffa187d3670f4ed">avoidance</a> );</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;difficulty&quot;</span>, <a class="code" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">difficulty</a> );</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;memorial_male&quot;</span>, <a class="code" href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">memorial_male</a> );</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;memorial_female&quot;</span>, <a class="code" href="structtrap.html#a8395d17975e4ff75551655927956120e">memorial_female</a> );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;trigger_message_u&quot;</span>, <a class="code" href="structtrap.html#ae04866b832034fdc1af766e8af59a8ea">trigger_message_u</a> );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;trigger_message_npc&quot;</span>, <a class="code" href="structtrap.html#a651463227d8f686d8b87a8fdc92b7db5">trigger_message_npc</a> );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// Require either none, or both</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span>( !!<a class="code" href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">memorial_male</a> != !!<a class="code" href="structtrap.html#a8395d17975e4ff75551655927956120e">memorial_female</a> ) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>(</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordtype">id</span>.str(),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="stringliteral">&quot;Only one gender of memorial message specified for trap &quot;</span> + <span class="keywordtype">id</span>.str() + <span class="stringliteral">&quot;, but none &quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="stringliteral">&quot;or both required.&quot;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;flags&quot;</span>, <a class="code" href="structtrap.html#a17431593aa1c217242800cb11ce59b18">_flags</a> );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;trap_radius&quot;</span>, <a class="code" href="structtrap.html#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">trap_radius</a>, 0 );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// TODO: Is there a generic_factory version of this?</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="structtrap.html#a5b38533ac3a1c9c1f6a6844d0ee04a91">act</a> = <a class="code" href="trap_8h.html#a98757e7db5617489d696813f18374dca">trap_function_from_string</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;action&quot;</span> ) );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;map_regen&quot;</span>, <a class="code" href="structtrap.html#a9dcaa7079f22ae4a94049e2c9ef74288">map_regen</a>, <a class="code" href="trap_8cpp.html#a660bc589cacd3134b4d73557f1631f01">update_mapgen_none</a> );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;benign&quot;</span>, <a class="code" href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">benign</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;always_invisible&quot;</span>, <a class="code" href="structtrap.html#af528369ecffbd6666b411fbbb466bc4e">always_invisible</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;funnel_radius&quot;</span>, <a class="code" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">funnel_radius_mm</a>, 0 );</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;comfort&quot;</span>, <a class="code" href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">comfort</a>, 0 );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">int</span> legacy_floor_bedding_warmth = <a class="code" href="namespaceunits.html#afa4cd3161d6d775b08fa9e964b18ad48">units::to_legacy_bodypart_temp_delta</a>( <a class="code" href="structtrap.html#a0225c40a1174da35a613b1451f779e67">floor_bedding_warmth</a> );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;floor_bedding_warmth&quot;</span>, legacy_floor_bedding_warmth, 0 );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="structtrap.html#a0225c40a1174da35a613b1451f779e67">floor_bedding_warmth</a> = <a class="code" href="namespaceunits.html#abeb09f5fa1bc50f7a2653800d5423863">units::from_legacy_bodypart_temp_delta</a>( legacy_floor_bedding_warmth );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;spell_data&quot;</span>, <a class="code" href="structtrap.html#a204b98d9b542a70ab2781c13af441202">spell_data</a> );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="assign_8cpp.html#a5581e512c94617323eeed670afe0e49a">assign</a>( jo, <span class="stringliteral">&quot;trigger_weight&quot;</span>, <a class="code" href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">trigger_weight</a> );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <a class="code" href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">was_loaded</a>, <span class="stringliteral">&quot;sound_threshold&quot;</span>, <a class="code" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a> );</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;drops&quot;</span> ) ) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> item_type;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordtype">int</span> quantity = 0;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordtype">int</span> charges = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span>( entry.test_object() ) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> jc = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            jc.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;item&quot;</span>, item_type, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            quantity = jc.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;quantity&quot;</span>, 1 );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            charges = jc.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;charges&quot;</span>, 1 );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            entry.read( item_type, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            quantity = 1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            charges = 1;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span>( !item_type.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() &amp;&amp; quantity &gt; 0 &amp;&amp; charges &gt; 0 ) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <a class="code" href="structtrap.html#abdb4b9b037b1554a9bbf01b9db1f8387">components</a>.emplace_back( item_type, quantity, charges );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;vehicle_data&quot;</span> ) ) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jv = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;vehicle_data&quot;</span> );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#acf9ea314f7998e6a589bb3187c6ae6a2">remove_trap</a> = jv.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;remove_trap&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a2ce8428df648cdf20dc6ac59effcb757">do_explosion</a> = jv.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;do_explosion&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#aff743c43f98a9a30f15b33bab668b9f3">is_falling</a> = jv.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;is_falling&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a4720c8fd0a5120c5e73999d630a441b9">chance</a> = jv.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;chance&quot;</span>, 100 );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a12a8a69fabc09c46c94a872c3deabfc3">damage</a> = jv.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;damage&quot;</span>, 0 );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#ad34f1fa0ddea2be0516fe52076755d28">shrapnel</a> = jv.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;shrapnel&quot;</span>, 0 );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a0c5bf103091c4d3af6e05554dfb4ea06">sound_volume</a> = jv.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;sound_volume&quot;</span>, 0 );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        jv.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;sound&quot;</span>, <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a5a19d024919f0e4b3e470b85ceee7557">sound</a> );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a8fc4e74b6409f9616968d445b17c3955">sound_type</a> = jv.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;sound_type&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a6f9a3d0f9d4799259b30a03fd1598c4d">sound_variant</a> = jv.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;sound_variant&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">spawn_items</a>.clear();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span>( jv.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;spawn_items&quot;</span> ) ) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jv.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;spawn_items&quot;</span> ) ) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="keywordflow">if</span>( entry.test_object() ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <a class="code" href="classJsonObject.html">JsonObject</a> joitm = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">spawn_items</a>.emplace_back(</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( joitm.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;id&quot;</span> ) ), joitm.<a class="code" href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">get_float</a>( <span class="stringliteral">&quot;chance&quot;</span> ) );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">spawn_items</a>.emplace_back( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( entry.get_string() ), 1.0 );</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">set_trap</a> = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">trap_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span>( jv.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;set_trap&quot;</span>, <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">set_trap</a> ) ) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>.<a class="code" href="structvehicle__handle__trap__data.html#acf9ea314f7998e6a589bb3187c6ae6a2">remove_trap</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="ttc" id="aassign_8cpp_html_a5581e512c94617323eeed670afe0e49a"><div class="ttname"><a href="assign_8cpp.html#a5581e512c94617323eeed670afe0e49a">assign</a></div><div class="ttdeci">bool assign(const JsonObject &amp;jo, const std::string_view name, bool &amp;val, bool strict)</div><div class="ttdef"><b>Definition:</b> <a href="assign_8cpp_source.html#l00023">assign.cpp:23</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a04b6ce7355b567646a587514fb811c68"><div class="ttname"><a href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">JsonObject::throw_error_at</a></div><div class="ttdeci">void throw_error_at(std::string_view member, const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00358">flexbuffer_json.cpp:358</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a1abb3808bb2a992716d5ef6f27a32b3c"><div class="ttname"><a href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00813">flexbuffer_json-inl.h:813</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3b9722313d9692826235c87e73e94f04"><div class="ttname"><a href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">JsonObject::get_object</a></div><div class="ttdeci">JsonObject get_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00864">flexbuffer_json-inl.h:864</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3d748a5d67f435bbd170a3e92a7cd0ca"><div class="ttname"><a href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">JsonObject::get_bool</a></div><div class="ttdeci">bool get_bool(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00850">flexbuffer_json-inl.h:850</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a4d917fcb285203f91b74002565375dce"><div class="ttname"><a href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">JsonObject::has_array</a></div><div class="ttdeci">bool has_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00984">flexbuffer_json-inl.h:984</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a532ea812759469d654c7fde4738d11d5"><div class="ttname"><a href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">JsonObject::get_int</a></div><div class="ttdeci">int get_int(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00840">flexbuffer_json-inl.h:840</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a62e862f0390ad12302c9677069fb9d23"><div class="ttname"><a href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">JsonObject::has_object</a></div><div class="ttdeci">bool has_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00990">flexbuffer_json-inl.h:990</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a7d82ab1c2da0cb67c6315b86104c3c84"><div class="ttname"><a href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">JsonObject::get_float</a></div><div class="ttdeci">double get_float(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00845">flexbuffer_json-inl.h:845</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclassJsonObject_html_af3e3ae76afc340c1fa3510acaaba57b8"><div class="ttname"><a href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">JsonObject::throw_error</a></div><div class="ttdeci">void throw_error(const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00353">flexbuffer_json.cpp:353</a></div></div>
<div class="ttc" id="aclassJsonValue_html"><div class="ttname"><a href="classJsonValue.html">JsonValue</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00166">flexbuffer_json.h:167</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="ageneric__factory_8cpp_html_ad156991d6c86e2010c0a432ee7476331"><div class="ttname"><a href="generic__factory_8cpp.html#ad156991d6c86e2010c0a432ee7476331">one_char_symbol_reader</a></div><div class="ttdeci">bool one_char_symbol_reader(const JsonObject &amp;jo, const std::string_view member_name, int &amp;sym, bool)</div><div class="ttdoc">Reads a string and stores the first byte of it in sym.</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8cpp_source.html#l00003">generic_factory.cpp:3</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a43443191f61bb76aca1c2895eea4ad8f"><div class="ttname"><a href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a></div><div class="ttdeci">void optional(const JsonObject &amp;jo, const bool was_loaded, const std::string_view name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00829">generic_factory.h:829</a></div></div>
<div class="ttc" id="anamespaceunits_html_abeb09f5fa1bc50f7a2653800d5423863"><div class="ttname"><a href="namespaceunits.html#abeb09f5fa1bc50f7a2653800d5423863">units::from_legacy_bodypart_temp_delta</a></div><div class="ttdeci">constexpr units::temperature_delta from_legacy_bodypart_temp_delta(int temp)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00517">units.h:517</a></div></div>
<div class="ttc" id="anamespaceunits_html_afa4cd3161d6d775b08fa9e964b18ad48"><div class="ttname"><a href="namespaceunits.html#afa4cd3161d6d775b08fa9e964b18ad48">units::to_legacy_bodypart_temp_delta</a></div><div class="ttdeci">constexpr int to_legacy_bodypart_temp_delta(const quantity&lt; value_type, temperature_delta_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00523">units.h:523</a></div></div>
<div class="ttc" id="aovermap_8cpp_html_a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95"><div class="ttname"><a href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">join_type::mandatory</a></div><div class="ttdeci">@ mandatory</div></div>
<div class="ttc" id="astructtrap_html_a0225c40a1174da35a613b1451f779e67"><div class="ttname"><a href="structtrap.html#a0225c40a1174da35a613b1451f779e67">trap::floor_bedding_warmth</a></div><div class="ttdeci">units::temperature_delta floor_bedding_warmth</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00166">trap.h:166</a></div></div>
<div class="ttc" id="astructtrap_html_a02fbeb44ab900ad347efe01ed6c6ffa0"><div class="ttname"><a href="structtrap.html#a02fbeb44ab900ad347efe01ed6c6ffa0">trap::name_</a></div><div class="ttdeci">translation name_</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00141">trap.h:141</a></div></div>
<div class="ttc" id="astructtrap_html_a03491b6455522e29bcbd457283b88c6d"><div class="ttname"><a href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">trap::vehicle_data</a></div><div class="ttdeci">vehicle_handle_trap_data vehicle_data</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00167">trap.h:167</a></div></div>
<div class="ttc" id="astructtrap_html_a204b98d9b542a70ab2781c13af441202"><div class="ttname"><a href="structtrap.html#a204b98d9b542a70ab2781c13af441202">trap::spell_data</a></div><div class="ttdeci">fake_spell spell_data</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00164">trap.h:164</a></div></div>
<div class="ttc" id="astructtrap_html_a5b38533ac3a1c9c1f6a6844d0ee04a91"><div class="ttname"><a href="structtrap.html#a5b38533ac3a1c9c1f6a6844d0ee04a91">trap::act</a></div><div class="ttdeci">trap_function act</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00140">trap.h:140</a></div></div>
<div class="ttc" id="astructtrap_html_a5e8454e37107896cc58505a62dd6724e"><div class="ttname"><a href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">trap::trigger_weight</a></div><div class="ttdeci">units::mass trigger_weight</div><div class="ttdoc">If an item with this weight or more is thrown onto the trap, it triggers.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00154">trap.h:154</a></div></div>
<div class="ttc" id="astructtrap_html_a7515b4e5f59ad2a035e5030455bf3e62"><div class="ttname"><a href="structtrap.html#a7515b4e5f59ad2a035e5030455bf3e62">trap::was_loaded</a></div><div class="ttdeci">bool was_loaded</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00114">trap.h:114</a></div></div>
<div class="ttc" id="astructtrap_html_a92373743ed980b356de173c228c79499"><div class="ttname"><a href="structtrap.html#a92373743ed980b356de173c228c79499">trap::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00117">trap.h:117</a></div></div>
<div class="ttc" id="astructtrap_html_a975d50578595efdc3b93fb32bab0e41b"><div class="ttname"><a href="structtrap.html#a975d50578595efdc3b93fb32bab0e41b">trap::sym</a></div><div class="ttdeci">int sym</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00116">trap.h:116</a></div></div>
<div class="ttc" id="astructtrap_html_a9dcaa7079f22ae4a94049e2c9ef74288"><div class="ttname"><a href="structtrap.html#a9dcaa7079f22ae4a94049e2c9ef74288">trap::map_regen</a></div><div class="ttdeci">update_mapgen_id map_regen</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00139">trap.h:139</a></div></div>
<div class="ttc" id="astructtrap_html_a9e32dc8e92c961fb52b3086421c62b8e"><div class="ttname"><a href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">trap::comfort</a></div><div class="ttdeci">int comfort</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00165">trap.h:165</a></div></div>
<div class="ttc" id="astructtrap_html_abdb4b9b037b1554a9bbf01b9db1f8387"><div class="ttname"><a href="structtrap.html#abdb4b9b037b1554a9bbf01b9db1f8387">trap::components</a></div><div class="ttdeci">std::vector&lt; std::tuple&lt; itype_id, int, int &gt; &gt; components</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00161">trap.h:161</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a0c5bf103091c4d3af6e05554dfb4ea06"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a0c5bf103091c4d3af6e05554dfb4ea06">vehicle_handle_trap_data::sound_volume</a></div><div class="ttdeci">int sound_volume</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00078">trap.h:78</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a12a8a69fabc09c46c94a872c3deabfc3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a12a8a69fabc09c46c94a872c3deabfc3">vehicle_handle_trap_data::damage</a></div><div class="ttdeci">int damage</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00076">trap.h:76</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a2ce8428df648cdf20dc6ac59effcb757"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a2ce8428df648cdf20dc6ac59effcb757">vehicle_handle_trap_data::do_explosion</a></div><div class="ttdeci">bool do_explosion</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00073">trap.h:73</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a4720c8fd0a5120c5e73999d630a441b9"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a4720c8fd0a5120c5e73999d630a441b9">vehicle_handle_trap_data::chance</a></div><div class="ttdeci">int chance</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00075">trap.h:75</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a5a19d024919f0e4b3e470b85ceee7557"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a5a19d024919f0e4b3e470b85ceee7557">vehicle_handle_trap_data::sound</a></div><div class="ttdeci">translation sound</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00079">trap.h:79</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a6f9a3d0f9d4799259b30a03fd1598c4d"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a6f9a3d0f9d4799259b30a03fd1598c4d">vehicle_handle_trap_data::sound_variant</a></div><div class="ttdeci">std::string sound_variant</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00081">trap.h:81</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a85267d7b741db092465b148b86e023a7"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">vehicle_handle_trap_data::spawn_items</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; itype_id, double &gt; &gt; spawn_items</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00083">trap.h:83</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a8fc4e74b6409f9616968d445b17c3955"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a8fc4e74b6409f9616968d445b17c3955">vehicle_handle_trap_data::sound_type</a></div><div class="ttdeci">std::string sound_type</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00080">trap.h:80</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_ab19712f6fbd3b157f986b29925197dd3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">vehicle_handle_trap_data::set_trap</a></div><div class="ttdeci">trap_str_id set_trap</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00084">trap.h:84</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_acf9ea314f7998e6a589bb3187c6ae6a2"><div class="ttname"><a href="structvehicle__handle__trap__data.html#acf9ea314f7998e6a589bb3187c6ae6a2">vehicle_handle_trap_data::remove_trap</a></div><div class="ttdeci">bool remove_trap</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00072">trap.h:72</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_ad34f1fa0ddea2be0516fe52076755d28"><div class="ttname"><a href="structvehicle__handle__trap__data.html#ad34f1fa0ddea2be0516fe52076755d28">vehicle_handle_trap_data::shrapnel</a></div><div class="ttdeci">int shrapnel</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00077">trap.h:77</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_aff743c43f98a9a30f15b33bab668b9f3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#aff743c43f98a9a30f15b33bab668b9f3">vehicle_handle_trap_data::is_falling</a></div><div class="ttdeci">bool is_falling</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00074">trap.h:74</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a660bc589cacd3134b4d73557f1631f01"><div class="ttname"><a href="trap_8cpp.html#a660bc589cacd3134b4d73557f1631f01">update_mapgen_none</a></div><div class="ttdeci">static const update_mapgen_id update_mapgen_none(&quot;none&quot;)</div></div>
<div class="ttc" id="atrap_8h_html_a98757e7db5617489d696813f18374dca"><div class="ttname"><a href="trap_8h.html#a98757e7db5617489d696813f18374dca">trap_function_from_string</a></div><div class="ttdeci">const trap_function &amp; trap_function_from_string(const std::string &amp;function_name)</div><div class="ttdoc">Takes the name of a trap function and returns a function pointer to it.</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l01655">trapfunc.cpp:1655</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00149">_flags</a>, <a class="el" href="trap_8h_source.html#l00140">act</a>, <a class="el" href="trap_8h_source.html#l00138">always_invisible</a>, <a class="el" href="assign_8cpp_source.html#l00023">assign()</a>, <a class="el" href="trap_8h_source.html#l00128">avoidance</a>, <a class="el" href="trap_8h_source.html#l00137">benign</a>, <a class="el" href="trap_8h_source.html#l00075">vehicle_handle_trap_data::chance</a>, <a class="el" href="trap_8h_source.html#l00117">color</a>, <a class="el" href="trap_8h_source.html#l00165">comfort</a>, <a class="el" href="trap_8h_source.html#l00161">components</a>, <a class="el" href="trap_8h_source.html#l00076">vehicle_handle_trap_data::damage</a>, <a class="el" href="trap_8h_source.html#l00134">difficulty</a>, <a class="el" href="trap_8h_source.html#l00073">vehicle_handle_trap_data::do_explosion</a>, <a class="el" href="trap_8h_source.html#l00166">floor_bedding_warmth</a>, <a class="el" href="units_8h_source.html#l00517">units::from_legacy_bodypart_temp_delta()</a>, <a class="el" href="trap_8h_source.html#l00159">funnel_radius_mm</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00850">JsonObject::get_bool()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00845">JsonObject::get_float()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00990">JsonObject::has_object()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="trap_8h_source.html#l00074">vehicle_handle_trap_data::is_falling</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>, <a class="el" href="trap_8h_source.html#l00139">map_regen</a>, <a class="el" href="trap_8h_source.html#l00144">memorial_female</a>, <a class="el" href="trap_8h_source.html#l00143">memorial_male</a>, <a class="el" href="trap_8h_source.html#l00141">name_</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; trap &gt;::NULL_ID()</a>, <a class="el" href="generic__factory_8cpp_source.html#l00003">one_char_symbol_reader()</a>, <a class="el" href="generic__factory_8h_source.html#l00829">optional()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="trap_8h_source.html#l00072">vehicle_handle_trap_data::remove_trap</a>, <a class="el" href="trap_8h_source.html#l00084">vehicle_handle_trap_data::set_trap</a>, <a class="el" href="trap_8h_source.html#l00077">vehicle_handle_trap_data::shrapnel</a>, <a class="el" href="trap_8h_source.html#l00079">vehicle_handle_trap_data::sound</a>, <a class="el" href="trap_8h_source.html#l00158">sound_threshold</a>, <a class="el" href="trap_8h_source.html#l00080">vehicle_handle_trap_data::sound_type</a>, <a class="el" href="trap_8h_source.html#l00081">vehicle_handle_trap_data::sound_variant</a>, <a class="el" href="trap_8h_source.html#l00078">vehicle_handle_trap_data::sound_volume</a>, <a class="el" href="trap_8h_source.html#l00083">vehicle_handle_trap_data::spawn_items</a>, <a class="el" href="trap_8h_source.html#l00164">spell_data</a>, <a class="el" href="trap_8h_source.html#l00116">sym</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00353">JsonObject::throw_error()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, <a class="el" href="units_8h_source.html#l00523">units::to_legacy_bodypart_temp_delta()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01655">trap_function_from_string()</a>, <a class="el" href="trap_8h_source.html#l00136">trap_radius</a>, <a class="el" href="trap_8h_source.html#l00147">trigger_message_npc</a>, <a class="el" href="trap_8h_source.html#l00146">trigger_message_u</a>, <a class="el" href="trap_8h_source.html#l00154">trigger_weight</a>, <a class="el" href="trap_8cpp.html#a660bc589cacd3134b4d73557f1631f01">update_mapgen_none</a>, <a class="el" href="trap_8h_source.html#l00167">vehicle_data</a>, <a class="el" href="trap_8h_source.html#l00126">visibility</a>, and <a class="el" href="trap_8h_source.html#l00114">was_loaded</a>.</p>

</div>
</div>
<a id="a12144546805827604a11ba0959805943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12144546805827604a11ba0959805943">&#9670;&nbsp;</a></span>load_trap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void trap::load_trap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads the trap and adds it to the trapmap, and the traplist. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classJsonError.html">JsonError</a></td><td>if the json is invalid as usual. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00132">132</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">trap_factory</a>.load( jo, <a class="code" href="structtrap.html#aa1358791b26c268a7b167421e458352e">src</a> );</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="ttc" id="astructtrap_html_aa1358791b26c268a7b167421e458352e"><div class="ttname"><a href="structtrap.html#aa1358791b26c268a7b167421e458352e">trap::src</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; trap_str_id, mod_id &gt; &gt; src</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00111">trap.h:111</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00111">src</a>, and <a class="el" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00237">DynamicDataLoader::initialize()</a>.</p>

</div>
</div>
<a id="a3e1e069186296d3adb2cf9a941a0c0a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1e069186296d3adb2cf9a941a0c0a8">&#9670;&nbsp;</a></span>map_regen_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a9703e9c28f208c9af0bee38564a5df0b">update_mapgen_id</a> trap::map_regen_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00233">233</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a9dcaa7079f22ae4a94049e2c9ef74288">map_regen</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00139">map_regen</a>.</p>

<p class="reference">Referenced by <a class="el" href="trapfunc_8cpp_source.html#l01516">trapfunc::map_regen()</a>.</p>

</div>
</div>
<a id="a69d6fcf18e888cf4da69f6faa01df1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d6fcf18e888cf4da69f6faa01df1cf">&#9670;&nbsp;</a></span>memorial_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string trap::memorial_msg </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>male</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00191">191</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                  {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="newcharacter_8cpp.html#a1d22ab3ab1f5b7b3d7b9491dcd8787b4">male</a> ) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a8aab01ac905f9a67b9615524fbdb372b">memorial_male</a>-&gt;translated();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a8395d17975e4ff75551655927956120e">memorial_female</a>-&gt;translated();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="ttc" id="anewcharacter_8cpp_html_a1d22ab3ab1f5b7b3d7b9491dcd8787b4"><div class="ttname"><a href="newcharacter_8cpp.html#a1d22ab3ab1f5b7b3d7b9491dcd8787b4">male</a></div><div class="ttdeci">bool male</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l02053">newcharacter.cpp:2053</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="newcharacter_8cpp_source.html#l02053">male</a>, <a class="el" href="trap_8h_source.html#l00144">memorial_female</a>, and <a class="el" href="trap_8h_source.html#l00143">memorial_male</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorial__logger_8cpp_source.html#l00424">memorial_logger::notify()</a>.</p>

</div>
</div>
<a id="a01b0ef8443ac5ba4e7455880ca2dc44b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01b0ef8443ac5ba4e7455880ca2dc44b">&#9670;&nbsp;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string trap::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00228">228</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a02fbeb44ab900ad347efe01ed6c6ffa0">name_</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00141">name_</a>, and <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05715">colorized_trap_name_at()</a>, <a class="el" href="trap_8cpp_source.html#l00265">detect_trap()</a>, <a class="el" href="character_8cpp_source.html#l10561">Character::echo_pulse()</a>, <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>, <a class="el" href="game_8cpp_source.html#l10433">game::get_dangerous_tile()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01218">vehicle::handle_trap()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03807">place_trap_actor::is_allowed()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>, <a class="el" href="game_8cpp_source.html#l06729">game::print_trap_info()</a>, <a class="el" href="character_8cpp_source.html#l12890">Character::search_surroundings()</a>, and <a class="el" href="editmap_8cpp_source.html#l00704">editmap::update_view_with_help()</a>.</p>

</div>
</div>
<a id="aa6b4fcf67a39a8ca75ac910055bb99c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b4fcf67a39a8ca75ac910055bb99c6">&#9670;&nbsp;</a></span>on_disarmed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::on_disarmed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when a trap at the given point in the map has been disarmed. </p>
<p>It should spawn trap items (if any) and remove the trap from the map via <a class="el" href="classmap.html#ae6be5b2b977897215861971bf64fb502">map::remove_trap</a>. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00406">406</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;i : <a class="code" href="structtrap.html#abdb4b9b037b1554a9bbf01b9db1f8387">components</a> ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;item_type = std::get&lt;0&gt;( i );</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> quantity = std::get&lt;1&gt;( i );</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> charges = std::get&lt;2&gt;( i );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        m.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), item_type, quantity, charges );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : m.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, <a class="code" href="structtrap.html#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">trap_radius</a> ) ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        m.<a class="code" href="classmap.html#ae6be5b2b977897215861971bf64fb502">remove_trap</a>( dest );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a4417ea41f79e4b624612ae64ebac1d07"><div class="ttname"><a href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0, const std::set&lt; flag_id &gt; &amp;flags={}, const std::string &amp;variant=&quot;&quot;, const std::string &amp;faction=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05100">map.cpp:5100</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_ae6be5b2b977897215861971bf64fb502"><div class="ttname"><a href="classmap.html#ae6be5b2b977897215861971bf64fb502">map::remove_trap</a></div><div class="ttdeci">void remove_trap(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06338">map.cpp:6338</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00202">point.h:202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00161">components</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="map_8cpp_source.html#l06338">map::remove_trap()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="trap_8h_source.html#l00136">trap_radius</a>, and <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l02926">jmapgen_terrain::apply()</a>, and <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>.</p>

</div>
</div>
<a id="aa1fd24c994876f92198c760ddde2358f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fd24c994876f92198c760ddde2358f">&#9670;&nbsp;</a></span>operator!=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="enum__traits_8h.html#aeb9756d1cf0993ad7806b815ec378a3d">trap::operator!</a>= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00179">179</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                   {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> != <a class="code" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00110">id</a>, and <a class="el" href="trap_8h_source.html#l00112">loadid</a>.</p>

</div>
</div>
<a id="a6e4f7bfc2d5eb64598a4650d47cd3029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4f7bfc2d5eb64598a4650d47cd3029">&#9670;&nbsp;</a></span>operator==()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00176">176</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                   {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00110">id</a>, and <a class="el" href="trap_8h_source.html#l00112">loadid</a>.</p>

</div>
</div>
<a id="a3459bc15692baad14fa65b985251137f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3459bc15692baad14fa65b985251137f">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void trap::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases the loaded trap objects in trapmap and traplist. </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00238">238</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="trap_8cpp.html#a8149ff482a37aa5d47ca76e6ad3f54b7">funnel_traps</a>.clear();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="trap_8cpp.html#a84bb10a20abc66ee67b5c51d792c144e">sound_triggered_traps</a>.clear();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">trap_factory</a>.reset();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00113">funnel_traps</a>, <a class="el" href="trap_8cpp_source.html#l00120">sound_triggered_traps</a>, and <a class="el" href="namespaceanonymous__namespace_02trap_8cpp_03.html#a1c896103efb8cfa33089e20350d7e2e7">anonymous_namespace{trap.cpp}::trap_factory</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8cpp_source.html#l00548">DynamicDataLoader::unload_data()</a>.</p>

</div>
</div>
<a id="a692520c48fed23dc934168a3becebb27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a692520c48fed23dc934168a3becebb27">&#9670;&nbsp;</a></span>trigger() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::trigger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00332">332</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="structtrap.html#a5b38533ac3a1c9c1f6a6844d0ee04a91">act</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00140">act</a>, <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

</div>
</div>
<a id="a03dcb7429a503f2fb5c90842cfb25715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03dcb7429a503f2fb5c90842cfb25715">&#9670;&nbsp;</a></span>trigger() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::trigger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>creature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This applies the effects of the trap to the world and possibly to the triggering object (creature, item). </p>
<p>The function assumes the caller has already checked whether the trap should be activated (e.g. the creature has had a chance to avoid the trap, but it failed). </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00340">340</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">trigger</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, &amp;<a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="ttc" id="adescriptions_8cpp_html_aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72"><div class="ttname"><a href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">description_target::creature</a></div><div class="ttdeci">@ creature</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="trap_8cpp_source.html#l00350">trigger()</a>.</p>

</div>
</div>
<a id="a7a862026cc04677a44a7d945c786edd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a862026cc04677a44a7d945c786edd0">&#9670;&nbsp;</a></span>trigger() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void trap::trigger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>creature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger trap effects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">creature</td><td>The creature that triggered the trap, it does not necessarily have to be on the place of the trap (traps can be triggered from adjacent, e.g. when disarming them). This can also be a null pointer if the trap has been triggered by some thrown item (which must have the <a class="el" href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">trigger_weight</a>). </td></tr>
    <tr><td class="paramname">pos</td><td>The location of the trap in the main map. </td></tr>
    <tr><td class="paramname">item</td><td>The item that triggered the trap </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00350">350</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_real_creature = <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a> != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;is_hallucination();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>( is_real_creature || <a class="code" href="classitem.html">item</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordtype">bool</span> triggered = <a class="code" href="structtrap.html#a5b38533ac3a1c9c1f6a6844d0ee04a91">act</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, <a class="code" href="classitem.html">item</a> );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">if</span>( triggered &amp;&amp; is_real_creature ) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html">Character</a> *ch = <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>-&gt;as_character() ) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a74cc8e54763d13afaa42599271e8bd8c">event_type::character_triggers_trap</a>&gt;( ch-&gt;getID(), <a class="code" href="structtrap.html#af4ff2a16113fc1dd7c53285c0f91c126">id</a> );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a74cc8e54763d13afaa42599271e8bd8c"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a74cc8e54763d13afaa42599271e8bd8c">event_type::character_triggers_trap</a></div><div class="ttdeci">@ character_triggers_trap</div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8h_source.html#l00140">act</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a74cc8e54763d13afaa42599271e8bd8c">character_triggers_trap</a>, <a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a8a52e7a8d3b4c955d6f7927c6ba3fe72">creature</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="trap_8h_source.html#l00110">id</a>, <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ballistics_8cpp_source.html#l00047">drop_or_embed_projectile()</a>, <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>, <a class="el" href="character_8cpp_source.html#l11176">Character::gravity_check()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03807">place_trap_actor::is_allowed()</a>, <a class="el" href="map_8cpp_source.html#l09921">map::maybe_trigger_prox_trap()</a>, <a class="el" href="map_8cpp_source.html#l09955">map::maybe_trigger_trap()</a>, <a class="el" href="sounds_8cpp_source.html#l00472">sounds::process_sounds()</a>, and <a class="el" href="trap_8cpp_source.html#l00340">trigger()</a>.</p>

</div>
</div>
<a id="ab9f82fbd0bd8e9929bf1d8934cf22ccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f82fbd0bd8e9929bf1d8934cf22ccd">&#9670;&nbsp;</a></span>trigger() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap::trigger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00345">345</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structtrap.html#a7a862026cc04677a44a7d945c786edd0">trigger</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">nullptr</span>, &amp;<a class="code" href="classitem.html">item</a> );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="trap_8cpp_source.html#l00350">trigger()</a>.</p>

</div>
</div>
<a id="aa7bc509c6fa1aec956f63ec03980e593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7bc509c6fa1aec956f63ec03980e593">&#9670;&nbsp;</a></span>triggered_by_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::triggered_by_item </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>itm</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the given item is throw onto the trap, does it trigger the trap? </p>

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00371">371</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() &amp;&amp; itm.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() &gt;= <a class="code" href="structtrap.html#a5e8454e37107896cc58505a62dd6724e">trigger_weight</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdoc">Total weight of an item accounting for all contained/integrated items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07081">item.cpp:7081</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, <a class="el" href="trap_8h_source.html#l00154">trigger_weight</a>, and <a class="el" href="item_8cpp_source.html#l07081">item::weight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ballistics_8cpp_source.html#l00047">drop_or_embed_projectile()</a>.</p>

</div>
</div>
<a id="a3a82fa60a84ac16cd22289bcae631d98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a82fa60a84ac16cd22289bcae631d98">&#9670;&nbsp;</a></span>triggered_by_sound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::triggered_by_sound </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8cpp_source.html#l00387">387</a> of file <a class="el" href="trap_8cpp_source.html">trap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> = vol - dist;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// now determine sound threshold probabilities</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// linear model: 0% below sound_min, 25% at sound_min, 100% at sound_max</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sound_min = <a class="code" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a>.first;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sound_max = <a class="code" href="structtrap.html#ae8fcf2bc9d6746ef30f5f8a75ba765f3">sound_threshold</a>.second;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sound_range = sound_max - sound_min;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> &lt; sound_min ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">int</span> sound_chance = 100;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span>( sound_range &gt; 0 ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        sound_chance = 25 + ( 75 * ( <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> - sound_min ) / sound_range );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">//debugmsg(&quot;Sound chance: %d%%&quot;, sound_chance);</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() &amp;&amp; ( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 100 ) &lt;= sound_chance );</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="anamespaceunits_html_a5d16607c866588620acb381e7dbbf0a6"><div class="ttname"><a href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a></div><div class="ttdeci">quantity&lt; int, volume_in_milliliter_tag &gt; volume</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00017">units_fwd.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="trap_8h_source.html#l00158">sound_threshold</a>.</p>

<p class="reference">Referenced by <a class="el" href="sounds_8cpp_source.html#l00472">sounds::process_sounds()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a17431593aa1c217242800cb11ce59b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17431593aa1c217242800cb11ce59b18">&#9670;&nbsp;</a></span>_flags</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1flat__set.html">cata::flat_set</a>&lt;<a class="el" href="type__id_8h.html#a65869bf196f1d97bcfd690e07ffbbd7d">flag_id</a>&gt; trap::_flags</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00149">149</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00183">has_flag()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a5b38533ac3a1c9c1f6a6844d0ee04a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b38533ac3a1c9c1f6a6844d0ee04a91">&#9670;&nbsp;</a></span>act</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trap_8h.html#ae42e32fdf80c3174f94a4b2f02401473">trap_function</a> trap::act</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00140">140</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00332">trigger()</a>.</p>

</div>
</div>
<a id="af528369ecffbd6666b411fbbb466bc4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af528369ecffbd6666b411fbbb466bc4e">&#9670;&nbsp;</a></span>always_invisible</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::always_invisible = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00138">138</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00172">is_always_invisible()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a7dd8117e839b760a9ffa187d3670f4ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dd8117e839b760a9ffa187d3670f4ed">&#9670;&nbsp;</a></span>avoidance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::avoidance = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00128">128</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00462">debug_describe()</a>, <a class="el" href="trap_8cpp_source.html#l00435">easy_take_down()</a>, <a class="el" href="trap_8h_source.html#l00214">get_avoidance()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a10039a239822fb13066d9e61c82f5bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10039a239822fb13066d9e61c82f5bf5">&#9670;&nbsp;</a></span>benign</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::benign = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00137">137</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00221">is_benign()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a92373743ed980b356de173c228c79499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92373743ed980b356de173c228c79499">&#9670;&nbsp;</a></span>color</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnc__color.html">nc_color</a> trap::color</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00117">117</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="editmap_8cpp_source.html#l00952">color()</a>, <a class="el" href="iuse_8cpp_source.html#l05715">colorized_trap_name_at()</a>, <a class="el" href="map_8cpp_source.html#l07104">map::draw_maptile()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, <a class="el" href="game_8cpp_source.html#l06729">game::print_trap_info()</a>, and <a class="el" href="editmap_8cpp_source.html#l00704">editmap::update_view_with_help()</a>.</p>

</div>
</div>
<a id="a9e32dc8e92c961fb52b3086421c62b8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e32dc8e92c961fb52b3086421c62b8e">&#9670;&nbsp;</a></span>comfort</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap::comfort = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00165">165</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l05543">Character::base_comfort_value()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="avatar_8cpp_source.html#l01926">avatar::try_to_sleep()</a>.</p>

</div>
</div>
<a id="abdb4b9b037b1554a9bbf01b9db1f8387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdb4b9b037b1554a9bbf01b9db1f8387">&#9670;&nbsp;</a></span>components</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::tuple&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int, int&gt; &gt; trap::components</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00161">161</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00406">on_disarmed()</a>.</p>

</div>
</div>
<a id="abbf38effe374d03f39b3647a27e3c3a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbf38effe374d03f39b3647a27e3c3a7">&#9670;&nbsp;</a></span>difficulty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::difficulty = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00134">134</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00440">can_not_be_disarmed()</a>, <a class="el" href="trap_8cpp_source.html#l00462">debug_describe()</a>, <a class="el" href="trap_8cpp_source.html#l00435">easy_take_down()</a>, <a class="el" href="iexamine_8cpp_source.html#l04535">examine()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a0225c40a1174da35a613b1451f779e67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0225c40a1174da35a613b1451f779e67">&#9670;&nbsp;</a></span>floor_bedding_warmth</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a93cd1578a96bdf194d4ec88eb50d904e">units::temperature_delta</a> trap::floor_bedding_warmth = 0_C_delta</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00166">166</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l09216">Character::floor_bedding_warmth()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a2cea2683be1199ec40d943540d3a78ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cea2683be1199ec40d943540d3a78ff">&#9670;&nbsp;</a></span>funnel_radius_mm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::funnel_radius_mm = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00159">159</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00298">funnel_turns_per_charge()</a>, <a class="el" href="trap_8cpp_source.html#l00376">is_funnel()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="af4ff2a16113fc1dd7c53285c0f91c126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ff2a16113fc1dd7c53285c0f91c126">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#aaf07656eb0d8c6676fbb1849d92cfa26">trap_str_id</a> trap::id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00110">110</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l10706">Character::add_known_trap()</a>, <a class="el" href="mapgen_8cpp_source.html#l02926">jmapgen_terrain::apply()</a>, <a class="el" href="monster_8cpp_source.html#l01186">monster::avoid_trap()</a>, <a class="el" href="construction_8cpp_source.html#l01276">construct::check_support_below()</a>, <a class="el" href="npctalk_8cpp_source.html#l03534">talk_effect_fun::anonymous_namespace{npctalk.cpp}::f_location_variable()</a>, <a class="el" href="trap_8cpp_source.html#l00445">finalize()</a>, <a class="el" href="trap_8h_source.html#l00179">operator!=()</a>, <a class="el" href="trap_8h_source.html#l00176">operator==()</a>, <a class="el" href="gamemode__tutorial_8cpp_source.html#l00182">tutorial_game::per_turn()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01268">firestarter_actor::prep_firestarter_use()</a>, and <a class="el" href="trap_8cpp_source.html#l00350">trigger()</a>.</p>

</div>
</div>
<a id="ab2767aee5179ad23b3ad0b6b4b2415af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2767aee5179ad23b3ad0b6b4b2415af">&#9670;&nbsp;</a></span>loadid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a6a456b8f9aeb28a96e3976548a6cb0dc">trap_id</a> trap::loadid</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00112">112</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="editmap_8cpp_source.html#l01061">apply&lt; trap &gt;()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01556">trapfunc::cast_spell()</a>, <a class="el" href="editmap_8cpp_source.html#l00514">editmap::draw_main_ui_overlay()</a>, <a class="el" href="editmap_8cpp_source.html#l00910">feature&lt; trap_id &gt;()</a>, <a class="el" href="weather_8cpp_source.html#l00323">fill_funnels()</a>, <a class="el" href="trap_8cpp_source.html#l00445">finalize()</a>, <a class="el" href="trap_8cpp_source.html#l00366">is_null()</a>, <a class="el" href="trap_8h_source.html#l00179">operator!=()</a>, <a class="el" href="trap_8h_source.html#l00176">operator==()</a>, <a class="el" href="item_8cpp_source.html#l13054">item::process_corpse()</a>, and <a class="el" href="editmap_8cpp_source.html#l00704">editmap::update_view_with_help()</a>.</p>

</div>
</div>
<a id="a9dcaa7079f22ae4a94049e2c9ef74288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dcaa7079f22ae4a94049e2c9ef74288">&#9670;&nbsp;</a></span>map_regen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a9703e9c28f208c9af0bee38564a5df0b">update_mapgen_id</a> trap::map_regen</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00139">139</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00233">map_regen_target()</a>.</p>

</div>
</div>
<a id="a8395d17975e4ff75551655927956120e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8395d17975e4ff75551655927956120e">&#9670;&nbsp;</a></span>memorial_female</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;<a class="el" href="classtranslation.html">translation</a>&gt; trap::memorial_female</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00144">144</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00187">has_memorial_msg()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8h_source.html#l00191">memorial_msg()</a>.</p>

</div>
</div>
<a id="a8aab01ac905f9a67b9615524fbdb372b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aab01ac905f9a67b9615524fbdb372b">&#9670;&nbsp;</a></span>memorial_male</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;<a class="el" href="classtranslation.html">translation</a>&gt; trap::memorial_male</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00143">143</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00187">has_memorial_msg()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8h_source.html#l00191">memorial_msg()</a>.</p>

</div>
</div>
<a id="a02fbeb44ab900ad347efe01ed6c6ffa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02fbeb44ab900ad347efe01ed6c6ffa0">&#9670;&nbsp;</a></span>name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtranslation.html">translation</a> trap::name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00141">141</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00228">name()</a>.</p>

</div>
</div>
<a id="ae8fcf2bc9d6746ef30f5f8a75ba765f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8fcf2bc9d6746ef30f5f8a75ba765f3">&#9670;&nbsp;</a></span>sound_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int, int&gt; trap::sound_threshold = {0, 0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines how much sound is needed to trigger the trap. </p>
<p>Defined as {min,max}. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00158">158</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00381">has_sound_trigger()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00387">triggered_by_sound()</a>.</p>

</div>
</div>
<a id="a204b98d9b542a70ab2781c13af441202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a204b98d9b542a70ab2781c13af441202">&#9670;&nbsp;</a></span>spell_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfake__spell.html">fake_spell</a> trap::spell_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00164">164</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trapfunc_8cpp_source.html#l01556">trapfunc::cast_spell()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="aa1358791b26c268a7b167421e458352e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1358791b26c268a7b167421e458352e">&#9670;&nbsp;</a></span>src</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;<a class="el" href="type__id_8h.html#aaf07656eb0d8c6676fbb1849d92cfa26">trap_str_id</a>, <a class="el" href="type__id_8h.html#aabcbcb9fb77661ba75c47b6287318e03">mod_id</a>&gt; &gt; trap::src</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00111">111</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00132">load_trap()</a>.</p>

</div>
</div>
<a id="a975d50578595efdc3b93fb32bab0e41b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975d50578595efdc3b93fb32bab0e41b">&#9670;&nbsp;</a></span>sym</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap::sym = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00116">116</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l07104">map::draw_maptile()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="editmap_8cpp_source.html#l00931">symbol()</a>.</p>

</div>
</div>
<a id="a43fd5f8fec40e3bb6ca7e07fa7ae6b3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43fd5f8fec40e3bb6ca7e07fa7ae6b3f">&#9670;&nbsp;</a></span>trap_radius</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::trap_radius = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00136">136</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00312">get_trap_radius()</a>, <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00406">on_disarmed()</a>.</p>

</div>
</div>
<a id="a651463227d8f686d8b87a8fdc92b7db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651463227d8f686d8b87a8fdc92b7db5">&#9670;&nbsp;</a></span>trigger_message_npc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;<a class="el" href="classtranslation.html">translation</a>&gt; trap::trigger_message_npc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00147">147</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00267">get_trigger_message_npc()</a>, <a class="el" href="trap_8h_source.html#l00255">has_trigger_msg()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="ae04866b832034fdc1af766e8af59a8ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04866b832034fdc1af766e8af59a8ea">&#9670;&nbsp;</a></span>trigger_message_u</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;<a class="el" href="classtranslation.html">translation</a>&gt; trap::trigger_message_u</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00146">146</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8h_source.html#l00261">get_trigger_message_u()</a>, <a class="el" href="trap_8h_source.html#l00255">has_trigger_msg()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a5e8454e37107896cc58505a62dd6724e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e8454e37107896cc58505a62dd6724e">&#9670;&nbsp;</a></span>trigger_weight</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a> trap::trigger_weight = 500_gram</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If an item with this weight or more is thrown onto the trap, it triggers. </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00154">154</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>, and <a class="el" href="trap_8cpp_source.html#l00371">triggered_by_item()</a>.</p>

</div>
</div>
<a id="a03491b6455522e29bcbd457283b88c6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03491b6455522e29bcbd457283b88c6d">&#9670;&nbsp;</a></span>vehicle_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvehicle__handle__trap__data.html">vehicle_handle_trap_data</a> trap::vehicle_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00167">167</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01218">vehicle::handle_trap()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a0913f4b2535ae7fe8b5550b974b31a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0913f4b2535ae7fe8b5550b974b31a18">&#9670;&nbsp;</a></span>visibility</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int trap::visibility = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How easy it is to spot the trap. </p>
<p>Smaller values means it's easier to spot. 1 to ??, affects detection </p>

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00126">126</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00320">can_see()</a>, <a class="el" href="trap_8cpp_source.html#l00462">debug_describe()</a>, <a class="el" href="trap_8cpp_source.html#l00265">detect_trap()</a>, <a class="el" href="trap_8cpp_source.html#l00245">is_trivial_to_spot()</a>, and <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<a id="a7515b4e5f59ad2a035e5030455bf3e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7515b4e5f59ad2a035e5030455bf3e62">&#9670;&nbsp;</a></span>was_loaded</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trap::was_loaded = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trap_8h_source.html#l00114">114</a> of file <a class="el" href="trap_8h_source.html">trap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00137">load()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>src/<a class="el" href="trap_8h_source.html">trap.h</a></li>
<li>src/<a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a></li>
<li>src/<a class="el" href="trap_8cpp_source.html">trap.cpp</a></li>
<li>src/<a class="el" href="weather_8cpp_source.html">weather.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:45 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
