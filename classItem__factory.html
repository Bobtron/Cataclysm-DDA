<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: Item_factory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classItem__factory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Item_factory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Central item type management class.  
 <a href="classItem__factory.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="item__factory_8h_source.html">item_factory.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe8c8beaa42a135b40cbdc5dcfbd989d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#afe8c8beaa42a135b40cbdc5dcfbd989d">Item_factory</a> ()</td></tr>
<tr class="separator:afe8c8beaa42a135b40cbdc5dcfbd989d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bbec0a6c1ee7ec9e858faadb20f2dc8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a8bbec0a6c1ee7ec9e858faadb20f2dc8">~Item_factory</a> ()</td></tr>
<tr class="separator:a8bbec0a6c1ee7ec9e858faadb20f2dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a301f489c5195fee4690db8f40ae42170"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a301f489c5195fee4690db8f40ae42170">reset</a> ()</td></tr>
<tr class="memdesc:a301f489c5195fee4690db8f40ae42170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the item factory.  <a href="classItem__factory.html#a301f489c5195fee4690db8f40ae42170">More...</a><br /></td></tr>
<tr class="separator:a301f489c5195fee4690db8f40ae42170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa273b2378a5f068c3a3695d150e09ee0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa273b2378a5f068c3a3695d150e09ee0">check_definitions</a> () const</td></tr>
<tr class="memdesc:aa273b2378a5f068c3a3695d150e09ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check consistency of itype and item group definitions, for example valid material, valid tool, etc.  <a href="classItem__factory.html#aa273b2378a5f068c3a3695d150e09ee0">More...</a><br /></td></tr>
<tr class="separator:aa273b2378a5f068c3a3695d150e09ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Item groups</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Item groups are used to spawn random items (in random amounts).</p>
<p>You usually only need the <a class="el" href="namespaceitem__group.html#a2d51a14b1504b58288fd1b3e5060f528">item_group::items_from</a> function to create items from a group. </p>
</div></td></tr>
<tr class="memitem:a79a031be684872453957ecfb19876fd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a79a031be684872453957ecfb19876fd9">load_item_group</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jsobj)</td></tr>
<tr class="memdesc:a79a031be684872453957ecfb19876fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for the init system (<a class="el" href="classDynamicDataLoader.html">DynamicDataLoader</a>), loads an item group definitions.  <a href="classItem__factory.html#a79a031be684872453957ecfb19876fd9">More...</a><br /></td></tr>
<tr class="separator:a79a031be684872453957ecfb19876fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2515a4326bf856be22d99aa247143529"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a2515a4326bf856be22d99aa247143529">load_item_group</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jsobj, const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;group_id, const std::string &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a>, std::string <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>={})</td></tr>
<tr class="memdesc:a2515a4326bf856be22d99aa247143529"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a item group from json.  <a href="classItem__factory.html#a2515a4326bf856be22d99aa247143529">More...</a><br /></td></tr>
<tr class="separator:a2515a4326bf856be22d99aa247143529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee57318acde8d116c81f6a7ca19b1642"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aee57318acde8d116c81f6a7ca19b1642">load_item_group_data</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jsobj, <a class="el" href="classItem__group.html">Item_group</a> *ig, const std::string &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a>)</td></tr>
<tr class="memdesc:aee57318acde8d116c81f6a7ca19b1642"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actually the load item group data into the group.  <a href="classItem__factory.html#aee57318acde8d116c81f6a7ca19b1642">More...</a><br /></td></tr>
<tr class="separator:aee57318acde8d116c81f6a7ca19b1642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa921518ef46c16edea58a6bcada19191"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa921518ef46c16edea58a6bcada19191">load_item_group</a> (const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;entries, const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;group_id, bool is_collection, int ammo_chance, int magazine_chance, std::string <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>={})</td></tr>
<tr class="memdesc:aa921518ef46c16edea58a6bcada19191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like above, but the above loads data from several members of the object, this function assume the given array is the "entries" member of the item group.  <a href="classItem__factory.html#aa921518ef46c16edea58a6bcada19191">More...</a><br /></td></tr>
<tr class="separator:aa921518ef46c16edea58a6bcada19191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0f42e4f13b5d22e9b6a72bbba63387"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#acf0f42e4f13b5d22e9b6a72bbba63387">get_group</a> (const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;)</td></tr>
<tr class="memdesc:acf0f42e4f13b5d22e9b6a72bbba63387"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the item group object.  <a href="classItem__factory.html#acf0f42e4f13b5d22e9b6a72bbba63387">More...</a><br /></td></tr>
<tr class="separator:acf0f42e4f13b5d22e9b6a72bbba63387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4efc5a2a2d3268fc306894a60d7fd488"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a4efc5a2a2d3268fc306894a60d7fd488">get_all_group_names</a> ()</td></tr>
<tr class="memdesc:a4efc5a2a2d3268fc306894a60d7fd488"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the idents of all item groups that are known.  <a href="classItem__factory.html#a4efc5a2a2d3268fc306894a60d7fd488">More...</a><br /></td></tr>
<tr class="separator:a4efc5a2a2d3268fc306894a60d7fd488"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Item type loading</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpe3805dee1f73fcc5f6e00853fc8fe49d"></a>These function load different instances of itype objects from json.</p>
<p>The loaded item types are stored and can be accessed through <a class="el" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jo</td><td>The json object to load data from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classJsonError.html">JsonError</a></td><td>if the json object contains invalid data. </td></tr>
  </table>
  </dd>
</dl>
</td></tr>
<tr class="memitem:a3f61a32b56209587511d358276aed934"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a3f61a32b56209587511d358276aed934">GroupMap</a> = std::map&lt; <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a>, std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt; &gt;</td></tr>
<tr class="separator:a3f61a32b56209587511d358276aed934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505d771e637afa6c26124010e3c561cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> = false</td></tr>
<tr class="memdesc:a505d771e637afa6c26124010e3c561cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set at finalization and prevents alterations to the static item templates.  <a href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">More...</a><br /></td></tr>
<tr class="separator:a505d771e637afa6c26124010e3c561cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c867f6a9f3fd09db30e3c3e3d4303f"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="structitype.html">itype</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a78c867f6a9f3fd09db30e3c3e3d4303f">m_abstracts</a></td></tr>
<tr class="separator:a78c867f6a9f3fd09db30e3c3e3d4303f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8803d050f39c239c1fb55873cbe699c"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="structitype.html">itype</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a></td></tr>
<tr class="separator:aa8803d050f39c239c1fb55873cbe699c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadd69bbf3c9c3aca9ba3c5b1d36765d"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::unique_ptr&lt; <a class="el" href="structitype.html">itype</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a></td></tr>
<tr class="separator:aeadd69bbf3c9c3aca9ba3c5b1d36765d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aec789abd53810026e0d878c0069aea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classItem__factory.html#a3f61a32b56209587511d358276aed934">GroupMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a></td></tr>
<tr class="separator:a1aec789abd53810026e0d878c0069aea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac58203a04bf0d221f64ec46d6d82b96e"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a></td></tr>
<tr class="separator:ac58203a04bf0d221f64ec46d6d82b96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777b712b7a0b03c6e0ad239ad29d7094"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a></td></tr>
<tr class="separator:a777b712b7a0b03c6e0ad239ad29d7094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8879bd7c6bf52cc867d21e003773171"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="item__action_8h.html#a57de7061eac1f29f767f63f516c25b24">item_action_id</a>, <a class="el" href="structuse__function.html">use_function</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a></td></tr>
<tr class="separator:ab8879bd7c6bf52cc867d21e003773171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c8d7d1e0296a28d7d9fb3194cfa4de"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::vector&lt; <a class="el" href="classmigration.html">migration</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a></td></tr>
<tr class="separator:af4c8d7d1e0296a28d7d9fb3194cfa4de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884f46fe503c5e21917b3cb098383c99"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">tool_subtypes</a></td></tr>
<tr class="memdesc:a884f46fe503c5e21917b3cb098383c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the tool subtype mappings for crafting (i.e.  <a href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">More...</a><br /></td></tr>
<tr class="separator:a884f46fe503c5e21917b3cb098383c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af052340e46eca62bd496455f9b345ed5"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#af052340e46eca62bd496455f9b345ed5">repair_tools</a></td></tr>
<tr class="separator:af052340e46eca62bd496455f9b345ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad85da896b2ec191e4514e6d03ce74ef"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">gun_tools</a></td></tr>
<tr class="separator:aad85da896b2ec191e4514e6d03ce74ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc793301935e25dc30818dd974281b7"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">repair_actions</a></td></tr>
<tr class="separator:acbc793301935e25dc30818dd974281b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2020ce7c7301f4a3b8b5595c0bc27c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#afe2020ce7c7301f4a3b8b5595c0bc27c">load_ammo</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:afe2020ce7c7301f4a3b8b5595c0bc27c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec35ae92aa379ec2424d61507bf2e949"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aec35ae92aa379ec2424d61507bf2e949">load_gun</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:aec35ae92aa379ec2424d61507bf2e949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b9af1728de9b96004db5a7ceb5e0fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a89b9af1728de9b96004db5a7ceb5e0fc">load_armor</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a89b9af1728de9b96004db5a7ceb5e0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb78d901e4aaf49cbab604e32cff3890"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#abb78d901e4aaf49cbab604e32cff3890">load_pet_armor</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:abb78d901e4aaf49cbab604e32cff3890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5dfadf99cb6b3dc5c41722cc51a3745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ac5dfadf99cb6b3dc5c41722cc51a3745">load_tool</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:ac5dfadf99cb6b3dc5c41722cc51a3745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14cf9956758d3839da52943c37acb663"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a14cf9956758d3839da52943c37acb663">load_toolmod</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a14cf9956758d3839da52943c37acb663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe743c41bb52871c5a2d347450f7b3ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#abe743c41bb52871c5a2d347450f7b3ce">load_tool_armor</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:abe743c41bb52871c5a2d347450f7b3ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62bd969ef95b44af511ba6ea0db8c7b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a62bd969ef95b44af511ba6ea0db8c7b4">load_book</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a62bd969ef95b44af511ba6ea0db8c7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab809a0f986be4cd520b8bb238ff9e717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ab809a0f986be4cd520b8bb238ff9e717">load_comestible</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:ab809a0f986be4cd520b8bb238ff9e717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417909e28d2d1b631af25f5086130adf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a417909e28d2d1b631af25f5086130adf">load_engine</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a417909e28d2d1b631af25f5086130adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58862a6393021df8c1616e0ed83aae30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a58862a6393021df8c1616e0ed83aae30">load_wheel</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a58862a6393021df8c1616e0ed83aae30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5228d89089a41c368b340915326bd7a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a5228d89089a41c368b340915326bd7a6">load_gunmod</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a5228d89089a41c368b340915326bd7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3eb479a017482c757e4b3c9a347c72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a3a3eb479a017482c757e4b3c9a347c72">load_magazine</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a3a3eb479a017482c757e4b3c9a347c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ee03edfb0eafee710569d8c6983c7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ae6ee03edfb0eafee710569d8c6983c7d">load_battery</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:ae6ee03edfb0eafee710569d8c6983c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcad005219724b3e6f1227ea3ebfdb2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#adcad005219724b3e6f1227ea3ebfdb2e">load_generic</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:adcad005219724b3e6f1227ea3ebfdb2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c35056fa9be3e2a54f3e0d64891ff01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a1c35056fa9be3e2a54f3e0d64891ff01">load_bionic</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a1c35056fa9be3e2a54f3e0d64891ff01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace21fd3d902abf111361b275803d2862"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ace21fd3d902abf111361b275803d2862">check_and_create_magazine_pockets</a> (<a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="memdesc:ace21fd3d902abf111361b275803d2862"><td class="mdescLeft">&#160;</td><td class="mdescRight">a temporary function to aid in nested container migration of magazine and gun json  <a href="classItem__factory.html#ace21fd3d902abf111361b275803d2862">More...</a><br /></td></tr>
<tr class="separator:ace21fd3d902abf111361b275803d2862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae916dfa1b226c1fa141f4d3515640c2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ae916dfa1b226c1fa141f4d3515640c2f">add_special_pockets</a> (<a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="memdesc:ae916dfa1b226c1fa141f4d3515640c2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">adds the pockets that are not encoded in json - CORPSE, MOD, etc.  <a href="classItem__factory.html#ae916dfa1b226c1fa141f4d3515640c2f">More...</a><br /></td></tr>
<tr class="separator:ae916dfa1b226c1fa141f4d3515640c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e5bb18ff8e530d750a009e5458e7dca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a5e5bb18ff8e530d750a009e5458e7dca">finalize</a> ()</td></tr>
<tr class="memdesc:a5e5bb18ff8e530d750a009e5458e7dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">called after all JSON has been read and performs any necessary cleanup tasks  <a href="classItem__factory.html#a5e5bb18ff8e530d750a009e5458e7dca">More...</a><br /></td></tr>
<tr class="separator:a5e5bb18ff8e530d750a009e5458e7dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a176b9f3d6dc48b5ba9cf8d415f754"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#af6a176b9f3d6dc48b5ba9cf8d415f754">load_migration</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo)</td></tr>
<tr class="memdesc:af6a176b9f3d6dc48b5ba9cf8d415f754"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrations transform items loaded from legacy saves.  <a href="classItem__factory.html#af6a176b9f3d6dc48b5ba9cf8d415f754">More...</a><br /></td></tr>
<tr class="separator:af6a176b9f3d6dc48b5ba9cf8d415f754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73971dfefef9fb1202b2f181ef98b255"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a73971dfefef9fb1202b2f181ef98b255">add_migration</a> (const <a class="el" href="classmigration.html">migration</a> &amp;m)</td></tr>
<tr class="separator:a73971dfefef9fb1202b2f181ef98b255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a145484f308dc79d43ea1b6eff2b4f2cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a145484f308dc79d43ea1b6eff2b4f2cc">migrate_id</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;id)</td></tr>
<tr class="memdesc:a145484f308dc79d43ea1b6eff2b4f2cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies any migration of the item id.  <a href="classItem__factory.html#a145484f308dc79d43ea1b6eff2b4f2cc">More...</a><br /></td></tr>
<tr class="separator:a145484f308dc79d43ea1b6eff2b4f2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd06b53e691181b7d01994bb8f498351"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#abd06b53e691181b7d01994bb8f498351">migrate_item</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;id, <a class="el" href="classitem.html">item</a> &amp;obj)</td></tr>
<tr class="memdesc:abd06b53e691181b7d01994bb8f498351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies any migrations to an instance of an item.  <a href="classItem__factory.html#abd06b53e691181b7d01994bb8f498351">More...</a><br /></td></tr>
<tr class="separator:abd06b53e691181b7d01994bb8f498351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e7e81c15cd05a0e23b9dda5f96c23a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a24e7e81c15cd05a0e23b9dda5f96c23a">migrate_item_from_variant</a> (<a class="el" href="classitem.html">item</a> &amp;obj, const std::string &amp;from_variant)</td></tr>
<tr class="memdesc:a24e7e81c15cd05a0e23b9dda5f96c23a"><td class="mdescLeft">&#160;</td><td class="mdescRight">applies a migration to the item if one exists with the given from_variant  <a href="classItem__factory.html#a24e7e81c15cd05a0e23b9dda5f96c23a">More...</a><br /></td></tr>
<tr class="separator:a24e7e81c15cd05a0e23b9dda5f96c23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838f908ffe40039c138823e86103788a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;id) const</td></tr>
<tr class="memdesc:a838f908ffe40039c138823e86103788a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if an item type is known to the <a class="el" href="classItem__factory.html" title="Central item type management class.">Item_factory</a>.  <a href="classItem__factory.html#a838f908ffe40039c138823e86103788a">More...</a><br /></td></tr>
<tr class="separator:a838f908ffe40039c138823e86103788a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cd4dd0d32f16602b6ef248a5a6510ca"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structitype.html">itype</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;id) const</td></tr>
<tr class="memdesc:a7cd4dd0d32f16602b6ef248a5a6510ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the itype with the given id.  <a href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">More...</a><br /></td></tr>
<tr class="separator:a7cd4dd0d32f16602b6ef248a5a6510ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5085a97eaa9f1337fda54892483718ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a5085a97eaa9f1337fda54892483718ef">add_item_type</a> (const <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="memdesc:a5085a97eaa9f1337fda54892483718ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a passed in itype to the collection of item types.  <a href="classItem__factory.html#a5085a97eaa9f1337fda54892483718ef">More...</a><br /></td></tr>
<tr class="separator:a5085a97eaa9f1337fda54892483718ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5734050655293211857b8ca87f59c2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a3d5734050655293211857b8ca87f59c2">has_iuse</a> (const <a class="el" href="item__action_8h.html#a57de7061eac1f29f767f63f516c25b24">item_action_id</a> &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>) const</td></tr>
<tr class="memdesc:a3d5734050655293211857b8ca87f59c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if an iuse is known to the <a class="el" href="classItem__factory.html" title="Central item type management class.">Item_factory</a>.  <a href="classItem__factory.html#a3d5734050655293211857b8ca87f59c2">More...</a><br /></td></tr>
<tr class="separator:a3d5734050655293211857b8ca87f59c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7baab0d89393eb43d382389bd63d98b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a7baab0d89393eb43d382389bd63d98b2">load_item_blacklist</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;json)</td></tr>
<tr class="separator:a7baab0d89393eb43d382389bd63d98b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45af979c36e201b79655109aaa5687d8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a45af979c36e201b79655109aaa5687d8">all</a> () const</td></tr>
<tr class="memdesc:a45af979c36e201b79655109aaa5687d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all item templates (both static and runtime)  <a href="classItem__factory.html#a45af979c36e201b79655109aaa5687d8">More...</a><br /></td></tr>
<tr class="separator:a45af979c36e201b79655109aaa5687d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a99b5d15414c972aafe2d6733d10413"><td class="memItemLeft" align="right" valign="top">std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a9a99b5d15414c972aafe2d6733d10413">get_runtime_types</a> () const</td></tr>
<tr class="memdesc:a9a99b5d15414c972aafe2d6733d10413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get item types created at runtime.  <a href="classItem__factory.html#a9a99b5d15414c972aafe2d6733d10413">More...</a><br /></td></tr>
<tr class="separator:a9a99b5d15414c972aafe2d6733d10413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cfca92f8358a8a4a749fcb8088bfb0d"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a6cfca92f8358a8a4a749fcb8088bfb0d">subtype_replacement</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;) const</td></tr>
<tr class="separator:a6cfca92f8358a8a4a749fcb8088bfb0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe4e054d71cc25acff45c3ddd3989ec"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">find</a> (const std::function&lt; bool(const <a class="el" href="structitype.html">itype</a> &amp;)&gt; &amp;<a class="el" href="structfunc.html">func</a>)</td></tr>
<tr class="memdesc:a2fe4e054d71cc25acff45c3ddd3989ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find all item templates (both static and runtime) matching UnaryPredicate function.  <a href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">More...</a><br /></td></tr>
<tr class="separator:a2fe4e054d71cc25acff45c3ddd3989ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a615b7ac9ef1e02f1858f976583706109"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a> (std::string &amp;msg, const <a class="el" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a> &amp;ammo) const</td></tr>
<tr class="memdesc:a615b7ac9ef1e02f1858f976583706109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks that ammo is listed in <a class="el" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">ammunition_type::name()</a>.  <a href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">More...</a><br /></td></tr>
<tr class="separator:a615b7ac9ef1e02f1858f976583706109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95c2001cf13c3a43d0d260dfff6f070c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="memdesc:a95c2001cf13c3a43d0d260dfff6f070c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called before creating a new template and handles inheritance via copy-from May defer instantiation of the template if depends on other objects not as-yet loaded.  <a href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">More...</a><br /></td></tr>
<tr class="separator:a95c2001cf13c3a43d0d260dfff6f070c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a648a5e87def27dd301a2cd2db6b60f8d"><td class="memTemplParams" colspan="2">template&lt;typename SlotType &gt; </td></tr>
<tr class="memitem:a648a5e87def27dd301a2cd2db6b60f8d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a> (<a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; SlotType &gt; &amp;slotptr, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="memdesc:a648a5e87def27dd301a2cd2db6b60f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the data of the slot struct.  <a href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">More...</a><br /></td></tr>
<tr class="separator:a648a5e87def27dd301a2cd2db6b60f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4490e119ea3ec245b0de626e0f36ca0"><td class="memTemplParams" colspan="2">template&lt;typename SlotType &gt; </td></tr>
<tr class="memitem:aa4490e119ea3ec245b0de626e0f36ca0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">load_slot_optional</a> (<a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; SlotType &gt; &amp;slotptr, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, const std::string &amp;src)</td></tr>
<tr class="memdesc:aa4490e119ea3ec245b0de626e0f36ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load item the item slot if present in json.  <a href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">More...</a><br /></td></tr>
<tr class="separator:aa4490e119ea3ec245b0de626e0f36ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5199d46088632adcd91fc3b89187041a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a5199d46088632adcd91fc3b89187041a">load</a> (<a class="el" href="structislot__tool.html">islot_tool</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a5199d46088632adcd91fc3b89187041a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ee881c5599cb5b622e536b090f87d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a52ee881c5599cb5b622e536b090f87d9">load</a> (<a class="el" href="structislot__comestible.html">islot_comestible</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a52ee881c5599cb5b622e536b090f87d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526dce11d1507dfa5fae6162ae730282"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a526dce11d1507dfa5fae6162ae730282">load</a> (<a class="el" href="structislot__mod.html">islot_mod</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a526dce11d1507dfa5fae6162ae730282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc9fff908ac8cece2d22241445dc8a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aabc9fff908ac8cece2d22241445dc8a9">load</a> (<a class="el" href="structislot__gun.html">islot_gun</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:aabc9fff908ac8cece2d22241445dc8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107f5ea5a78ed4acc84ff1dc65295eb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a107f5ea5a78ed4acc84ff1dc65295eb9">load</a> (<a class="el" href="structislot__gunmod.html">islot_gunmod</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a107f5ea5a78ed4acc84ff1dc65295eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f002355b6183c361139ce1cfcc261ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a3f002355b6183c361139ce1cfcc261ac">load</a> (<a class="el" href="structislot__magazine.html">islot_magazine</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a3f002355b6183c361139ce1cfcc261ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756815860b4e1aad7958f5b15f3210b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a756815860b4e1aad7958f5b15f3210b1">load</a> (<a class="el" href="structislot__bionic.html">islot_bionic</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a756815860b4e1aad7958f5b15f3210b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7661f991170c124a5f1f17668de9a44e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a7661f991170c124a5f1f17668de9a44e">load</a> (<a class="el" href="classrelic.html">relic</a> &amp;slot, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view src)</td></tr>
<tr class="separator:a7661f991170c124a5f1f17668de9a44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74be8fac6c7cb1dc966f98069741955d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a> (std::map&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt; &amp;container, const std::string &amp;iuse_id)</td></tr>
<tr class="separator:a74be8fac6c7cb1dc966f98069741955d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953a512ac8ea396a90d91abfa004b236"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a953a512ac8ea396a90d91abfa004b236">set_use_methods_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;<a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, std::map&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt; &amp;use_methods, std::map&lt; std::string, int &gt; &amp;ammo_scale)</td></tr>
<tr class="separator:a953a512ac8ea396a90d91abfa004b236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e652a1bb11e1fa9ca38fdd48db25bb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structuse__function.html">use_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">usage_from_string</a> (const std::string &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>) const</td></tr>
<tr class="separator:a4e652a1bb11e1fa9ca38fdd48db25bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae858c09c799baa5ab83217cbab2a9b0b"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">usage_from_object</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;obj)</td></tr>
<tr class="separator:ae858c09c799baa5ab83217cbab2a9b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa41ab9d10965da89dfd956fe97586570"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">load_sub_ref</a> (std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt; &amp;ptr, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;obj, const std::string &amp;name, const <a class="el" href="classItem__group.html">Item_group</a> &amp;parent)</td></tr>
<tr class="memdesc:aa41ab9d10965da89dfd956fe97586570"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for <a class="el" href="classItem__group.html" title="This is a list of item spawns.">Item_group</a> loading.  <a href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">More...</a><br /></td></tr>
<tr class="separator:aa41ab9d10965da89dfd956fe97586570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d399f1e90d6996988790c0180f9f55"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aa6d399f1e90d6996988790c0180f9f55">load_string</a> (std::vector&lt; std::string &gt; &amp;vec, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;obj, std::string_view name)</td></tr>
<tr class="separator:aa6d399f1e90d6996988790c0180f9f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1179ce0319705ceafaa7094ec396a37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a> (<a class="el" href="classItem__group.html">Item_group</a> &amp;ig, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;obj, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>)</td></tr>
<tr class="separator:af1179ce0319705ceafaa7094ec396a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71118bb9471dcf03a0ac69f45dacb346"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, <a class="el" href="structitype.html">itype</a> &amp;def, const std::string &amp;src)</td></tr>
<tr class="separator:a71118bb9471dcf03a0ac69f45dacb346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd13937eb5ca9022bed121004829e4fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#abd13937eb5ca9022bed121004829e4fd">set_qualities_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;<a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:abd13937eb5ca9022bed121004829e4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2b39c9a10e628b86b5bf37d82b9e453"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ac2b39c9a10e628b86b5bf37d82b9e453">extend_qualities_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:ac2b39c9a10e628b86b5bf37d82b9e453"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb0fbd130ad5c8ed4911bc2a18a2ac0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aeb0fbd130ad5c8ed4911bc2a18a2ac0b">delete_qualities_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:aeb0fbd130ad5c8ed4911bc2a18a2ac0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9224daa04d7697778df62e68ac393b23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a9224daa04d7697778df62e68ac393b23">relative_qualities_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:a9224daa04d7697778df62e68ac393b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5901cfccc849eb4f9de7020f943de8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ae5901cfccc849eb4f9de7020f943de8f">set_techniques_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string_view &amp;<a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:ae5901cfccc849eb4f9de7020f943de8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0106091d79469a8ecad883461887e17f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a0106091d79469a8ecad883461887e17f">extend_techniques_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:a0106091d79469a8ecad883461887e17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb9ad4a4aff21369193c164c959f693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a8eb9ad4a4aff21369193c164c959f693">delete_techniques_from_json</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, std::string_view <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="structitype.html">itype</a> &amp;def)</td></tr>
<tr class="separator:a8eb9ad4a4aff21369193c164c959f693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8de179e11040e0fa2d66ad9c8a5c9fd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a8de179e11040e0fa2d66ad9c8a5c9fd5">clear</a> ()</td></tr>
<tr class="separator:a8de179e11040e0fa2d66ad9c8a5c9fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73e102368fa0e54940e7ccd69b8c6d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#af73e102368fa0e54940e7ccd69b8c6d7">init</a> ()</td></tr>
<tr class="separator:af73e102368fa0e54940e7ccd69b8c6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedaca7435165e868da9cbd2e7b026466"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#aedaca7435165e868da9cbd2e7b026466">finalize_item_blacklist</a> ()</td></tr>
<tr class="separator:aedaca7435165e868da9cbd2e7b026466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b49fe019e92adc0e8ae3cebdbdf7c75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">finalize_pre</a> (<a class="el" href="structitype.html">itype</a> &amp;obj)</td></tr>
<tr class="memdesc:a8b49fe019e92adc0e8ae3cebdbdf7c75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies part of finalization that don't depend on other items.  <a href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">More...</a><br /></td></tr>
<tr class="separator:a8b49fe019e92adc0e8ae3cebdbdf7c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30cede55b74649c2c130566e132b2852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a30cede55b74649c2c130566e132b2852">register_cached_uses</a> (const <a class="el" href="structitype.html">itype</a> &amp;obj)</td></tr>
<tr class="memdesc:a30cede55b74649c2c130566e132b2852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the item as having repair actions (if it has any).  <a href="classItem__factory.html#a30cede55b74649c2c130566e132b2852">More...</a><br /></td></tr>
<tr class="separator:a30cede55b74649c2c130566e132b2852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3804571719b38b513c078ad2506cb1db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">finalize_post</a> (<a class="el" href="structitype.html">itype</a> &amp;obj)</td></tr>
<tr class="memdesc:a3804571719b38b513c078ad2506cb1db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies part of finalization that depends on other items.  <a href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">More...</a><br /></td></tr>
<tr class="separator:a3804571719b38b513c078ad2506cb1db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0bfd020f04263f39c1f389fed7b7cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a0c0bfd020f04263f39c1f389fed7b7cc">finalize_post_armor</a> (<a class="el" href="structitype.html">itype</a> &amp;obj)</td></tr>
<tr class="separator:a0c0bfd020f04263f39c1f389fed7b7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0a0f21e98dce2bdc061a5fdd8675df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a> (const std::string &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="iuse_8h.html#a7f50bd82c61292cefb2b7a3639229fd3">use_function_pointer</a> f)</td></tr>
<tr class="separator:adc0a0f21e98dce2bdc061a5fdd8675df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bd4331f5f8a97ff77ecd1d00f73808"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a40bd4331f5f8a97ff77ecd1d00f73808">add_iuse</a> (const std::string &amp;<a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="iuse_8h.html#a7f50bd82c61292cefb2b7a3639229fd3">use_function_pointer</a> f, const <a class="el" href="classtranslation.html">translation</a> &amp;info)</td></tr>
<tr class="separator:a40bd4331f5f8a97ff77ecd1d00f73808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6bd27c42a0bb631ea90d9745c3c031b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a> (std::unique_ptr&lt; <a class="el" href="classiuse__actor.html">iuse_actor</a> &gt;)</td></tr>
<tr class="separator:ab6bd27c42a0bb631ea90d9745c3c031b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2575b508d2fea4ba82af973171d6f45a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a2575b508d2fea4ba82af973171d6f45a">npc_implied_flags</a> (<a class="el" href="structitype.html">itype</a> &amp;item_template)</td></tr>
<tr class="separator:a2575b508d2fea4ba82af973171d6f45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d9c7312db07df1a2e0cb97ad8a8dae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__factory.html#a06d9c7312db07df1a2e0cb97ad8a8dae">set_allergy_flags</a> (<a class="el" href="structitype.html">itype</a> &amp;item_template)</td></tr>
<tr class="separator:a06d9c7312db07df1a2e0cb97ad8a8dae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Central item type management class. </p>
<p>It contains a map of all item types, accessible via <a class="el" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>. Those item types are loaded from json via the load_* functions.</p>
<p>It also contains all item groups that are used to spawn items.</p>
<p>You usually use the single global instance <a class="el" href="item__factory_8h.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00085">85</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a3f61a32b56209587511d358276aed934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f61a32b56209587511d358276aed934">&#9670;&nbsp;</a></span>GroupMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classItem__factory.html#a3f61a32b56209587511d358276aed934">Item_factory::GroupMap</a> =  std::map&lt;<a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a>, std::unique_ptr&lt;<a class="el" href="classItem__spawn__data.html">Item_spawn_data</a>&gt; &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00282">282</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afe8c8beaa42a135b40cbdc5dcfbd989d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe8c8beaa42a135b40cbdc5dcfbd989d">&#9670;&nbsp;</a></span>Item_factory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Item_factory::Item_factory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01635">1635</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;{</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="classItem__factory.html#af73e102368fa0e54940e7ccd69b8c6d7">init</a>();</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_af73e102368fa0e54940e7ccd69b8c6d7"><div class="ttname"><a href="classItem__factory.html#af73e102368fa0e54940e7ccd69b8c6d7">Item_factory::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01713">item_factory.cpp:1713</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l01713">init()</a>.</p>

</div>
</div>
<a id="a8bbec0a6c1ee7ec9e858faadb20f2dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bbec0a6c1ee7ec9e858faadb20f2dc8">&#9670;&nbsp;</a></span>~Item_factory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Item_factory::~Item_factory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab6bd27c42a0bb631ea90d9745c3c031b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6bd27c42a0bb631ea90d9745c3c031b">&#9670;&nbsp;</a></span>add_actor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_actor </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classiuse__actor.html">iuse_actor</a> &gt;&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01691">1691</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;{</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = ptr-&gt;type;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>[ <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ] = <a class="code" href="structuse__function.html">use_function</a>( std::move( ptr ) );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_ab8879bd7c6bf52cc867d21e003773171"><div class="ttname"><a href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">Item_factory::iuse_function_list</a></div><div class="ttdeci">std::map&lt; item_action_id, use_function &gt; iuse_function_list</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00385">item_factory.h:385</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">ot_match_type::type</a></div><div class="ttdeci">@ type</div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00385">iuse_function_list</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">init()</a>.</p>

</div>
</div>
<a id="af1179ce0319705ceafaa7094ec396a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1179ce0319705ceafaa7094ec396a37">&#9670;&nbsp;</a></span>add_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classItem__group.html">Item_group</a> &amp;&#160;</td>
          <td class="paramname"><em>ig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04957">4957</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;{</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;    std::unique_ptr&lt;Item_group&gt; gptr;</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;    <span class="keywordtype">int</span> probability = obj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;prob&quot;</span>, 100 );</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    <a class="code" href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470d">holiday</a> <span class="keyword">event</span> = obj.<a class="code" href="classJsonObject.html#a6d09a42b5272e3c721be6d227e772524">get_enum_value</a>&lt;<a class="code" href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470d">holiday</a>&gt;( <span class="stringliteral">&quot;event&quot;</span>, <a class="code" href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470da334c4a4c42fdb79d7ebc3e73b517e6f8">holiday::none</a> );</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;    std::string subcontext = <span class="stringliteral">&quot;entry within &quot;</span> + <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>;</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <a class="code" href="classJsonArray.html">JsonArray</a> jarr;</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;collection&quot;</span> ) ) {</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;        gptr = std::make_unique&lt;Item_group&gt;( <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d">Item_group::G_COLLECTION</a>, probability, ig.<a class="code" href="classItem__group.html#ad7abcff1b113168d2050f50ff7215d47">with_ammo</a>,</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;                                             ig.<a class="code" href="classItem__group.html#a1e517bd3c204c8b302a902762b71c92c">with_magazine</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, event );</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;        jarr = obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;collection&quot;</span> );</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;distribution&quot;</span> ) ) {</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;        gptr = std::make_unique&lt;Item_group&gt;( <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a17cdc67b4430f8aecea238b1930a237c">Item_group::G_DISTRIBUTION</a>, probability, ig.<a class="code" href="classItem__group.html#ad7abcff1b113168d2050f50ff7215d47">with_ammo</a>,</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                                             ig.<a class="code" href="classItem__group.html#a1e517bd3c204c8b302a902762b71c92c">with_magazine</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, event );</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        jarr = obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;distribution&quot;</span> );</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    }</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    <span class="keywordflow">if</span>( gptr ) {</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> job2 : jarr ) {</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;            <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *gptr, job2, subcontext );</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        }</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        ig.<a class="code" href="classItem__group.html#a965bd73c404d73be5951fdcc919f4ce4">add_entry</a>( std::move( gptr ) );</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    }</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160; </div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;    std::unique_ptr&lt;Single_item_creator&gt; sptr;</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;item&quot;</span> ) ) {</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;        sptr = std::make_unique&lt;Single_item_creator&gt;(</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;                   obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;item&quot;</span> ), <a class="code" href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4ad5f29c3eb32ab68f2eaa1e5914a05e26">Single_item_creator::S_ITEM</a>, probability, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, event );</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;group&quot;</span> ) ) {</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;        sptr = std::make_unique&lt;Single_item_creator&gt;(</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;                   obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;group&quot;</span> ), <a class="code" href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4a4520ad5a177a9f1fb52ff38220bfc684">Single_item_creator::S_ITEM_GROUP</a>, probability,</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;                   <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, event );</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;    }</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    <span class="keywordflow">if</span>( !sptr ) {</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    }</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160; </div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;artifact&quot;</span> ) ) {</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        sptr-&gt;artifact = cata::make_value&lt;Item_spawn_data::relic_generator&gt;();</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        sptr-&gt;artifact-&gt;load( obj.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;artifact&quot;</span> ) );</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;    }</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160; </div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    <a class="code" href="classItem__modifier.html">Item_modifier</a> modifier;</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;    <span class="keywordtype">bool</span> use_modifier = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    use_modifier |= <a class="code" href="item__factory_8cpp.html#ad98ce0506dfd02682ad8dfc72c6d97f7">load_min_max</a>( modifier.<a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>, obj, <span class="stringliteral">&quot;damage&quot;</span> );</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;    use_modifier |= <a class="code" href="item__factory_8cpp.html#ad98ce0506dfd02682ad8dfc72c6d97f7">load_min_max</a>( modifier.<a class="code" href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">dirt</a>, obj, <span class="stringliteral">&quot;dirt&quot;</span> );</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;    modifier.<a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>.first *= <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a>;</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;    modifier.<a class="code" href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">damage</a>.second *= <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a>;</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;    use_modifier |= <a class="code" href="item__factory_8cpp.html#ad98ce0506dfd02682ad8dfc72c6d97f7">load_min_max</a>( modifier.<a class="code" href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">charges</a>, obj, <span class="stringliteral">&quot;charges&quot;</span> );</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;    use_modifier |= <a class="code" href="item__factory_8cpp.html#ad98ce0506dfd02682ad8dfc72c6d97f7">load_min_max</a>( modifier.<a class="code" href="classItem__modifier.html#a52ce9168146a3480610954de3bd4b0e9">count</a>, obj, <span class="stringliteral">&quot;count&quot;</span> );</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;    use_modifier |= <a class="code" href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">load_sub_ref</a>( modifier.<a class="code" href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">ammo</a>, obj, <span class="stringliteral">&quot;ammo&quot;</span>, ig );</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;entry-wrapper&quot;</span> ) ) {</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;        sptr-&gt;container_item = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;entry-wrapper&quot;</span> ) );</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;    }</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;container-item&quot;</span> ) ) {</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jo = obj.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;container-item&quot;</span> );</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;        sptr-&gt;container_item = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;item&quot;</span> ) );</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;        sptr-&gt;container_item_variant = jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;variant&quot;</span> );</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;        use_modifier |= <a class="code" href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">load_sub_ref</a>( modifier.<a class="code" href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">container</a>, obj, <span class="stringliteral">&quot;container&quot;</span>, ig );</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    }</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;components&quot;</span> ) ) {</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;        <a class="code" href="classJsonArray.html">JsonArray</a> ja = obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;components&quot;</span> );</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;        std::vector&lt;itype_id&gt; made_of;</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonValue.html">JsonValue</a> <a class="code" href="namespacemath__opers.html#afa17fbd2e65f7936ed252fa80298d9a4">sub</a> : ja ) {</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="structcomponent.html">component</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( <a class="code" href="namespacemath__opers.html#afa17fbd2e65f7936ed252fa80298d9a4">sub</a> );</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;            made_of.emplace_back( <a class="code" href="structcomponent.html">component</a> );</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;        }</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;        sptr-&gt;components_items = made_of;</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;    }</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    use_modifier |= <a class="code" href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">load_sub_ref</a>( modifier.<a class="code" href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">contents</a>, obj, <span class="stringliteral">&quot;contents&quot;</span>, ig );</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    use_modifier |= <a class="code" href="item__factory_8cpp.html#a2bf47e2e78a5b730edae6426abb3d73b">load_str_arr</a>( modifier.<a class="code" href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">snippets</a>, obj, <span class="stringliteral">&quot;snippets&quot;</span> );</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;sealed&quot;</span> ) ) {</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;        modifier.<a class="code" href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">sealed</a> = obj.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;sealed&quot;</span> );</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;        use_modifier = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;    }</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    std::vector&lt;std::string&gt; custom_flags;</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;    use_modifier |= <a class="code" href="classItem__factory.html#aa6d399f1e90d6996988790c0180f9f55">load_string</a>( custom_flags, obj, <span class="stringliteral">&quot;custom-flags&quot;</span> );</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    modifier.<a class="code" href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">custom_flags</a>.clear();</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;cf : custom_flags ) {</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;        modifier.<a class="code" href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">custom_flags</a>.emplace_back( cf );</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    }</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;variant&quot;</span> ) ) {</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;        modifier.<a class="code" href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">variant</a> = obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;variant&quot;</span> );</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;        use_modifier = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;    }</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160; </div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;    <span class="keywordflow">if</span>( use_modifier ) {</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;        sptr-&gt;modifier.emplace( std::move( modifier ) );</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;    }</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;    ig.<a class="code" href="classItem__group.html#a965bd73c404d73be5951fdcc919f4ce4">add_entry</a>( std::move( sptr ) );</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="aclassItem__factory_html_aa41ab9d10965da89dfd956fe97586570"><div class="ttname"><a href="classItem__factory.html#aa41ab9d10965da89dfd956fe97586570">Item_factory::load_sub_ref</a></div><div class="ttdeci">bool load_sub_ref(std::unique_ptr&lt; Item_spawn_data &gt; &amp;ptr, const JsonObject &amp;obj, const std::string &amp;name, const Item_group &amp;parent)</div><div class="ttdoc">Helper function for Item_group loading.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04875">item_factory.cpp:4875</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aa6d399f1e90d6996988790c0180f9f55"><div class="ttname"><a href="classItem__factory.html#aa6d399f1e90d6996988790c0180f9f55">Item_factory::load_string</a></div><div class="ttdeci">bool load_string(std::vector&lt; std::string &gt; &amp;vec, const JsonObject &amp;obj, std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04938">item_factory.cpp:4938</a></div></div>
<div class="ttc" id="aclassItem__factory_html_af1179ce0319705ceafaa7094ec396a37"><div class="ttname"><a href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">Item_factory::add_entry</a></div><div class="ttdeci">void add_entry(Item_group &amp;ig, const JsonObject &amp;obj, const std::string &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04957">item_factory.cpp:4957</a></div></div>
<div class="ttc" id="aclassItem__group_html_a1e517bd3c204c8b302a902762b71c92c"><div class="ttname"><a href="classItem__group.html#a1e517bd3c204c8b302a902762b71c92c">Item_group::with_magazine</a></div><div class="ttdeci">const int with_magazine</div><div class="ttdoc">Every item in this group has this chance [0-100%] for items to spawn with their default magazine (if ...</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00403">item_group.h:403</a></div></div>
<div class="ttc" id="aclassItem__group_html_a965bd73c404d73be5951fdcc919f4ce4"><div class="ttname"><a href="classItem__group.html#a965bd73c404d73be5951fdcc919f4ce4">Item_group::add_entry</a></div><div class="ttdeci">void add_entry(std::unique_ptr&lt; Item_spawn_data &gt; ptr)</div><div class="ttdoc">Once the relevant data has been read from JSON, this function is always called (either from Item_fact...</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00815">item_group.cpp:815</a></div></div>
<div class="ttc" id="aclassItem__group_html_ad7abcff1b113168d2050f50ff7215d47"><div class="ttname"><a href="classItem__group.html#ad7abcff1b113168d2050f50ff7215d47">Item_group::with_ammo</a></div><div class="ttdeci">const int with_ammo</div><div class="ttdoc">These aren't directly used.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00401">item_group.h:401</a></div></div>
<div class="ttc" id="aclassItem__group_html_ae51de1ef43540d3d8671f68faaa88ea0a17cdc67b4430f8aecea238b1930a237c"><div class="ttname"><a href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a17cdc67b4430f8aecea238b1930a237c">Item_group::G_DISTRIBUTION</a></div><div class="ttdeci">@ G_DISTRIBUTION</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00359">item_group.h:358</a></div></div>
<div class="ttc" id="aclassItem__group_html_ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d"><div class="ttname"><a href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d">Item_group::G_COLLECTION</a></div><div class="ttdeci">@ G_COLLECTION</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00357">item_group.h:357</a></div></div>
<div class="ttc" id="aclassItem__modifier_html"><div class="ttname"><a href="classItem__modifier.html">Item_modifier</a></div><div class="ttdoc">Creates a single item, but can change various aspects of the created item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00238">item_group.h:239</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a07d9e6672bbd21ac24d77966528149df"><div class="ttname"><a href="classItem__modifier.html#a07d9e6672bbd21ac24d77966528149df">Item_modifier::custom_flags</a></div><div class="ttdeci">std::vector&lt; flag_id &gt; custom_flags</div><div class="ttdoc">Custom flags to be added to the item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00272">item_group.h:272</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a132b390cd7ab706137a8d51662242029"><div class="ttname"><a href="classItem__modifier.html#a132b390cd7ab706137a8d51662242029">Item_modifier::sealed</a></div><div class="ttdeci">bool sealed</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00268">item_group.h:268</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a2ebb01079005737a9969e3974a3f4202"><div class="ttname"><a href="classItem__modifier.html#a2ebb01079005737a9969e3974a3f4202">Item_modifier::damage</a></div><div class="ttdeci">std::pair&lt; int, int &gt; damage</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00241">item_group.h:241</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a3483befcea35a8740a31ec5349ddf7a5"><div class="ttname"><a href="classItem__modifier.html#a3483befcea35a8740a31ec5349ddf7a5">Item_modifier::dirt</a></div><div class="ttdeci">std::pair&lt; int, int &gt; dirt</div><div class="ttdoc">Charges to spawn the item with, if this turns out to be negative, the default charges are used.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00247">item_group.h:247</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a52ce9168146a3480610954de3bd4b0e9"><div class="ttname"><a href="classItem__modifier.html#a52ce9168146a3480610954de3bd4b0e9">Item_modifier::count</a></div><div class="ttdeci">std::pair&lt; int, int &gt; count</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00242">item_group.h:242</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_a7f9abd149a2d2734f7dd0f71b7c2957a"><div class="ttname"><a href="classItem__modifier.html#a7f9abd149a2d2734f7dd0f71b7c2957a">Item_modifier::charges</a></div><div class="ttdeci">std::pair&lt; int, int &gt; charges</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00248">item_group.h:248</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_aa4cec2f060e7f317f6a6590eed5e4993"><div class="ttname"><a href="classItem__modifier.html#aa4cec2f060e7f317f6a6590eed5e4993">Item_modifier::variant</a></div><div class="ttdeci">std::string variant</div><div class="ttdoc">gun variant id, for guns with variants</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00277">item_group.h:277</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_abc5594f7806fc9daa8abba7183b593d1"><div class="ttname"><a href="classItem__modifier.html#abc5594f7806fc9daa8abba7183b593d1">Item_modifier::container</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; container</div><div class="ttdoc">Item should spawn inside this container, can be NULL, if item should not spawn in a container.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00263">item_group.h:263</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_ac9f143ebb9e6bbded754cc3e7dcde6b0"><div class="ttname"><a href="classItem__modifier.html#ac9f143ebb9e6bbded754cc3e7dcde6b0">Item_modifier::contents</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; contents</div><div class="ttdoc">This is used to create the contents of an item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00267">item_group.h:267</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_af2fc2ffec0292c47cd45d020b71b4d71"><div class="ttname"><a href="classItem__modifier.html#af2fc2ffec0292c47cd45d020b71b4d71">Item_modifier::ammo</a></div><div class="ttdeci">std::unique_ptr&lt; Item_spawn_data &gt; ammo</div><div class="ttdoc">Ammo for guns.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00253">item_group.h:253</a></div></div>
<div class="ttc" id="aclassItem__modifier_html_af8b3b6d2fb77988d71fd2cb41dd2faf9"><div class="ttname"><a href="classItem__modifier.html#af8b3b6d2fb77988d71fd2cb41dd2faf9">Item_modifier::snippets</a></div><div class="ttdeci">std::vector&lt; snippet_id &gt; snippets</div><div class="ttdoc">Custom sub set of snippets to be randomly chosen from and then applied to the item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00282">item_group.h:282</a></div></div>
<div class="ttc" id="aclassJsonArray_html"><div class="ttname"><a href="classJsonArray.html">JsonArray</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00346">flexbuffer_json.h:347</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a1abb3808bb2a992716d5ef6f27a32b3c"><div class="ttname"><a href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00813">flexbuffer_json-inl.h:813</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3b9722313d9692826235c87e73e94f04"><div class="ttname"><a href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">JsonObject::get_object</a></div><div class="ttdeci">JsonObject get_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00864">flexbuffer_json-inl.h:864</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3d748a5d67f435bbd170a3e92a7cd0ca"><div class="ttname"><a href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">JsonObject::get_bool</a></div><div class="ttdeci">bool get_bool(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00850">flexbuffer_json-inl.h:850</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a4d917fcb285203f91b74002565375dce"><div class="ttname"><a href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">JsonObject::has_array</a></div><div class="ttdeci">bool has_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00984">flexbuffer_json-inl.h:984</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a532ea812759469d654c7fde4738d11d5"><div class="ttname"><a href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">JsonObject::get_int</a></div><div class="ttdeci">int get_int(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00840">flexbuffer_json-inl.h:840</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a619cb4eae7922f357db47479fc71cf9b"><div class="ttname"><a href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">JsonObject::has_member</a></div><div class="ttdeci">bool has_member(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00944">flexbuffer_json-inl.h:944</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a62e862f0390ad12302c9677069fb9d23"><div class="ttname"><a href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">JsonObject::has_object</a></div><div class="ttdeci">bool has_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00990">flexbuffer_json-inl.h:990</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a6d09a42b5272e3c721be6d227e772524"><div class="ttname"><a href="classJsonObject.html#a6d09a42b5272e3c721be6d227e772524">JsonObject::get_enum_value</a></div><div class="ttdeci">E get_enum_value(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00874">flexbuffer_json-inl.h:874</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ac8dd6467300eb62e7ce842c3d99c083e"><div class="ttname"><a href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">JsonObject::has_string</a></div><div class="ttdeci">bool has_string(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00972">flexbuffer_json-inl.h:972</a></div></div>
<div class="ttc" id="aclassJsonValue_html"><div class="ttname"><a href="classJsonValue.html">JsonValue</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00166">flexbuffer_json.h:167</a></div></div>
<div class="ttc" id="aclassSingle__item__creator_html_aee007d93bc2db77d2035c62fa80369f4a4520ad5a177a9f1fb52ff38220bfc684"><div class="ttname"><a href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4a4520ad5a177a9f1fb52ff38220bfc684">Single_item_creator::S_ITEM_GROUP</a></div><div class="ttdeci">@ S_ITEM_GROUP</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00317">item_group.h:317</a></div></div>
<div class="ttc" id="aclassSingle__item__creator_html_aee007d93bc2db77d2035c62fa80369f4ad5f29c3eb32ab68f2eaa1e5914a05e26"><div class="ttname"><a href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4ad5f29c3eb32ab68f2eaa1e5914a05e26">Single_item_creator::S_ITEM</a></div><div class="ttdeci">@ S_ITEM</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00318">item_group.h:318</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aenums_8h_html_a7d3ec9c894bd9fab7bce62605cb6470d"><div class="ttname"><a href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470d">holiday</a></div><div class="ttdeci">holiday</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00084">enums.h:84</a></div></div>
<div class="ttc" id="aenums_8h_html_a7d3ec9c894bd9fab7bce62605cb6470da334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470da334c4a4c42fdb79d7ebc3e73b517e6f8">holiday::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a2bf47e2e78a5b730edae6426abb3d73b"><div class="ttname"><a href="item__factory_8cpp.html#a2bf47e2e78a5b730edae6426abb3d73b">load_str_arr</a></div><div class="ttdeci">bool load_str_arr(std::vector&lt; T &gt; &amp;arr, const JsonObject &amp;obj, const std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04864">item_factory.cpp:4864</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ad98ce0506dfd02682ad8dfc72c6d97f7"><div class="ttname"><a href="item__factory_8cpp.html#ad98ce0506dfd02682ad8dfc72c6d97f7">load_min_max</a></div><div class="ttdeci">bool load_min_max(std::pair&lt; T, T &gt; &amp;pa, const JsonObject &amp;obj, const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04845">item_factory.cpp:4845</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_afa17fbd2e65f7936ed252fa80298d9a4"><div class="ttname"><a href="namespacemath__opers.html#afa17fbd2e65f7936ed252fa80298d9a4">math_opers::sub</a></div><div class="ttdeci">constexpr double sub(double l, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00213">math_parser_impl.h:213</a></div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructitype_html_acbc6974858332fd6933f71a304312d7f"><div class="ttname"><a href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a></div><div class="ttdeci">static constexpr int damage_scale</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01465">itype.h:1465</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8cpp_source.html#l00815">Item_group::add_entry()</a>, <a class="el" href="item__group_8h_source.html#l00253">Item_modifier::ammo</a>, <a class="el" href="item__group_8h_source.html#l00248">Item_modifier::charges</a>, <a class="el" href="item__group_8h_source.html#l00263">Item_modifier::container</a>, <a class="el" href="item__group_8h_source.html#l00267">Item_modifier::contents</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="item__group_8h_source.html#l00242">Item_modifier::count</a>, <a class="el" href="item__group_8h_source.html#l00272">Item_modifier::custom_flags</a>, <a class="el" href="item__group_8h_source.html#l00241">Item_modifier::damage</a>, <a class="el" href="itype_8h_source.html#l01465">itype::damage_scale</a>, <a class="el" href="item__group_8h_source.html#l00247">Item_modifier::dirt</a>, <a class="el" href="item__group_8h_source.html#l00357">Item_group::G_COLLECTION</a>, <a class="el" href="item__group_8h_source.html#l00358">Item_group::G_DISTRIBUTION</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00850">JsonObject::get_bool()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00874">JsonObject::get_enum_value()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00990">JsonObject::has_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="item__factory_8cpp_source.html#l04845">load_min_max()</a>, <a class="el" href="item__factory_8cpp_source.html#l04864">load_str_arr()</a>, <a class="el" href="enums_8h.html#a7d3ec9c894bd9fab7bce62605cb6470da334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="item__group_8h_source.html#l00318">Single_item_creator::S_ITEM</a>, <a class="el" href="item__group_8h_source.html#l00317">Single_item_creator::S_ITEM_GROUP</a>, <a class="el" href="item__group_8h_source.html#l00268">Item_modifier::sealed</a>, <a class="el" href="item__group_8h_source.html#l00282">Item_modifier::snippets</a>, <a class="el" href="math__parser__impl_8h_source.html#l00213">math_opers::sub()</a>, <a class="el" href="item__group_8h_source.html#l00277">Item_modifier::variant</a>, <a class="el" href="item__group_8h_source.html#l00401">Item_group::with_ammo</a>, and <a class="el" href="item__group_8h_source.html#l00403">Item_group::with_magazine</a>.</p>

</div>
</div>
<a id="a5085a97eaa9f1337fda54892483718ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5085a97eaa9f1337fda54892483718ef">&#9670;&nbsp;</a></span>add_item_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_item_type </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a passed in itype to the collection of item types. </p>
<p>If the item type overrides an existing type, the existing type is deleted first. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">def</td><td>The new item type, must not be null. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01697">1697</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;{</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.count( def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="comment">// Do NOT allow overwriting it, it&#39;s undefined behavior</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to add runtime type %s, but it exists already&quot;</span>, def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keyword">auto</span> &amp;new_item_ptr = <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>[ def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ];</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    new_item_ptr = std::make_unique&lt;itype&gt;( def );</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> ) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">finalize_pre</a>( *new_item_ptr );</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <a class="code" href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">finalize_post</a>( *new_item_ptr );</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a3804571719b38b513c078ad2506cb1db"><div class="ttname"><a href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">Item_factory::finalize_post</a></div><div class="ttdeci">void finalize_post(itype &amp;obj)</div><div class="ttdoc">Applies part of finalization that depends on other items.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00726">item_factory.cpp:726</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a505d771e637afa6c26124010e3c561cf"><div class="ttname"><a href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">Item_factory::frozen</a></div><div class="ttdeci">bool frozen</div><div class="ttdoc">Set at finalization and prevents alterations to the static item templates.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00274">item_factory.h:274</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a8b49fe019e92adc0e8ae3cebdbdf7c75"><div class="ttname"><a href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">Item_factory::finalize_pre</a></div><div class="ttdeci">void finalize_pre(itype &amp;obj)</div><div class="ttdoc">Applies part of finalization that don't depend on other items.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00220">item_factory.cpp:220</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aeadd69bbf3c9c3aca9ba3c5b1d36765d"><div class="ttname"><a href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">Item_factory::m_runtimes</a></div><div class="ttdeci">std::map&lt; itype_id, std::unique_ptr&lt; itype &gt; &gt; m_runtimes</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00280">item_factory.h:280</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="astructitype_html_ab018b62882b32eef884f4efd769c0993"><div class="ttname"><a href="structitype.html#ab018b62882b32eef884f4efd769c0993">itype::id</a></div><div class="ttdeci">itype_id id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01276">itype.h:1276</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__factory_8cpp_source.html#l00726">finalize_post()</a>, <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>, <a class="el" href="item__factory_8h_source.html#l00274">frozen</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, and <a class="el" href="item__factory_8h_source.html#l00280">m_runtimes</a>.</p>

</div>
</div>
<a id="adc0a0f21e98dce2bdc061a5fdd8675df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc0a0f21e98dce2bdc061a5fdd8675df">&#9670;&nbsp;</a></span>add_iuse() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_iuse </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="iuse_8h.html#a7f50bd82c61292cefb2b7a3639229fd3">use_function_pointer</a>&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01679">1679</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;{</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>[ <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ] = <a class="code" href="structuse__function.html">use_function</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, f );</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00385">iuse_function_list</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">init()</a>.</p>

</div>
</div>
<a id="a40bd4331f5f8a97ff77ecd1d00f73808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bd4331f5f8a97ff77ecd1d00f73808">&#9670;&nbsp;</a></span>add_iuse() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_iuse </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="iuse_8h.html#a7f50bd82c61292cefb2b7a3639229fd3">use_function_pointer</a>&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtranslation.html">translation</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01684">1684</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;{</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>[ <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ] =</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <a class="code" href="structuse__function.html">use_function</a>( std::make_unique&lt;iuse_function_wrapper_with_info&gt;( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, f, info ) );</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00385">iuse_function_list</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="a73971dfefef9fb1202b2f181ef98b255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73971dfefef9fb1202b2f181ef98b255">&#9670;&nbsp;</a></span>add_migration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_migration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmigration.html">migration</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04515">4515</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;{</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.find( m.<a class="code" href="classmigration.html#a54cc839649038a8ade6d36bc989085a1">id</a> );</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.end() ) {</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;        <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>[m.<a class="code" href="classmigration.html#a54cc839649038a8ade6d36bc989085a1">id</a>] = {m};</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    }</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160; </div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classmigration.html">migration</a> &amp;old : it-&gt;second ) {</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;        <span class="keywordflow">if</span>( old.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;        }</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;        <span class="comment">// If we find one that isn&#39;t from variant, overwrite it</span></div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;        old = m;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    }</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160; </div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    <span class="comment">// Otherwise, we&#39;re specifying a new one.</span></div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    it-&gt;second.push_back( m );</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_af4c8d7d1e0296a28d7d9fb3194cfa4de"><div class="ttname"><a href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">Item_factory::migrations</a></div><div class="ttdeci">std::map&lt; itype_id, std::vector&lt; migration &gt; &gt; migrations</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00392">item_factory.h:392</a></div></div>
<div class="ttc" id="aclassmigration_html"><div class="ttname"><a href="classmigration.html">migration</a></div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00042">item_factory.h:43</a></div></div>
<div class="ttc" id="aclassmigration_html_a54cc839649038a8ade6d36bc989085a1"><div class="ttname"><a href="classmigration.html#a54cc839649038a8ade6d36bc989085a1">migration::id</a></div><div class="ttdeci">itype_id id</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00045">item_factory.h:45</a></div></div>
<div class="ttc" id="aclassmigration_html_a7acae714bde2abd3b487738d28f18312"><div class="ttname"><a href="classmigration.html#a7acae714bde2abd3b487738d28f18312">migration::from_variant</a></div><div class="ttdeci">std::optional&lt; std::string &gt; from_variant</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00047">item_factory.h:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="item__factory_8h_source.html#l00045">migration::id</a>, and <a class="el" href="item__factory_8h_source.html#l00392">migrations</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04536">load_migration()</a>.</p>

</div>
</div>
<a id="ae916dfa1b226c1fa141f4d3515640c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae916dfa1b226c1fa141f4d3515640c2f">&#9670;&nbsp;</a></span>add_special_pockets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::add_special_pockets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>adds the pockets that are not encoded in json - CORPSE, MOD, etc. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03855">3855</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;{</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a> ) &amp;&amp;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;        !<a class="code" href="item__factory_8cpp.html#a2c73934c4589b38796317a41913f6634">has_pocket_type</a>( def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1afd1267e84434bdbba6fd4fa7f869117d">pocket_type::CORPSE</a> ) ) {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;        def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>.emplace_back( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1afd1267e84434bdbba6fd4fa7f869117d">pocket_type::CORPSE</a> );</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    }</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    <span class="keywordflow">if</span>( ( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> || def.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) &amp;&amp; !<a class="code" href="item__factory_8cpp.html#a2c73934c4589b38796317a41913f6634">has_pocket_type</a>( def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ) ) {</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>.emplace_back( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> );</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    }</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="item__factory_8cpp.html#a2c73934c4589b38796317a41913f6634">has_pocket_type</a>( def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a231afbd6f56390a3e531ecbf9eca8ab1">pocket_type::MIGRATION</a> ) ) {</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>.emplace_back( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a231afbd6f56390a3e531ecbf9eca8ab1">pocket_type::MIGRATION</a> );</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    }</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="item__factory_8cpp.html#a2c73934c4589b38796317a41913f6634">has_pocket_type</a>( def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a0f3e32bd57420922c956543d2681ef08">pocket_type::CABLE</a> ) &amp;&amp;</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        def.<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;link_up&quot;</span> ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        <a class="code" href="classpocket__data.html">pocket_data</a> cable_pocket( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a0f3e32bd57420922c956543d2681ef08">pocket_type::CABLE</a> );</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        cable_pocket.rigid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;        def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>.emplace_back( cable_pocket );</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;    }</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;}</div>
<div class="ttc" id="aclasspocket__data_html"><div class="ttname"><a href="classpocket__data.html">pocket_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00450">item_pocket.h:451</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a74ea4bf25fd1d1476b4e5f7065c855a2"><div class="ttname"><a href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a></div><div class="ttdeci">const flag_id flag_CORPSE(&quot;CORPSE&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a2c73934c4589b38796317a41913f6634"><div class="ttname"><a href="item__factory_8cpp.html#a2c73934c4589b38796317a41913f6634">has_pocket_type</a></div><div class="ttdeci">static bool has_pocket_type(const std::vector&lt; pocket_data &gt; &amp;data, pocket_type pk)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03742">item_factory.cpp:3742</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a0f3e32bd57420922c956543d2681ef08"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a0f3e32bd57420922c956543d2681ef08">pocket_type::CABLE</a></div><div class="ttdeci">@ CABLE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a231afbd6f56390a3e531ecbf9eca8ab1"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a231afbd6f56390a3e531ecbf9eca8ab1">pocket_type::MIGRATION</a></div><div class="ttdeci">@ MIGRATION</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a></div><div class="ttdeci">@ MOD</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1afd1267e84434bdbba6fd4fa7f869117d"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1afd1267e84434bdbba6fd4fa7f869117d">pocket_type::CORPSE</a></div><div class="ttdeci">@ CORPSE</div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00179">itype.cpp:179</a></div></div>
<div class="ttc" id="astructitype_html_a623ec8243b1e599086fa3a23c3179370"><div class="ttname"><a href="structitype.html#a623ec8243b1e599086fa3a23c3179370">itype::gun</a></div><div class="ttdeci">cata::value_ptr&lt; islot_gun &gt; gun</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01207">itype.h:1207</a></div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
<div class="ttc" id="astructitype_html_a72121b6b478fae1969a4b559f3ded22f"><div class="ttname"><a href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">itype::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00164">itype.cpp:164</a></div></div>
<div class="ttc" id="astructitype_html_aa93ea10e5a9052713479ac2f21dfa3c0"><div class="ttname"><a href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">itype::pockets</a></div><div class="ttdeci">std::vector&lt; pocket_data &gt; pockets</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01253">itype.h:1253</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a0f3e32bd57420922c956543d2681ef08">CABLE</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1afd1267e84434bdbba6fd4fa7f869117d">CORPSE</a>, <a class="el" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a>, <a class="el" href="itype_8cpp_source.html#l00179">itype::get_use()</a>, <a class="el" href="itype_8h_source.html#l01207">itype::gun</a>, <a class="el" href="itype_8cpp_source.html#l00164">itype::has_flag()</a>, <a class="el" href="item__factory_8cpp_source.html#l03742">has_pocket_type()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a231afbd6f56390a3e531ecbf9eca8ab1">MIGRATION</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">MOD</a>, <a class="el" href="itype_8h_source.html#l01253">itype::pockets</a>, <a class="el" href="item__pocket_8h_source.html#l00546">pocket_data::rigid</a>, and <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a45af979c36e201b79655109aaa5687d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45af979c36e201b79655109aaa5687d8">&#9670;&nbsp;</a></span>all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt; Item_factory::all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all item templates (both static and runtime) </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05398">5398</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;{</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> );</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160; </div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;    std::vector&lt;const itype *&gt; res;</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    res.reserve( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.size() + <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.size() );</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160; </div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> ) {</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;        res.push_back( &amp;e.second );</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    }</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a> ) {</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;        res.push_back( e.second.get() );</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    }</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160; </div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;}</div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aa8803d050f39c239c1fb55873cbe699c"><div class="ttname"><a href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">Item_factory::m_templates</a></div><div class="ttdeci">std::unordered_map&lt; itype_id, itype &gt; m_templates</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00278">item_factory.h:278</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>.</p>

</div>
</div>
<a id="a615b7ac9ef1e02f1858f976583706109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a615b7ac9ef1e02f1858f976583706109">&#9670;&nbsp;</a></span>check_ammo_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::check_ammo_type </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a> &amp;&#160;</td>
          <td class="paramname"><em>ammo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks that ammo is listed in <a class="el" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">ammunition_type::name()</a>. </p>
<p>At least one instance of this ammo type should be defined. If any of checks fails, prints a message to the msg stream. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Stream in which all error messages are printed. </td></tr>
    <tr><td class="paramname">ammo</td><td>Ammo type to check. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01940">1940</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;{</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span>( ammo.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span>( !ammo.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;ammo type %s is not known\n&quot;</span>, ammo.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    }</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">if</span>( std::none_of( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.begin(),</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end(), [&amp;ammo]( <span class="keyword">const</span> decltype( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> )::value_type &amp; e ) {</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordflow">return</span> e.second.ammo &amp;&amp; e.second.ammo-&gt;type == ammo;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;} ) ) {</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;there is no actual ammo of type %s defined\n&quot;</span>, ammo.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;}</div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>.</p>

</div>
</div>
<a id="ace21fd3d902abf111361b275803d2862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace21fd3d902abf111361b275803d2862">&#9670;&nbsp;</a></span>check_and_create_magazine_pockets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::check_and_create_magazine_pockets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>a temporary function to aid in nested container migration of magazine and gun json </p>
<ul>
<li>creates a magazine pocket if none is specified and the islot is loaded </li>
</ul>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03774">3774</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;{</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="comment">// the item we&#39;re trying to migrate must actually have data for ammo</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.empty() &amp;&amp; !( def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> || def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) ) {</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    }</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id.empty() ) {</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;        <span class="comment">// If tool has no ammo type it needs no magazine.</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    }</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;max_charges == 0 &amp;&amp; def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.empty() ) {</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        <span class="comment">// If tool has no charges nor magazines, it needs no magazine.</span></div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    }</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="item__factory_8cpp.html#a4e4baff5c35538bac0244935d2e66d47">has_only_special_pockets</a>( def ) ) {</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        <span class="comment">// this means pockets were defined in json already</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;        <span class="comment">// we assume they&#39;re good to go, or error elsewhere</span></div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;max_charges != 0 ) {</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;            <span class="comment">// warn about redundant max_charges definition</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Redundant max charge value specified for %s with magazine pocket.&quot;</span>,</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;                      def.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        }</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    }</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160; </div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <span class="comment">// Thing uses no ammo</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> &amp;&amp; def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type.empty() ) {</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    }</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id.empty() ) {</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;    }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160; </div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    <a class="code" href="classpocket__data.html">pocket_data</a> mag_data;</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;    mag_data.<a class="code" href="classpocket__data.html#a12690c8edc6efd436773c9b00cf18c7b">holster</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    mag_data.<a class="code" href="classpocket__data.html#afa538b4f90f6318f78867b796047a4da">volume_capacity</a> = 200_liter;</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    mag_data.<a class="code" href="classpocket__data.html#a68245c6a45a2204530a4f6022e465d6e">max_contains_weight</a> = 2000000_kilogram;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    mag_data.<a class="code" href="classpocket__data.html#ae37cc2aa0c38454eace6f00483ff60c2">max_item_length</a> = 2_km;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    mag_data.<a class="code" href="classpocket__data.html#af38e21f567b141ddb287fa318dcab380">watertight</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keywordflow">if</span>( !def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.empty() ) {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        mag_data.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> = <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        mag_data.<a class="code" href="classpocket__data.html#ac5a8cd7b13da6b6f42ca3c03957cbf94">rigid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        <a class="code" href="classstring__id.html">ammotype</a> default_ammo = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">ammotype::NULL_ID</a>();</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;            default_ammo = *def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id.begin();</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;        }</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;        <span class="keywordflow">if</span>( !default_ammo.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;            <span class="keyword">auto</span> magazines_for_default_ammo = def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.find( default_ammo );</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;            <span class="keywordflow">if</span>( magazines_for_default_ammo == def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.end() ) {</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s defines magazines but no magazine for its default ammo type&quot;</span>,</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                          def.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( !magazines_for_default_ammo-&gt;second.empty() );</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;                mag_data.<a class="code" href="classpocket__data.html#a3b1be089eafd42e2292f0bdecd4faa8c">default_magazine</a> = *magazines_for_default_ammo-&gt;second.begin();</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;            }</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        }</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a>, std::set&lt;itype_id&gt;&gt; &amp;mag_pair : def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a> ) {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;mag_type : mag_pair.second ) {</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;                mag_data.<a class="code" href="classpocket__data.html#a0396faa6773cd1cff9bd0717ad957296">item_id_restriction</a>.insert( mag_type );</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;            }</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        }</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        mag_data.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> = <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        mag_data.<a class="code" href="classpocket__data.html#ac5a8cd7b13da6b6f42ca3c03957cbf94">rigid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;amtype : def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type ) {</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                mag_data.<a class="code" href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">ammo_restriction</a>.emplace( amtype, def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity );</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        }</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;amtype : def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id ) {</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                mag_data.<a class="code" href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">ammo_restriction</a>.emplace( amtype, def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;max_charges );</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            }</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;            def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;max_charges = 0;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;            def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;def_charges = 0;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        }</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    }</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a>.push_back( mag_data );</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s needs pocket definitions&quot;</span> ), def.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;}</div>
<div class="ttc" id="aclasspocket__data_html_a0396faa6773cd1cff9bd0717ad957296"><div class="ttname"><a href="classpocket__data.html#a0396faa6773cd1cff9bd0717ad957296">pocket_data::item_id_restriction</a></div><div class="ttdeci">cata::flat_set&lt; itype_id &gt; item_id_restriction</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00539">item_pocket.h:539</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a12690c8edc6efd436773c9b00cf18c7b"><div class="ttname"><a href="classpocket__data.html#a12690c8edc6efd436773c9b00cf18c7b">pocket_data::holster</a></div><div class="ttdeci">bool holster</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00482">item_pocket.h:482</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a12c2c1e1195b2eb0d2fa2232463a12fa"><div class="ttname"><a href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">pocket_data::type</a></div><div class="ttdeci">pocket_type type</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00467">item_pocket.h:467</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a3b1be089eafd42e2292f0bdecd4faa8c"><div class="ttname"><a href="classpocket__data.html#a3b1be089eafd42e2292f0bdecd4faa8c">pocket_data::default_magazine</a></div><div class="ttdeci">itype_id default_magazine</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00544">item_pocket.h:544</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a5a5e9ddb054fd73b3806cdc892d6f73e"><div class="ttname"><a href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">pocket_data::ammo_restriction</a></div><div class="ttdeci">std::map&lt; ammotype, int &gt; ammo_restriction</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00536">item_pocket.h:536</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a68245c6a45a2204530a4f6022e465d6e"><div class="ttname"><a href="classpocket__data.html#a68245c6a45a2204530a4f6022e465d6e">pocket_data::max_contains_weight</a></div><div class="ttdeci">units::mass max_contains_weight</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00477">item_pocket.h:477</a></div></div>
<div class="ttc" id="aclasspocket__data_html_ac5a8cd7b13da6b6f42ca3c03957cbf94"><div class="ttname"><a href="classpocket__data.html#ac5a8cd7b13da6b6f42ca3c03957cbf94">pocket_data::rigid</a></div><div class="ttdeci">bool rigid</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00546">item_pocket.h:546</a></div></div>
<div class="ttc" id="aclasspocket__data_html_ae37cc2aa0c38454eace6f00483ff60c2"><div class="ttname"><a href="classpocket__data.html#ae37cc2aa0c38454eace6f00483ff60c2">pocket_data::max_item_length</a></div><div class="ttdeci">units::length max_item_length</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00480">item_pocket.h:480</a></div></div>
<div class="ttc" id="aclasspocket__data_html_af38e21f567b141ddb287fa318dcab380"><div class="ttname"><a href="classpocket__data.html#af38e21f567b141ddb287fa318dcab380">pocket_data::watertight</a></div><div class="ttdeci">bool watertight</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00506">item_pocket.h:506</a></div></div>
<div class="ttc" id="aclasspocket__data_html_afa538b4f90f6318f78867b796047a4da"><div class="ttname"><a href="classpocket__data.html#afa538b4f90f6318f78867b796047a4da">pocket_data::volume_capacity</a></div><div class="ttdeci">units::volume volume_capacity</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00469">item_pocket.h:469</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; ammunition_type &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; ammunition_type &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a4e4baff5c35538bac0244935d2e66d47"><div class="ttname"><a href="item__factory_8cpp.html#a4e4baff5c35538bac0244935d2e66d47">has_only_special_pockets</a></div><div class="ttdeci">static bool has_only_special_pockets(const itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03752">item_factory.cpp:3752</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a></div><div class="ttdeci">@ MAGAZINE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="astructitype_html_a291870408701f0174d8c46b7f770fbaf"><div class="ttname"><a href="structitype.html#a291870408701f0174d8c46b7f770fbaf">itype::get_id</a></div><div class="ttdeci">itype_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01497">itype.h:1497</a></div></div>
<div class="ttc" id="astructitype_html_a8f4b158de33b6320ba43249b005a2f94"><div class="ttname"><a href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">itype::magazines</a></div><div class="ttdeci">std::map&lt; ammotype, std::set&lt; itype_id &gt; &gt; magazines</div><div class="ttdoc">Magazine types (if any) for each ammo type that can be used to reload this item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01335">itype.h:1335</a></div></div>
<div class="ttc" id="astructitype_html_aba9992b8bc80b65d4153370b3e0755ec"><div class="ttname"><a href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">itype::magazine</a></div><div class="ttdeci">cata::value_ptr&lt; islot_magazine &gt; magazine</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01209">itype.h:1209</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item__pocket_8h_source.html#l00536">pocket_data::ammo_restriction</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__pocket_8h_source.html#l00544">pocket_data::default_magazine</a>, <a class="el" href="itype_8h_source.html#l01497">itype::get_id()</a>, <a class="el" href="item__factory_8cpp_source.html#l03752">has_only_special_pockets()</a>, <a class="el" href="item__pocket_8h_source.html#l00482">pocket_data::holster</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="item__pocket_8h_source.html#l00539">pocket_data::item_id_restriction</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">MAGAZINE</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="itype_8h_source.html#l01335">itype::magazines</a>, <a class="el" href="item__pocket_8h_source.html#l00477">pocket_data::max_contains_weight</a>, <a class="el" href="item__pocket_8h_source.html#l00480">pocket_data::max_item_length</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; ammunition_type &gt;::NULL_ID()</a>, <a class="el" href="itype_8h_source.html#l01253">itype::pockets</a>, <a class="el" href="item__pocket_8h_source.html#l00546">pocket_data::rigid</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, <a class="el" href="item__pocket_8h_source.html#l00467">pocket_data::type</a>, <a class="el" href="item__pocket_8h_source.html#l00469">pocket_data::volume_capacity</a>, and <a class="el" href="item__pocket_8h_source.html#l00506">pocket_data::watertight</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="aa273b2378a5f068c3a3695d150e09ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa273b2378a5f068c3a3695d150e09ee0">&#9670;&nbsp;</a></span>check_definitions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::check_definitions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check consistency of itype and item group definitions, for example valid material, valid tool, etc. </p>
<p>This should be called once after all json data has been loaded. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01961">1961</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;{</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespaceanonymous__namespace_02inventory__ui_8cpp_03.html#a7aa43c76d69812abcc3f0398de671f23">is_container</a> = []( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> * t ) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="keywordtype">bool</span> am_container = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : t-&gt;pockets ) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                am_container = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                <span class="comment">// no need to look further</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        }</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <span class="keywordflow">return</span> am_container;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    };</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> ) {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        std::string msg;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = &amp;elem.second;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#a2ae2ace761a42f9d2101496e0f3b35db">flag_TARDIS</a> ) ) {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02inventory__ui_8cpp_03.html#a7aa43c76d69812abcc3f0398de671f23">is_container</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ) ) {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> = <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;volume;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;count_by_charges() ) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                    <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> /= <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;charges_default();</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem__contents.html">item_contents</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;pockets ).<a class="code" href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">bigger_on_the_inside</a>( <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> ) ) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                    msg += <span class="stringliteral">&quot;is bigger on the inside.  consider using TARDIS flag.\n&quot;</span>;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        }</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160; </div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;picture_id.is_empty() &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;picture_id.is_valid() ) {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            msg +=  <span class="stringliteral">&quot;item has unknown ascii_picture.&quot;</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        }</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="keywordtype">int</span> mag_pocket_number = 0;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;data : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;pockets ) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            <span class="keywordflow">if</span>( data.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ||</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                data.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                mag_pocket_number++;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;            std::string pocket_error = data.<a class="code" href="classpocket__data.html#ae8910e70516aca2bf421958f17e8f76d">check_definition</a>();</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            <span class="keywordflow">if</span>( !pocket_error.empty() ) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                msg += <span class="stringliteral">&quot;problem with pocket: &quot;</span> + pocket_error;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordflow">if</span>( mag_pocket_number &gt; 1 ) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            msg += <span class="stringliteral">&quot;cannot have more than one pocket that handles ammo (MAGAZINE or MAGAZINE_WELL)\n&quot;</span>;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        }</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160; </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;category_force.is_valid() ) {</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            msg += <span class="stringliteral">&quot;undefined category &quot;</span> + <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;category_force.str() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        }</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor ) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;bodypart_str_id&gt;</a> observed_bps;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;data ) {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                <span class="keywordflow">if</span>( portion.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : *portion.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a> ) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                        <span class="keywordflow">if</span>( portion.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;test( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                            <span class="keywordflow">if</span>( observed_bps.<a class="code" href="classcata_1_1flat__set.html#ade623b3a09ac9a00ae027a89436fccf8">count</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                                           <span class="stringliteral">&quot;multiple portions with same body_part %s defined\n&quot;</span>,</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                           <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.str() );</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                            }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                            observed_bps.<a class="code" href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">insert</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                        }</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                    }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                <span class="keywordflow">if</span>( portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> == 0 &amp;&amp; ( portion.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> &gt; 0 || portion.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> &gt; 0 ) ) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                    msg += <span class="stringliteral">&quot;base \&quot;coverage\&quot; value not specified in armor portion despite using \&quot;cover_melee\&quot;/\&quot;cover_ranged\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            <span class="comment">// do tests for the sub bp armor data arrays</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            std::vector&lt;sub_bodypart_str_id&gt; observed_sub_bps;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : portion.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                    <span class="keywordflow">if</span>( std::find( observed_sub_bps.begin(), observed_sub_bps.end(), <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) != observed_sub_bps.end() ) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                                   <span class="stringliteral">&quot;multiple portions with same sub_body_part %s defined\n&quot;</span>,</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                                   <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.str() );</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                    }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                    observed_sub_bps.push_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                <span class="keywordflow">if</span>( portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> == 0 &amp;&amp; ( portion.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> &gt; 0 || portion.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> &gt; 0 ) ) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                    msg += <span class="stringliteral">&quot;base \&quot;coverage\&quot; value not specified in armor portion despite using \&quot;cover_melee\&quot;/\&quot;cover_ranged\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;            }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <span class="comment">// check the hanging location aren&#39;t being used on the non strapped layer</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            <span class="keywordflow">if</span>( std::find( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;all_layers.begin(), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;all_layers.end(),</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                           <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a> ) == <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;all_layers.end() ) {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : portion.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                        <span class="keywordflow">if</span>( sbp-&gt;<a class="code" href="structsub__body__part__type.html#a97ad7f134f5e89ed216eaa598b3b8ab7">secondary</a> ) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                            msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Secondary hanging locations should only be used on the BELTED layer: %s\n&quot;</span>,</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                                                  sbp.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                        }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                    }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                }</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            }</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <span class="comment">// waist is deprecated</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#ab380189e0d126a0a29bf8a73ca0c1062">flag_WAIST</a> ) ) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Waist has been deprecated as an armor layer and is now a sublocation of the torso on the BELTED layer.  If you are making new content make it BELTED specifically covering the torso_waist.  If you are loading an old mod you are probably safe to ignore this.\n&quot;</span> );</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            <span class="comment">// check that no item has more coverage on any location than the max coverage (100)</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                <span class="keywordflow">if</span>( 100 &lt; portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> || 100 &lt; portion.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> ||</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                    100 &lt; portion.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> ) {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;coverage exceeds the maximum amount for the sub locations coverage can&#39;t exceed 100, item coverage: %d\n&quot;</span>,</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                                          portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> );</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                }</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            <span class="comment">// check that no item has more coverage on any location than the max coverage (100)</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;data ) {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                <span class="keywordflow">if</span>( 100 &lt; portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> || 100 &lt; portion.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> ||</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                    100 &lt; portion.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> ) {</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;coverage exceeds the maximum amount for the locations coverage can&#39;t exceed 100, item coverage: %d\n&quot;</span>,</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                                          portion.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> );</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                }</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <span class="comment">// check that all materials are between 0-100 proportional coverage</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : portion.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                    <span class="keywordflow">if</span>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> &lt; 0 || mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> &gt; 100 ) {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;material %s has proportional coverage %d.  proportional coverage is a value between 0-100.&quot;</span>,</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                                              mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> );</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                    }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            <span class="comment">// check that at least 1 material has 100% coverage on each item</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <span class="comment">// if the advanced materials entry is empty skip this stuff</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                <span class="keywordflow">if</span>( !portion.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>.empty() ) {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : portion.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                        <span class="keywordflow">if</span>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> == 100 ) {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                            found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                        }</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                    }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                    <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;at least 1 material for any armor entry should have proportional coverage 100.  Consider dropping overall coverage to compensate.&quot;</span> );</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                    }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            }</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            <span class="comment">// check each original definition had a valid material thickness</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="comment">// valid thickness is a multiple of sheet thickness</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;armor-&gt;sub_data ) {</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : portion.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                    <span class="keywordflow">if</span>( !mat.<a class="code" href="structpart__material.html#af12d5e9db865e368df5876ae07bc5132">ignore_sheet_thickness</a> &amp;&amp; !mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>-&gt;<a class="code" href="classmaterial__type.html#abcd2ac9f554f977d837febefdf8f7801">is_valid_thickness</a>( mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> ) ) {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;for material %s, %f isn&#39;t a valid multiple of the thickness the underlying material comes in: %f.\n&quot;</span>,</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                              mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a>, mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>-&gt;<a class="code" href="classmaterial__type.html#a7556d9ba7a51f2923f0c9ecc37b523a7">thickness_multiple</a>() );</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                    }</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const damage_type_id, float&gt; &amp;dt : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;melee ) {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            <span class="keywordflow">if</span>( !dt.first.is_valid() ) {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Invalid melee damage type \&quot;%s\&quot;.\n&quot;</span>, dt.first.c_str() );</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;can_have_charges() &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;charges_default() &gt; 0 ) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            msg += <span class="stringliteral">&quot;charges defined but can not have any\n&quot;</span>;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;can_have_charges() &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;charges_default() &lt;= 0 ) {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            msg += <span class="stringliteral">&quot;charges expected but not defined or &lt;= 0\n&quot;</span>;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;weight &lt; 0_gram ) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            msg += <span class="stringliteral">&quot;negative weight\n&quot;</span>;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;weight == 0_gram &amp;&amp; <a class="code" href="item__factory_8cpp.html#a38307e94fb081a7d80d056f2b7166f63">is_physical</a>( *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ) ) {</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            msg += <span class="stringliteral">&quot;zero weight (if zero weight is intentional you can &quot;</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                   <span class="stringliteral">&quot;suppress this error with the ZERO_WEIGHT flag)\n&quot;</span>;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        }</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;volume &lt; 0_ml ) {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            msg += <span class="stringliteral">&quot;negative volume\n&quot;</span>;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;volume &gt; <a class="code" href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a> ) {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;exceeds max volume(%s L)\n&quot;</span>, <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a>( <a class="code" href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a> ) );</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;stack_size &lt;= 0 ) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;count_by_charges() ) {</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid stack_size %d on type using charges\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;stack_size );</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;phase == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid stack_size %d on liquid type\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;stack_size );</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;            }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;price &lt; 0_cent ) {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            msg += <span class="stringliteral">&quot;negative price\n&quot;</span>;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;description.empty() ) {</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;            msg += <span class="stringliteral">&quot;empty description\n&quot;</span>;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        }</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const material_id, int&gt; &amp;mat_id : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;materials ) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            <span class="keywordflow">if</span>( mat_id.first.str() == <span class="stringliteral">&quot;null&quot;</span> || !mat_id.first.is_valid() ) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid material %s\n&quot;</span>, mat_id.first.c_str() );</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            }</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;sym.empty() ) {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;            msg += <span class="stringliteral">&quot;symbol not defined\n&quot;</span>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;sym ) != 1 ) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            msg += <span class="stringliteral">&quot;symbol must be exactly one console cell width\n&quot;</span>;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;_a : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;techniques ) {</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <span class="keywordflow">if</span>( !_a.is_valid() ) {</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;unknown technique %s\n&quot;</span>, _a.c_str() );</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            }</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;snippet_category.empty() ) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a04775bb228b86633909183ba39d274d8">has_category</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;snippet_category ) ) {</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;item %s: snippet category %s without any snippets\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id.c_str(),</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                                      <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;snippet_category.c_str() );</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;q : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;qualities ) {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            <span class="keywordflow">if</span>( !q.first.is_valid() ) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;item %s has unknown quality %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id.c_str(),</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                                      q.first.c_str() );</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        }</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;default_container &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;default_container-&gt;is_null() ) {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;default_container ) ) {</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                <span class="comment">// Spawn the item in its default container to generate an error</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                <span class="comment">// if it doesn&#39;t fit.</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ).in_its_container();</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid container property %s\n&quot;</span>,</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                                      <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;default_container-&gt;c_str() );</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;emits ) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="keywordflow">if</span>( !e.is_valid() ) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;item %s has unknown emit source %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id.c_str(), e.c_str() );</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;f : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;faults ) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            <span class="keywordflow">if</span>( !f.is_valid() ) {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid item fault %s\n&quot;</span>, f.c_str() );</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160; </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible ) {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible-&gt;tool.is_null() ) {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *req_tool = <a class="code" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible-&gt;tool );</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                <span class="keywordflow">if</span>( !req_tool-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid tool property %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible-&gt;tool.c_str() );</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <span class="comment">// TODO: Remove invalid, just make those items not comestibles</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;std::string&gt; allowed_ctypes = { <span class="stringliteral">&quot;FOOD&quot;</span>, <span class="stringliteral">&quot;DRINK&quot;</span>, <span class="stringliteral">&quot;MED&quot;</span>, <span class="stringliteral">&quot;INVALID&quot;</span> };</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            <span class="keywordflow">if</span>( allowed_ctypes.count( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible-&gt;comesttype ) == 0 ) {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Invalid comestible type %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;comestible-&gt;comesttype );</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            }</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;brewable ) {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;brewable-&gt;time &lt; 1_turns ) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                msg += <span class="stringliteral">&quot;brewable time is less than 1 turn\n&quot;</span>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;brewable-&gt;results.empty() ) {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                msg += <span class="stringliteral">&quot;empty product list\n&quot;</span>;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;brewable-&gt;results ) {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.first ) ) {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid result id %s\n&quot;</span>, <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.first.c_str() );</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                }</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;compostable ) {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;compostable-&gt;time &lt; 1_turns ) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                msg += <span class="stringliteral">&quot;fermenting time is less than 1 turn\n&quot;</span>;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;compostable-&gt;results.empty() ) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                msg += <span class="stringliteral">&quot;empty product list\n&quot;</span>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            }</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160; </div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;compostable-&gt;results ) {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.first ) ) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid result id %s\n&quot;</span>, <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.first.c_str() );</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;seed ) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;seed-&gt;grow &lt; 1_turns ) {</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                msg += <span class="stringliteral">&quot;seed growing time is less than 1 turn\n&quot;</span>;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;seed-&gt;fruit_id ) ) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid fruit id %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;seed-&gt;fruit_id.c_str() );</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;seed-&gt;byproducts ) {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) ) {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid byproduct id %s\n&quot;</span>, <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.c_str() );</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                }</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book ) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;skill &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;skill.is_valid() ) {</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                msg += <span class="stringliteral">&quot;uses invalid book skill.\n&quot;</span>;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;martial_art &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;martial_art.is_valid() ) {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;trains invalid martial art &#39;%s&#39;.\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;martial_art.str() );</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;can_use( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book-&gt;martial_art ) {</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                msg += <span class="stringliteral">&quot;has use_action MA_MANUAL but does not specify a martial art\n&quot;</span>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        }</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;can_use( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;book ) {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            msg += <span class="stringliteral">&quot;has use_action MA_MANUAL but is not a book\n&quot;</span>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;milling_data &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;milling_data-&gt;into_.is_null() ) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;milling_data-&gt;into_ ) ) {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                msg += <span class="stringliteral">&quot;type to mill into is invalid: &quot;</span> + <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;milling_data-&gt;into_.str() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo ) {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;type &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;type != <a class="code" href="item__factory_8cpp.html#ab99e9180dbdb80287dbccb38ba002fd0">ammo_NULL</a> ) {</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                msg += <span class="stringliteral">&quot;must define at least one ammo type\n&quot;</span>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;casing &amp;&amp; ( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;casing ) ||</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                                        <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;casing-&gt;is_null() ) ) {</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid casing property %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;casing-&gt;c_str() );</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            }</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;drop.is_null() &amp;&amp; !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;drop ) ) {</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid drop item %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;drop.c_str() );</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;shot_damage.empty() &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;count != 1 ) {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid shot definition, shot count with no shot damage.&quot;</span> );</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;shot_damage.empty() &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;ammo-&gt;count == 1 ) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid shot definition, shot damage with no shot count.&quot;</span> );</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;battery ) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;battery-&gt;max_capacity &lt; 0_mJ ) {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                msg += <span class="stringliteral">&quot;battery cannot have negative maximum charge\n&quot;</span>;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;            }</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        }</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun ) {</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;ammo ) {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, at );</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;ammo.empty() ) {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                <span class="comment">// if gun doesn&#39;t use ammo forbid both integral or detachable magazines</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;clip ) || !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazines.empty() ) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                    msg += <span class="stringliteral">&quot;cannot specify clip_size or magazine without ammo type\n&quot;</span>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a> ) ) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                    msg += <span class="stringliteral">&quot;RELOAD_AND_SHOOT requires an ammo type to be specified\n&quot;</span>;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a> ) &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazines.empty() ) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                    msg += <span class="stringliteral">&quot;RELOAD_AND_SHOOT cannot be used with magazines\n&quot;</span>;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;ammo ) {</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                    <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;clip &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazines.empty() &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine_default.count( at ) ) {</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;specified magazine but none provided for ammo type %s\n&quot;</span>, at.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                    }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                }</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            }</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;barrel_volume &lt; 0_ml ) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                msg += <span class="stringliteral">&quot;gun barrel volume cannot be negative\n&quot;</span>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;skill_used ) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                msg += <span class="stringliteral">&quot;uses no skill\n&quot;</span>;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;skill_used.is_valid() ) {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;uses an invalid skill %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;skill_used.str() );</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;gm : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;default_mods ) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( gm ) ) {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                    msg += <span class="stringliteral">&quot;invalid default mod.\n&quot;</span>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;            }</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;gm : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;built_in_mods ) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( gm ) ) {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                    msg += <span class="stringliteral">&quot;invalid built-in mod.\n&quot;</span>;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;            }</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod ) {</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;location.str().empty() ) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                msg += <span class="stringliteral">&quot;gunmod does not specify location\n&quot;</span>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;            }</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;sight_dispersion &gt;= 0 ) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;field_of_view &lt;= 0 &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;aim_speed &lt; 0 ) {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                    msg += <span class="stringliteral">&quot;gunmod must have both sight_dispersion and field_of_view set or neither of them set\n&quot;</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;aim_speed &gt; 0 ) {</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                    msg += <span class="stringliteral">&quot;Aim speed will be converted to FoV and aim_speed_modifier automatically, if FoV is not set.\n&quot;</span>;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                }</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;sight_dispersion &lt; 0 &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;field_of_view &gt; 0 ) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                msg += <span class="stringliteral">&quot;gunmod must have both sight_dispersion and field_of_view set or neither of them set\n&quot;</span>;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;usable.empty() ) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                msg += <span class="stringliteral">&quot;gunmod does not specify mod targets\n&quot;</span>;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gunmod-&gt;install_time &lt; 0 ) {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                msg += <span class="stringliteral">&quot;gunmod does not specify install time\n&quot;</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;mod ) {</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;mod-&gt;ammo_modifier ) {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, at );</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;mod-&gt;acceptable_ammo ) {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, e );</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;            }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160; </div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;mod-&gt;magazine_adaptor ) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, e.first );</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                <span class="keywordflow">if</span>( e.second.empty() ) {</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;no magazines specified for ammo type %s\n&quot;</span>, e.first.str() );</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;opt : e.second ) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *mag = <a class="code" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>( opt );</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                    <span class="keywordflow">if</span>( !mag-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> || !mag-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type.count( e.first ) ) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                        msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid magazine %s in magazine adapter\n&quot;</span>, opt.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                    }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine ) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;type ) {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, at );</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;            }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;type.empty() ) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                msg += <span class="stringliteral">&quot;magazine did not specify ammo type\n&quot;</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            }</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;capacity &lt; 0 ) {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid capacity %i\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;capacity );</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            }</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;count &lt; 0 || <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;count &gt; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;capacity ) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid count %i\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;count );</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;            }</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;default_ammo = <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;default_ammo;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *da = <a class="code" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>( default_ammo );</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            <span class="keywordflow">if</span>( da-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;type.count( da-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type ) ) {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.count( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id ) &amp;&amp; !<a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id ) ) {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                    <span class="comment">// Verify that the default amnmo can actually be put in this</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                    <span class="comment">// item</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                    <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ).ammo_set( default_ammo, 1 );</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid default_ammo %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;default_ammo.str() );</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;reload_time &lt; 0 ) {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid reload_time %i\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;reload_time );</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;linkage &amp;&amp; ( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;linkage ) ||</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                                             <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;linkage-&gt;is_null() ) ) {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid linkage property %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazine-&gt;linkage-&gt;c_str() );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;ammunition_type&gt;</a>, std::set&lt;itype_id&gt;&gt; &amp;ammo_variety :</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;             <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;magazines ) {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            <span class="keywordflow">if</span>( ammo_variety.second.empty() ) {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;no magazine specified for %s\n&quot;</span>, ammo_variety.first.str() );</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;magazine : ammo_variety.second ) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *mag_ptr = <a class="code" href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">find_template</a>( magazine );</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                <span class="keywordflow">if</span>( mag_ptr == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;magazine \&quot;%s\&quot; specified for \&quot;%s\&quot; does not exist\n&quot;</span>,</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                                          magazine.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), ammo_variety.first.str() );</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !mag_ptr-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                               <span class="stringliteral">&quot;magazine \&quot;%s\&quot; specified for \&quot;%s\&quot; is not a magazine\n&quot;</span>, magazine.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(),</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                               ammo_variety.first.str() );</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !mag_ptr-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type.count( ammo_variety.first ) ) {</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;magazine \&quot;%s\&quot; does not take compatible ammo\n&quot;</span>,</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                                          magazine.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mag_ptr-&gt;<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a> ) &amp;&amp;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                           mag_ptr-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity != <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;clip ) {</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                    msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                               <span class="stringliteral">&quot;speedloader %s capacity (%d) does not match gun capacity (%d).\n&quot;</span>,</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                               magazine.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), mag_ptr-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;gun-&gt;clip );</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                    <span class="comment">// Verify that every magazine type can actually be put in</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                    <span class="comment">// this item</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                    <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ).put_in( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( magazine ), <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                }</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            }</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool ) {</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool-&gt;ammo_id ) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <a class="code" href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">check_ammo_type</a>( msg, at );</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;            }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool-&gt;revert_msg.empty() &amp;&amp; !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;revert_to ) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                msg += <span class="stringliteral">&quot;cannot specify revert_msg without revert_to\n&quot;</span>;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;            }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool-&gt;subtype.is_empty() &amp;&amp; !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool-&gt;subtype ) ) {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid tool subtype %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;tool-&gt;subtype.str() );</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;            }</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        }</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;bionic ) {</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;bionic-&gt;id.is_valid() ) {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;there is no bionic with id %s\n&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;bionic-&gt;id.c_str() );</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;use_methods ) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;            <span class="keyword">const</span> <a class="code" href="classiuse__actor.html">iuse_actor</a> *actor = elem.second.get_actor_ptr();</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( actor );</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            <span class="keywordflow">if</span>( !actor-&gt;<a class="code" href="classiuse__actor.html#a012da399f97dd64e29a78e477a202b8e">is_valid</a>() ) {</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;item action \&quot;%s\&quot; was not described.\n&quot;</span>, actor-&gt;<a class="code" href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">type</a>.c_str() );</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        }</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160; </div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.count( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id ) &amp;&amp; !<a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id ) ) {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;            <span class="comment">// If type has a default ammo then check it can fit within</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            <a class="code" href="classitem.html">item</a> tmp_item( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            <span class="keywordflow">if</span>( tmp_item.is_gun() || tmp_item.is_magazine() ) {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classstring__id.html">itype_id</a> ammo_id = tmp_item.ammo_default() ) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                    tmp_item.ammo_set( ammo_id, 1 );</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;revert_to &amp;&amp; ( !<a class="code" href="classItem__factory.html#a838f908ffe40039c138823e86103788a">has_template</a>( *<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;revert_to ) ||</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                                 <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;revert_to-&gt;is_null() ) ) {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            msg += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid revert_to property %s\n does not exist&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;revert_to-&gt;c_str() );</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordflow">if</span>( msg.empty() ) {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;warnings for type %s:\n%s&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;id.c_str(), msg );</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    }</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a> ) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;m : e.second ) {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> ) ) {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid migration target: %s&quot;</span>, m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;            }</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration_1_1content.html">migration::content</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> : m.<a class="code" href="classmigration.html#af66ae90004a80d2ca8da3429b2f7adb6">contents</a> ) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.id ) ) {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid migration contents: %s&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.id.str() );</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                }</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a> ) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        elem.second-&gt;check_consistency( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <a class="code" href="input_8cpp.html#af16c50890fa8503efa899fc3b6de56d7">inp_mngr</a>.<a class="code" href="classinput__manager.html#a56fd029f8ad1ca3dcd864a6bb5537045">pump_events</a>();</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    }</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;}</div>
<div class="ttc" id="acatacharset_8cpp_html_af20ee33da59ccceb9f4c14005c0bbe80"><div class="ttname"><a href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a></div><div class="ttdeci">int utf8_width(const std::string_view s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00104">catacharset.cpp:104</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a1aec789abd53810026e0d878c0069aea"><div class="ttname"><a href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">Item_factory::m_template_groups</a></div><div class="ttdeci">GroupMap m_template_groups</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00283">item_factory.h:283</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a615b7ac9ef1e02f1858f976583706109"><div class="ttname"><a href="classItem__factory.html#a615b7ac9ef1e02f1858f976583706109">Item_factory::check_ammo_type</a></div><div class="ttdeci">bool check_ammo_type(std::string &amp;msg, const ammotype &amp;ammo) const</div><div class="ttdoc">Checks that ammo is listed in ammunition_type::name().</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01940">item_factory.cpp:1940</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a7cd4dd0d32f16602b6ef248a5a6510ca"><div class="ttname"><a href="classItem__factory.html#a7cd4dd0d32f16602b6ef248a5a6510ca">Item_factory::find_template</a></div><div class="ttdeci">const itype * find_template(const itype_id &amp;id) const</div><div class="ttdoc">Returns the itype with the given id.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l02527">item_factory.cpp:2527</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a838f908ffe40039c138823e86103788a"><div class="ttname"><a href="classItem__factory.html#a838f908ffe40039c138823e86103788a">Item_factory::has_template</a></div><div class="ttdeci">bool has_template(const itype_id &amp;id) const</div><div class="ttdoc">Check if an item type is known to the Item_factory.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05393">item_factory.cpp:5393</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html"><div class="ttname"><a href="classcata_1_1flat__set.html">cata::flat_set</a></div><div class="ttdoc">A SimpleAssociativeContainer implemented as a sorted vector.</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00029">flat_set.h:30</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html_ab427ae6af6b4cd328c0000bc197f881b"><div class="ttname"><a href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">cata::flat_set::insert</a></div><div class="ttdeci">iterator insert(iterator, const value_type &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00151">flat_set.h:151</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html_ade623b3a09ac9a00ae027a89436fccf8"><div class="ttname"><a href="classcata_1_1flat__set.html#ade623b3a09ac9a00ae027a89436fccf8">cata::flat_set::count</a></div><div class="ttdeci">size_type count(const T &amp;t) const</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00141">flat_set.h:141</a></div></div>
<div class="ttc" id="aclassinput__manager_html_a56fd029f8ad1ca3dcd864a6bb5537045"><div class="ttname"><a href="classinput__manager.html#a56fd029f8ad1ca3dcd864a6bb5537045">input_manager::pump_events</a></div><div class="ttdeci">void pump_events()</div><div class="ttdoc">Resize &amp; refresh if necessary, process all pending window events, and ignore keypresses.</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00356">ncurses_def.cpp:356</a></div></div>
<div class="ttc" id="aclassitem__contents_html"><div class="ttname"><a href="classitem__contents.html">item_contents</a></div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8h_source.html#l00037">item_contents.h:38</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a322fdf83c9cc0b7c625c922104996b0b"><div class="ttname"><a href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">item_contents::bigger_on_the_inside</a></div><div class="ttdeci">bool bigger_on_the_inside(const units::volume &amp;container_volume) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00641">item_contents.cpp:641</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassiuse__actor_html"><div class="ttname"><a href="classiuse__actor.html">iuse_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00252">iuse.h:253</a></div></div>
<div class="ttc" id="aclassiuse__actor_html_a012da399f97dd64e29a78e477a202b8e"><div class="ttname"><a href="classiuse__actor.html#a012da399f97dd64e29a78e477a202b8e">iuse_actor::is_valid</a></div><div class="ttdeci">virtual bool is_valid() const</div><div class="ttdoc">Returns whether the actor is valid (exists in the generator).</div><div class="ttdef"><b>Definition:</b> <a href="item__action_8cpp_source.html#l00397">item_action.cpp:397</a></div></div>
<div class="ttc" id="aclassiuse__actor_html_a5bfc0cc8ea9046eb540641ff464af80c"><div class="ttname"><a href="classiuse__actor.html#a5bfc0cc8ea9046eb540641ff464af80c">iuse_actor::type</a></div><div class="ttdeci">const std::string type</div><div class="ttdoc">The type of the action.</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00262">iuse.h:262</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a7556d9ba7a51f2923f0c9ecc37b523a7"><div class="ttname"><a href="classmaterial__type.html#a7556d9ba7a51f2923f0c9ecc37b523a7">material_type::thickness_multiple</a></div><div class="ttdeci">float thickness_multiple() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00295">material.cpp:295</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_abcd2ac9f554f977d837febefdf8f7801"><div class="ttname"><a href="classmaterial__type.html#abcd2ac9f554f977d837febefdf8f7801">material_type::is_valid_thickness</a></div><div class="ttdeci">bool is_valid_thickness(float thickness) const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00284">material.cpp:284</a></div></div>
<div class="ttc" id="aclassmigration_1_1content_html"><div class="ttname"><a href="classmigration_1_1content.html">migration::content</a></div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00055">item_factory.h:56</a></div></div>
<div class="ttc" id="aclassmigration_html_aaf442da2e18d7ebaf62c81c53bc4c6fa"><div class="ttname"><a href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">migration::replace</a></div><div class="ttdeci">itype_id replace</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00048">item_factory.h:48</a></div></div>
<div class="ttc" id="aclassmigration_html_af66ae90004a80d2ca8da3429b2f7adb6"><div class="ttname"><a href="classmigration.html#af66ae90004a80d2ca8da3429b2f7adb6">migration::contents</a></div><div class="ttdeci">std::vector&lt; content &gt; contents</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00064">item_factory.h:64</a></div></div>
<div class="ttc" id="aclasspocket__data_html_ae8910e70516aca2bf421958f17e8f76d"><div class="ttname"><a href="classpocket__data.html#ae8910e70516aca2bf421958f17e8f76d">pocket_data::check_definition</a></div><div class="ttdeci">std::string check_definition() const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00063">item_pocket.cpp:63</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a04775bb228b86633909183ba39d274d8"><div class="ttname"><a href="classsnippet__library.html#a04775bb228b86633909183ba39d274d8">snippet_library::has_category</a></div><div class="ttdeci">bool has_category(const std::string &amp;category) const</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00188">text_snippets.cpp:188</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a></div><div class="ttdeci">@ BELTED</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aflag_8cpp_html_a2ae2ace761a42f9d2101496e0f3b35db"><div class="ttname"><a href="flag_8cpp.html#a2ae2ace761a42f9d2101496e0f3b35db">flag_TARDIS</a></div><div class="ttdeci">const flag_id flag_TARDIS(&quot;TARDIS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa4483d80251dc96dd0c8313d8a6366f9"><div class="ttname"><a href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a></div><div class="ttdeci">const flag_id flag_RELOAD_AND_SHOOT(&quot;RELOAD_AND_SHOOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab380189e0d126a0a29bf8a73ca0c1062"><div class="ttname"><a href="flag_8cpp.html#ab380189e0d126a0a29bf8a73ca0c1062">flag_WAIST</a></div><div class="ttdeci">const flag_id flag_WAIST(&quot;WAIST&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac66c1ad517271b2748b638ca6fbba212"><div class="ttname"><a href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a></div><div class="ttdeci">const flag_id flag_SPEEDLOADER(&quot;SPEEDLOADER&quot;)</div></div>
<div class="ttc" id="agame__constants_8h_html_a754a537584865360f440ffe301069538"><div class="ttname"><a href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a></div><div class="ttdeci">constexpr units::volume MAX_ITEM_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00033">game_constants.h:33</a></div></div>
<div class="ttc" id="ainput_8cpp_html_af16c50890fa8503efa899fc3b6de56d7"><div class="ttname"><a href="input_8cpp.html#af16c50890fa8503efa899fc3b6de56d7">inp_mngr</a></div><div class="ttdeci">input_manager inp_mngr</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00161">input.cpp:161</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a38307e94fb081a7d80d056f2b7166f63"><div class="ttname"><a href="item__factory_8cpp.html#a38307e94fb081a7d80d056f2b7166f63">is_physical</a></div><div class="ttdeci">static bool is_physical(const itype &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00208">item_factory.cpp:208</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a9910cca816b92f0a565dc6bc764889a6"><div class="ttname"><a href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a></div><div class="ttdeci">bool item_is_blacklisted(const itype_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00154">item_factory.cpp:154</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ab99e9180dbdb80287dbccb38ba002fd0"><div class="ttname"><a href="item__factory_8cpp.html#ab99e9180dbdb80287dbccb38ba002fd0">ammo_NULL</a></div><div class="ttdeci">static const ammotype ammo_NULL(&quot;NULL&quot;)</div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02inventory__ui_8cpp_03_html_a7aa43c76d69812abcc3f0398de671f23"><div class="ttname"><a href="namespaceanonymous__namespace_02inventory__ui_8cpp_03.html#a7aa43c76d69812abcc3f0398de671f23">anonymous_namespace{inventory_ui.cpp}::is_container</a></div><div class="ttdeci">bool is_container(const item_location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="inventory__ui_8cpp_source.html#l00153">inventory_ui.cpp:153</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4e18c5472c3f55e110fb16c9e0fe8c45"><div class="ttname"><a href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a></div><div class="ttdeci">constexpr double to_liter(const volume &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00321">units.h:321</a></div></div>
<div class="ttc" id="anamespaceunits_html_a5d16607c866588620acb381e7dbbf0a6"><div class="ttname"><a href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a></div><div class="ttdeci">quantity&lt; int, volume_in_milliliter_tag &gt; volume</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00017">units_fwd.h:17</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a></div><div class="ttdeci">@ CONTAINER</div></div>
<div class="ttc" id="astructarmor__portion__data_html"><div class="ttname"><a href="structarmor__portion__data.html">armor_portion_data</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00277">itype.h:277</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a1064523b6750ce91d90409d03e1c984d"><div class="ttname"><a href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">armor_portion_data::coverage</a></div><div class="ttdeci">int coverage</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00296">itype.h:296</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a28f1619afe913e2d998d8d658ffeb247"><div class="ttname"><a href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">armor_portion_data::cover_ranged</a></div><div class="ttdeci">int cover_ranged</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00298">itype.h:298</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aa46a4b456dabc6f5c9bea37e35c95038"><div class="ttname"><a href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">armor_portion_data::sub_coverage</a></div><div class="ttdeci">std::set&lt; sub_bodypart_str_id &gt; sub_coverage</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00324">itype.h:324</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ad0c7cca6c5e67850044a57369bee1fc8"><div class="ttname"><a href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">armor_portion_data::covers</a></div><div class="ttdeci">std::optional&lt; body_part_set &gt; covers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00322">itype.h:322</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ad300e75da3738bdf6bf9b0400114f555"><div class="ttname"><a href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">armor_portion_data::cover_melee</a></div><div class="ttdeci">int cover_melee</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00297">itype.h:297</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ae42e6eb2c36e3097a49516fa52a092d5"><div class="ttname"><a href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">armor_portion_data::materials</a></div><div class="ttdeci">std::vector&lt; part_material &gt; materials</div><div class="ttdoc">What materials this portion is made of, for armor purposes.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00319">itype.h:319</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01186">itype.h:1186</a></div></div>
<div class="ttc" id="astructitype_html_a7cb80d77696cefb42ac6e75756b47e60"><div class="ttname"><a href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">itype::ammo</a></div><div class="ttdeci">cata::value_ptr&lt; islot_ammo &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01212">itype.h:1212</a></div></div>
<div class="ttc" id="astructpart__material_html"><div class="ttname"><a href="structpart__material.html">part_material</a></div><div class="ttdoc">Material data for individual armor body parts.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00238">itype.h:238</a></div></div>
<div class="ttc" id="astructpart__material_html_aa1f23f6937204887033c2c36ecf77656"><div class="ttname"><a href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">part_material::id</a></div><div class="ttdeci">material_id id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00239">itype.h:239</a></div></div>
<div class="ttc" id="astructpart__material_html_af12d5e9db865e368df5876ae07bc5132"><div class="ttname"><a href="structpart__material.html#af12d5e9db865e368df5876ae07bc5132">part_material::ignore_sheet_thickness</a></div><div class="ttdeci">bool ignore_sheet_thickness</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00242">itype.h:242</a></div></div>
<div class="ttc" id="astructpart__material_html_af5f04e47db3a8e616ce70373bec5c5b2"><div class="ttname"><a href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">part_material::thickness</a></div><div class="ttdeci">float thickness</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00241">itype.h:241</a></div></div>
<div class="ttc" id="astructpart__material_html_af68b3aa64f7a86632f2bcb20907e5989"><div class="ttname"><a href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">part_material::cover</a></div><div class="ttdeci">int cover</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00240">itype.h:240</a></div></div>
<div class="ttc" id="astructsub__body__part__type_html_a97ad7f134f5e89ed216eaa598b3b8ab7"><div class="ttname"><a href="structsub__body__part__type.html#a97ad7f134f5e89ed216eaa598b3b8ab7">sub_body_part_type::secondary</a></div><div class="ttdeci">bool secondary</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00063">subbodypart.h:63</a></div></div>
<div class="ttc" id="atext__snippets_8cpp_html_ac3fc11c159cd056aa15ad7c0b37b070a"><div class="ttname"><a href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a></div><div class="ttdeci">snippet_library SNIPPET</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00015">text_snippets.cpp:15</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01212">itype::ammo</a>, <a class="el" href="item_8cpp_source.html#l11081">item::ammo_default()</a>, <a class="el" href="item__factory_8cpp.html#ab99e9180dbdb80287dbccb38ba002fd0">ammo_NULL</a>, <a class="el" href="item_8cpp_source.html#l00719">item::ammo_set()</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">BELTED</a>, <a class="el" href="item__contents_8cpp_source.html#l00641">item_contents::bigger_on_the_inside()</a>, <a class="el" href="creature_8h_source.html#l00238">bp</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="item__factory_8cpp_source.html#l01940">check_ammo_type()</a>, <a class="el" href="item__pocket_8cpp_source.html#l00063">pocket_data::check_definition()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="item__factory_8h_source.html#l00064">migration::contents</a>, <a class="el" href="flat__set_8h_source.html#l00141">cata::flat_set&lt; T, Compare, Data &gt;::count()</a>, <a class="el" href="itype_8h_source.html#l00240">part_material::cover</a>, <a class="el" href="itype_8h_source.html#l00297">armor_portion_data::cover_melee</a>, <a class="el" href="itype_8h_source.html#l00298">armor_portion_data::cover_ranged</a>, <a class="el" href="itype_8h_source.html#l00296">armor_portion_data::coverage</a>, <a class="el" href="itype_8h_source.html#l00322">armor_portion_data::covers</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__factory_8cpp_source.html#l02527">find_template()</a>, <a class="el" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a>, <a class="el" href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a>, <a class="el" href="flag_8cpp.html#a2ae2ace761a42f9d2101496e0f3b35db">flag_TARDIS</a>, <a class="el" href="flag_8cpp.html#ab380189e0d126a0a29bf8a73ca0c1062">flag_WAIST</a>, <a class="el" href="text__snippets_8cpp_source.html#l00188">snippet_library::has_category()</a>, <a class="el" href="itype_8cpp_source.html#l00164">itype::has_flag()</a>, <a class="el" href="item__factory_8cpp_source.html#l05393">has_template()</a>, <a class="el" href="itype_8h_source.html#l00239">part_material::id</a>, <a class="el" href="itype_8h_source.html#l00242">part_material::ignore_sheet_thickness</a>, <a class="el" href="input_8cpp_source.html#l00161">inp_mngr</a>, <a class="el" href="flat__set_8h_source.html#l00151">cata::flat_set&lt; T, Compare, Data &gt;::insert()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l00153">anonymous_namespace{inventory_ui.cpp}::is_container()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="item_8cpp_source.html#l09445">item::is_magazine()</a>, <a class="el" href="item__factory_8cpp_source.html#l00208">is_physical()</a>, <a class="el" href="item__action_8cpp_source.html#l00397">iuse_actor::is_valid()</a>, <a class="el" href="material_8cpp_source.html#l00284">material_type::is_valid_thickness()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>, <a class="el" href="item__factory_8cpp_source.html#l00154">item_is_blacklisted()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="item__factory_8h_source.html#l00283">m_template_groups</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">MAGAZINE</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="itype_8h_source.html#l00319">armor_portion_data::materials</a>, <a class="el" href="game__constants_8h_source.html#l00033">MAX_ITEM_VOLUME</a>, <a class="el" href="item__factory_8h_source.html#l00392">migrations</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00356">input_manager::pump_events()</a>, <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>, <a class="el" href="subbodypart_8h_source.html#l00063">sub_body_part_type::secondary</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="itype_8h_source.html#l00324">armor_portion_data::sub_coverage</a>, <a class="el" href="itype_8h_source.html#l00241">part_material::thickness</a>, <a class="el" href="material_8cpp_source.html#l00295">material_type::thickness_multiple()</a>, <a class="el" href="units_8h_source.html#l00321">units::to_liter()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="item__pocket_8h_source.html#l00467">pocket_data::type</a>, <a class="el" href="iuse_8h_source.html#l00262">iuse_actor::type</a>, and <a class="el" href="catacharset_8cpp_source.html#l00104">utf8_width()</a>.</p>

</div>
</div>
<a id="a8de179e11040e0fa2d66ad9c8a5c9fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8de179e11040e0fa2d66ad9c8a5c9fd5">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04787">4787</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;{</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;    <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>.clear();</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160; </div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;    <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>.clear();</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160; </div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.clear();</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.clear();</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160; </div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#ae1a36695246c0b2183ec97967def972b">clear</a>();</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160; </div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    <a class="code" href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">tool_subtypes</a>.clear();</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160; </div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;    <a class="code" href="classItem__factory.html#af052340e46eca62bd496455f9b345ed5">repair_tools</a>.clear();</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    <a class="code" href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">gun_tools</a>.clear();</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <a class="code" href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">repair_actions</a>.clear();</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160; </div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;    <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.clear();</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.clear();</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;    <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.clear();</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160; </div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;    <span class="comment">/* Avoid unvisited member errors when iterating on json */</span></div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;JsonObject, std::string&gt; &amp;deferred_json : <a class="code" href="item__factory_8cpp.html#a9c21005f31e0aa8c574e3a02f2d265db">deferred</a> ) {</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;        deferred_json.first.allow_omitted_members();</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;    }</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;    <a class="code" href="item__factory_8cpp.html#a9c21005f31e0aa8c574e3a02f2d265db">deferred</a>.clear();</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160; </div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    <a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a777b712b7a0b03c6e0ad239ad29d7094"><div class="ttname"><a href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">Item_factory::migrated_magazines</a></div><div class="ttdeci">std::unordered_map&lt; itype_id, itype_id &gt; migrated_magazines</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00286">item_factory.h:286</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a884f46fe503c5e21917b3cb098383c99"><div class="ttname"><a href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">Item_factory::tool_subtypes</a></div><div class="ttdeci">std::map&lt; itype_id, std::set&lt; itype_id &gt; &gt; tool_subtypes</div><div class="ttdoc">Contains the tool subtype mappings for crafting (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00398">item_factory.h:398</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aad85da896b2ec191e4514e6d03ce74ef"><div class="ttname"><a href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">Item_factory::gun_tools</a></div><div class="ttdeci">std::set&lt; itype_id &gt; gun_tools</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00404">item_factory.h:404</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ac58203a04bf0d221f64ec46d6d82b96e"><div class="ttname"><a href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">Item_factory::migrated_ammo</a></div><div class="ttdeci">std::unordered_map&lt; itype_id, ammotype &gt; migrated_ammo</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00285">item_factory.h:285</a></div></div>
<div class="ttc" id="aclassItem__factory_html_acbc793301935e25dc30818dd974281b7"><div class="ttname"><a href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">Item_factory::repair_actions</a></div><div class="ttdeci">std::set&lt; std::string &gt; repair_actions</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00406">item_factory.h:406</a></div></div>
<div class="ttc" id="aclassItem__factory_html_af052340e46eca62bd496455f9b345ed5"><div class="ttname"><a href="classItem__factory.html#af052340e46eca62bd496455f9b345ed5">Item_factory::repair_tools</a></div><div class="ttdeci">std::set&lt; itype_id &gt; repair_tools</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00401">item_factory.h:401</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a4e6e2161caa3cdc6f4bfef029ac33a52"><div class="ttname"><a href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a></div><div class="ttdeci">static item_blacklist_t item_blacklist</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00122">item_factory.cpp:122</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a9c21005f31e0aa8c574e3a02f2d265db"><div class="ttname"><a href="item__factory_8cpp.html#a9c21005f31e0aa8c574e3a02f2d265db">deferred</a></div><div class="ttdeci">static DynamicDataLoader::deferred_json deferred</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00124">item_factory.cpp:124</a></div></div>
<div class="ttc" id="astructitem__blacklist__t_html_ae1a36695246c0b2183ec97967def972b"><div class="ttname"><a href="structitem__blacklist__t.html#ae1a36695246c0b2183ec97967def972b">item_blacklist_t::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01424">item_factory.cpp:1424</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l01424">item_blacklist_t::clear()</a>, <a class="el" href="item__factory_8cpp_source.html#l00124">deferred</a>, <a class="el" href="item__factory_8cpp_source.html#l00122">item_blacklist</a>, and <a class="el" href="namespaceanonymous__namespace_02overmap_8cpp_03.html#a08ac10348561ea07387d36d74066dd1b">anonymous_namespace{overmap.cpp}::migrations</a>.</p>

</div>
</div>
<a id="aeb0fbd130ad5c8ed4911bc2a18a2ac0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb0fbd130ad5c8ed4911bc2a18a2ac0b">&#9670;&nbsp;</a></span>delete_qualities_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::delete_qualities_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04720">4720</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;{</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    <span class="keywordflow">for</span>( std::string curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> iter = def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.find( <a class="code" href="type__id_8h.html#a462e78d510851b30d4f5795c409c7467">quality_id</a>( curr ) );</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;        <span class="keywordflow">if</span>( iter != def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.end() ) {</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;            def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.erase( iter );</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;        }</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    }</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;}</div>
<div class="ttc" id="acondition_8h_html_a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3"><div class="ttname"><a href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">jarg::member</a></div><div class="ttdeci">@ member</div></div>
<div class="ttc" id="astructitype_html_a88ab4cc3858d8bb86e21cf83d13cc4c0"><div class="ttname"><a href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">itype::qualities</a></div><div class="ttdeci">std::map&lt; quality_id, int &gt; qualities</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01286">itype.h:1286</a></div></div>
<div class="ttc" id="atype__id_8h_html_a462e78d510851b30d4f5795c409c7467"><div class="ttname"><a href="type__id_8h.html#a462e78d510851b30d4f5795c409c7467">quality_id</a></div><div class="ttdeci">string_id&lt; quality &gt; quality_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00286">type_id.h:286</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, and <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a8eb9ad4a4aff21369193c164c959f693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eb9ad4a4aff21369193c164c959f693">&#9670;&nbsp;</a></span>delete_techniques_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::delete_techniques_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04769">4769</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;{</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <span class="keywordflow">for</span>( std::string curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> tech = <a class="code" href="type__id_8h.html#a15c813836397fb5a5747fa15b5c82d84">matec_id</a>( curr );</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> iter = def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.find( tech );</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;        <span class="keywordflow">if</span>( iter != def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.end() ) {</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;            def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.erase( tech );</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;        }</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    }</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;}</div>
<div class="ttc" id="astructitype_html_af120b48958f64cb16301d76d95d57d6a"><div class="ttname"><a href="structitype.html#af120b48958f64cb16301d76d95d57d6a">itype::techniques</a></div><div class="ttdeci">std::set&lt; matec_id &gt; techniques</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01323">itype.h:1323</a></div></div>
<div class="ttc" id="atype__id_8h_html_a15c813836397fb5a5747fa15b5c82d84"><div class="ttname"><a href="type__id_8h.html#a15c813836397fb5a5747fa15b5c82d84">matec_id</a></div><div class="ttdeci">string_id&lt; ma_technique &gt; matec_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00134">type_id.h:134</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, and <a class="el" href="itype_8h_source.html#l01323">itype::techniques</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a74be8fac6c7cb1dc966f98069741955d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74be8fac6c7cb1dc966f98069741955d">&#9670;&nbsp;</a></span>emplace_usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::emplace_usage </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>container</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>iuse_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05245">5245</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;{</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;    <a class="code" href="structuse__function.html">use_function</a> fun = <a class="code" href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">usage_from_string</a>( iuse_id );</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;    <span class="keywordflow">if</span>( fun ) {</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;        container.emplace( iuse_id, fun );</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;    }</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a4e652a1bb11e1fa9ca38fdd48db25bb7"><div class="ttname"><a href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">Item_factory::usage_from_string</a></div><div class="ttdeci">use_function usage_from_string(const std::string &amp;type) const</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05276">item_factory.cpp:5276</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<a id="ac2b39c9a10e628b86b5bf37d82b9e453"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2b39c9a10e628b86b5bf37d82b9e453">&#9670;&nbsp;</a></span>extend_qualities_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::extend_qualities_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04712">4712</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;{</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;        def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[<a class="code" href="type__id_8h.html#a462e78d510851b30d4f5795c409c7467">quality_id</a>( curr.get_string( 0 ) )] = curr.get_int( 1 );</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    }</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, and <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a0106091d79469a8ecad883461887e17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0106091d79469a8ecad883461887e17f">&#9670;&nbsp;</a></span>extend_techniques_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::extend_techniques_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04761">4761</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;{</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;    <span class="keywordflow">for</span>( std::string curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;        def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.insert( <a class="code" href="type__id_8h.html#a15c813836397fb5a5747fa15b5c82d84">matec_id</a>( curr ) );</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;    }</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, and <a class="el" href="itype_8h_source.html#l01323">itype::techniques</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a5e5bb18ff8e530d750a009e5458e7dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e5bb18ff8e530d750a009e5458e7dca">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>called after all JSON has been read and performs any necessary cleanup tasks </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01382">1382</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;{</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="classDynamicDataLoader.html#adca1972b6d79ffd55d6d7ca1a0c329b9">DynamicDataLoader::get_instance</a>().<a class="code" href="classDynamicDataLoader.html#adf725674a5fcd11a4e8a248e14717d27">load_deferred</a>( <a class="code" href="item__factory_8cpp.html#a9c21005f31e0aa8c574e3a02f2d265db">deferred</a> );</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <a class="code" href="classItem__factory.html#aedaca7435165e868da9cbd2e7b026466">finalize_item_blacklist</a>();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="comment">// we can no longer add or adjust static item templates</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> ) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">finalize_pre</a>( e.second );</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="classItem__factory.html#a30cede55b74649c2c130566e132b2852">register_cached_uses</a>( e.second );</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> ) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">finalize_post</a>( e.second );</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// We may actually have some runtimes here - ones loaded from saved game</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// TODO: support for runtimes that repair</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a> ) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <a class="code" href="classItem__factory.html#a8b49fe019e92adc0e8ae3cebdbdf7c75">finalize_pre</a>( *e.second );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <a class="code" href="classItem__factory.html#a3804571719b38b513c078ad2506cb1db">finalize_post</a>( *e.second );</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// for each item register all (non-obsolete) potential recipes</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const recipe_id, recipe&gt; &amp;p : <a class="code" href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a> ) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;rec = p.second;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">if</span>( rec.<a class="code" href="classrecipe.html#a9cd5575d444e1e4224f1aadd6f74357e">obsolete</a> || rec.<a class="code" href="classrecipe.html#a6d093b9e0722a56fda25fa0170d9076b">will_be_blacklisted</a>() ) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;result = rec.<a class="code" href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">result</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <span class="keyword">auto</span> it = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( result );</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">if</span>( it != <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() ) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            it-&gt;second.recipes.push_back( p.first );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a> ) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keyword">auto</span> &amp;isd = e.second;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        isd-&gt;finalize( <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>() );</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div>
<div class="ttc" id="aclassDynamicDataLoader_html_adca1972b6d79ffd55d6d7ca1a0c329b9"><div class="ttname"><a href="classDynamicDataLoader.html#adca1972b6d79ffd55d6d7ca1a0c329b9">DynamicDataLoader::get_instance</a></div><div class="ttdeci">static DynamicDataLoader &amp; get_instance()</div><div class="ttdoc">Returns the single instance of this class.</div><div class="ttdef"><b>Definition:</b> <a href="init_8cpp_source.html#l00119">init.cpp:119</a></div></div>
<div class="ttc" id="aclassDynamicDataLoader_html_adf725674a5fcd11a4e8a248e14717d27"><div class="ttname"><a href="classDynamicDataLoader.html#adf725674a5fcd11a4e8a248e14717d27">DynamicDataLoader::load_deferred</a></div><div class="ttdeci">void load_deferred(deferred_json &amp;data)</div><div class="ttdoc">Loads and then removes entries from.</div><div class="ttdef"><b>Definition:</b> <a href="init_8cpp_source.html#l00160">init.cpp:160</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a30cede55b74649c2c130566e132b2852"><div class="ttname"><a href="classItem__factory.html#a30cede55b74649c2c130566e132b2852">Item_factory::register_cached_uses</a></div><div class="ttdeci">void register_cached_uses(const itype &amp;obj)</div><div class="ttdoc">Registers the item as having repair actions (if it has any).</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00711">item_factory.cpp:711</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aedaca7435165e868da9cbd2e7b026466"><div class="ttname"><a href="classItem__factory.html#aedaca7435165e868da9cbd2e7b026466">Item_factory::finalize_item_blacklist</a></div><div class="ttdeci">void finalize_item_blacklist()</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01430">item_factory.cpp:1430</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00086">recipe.h:87</a></div></div>
<div class="ttc" id="aclassrecipe_html_a6d093b9e0722a56fda25fa0170d9076b"><div class="ttname"><a href="classrecipe.html#a6d093b9e0722a56fda25fa0170d9076b">recipe::will_be_blacklisted</a></div><div class="ttdeci">bool will_be_blacklisted() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01239">recipe.cpp:1239</a></div></div>
<div class="ttc" id="aclassrecipe_html_a9cd5575d444e1e4224f1aadd6f74357e"><div class="ttname"><a href="classrecipe.html#a9cd5575d444e1e4224f1aadd6f74357e">recipe::obsolete</a></div><div class="ttdeci">bool obsolete</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00124">recipe.h:124</a></div></div>
<div class="ttc" id="aclassrecipe_html_aeefe6a56019c2cdaf9c6754ef65f1b81"><div class="ttname"><a href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">recipe::result</a></div><div class="ttdeci">const itype_id &amp; result() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00111">recipe.h:111</a></div></div>
<div class="ttc" id="arecipe__dictionary_8cpp_html_a9fdb53bd54fb6dcc5f9b2e1e1b44570f"><div class="ttname"><a href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a></div><div class="ttdeci">recipe_dictionary recipe_dict</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00031">recipe_dictionary.cpp:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l00124">deferred</a>, <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, <a class="el" href="item__factory_8cpp_source.html#l00726">finalize_post()</a>, <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>, <a class="el" href="item__factory_8h_source.html#l00274">frozen</a>, <a class="el" href="init_8cpp_source.html#l00119">DynamicDataLoader::get_instance()</a>, <a class="el" href="init_8cpp_source.html#l00160">DynamicDataLoader::load_deferred()</a>, <a class="el" href="item__factory_8h_source.html#l00280">m_runtimes</a>, <a class="el" href="item__factory_8h_source.html#l00283">m_template_groups</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; itype &gt;::NULL_ID()</a>, <a class="el" href="recipe_8h_source.html#l00124">recipe::obsolete</a>, <a class="el" href="recipe__dictionary_8cpp_source.html#l00031">recipe_dict</a>, <a class="el" href="item__factory_8cpp_source.html#l00711">register_cached_uses()</a>, <a class="el" href="recipe_8h_source.html#l00111">recipe::result()</a>, and <a class="el" href="recipe_8cpp_source.html#l01239">recipe::will_be_blacklisted()</a>.</p>

</div>
</div>
<a id="aedaca7435165e868da9cbd2e7b026466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedaca7435165e868da9cbd2e7b026466">&#9670;&nbsp;</a></span>finalize_item_blacklist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::finalize_item_blacklist </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01430">1430</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;{</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">// Populate a whitelist, and a blacklist with items on whitelists and items on blacklists</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    std::set&lt;itype_id&gt; whitelist;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keywordtype">bool</span>, std::set&lt;itype_id&gt;&gt; &amp;blacklist : <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#a73650585b6e23df7af1ef2281f453c94">sub_blacklist</a> ) {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <span class="comment">// True == whitelist, false == blacklist</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">if</span>( blacklist.first ) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            whitelist.insert( blacklist.second.begin(), blacklist.second.end() );</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#ac8243090b1c1868f5bb8f4a8e5e51dd1">blacklist</a>.insert( blacklist.second.begin(), blacklist.second.end() );</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordtype">bool</span> whitelist_exists = !whitelist.empty();</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="comment">// Remove all blacklisted items on the whitelist</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    std::set&lt;itype_id&gt; &amp;blacklist = <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#ac8243090b1c1868f5bb8f4a8e5e51dd1">blacklist</a>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;it : whitelist ) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">if</span>( blacklist.count( it ) ) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            whitelist.erase( it );</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// Now, populate the blacklist with all the items that aren&#39;t whitelists, but only if a whitelist exists.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">if</span>( whitelist_exists ) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        blacklist.clear();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, itype&gt; &amp;<a class="code" href="classitem.html">item</a> : <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a> ) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <span class="keywordflow">if</span>( !whitelist.count( <a class="code" href="classitem.html">item</a>.first ) ) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                blacklist.insert( <a class="code" href="classitem.html">item</a>.first );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// And clear the blacklists we made in-between</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#a73650585b6e23df7af1ef2281f453c94">sub_blacklist</a>.clear();</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;blackout : <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#ac8243090b1c1868f5bb8f4a8e5e51dd1">blacklist</a> ) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        std::unordered_map&lt;itype_id, itype&gt;::iterator candidate = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( blackout );</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordflow">if</span>( candidate == <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() ) {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item on blacklist %s does not exist&quot;</span>, blackout.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">item_group_id</a>, std::unique_ptr&lt;Item_spawn_data&gt;&gt; &amp;<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> : <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a> ) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>.second-&gt;remove_item( candidate-&gt;first );</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="comment">// remove any blacklisted items from requirements</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const requirement_id, requirement_data&gt; &amp;r : <a class="code" href="structrequirement__data.html#a0cd7e0da2f3dd4412ac0bb2b4bce2c55">requirement_data::all</a>() ) {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            <span class="keyword">const_cast&lt;</span><a class="code" href="structrequirement__data.html">requirement_data</a> &amp;<span class="keyword">&gt;</span>( r.second ).blacklist_item( candidate-&gt;first );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="comment">// remove any recipes used to craft the blacklisted item</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <a class="code" href="classrecipe__dictionary.html#ad49f5c9ba2c66330d4ad3daf00c2b781">recipe_dictionary::delete_if</a>( [&amp;candidate]( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp; r ) {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <span class="keywordflow">return</span> r.<a class="code" href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">result</a>() == candidate-&gt;first;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        } );</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;const_prototype : <a class="code" href="namespacevehicles.html#a92407d11e7752897e95da964353f6941">vehicles::get_all_prototypes</a>() ) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;prototype = <span class="keyword">const_cast&lt;</span><a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;<span class="keyword">&gt;</span>( const_prototype );</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structvehicle__item__spawn.html">vehicle_item_spawn</a> &amp;vis : prototype.<a class="code" href="structvehicle__prototype.html#a7eec43c8754c73355602b6a126e73293">item_spawns</a> ) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="keyword">auto</span> &amp;vec = vis.<a class="code" href="structvehicle__item__spawn.html#a8c77ce90bc86a9689cefa5b04e15ee3d">item_ids</a>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::remove_if( vec.begin(), vec.end(), <a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a> );</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            vec.erase( iter, vec.end() );</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// Construct a map for batch item replace</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    std::unordered_map&lt;itype_id, itype_id&gt; replacements;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a>, std::vector&lt;migration&gt;&gt; &amp;migrate : <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a> ) {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="comment">// The valid migration entry</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> *valid = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;cand : migrate.second ) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            <span class="comment">// This can only be applied to items, not itypes</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <span class="keywordflow">if</span>( cand.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            <span class="comment">// There can only be one migration entry</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            <span class="keywordflow">if</span>( valid == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                valid = &amp;cand;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                valid = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="comment">// Either there are no migrations, or too many migrations</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <span class="comment">// Errors are reported below</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">if</span>( valid == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( valid-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> ) == 0 ) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            <span class="comment">// Errors for missing item templates will be reported below</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        replacements[migrate.first] = valid-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="comment">// Replace items in item template groups</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">item_group_id</a>, std::unique_ptr&lt;Item_spawn_data&gt;&gt; &amp;<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> : <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a> ) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>.second-&gt;replace_items( replacements );</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// Replace templates in recipe/part/etc. requirements</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const requirement_id, requirement_data&gt; &amp;r : <a class="code" href="structrequirement__data.html#a0cd7e0da2f3dd4412ac0bb2b4bce2c55">requirement_data::all</a>() ) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="keyword">const_cast&lt;</span><a class="code" href="structrequirement__data.html">requirement_data</a> &amp;<span class="keyword">&gt;</span>( r.second ).replace_items( replacements );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a>, std::vector&lt;migration&gt;&gt; &amp;migrate : <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a> ) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> *parent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;migrant : migrate.second ) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( migrant.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> ) == 0 ) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Replacement item (%s) for migration %s does not exist&quot;</span>, migrant.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(),</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                          migrate.first.c_str() );</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <span class="comment">// The rest of this only applies to blanket migrations</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <span class="comment">// Not migrations looking for a particular variant</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keywordflow">if</span>( migrant.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <span class="keywordflow">if</span>( parent != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Multiple non-variant migrations specified for %s&quot;</span>, migrate.first.str() );</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            parent = &amp;migrant;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="comment">// Only variant migrations exist, abort</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">if</span>( parent == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="comment">// remove any recipes used to craft the migrated item</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="comment">// if there&#39;s a valid recipe, it will be for the replacement</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <a class="code" href="classrecipe__dictionary.html#ad49f5c9ba2c66330d4ad3daf00c2b781">recipe_dictionary::delete_if</a>( [&amp;migrate]( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp; r ) {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            <span class="keywordflow">return</span> !r.<a class="code" href="classrecipe.html#a9cd5575d444e1e4224f1aadd6f74357e">obsolete</a> &amp;&amp; r.<a class="code" href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">result</a>() == migrate.first;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        } );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <span class="comment">// If the default ammo of an ammo_type gets migrated, we migrate all guns using that ammo</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <span class="comment">// type to the ammo type of whatever that default ammo was migrated to.</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="comment">// To do that we need to store a map of ammo to the migration replacement thereof.</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <span class="keyword">auto</span> maybe_ammo = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( migrate.first );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="comment">// If the itype_id is valid and the itype has ammo data</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="keywordflow">if</span>( maybe_ammo != <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() &amp;&amp; maybe_ammo-&gt;second.ammo ) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            <span class="keyword">auto</span> <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a> = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>-&gt;second.ammo ) {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.emplace( migrate.first, <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>-&gt;second.ammo-&gt;type );</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Replacement item %s for migrated ammo %s is not ammo.&quot;</span>,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                          parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), migrate.first.str() );</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="comment">// migrate magazines as well</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keyword">auto</span> maybe_mag = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( migrate.first );</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordflow">if</span>( maybe_mag != <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() &amp;&amp; maybe_mag-&gt;second.magazine ) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <span class="keyword">auto</span> <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a> = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>-&gt;second.magazine ) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.emplace( migrate.first, parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Replacement item %s for migrated magazine %s is not a magazine.&quot;</span>,</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                          parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), migrate.first.str() );</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;const_prototype : <a class="code" href="namespacevehicles.html#a92407d11e7752897e95da964353f6941">vehicles::get_all_prototypes</a>() ) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;prototype = <span class="keyword">const_cast&lt;</span><a class="code" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;<span class="keyword">&gt;</span>( const_prototype );</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structvehicle__item__spawn.html">vehicle_item_spawn</a> &amp;vis : prototype.<a class="code" href="structvehicle__prototype.html#a7eec43c8754c73355602b6a126e73293">item_spawns</a> ) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classstring__id.html">itype_id</a> &amp;type_to_spawn : vis.<a class="code" href="structvehicle__item__spawn.html#a8c77ce90bc86a9689cefa5b04e15ee3d">item_ids</a> ) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                std::map&lt;itype_id, std::vector&lt;migration&gt;&gt;::iterator <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a> =</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                        <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.find( type_to_spawn );</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a> == <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.end() ) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> *parent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;migrant : <a class="code" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>-&gt;second ) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( migrant.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> ) == 0 ) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                        <span class="comment">// Error reported above</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                    }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                    <span class="comment">// The rest of this only applies to blanket migrations</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                    <span class="comment">// Not migrations looking for a particular variant</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                    <span class="keywordflow">if</span>( migrant.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                    }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                    <span class="keywordflow">if</span>( parent != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                        <span class="comment">// Error reported above</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                        parent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                    }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                    parent = &amp;migrant;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                <span class="keywordflow">if</span>( parent == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                type_to_spawn = parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="ttc" id="aclassrecipe__dictionary_html_ad49f5c9ba2c66330d4ad3daf00c2b781"><div class="ttname"><a href="classrecipe__dictionary.html#ad49f5c9ba2c66330d4ad3daf00c2b781">recipe_dictionary::delete_if</a></div><div class="ttdeci">static void delete_if(const std::function&lt; bool(const recipe &amp;)&gt; &amp;pred)</div><div class="ttdoc">Remove all recipes matching the predicate.</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00728">recipe_dictionary.cpp:728</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="anamespacevehicles_html_a92407d11e7752897e95da964353f6941"><div class="ttname"><a href="namespacevehicles.html#a92407d11e7752897e95da964353f6941">vehicles::get_all_prototypes</a></div><div class="ttdeci">const std::vector&lt; vehicle_prototype &gt; &amp; get_all_prototypes()</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l01248">veh_type.cpp:1248</a></div></div>
<div class="ttc" id="astructitem__blacklist__t_html_a73650585b6e23df7af1ef2281f453c94"><div class="ttname"><a href="structitem__blacklist__t.html#a73650585b6e23df7af1ef2281f453c94">item_blacklist_t::sub_blacklist</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; bool, std::set&lt; itype_id &gt; &gt; &gt; sub_blacklist</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00071">item_factory.h:71</a></div></div>
<div class="ttc" id="astructitem__blacklist__t_html_ac8243090b1c1868f5bb8f4a8e5e51dd1"><div class="ttname"><a href="structitem__blacklist__t.html#ac8243090b1c1868f5bb8f4a8e5e51dd1">item_blacklist_t::blacklist</a></div><div class="ttdeci">std::set&lt; itype_id &gt; blacklist</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00069">item_factory.h:69</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a0cd7e0da2f3dd4412ac0bb2b4bce2c55"><div class="ttname"><a href="structrequirement__data.html#a0cd7e0da2f3dd4412ac0bb2b4bce2c55">requirement_data::all</a></div><div class="ttdeci">static const std::map&lt; requirement_id, requirement_data &gt; &amp; all()</div><div class="ttdoc">Get all currently loaded requirements.</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00612">requirements.cpp:612</a></div></div>
<div class="ttc" id="astructvehicle__item__spawn_html"><div class="ttname"><a href="structvehicle__item__spawn.html">vehicle_item_spawn</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00466">veh_type.h:466</a></div></div>
<div class="ttc" id="astructvehicle__item__spawn_html_a8c77ce90bc86a9689cefa5b04e15ee3d"><div class="ttname"><a href="structvehicle__item__spawn.html#a8c77ce90bc86a9689cefa5b04e15ee3d">vehicle_item_spawn::item_ids</a></div><div class="ttdeci">std::vector&lt; itype_id &gt; item_ids</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00473">veh_type.h:473</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html"><div class="ttname"><a href="structvehicle__prototype.html">vehicle_prototype</a></div><div class="ttdoc">Prototype of a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00483">veh_type.h:483</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html_a7eec43c8754c73355602b6a126e73293"><div class="ttname"><a href="structvehicle__prototype.html#a7eec43c8754c73355602b6a126e73293">vehicle_prototype::item_spawns</a></div><div class="ttdeci">std::vector&lt; vehicle_item_spawn &gt; item_spawns</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00506">veh_type.h:506</a></div></div>
<div class="ttc" id="atext__style__check_8h_html_aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79"><div class="ttname"><a href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">text_style_fix::replacement</a></div><div class="ttdeci">@ replacement</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="requirements_8cpp_source.html#l00612">requirement_data::all()</a>, <a class="el" href="item__factory_8h_source.html#l00069">item_blacklist_t::blacklist</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="recipe__dictionary_8cpp_source.html#l00728">recipe_dictionary::delete_if()</a>, <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="veh__type_8cpp_source.html#l01248">vehicles::get_all_prototypes()</a>, <a class="el" href="item__factory_8cpp_source.html#l00122">item_blacklist</a>, <a class="el" href="veh__type_8h_source.html#l00473">vehicle_item_spawn::item_ids</a>, <a class="el" href="item__factory_8cpp_source.html#l00154">item_is_blacklisted()</a>, <a class="el" href="veh__type_8h_source.html#l00506">vehicle_prototype::item_spawns</a>, <a class="el" href="item__factory_8h_source.html#l00283">m_template_groups</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="item__factory_8h_source.html#l00285">migrated_ammo</a>, <a class="el" href="item__factory_8h_source.html#l00286">migrated_magazines</a>, <a class="el" href="item__factory_8h_source.html#l00392">migrations</a>, <a class="el" href="recipe_8h_source.html#l00124">recipe::obsolete</a>, <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>, <a class="el" href="text__style__check_8h.html#aa8c938adc53706bb8a4f8dcd43e6dc62af5300127f646a4550bc4a04fbe393e79">replacement</a>, <a class="el" href="recipe_8h_source.html#l00111">recipe::result()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item__factory_8h_source.html#l00071">item_blacklist_t::sub_blacklist</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>.</p>

</div>
</div>
<a id="a3804571719b38b513c078ad2506cb1db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3804571719b38b513c078ad2506cb1db">&#9670;&nbsp;</a></span>finalize_post()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::finalize_post </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies part of finalization that depends on other items. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l00726">726</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="cata__utility_8h.html#ad7f4be1b8ffc52a0be18e72d041241af">erase_if</a>( obj.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>, [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; f ) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        if( !f.is_valid() ) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            debugmsg( <span class="stringliteral">&quot;itype &#39;%s&#39; uses undefined flag &#39;%s&#39;. Please add corresponding &#39;json_flag&#39; entry to json.&quot;</span>,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                      obj.id.str(), f.str() );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            return true;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> &amp;&amp; !obj.<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a> &amp;&amp; !obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a> ) ) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> qual_gun_skill( <a class="code" href="output_8cpp.html#a78f0928723504ed91d542c9090cd244d">to_upper_case</a>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used.str() ) );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        obj.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[<a class="code" href="item__factory_8cpp.html#a294e70e088a97dea26cb8bcbc29f94c9">qual_GUN</a>] = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( obj.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[<a class="code" href="item__factory_8cpp.html#a294e70e088a97dea26cb8bcbc29f94c9">qual_GUN</a>], 1 );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">if</span>( qual_gun_skill.is_valid() ) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            obj.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[qual_gun_skill] = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( obj.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[qual_gun_skill], 1 );</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// handle complex firearms as a special case</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> &amp;&amp; !obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a> ) ) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        std::copy( <a class="code" href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">gun_tools</a>.begin(), <a class="code" href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">gun_tools</a>.end(), std::inserter( obj.<a class="code" href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">repair</a>, obj.<a class="code" href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">repair</a>.begin() ) );</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="classItem__factory.html#a0c0bfd020f04263f39c1f389fed7b7cc">finalize_post_armor</a>( obj );</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// if we haven&#39;t set what the item can be repaired with calculate it now</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.empty() ) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mats : obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a> ) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            obj.<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.insert( mats.first );</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// for each item iterate through potential repair tools</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;tool : <a class="code" href="classItem__factory.html#af052340e46eca62bd496455f9b345ed5">repair_tools</a> ) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment">// check if item can be repaired with any of the actions?</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> : <a class="code" href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">repair_actions</a> ) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="structfunc.html">func</a> = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>[tool].get_use( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structfunc.html">func</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="comment">// tool has a possible repair action, check if the materials are compatible</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;opts = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classrepair__item__actor.html">repair_item_actor</a> *<span class="keyword">&gt;</span>( <a class="code" href="structfunc.html">func</a>-&gt;get_actor_ptr() )-&gt;<a class="code" href="namespacematerials.html">materials</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span>( std::any_of( obj.<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.begin(),</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            obj.<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.end(), [&amp;opts]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; m ) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            return opts.count( m ) &gt; 0;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            } ) ) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                obj.<a class="code" href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">repair</a>.insert( tool );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="item__factory_8cpp.html#a4f0587545a47d233d566708fb96fad9c">json_flag_NO_UNLOAD</a> ) ) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            pocket.<a class="code" href="classpocket__data.html#a1980ea4bffc2a95c5b418002c415bc7f">_no_unload</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="item__factory_8cpp.html#a48722d189ba972fea546bc860acb8cff">json_flag_NO_RELOAD</a> ) ) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            pocket.<a class="code" href="classpocket__data.html#aca6ef1e0ffb4448b3a1658cae94e9586">_no_reload</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// go through each pocket and assign the name as a fallback definition</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        pocket.<a class="code" href="classpocket__data.html#a263652e215e2e07cd8b85ad9602e3487">name</a> = obj.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a> ) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const diseasetype_id, int&gt; &amp;elem : obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;contamination ) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">diseasetype_id</a> dtype = elem.first;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="keywordflow">if</span>( !dtype.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;contamination in %s contains invalid diseasetype_id %s.&quot;</span>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                          obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), dtype.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_ad7f4be1b8ffc52a0be18e72d041241af"><div class="ttname"><a href="cata__utility_8h.html#ad7f4be1b8ffc52a0be18e72d041241af">erase_if</a></div><div class="ttdeci">bool erase_if(Col &amp;set, Pred predicate)</div><div class="ttdoc">Erases elements from a set that match given predicate function.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00552">cata_utility.h:552</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a0c0bfd020f04263f39c1f389fed7b7cc"><div class="ttname"><a href="classItem__factory.html#a0c0bfd020f04263f39c1f389fed7b7cc">Item_factory::finalize_post_armor</a></div><div class="ttdeci">void finalize_post_armor(itype &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00812">item_factory.cpp:812</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a1980ea4bffc2a95c5b418002c415bc7f"><div class="ttname"><a href="classpocket__data.html#a1980ea4bffc2a95c5b418002c415bc7f">pocket_data::_no_unload</a></div><div class="ttdeci">bool _no_unload</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00548">item_pocket.h:548</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a263652e215e2e07cd8b85ad9602e3487"><div class="ttname"><a href="classpocket__data.html#a263652e215e2e07cd8b85ad9602e3487">pocket_data::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00521">item_pocket.h:521</a></div></div>
<div class="ttc" id="aclasspocket__data_html_aca6ef1e0ffb4448b3a1658cae94e9586"><div class="ttname"><a href="classpocket__data.html#aca6ef1e0ffb4448b3a1658cae94e9586">pocket_data::_no_reload</a></div><div class="ttdeci">bool _no_reload</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00550">item_pocket.h:550</a></div></div>
<div class="ttc" id="aclassrepair__item__actor_html"><div class="ttname"><a href="classrepair__item__actor.html">repair_item_actor</a></div><div class="ttdoc">Repair an item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00773">iuse_actor.h:774</a></div></div>
<div class="ttc" id="aflag_8cpp_html_aa1084eab5da5ecd3f6efe55e0216eb96"><div class="ttname"><a href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a></div><div class="ttdeci">const flag_id flag_PRIMITIVE_RANGED_WEAPON(&quot;PRIMITIVE_RANGED_WEAPON&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a294e70e088a97dea26cb8bcbc29f94c9"><div class="ttname"><a href="item__factory_8cpp.html#a294e70e088a97dea26cb8bcbc29f94c9">qual_GUN</a></div><div class="ttdeci">static const quality_id qual_GUN(&quot;GUN&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a48722d189ba972fea546bc860acb8cff"><div class="ttname"><a href="item__factory_8cpp.html#a48722d189ba972fea546bc860acb8cff">json_flag_NO_RELOAD</a></div><div class="ttdeci">static const flag_id json_flag_NO_RELOAD(&quot;NO_RELOAD&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a4f0587545a47d233d566708fb96fad9c"><div class="ttname"><a href="item__factory_8cpp.html#a4f0587545a47d233d566708fb96fad9c">json_flag_NO_UNLOAD</a></div><div class="ttdeci">static const flag_id json_flag_NO_UNLOAD(&quot;NO_UNLOAD&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="anamespacematerials_html"><div class="ttname"><a href="namespacematerials.html">materials</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00175">material.h:176</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a78f0928723504ed91d542c9090cd244d"><div class="ttname"><a href="output_8cpp.html#a78f0928723504ed91d542c9090cd244d">to_upper_case</a></div><div class="ttdeci">std::string to_upper_case(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01389">output.cpp:1389</a></div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astructfunc_html"><div class="ttname"><a href="structfunc.html">func</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00067">math_parser_impl.h:67</a></div></div>
<div class="ttc" id="astructitype_html_a37edee7dafc5711621f26844cab78cf6"><div class="ttname"><a href="structitype.html#a37edee7dafc5711621f26844cab78cf6">itype::gunmod</a></div><div class="ttdeci">cata::value_ptr&lt; islot_gunmod &gt; gunmod</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01208">itype.h:1208</a></div></div>
<div class="ttc" id="astructitype_html_a7099f3ad89573870d81ce764d6cccb04"><div class="ttname"><a href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">itype::armor</a></div><div class="ttdeci">cata::value_ptr&lt; islot_armor &gt; armor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01201">itype.h:1201</a></div></div>
<div class="ttc" id="astructitype_html_a81cfbf195e75fa6b9729cc4ccb89131d"><div class="ttname"><a href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">itype::materials</a></div><div class="ttdeci">std::map&lt; material_id, int &gt; materials</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01303">itype.h:1303</a></div></div>
<div class="ttc" id="astructitype_html_a82ca05abd5038bf680072963a3a97a7c"><div class="ttname"><a href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">itype::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01359">itype.h:1359</a></div></div>
<div class="ttc" id="astructitype_html_aa656fede37aaf975ab567bcc5c6a452e"><div class="ttname"><a href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">itype::comestible</a></div><div class="ttdeci">cata::value_ptr&lt; islot_comestible &gt; comestible</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01198">itype.h:1198</a></div></div>
<div class="ttc" id="astructitype_html_ab1af94839bb0e587dc5e59b5b1d5a5d8"><div class="ttname"><a href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">itype::repair</a></div><div class="ttdeci">std::set&lt; itype_id &gt; repair</div><div class="ttdoc">What items can be used to repair this item?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01329">itype.h:1329</a></div></div>
<div class="ttc" id="astructitype_html_ab7f53da74b49e49693fd49a8c7407fdd"><div class="ttname"><a href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">itype::repairs_with</a></div><div class="ttdeci">std::set&lt; material_id &gt; repairs_with</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01304">itype.h:1304</a></div></div>
<div class="ttc" id="astructitype_html_abd1f0b721206f746d2a645b4ef6f804b"><div class="ttname"><a href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">itype::item_tags</a></div><div class="ttdeci">FlagsSetType item_tags</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01346">itype.h:1346</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00552">erase_if()</a>, and <a class="el" href="itype_8h_source.html#l01346">itype::item_tags</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01697">add_item_type()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>.</p>

</div>
</div>
<a id="a0c0bfd020f04263f39c1f389fed7b7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0bfd020f04263f39c1f389fed7b7cc">&#9670;&nbsp;</a></span>finalize_post_armor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::finalize_post_armor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l00812">812</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;{</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// Tally up all the hard-defined similar BPs</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="classbody__part__set.html">body_part_set</a> similar_bp;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;similar : <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#a2be3ad8b7d7ee753277a337c11f77ba2">similar_bodyparts</a> ) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    similar_bp.<a class="code" href="classbody__part__set.html#ab53afcd91c970552cf7f8914e2d7b151">set</a>( similar );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;unify_set( similar_bp );</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// Add sublimb coverage when missing explicit definition</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">// if no sub locations are specified assume it covers everything</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() &amp;&amp; data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">sub_parts</a> ) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    <span class="comment">// only assume to add the non hanging locations</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                    <span class="keywordflow">if</span>( !sbp-&gt;<a class="code" href="structsub__body__part__type.html#a97ad7f134f5e89ed216eaa598b3b8ab7">secondary</a> ) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                        data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.insert( sbp );</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="comment">// Include similar sublimbs as well (after populating sub coverage)</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        std::set&lt;sub_bodypart_str_id&gt; similar_sbp;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;similar : sbp-&gt;<a class="code" href="structsub__body__part__type.html#ac01cfd9cacc5cf120a7931dffe0dba8c">similar_bodyparts</a> ) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    similar_sbp.emplace( similar );</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.merge( similar_sbp );</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// We populated substitutes</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="comment">// Handle incomplete matches (ie defined sub coverage without parent coverage)</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;test( sbp-&gt;<a class="code" href="structsub__body__part__type.html#adf3333b766e729ccb064ea5e433f835a">parent</a> ) ) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;set( sbp-&gt;<a class="code" href="structsub__body__part__type.html#adf3333b766e729ccb064ea5e433f835a">parent</a> );</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// if this armor doesn&#39;t have material info should try to populate it with base item materials</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>.empty() ) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="comment">// if no portion info defined skip scaling for portions</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="keywordtype">bool</span> skip_scale = obj.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a> ) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                <span class="keywordtype">float</span> factor = skip_scale</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                               ? obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.size()</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                               : <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( m.second ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( obj.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> );</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <a class="code" href="structpart__material.html">part_material</a> pm( m.first, 100, factor * data.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a> );</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                <span class="comment">// need to ignore sheet thickness since inferred thicknesses are not gonna be perfect</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                pm.ignore_sheet_thickness = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>.push_back( pm );</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment">// cache some values and entries before consolidating info per limb</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">// Setting max_encumber must be in finalize_post because it relies on</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// stack_size being set for all ammo, which happens in finalize_pre.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">max_encumber</a> == -1 ) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_nonrigid_volume = 0_ml;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                <span class="keywordflow">if</span>( !pocket.<a class="code" href="classpocket__data.html#ac5a8cd7b13da6b6f42ca3c03957cbf94">rigid</a> ) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                    <span class="comment">// include the modifier for each individual pocket</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    total_nonrigid_volume += pocket.<a class="code" href="classpocket__data.html#afa406fd8f9fea518d17b5a5b36027f98">max_contains_volume</a>() * pocket.<a class="code" href="classpocket__data.html#a1bbce49c934d7ec35db06824421e1077">volume_encumber_modifier</a>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            data.<a class="code" href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">max_encumber</a> = data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> + total_nonrigid_volume * data.<a class="code" href="structarmor__portion__data.html#adece5b16e2fc7132e51b46e29ff6146f">volume_encumber_modifier</a> /</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                <a class="code" href="structarmor__portion__data.html#ab61ec2399ae0c3b760af82685b141dc0">armor_portion_data::volume_per_encumbrance</a>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="comment">// Precalc average thickness per portion</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordtype">int</span> data_count = 0;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordtype">float</span> thic_acc = 0.0f;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structpart__material.html">part_material</a> &amp;m : data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            thic_acc += m.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> * m.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> / 100.0f;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            data_count++;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span>( data_count &gt; 0 &amp;&amp; thic_acc &gt; std::numeric_limits&lt;float&gt;::epsilon() ) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            data.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a> = thic_acc;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="comment">// Precalc hardness and comfort for these parts of the armor. uncomfortable material supersedes softness (all rigid materials are assumed to be uncomfy)</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;m : data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">if</span>( m.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> &gt; <a class="code" href="structislot__armor.html#a1c3fca7a173d4723c6c6abe5c008749d">islot_armor::test_threshold</a> ) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <span class="keywordflow">if</span>( m.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>-&gt;<a class="code" href="classmaterial__type.html#aba7b9ec5c4d5f786d98b9cfbbe8045b3">soft</a>() ) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    data.<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    data.<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="keywordflow">if</span>( m.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>-&gt;<a class="code" href="classmaterial__type.html#ac411fabadec69ace707943e31f6eadd0">uncomfortable</a>() ) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    data.<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> itt = obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.begin(); itt != obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.end(); ++itt ) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="comment">// using empty to signify it has already been consolidated</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">if</span>( !itt-&gt;sub_coverage.empty() ) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <span class="comment">//check if any further entries should be combined with this one</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> comp_itt = std::next( itt ); comp_itt != obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.end(); ++comp_itt ) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="structarmor__portion__data.html#a7e4f996c78f4440d6b9017ab4696c7ef">armor_portion_data::should_consolidate</a>( *itt, *comp_itt ) ) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="comment">// they are the same so add the covers and sub covers to the original and then clear them from the other</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    itt-&gt;covers-&gt;unify_set( comp_itt-&gt;covers.value() );</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                    itt-&gt;sub_coverage.insert( comp_itt-&gt;sub_coverage.begin(), comp_itt-&gt;sub_coverage.end() );</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                    comp_itt-&gt;covers-&gt;clear();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                    comp_itt-&gt;sub_coverage.clear();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="comment">//remove any now empty entries</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keyword">auto</span> remove_itt = std::remove_if( obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.begin(),</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.end(), [&amp;]( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp; data ) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        return data.sub_coverage.empty() &amp;&amp; data.covers.value().none();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    } );</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.erase( remove_itt, obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data.end() );</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="comment">// now consolidate all the loaded sub_data to one entry per body part</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;sub_armor : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="comment">// for each body part this covers we need to add to the overall data for that bp</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">if</span>( sub_armor.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : sub_armor.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="comment">// go through and find if the body part already exists</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;it : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <span class="comment">// if it contains the body part update the values with data from this</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    <span class="comment">//body_part_set set = it.covers.value();</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    <span class="keywordflow">if</span>( it.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;test( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                        <span class="comment">// modify the values with additional info</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">max_encumber</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">max_encumber</a>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="itype_8h.html#ab725a759b3f3ee8b39927e85ff3f7a85">encumbrance_modifier</a> &amp;en : sub_armor.<a class="code" href="structarmor__portion__data.html#ad8e84c052e41a2ebbf0bcab41808267c">encumber_modifiers</a> ) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                            it.<a class="code" href="structarmor__portion__data.html#ad8e84c052e41a2ebbf0bcab41808267c">encumber_modifiers</a>.push_back( en );</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        <span class="comment">// get the amount of the limb that is covered with sublocations</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        <span class="comment">// for overall coverage we need to scale coverage by that</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                        <span class="keywordtype">float</span> <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> = sub_armor.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) / 100.0;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        <span class="keywordtype">float</span> it_scale = it.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) / 100.0;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#ae10c545888e53cba2e39d6f270cf05b0">cover_vitals</a> += sub_armor.<a class="code" href="structarmor__portion__data.html#ae10c545888e53cba2e39d6f270cf05b0">cover_vitals</a>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                        <span class="comment">// these values need to be averaged based on proportion covered</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a> = ( sub_armor.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a> * it_scale ) /</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                           ( <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it_scale );</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#ab159730669718fc627cab9e3f1b39898">env_resist</a> = ( sub_armor.<a class="code" href="structarmor__portion__data.html#ab159730669718fc627cab9e3f1b39898">env_resist</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it.<a class="code" href="structarmor__portion__data.html#ab159730669718fc627cab9e3f1b39898">env_resist</a> * it_scale ) /</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                        ( <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it_scale );</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                        it.<a class="code" href="structarmor__portion__data.html#a510fbe2595dcb35f23a1fd9a8840f096">env_resist_w_filter</a> = ( sub_armor.<a class="code" href="structarmor__portion__data.html#a510fbe2595dcb35f23a1fd9a8840f096">env_resist_w_filter</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it.<a class="code" href="structarmor__portion__data.html#a510fbe2595dcb35f23a1fd9a8840f096">env_resist_w_filter</a> *</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                                   it_scale ) / ( <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + it_scale );</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                        <span class="comment">// add layers that are covered by sublimbs</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;ll : sub_armor.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a> ) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                            it.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.insert( ll );</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        <span class="comment">// if you are trying to add a new data entry and either the original data</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                        <span class="comment">// or the new data has an empty sublocations list then say that you are</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                        <span class="comment">// redefining a limb</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        <span class="keywordflow">if</span>( it.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() || sub_armor.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s has multiple entries for %s.&quot;</span>,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                      obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.str() );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                        <span class="comment">// go through the materials list and update data</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;new_mat : sub_armor.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                            <span class="keywordtype">bool</span> mat_found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                            <span class="keywordflow">for</span>( <a class="code" href="structpart__material.html">part_material</a> &amp;old_mat : it.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                <span class="keywordflow">if</span>( old_mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a> == new_mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a> ) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                                    mat_found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                    <span class="comment">// values should be averaged</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                    <span class="keywordtype">float</span> max_coverage_new = sub_armor.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                                    <span class="keywordtype">float</span> max_coverage_mats = it.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                    <span class="comment">// the percent of the coverable bits that this armor does cover</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                                    <span class="keywordtype">float</span> coverage_multiplier = sub_armor.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> * max_coverage_new / 100.0f;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                    <span class="comment">// portion should be handled as the portion scaled by relative coverage</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                    old_mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> = old_mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> + <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( new_mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> ) * coverage_multiplier / 100.0f;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                    <span class="comment">// with the max values we can get the weight that each should have</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                    old_mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> = ( max_coverage_new * new_mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> + max_coverage_mats *</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                                          old_mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> ) / ( max_coverage_mats + max_coverage_new );</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                            }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                            <span class="comment">// if we didn&#39;t find an entry for this material</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                            <span class="comment">// create new entry with a scaled material coverage</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                            <span class="keywordflow">if</span>( !mat_found ) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                <span class="keywordtype">float</span> max_coverage_new = sub_armor.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                <span class="comment">// the percent of the coverable bits that this armor does cover</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                <span class="keywordtype">float</span> coverage_multiplier = sub_armor.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> * max_coverage_new / 100.0f;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                                <a class="code" href="structpart__material.html">part_material</a> modified_mat = new_mat;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                                <span class="comment">// if for example your elbow was covered in plastic but none of the rest of the arm</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                <span class="comment">// this should be represented correctly in the UI with the covers for plastic being 5%</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                                <span class="comment">// of the arm. Similarily 50% covered in plastic covering only 30% of the arm should lead to</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                                <span class="comment">// 15% covered for the arm overall</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                                modified_mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( new_mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> ) * coverage_multiplier / 100.0f;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                                it.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>.push_back( modified_mat );</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                            }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                        }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                        <span class="comment">// add additional sub coverage locations to the original list</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : sub_armor.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                            it.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.insert( sbp );</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                        }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="comment">// if not found create a new bp entry</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="comment">// copy values to data but only have one limb</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> new_limb = sub_armor;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    new_limb.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;clear();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                    new_limb.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;set( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                    <span class="comment">// get the amount of the limb that is covered with sublocations</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                    <span class="comment">// for overall coverage we need to scale coverage by that</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                    <span class="keywordtype">float</span> <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> = new_limb.<a class="code" href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">max_coverage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) / 100.0;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                    new_limb.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> = new_limb.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                    new_limb.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> = new_limb.<a class="code" href="structarmor__portion__data.html#ad300e75da3738bdf6bf9b0400114f555">cover_melee</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                    new_limb.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> = new_limb.<a class="code" href="structarmor__portion__data.html#a28f1619afe913e2d998d8d658ffeb247">cover_ranged</a> * <a class="code" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                    <span class="comment">// need to scale each material coverage the same way since they will after this be</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    <span class="comment">// scaled back up at the end of the amalgamation</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="structpart__material.html">part_material</a> &amp;mat : new_limb.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                        mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> ) * new_limb.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> / 100.0f;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                    }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data.push_back( new_limb );</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// calculate encumbrance data per limb if done by description</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#ad8e84c052e41a2ebbf0bcab41808267c">encumber_modifiers</a>.empty() ) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="comment">// we know that the data entry covers a single bp</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> = data.<a class="code" href="structarmor__portion__data.html#a5c9fc6168d30a963e2fedd16d07ed976">calc_encumbrance</a>( obj.<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>, *data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value().begin() );</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <span class="comment">// need to account for varsize stuff here and double encumbrance if so</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> * 2, data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> + 10 );</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="comment">// Recalc max encumber as well</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_nonrigid_volume = 0_ml;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                <span class="keywordflow">if</span>( !pocket.<a class="code" href="classpocket__data.html#ac5a8cd7b13da6b6f42ca3c03957cbf94">rigid</a> ) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    <span class="comment">// include the modifier for each individual pocket</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    total_nonrigid_volume += pocket.<a class="code" href="classpocket__data.html#afa406fd8f9fea518d17b5a5b36027f98">max_contains_volume</a>() * pocket.<a class="code" href="classpocket__data.html#a1bbce49c934d7ec35db06824421e1077">volume_encumber_modifier</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            data.<a class="code" href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">max_encumber</a> = data.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> + total_nonrigid_volume * data.<a class="code" href="structarmor__portion__data.html#adece5b16e2fc7132e51b46e29ff6146f">volume_encumber_modifier</a> /</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                <a class="code" href="structarmor__portion__data.html#ab61ec2399ae0c3b760af82685b141dc0">armor_portion_data::volume_per_encumbrance</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">// need to scale amalgamized portion data based on total coverage.</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// 3% of 48% needs to be scaled to 6% of 100%</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;it : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structpart__material.html">part_material</a> &amp;mat : it.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="comment">// scale the value of portion covered based on how much total is covered</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="comment">// if you proportionally only cover 5% of the arm but overall cover 50%</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="comment">// you actually proportionally cover 10% of the armor</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="comment">// in case of 0 coverage just say the mats cover it all</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="keywordflow">if</span>( it.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> == 0 ) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> = 100;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> ) / ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                        ( it.<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a> ) / 100.0f ) );</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// store a shorthand var for if the item has notable sub coverage data</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;has_sub_coverage ) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="comment">// if we already know it has subcoverage break from the loop</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="comment">// if the item covers everything it doesn&#39;t have specific sub coverage</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="comment">// so don&#39;t need to display it in the UI and do tests for it</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">if</span>( !armor_data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <span class="comment">// go through and see if we are missing any sublocations</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="comment">// if we are missing some then the item does cover specific locations</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="comment">// this flag is mostly used to skip itterating and testing</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="comment">// if UI should be displayed</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="comment">// each armor data entry covers exactly 1 body part</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;compare_sbp : armor_data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;begin()-&gt;obj().sub_parts ) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                <span class="keywordflow">if</span>( compare_sbp-&gt;secondary ) {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    <span class="comment">// don&#39;t care about secondary locations</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : armor_data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                    <span class="keywordflow">if</span>( compare_sbp == sbp ) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <span class="comment">// if an entry is not found we cover specific parts so this item has sub_coverage</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;has_sub_coverage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// calculate worst case and best case protection %</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="comment">// go through each material and contribute its values</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordtype">float</span> tempbest = 1.0f;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordtype">float</span> tempworst = 1.0f;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : armor_data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="comment">// the percent chance the material is not hit</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="keywordtype">float</span> cover = mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> * .01f;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordtype">float</span> cover_invert = 1.0f - cover;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            tempbest *= cover;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="comment">// just interested in cover values that can fail.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="comment">// multiplying by 0 would make this value pointless</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="keywordflow">if</span>( cover_invert &gt; 0 ) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                tempworst *= cover_invert;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="comment">// if tempworst is 1 then the item is homogenous so it only has a single option for damage</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">if</span>( tempworst == 1 ) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            tempworst = 0;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="comment">// if not exactly 0 it should display as at least 1</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span>( tempworst &gt; 0 ) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">worst_protection_chance</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f, tempworst * 100.0f );</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">worst_protection_chance</a> = 0;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span>( tempbest &gt; 0 ) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">best_protection_chance</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f, tempbest * 100.0f );</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">best_protection_chance</a> = 0;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// calculate worst case and best case protection %</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="comment">// go through each material and contribute its values</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordtype">float</span> tempbest = 1.0f;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordtype">float</span> tempworst = 1.0f;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : armor_data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="comment">// the percent chance the material is not hit</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="keywordtype">float</span> cover = mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> * .01f;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            <span class="keywordtype">float</span> cover_invert = 1.0f - cover;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            tempbest *= cover;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="comment">// just interested in cover values that can fail.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="comment">// multiplying by 0 would make this value pointless</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <span class="keywordflow">if</span>( cover_invert &gt; 0 ) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                tempworst *= cover_invert;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="comment">// if tempworst is 1 then the item is homogenous so it only has a single option for damage</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <span class="keywordflow">if</span>( tempworst == 1 ) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            tempworst = 0;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">// if not exactly 0 it should display as at least 1</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">if</span>( tempworst &gt; 0 ) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">worst_protection_chance</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f, tempworst * 100.0f );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">worst_protection_chance</a> = 0;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">if</span>( tempbest &gt; 0 ) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">best_protection_chance</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f, tempbest * 100.0f );</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">best_protection_chance</a> = 0;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// create the vector of all layers</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aea78512102e20fbef5ca777e0e701295">flag_PERSONAL</a> ) ) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">layer_level::PERSONAL</a> );</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aa18c459e79c079f8dd38e306a66a2815">flag_SKINTIGHT</a> ) ) {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075">layer_level::SKINTIGHT</a> );</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aef6d6292c8e51cb4a8517d0fa6cad3f2">flag_NORMAL</a> ) ) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">layer_level::NORMAL</a> );</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#ab380189e0d126a0a29bf8a73ca0c1062">flag_WAIST</a> ) ) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b">layer_level::WAIST</a> );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a08b6d3c07a2b29b187e8ad9fa0ae85de">flag_OUTER</a> ) ) {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f">layer_level::OUTER</a> );</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aa05f4c2e132860490d4e4391fb781c7c">flag_BELTED</a> ) ) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a> );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    }</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a80a2aad79efd009edeea4530d6e6f19d">flag_AURA</a> ) ) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78">layer_level::AURA</a> );</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="comment">// fallback for old way of doing items</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.empty() ) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">layer_level::NORMAL</a> );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// generate the vector of flags that the item will default to if not override</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    std::vector&lt;layer_level&gt; default_layers = obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="comment">// if an item or location has no layer data then default to the flags for the item</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="keywordflow">if</span>( armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.empty() ) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;ll : default_layers ) {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.insert( ll );</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a16824f38d6d8e02b804f3239387382d8">has_unique_layering</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="comment">// add any unique layer entries to the items total layer info</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;ll : armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a> ) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">if</span>( std::count( obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.begin(), obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.end(), ll ) == 0 ) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;all_layers.push_back( ll );</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">// if an item or location has no layer data then default to the flags for the item</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">if</span>( armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.empty() ) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;ll : default_layers ) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.insert( ll );</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#a16824f38d6d8e02b804f3239387382d8">has_unique_layering</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="comment">// anything on a non traditional clothing layer can&#39;t be &quot;rigid&quot; as well since it&#39;s storage pouches and stuff</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespaceanonymous__namespace_02armor__layers_8cpp_03.html#a9ac375ee1fdc7ba334170d5dd5ab51c7">clothing_layer</a> = std::find_if( armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.begin(),</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.end(), []( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> ll ) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            return ll == layer_level::SKINTIGHT || ll == layer_level::NORMAL || ll == layer_level::OUTER;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        } );</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02armor__layers_8cpp_03.html#a9ac375ee1fdc7ba334170d5dd5ab51c7">clothing_layer</a> == armor_data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.end() ) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordtype">bool</span> all_rigid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordtype">bool</span> all_comfortable = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="comment">// check if everything on this armor is still rigid / comfortable</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        all_rigid = all_rigid &amp;&amp; data.<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        all_comfortable = all_comfortable &amp;&amp; data.<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;rigid = all_rigid;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;comfortable = all_comfortable;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="comment">// go through the pockets and apply some characteristics</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#aad62a5be0b90fe8a8ac699441c9ad48b">ablative</a> ) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;ablative = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a827904b6840fb81f1e066aac27820247">extra_encumbrance</a> &gt; 0 ) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;additional_pocket_enc = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a073559e59bd57d378e91dc09f01763d7">ripoff</a> &gt; 0 ) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;ripoff_chance = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a62183468344df59dc0178cdafe1d8237">activity_noise</a>.<a class="code" href="structpocket__noise.html#a94409835229a7a28a6ddd552422c255f">chance</a> &gt; 0 ) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;noisy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// update the items materials based on the materials defined by the armor</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="comment">// this isn&#39;t perfect but neither is the usual definition so this should at</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">// least give a good ballpark</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.empty() ) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        obj.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> = 0;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : armor_data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="comment">// if the material isn&#39;t in the map yet</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.find( mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a> ) == obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.end() ) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                    obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>[mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>] = mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> * 100;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                    obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>[mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>] += mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> * 100;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                obj.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> += mat.<a class="code" href="structpart__material.html#af5f04e47db3a8e616ce70373bec5c5b2">thickness</a> * 100;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// calculate each body part breathability of the armor</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// breathability is the worst breathability of any material on that portion</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="comment">// only recalculate the breathability when the value is not set in JSON</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="comment">// or when the value in JSON is invalid</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="keywordflow">if</span>( armor_data.<a class="code" href="structarmor__portion__data.html#aaf42a2c3d471eaf19bd53d22003b4bf9">breathability</a> &lt; 0 ) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            std::vector&lt;part_material&gt; sorted_mats = armor_data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            std::sort( sorted_mats.begin(), sorted_mats.end(), []( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp; lhs,</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp; rhs ) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                return lhs.id-&gt;breathability() &lt; rhs.id-&gt;breathability();</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            } );</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <span class="comment">// now that mats are sorted least breathable to most</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordtype">int</span> coverage_counted = 0;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="keywordtype">int</span> combined_breathability = 0;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="comment">// only calcuate the breathability if the armor has no valid loaded value</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : sorted_mats ) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                <span class="comment">// this isn&#39;t perfect since its impossible to know the positions of each material relatively</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">// so some guessing is done</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <span class="comment">// specifically count the worst breathability then then next best with additional coverage</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="comment">// and repeat until out of matts or fully covering.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                combined_breathability += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> - coverage_counted ) * mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>-&gt;<a class="code" href="classmaterial__type.html#a0e39663e26cbdaa1a958276cdc189dab">breathability</a>(), 0 );</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                coverage_counted = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a>, coverage_counted );</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                <span class="comment">// this covers the whole piece of armor so we can stop counting better breathability</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                <span class="keywordflow">if</span>( coverage_counted == 100 ) {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <span class="comment">// whatever isn&#39;t covered is as good as skin so 100%</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            armor_data.<a class="code" href="structarmor__portion__data.html#aaf42a2c3d471eaf19bd53d22003b4bf9">breathability</a> = ( combined_breathability / 100 ) + ( 100 - coverage_counted );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;armor_data : obj.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;data ) {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;mat : armor_data.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            <span class="keywordflow">if</span>( mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> &gt; 100 || mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a> &lt; 0 ) {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s has coverage %d for material %s.&quot;</span>,</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                          obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), mat.<a class="code" href="structpart__material.html#af68b3aa64f7a86632f2bcb20907e5989">cover</a>, mat.<a class="code" href="structpart__material.html#aa1f23f6937204887033c2c36ecf77656">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;}</div>
<div class="ttc" id="aclassbody__part__set_html"><div class="ttname"><a href="classbody__part__set.html">body_part_set</a></div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00011">body_part_set.h:12</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_ab53afcd91c970552cf7f8914e2d7b151"><div class="ttname"><a href="classbody__part__set.html#ab53afcd91c970552cf7f8914e2d7b151">body_part_set::set</a></div><div class="ttdeci">void set(const bodypart_str_id &amp;bp)</div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00037">body_part_set.h:37</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a0e39663e26cbdaa1a958276cdc189dab"><div class="ttname"><a href="classmaterial__type.html#a0e39663e26cbdaa1a958276cdc189dab">material_type::breathability</a></div><div class="ttdeci">int breathability() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00321">material.cpp:321</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_aba7b9ec5c4d5f786d98b9cfbbe8045b3"><div class="ttname"><a href="classmaterial__type.html#aba7b9ec5c4d5f786d98b9cfbbe8045b3">material_type::soft</a></div><div class="ttdeci">bool soft() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00341">material.cpp:341</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_ac411fabadec69ace707943e31f6eadd0"><div class="ttname"><a href="classmaterial__type.html#ac411fabadec69ace707943e31f6eadd0">material_type::uncomfortable</a></div><div class="ttdeci">bool uncomfortable() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00346">material.cpp:346</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a073559e59bd57d378e91dc09f01763d7"><div class="ttname"><a href="classpocket__data.html#a073559e59bd57d378e91dc09f01763d7">pocket_data::ripoff</a></div><div class="ttdeci">int ripoff</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00490">item_pocket.h:490</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a1bbce49c934d7ec35db06824421e1077"><div class="ttname"><a href="classpocket__data.html#a1bbce49c934d7ec35db06824421e1077">pocket_data::volume_encumber_modifier</a></div><div class="ttdeci">float volume_encumber_modifier</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00488">item_pocket.h:488</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a62183468344df59dc0178cdafe1d8237"><div class="ttname"><a href="classpocket__data.html#a62183468344df59dc0178cdafe1d8237">pocket_data::activity_noise</a></div><div class="ttdeci">pocket_noise activity_noise</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00492">item_pocket.h:492</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a827904b6840fb81f1e066aac27820247"><div class="ttname"><a href="classpocket__data.html#a827904b6840fb81f1e066aac27820247">pocket_data::extra_encumbrance</a></div><div class="ttdeci">int extra_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00486">item_pocket.h:486</a></div></div>
<div class="ttc" id="aclasspocket__data_html_aad62a5be0b90fe8a8ac699441c9ad48b"><div class="ttname"><a href="classpocket__data.html#aad62a5be0b90fe8a8ac699441c9ad48b">pocket_data::ablative</a></div><div class="ttdeci">bool ablative</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00484">item_pocket.h:484</a></div></div>
<div class="ttc" id="aclasspocket__data_html_afa406fd8f9fea518d17b5a5b36027f98"><div class="ttname"><a href="classpocket__data.html#afa406fd8f9fea518d17b5a5b36027f98">pocket_data::max_contains_volume</a></div><div class="ttdeci">units::volume max_contains_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02468">item_pocket.cpp:2468</a></div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a></div><div class="ttdeci">layer_level</div><div class="ttdoc">Possible layers that a piece of clothing/armor can occupy.</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00289">enums.h:289</a></div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">layer_level::NORMAL</a></div><div class="ttdeci">@ NORMAL</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f">layer_level::OUTER</a></div><div class="ttdeci">@ OUTER</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78">layer_level::AURA</a></div><div class="ttdeci">@ AURA</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075">layer_level::SKINTIGHT</a></div><div class="ttdeci">@ SKINTIGHT</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b">layer_level::WAIST</a></div><div class="ttdeci">@ WAIST</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">layer_level::PERSONAL</a></div><div class="ttdeci">@ PERSONAL</div></div>
<div class="ttc" id="aflag_8cpp_html_a08b6d3c07a2b29b187e8ad9fa0ae85de"><div class="ttname"><a href="flag_8cpp.html#a08b6d3c07a2b29b187e8ad9fa0ae85de">flag_OUTER</a></div><div class="ttdeci">const flag_id flag_OUTER(&quot;OUTER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a80a2aad79efd009edeea4530d6e6f19d"><div class="ttname"><a href="flag_8cpp.html#a80a2aad79efd009edeea4530d6e6f19d">flag_AURA</a></div><div class="ttdeci">const flag_id flag_AURA(&quot;AURA&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa05f4c2e132860490d4e4391fb781c7c"><div class="ttname"><a href="flag_8cpp.html#aa05f4c2e132860490d4e4391fb781c7c">flag_BELTED</a></div><div class="ttdeci">const flag_id flag_BELTED(&quot;BELTED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa18c459e79c079f8dd38e306a66a2815"><div class="ttname"><a href="flag_8cpp.html#aa18c459e79c079f8dd38e306a66a2815">flag_SKINTIGHT</a></div><div class="ttdeci">const flag_id flag_SKINTIGHT(&quot;SKINTIGHT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac2e75bd71461a88a762c817f199feb23"><div class="ttname"><a href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a></div><div class="ttdeci">const flag_id flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aea78512102e20fbef5ca777e0e701295"><div class="ttname"><a href="flag_8cpp.html#aea78512102e20fbef5ca777e0e701295">flag_PERSONAL</a></div><div class="ttdeci">const flag_id flag_PERSONAL(&quot;PERSONAL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aef6d6292c8e51cb4a8517d0fa6cad3f2"><div class="ttname"><a href="flag_8cpp.html#aef6d6292c8e51cb4a8517d0fa6cad3f2">flag_NORMAL</a></div><div class="ttdeci">const flag_id flag_NORMAL(&quot;NORMAL&quot;)</div></div>
<div class="ttc" id="aitype_8h_html_ab725a759b3f3ee8b39927e85ff3f7a85"><div class="ttname"><a href="itype_8h.html#ab725a759b3f3ee8b39927e85ff3f7a85">encumbrance_modifier</a></div><div class="ttdeci">encumbrance_modifier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00257">itype.h:257</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02armor__layers_8cpp_03_html_a9ac375ee1fdc7ba334170d5dd5ab51c7"><div class="ttname"><a href="namespaceanonymous__namespace_02armor__layers_8cpp_03.html#a9ac375ee1fdc7ba334170d5dd5ab51c7">anonymous_namespace{armor_layers.cpp}::clothing_layer</a></div><div class="ttdeci">std::string clothing_layer(const item &amp;worn_item)</div><div class="ttdef"><b>Definition:</b> <a href="armor__layers_8cpp_source.html#l00221">armor_layers.cpp:221</a></div></div>
<div class="ttc" id="anamespacecoords_html_aefed5186be640da17dc0e723c536715a"><div class="ttname"><a href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">coords::scale</a></div><div class="ttdeci">scale</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00029">coordinates.h:29</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a16824f38d6d8e02b804f3239387382d8"><div class="ttname"><a href="structarmor__portion__data.html#a16824f38d6d8e02b804f3239387382d8">armor_portion_data::has_unique_layering</a></div><div class="ttdeci">bool has_unique_layering</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00340">itype.h:340</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a510fbe2595dcb35f23a1fd9a8840f096"><div class="ttname"><a href="structarmor__portion__data.html#a510fbe2595dcb35f23a1fd9a8840f096">armor_portion_data::env_resist_w_filter</a></div><div class="ttdeci">int env_resist_w_filter</div><div class="ttdoc">Environmental protection of a gas mask with installed filter.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00313">itype.h:313</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a5c9fc6168d30a963e2fedd16d07ed976"><div class="ttname"><a href="structarmor__portion__data.html#a5c9fc6168d30a963e2fedd16d07ed976">armor_portion_data::calc_encumbrance</a></div><div class="ttdeci">int calc_encumbrance(units::mass weight, bodypart_id bp) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00344">itype.cpp:344</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a5df615d226253c130620aea7df865574"><div class="ttname"><a href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">armor_portion_data::comfortable</a></div><div class="ttdeci">bool comfortable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00355">itype.h:355</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a63903d5f173791b39620582196a9fcc0"><div class="ttname"><a href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">armor_portion_data::encumber</a></div><div class="ttdeci">int encumber</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00286">itype.h:286</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a652e7f8ed5677ecbd1230c26e1e125e6"><div class="ttname"><a href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">armor_portion_data::best_protection_chance</a></div><div class="ttdeci">int best_protection_chance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00333">itype.h:333</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a7e4f996c78f4440d6b9017ab4696c7ef"><div class="ttname"><a href="structarmor__portion__data.html#a7e4f996c78f4440d6b9017ab4696c7ef">armor_portion_data::should_consolidate</a></div><div class="ttdeci">static bool should_consolidate(const armor_portion_data &amp;l, const armor_portion_data &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00324">itype.cpp:324</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a92d531774b3a991e6c0589cc2d56388e"><div class="ttname"><a href="structarmor__portion__data.html#a92d531774b3a991e6c0589cc2d56388e">armor_portion_data::max_coverage</a></div><div class="ttdeci">int max_coverage(bodypart_str_id bp) const</div><div class="ttdoc">Returns the amount all sublocations this item covers could possibly cover the specific body part.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00299">itype.cpp:299</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a9ca7c23e5f018fad239bd2a1541db217"><div class="ttname"><a href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">armor_portion_data::layers</a></div><div class="ttdeci">std::set&lt; layer_level &gt; layers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00327">itype.h:327</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aabe744d0df94853edbb8bc9db82ae410"><div class="ttname"><a href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">armor_portion_data::rigid</a></div><div class="ttdeci">bool rigid</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00349">itype.h:349</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aaf42a2c3d471eaf19bd53d22003b4bf9"><div class="ttname"><a href="structarmor__portion__data.html#aaf42a2c3d471eaf19bd53d22003b4bf9">armor_portion_data::breathability</a></div><div class="ttdeci">int breathability</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00346">itype.h:346</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ab159730669718fc627cab9e3f1b39898"><div class="ttname"><a href="structarmor__portion__data.html#ab159730669718fc627cab9e3f1b39898">armor_portion_data::env_resist</a></div><div class="ttdeci">int env_resist</div><div class="ttdoc">Resistance to environmental effects.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00309">itype.h:309</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ab61ec2399ae0c3b760af82685b141dc0"><div class="ttname"><a href="structarmor__portion__data.html#ab61ec2399ae0c3b760af82685b141dc0">armor_portion_data::volume_per_encumbrance</a></div><div class="ttdeci">static constexpr units::volume volume_per_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00280">itype.h:280</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ac3fabd15e1320a95cce7ac696183fbaf"><div class="ttname"><a href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">armor_portion_data::worst_protection_chance</a></div><div class="ttdeci">int worst_protection_chance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00337">itype.h:337</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ad8e84c052e41a2ebbf0bcab41808267c"><div class="ttname"><a href="structarmor__portion__data.html#ad8e84c052e41a2ebbf0bcab41808267c">armor_portion_data::encumber_modifiers</a></div><div class="ttdeci">std::vector&lt; encumbrance_modifier &gt; encumber_modifiers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00283">itype.h:283</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ade9a549213aab0d607b8a31eb45ada2e"><div class="ttname"><a href="structarmor__portion__data.html#ade9a549213aab0d607b8a31eb45ada2e">armor_portion_data::max_encumber</a></div><div class="ttdeci">int max_encumber</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00289">itype.h:289</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_adece5b16e2fc7132e51b46e29ff6146f"><div class="ttname"><a href="structarmor__portion__data.html#adece5b16e2fc7132e51b46e29ff6146f">armor_portion_data::volume_encumber_modifier</a></div><div class="ttdeci">float volume_encumber_modifier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00292">itype.h:292</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ae10c545888e53cba2e39d6f270cf05b0"><div class="ttname"><a href="structarmor__portion__data.html#ae10c545888e53cba2e39d6f270cf05b0">armor_portion_data::cover_vitals</a></div><div class="ttdeci">int cover_vitals</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00299">itype.h:299</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ae863a53fdde88ddd5e11e355ae7affea"><div class="ttname"><a href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">armor_portion_data::avg_thickness</a></div><div class="ttdeci">float avg_thickness</div><div class="ttdoc">Average material thickness for all materials from this armor portion.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00305">itype.h:305</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a2be3ad8b7d7ee753277a337c11f77ba2"><div class="ttname"><a href="structbody__part__type.html#a2be3ad8b7d7ee753277a337c11f77ba2">body_part_type::similar_bodyparts</a></div><div class="ttdeci">std::vector&lt; bodypart_str_id &gt; similar_bodyparts</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00323">bodypart.h:323</a></div></div>
<div class="ttc" id="astructbody__part__type_html_af61723b35f418a2b9d2eb92074f1ed95"><div class="ttname"><a href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">body_part_type::sub_parts</a></div><div class="ttdeci">std::vector&lt; sub_bodypart_str_id &gt; sub_parts</div><div class="ttdoc">Sub-location of the body part used for encumberance, coverage and determining protection.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00209">bodypart.h:209</a></div></div>
<div class="ttc" id="astructislot__armor_html_a1c3fca7a173d4723c6c6abe5c008749d"><div class="ttname"><a href="structislot__armor.html#a1c3fca7a173d4723c6c6abe5c008749d">islot_armor::test_threshold</a></div><div class="ttdeci">static const int test_threshold</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00383">itype.h:383</a></div></div>
<div class="ttc" id="astructitype_html_a4ecb806dae208ff275b4aa50ffcd3902"><div class="ttname"><a href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">itype::weight</a></div><div class="ttdeci">units::mass weight</div><div class="ttdoc">Weight of item ( or each stack member )</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01234">itype.h:1234</a></div></div>
<div class="ttc" id="astructitype_html_aef9a3f51d54f46dd1d5a7accaf483922"><div class="ttname"><a href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">itype::mat_portion_total</a></div><div class="ttdeci">int mat_portion_total</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01363">itype.h:1363</a></div></div>
<div class="ttc" id="astructpocket__noise_html_a94409835229a7a28a6ddd552422c255f"><div class="ttname"><a href="structpocket__noise.html#a94409835229a7a28a6ddd552422c255f">pocket_noise::chance</a></div><div class="ttdeci">int chance</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00444">item_pocket.h:444</a></div></div>
<div class="ttc" id="astructsub__body__part__type_html_ac01cfd9cacc5cf120a7931dffe0dba8c"><div class="ttname"><a href="structsub__body__part__type.html#ac01cfd9cacc5cf120a7931dffe0dba8c">sub_body_part_type::similar_bodyparts</a></div><div class="ttdeci">std::vector&lt; sub_bodypart_str_id &gt; similar_bodyparts</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00077">subbodypart.h:77</a></div></div>
<div class="ttc" id="astructsub__body__part__type_html_adf3333b766e729ccb064ea5e433f835a"><div class="ttname"><a href="structsub__body__part__type.html#adf3333b766e729ccb064ea5e433f835a">sub_body_part_type::parent</a></div><div class="ttdeci">string_id&lt; body_part_type &gt; parent</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00057">subbodypart.h:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__pocket_8h_source.html#l00484">pocket_data::ablative</a>, <a class="el" href="item__pocket_8h_source.html#l00492">pocket_data::activity_noise</a>, <a class="el" href="itype_8h_source.html#l01201">itype::armor</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78">AURA</a>, <a class="el" href="itype_8h_source.html#l00305">armor_portion_data::avg_thickness</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">BELTED</a>, <a class="el" href="itype_8h_source.html#l00333">armor_portion_data::best_protection_chance</a>, <a class="el" href="creature_8h_source.html#l00238">bp</a>, <a class="el" href="itype_8h_source.html#l00346">armor_portion_data::breathability</a>, <a class="el" href="itype_8cpp_source.html#l00344">armor_portion_data::calc_encumbrance()</a>, <a class="el" href="item__pocket_8h_source.html#l00444">pocket_noise::chance</a>, <a class="el" href="armor__layers_8cpp_source.html#l00221">anonymous_namespace{armor_layers.cpp}::clothing_layer()</a>, <a class="el" href="itype_8h_source.html#l00355">armor_portion_data::comfortable</a>, <a class="el" href="itype_8h_source.html#l00240">part_material::cover</a>, <a class="el" href="itype_8h_source.html#l00297">armor_portion_data::cover_melee</a>, <a class="el" href="itype_8h_source.html#l00298">armor_portion_data::cover_ranged</a>, <a class="el" href="itype_8h_source.html#l00299">armor_portion_data::cover_vitals</a>, <a class="el" href="itype_8h_source.html#l00296">armor_portion_data::coverage</a>, <a class="el" href="itype_8h_source.html#l00322">armor_portion_data::covers</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="itype_8h_source.html#l00286">armor_portion_data::encumber</a>, <a class="el" href="itype_8h_source.html#l00283">armor_portion_data::encumber_modifiers</a>, <a class="el" href="itype_8h_source.html#l00309">armor_portion_data::env_resist</a>, <a class="el" href="itype_8h_source.html#l00313">armor_portion_data::env_resist_w_filter</a>, <a class="el" href="item__pocket_8h_source.html#l00486">pocket_data::extra_encumbrance</a>, <a class="el" href="flag_8cpp.html#a80a2aad79efd009edeea4530d6e6f19d">flag_AURA</a>, <a class="el" href="flag_8cpp.html#aa05f4c2e132860490d4e4391fb781c7c">flag_BELTED</a>, <a class="el" href="flag_8cpp.html#aef6d6292c8e51cb4a8517d0fa6cad3f2">flag_NORMAL</a>, <a class="el" href="flag_8cpp.html#a08b6d3c07a2b29b187e8ad9fa0ae85de">flag_OUTER</a>, <a class="el" href="flag_8cpp.html#aea78512102e20fbef5ca777e0e701295">flag_PERSONAL</a>, <a class="el" href="flag_8cpp.html#aa18c459e79c079f8dd38e306a66a2815">flag_SKINTIGHT</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="flag_8cpp.html#ab380189e0d126a0a29bf8a73ca0c1062">flag_WAIST</a>, <a class="el" href="itype_8cpp_source.html#l00164">itype::has_flag()</a>, <a class="el" href="itype_8h_source.html#l00340">armor_portion_data::has_unique_layering</a>, <a class="el" href="itype_8h_source.html#l00239">part_material::id</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, <a class="el" href="itype_8h_source.html#l00242">part_material::ignore_sheet_thickness</a>, <a class="el" href="itype_8h_source.html#l00327">armor_portion_data::layers</a>, <a class="el" href="itype_8h_source.html#l01363">itype::mat_portion_total</a>, <a class="el" href="itype_8h_source.html#l00319">armor_portion_data::materials</a>, <a class="el" href="itype_8h_source.html#l01303">itype::materials</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="item__pocket_8cpp_source.html#l02468">pocket_data::max_contains_volume()</a>, <a class="el" href="itype_8cpp_source.html#l00299">armor_portion_data::max_coverage()</a>, <a class="el" href="itype_8h_source.html#l00289">armor_portion_data::max_encumber</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">NORMAL</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f">OUTER</a>, <a class="el" href="subbodypart_8h_source.html#l00057">sub_body_part_type::parent</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">PERSONAL</a>, <a class="el" href="itype_8h_source.html#l01253">itype::pockets</a>, <a class="el" href="item__pocket_8h_source.html#l00546">pocket_data::rigid</a>, <a class="el" href="itype_8h_source.html#l00349">armor_portion_data::rigid</a>, <a class="el" href="item__pocket_8h_source.html#l00490">pocket_data::ripoff</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="subbodypart_8h_source.html#l00063">sub_body_part_type::secondary</a>, <a class="el" href="body__part__set_8h_source.html#l00037">body_part_set::set()</a>, <a class="el" href="itype_8cpp_source.html#l00324">armor_portion_data::should_consolidate()</a>, <a class="el" href="bodypart_8h_source.html#l00323">body_part_type::similar_bodyparts</a>, <a class="el" href="subbodypart_8h_source.html#l00077">sub_body_part_type::similar_bodyparts</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075">SKINTIGHT</a>, <a class="el" href="material_8cpp_source.html#l00341">material_type::soft()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="itype_8h_source.html#l00324">armor_portion_data::sub_coverage</a>, <a class="el" href="bodypart_8h_source.html#l00209">body_part_type::sub_parts</a>, <a class="el" href="itype_8h_source.html#l00383">islot_armor::test_threshold</a>, <a class="el" href="itype_8h_source.html#l00241">part_material::thickness</a>, <a class="el" href="material_8cpp_source.html#l00346">material_type::uncomfortable()</a>, <a class="el" href="item__pocket_8h_source.html#l00488">pocket_data::volume_encumber_modifier</a>, <a class="el" href="itype_8h_source.html#l00292">armor_portion_data::volume_encumber_modifier</a>, <a class="el" href="itype_8h_source.html#l00280">armor_portion_data::volume_per_encumbrance</a>, <a class="el" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b">WAIST</a>, <a class="el" href="itype_8h_source.html#l01234">itype::weight</a>, and <a class="el" href="itype_8h_source.html#l00337">armor_portion_data::worst_protection_chance</a>.</p>

</div>
</div>
<a id="a8b49fe019e92adc0e8ae3cebdbdf7c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b49fe019e92adc0e8ae3cebdbdf7c75">&#9670;&nbsp;</a></span>finalize_pre()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::finalize_pre </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies part of finalization that don't depend on other items. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l00220">220</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// Add relic data by ID we defered</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        obj.<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>-&gt;finalize();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        obj.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a> );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="damage_8cpp.html#af8824edc46ec813a219b406a87271f69">finalize_damage_map</a>( obj.<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a> );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span>( !obj.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a>.empty() ) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="damage_8cpp.html#af8824edc46ec813a219b406a87271f69">finalize_damage_map</a>( obj.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a>, <span class="keyword">false</span>, 1.f );</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;const damage_type_id, float&gt; &amp;dt : obj.<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a> ) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> iter = obj.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a>.find( dt.first );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">if</span>( iter != obj.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a>.end() ) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                dt.second *= iter-&gt;second;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="comment">// For maintaining legacy behaviour (when melee damage used ints)</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                dt.second = <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( dt.second );</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span>( !obj.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a>.empty() ) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="damage_8cpp.html#af8824edc46ec813a219b406a87271f69">finalize_damage_map</a>( obj.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a>, <span class="keyword">false</span>, 0.f );</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;const damage_type_id, float&gt; &amp;dt : obj.<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a> ) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> iter = obj.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a>.find( dt.first );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span>( iter != obj.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a>.end() ) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                dt.second += iter-&gt;second;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="comment">// For maintaining legacy behaviour (when melee damage used ints)</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                dt.second = <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( dt.second );</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a9f9066f5f1101fe1f6304acda9121b34">flag_STAB</a> ) ) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;The \&quot;STAB\&quot; flag used on %s is obsolete, add a \&quot;stab\&quot; value in the \&quot;melee_damage\&quot; object instead.&quot;</span>,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                  obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// add usage methods (with default values) based upon qualities</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// if a method was already set the specific values remain unchanged</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;q : obj.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a> ) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> : q.first.obj().usages ) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span>( q.second &gt;= <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.first ) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.second );</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="comment">// As far as I know all the actions provided by quality level do not consume ammo</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="comment">// So it is safe to set all to 0</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="comment">// To do: read the json file of this item again and get for each quality a scale number</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                obj.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.emplace( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.second, 0 );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;q : obj.<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a> ) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> : q.first.obj().usages ) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span>( q.second &gt;= <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.first ) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.second );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="comment">// I do not know how to get the ammo scale, so hopefully it naturally comes with the item&#39;s scale?</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a> ) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        std::string <a class="code" href="structfunc.html">func</a> = obj.<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a> ? <span class="stringliteral">&quot;GUNMOD_ATTACH&quot;</span> : <span class="stringliteral">&quot;TOOLMOD_ATTACH&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, <a class="code" href="structfunc.html">func</a> );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        obj.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.emplace( <a class="code" href="structfunc.html">func</a>, 0 );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="structfunc.html">func</a> = <span class="stringliteral">&quot;detach_gunmods&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, <a class="code" href="structfunc.html">func</a> );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        obj.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.emplace( <a class="code" href="structfunc.html">func</a>, 0 );</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keyword">const</span> std::string func2 = <span class="stringliteral">&quot;modify_gunmods&quot;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, func2 );</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        obj.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.emplace( func2, 0 );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;NO_FAULTS&quot;</span> ) ) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        obj.<a class="code" href="structitype.html#a71835820e6594955948ef1e8bc7bed68">faults</a>.clear();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// If no category was forced via JSON automatically calculate one now</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span>( !obj.<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a>.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() || obj.<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        obj.<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a> = <a class="code" href="item__factory_8cpp.html#af75903aaf526ac4beef1c4d46a449759">calc_category</a>( obj );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// use pre-Cataclysm price as default if post-cataclysm price unspecified</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a435567e9d513701c13586b96e289e33a">price_post</a> &lt; 0_cent ) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        obj.<a class="code" href="structitype.html#a435567e9d513701c13586b96e289e33a">price_post</a> = obj.<a class="code" href="structitype.html#a41038ca826de1713661d7edd6c1705d0">price</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// use base volume if integral volume unspecified</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">integral_volume</a> &lt; 0_ml ) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        obj.<a class="code" href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">integral_volume</a> = obj.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// use base weight if integral weight unspecified</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">integral_weight</a> &lt; 0_gram ) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        obj.<a class="code" href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">integral_weight</a> = obj.<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// for ammo and comestibles stack size defaults to count of initial charges</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Set max stack size to 200 to prevent integer overflow</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> == 0 ) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> = obj.<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> &gt; 200 ) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot; stack size is too large, reducing to 200&quot;</span> );</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> = 200;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Items always should have some volume.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// TODO: handle possible exception software?</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> &lt;= 0_ml ) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="item__factory_8cpp.html#a38307e94fb081a7d80d056f2b7166f63">is_physical</a>( obj ) ) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s has zero volume (if zero volume is intentional &quot;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                      <span class="stringliteral">&quot;you can suppress this error with the ZERO_WEIGHT &quot;</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                      <span class="stringliteral">&quot;flag)\n&quot;</span>, obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        obj.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> = <a class="code" href="namespaceunits.html#a4a90c93a4ae16f8f9a6a3bb554c7fa7c">units::from_milliliter</a>( 1 );</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// set light_emission based on LIGHT_[X] flag</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;f : obj.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a> ) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="cata__utility_8h.html#a00069567a0e8438fa2707a5214e53ca4">string_starts_with</a>( f.str(), <span class="stringliteral">&quot;LIGHT_&quot;</span> ) ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="classret__val.html">ret_val&lt;int&gt;</a> ll = <a class="code" href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt;int&gt;</a>( f.str().substr( 6 ), <span class="keyword">false</span> );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span>( ll.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordflow">if</span>( ll.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>() &gt; 0 ) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    obj.<a class="code" href="structitype.html#a64d8b1399996d38b2ed54e1543dcef50">light_emission</a> = ll.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s specifies light emission of zero, which is redundant&quot;</span>,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                              obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;error parsing integer light emission suffic for item %s: %s&quot;</span>,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                          obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), ll.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// remove LIGHT_[X] flags</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="cata__utility_8h.html#ad7f4be1b8ffc52a0be18e72d041241af">erase_if</a>( obj.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>, []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; f ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        return string_starts_with( f.str(), <span class="stringliteral">&quot;LIGHT_&quot;</span> );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    } );</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Finalize vitamins in food</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a> ) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;default_nutrition.finalize_vitamins();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordtype">bool</span> is_not_boring = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordtype">float</span> specific_heat_solid = 0.0f;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordtype">float</span> specific_heat_liquid = 0.0f;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordtype">float</span> latent_heat = 0.0f;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordtype">int</span> mat_total = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">auto</span> add_spi = [&amp;is_not_boring, &amp;specific_heat_solid, &amp;specific_heat_liquid, &amp;latent_heat,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        &amp;mat_total]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; m, <span class="keywordtype">int</span> portion ) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            specific_heat_solid += m-&gt;specific_heat_solid() * portion;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            specific_heat_liquid += m-&gt;specific_heat_liquid() * portion;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            latent_heat += m-&gt;latent_heat() * portion;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            mat_total += portion;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            is_not_boring = is_not_boring || m == <a class="code" href="item__factory_8cpp.html#ae752f1709c53f9ef075ccc72da46af05">material_junk</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        };</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair &lt;const material_id, int&gt; &amp;pair : obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;materials ) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            add_spi( pair.first, pair.second );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// Average based on number of materials.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;specific_heat_liquid = specific_heat_liquid / mat_total;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;specific_heat_solid = specific_heat_solid / mat_total;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;latent_heat = latent_heat / mat_total;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="comment">// Junk food never gets old by default, but this can still be overridden.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;monotony_penalty == -1 ) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;monotony_penalty = is_not_boring ? 0 : 2;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// for ammo not specifying loudness derive value from other properties</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;loudness &lt; 0 ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;loudness = obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;range * 2;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du : obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;damage ) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;loudness += ( du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> + du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> ) * 2;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mats = obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">if</span>( mats.find( <a class="code" href="item__factory_8cpp.html#a1a01bcf318c54eac7ac61f52513b81e2">material_hydrocarbons</a> ) == mats.end() &amp;&amp;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            mats.find( <a class="code" href="item__factory_8cpp.html#a9cdd804333532fdb03af01ee60e44820">material_oil</a> ) == mats.end() ) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespaceammo__effects.html">ammo_effects</a> = obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;ammo_effects;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;cookoff = <a class="code" href="namespaceammo__effects.html">ammo_effects</a>.count( <span class="stringliteral">&quot;INCENDIARY&quot;</span> ) &gt; 0 ||</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                <a class="code" href="namespaceammo__effects.html">ammo_effects</a>.count( <span class="stringliteral">&quot;COOKOFF&quot;</span> ) &gt; 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;std::string&gt; special_cookoff_tags = {{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    <span class="stringliteral">&quot;SPECIAL_COOKOFF&quot;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            };</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;special_cookoff = std::any_of( <a class="code" href="namespaceammo__effects.html">ammo_effects</a>.begin(), <a class="code" href="namespaceammo__effects.html">ammo_effects</a>.end(),</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            []( <span class="keyword">const</span> std::string &amp; s ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                return special_cookoff_tags.count( s ) &gt; 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            } );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;cookoff = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;special_cookoff = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// Special casing for shot, since the damage per pellet can be tiny.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="comment">// Instead of handling fractional damage values, we scale the effective number</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// of projectiles based on the damage so that they end up at 1.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;count &gt; 1 &amp;&amp; obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;shot_damage.total_damage() &lt; 1.0f ) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="comment">// Patch to fixup shot without shot_damage until I get all the definitions consistent.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;shot_damage.damage_units.empty() ) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;shot_damage.damage_units.emplace_back( <a class="code" href="item__factory_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a>, 0.1f );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;count = obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;count * obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;shot_damage.total_damage();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            obj.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;shot_damage.damage_units.front().amount = 1.0f;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// Helper for ammo migration in following sections</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keyword">auto</span> migrate_ammo_set = [<span class="keyword">this</span>]( std::set&lt;ammotype&gt; &amp;ammoset ) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> ammo_type_it = ammoset.begin(); ammo_type_it != ammoset.end(); ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> default_ammo_type = ammo_type_it-&gt;obj().default_ammotype();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.find( default_ammo_type );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.end() ) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                ammo_type_it = ammoset.erase( ammo_type_it );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                ammoset.insert( maybe_migrated-&gt;second );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                ++ammo_type_it;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    };</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keyword">auto</span> migrate_ammo_map = [<span class="keyword">this</span>]( std::map&lt;ammotype, int&gt; &amp;ammomap ) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> ammo_type_it = ammomap.begin(); ammo_type_it != ammomap.end(); ) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> default_ammo_type = ammo_type_it-&gt;first.obj().default_ammotype();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.find( default_ammo_type );</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.end() ) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <span class="keywordtype">int</span> capacity = ammo_type_it-&gt;second;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                ammo_type_it = ammomap.erase( ammo_type_it );</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                ammomap.emplace( maybe_migrated-&gt;second, capacity );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                ++ammo_type_it;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    };</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">// ensure default_ammo is set</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo.is_null() ) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo = <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( *obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type.begin() )-&gt;<a class="code" href="classammunition__type.html#a236169a55b7679baaa96e491c36e57d9">default_ammotype</a>();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// If the magazine has ammo types for which the default ammo has been migrated, we need to</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="comment">// replace those ammo types with that of the migrated ammo</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        migrate_ammo_set( obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="comment">// ensure default_ammo is migrated if need be</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.find( obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.end() ) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo = maybe_migrated-&gt;second.obj().default_ammotype();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;magazine : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">if</span>( magazine.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> != <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            migrate_ammo_map( magazine.<a class="code" href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">ammo_restriction</a> );</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// list all the ammo types that work</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;am : obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type ) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keyword">auto</span> temp_vec = <a class="code" href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">Item_factory::find</a>( [obj, am]( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp; e ) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keywordflow">if</span>( !e.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> || <a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( e.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() ) ) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    return false;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">return</span> e.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type == am;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            } );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *val : temp_vec ) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                obj.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;cached_ammos[am].insert( val-&gt;get_id() );</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Migrate compatible magazines</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> kv : obj.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a> ) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> mag_it = kv.second.begin(); mag_it != kv.second.end(); ) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.find( *mag_it );</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.end() ) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                mag_it = kv.second.erase( mag_it );</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                kv.second.insert( kv.second.begin(), maybe_migrated-&gt;second );</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                ++mag_it;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// Migrate default magazines</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> kv : obj.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a> ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.find( kv.second );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#a777b712b7a0b03c6e0ad239ad29d7094">migrated_magazines</a>.end() ) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            kv.second = maybe_migrated-&gt;second;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a> ) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="comment">// Migrate acceptable ammo and ammo modifiers</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        migrate_ammo_set( obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;acceptable_ammo );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        migrate_ammo_set( obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;ammo_modifier );</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> kv = obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;magazine_adaptor.begin(); kv != obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;magazine_adaptor.end(); ) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.find( kv-&gt;first.obj().default_ammotype() );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.end() ) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;compatible_mag : kv-&gt;second ) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                    obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;magazine_adaptor[maybe_migrated-&gt;second].insert( compatible_mag );</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                kv = obj.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;magazine_adaptor.erase( kv );</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                ++kv;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// If the gun has ammo types for which the default ammo has been migrated, we need to</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">// replace those ammo types with that of the migrated ammo</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> ammo_type_it = obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.begin(); ammo_type_it != obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.end(); ) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keyword">auto</span> maybe_migrated = <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.find( ammo_type_it-&gt;obj().default_ammotype() );</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">if</span>( maybe_migrated != <a class="code" href="classItem__factory.html#ac58203a04bf0d221f64ec46d6d82b96e">migrated_ammo</a>.end() ) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> old_ammo = *ammo_type_it;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="comment">// Remove the old ammotype add the migrated version</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                ammo_type_it = obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.erase( ammo_type_it );</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;new_ammo = maybe_migrated-&gt;second;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.insert( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.begin(), new_ammo );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="comment">// Migrate the compatible magazines</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <span class="keyword">auto</span> old_mag_it = obj.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.find( old_ammo );</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="keywordflow">if</span>( old_mag_it != obj.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.end() ) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;old_mag : old_mag_it-&gt;second ) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        obj.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>[new_ammo].insert( old_mag );</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    obj.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.erase( old_ammo );</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="comment">// And the default magazines for each magazine type</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keyword">auto</span> old_default_mag_it = obj.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>.find( old_ammo );</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordflow">if</span>( old_default_mag_it != obj.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>.end() ) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;old_default_mag = old_default_mag_it-&gt;second;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    obj.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>[new_ammo] = old_default_mag;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    obj.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>.erase( old_ammo );</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                ++ammo_type_it;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">// generate cached map for [mag type_id] -&gt; [set of compatible guns]</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> != <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;mag_type_id : pocket.<a class="code" href="classpocket__data.html#a0396faa6773cd1cff9bd0717ad957296">item_id_restriction</a> ) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( mag_type_id ) || <a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ) ) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <a class="code" href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a>[mag_type_id].insert( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;magazine : obj.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">if</span>( magazine.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> != <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            migrate_ammo_map( magazine.<a class="code" href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">ammo_restriction</a> );</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// TODO: add explicit action field to gun definitions</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> defmode_name = [&amp;]() {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;clip == 1 ) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;manual&quot;</span> ); <span class="comment">// break-type actions</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used == <a class="code" href="item__factory_8cpp.html#ace5ff5bc15ace2d6924995f0d04de94a">skill_pistol</a> &amp;&amp; obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a> ) ) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;revolver&quot;</span> );</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;semi-auto&quot;</span> );</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        };</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// if the gun doesn&#39;t have a DEFAULT mode then add one now</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;modes.emplace( <a class="code" href="item__factory_8cpp.html#abd626046c3834417ce0dd6173c607061">gun_mode_DEFAULT</a>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                <a class="code" href="classgun__modifier__data.html">gun_modifier_data</a>( defmode_name(), 1, std::set&lt;std::string&gt;() ) );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="comment">// If a &quot;gun&quot; has a reach attack, give it an additional melee mode.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a> ) ) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;modes.emplace( <a class="code" href="item__factory_8cpp.html#a5b366d7fbfa124bde0a3ad443cf3574c">gun_mode_MELEE</a>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                    <a class="code" href="classgun__modifier__data.html">gun_modifier_data</a>( <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;melee&quot;</span> ), 1,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            { <span class="stringliteral">&quot;MELEE&quot;</span> } ) );</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;handling &lt; 0 ) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="comment">// TODO: specify in JSON via classes</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used == <a class="code" href="item__factory_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a> ||</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used == <a class="code" href="item__factory_8cpp.html#a629add6779d8563b628372dc2334cac0">skill_smg</a> ||</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used == <a class="code" href="item__factory_8cpp.html#a0f15a8372bc3f3abc8c0c79960c74764">skill_shotgun</a> ) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;handling = 20;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;handling = 10;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="comment">// list all the ammo types that work</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;am : obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo ) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keyword">auto</span> temp_vec = <a class="code" href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">Item_factory::find</a>( [obj, am]( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp; e ) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">if</span>( !e.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> || <a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( e.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() ) ) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    return false;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">return</span> e.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type == am;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            } );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *val : temp_vec ) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                obj.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;cached_ammos[am].insert( val-&gt;get_id() );</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="classItem__factory.html#a06d9c7312db07df1a2e0cb97ad8a8dae">set_allergy_flags</a>( obj );</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="item__factory_8cpp.html#a00f2750af5bac1a8820a02582018dd36">hflesh_to_flesh</a>( obj );</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="classItem__factory.html#a2575b508d2fea4ba82af973171d6f45a">npc_implied_flags</a>( obj );</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a> ) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        std::map&lt;vitamin_id, int&gt; vitamins = obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;default_nutrition.vitamins();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;NO_VITAMINS&quot;</span> ) ) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;vit : vitamins ) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="keywordflow">if</span>( vit.first-&gt;type() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                    obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;default_nutrition.set_vitamin( vit.first, 0 );</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vitamins.empty() &amp;&amp; obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;healthy &gt;= 0 ) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="comment">// Default vitamins of healthy comestibles to their edible base materials if none explicitly specified.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordtype">int</span> healthy = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;healthy, 1 ) * 10;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keyword">auto</span> mat = obj.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="comment">// TODO: migrate inedible comestibles to appropriate alternative types.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> m = mat.begin(); m != mat.end(); ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="keywordflow">if</span>( !m-&gt;first-&gt;edible() ) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    m = mat.erase( m );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    m++;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="comment">// For comestibles composed of multiple edible materials we calculate the average.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v : <a class="code" href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a>() ) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordflow">if</span>( !vitamins.count( v.first ) ) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : mat ) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        <span class="keywordtype">double</span> amount = m.first-&gt;vitamin( v.first ) * healthy / mat.size();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        obj.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>-&gt;default_nutrition.add_vitamin( v.first, <a class="code" href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">std::ceil</a>( amount ) );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">// recurse into subtypes, adding self as substitution for all items in the subtypes chain</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classstring__id.html">itype_id</a> it = obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>; it-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; it-&gt;tool-&gt;subtype.is_valid(); it = it-&gt;tool-&gt;subtype ) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">tool_subtypes</a>[ it-&gt;tool-&gt;subtype ].insert( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a> ) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        e.second.get_actor_ptr()-&gt;finalize( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a>.<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        obj.<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a>.<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>()-&gt;<a class="code" href="classiuse__actor.html#ae7123b9e8ee6610ef1694f0451f05624">finalize</a>( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp; obj.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> &amp;&amp; obj.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;martial_art.is_null() &amp;&amp;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="cata__utility_8h.html#a00069567a0e8438fa2707a5214e53ca4">string_starts_with</a>( obj.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), <span class="stringliteral">&quot;manual_&quot;</span> ) ) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="comment">// HACK: Legacy martial arts books rely on a hack whereby the name of the</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="comment">// martial art is derived from the item id</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        obj.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;martial_art = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">matype_id</a>( <span class="stringliteral">&quot;style_&quot;</span> + obj.<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>().substr( 7 ) );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;link_up&quot;</span> ) ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        obj.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.emplace( <span class="stringliteral">&quot;link_up&quot;</span>, 0 );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a> == -1_mm ) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::volume</a> effective_volume = obj.<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() &amp;&amp;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                         obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> &gt; 0 ? ( obj.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> / obj.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> ) : obj.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        obj.<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a> = units::default_length_from_volume&lt;int&gt;( effective_volume );</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_a00069567a0e8438fa2707a5214e53ca4"><div class="ttname"><a href="cata__utility_8h.html#a00069567a0e8438fa2707a5214e53ca4">string_starts_with</a></div><div class="ttdeci">bool string_starts_with(std::string_view s1, std::string_view s2)</div><div class="ttdoc">Returns true iff s1 starts with s2.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00450">cata_utility.h:450</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">cata_variant_type::matype_id</a></div><div class="ttdeci">@ matype_id</div></div>
<div class="ttc" id="aclassItem__factory_html_a06d9c7312db07df1a2e0cb97ad8a8dae"><div class="ttname"><a href="classItem__factory.html#a06d9c7312db07df1a2e0cb97ad8a8dae">Item_factory::set_allergy_flags</a></div><div class="ttdeci">static void set_allergy_flags(itype &amp;item_template)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03643">item_factory.cpp:3643</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a2575b508d2fea4ba82af973171d6f45a"><div class="ttname"><a href="classItem__factory.html#a2575b508d2fea4ba82af973171d6f45a">Item_factory::npc_implied_flags</a></div><div class="ttdeci">static void npc_implied_flags(itype &amp;item_template)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03713">item_factory.cpp:3713</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a2fe4e054d71cc25acff45c3ddd3989ec"><div class="ttname"><a href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">Item_factory::find</a></div><div class="ttdeci">static std::vector&lt; const itype * &gt; find(const std::function&lt; bool(const itype &amp;)&gt; &amp;func)</div><div class="ttdoc">Find all item templates (both static and runtime) matching UnaryPredicate function.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05427">item_factory.cpp:5427</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a74be8fac6c7cb1dc966f98069741955d"><div class="ttname"><a href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">Item_factory::emplace_usage</a></div><div class="ttdeci">void emplace_usage(std::map&lt; std::string, use_function &gt; &amp;container, const std::string &amp;iuse_id)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05245">item_factory.cpp:5245</a></div></div>
<div class="ttc" id="aclassammunition__type_html_a236169a55b7679baaa96e491c36e57d9"><div class="ttname"><a href="classammunition__type.html#a236169a55b7679baaa96e491c36e57d9">ammunition_type::default_ammotype</a></div><div class="ttdeci">const itype_id &amp; default_ammotype() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo_8h_source.html#l00020">ammo.h:20</a></div></div>
<div class="ttc" id="aclassgun__modifier__data_html"><div class="ttname"><a href="classgun__modifier__data.html">gun_modifier_data</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00045">itype.h:46</a></div></div>
<div class="ttc" id="aclassiuse__actor_html_ae7123b9e8ee6610ef1694f0451f05624"><div class="ttname"><a href="classiuse__actor.html#ae7123b9e8ee6610ef1694f0451f05624">iuse_actor::finalize</a></div><div class="ttdeci">virtual void finalize(const itype_id &amp;)</div><div class="ttdoc">Finalizes the actor.</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00299">iuse.h:299</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="aclassret__val__common_html_adf8af6e05bb9773c0b77b4299ba13c6c"><div class="ttname"><a href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">ret_val_common::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00017">ret_val.h:17</a></div></div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00048">ret_val.h:49</a></div></div>
<div class="ttc" id="aclassret__val_html_a277e45f995cd21adfaceab9aa8388138"><div class="ttname"><a href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">ret_val::value</a></div><div class="ttdeci">T value() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00091">ret_val.h:91</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aclassvitamin_html_abed8d50d1b8805a7f7ce49ce09ab1b7a"><div class="ttname"><a href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a></div><div class="ttdeci">static const std::map&lt; vitamin_id, vitamin &gt; &amp; all()</div><div class="ttdoc">Get all currently loaded vitamins.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8cpp_source.html#l00101">vitamin.cpp:101</a></div></div>
<div class="ttc" id="adamage_8cpp_html_af8824edc46ec813a219b406a87271f69"><div class="ttname"><a href="damage_8cpp.html#af8824edc46ec813a219b406a87271f69">finalize_damage_map</a></div><div class="ttdeci">void finalize_damage_map(std::unordered_map&lt; damage_type_id, float &gt; &amp;damage_map, bool force_derive, float default_value)</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00781">damage.cpp:781</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a0c4794877bf330a3ebe213d225ec32db"><div class="ttname"><a href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a></div><div class="ttdeci">const flag_id flag_NO_REPAIR(&quot;NO_REPAIR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b9d4fe0b26fc9079ae038232f080066"><div class="ttname"><a href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a></div><div class="ttdeci">const flag_id flag_REACH_ATTACK(&quot;REACH_ATTACK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9f9066f5f1101fe1f6304acda9121b34"><div class="ttname"><a href="flag_8cpp.html#a9f9066f5f1101fe1f6304acda9121b34">flag_STAB</a></div><div class="ttdeci">const flag_id flag_STAB(&quot;STAB&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af71f2c6320f42a26aa792634c2dd0035"><div class="ttname"><a href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a></div><div class="ttdeci">const flag_id flag_RELOAD_ONE(&quot;RELOAD_ONE&quot;)</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a00f2750af5bac1a8820a02582018dd36"><div class="ttname"><a href="item__factory_8cpp.html#a00f2750af5bac1a8820a02582018dd36">hflesh_to_flesh</a></div><div class="ttdeci">static void hflesh_to_flesh(itype &amp;item_template)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03693">item_factory.cpp:3693</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a0f15a8372bc3f3abc8c0c79960c74764"><div class="ttname"><a href="item__factory_8cpp.html#a0f15a8372bc3f3abc8c0c79960c74764">skill_shotgun</a></div><div class="ttdeci">static const skill_id skill_shotgun(&quot;shotgun&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a1a01bcf318c54eac7ac61f52513b81e2"><div class="ttname"><a href="item__factory_8cpp.html#a1a01bcf318c54eac7ac61f52513b81e2">material_hydrocarbons</a></div><div class="ttdeci">static const material_id material_hydrocarbons(&quot;hydrocarbons&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a35045bcfd0e1c55fb7e9b88d8e36a614"><div class="ttname"><a href="item__factory_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a></div><div class="ttdeci">static const damage_type_id damage_bullet(&quot;bullet&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a5b366d7fbfa124bde0a3ad443cf3574c"><div class="ttname"><a href="item__factory_8cpp.html#a5b366d7fbfa124bde0a3ad443cf3574c">gun_mode_MELEE</a></div><div class="ttdeci">static const gun_mode_id gun_mode_MELEE(&quot;MELEE&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a629add6779d8563b628372dc2334cac0"><div class="ttname"><a href="item__factory_8cpp.html#a629add6779d8563b628372dc2334cac0">skill_smg</a></div><div class="ttdeci">static const skill_id skill_smg(&quot;smg&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a9cdd804333532fdb03af01ee60e44820"><div class="ttname"><a href="item__factory_8cpp.html#a9cdd804333532fdb03af01ee60e44820">material_oil</a></div><div class="ttdeci">static const material_id material_oil(&quot;oil&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ab2508226b904e65441fcae52e0b2b998"><div class="ttname"><a href="item__factory_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a></div><div class="ttdeci">static const skill_id skill_rifle(&quot;rifle&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_abd626046c3834417ce0dd6173c607061"><div class="ttname"><a href="item__factory_8cpp.html#abd626046c3834417ce0dd6173c607061">gun_mode_DEFAULT</a></div><div class="ttdeci">static const gun_mode_id gun_mode_DEFAULT(&quot;DEFAULT&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ace5ff5bc15ace2d6924995f0d04de94a"><div class="ttname"><a href="item__factory_8cpp.html#ace5ff5bc15ace2d6924995f0d04de94a">skill_pistol</a></div><div class="ttdeci">static const skill_id skill_pistol(&quot;pistol&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ae752f1709c53f9ef075ccc72da46af05"><div class="ttname"><a href="item__factory_8cpp.html#ae752f1709c53f9ef075ccc72da46af05">material_junk</a></div><div class="ttdeci">static const material_id material_junk(&quot;junk&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_af75903aaf526ac4beef1c4d46a449759"><div class="ttname"><a href="item__factory_8cpp.html#af75903aaf526ac4beef1c4d46a449759">calc_category</a></div><div class="ttdeci">static item_category_id calc_category(const itype &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05308">item_factory.cpp:5308</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a204ca52ef1b97d079c45e1cb6407f73b"><div class="ttname"><a href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">floor</a></div><div class="ttdeci">double floor(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00095">math_parser_func.h:95</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_ac9196b0cf8d9dd209db9fc00a69a55f6"><div class="ttname"><a href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">ceil</a></div><div class="ttdeci">double ceil(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00100">math_parser_func.h:100</a></div></div>
<div class="ttc" id="anamespaceammo__effects_html"><div class="ttname"><a href="namespaceammo__effects.html">ammo_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8h_source.html#l00062">ammo_effect.h:63</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4a90c93a4ae16f8f9a6a3bb554c7fa7c"><div class="ttname"><a href="namespaceunits.html#a4a90c93a4ae16f8f9a6a3bb554c7fa7c">units::from_milliliter</a></div><div class="ttdeci">constexpr quantity&lt; value_type, volume_in_milliliter_tag &gt; from_milliliter(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00303">units.h:303</a></div></div>
<div class="ttc" id="astructdamage__unit_html"><div class="ttname"><a href="structdamage__unit.html">damage_unit</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00110">damage.h:110</a></div></div>
<div class="ttc" id="astructdamage__unit_html_a5937d5d78a6db9efaefb0bf9517377d3"><div class="ttname"><a href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">damage_unit::amount</a></div><div class="ttdeci">float amount</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00112">damage.h:112</a></div></div>
<div class="ttc" id="astructdamage__unit_html_ab4d1b13f7ebe2f16a43038e1441ec2b5"><div class="ttname"><a href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">damage_unit::res_pen</a></div><div class="ttdeci">float res_pen</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00113">damage.h:113</a></div></div>
<div class="ttc" id="astructislot__magazine_html_a38072991107b79ba18c6f1741871b2cb"><div class="ttname"><a href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a></div><div class="ttdeci">static std::map&lt; itype_id, std::set&lt; itype_id &gt; &gt; compatible_guns</div><div class="ttdoc">Map of [magazine type id] -&gt; [set of gun itype_ids that accept the mag type ].</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00953">itype.h:953</a></div></div>
<div class="ttc" id="astructitype_html_a22bc17798578e23432abf6e9194521f7"><div class="ttname"><a href="structitype.html#a22bc17798578e23432abf6e9194521f7">itype::charged_qualities</a></div><div class="ttdeci">std::map&lt; quality_id, int &gt; charged_qualities</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01288">itype.h:1288</a></div></div>
<div class="ttc" id="astructitype_html_a253c42f4117e518b824b4ba4df982fc0"><div class="ttname"><a href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">itype::melee_relative</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; melee_relative</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01459">itype.h:1459</a></div></div>
<div class="ttc" id="astructitype_html_a41038ca826de1713661d7edd6c1705d0"><div class="ttname"><a href="structitype.html#a41038ca826de1713661d7edd6c1705d0">itype::price</a></div><div class="ttdeci">units::money price</div><div class="ttdoc">Value before the Cataclysm.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01411">itype.h:1411</a></div></div>
<div class="ttc" id="astructitype_html_a435567e9d513701c13586b96e289e33a"><div class="ttname"><a href="structitype.html#a435567e9d513701c13586b96e289e33a">itype::price_post</a></div><div class="ttdeci">units::money price_post</div><div class="ttdoc">Value after the Cataclysm, dependent upon practical usages.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01414">itype.h:1414</a></div></div>
<div class="ttc" id="astructitype_html_a531f460f3ba31cb3e433f7e585e1d4e5"><div class="ttname"><a href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">itype::stack_size</a></div><div class="ttdeci">int stack_size</div><div class="ttdoc">Number of items per above volume for count_by_charges items.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01408">itype.h:1408</a></div></div>
<div class="ttc" id="astructitype_html_a5699c972f1a284761d3b0e1501fe8185"><div class="ttname"><a href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">itype::integral_weight</a></div><div class="ttdeci">units::mass integral_weight</div><div class="ttdoc">Weight difference with the part it replaces for mods (defaults to weight)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01236">itype.h:1236</a></div></div>
<div class="ttc" id="astructitype_html_a5eab25fa5a86843ce933e83f24b71087"><div class="ttname"><a href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">itype::melee</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; melee</div><div class="ttdoc">Damage output in melee for zero or more damage types.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01441">itype.h:1441</a></div></div>
<div class="ttc" id="astructitype_html_a64d8b1399996d38b2ed54e1543dcef50"><div class="ttname"><a href="structitype.html#a64d8b1399996d38b2ed54e1543dcef50">itype::light_emission</a></div><div class="ttdeci">unsigned light_emission</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01418">itype.h:1418</a></div></div>
<div class="ttc" id="astructitype_html_a713cf194c7af78a6a101a6bfb26bc3a9"><div class="ttname"><a href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">itype::category_force</a></div><div class="ttdeci">item_category_id category_force</div><div class="ttdoc">If set via JSON forces item category to this (preventing automatic assignment)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01269">itype.h:1269</a></div></div>
<div class="ttc" id="astructitype_html_a71835820e6594955948ef1e8bc7bed68"><div class="ttname"><a href="structitype.html#a71835820e6594955948ef1e8bc7bed68">itype::faults</a></div><div class="ttdeci">std::set&lt; fault_id &gt; faults</div><div class="ttdoc">What faults (if any) can occur.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01332">itype.h:1332</a></div></div>
<div class="ttc" id="astructitype_html_a7a44fbc429e7e78283c414cb0edcc97c"><div class="ttname"><a href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">itype::charges_default</a></div><div class="ttdeci">int charges_default() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00127">itype.cpp:127</a></div></div>
<div class="ttc" id="astructitype_html_a7f957db922884120f5a9ce0d8789fdc4"><div class="ttname"><a href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">itype::mod</a></div><div class="ttdeci">cata::value_ptr&lt; islot_mod &gt; mod</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01204">itype.h:1204</a></div></div>
<div class="ttc" id="astructitype_html_a883b56941550ca5486ce38fac797b482"><div class="ttname"><a href="structitype.html#a883b56941550ca5486ce38fac797b482">itype::longest_side</a></div><div class="ttdeci">units::length longest_side</div><div class="ttdoc">How long the longest side of this item is.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01400">itype.h:1400</a></div></div>
<div class="ttc" id="astructitype_html_a9d0d50c14b184fceddd1a13ee279a6fc"><div class="ttname"><a href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">itype::drop_action</a></div><div class="ttdeci">use_function drop_action</div><div class="ttdoc">Action to take BEFORE the item is placed on map.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01219">itype.h:1219</a></div></div>
<div class="ttc" id="astructitype_html_a9defae7ba72f6d0af2e5629c4244f00e"><div class="ttname"><a href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">itype::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01501">itype.h:1501</a></div></div>
<div class="ttc" id="astructitype_html_aa5c0438c1bc94ded4e950ad684463a72"><div class="ttname"><a href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">itype::integral_volume</a></div><div class="ttdeci">units::volume integral_volume</div><div class="ttdoc">Space consumed when integrated as part of another item (defaults to volume) CAUTION: value given is f...</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01395">itype.h:1395</a></div></div>
<div class="ttc" id="astructitype_html_ab5c2a0ece3b013a4088b734cd34841d6"><div class="ttname"><a href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">itype::magazine_default</a></div><div class="ttdeci">std::map&lt; ammotype, itype_id &gt; magazine_default</div><div class="ttdoc">Default magazine for each ammo type that can be used to reload this item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01338">itype.h:1338</a></div></div>
<div class="ttc" id="astructitype_html_ab5ccbb62a76230f61c7047b0f4258ff4"><div class="ttname"><a href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">itype::relic_data</a></div><div class="ttdeci">cata::value_ptr&lt; relic &gt; relic_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01214">itype.h:1214</a></div></div>
<div class="ttc" id="astructitype_html_abd3ca12912367ae92d488864e09ea921"><div class="ttname"><a href="structitype.html#abd3ca12912367ae92d488864e09ea921">itype::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdoc">Space occupied by items of this type CAUTION: value given is for a default-sized stack.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01389">itype.h:1389</a></div></div>
<div class="ttc" id="astructitype_html_ac08f9344750006c6cb10d104b6611977"><div class="ttname"><a href="structitype.html#ac08f9344750006c6cb10d104b6611977">itype::ammo_scale</a></div><div class="ttdeci">std::map&lt; std::string, int &gt; ammo_scale</div><div class="ttdoc">The factor of ammo consumption indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01318">itype.h:1318</a></div></div>
<div class="ttc" id="astructitype_html_ac7ce2b6d984c50cc83cd59fcb7cfb3bc"><div class="ttname"><a href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">itype::melee_proportional</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; melee_proportional</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01456">itype.h:1456</a></div></div>
<div class="ttc" id="astructitype_html_aec04d23e907e3ea3cd9cfb08369dffcd"><div class="ttname"><a href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">itype::book</a></div><div class="ttdeci">cata::value_ptr&lt; islot_book &gt; book</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01203">itype.h:1203</a></div></div>
<div class="ttc" id="astructitype_html_afa43bb71000c037c9918d907fdacf0b5"><div class="ttname"><a href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">itype::use_methods</a></div><div class="ttdeci">std::map&lt; std::string, use_function &gt; use_methods</div><div class="ttdoc">Actions an instance can perform (if any) indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01312">itype.h:1312</a></div></div>
<div class="ttc" id="astructitype_html_afc46b586361661f16219f0a465b71c1d"><div class="ttname"><a href="structitype.html#afc46b586361661f16219f0a465b71c1d">itype::can_use</a></div><div class="ttdeci">bool can_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00174">itype.cpp:174</a></div></div>
<div class="ttc" id="astructuse__function_html_a468ef5f707dc56c2822d23ea226c9b36"><div class="ttname"><a href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">use_function::get_actor_ptr</a></div><div class="ttdeci">iuse_actor * get_actor_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00314">iuse.h:314</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a176e288c640c6506a86330cb10fbe13a"><div class="ttname"><a href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a></div><div class="ttdeci">translation to_translation(const std::string &amp;raw)</div><div class="ttdoc">Shorthands for translation::to_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00420">translation.cpp:420</a></div></div>
<div class="ttc" id="atry__parse__integer_8cpp_html_ae51236610f306440113477987363490b"><div class="ttname"><a href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt; int &gt;</a></div><div class="ttdeci">template ret_val&lt; int &gt; try_parse_integer&lt; int &gt;(const std::string_view, bool use_locale)</div></div>
<div class="ttc" id="atype__id_8h_html_a4a240e1107e45f10d64b78f1b5f58d59"><div class="ttname"><a href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a></div><div class="ttdeci">string_id&lt; ammunition_type &gt; ammotype</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00020">type_id.h:20</a></div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a></div><div class="ttdeci">@ VITAMIN</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vitamin_8cpp_source.html#l00101">vitamin::all()</a>, <a class="el" href="itype_8h_source.html#l01212">itype::ammo</a>, <a class="el" href="item__pocket_8h_source.html#l00536">pocket_data::ammo_restriction</a>, <a class="el" href="itype_8h_source.html#l01318">itype::ammo_scale</a>, <a class="el" href="damage_8h_source.html#l00112">damage_unit::amount</a>, <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item__factory_8cpp_source.html#l05308">calc_category()</a>, <a class="el" href="itype_8cpp_source.html#l00174">itype::can_use()</a>, <a class="el" href="itype_8h_source.html#l01269">itype::category_force</a>, <a class="el" href="math__parser__func_8h_source.html#l00100">ceil()</a>, <a class="el" href="itype_8h_source.html#l01288">itype::charged_qualities</a>, <a class="el" href="itype_8cpp_source.html#l00127">itype::charges_default()</a>, <a class="el" href="itype_8h_source.html#l01198">itype::comestible</a>, <a class="el" href="itype_8h_source.html#l00953">islot_magazine::compatible_guns</a>, <a class="el" href="itype_8h_source.html#l01501">itype::count_by_charges()</a>, <a class="el" href="item__factory_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="ammo_8h_source.html#l00020">ammunition_type::default_ammotype()</a>, <a class="el" href="itype_8h_source.html#l01219">itype::drop_action</a>, <a class="el" href="item__factory_8cpp_source.html#l05245">emplace_usage()</a>, <a class="el" href="cata__utility_8h_source.html#l00552">erase_if()</a>, <a class="el" href="itype_8h_source.html#l01332">itype::faults</a>, <a class="el" href="iuse_8h_source.html#l00299">iuse_actor::finalize()</a>, <a class="el" href="damage_8cpp_source.html#l00781">finalize_damage_map()</a>, <a class="el" href="item__factory_8cpp_source.html#l05427">find()</a>, <a class="el" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a>, <a class="el" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a>, <a class="el" href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a>, <a class="el" href="flag_8cpp.html#a9f9066f5f1101fe1f6304acda9121b34">flag_STAB</a>, <a class="el" href="math__parser__func_8h_source.html#l00095">floor()</a>, <a class="el" href="units_8h_source.html#l00303">units::from_milliliter()</a>, <a class="el" href="iuse_8h_source.html#l00314">use_function::get_actor_ptr()</a>, <a class="el" href="itype_8h_source.html#l01497">itype::get_id()</a>, <a class="el" href="itype_8h_source.html#l01207">itype::gun</a>, <a class="el" href="item__factory_8cpp.html#abd626046c3834417ce0dd6173c607061">gun_mode_DEFAULT</a>, <a class="el" href="item__factory_8cpp.html#a5b366d7fbfa124bde0a3ad443cf3574c">gun_mode_MELEE</a>, <a class="el" href="itype_8h_source.html#l01208">itype::gunmod</a>, <a class="el" href="itype_8cpp_source.html#l00164">itype::has_flag()</a>, <a class="el" href="item__factory_8cpp_source.html#l03693">hflesh_to_flesh()</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, <a class="el" href="itype_8h_source.html#l01395">itype::integral_volume</a>, <a class="el" href="itype_8h_source.html#l01236">itype::integral_weight</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="item__factory_8cpp_source.html#l00208">is_physical()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="item__pocket_8h_source.html#l00539">pocket_data::item_id_restriction</a>, <a class="el" href="item__factory_8cpp_source.html#l00154">item_is_blacklisted()</a>, <a class="el" href="itype_8h_source.html#l01346">itype::item_tags</a>, <a class="el" href="itype_8h_source.html#l01418">itype::light_emission</a>, <a class="el" href="itype_8h_source.html#l01400">itype::longest_side</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">MAGAZINE</a>, <a class="el" href="itype_8h_source.html#l01338">itype::magazine_default</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">MAGAZINE_WELL</a>, <a class="el" href="itype_8h_source.html#l01335">itype::magazines</a>, <a class="el" href="item__factory_8cpp.html#a1a01bcf318c54eac7ac61f52513b81e2">material_hydrocarbons</a>, <a class="el" href="item__factory_8cpp.html#ae752f1709c53f9ef075ccc72da46af05">material_junk</a>, <a class="el" href="item__factory_8cpp.html#a9cdd804333532fdb03af01ee60e44820">material_oil</a>, <a class="el" href="itype_8h_source.html#l01303">itype::materials</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a39fb4edcfa1147eb588946ebf1286f41">matype_id</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="itype_8h_source.html#l01441">itype::melee</a>, <a class="el" href="itype_8h_source.html#l01456">itype::melee_proportional</a>, <a class="el" href="itype_8h_source.html#l01459">itype::melee_relative</a>, <a class="el" href="item__factory_8h_source.html#l00285">migrated_ammo</a>, <a class="el" href="item__factory_8h_source.html#l00286">migrated_magazines</a>, <a class="el" href="itype_8h_source.html#l01204">itype::mod</a>, <a class="el" href="item__factory_8cpp_source.html#l03713">npc_implied_flags()</a>, <a class="el" href="itype_8h_source.html#l01253">itype::pockets</a>, <a class="el" href="itype_8h_source.html#l01411">itype::price</a>, <a class="el" href="itype_8h_source.html#l01414">itype::price_post</a>, <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>, <a class="el" href="itype_8h_source.html#l01214">itype::relic_data</a>, <a class="el" href="damage_8h_source.html#l00113">damage_unit::res_pen</a>, <a class="el" href="item__factory_8cpp_source.html#l03643">set_allergy_flags()</a>, <a class="el" href="item__factory_8cpp.html#ace5ff5bc15ace2d6924995f0d04de94a">skill_pistol</a>, <a class="el" href="item__factory_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a>, <a class="el" href="item__factory_8cpp.html#a0f15a8372bc3f3abc8c0c79960c74764">skill_shotgun</a>, <a class="el" href="item__factory_8cpp.html#a629add6779d8563b628372dc2334cac0">skill_smg</a>, <a class="el" href="itype_8h_source.html#l01408">itype::stack_size</a>, <a class="el" href="ret__val_8h_source.html#l00017">ret_val_common::str()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="cata__utility_8h_source.html#l00450">string_starts_with()</a>, <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>, <a class="el" href="translation_8cpp_source.html#l00420">to_translation()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, <a class="el" href="item__factory_8h_source.html#l00398">tool_subtypes</a>, <a class="el" href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt; int &gt;()</a>, <a class="el" href="item__pocket_8h_source.html#l00467">pocket_data::type</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>, <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>, <a class="el" href="ret__val_8h_source.html#l00091">ret_val&lt; T &gt;::value()</a>, <a class="el" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">VITAMIN</a>, <a class="el" href="itype_8h_source.html#l01389">itype::volume</a>, and <a class="el" href="itype_8h_source.html#l01234">itype::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01697">add_item_type()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>.</p>

</div>
</div>
<a id="a2fe4e054d71cc25acff45c3ddd3989ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe4e054d71cc25acff45c3ddd3989ec">&#9670;&nbsp;</a></span>find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt; Item_factory::find </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; bool(const <a class="el" href="structitype.html">itype</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find all item templates (both static and runtime) matching UnaryPredicate function. </p>
<p>Find all templates matching the UnaryPredicate function. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05427">5427</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;{</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;    std::vector&lt;const itype *&gt; res;</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160; </div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;    std::vector&lt;const itype *&gt; opts = <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;all();</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160; </div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;    std::copy_if( opts.begin(), opts.end(), std::back_inserter( res ),</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;    [&amp;<a class="code" href="structfunc.html">func</a>]( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> * e ) {</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;        return func( *e );</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;    } );</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;}</div>
<div class="ttc" id="aitem__factory_8cpp_html_a62fc9d4e4ca8f0e62b4556f5f65b666c"><div class="ttname"><a href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a></div><div class="ttdeci">std::unique_ptr&lt; Item_factory &gt; item_controller</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00126">item_factory.cpp:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l00126">item_controller</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l05796">item::final_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>, and <a class="el" href="item__pocket_8cpp_source.html#l02468">pocket_data::max_contains_volume()</a>.</p>

</div>
</div>
<a id="a7cd4dd0d32f16602b6ef248a5a6510ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cd4dd0d32f16602b6ef248a5a6510ca">&#9670;&nbsp;</a></span>find_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structitype.html">itype</a> * Item_factory::find_template </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the itype with the given id. </p>
<p>This function never returns null, if the item type is unknown, a new item type is generated, stored and returned. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Item type id (<a class="el" href="structitype.html#ab018b62882b32eef884f4efd769c0993">itype::id</a>). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02527">2527</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;{</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> );</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keyword">auto</span> found = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">if</span>( found != <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() ) {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        <span class="keywordflow">return</span> &amp;found-&gt;second;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    }</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160; </div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keyword">auto</span> rt = <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keywordflow">if</span>( rt != <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.end() ) {</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;        <span class="keywordflow">return</span> rt-&gt;second.get();</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    }</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160; </div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="comment">//If we didn&#39;t find the item maybe it is a building instead!</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;making_id = <a class="code" href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a>( <span class="keywordtype">id</span>.c_str() );</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="type__id_8h.html#a62a00ee11c034c0eaf855dc51bf92337">oter_str_id</a>( <span class="keywordtype">id</span>.c_str() ).is_valid() ||</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        ( making_id.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() &amp;&amp; making_id.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classrecipe.html#acef4205b638841f8e1980005728fcf90">is_blueprint</a>() ) ) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <a class="code" href="structitype.html">itype</a> *def = <span class="keyword">new</span> <a class="code" href="structitype.html">itype</a>();</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        def-&gt;<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> = <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        def-&gt;<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a> = <a class="code" href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;DEBUG: %s&quot;</span>, <span class="keywordtype">id</span>.c_str() ) );</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        def-&gt;<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a> = making_id.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classrecipe.html#a334fe87cf6e3da5ad075fcabeae44c7c">description</a>;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>[ <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a> ].reset( def );</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <span class="keywordflow">return</span> def;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    }</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing item definition: %s&quot;</span>, <span class="keywordtype">id</span>.c_str() );</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160; </div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="structitype.html">itype</a> *def = <span class="keyword">new</span> <a class="code" href="structitype.html">itype</a>();</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    def-&gt;<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> = <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    def-&gt;<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a> = <a class="code" href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;undefined-%s&quot;</span>, <span class="keywordtype">id</span>.c_str() ) );</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    def-&gt;<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a> = <a class="code" href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Missing item definition for %s.&quot;</span>, <span class="keywordtype">id</span>.c_str() ) );</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>[ <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a> ].reset( def );</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">return</span> def;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;}</div>
<div class="ttc" id="aclassrecipe_html_a334fe87cf6e3da5ad075fcabeae44c7c"><div class="ttname"><a href="classrecipe.html#a334fe87cf6e3da5ad075fcabeae44c7c">recipe::description</a></div><div class="ttdeci">translation description</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00129">recipe.h:129</a></div></div>
<div class="ttc" id="aclassrecipe_html_acef4205b638841f8e1980005728fcf90"><div class="ttname"><a href="classrecipe.html#acef4205b638841f8e1980005728fcf90">recipe::is_blueprint</a></div><div class="ttdeci">bool is_blueprint() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01346">recipe.cpp:1346</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
<div class="ttc" id="astructitype_html_a71434072aef9916ba0a62b7baa59a2b5"><div class="ttname"><a href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">itype::description</a></div><div class="ttdeci">translation description</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01354">itype.h:1354</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a7afa19f8e1a45d955fc6fbaa420a6760"><div class="ttname"><a href="translation_8cpp.html#a7afa19f8e1a45d955fc6fbaa420a6760">no_translation</a></div><div class="ttdeci">translation no_translation(const std::string &amp;str)</div><div class="ttdoc">Shorthand for translation::no_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00441">translation.cpp:441</a></div></div>
<div class="ttc" id="atype__id_8h_html_a62a00ee11c034c0eaf855dc51bf92337"><div class="ttname"><a href="type__id_8h.html#a62a00ee11c034c0eaf855dc51bf92337">oter_str_id</a></div><div class="ttdeci">string_id&lt; oter_t &gt; oter_str_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00189">type_id.h:189</a></div></div>
<div class="ttc" id="atype__id_8h_html_a7d1934ae1f3ab6bea8bd75f88070482d"><div class="ttname"><a href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a></div><div class="ttdeci">string_id&lt; recipe &gt; recipe_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00214">type_id.h:214</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="itype_8h_source.html#l01354">itype::description</a>, <a class="el" href="recipe_8h_source.html#l00129">recipe::description</a>, <a class="el" href="item__factory_8h_source.html#l00274">frozen</a>, <a class="el" href="basecamp_8h_source.html#l00105">base_camps::id</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, <a class="el" href="recipe_8cpp_source.html#l01346">recipe::is_blueprint()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="item__factory_8h_source.html#l00280">m_runtimes</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="itype_8h_source.html#l01359">itype::name</a>, <a class="el" href="translation_8cpp_source.html#l00441">no_translation()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>.</p>

</div>
</div>
<a id="a4efc5a2a2d3268fc306894a60d7fd488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4efc5a2a2d3268fc306894a60d7fd488">&#9670;&nbsp;</a></span>get_all_group_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &gt; Item_factory::get_all_group_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the idents of all item groups that are known. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05347">5347</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;{</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    std::vector&lt;item_group_id&gt; rval;</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    <span class="keywordflow">for</span>( GroupMap::value_type &amp;group_pair : <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a> ) {</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;        rval.push_back( group_pair.first );</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;    }</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;    <span class="keywordflow">return</span> rval;</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acf0f42e4f13b5d22e9b6a72bbba63387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf0f42e4f13b5d22e9b6a72bbba63387">&#9670;&nbsp;</a></span>get_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> * Item_factory::get_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;&#160;</td>
          <td class="paramname"><em>group_tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the item group object. </p>
<p>Returns null if the item group does not exists. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02564">2564</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;{</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    GroupMap::iterator group_iter = <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>.find( group_tag );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <span class="keywordflow">if</span>( group_iter != <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>.end() ) {</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <span class="keywordflow">return</span> group_iter-&gt;second.get();</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00283">m_template_groups</a>.</p>

</div>
</div>
<a id="a9a99b5d15414c972aafe2d6733d10413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a99b5d15414c972aafe2d6733d10413">&#9670;&nbsp;</a></span>get_runtime_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; const <a class="el" href="structitype.html">itype</a> * &gt; Item_factory::get_runtime_types </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get item types created at runtime. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05415">5415</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;{</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;    std::vector&lt;const itype *&gt; res;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    res.reserve( <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.size() );</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a> ) {</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;        res.push_back( e.second.get() );</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;    }</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160; </div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d5734050655293211857b8ca87f59c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5734050655293211857b8ca87f59c2">&#9670;&nbsp;</a></span>has_iuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::has_iuse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="item__action_8h.html#a57de7061eac1f29f767f63f516c25b24">item_action_id</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if an iuse is known to the <a class="el" href="classItem__factory.html" title="Central item type management class.">Item_factory</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Iuse type id. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00255">255</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                                          {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>.find( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ) != <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>.end();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00385">iuse_function_list</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="a838f908ffe40039c138823e86103788a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838f908ffe40039c138823e86103788a">&#9670;&nbsp;</a></span>has_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::has_template </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if an item type is known to the <a class="el" href="classItem__factory.html" title="Central item type management class.">Item_factory</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Item type id (<a class="el" href="structitype.html#ab018b62882b32eef884f4efd769c0993">itype::id</a>). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05393">5393</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;{</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( <span class="keywordtype">id</span> ) || <a class="code" href="classItem__factory.html#aeadd69bbf3c9c3aca9ba3c5b1d36765d">m_runtimes</a>.count( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>.</p>

</div>
</div>
<a id="af73e102368fa0e54940e7ccd69b8c6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73e102368fa0e54940e7ccd69b8c6d7">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01713">1713</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;{</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ACIDBOMB_ACT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7341f957264dc912c86791af1baa4b87">iuse::acidbomb_act</a> );</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ADRENALINE_INJECTOR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">iuse::adrenaline_injector</a> );</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;AFS_TRANSLOCATOR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a6464b824647295da6d3d9c65efd3dda0">iuse::afs_translocator</a> );</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ALCOHOL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a0ae5807d1dda88ee994942c17a4f1069">iuse::alcohol_medium</a> );</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ALCOHOL_STRONG&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9eb97792608dbdf6bbfd9ab52fdc2419">iuse::alcohol_strong</a> );</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ALCOHOL_WEAK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a98aedd1967c366bd4ec8320abbc3b342">iuse::alcohol_weak</a> );</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ANTIBIOTIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3cb85440abeae511cd6dc0745866600e">iuse::antibiotic</a> );</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ANTICONVULSANT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a13f90f434f43a8404e071731dd9ad64b">iuse::anticonvulsant</a> );</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ANTIFUNGAL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5c6276358c59abd658c4798e1e6ecfd4">iuse::antifungal</a> );</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ANTIPARASITIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a878655c7093b227b1b388247bef69fb4">iuse::antiparasitic</a> );</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BELL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad124568be7fc9e3b53fd22e409ffd105">iuse::bell</a> );</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BLECH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a0b9bfd559e1dfec2838f3b48f63e17c8">iuse::blech</a> );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BLECH_BECAUSE_UNCLEAN&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a281d73413ffa3a2a01fc89190e132bcd">iuse::blech_because_unclean</a> );</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BOLTCUTTERS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8bb8d8a8da543e07d5c9a38dc70a1de0">iuse::boltcutters</a> );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;C4&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa2dc5f9fde24098df2e2977aa0be0773">iuse::c4</a> );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CAMERA&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1d39e67548dd42a39fdbc1176ee5a686">iuse::camera</a> );</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CAN_GOO&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a584512f8293bc65b48a7a6420bc9f17c">iuse::can_goo</a> );</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;COIN_FLIP&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a4711d604b2c2629bdb7dc78e0eea08f2">iuse::coin_flip</a> );</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIRECTIONAL_HOLOGRAM&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3380b7c6e177ae52c1ed955c8f0cd429">iuse::directional_hologram</a> );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CAPTURE_MONSTER_ACT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7758692d4d37e5f962bec202df6472ef">iuse::capture_monster_act</a> );</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CAPTURE_MONSTER_VEH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af3182ba0d596fce518f8a701075565ab">iuse::capture_monster_veh</a> );</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CHEW&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">iuse::chew</a> );</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RPGDIE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1749fc8225eeaec0b7dfe4ef70c2367c">iuse::rpgdie</a> );</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CHANGE_EYES&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a715d67d4dc585de01b91fe9e62674f5f">iuse::change_eyes</a> );</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CHANGE_SKIN&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a258b13e1c76cd6f96f98d02d68c8ed27">iuse::change_skin</a> );</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CHOP_TREE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3cb10c16dedd50a5f2cf6d3a5308af40">iuse::chop_tree</a> );</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CHOP_LOGS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa1978f80267c705ce4011143096a527e">iuse::chop_logs</a> );</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CLEAR_RUBBLE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a4da7c6f8769914baeef050e18b2838d4">iuse::clear_rubble</a> );</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;COKE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae3f77bc1e845d285caf3f49d6e370733">iuse::coke</a> );</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CROWBAR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a> );</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CROWBAR_WEAK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aae23e18216c07772d07cd9676c4402d8">iuse::crowbar_weak</a> );</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DATURA&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af3433902868365f40cf8698f711b20ab">iuse::datura</a> );</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIG&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5a1c625609c7a13fb0833cc0259aed92">iuse::dig</a> );</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIVE_TANK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad6120adfc71b4c1ec6a89dd84f8cc435">iuse::dive_tank</a> );</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIVE_TANK_ACTIVATE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae9d80690ffeeccd8acdc670ad4e5f1e1">iuse::dive_tank_activate</a> );</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIRECTIONAL_ANTENNA&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#adab6b73b206eb43b5402344b47614b0f">iuse::directional_antenna</a> );</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DISASSEMBLE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1850ccc2fe2ae159a2d88bb31d67eedc">iuse::disassemble</a> );</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CRAFT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a4f315b4f024892d60d4bf51c1c2ebaf9">iuse::craft</a> );</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DOG_WHISTLE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2f817a798c3b3dc964213258cae83c84">iuse::dog_whistle</a> );</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DOLLCHAT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aafa142c7bed1e2b6ceecadfbd0d30ee5">iuse::talking_doll</a> );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ECIG&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2d1b39affe1c38fac4396785bbe81255">iuse::ecig</a> );</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EHANDCUFFS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5dce8bfc65592c248d14dd7f0c2fe31b">iuse::ehandcuffs</a> );</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EHANDCUFFS_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af1a610c8bd93f97da84d6bc96416085a">iuse::ehandcuffs_tick</a> );</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EPIC_MUSIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abaff238678a7537e407f351f436cb408">iuse::epic_music</a> );</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EINKTABLETPC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae7226ce0f0d3e2bd4e29adcbfeac04b1">iuse::einktabletpc</a> );</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ELECTRICSTORAGE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad832f42294f185680d3279ace95df195">iuse::electricstorage</a> );</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EBOOKSAVE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ab7fdd07b4a0c88adb7732b5bdb7bdf52">iuse::ebooksave</a> );</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EBOOKREAD&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a0d6a39bf4d03d6f81f6c99574924a808">iuse::ebookread</a> );</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EMF_PASSIVE_ON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2f37766208d39460d69a3d15c3b65b72">iuse::emf_passive_on</a> );</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EXTINGUISHER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a0e24ddc2fd629058ebd45499803d0c34">iuse::extinguisher</a> );</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;EYEDROPS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#acc505d2082da6d8adcd7b96e12c933b8">iuse::eyedrops</a> );</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FILL_PIT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a022e42fa672453892c959d789bc782fa">iuse::fill_pit</a> );</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FIRECRACKER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a66232b4dbf97f6fb5b896e0c90abbe8a">iuse::firecracker</a> );</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FIRECRACKER_PACK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7ce9f52bd3e45c37d762d834ace087ac">iuse::firecracker_pack</a> );</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FIRECRACKER_PACK_ACT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7884fe54e2eac90255b18d263234b4d7">iuse::firecracker_pack_act</a> );</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FISH_ROD&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8d1e77b5aed48f08625766fd3a4c8996">iuse::fishing_rod</a> );</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FISH_TRAP&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a17003a2092768f41d1c60a681622200a">iuse::fish_trap</a> );</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FISH_TRAP_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad36c2f44e3f488ea9360aef65ca8a1ee">iuse::fish_trap_tick</a> );</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FITNESS_CHECK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad34760a5d74b44c11fe67bf0ac5d5a50">iuse::fitness_check</a> );</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FLUMED&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae6ba2f4a41e8a170d9aa4609c7f0298e">iuse::flumed</a> );</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FLUSLEEP&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa9c8ef7491ae4a0f3274ebc563f44aae">iuse::flusleep</a> );</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FLU_VACCINE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa93a7a8252fcd7d5ce9c245b43a9b33d">iuse::flu_vaccine</a> );</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FOODPERSON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a05518c9c8a638e1b594ca4c9311d556d">iuse::foodperson</a> );</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FOODPERSON_VOICE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a6edbf686ed750df42f1ed9f2cef004f0">iuse::foodperson_voice</a> );</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;FUNGICIDE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#add3f1721b816cf46af6c28c73f61eb14">iuse::fungicide</a> );</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GASMASK_ACTIVATE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#acaedb3c693d953eca4780be500de284b">iuse::gasmask_activate</a>,</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;              <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Can be activated to &lt;good&gt;increase environmental &quot;</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                              <span class="stringliteral">&quot;protection&lt;/good&gt;.  Will consume charges when active, &quot;</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                              <span class="stringliteral">&quot;but &lt;info&gt;only when environmental hazards are &quot;</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                              <span class="stringliteral">&quot;present&lt;/info&gt;.&quot;</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                            ) );</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GASMASK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ac36c707483ed517d1d5639815dacc587">iuse::gasmask</a> );</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GEIGER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aeb111931df64f89983c2a55e2e761fa5">iuse::geiger</a> );</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GEIGER_ACTIVE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abbcb64b7dbeaf1b6d89d5ad218500d7a">iuse::geiger_active</a> );</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GRANADE_ACT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8d75813ba7f9c05f7504b7623d55ea99">iuse::granade_act</a> );</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GRENADE_INC_ACT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abff950d44529ee5a01b6cf5b9a722150">iuse::grenade_inc_act</a> );</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GUN_REPAIR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7c62e8155f0f686f8f80e58f629071c1">iuse::gun_repair</a> );</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;GUNMOD_ATTACH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abb611eda7fd237a2b9c470bfb5212840">iuse::gunmod_attach</a> );</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;TOOLMOD_ATTACH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8a66e2caedd3083f98d3c04025b3824b">iuse::toolmod_attach</a> );</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HACKSAW&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a60f3a7c26cee6c0836c660510a428609">iuse::hacksaw</a> );</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HAMMER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ac2e14fe7af245b21ebec7f68bb1fadd6">iuse::hammer</a> );</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HEATPACK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af8a43dab57bdd3c8eee883fbabdcf3ce">iuse::heatpack</a> );</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HEAT_FOOD&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a75a6f2518410cd9fdba30e3051b3259c">iuse::heat_food</a> );</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HONEYCOMB&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a52056abc483314816045ccf43bb5c1db">iuse::honeycomb</a> );</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HOTPLATE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae9c902b0f778f1f2fadb6913901398f1">iuse::hotplate</a> );</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HOTPLATE_ATOMIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#afd2b57a28e228f3f3d4bc4ca35bb84b7">iuse::hotplate_atomic</a> );</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;INHALER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a56237a295cef407df0c5d042a7f10ea9">iuse::inhaler</a> );</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;JACKHAMMER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7eb8577a02113f71e59589690f2a9518">iuse::jackhammer</a> );</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;JET_INJECTOR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aaed245dbdf2a98482598ee81194f54c2">iuse::jet_injector</a> );</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;LUMBER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3dfb3b5e80488c39c6214ebbbdde59a1">iuse::lumber</a> );</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MACE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa21df22da742ffa9539caacc95c9357f">iuse::mace</a> );</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MAGIC_8_BALL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8e388ce3877e20825c96f507fa18c302">iuse::magic_8_ball</a> );</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MEASURE_RESONANCE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a802d0cd933f590e71bc0a03612544d9a">iuse::measure_resonance</a> );</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PLAY_GAME&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a68bdbc09b8985bd6aa6c97d0bafe40a1">iuse::play_game</a> );</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MAKEMOUND&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a0bfe213300c4138b64eb22f5f068f094">iuse::makemound</a> );</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DIG_CHANNEL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad237e98b818e25194ea182c0003933f2">iuse::dig_channel</a> );</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MARLOSS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a541feee13557661664abb151898dd8dd">iuse::marloss</a> );</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MARLOSS_GEL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7b5fe1d8d9efeb8329b859fa8271327d">iuse::marloss_gel</a> );</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MARLOSS_SEED&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abc44b17e87ebda604c17412017ec34de">iuse::marloss_seed</a> );</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ab50bfd66f72ec01f785e1be5965da498">iuse::ma_manual</a> );</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MANAGE_EXOSUIT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3baef8958ce46cb42bb162f3c5bff2f1">iuse::manage_exosuit</a> );</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MEDITATE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5a8b1f1817669ffe1b630a978e890b5a">iuse::meditate</a> );</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;METH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af8ddca8d934da5ae1ffbf496ea2b02f5">iuse::meth</a> );</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MININUKE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a029973f78948208bf9cb17090a778fa7">iuse::mininuke</a> );</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MOLOTOV_LIT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a83a5c5c31578c093c0de96c98f6e4193">iuse::molotov_lit</a> );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MOP&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae78ed0746aa741f05071a687cc3a6244">iuse::mop</a> );</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MP3&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa115b359fe8260eca81d45dbd5a17d4e">iuse::mp3</a> );</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MP3_ON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ace19128a8e391cd843c40950958f3854">iuse::mp3_on</a> );</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MP3_DEACTIVATE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5c5647528d6db37fe36e3ecd52ccaa2d">iuse::mp3_deactivate</a> );</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MULTICOOKER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7ca57f0d03084f4c873c034633817ede">iuse::multicooker</a> );</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MULTICOOKER_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a25b543b9b0e566ce1c903c926d2d9dce">iuse::multicooker_tick</a> );</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;MYCUS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">iuse::mycus</a> );</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;NOISE_EMITTER_ON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3db2d297bf6d7717d50bf70fd09d5e62">iuse::noise_emitter_on</a> );</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;OXYGEN_BOTTLE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8aa28fa6a58bdfa71593e86c9e908f18">iuse::oxygen_bottle</a> );</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;OXYTORCH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a91daa8843aca07c214f1c7a0ca3a373a">iuse::oxytorch</a> );</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PACK_CBM&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7ff60437495f56c9e8ce557a328b8a72">iuse::pack_cbm</a> );</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PACK_ITEM&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ab41708c4b5c33c118e7906782f78d7a6">iuse::pack_item</a> );</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PETFOOD&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">iuse::petfood</a> );</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PICK_LOCK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a8b605f6d204c8cc9c0b203b1a3deaa0e">iuse::pick_lock</a> );</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PICKAXE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aefcc86332f7e77a3d2bfbefb12ecb955">iuse::pickaxe</a> );</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PLANTBLECH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7ef8a452a30b8f27ed576260caaa33ec">iuse::plantblech</a> );</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;POISON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a58c2604cb18e59b64c1e993b52bcb49f">iuse::poison</a> );</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PORTABLE_GAME&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a85b7f720ce7cd6c3b8cc00791a8a46e0">iuse::portable_game</a> );</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PORTAL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a17324fc3e69608300deb4760f7ff10da">iuse::portal</a> );</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PROZAC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ab0f3c19d61836eb7b474eae278b603ca">iuse::prozac</a> );</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;PURIFY_SMART&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ab170ea3231e8cb4e0957cef21d8921c8">iuse::purify_smart</a> );</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADGLOVE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a804fce8e3d1ae7476d41f0cc16699f88">iuse::radglove</a> );</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIOCAR&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aae6ef12d4b7a69abb68652ab447f7b7b">iuse::radiocar</a> );</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIOCARON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa2bc3df10296a34a3757586995cdb8b1">iuse::radiocaron</a> );</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIOCONTROL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aedb4fef2a26209ed9508557251219116">iuse::radiocontrol</a> );</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIOCONTROL_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1cc5c07211986b306952b42b584c2db2">iuse::radiocontrol_tick</a> );</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIO_MOD&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5f2a515f184aaf7f4ca5d597e7231bce">iuse::radio_mod</a> );</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIO_OFF&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5257e1a41f6c18543b2cb2769cf3b5e0">iuse::radio_off</a> );</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIO_ON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9d9dea35382b5a1d73cda29cc1d4302a">iuse::radio_on</a> );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;RADIO_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a6ed9908cabb36951f63aa480cafe71c4">iuse::radio_tick</a> );</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BINDER_ADD_RECIPE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5ae12ec7d9025b6ad54b9380ad2bc34e">iuse::binder_add_recipe</a> );</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BINDER_MANAGE_RECIPE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af11a0b1f048dc2e56a03590765cb6b34">iuse::binder_manage_recipe</a> );</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;REMOTEVEH&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3d986076627c9327a54e8ab036aac530">iuse::remoteveh</a> );</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;REMOTEVEH_TICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af5e170dc5c4229337842e4b35365b0bc">iuse::remoteveh_tick</a> );</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;REMOVE_ALL_MODS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a15a5d32634c68ecc96deac6847d8c0a7">iuse::remove_all_mods</a> );</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;ROBOTCONTROL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad907a5b6293dc78b83cc9863efbb6eeb">iuse::robotcontrol</a> );</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SEED&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">iuse::seed</a> );</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SEWAGE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa0901bfdb67b0753239b54a545f76f92">iuse::sewage</a> );</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SHOCKTONFA_OFF&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a01ed1b2b51c69008e5beff8e27576f0e">iuse::shocktonfa_off</a> );</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SHOCKTONFA_ON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ad9181dfd00576bfaddeb22cf117aae62">iuse::shocktonfa_on</a> );</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SIPHON&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a7d222a0d4791285bcfd1f4931a7c8c75">iuse::siphon</a> );</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SMOKING&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">iuse::smoking</a> );</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SOLARPACK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#accc0f8096945223d4f89036b84ee070d">iuse::solarpack</a> );</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SOLARPACK_OFF&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae23e7d15dfb30b39d0e2ed4044eda3bf">iuse::solarpack_off</a> );</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SPRAY_CAN&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae8684a173355a1746766060d7298f4d2">iuse::spray_can</a> );</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;STIMPACK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a84c284fc77ef107deccb75a6b17a3b36">iuse::stimpack</a> );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;STRONG_ANTIBIOTIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2392f15a7de79ad6bd5bea5643480faa">iuse::strong_antibiotic</a> );</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;TAZER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9ddf58b64f06b9e91ed946ee217a48cc">iuse::tazer</a> );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;TAZER2&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">iuse::tazer2</a> );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;TELEPORT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9a470e36c4a87310339cd4ac42ccf9b9">iuse::teleport</a> );</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;THORAZINE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae246e477e0e0f04bbf15bca5e511636e">iuse::thorazine</a> );</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;TOWEL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9be263d2564579adab8fcb2db24bbf1a">iuse::towel</a> );</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;UNFOLD_GENERIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#abed2047296de97284c321af16b9eb26e">iuse::unfold_generic</a> );</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;UNPACK_ITEM&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa506a3bba5e08ac1d6d193c4ed4eee27">iuse::unpack_item</a> );</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CALL_OF_TINDALOS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a67a0712b717b9b14b3cdf49dd71b1215">iuse::call_of_tindalos</a> );</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BLOOD_DRAW&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae22258fb2a1d2ff3ab4d592f76160588">iuse::blood_draw</a> );</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;VIBE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a61b11f14565a70be2cc19366cbe43266">iuse::vibe</a> );</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;HAND_CRANK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aba40ae64ce69ac474af2c3f93e6d9062">iuse::hand_crank</a> );</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;VORTEX&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#af8916dea8e9d4477f1822ee9a7f74a2e">iuse::vortex</a> );</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WASH_SOFT_ITEMS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a86c1eba6bed33d5c6aa77f6663955071">iuse::wash_soft_items</a> );</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WASH_HARD_ITEMS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aec57f3dc11c77dbf445d5df1d7b99df7">iuse::wash_hard_items</a> );</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WASH_ALL_ITEMS&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a9aed8ad3c9d74cb0c90a44684889b6fc">iuse::wash_all_items</a> );</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#aa31522ea230f611408238b5ca4816f8c">iuse::water_purifier</a> );</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WEAK_ANTIBIOTIC&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2f22223365b4a47dfbe1aee766cf30ac">iuse::weak_antibiotic</a> );</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WEATHER_TOOL&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a28b731cc1720938427d5e2cb3aabd4d1">iuse::weather_tool</a> );</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;SEXTANT&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a3288281df68588407dc8829f3152d521">iuse::sextant</a> );</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;WEED_CAKE&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a515b77bf8a878a3e44dd621632efad1b">iuse::weed_cake</a> );</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;XANAX&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a5d06d1a26ca2f3397911708b8cb5dcf9">iuse::xanax</a> );</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;BREAK_STICK&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a4b30807de7680324f381aea4345eeea2">iuse::break_stick</a> );</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;LUX_METER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a1a3c9103d99033e7a245d1c3b0d5cf3a">iuse::lux_meter</a> );</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;DBG_LUX_METER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a2315308129adbe8c0aea7e012b061aee">iuse::dbg_lux_meter</a> );</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;CALORIES_INTAKE_TRACKER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#ae4f1a3a8eca6ec8320b1bd4236f9053a">iuse::calories_intake_tracker</a> );</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">add_iuse</a>( <span class="stringliteral">&quot;VOLTMETER&quot;</span>, &amp;<a class="code" href="namespaceiuse.html#a62a20f8bfde5f4d89a486fa33de8ead7">iuse::voltmeter</a> );</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;ammobelt_actor&gt;() );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;consume_drug_iuse&gt;() );</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;delayed_transform_iuse&gt;() );</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;explosion_iuse&gt;() );</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;firestarter_actor&gt;() );</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;fireweapon_off_actor&gt;() );</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;fireweapon_on_actor&gt;() );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;heal_actor&gt;() );</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;holster_actor&gt;() );</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;inscribe_actor&gt;() );</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;iuse_transform&gt;() );</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;unpack_actor&gt;() );</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;message_iuse&gt;() );</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;sound_iuse&gt;() );</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;play_instrument_iuse&gt;() );</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;manualnoise_actor&gt;() );</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;musical_instrument_actor&gt;() );</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;deploy_furn_actor&gt;() );</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;deploy_appliance_actor&gt;() );</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;place_monster_iuse&gt;() );</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;change_scent_iuse&gt;() );</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;place_npc_iuse&gt;() );</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;reveal_map_actor&gt;() );</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;salvage_actor&gt;() );</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;place_trap_actor&gt;() );</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;emit_actor&gt;() );</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;saw_barrel_actor&gt;() );</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;saw_stock_actor&gt;() );</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;molle_attach_actor&gt;() );</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;molle_detach_actor&gt;() );</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;install_bionic_actor&gt;() );</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;detach_gunmods_actor&gt;() );</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;modify_gunmods_actor&gt;() );</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;link_up_actor&gt;() );</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;deploy_tent_actor&gt;() );</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;learn_spell_actor&gt;() );</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;cast_spell_actor&gt;() );</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;weigh_self_actor&gt;() );</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;sew_advanced_actor&gt;() );</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;effect_on_conditons_actor&gt;() );</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">// An empty dummy group, it will not spawn anything. However, it makes that item group</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">// id valid, so it can be used all over the place without need to explicitly check for it.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>[<a class="code" href="item__factory_8cpp.html#afd234c462e7d4a933a264111a6d0c082">Item_spawn_data_EMPTY_GROUP</a>] =</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        std::make_unique&lt;Item_group&gt;( <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d">Item_group::G_COLLECTION</a>, 100, 0, 0, <span class="stringliteral">&quot;EMPTY_GROUP&quot;</span> );</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_ab6bd27c42a0bb631ea90d9745c3c031b"><div class="ttname"><a href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">Item_factory::add_actor</a></div><div class="ttdeci">void add_actor(std::unique_ptr&lt; iuse_actor &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01691">item_factory.cpp:1691</a></div></div>
<div class="ttc" id="aclassItem__factory_html_adc0a0f21e98dce2bdc061a5fdd8675df"><div class="ttname"><a href="classItem__factory.html#adc0a0f21e98dce2bdc061a5fdd8675df">Item_factory::add_iuse</a></div><div class="ttdeci">void add_iuse(const std::string &amp;type, use_function_pointer f)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l01679">item_factory.cpp:1679</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_afd234c462e7d4a933a264111a6d0c082"><div class="ttname"><a href="item__factory_8cpp.html#afd234c462e7d4a933a264111a6d0c082">Item_spawn_data_EMPTY_GROUP</a></div><div class="ttdeci">static const item_group_id Item_spawn_data_EMPTY_GROUP(&quot;EMPTY_GROUP&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a01ed1b2b51c69008e5beff8e27576f0e"><div class="ttname"><a href="namespaceiuse.html#a01ed1b2b51c69008e5beff8e27576f0e">iuse::shocktonfa_off</a></div><div class="ttdeci">std::optional&lt; int &gt; shocktonfa_off(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03662">iuse.cpp:3662</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a022e42fa672453892c959d789bc782fa"><div class="ttname"><a href="namespaceiuse.html#a022e42fa672453892c959d789bc782fa">iuse::fill_pit</a></div><div class="ttdeci">std::optional&lt; int &gt; fill_pit(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02874">iuse.cpp:2874</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a029973f78948208bf9cb17090a778fa7"><div class="ttname"><a href="namespaceiuse.html#a029973f78948208bf9cb17090a778fa7">iuse::mininuke</a></div><div class="ttdeci">std::optional&lt; int &gt; mininuke(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03544">iuse.cpp:3544</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a05518c9c8a638e1b594ca4c9311d556d"><div class="ttname"><a href="namespaceiuse.html#a05518c9c8a638e1b594ca4c9311d556d">iuse::foodperson</a></div><div class="ttdeci">std::optional&lt; int &gt; foodperson(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06934">iuse.cpp:6934</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a0ae5807d1dda88ee994942c17a4f1069"><div class="ttname"><a href="namespaceiuse.html#a0ae5807d1dda88ee994942c17a4f1069">iuse::alcohol_medium</a></div><div class="ttdeci">std::optional&lt; int &gt; alcohol_medium(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00526">iuse.cpp:526</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a0b9bfd559e1dfec2838f3b48f63e17c8"><div class="ttname"><a href="namespaceiuse.html#a0b9bfd559e1dfec2838f3b48f63e17c8">iuse::blech</a></div><div class="ttdeci">std::optional&lt; int &gt; blech(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01054">iuse.cpp:1054</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a0bfe213300c4138b64eb22f5f068f094"><div class="ttname"><a href="namespaceiuse.html#a0bfe213300c4138b64eb22f5f068f094">iuse::makemound</a></div><div class="ttdeci">std::optional&lt; int &gt; makemound(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02795">iuse.cpp:2795</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a0d6a39bf4d03d6f81f6c99574924a808"><div class="ttname"><a href="namespaceiuse.html#a0d6a39bf4d03d6f81f6c99574924a808">iuse::ebookread</a></div><div class="ttdeci">std::optional&lt; int &gt; ebookread(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08707">iuse.cpp:8707</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a0e24ddc2fd629058ebd45499803d0c34"><div class="ttname"><a href="namespaceiuse.html#a0e24ddc2fd629058ebd45499803d0c34">iuse::extinguisher</a></div><div class="ttdeci">std::optional&lt; int &gt; extinguisher(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01918">iuse.cpp:1918</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a13f90f434f43a8404e071731dd9ad64b"><div class="ttname"><a href="namespaceiuse.html#a13f90f434f43a8404e071731dd9ad64b">iuse::anticonvulsant</a></div><div class="ttdeci">std::optional&lt; int &gt; anticonvulsant(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00789">iuse.cpp:789</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a15a5d32634c68ecc96deac6847d8c0a7"><div class="ttname"><a href="namespaceiuse.html#a15a5d32634c68ecc96deac6847d8c0a7">iuse::remove_all_mods</a></div><div class="ttdeci">std::optional&lt; int &gt; remove_all_mods(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01698">iuse.cpp:1698</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a17003a2092768f41d1c60a681622200a"><div class="ttname"><a href="namespaceiuse.html#a17003a2092768f41d1c60a681622200a">iuse::fish_trap</a></div><div class="ttdeci">std::optional&lt; int &gt; fish_trap(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01784">iuse.cpp:1784</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a17324fc3e69608300deb4760f7ff10da"><div class="ttname"><a href="namespaceiuse.html#a17324fc3e69608300deb4760f7ff10da">iuse::portal</a></div><div class="ttdeci">std::optional&lt; int &gt; portal(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03561">iuse.cpp:3561</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1749fc8225eeaec0b7dfe4ef70c2367c"><div class="ttname"><a href="namespaceiuse.html#a1749fc8225eeaec0b7dfe4ef70c2367c">iuse::rpgdie</a></div><div class="ttdeci">std::optional&lt; int &gt; rpgdie(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03839">iuse.cpp:3839</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1850ccc2fe2ae159a2d88bb31d67eedc"><div class="ttname"><a href="namespaceiuse.html#a1850ccc2fe2ae159a2d88bb31d67eedc">iuse::disassemble</a></div><div class="ttdeci">std::optional&lt; int &gt; disassemble(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08366">iuse.cpp:8366</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1a3c9103d99033e7a245d1c3b0d5cf3a"><div class="ttname"><a href="namespaceiuse.html#a1a3c9103d99033e7a245d1c3b0d5cf3a">iuse::lux_meter</a></div><div class="ttdeci">std::optional&lt; int &gt; lux_meter(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07870">iuse.cpp:7870</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1cc5c07211986b306952b42b584c2db2"><div class="ttname"><a href="namespaceiuse.html#a1cc5c07211986b306952b42b584c2db2">iuse::radiocontrol_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; radiocontrol_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07092">iuse.cpp:7092</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1d39e67548dd42a39fdbc1176ee5a686"><div class="ttname"><a href="namespaceiuse.html#a1d39e67548dd42a39fdbc1176ee5a686">iuse::camera</a></div><div class="ttdeci">std::optional&lt; int &gt; camera(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06517">iuse.cpp:6517</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1e61fe7c6df1284dc3fbe613c456ce8a"><div class="ttname"><a href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a></div><div class="ttdeci">std::optional&lt; int &gt; crowbar(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02719">iuse.cpp:2719</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2315308129adbe8c0aea7e012b061aee"><div class="ttname"><a href="namespaceiuse.html#a2315308129adbe8c0aea7e012b061aee">iuse::dbg_lux_meter</a></div><div class="ttdeci">std::optional&lt; int &gt; dbg_lux_meter(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07878">iuse.cpp:7878</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2392f15a7de79ad6bd5bea5643480faa"><div class="ttname"><a href="namespaceiuse.html#a2392f15a7de79ad6bd5bea5643480faa">iuse::strong_antibiotic</a></div><div class="ttdeci">std::optional&lt; int &gt; strong_antibiotic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08299">iuse.cpp:8299</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a258b13e1c76cd6f96f98d02d68c8ed27"><div class="ttname"><a href="namespaceiuse.html#a258b13e1c76cd6f96f98d02d68c8ed27">iuse::change_skin</a></div><div class="ttdeci">std::optional&lt; int &gt; change_skin(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02972">iuse.cpp:2972</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a25b543b9b0e566ce1c903c926d2d9dce"><div class="ttname"><a href="namespaceiuse.html#a25b543b9b0e566ce1c903c926d2d9dce">iuse::multicooker_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; multicooker_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07718">iuse.cpp:7718</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a25b6693c57aaadaf10455a3799673341"><div class="ttname"><a href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">iuse::adrenaline_injector</a></div><div class="ttdeci">std::optional&lt; int &gt; adrenaline_injector(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05028">iuse.cpp:5028</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a27370e4a030a81d8bef9d17e96def01b"><div class="ttname"><a href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">iuse::tazer2</a></div><div class="ttdeci">std::optional&lt; int &gt; tazer2(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03647">iuse.cpp:3647</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a281d73413ffa3a2a01fc89190e132bcd"><div class="ttname"><a href="namespaceiuse.html#a281d73413ffa3a2a01fc89190e132bcd">iuse::blech_because_unclean</a></div><div class="ttdeci">std::optional&lt; int &gt; blech_because_unclean(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01092">iuse.cpp:1092</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a28b731cc1720938427d5e2cb3aabd4d1"><div class="ttname"><a href="namespaceiuse.html#a28b731cc1720938427d5e2cb3aabd4d1">iuse::weather_tool</a></div><div class="ttdeci">std::optional&lt; int &gt; weather_tool(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07781">iuse.cpp:7781</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2d1b39affe1c38fac4396785bbe81255"><div class="ttname"><a href="namespaceiuse.html#a2d1b39affe1c38fac4396785bbe81255">iuse::ecig</a></div><div class="ttdeci">std::optional&lt; int &gt; ecig(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00598">iuse.cpp:598</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2f22223365b4a47dfbe1aee766cf30ac"><div class="ttname"><a href="namespaceiuse.html#a2f22223365b4a47dfbe1aee766cf30ac">iuse::weak_antibiotic</a></div><div class="ttdeci">std::optional&lt; int &gt; weak_antibiotic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08288">iuse.cpp:8288</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2f37766208d39460d69a3d15c3b65b72"><div class="ttname"><a href="namespaceiuse.html#a2f37766208d39460d69a3d15c3b65b72">iuse::emf_passive_on</a></div><div class="ttdeci">std::optional&lt; int &gt; emf_passive_on(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02638">iuse.cpp:2638</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a2f817a798c3b3dc964213258cae83c84"><div class="ttname"><a href="namespaceiuse.html#a2f817a798c3b3dc964213258cae83c84">iuse::dog_whistle</a></div><div class="ttdeci">std::optional&lt; int &gt; dog_whistle(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04317">iuse.cpp:4317</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3288281df68588407dc8829f3152d521"><div class="ttname"><a href="namespaceiuse.html#a3288281df68588407dc8829f3152d521">iuse::sextant</a></div><div class="ttdeci">std::optional&lt; int &gt; sextant(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07851">iuse.cpp:7851</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3380b7c6e177ae52c1ed955c8f0cd429"><div class="ttname"><a href="namespaceiuse.html#a3380b7c6e177ae52c1ed955c8f0cd429">iuse::directional_hologram</a></div><div class="ttdeci">std::optional&lt; int &gt; directional_hologram(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07916">iuse.cpp:7916</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3baef8958ce46cb42bb162f3c5bff2f1"><div class="ttname"><a href="namespaceiuse.html#a3baef8958ce46cb42bb162f3c5bff2f1">iuse::manage_exosuit</a></div><div class="ttdeci">std::optional&lt; int &gt; manage_exosuit(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02339">iuse.cpp:2339</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3cb10c16dedd50a5f2cf6d3a5308af40"><div class="ttname"><a href="namespaceiuse.html#a3cb10c16dedd50a5f2cf6d3a5308af40">iuse::chop_tree</a></div><div class="ttdeci">std::optional&lt; int &gt; chop_tree(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04544">iuse.cpp:4544</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3cb85440abeae511cd6dc0745866600e"><div class="ttname"><a href="namespaceiuse.html#a3cb85440abeae511cd6dc0745866600e">iuse::antibiotic</a></div><div class="ttdeci">std::optional&lt; int &gt; antibiotic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00625">iuse.cpp:625</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3d986076627c9327a54e8ab036aac530"><div class="ttname"><a href="namespaceiuse.html#a3d986076627c9327a54e8ab036aac530">iuse::remoteveh</a></div><div class="ttdeci">std::optional&lt; int &gt; remoteveh(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07318">iuse.cpp:7318</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3db2d297bf6d7717d50bf70fd09d5e62"><div class="ttname"><a href="namespaceiuse.html#a3db2d297bf6d7717d50bf70fd09d5e62">iuse::noise_emitter_on</a></div><div class="ttdeci">std::optional&lt; int &gt; noise_emitter_on(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02631">iuse.cpp:2631</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a3dfb3b5e80488c39c6214ebbbdde59a1"><div class="ttname"><a href="namespaceiuse.html#a3dfb3b5e80488c39c6214ebbbdde59a1">iuse::lumber</a></div><div class="ttdeci">std::optional&lt; int &gt; lumber(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04491">iuse.cpp:4491</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a417111224f79dd3394e544f94be5cd84"><div class="ttname"><a href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">iuse::chew</a></div><div class="ttdeci">std::optional&lt; int &gt; chew(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01131">iuse.cpp:1131</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a4711d604b2c2629bdb7dc78e0eea08f2"><div class="ttname"><a href="namespaceiuse.html#a4711d604b2c2629bdb7dc78e0eea08f2">iuse::coin_flip</a></div><div class="ttdeci">std::optional&lt; int &gt; coin_flip(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08395">iuse.cpp:8395</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a4b30807de7680324f381aea4345eeea2"><div class="ttname"><a href="namespaceiuse.html#a4b30807de7680324f381aea4345eeea2">iuse::break_stick</a></div><div class="ttdeci">std::optional&lt; int &gt; break_stick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08253">iuse.cpp:8253</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a4da7c6f8769914baeef050e18b2838d4"><div class="ttname"><a href="namespaceiuse.html#a4da7c6f8769914baeef050e18b2838d4">iuse::clear_rubble</a></div><div class="ttdeci">std::optional&lt; int &gt; clear_rubble(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02894">iuse.cpp:2894</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a4f315b4f024892d60d4bf51c1c2ebaf9"><div class="ttname"><a href="namespaceiuse.html#a4f315b4f024892d60d4bf51c1c2ebaf9">iuse::craft</a></div><div class="ttdeci">std::optional&lt; int &gt; craft(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08329">iuse.cpp:8329</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a515b77bf8a878a3e44dd621632efad1b"><div class="ttname"><a href="namespaceiuse.html#a515b77bf8a878a3e44dd621632efad1b">iuse::weed_cake</a></div><div class="ttdeci">std::optional&lt; int &gt; weed_cake(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00810">iuse.cpp:810</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a52056abc483314816045ccf43bb5c1db"><div class="ttname"><a href="namespaceiuse.html#a52056abc483314816045ccf43bb5c1db">iuse::honeycomb</a></div><div class="ttdeci">std::optional&lt; int &gt; honeycomb(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00478">iuse.cpp:478</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5257e1a41f6c18543b2cb2769cf3b5e0"><div class="ttname"><a href="namespaceiuse.html#a5257e1a41f6c18543b2cb2769cf3b5e0">iuse::radio_off</a></div><div class="ttdeci">std::optional&lt; int &gt; radio_off(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02462">iuse.cpp:2462</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a541feee13557661664abb151898dd8dd"><div class="ttname"><a href="namespaceiuse.html#a541feee13557661664abb151898dd8dd">iuse::marloss</a></div><div class="ttdeci">std::optional&lt; int &gt; marloss(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01383">iuse.cpp:1383</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a56237a295cef407df0c5d042a7f10ea9"><div class="ttname"><a href="namespaceiuse.html#a56237a295cef407df0c5d042a7f10ea9">iuse::inhaler</a></div><div class="ttdeci">std::optional&lt; int &gt; inhaler(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01018">iuse.cpp:1018</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a584512f8293bc65b48a7a6420bc9f17c"><div class="ttname"><a href="namespaceiuse.html#a584512f8293bc65b48a7a6420bc9f17c">iuse::can_goo</a></div><div class="ttdeci">std::optional&lt; int &gt; can_goo(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03225">iuse.cpp:3225</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a58c2604cb18e59b64c1e993b52bcb49f"><div class="ttname"><a href="namespaceiuse.html#a58c2604cb18e59b64c1e993b52bcb49f">iuse::poison</a></div><div class="ttdeci">std::optional&lt; int &gt; poison(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00907">iuse.cpp:907</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a590535dd168a4ef6c8c762a2e812c104"><div class="ttname"><a href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">iuse::petfood</a></div><div class="ttdeci">std::optional&lt; int &gt; petfood(Character *p, item *it, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01525">iuse.cpp:1525</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5a1c625609c7a13fb0833cc0259aed92"><div class="ttname"><a href="namespaceiuse.html#a5a1c625609c7a13fb0833cc0259aed92">iuse::dig</a></div><div class="ttdeci">std::optional&lt; int &gt; dig(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02830">iuse.cpp:2830</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5a8b1f1817669ffe1b630a978e890b5a"><div class="ttname"><a href="namespaceiuse.html#a5a8b1f1817669ffe1b630a978e890b5a">iuse::meditate</a></div><div class="ttdeci">std::optional&lt; int &gt; meditate(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00929">iuse.cpp:929</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5ae12ec7d9025b6ad54b9380ad2bc34e"><div class="ttname"><a href="namespaceiuse.html#a5ae12ec7d9025b6ad54b9380ad2bc34e">iuse::binder_add_recipe</a></div><div class="ttdeci">std::optional&lt; int &gt; binder_add_recipe(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08756">iuse.cpp:8756</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5c5647528d6db37fe36e3ecd52ccaa2d"><div class="ttname"><a href="namespaceiuse.html#a5c5647528d6db37fe36e3ecd52ccaa2d">iuse::mp3_deactivate</a></div><div class="ttdeci">std::optional&lt; int &gt; mp3_deactivate(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03816">iuse.cpp:3816</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5c6276358c59abd658c4798e1e6ecfd4"><div class="ttname"><a href="namespaceiuse.html#a5c6276358c59abd658c4798e1e6ecfd4">iuse::antifungal</a></div><div class="ttdeci">std::optional&lt; int &gt; antifungal(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00722">iuse.cpp:722</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5d06d1a26ca2f3397911708b8cb5dcf9"><div class="ttname"><a href="namespaceiuse.html#a5d06d1a26ca2f3397911708b8cb5dcf9">iuse::xanax</a></div><div class="ttdeci">std::optional&lt; int &gt; xanax(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00484">iuse.cpp:484</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5dce8bfc65592c248d14dd7f0c2fe31b"><div class="ttname"><a href="namespaceiuse.html#a5dce8bfc65592c248d14dd7f0c2fe31b">iuse::ehandcuffs</a></div><div class="ttdeci">std::optional&lt; int &gt; ehandcuffs(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06884">iuse.cpp:6884</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a5f2a515f184aaf7f4ca5d597e7231bce"><div class="ttname"><a href="namespaceiuse.html#a5f2a515f184aaf7f4ca5d597e7231bce">iuse::radio_mod</a></div><div class="ttdeci">std::optional&lt; int &gt; radio_mod(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01637">iuse.cpp:1637</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a60f3a7c26cee6c0836c660510a428609"><div class="ttname"><a href="namespaceiuse.html#a60f3a7c26cee6c0836c660510a428609">iuse::hacksaw</a></div><div class="ttdeci">std::optional&lt; int &gt; hacksaw(Character *, item *, const tripoint &amp;it_pnt)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04678">iuse.cpp:4678</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a61b11f14565a70be2cc19366cbe43266"><div class="ttname"><a href="namespaceiuse.html#a61b11f14565a70be2cc19366cbe43266">iuse::vibe</a></div><div class="ttdeci">std::optional&lt; int &gt; vibe(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04249">iuse.cpp:4249</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a62a20f8bfde5f4d89a486fa33de8ead7"><div class="ttname"><a href="namespaceiuse.html#a62a20f8bfde5f4d89a486fa33de8ead7">iuse::voltmeter</a></div><div class="ttdeci">std::optional&lt; int &gt; voltmeter(Character *p, item *it, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08879">iuse.cpp:8879</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a6464b824647295da6d3d9c65efd3dda0"><div class="ttname"><a href="namespaceiuse.html#a6464b824647295da6d3d9c65efd3dda0">iuse::afs_translocator</a></div><div class="ttdeci">std::optional&lt; int &gt; afs_translocator(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06896">iuse.cpp:6896</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a66232b4dbf97f6fb5b896e0c90abbe8a"><div class="ttname"><a href="namespaceiuse.html#a66232b4dbf97f6fb5b896e0c90abbe8a">iuse::firecracker</a></div><div class="ttdeci">std::optional&lt; int &gt; firecracker(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03528">iuse.cpp:3528</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a67a0712b717b9b14b3cdf49dd71b1215"><div class="ttname"><a href="namespaceiuse.html#a67a0712b717b9b14b3cdf49dd71b1215">iuse::call_of_tindalos</a></div><div class="ttdeci">std::optional&lt; int &gt; call_of_tindalos(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04377">iuse.cpp:4377</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a68bdbc09b8985bd6aa6c97d0bafe40a1"><div class="ttname"><a href="namespaceiuse.html#a68bdbc09b8985bd6aa6c97d0bafe40a1">iuse::play_game</a></div><div class="ttdeci">std::optional&lt; int &gt; play_game(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08402">iuse.cpp:8402</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a6ed9908cabb36951f63aa480cafe71c4"><div class="ttname"><a href="namespaceiuse.html#a6ed9908cabb36951f63aa480cafe71c4">iuse::radio_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; radio_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02528">iuse.cpp:2528</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a6edbf686ed750df42f1ed9f2cef004f0"><div class="ttname"><a href="namespaceiuse.html#a6edbf686ed750df42f1ed9f2cef004f0">iuse::foodperson_voice</a></div><div class="ttdeci">std::optional&lt; int &gt; foodperson_voice(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06924">iuse.cpp:6924</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a715d67d4dc585de01b91fe9e62674f5f"><div class="ttname"><a href="namespaceiuse.html#a715d67d4dc585de01b91fe9e62674f5f">iuse::change_eyes</a></div><div class="ttdeci">std::optional&lt; int &gt; change_eyes(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02964">iuse.cpp:2964</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7341f957264dc912c86791af1baa4b87"><div class="ttname"><a href="namespaceiuse.html#a7341f957264dc912c86791af1baa4b87">iuse::acidbomb_act</a></div><div class="ttdeci">std::optional&lt; int &gt; acidbomb_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03422">iuse.cpp:3422</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a75a6f2518410cd9fdba30e3051b3259c"><div class="ttname"><a href="namespaceiuse.html#a75a6f2518410cd9fdba30e3051b3259c">iuse::heat_food</a></div><div class="ttdeci">std::optional&lt; int &gt; heat_food(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04901">iuse.cpp:4901</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7758692d4d37e5f962bec202df6472ef"><div class="ttname"><a href="namespaceiuse.html#a7758692d4d37e5f962bec202df6472ef">iuse::capture_monster_act</a></div><div class="ttdeci">std::optional&lt; int &gt; capture_monster_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07997">iuse.cpp:7997</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7884fe54e2eac90255b18d263234b4d7"><div class="ttname"><a href="namespaceiuse.html#a7884fe54e2eac90255b18d263234b4d7">iuse::firecracker_pack_act</a></div><div class="ttdeci">std::optional&lt; int &gt; firecracker_pack_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03508">iuse.cpp:3508</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7b5fe1d8d9efeb8329b859fa8271327d"><div class="ttname"><a href="namespaceiuse.html#a7b5fe1d8d9efeb8329b859fa8271327d">iuse::marloss_gel</a></div><div class="ttdeci">std::optional&lt; int &gt; marloss_gel(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01412">iuse.cpp:1412</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7c62e8155f0f686f8f80e58f629071c1"><div class="ttname"><a href="namespaceiuse.html#a7c62e8155f0f686f8f80e58f629071c1">iuse::gun_repair</a></div><div class="ttdeci">std::optional&lt; int &gt; gun_repair(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05139">iuse.cpp:5139</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7ca57f0d03084f4c873c034633817ede"><div class="ttname"><a href="namespaceiuse.html#a7ca57f0d03084f4c873c034633817ede">iuse::multicooker</a></div><div class="ttdeci">std::optional&lt; int &gt; multicooker(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07431">iuse.cpp:7431</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7ce9f52bd3e45c37d762d834ace087ac"><div class="ttname"><a href="namespaceiuse.html#a7ce9f52bd3e45c37d762d834ace087ac">iuse::firecracker_pack</a></div><div class="ttdeci">std::optional&lt; int &gt; firecracker_pack(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03491">iuse.cpp:3491</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7d222a0d4791285bcfd1f4931a7c8c75"><div class="ttname"><a href="namespaceiuse.html#a7d222a0d4791285bcfd1f4931a7c8c75">iuse::siphon</a></div><div class="ttdeci">std::optional&lt; int &gt; siphon(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02914">iuse.cpp:2914</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7eb8577a02113f71e59589690f2a9518"><div class="ttname"><a href="namespaceiuse.html#a7eb8577a02113f71e59589690f2a9518">iuse::jackhammer</a></div><div class="ttdeci">std::optional&lt; int &gt; jackhammer(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03051">iuse.cpp:3051</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7ef8a452a30b8f27ed576260caaa33ec"><div class="ttname"><a href="namespaceiuse.html#a7ef8a452a30b8f27ed576260caaa33ec">iuse::plantblech</a></div><div class="ttdeci">std::optional&lt; int &gt; plantblech(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01108">iuse.cpp:1108</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a7ff60437495f56c9e8ce557a328b8a72"><div class="ttname"><a href="namespaceiuse.html#a7ff60437495f56c9e8ce557a328b8a72">iuse::pack_cbm</a></div><div class="ttdeci">std::optional&lt; int &gt; pack_cbm(Character *p, item *it, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02366">iuse.cpp:2366</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a802d0cd933f590e71bc0a03612544d9a"><div class="ttname"><a href="namespaceiuse.html#a802d0cd933f590e71bc0a03612544d9a">iuse::measure_resonance</a></div><div class="ttdeci">std::optional&lt; int &gt; measure_resonance(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08471">iuse.cpp:8471</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a804fce8e3d1ae7476d41f0cc16699f88"><div class="ttname"><a href="namespaceiuse.html#a804fce8e3d1ae7476d41f0cc16699f88">iuse::radglove</a></div><div class="ttdeci">std::optional&lt; int &gt; radglove(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05096">iuse.cpp:5096</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a83a5c5c31578c093c0de96c98f6e4193"><div class="ttname"><a href="namespaceiuse.html#a83a5c5c31578c093c0de96c98f6e4193">iuse::molotov_lit</a></div><div class="ttdeci">std::optional&lt; int &gt; molotov_lit(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03464">iuse.cpp:3464</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a84c284fc77ef107deccb75a6b17a3b36"><div class="ttname"><a href="namespaceiuse.html#a84c284fc77ef107deccb75a6b17a3b36">iuse::stimpack</a></div><div class="ttdeci">std::optional&lt; int &gt; stimpack(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05073">iuse.cpp:5073</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a85b7f720ce7cd6c3b8cc00791a8a46e0"><div class="ttname"><a href="namespaceiuse.html#a85b7f720ce7cd6c3b8cc00791a8a46e0">iuse::portable_game</a></div><div class="ttdeci">std::optional&lt; int &gt; portable_game(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04023">iuse.cpp:4023</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a86c1eba6bed33d5c6aa77f6663955071"><div class="ttname"><a href="namespaceiuse.html#a86c1eba6bed33d5c6aa77f6663955071">iuse::wash_soft_items</a></div><div class="ttdeci">std::optional&lt; int &gt; wash_soft_items(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08094">iuse.cpp:8094</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a878655c7093b227b1b388247bef69fb4"><div class="ttname"><a href="namespaceiuse.html#a878655c7093b227b1b388247bef69fb4">iuse::antiparasitic</a></div><div class="ttdeci">std::optional&lt; int &gt; antiparasitic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00740">iuse.cpp:740</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a87919f860221208970b40d2ec859fd55"><div class="ttname"><a href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">iuse::mycus</a></div><div class="ttdeci">std::optional&lt; int &gt; mycus(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01424">iuse.cpp:1424</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8a66e2caedd3083f98d3c04025b3824b"><div class="ttname"><a href="namespaceiuse.html#a8a66e2caedd3083f98d3c04025b3824b">iuse::toolmod_attach</a></div><div class="ttdeci">std::optional&lt; int &gt; toolmod_attach(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05231">iuse.cpp:5231</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8aa28fa6a58bdfa71593e86c9e908f18"><div class="ttname"><a href="namespaceiuse.html#a8aa28fa6a58bdfa71593e86c9e908f18">iuse::oxygen_bottle</a></div><div class="ttdeci">std::optional&lt; int &gt; oxygen_bottle(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01033">iuse.cpp:1033</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8b605f6d204c8cc9c0b203b1a3deaa0e"><div class="ttname"><a href="namespaceiuse.html#a8b605f6d204c8cc9c0b203b1a3deaa0e">iuse::pick_lock</a></div><div class="ttdeci">std::optional&lt; int &gt; pick_lock(Character *p, item *it, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03065">iuse.cpp:3065</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8bb8d8a8da543e07d5c9a38dc70a1de0"><div class="ttname"><a href="namespaceiuse.html#a8bb8d8a8da543e07d5c9a38dc70a1de0">iuse::boltcutters</a></div><div class="ttdeci">std::optional&lt; int &gt; boltcutters(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04726">iuse.cpp:4726</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8d1e77b5aed48f08625766fd3a4c8996"><div class="ttname"><a href="namespaceiuse.html#a8d1e77b5aed48f08625766fd3a4c8996">iuse::fishing_rod</a></div><div class="ttdeci">std::optional&lt; int &gt; fishing_rod(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01756">iuse.cpp:1756</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8d75813ba7f9c05f7504b7623d55ea99"><div class="ttname"><a href="namespaceiuse.html#a8d75813ba7f9c05f7504b7623d55ea99">iuse::granade_act</a></div><div class="ttdeci">std::optional&lt; int &gt; granade_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03274">iuse.cpp:3274</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a8e388ce3877e20825c96f507fa18c302"><div class="ttname"><a href="namespaceiuse.html#a8e388ce3877e20825c96f507fa18c302">iuse::magic_8_ball</a></div><div class="ttdeci">std::optional&lt; int &gt; magic_8_ball(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08450">iuse.cpp:8450</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a91daa8843aca07c214f1c7a0ca3a373a"><div class="ttname"><a href="namespaceiuse.html#a91daa8843aca07c214f1c7a0ca3a373a">iuse::oxytorch</a></div><div class="ttdeci">std::optional&lt; int &gt; oxytorch(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04631">iuse.cpp:4631</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a98aedd1967c366bd4ec8320abbc3b342"><div class="ttname"><a href="namespaceiuse.html#a98aedd1967c366bd4ec8320abbc3b342">iuse::alcohol_weak</a></div><div class="ttdeci">std::optional&lt; int &gt; alcohol_weak(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00521">iuse.cpp:521</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9a470e36c4a87310339cd4ac42ccf9b9"><div class="ttname"><a href="namespaceiuse.html#a9a470e36c4a87310339cd4ac42ccf9b9">iuse::teleport</a></div><div class="ttdeci">std::optional&lt; int &gt; teleport(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03208">iuse.cpp:3208</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9aed8ad3c9d74cb0c90a44684889b6fc"><div class="ttname"><a href="namespaceiuse.html#a9aed8ad3c9d74cb0c90a44684889b6fc">iuse::wash_all_items</a></div><div class="ttdeci">std::optional&lt; int &gt; wash_all_items(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08134">iuse.cpp:8134</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9be263d2564579adab8fcb2db24bbf1a"><div class="ttname"><a href="namespaceiuse.html#a9be263d2564579adab8fcb2db24bbf1a">iuse::towel</a></div><div class="ttdeci">std::optional&lt; int &gt; towel(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04948">iuse.cpp:4948</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9d9dea35382b5a1d73cda29cc1d4302a"><div class="ttname"><a href="namespaceiuse.html#a9d9dea35382b5a1d73cda29cc1d4302a">iuse::radio_on</a></div><div class="ttdeci">std::optional&lt; int &gt; radio_on(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02582">iuse.cpp:2582</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9ddf58b64f06b9e91ed946ee217a48cc"><div class="ttname"><a href="namespaceiuse.html#a9ddf58b64f06b9e91ed946ee217a48cc">iuse::tazer</a></div><div class="ttdeci">std::optional&lt; int &gt; tazer(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03574">iuse.cpp:3574</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a9eb97792608dbdf6bbfd9ab52fdc2419"><div class="ttname"><a href="namespaceiuse.html#a9eb97792608dbdf6bbfd9ab52fdc2419">iuse::alcohol_strong</a></div><div class="ttdeci">std::optional&lt; int &gt; alcohol_strong(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00531">iuse.cpp:531</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa0901bfdb67b0753239b54a545f76f92"><div class="ttname"><a href="namespaceiuse.html#aa0901bfdb67b0753239b54a545f76f92">iuse::sewage</a></div><div class="ttdeci">std::optional&lt; int &gt; sewage(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00467">iuse.cpp:467</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa115b359fe8260eca81d45dbd5a17d4e"><div class="ttname"><a href="namespaceiuse.html#aa115b359fe8260eca81d45dbd5a17d4e">iuse::mp3</a></div><div class="ttdeci">std::optional&lt; int &gt; mp3(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03718">iuse.cpp:3718</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa1978f80267c705ce4011143096a527e"><div class="ttname"><a href="namespaceiuse.html#aa1978f80267c705ce4011143096a527e">iuse::chop_logs</a></div><div class="ttdeci">std::optional&lt; int &gt; chop_logs(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04587">iuse.cpp:4587</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa21df22da742ffa9539caacc95c9357f"><div class="ttname"><a href="namespaceiuse.html#aa21df22da742ffa9539caacc95c9357f">iuse::mace</a></div><div class="ttdeci">std::optional&lt; int &gt; mace(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02295">iuse.cpp:2295</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa2bc3df10296a34a3757586995cdb8b1"><div class="ttname"><a href="namespaceiuse.html#aa2bc3df10296a34a3757586995cdb8b1">iuse::radiocaron</a></div><div class="ttdeci">std::optional&lt; int &gt; radiocaron(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07026">iuse.cpp:7026</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa2dc5f9fde24098df2e2977aa0be0773"><div class="ttname"><a href="namespaceiuse.html#aa2dc5f9fde24098df2e2977aa0be0773">iuse::c4</a></div><div class="ttdeci">std::optional&lt; int &gt; c4(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03406">iuse.cpp:3406</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa31522ea230f611408238b5ca4816f8c"><div class="ttname"><a href="namespaceiuse.html#aa31522ea230f611408238b5ca4816f8c">iuse::water_purifier</a></div><div class="ttdeci">std::optional&lt; int &gt; water_purifier(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02426">iuse.cpp:2426</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa506a3bba5e08ac1d6d193c4ed4eee27"><div class="ttname"><a href="namespaceiuse.html#aa506a3bba5e08ac1d6d193c4ed4eee27">iuse::unpack_item</a></div><div class="ttdeci">std::optional&lt; int &gt; unpack_item(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02352">iuse.cpp:2352</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa93a7a8252fcd7d5ce9c245b43a9b33d"><div class="ttname"><a href="namespaceiuse.html#aa93a7a8252fcd7d5ce9c245b43a9b33d">iuse::flu_vaccine</a></div><div class="ttdeci">std::optional&lt; int &gt; flu_vaccine(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00888">iuse.cpp:888</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aa9c8ef7491ae4a0f3274ebc563f44aae"><div class="ttname"><a href="namespaceiuse.html#aa9c8ef7491ae4a0f3274ebc563f44aae">iuse::flusleep</a></div><div class="ttdeci">std::optional&lt; int &gt; flusleep(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01009">iuse.cpp:1009</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aae23e18216c07772d07cd9676c4402d8"><div class="ttname"><a href="namespaceiuse.html#aae23e18216c07772d07cd9676c4402d8">iuse::crowbar_weak</a></div><div class="ttdeci">std::optional&lt; int &gt; crowbar_weak(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02714">iuse.cpp:2714</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aae6ef12d4b7a69abb68652ab447f7b7b"><div class="ttname"><a href="namespaceiuse.html#aae6ef12d4b7a69abb68652ab447f7b7b">iuse::radiocar</a></div><div class="ttdeci">std::optional&lt; int &gt; radiocar(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06949">iuse.cpp:6949</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aaed245dbdf2a98482598ee81194f54c2"><div class="ttname"><a href="namespaceiuse.html#aaed245dbdf2a98482598ee81194f54c2">iuse::jet_injector</a></div><div class="ttdeci">std::optional&lt; int &gt; jet_injector(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05051">iuse.cpp:5051</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aafa142c7bed1e2b6ceecadfbd0d30ee5"><div class="ttname"><a href="namespaceiuse.html#aafa142c7bed1e2b6ceecadfbd0d30ee5">iuse::talking_doll</a></div><div class="ttdeci">std::optional&lt; int &gt; talking_doll(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05124">iuse.cpp:5124</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ab0f3c19d61836eb7b474eae278b603ca"><div class="ttname"><a href="namespaceiuse.html#ab0f3c19d61836eb7b474eae278b603ca">iuse::prozac</a></div><div class="ttdeci">std::optional&lt; int &gt; prozac(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00973">iuse.cpp:973</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ab170ea3231e8cb4e0957cef21d8921c8"><div class="ttname"><a href="namespaceiuse.html#ab170ea3231e8cb4e0957cef21d8921c8">iuse::purify_smart</a></div><div class="ttdeci">std::optional&lt; int &gt; purify_smart(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01164">iuse.cpp:1164</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ab41708c4b5c33c118e7906782f78d7a6"><div class="ttname"><a href="namespaceiuse.html#ab41708c4b5c33c118e7906782f78d7a6">iuse::pack_item</a></div><div class="ttdeci">std::optional&lt; int &gt; pack_item(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02397">iuse.cpp:2397</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ab50bfd66f72ec01f785e1be5965da498"><div class="ttname"><a href="namespaceiuse.html#ab50bfd66f72ec01f785e1be5965da498">iuse::ma_manual</a></div><div class="ttdeci">std::optional&lt; int &gt; ma_manual(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02692">iuse.cpp:2692</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ab7fdd07b4a0c88adb7732b5bdb7bdf52"><div class="ttname"><a href="namespaceiuse.html#ab7fdd07b4a0c88adb7732b5bdb7bdf52">iuse::ebooksave</a></div><div class="ttdeci">std::optional&lt; int &gt; ebooksave(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08665">iuse.cpp:8665</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aba40ae64ce69ac474af2c3f93e6d9062"><div class="ttname"><a href="namespaceiuse.html#aba40ae64ce69ac474af2c3f93e6d9062">iuse::hand_crank</a></div><div class="ttdeci">std::optional&lt; int &gt; hand_crank(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04215">iuse.cpp:4215</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abaff238678a7537e407f351f436cb408"><div class="ttname"><a href="namespaceiuse.html#abaff238678a7537e407f351f436cb408">iuse::epic_music</a></div><div class="ttdeci">std::optional&lt; int &gt; epic_music(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05485">iuse.cpp:5485</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abb611eda7fd237a2b9c470bfb5212840"><div class="ttname"><a href="namespaceiuse.html#abb611eda7fd237a2b9c470bfb5212840">iuse::gunmod_attach</a></div><div class="ttdeci">std::optional&lt; int &gt; gunmod_attach(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05194">iuse.cpp:5194</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abbcb64b7dbeaf1b6d89d5ad218500d7a"><div class="ttname"><a href="namespaceiuse.html#abbcb64b7dbeaf1b6d89d5ad218500d7a">iuse::geiger_active</a></div><div class="ttdeci">std::optional&lt; int &gt; geiger_active(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03174">iuse.cpp:3174</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abc44b17e87ebda604c17412017ec34de"><div class="ttname"><a href="namespaceiuse.html#abc44b17e87ebda604c17412017ec34de">iuse::marloss_seed</a></div><div class="ttdeci">std::optional&lt; int &gt; marloss_seed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01395">iuse.cpp:1395</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abed2047296de97284c321af16b9eb26e"><div class="ttname"><a href="namespaceiuse.html#abed2047296de97284c321af16b9eb26e">iuse::unfold_generic</a></div><div class="ttdeci">std::optional&lt; int &gt; unfold_generic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05021">iuse.cpp:5021</a></div></div>
<div class="ttc" id="anamespaceiuse_html_abff950d44529ee5a01b6cf5b9a722150"><div class="ttname"><a href="namespaceiuse.html#abff950d44529ee5a01b6cf5b9a722150">iuse::grenade_inc_act</a></div><div class="ttdeci">std::optional&lt; int &gt; grenade_inc_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03435">iuse.cpp:3435</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ac2e14fe7af245b21ebec7f68bb1fadd6"><div class="ttname"><a href="namespaceiuse.html#ac2e14fe7af245b21ebec7f68bb1fadd6">iuse::hammer</a></div><div class="ttdeci">std::optional&lt; int &gt; hammer(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02709">iuse.cpp:2709</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ac36c707483ed517d1d5639815dacc587"><div class="ttname"><a href="namespaceiuse.html#ac36c707483ed517d1d5639815dacc587">iuse::gasmask</a></div><div class="ttdeci">std::optional&lt; int &gt; gasmask(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03972">iuse.cpp:3972</a></div></div>
<div class="ttc" id="anamespaceiuse_html_acaedb3c693d953eca4780be500de284b"><div class="ttname"><a href="namespaceiuse.html#acaedb3c693d953eca4780be500de284b">iuse::gasmask_activate</a></div><div class="ttdeci">std::optional&lt; int &gt; gasmask_activate(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03959">iuse.cpp:3959</a></div></div>
<div class="ttc" id="anamespaceiuse_html_acc505d2082da6d8adcd7b96e12c933b8"><div class="ttname"><a href="namespaceiuse.html#acc505d2082da6d8adcd7b96e12c933b8">iuse::eyedrops</a></div><div class="ttdeci">std::optional&lt; int &gt; eyedrops(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00647">iuse.cpp:647</a></div></div>
<div class="ttc" id="anamespaceiuse_html_acc9979793768905336b3047886fa5282"><div class="ttname"><a href="namespaceiuse.html#acc9979793768905336b3047886fa5282">iuse::smoking</a></div><div class="ttdeci">std::optional&lt; int &gt; smoking(Character *, item *, const tripoint &amp;)</div><div class="ttdoc">Entry point for intentional bodily intake of smoke via paper wrapped one time use items: cigars,...</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00544">iuse.cpp:544</a></div></div>
<div class="ttc" id="anamespaceiuse_html_accc0f8096945223d4f89036b84ee070d"><div class="ttname"><a href="namespaceiuse.html#accc0f8096945223d4f89036b84ee070d">iuse::solarpack</a></div><div class="ttdeci">std::optional&lt; int &gt; solarpack(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03903">iuse.cpp:3903</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ace19128a8e391cd843c40950958f3854"><div class="ttname"><a href="namespaceiuse.html#ace19128a8e391cd843c40950958f3854">iuse::mp3_on</a></div><div class="ttdeci">std::optional&lt; int &gt; mp3_on(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03808">iuse.cpp:3808</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad124568be7fc9e3b53fd22e409ffd105"><div class="ttname"><a href="namespaceiuse.html#ad124568be7fc9e3b53fd22e409ffd105">iuse::bell</a></div><div class="ttdeci">std::optional&lt; int &gt; bell(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05281">iuse.cpp:5281</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad237e98b818e25194ea182c0003933f2"><div class="ttname"><a href="namespaceiuse.html#ad237e98b818e25194ea182c0003933f2">iuse::dig_channel</a></div><div class="ttdeci">std::optional&lt; int &gt; dig_channel(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02854">iuse.cpp:2854</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad34760a5d74b44c11fe67bf0ac5d5a50"><div class="ttname"><a href="namespaceiuse.html#ad34760a5d74b44c11fe67bf0ac5d5a50">iuse::fitness_check</a></div><div class="ttdeci">std::optional&lt; int &gt; fitness_check(Character *p, item *it, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04164">iuse.cpp:4164</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad36c2f44e3f488ea9360aef65ca8a1ee"><div class="ttname"><a href="namespaceiuse.html#ad36c2f44e3f488ea9360aef65ca8a1ee">iuse::fish_trap_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; fish_trap_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01829">iuse.cpp:1829</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad6120adfc71b4c1ec6a89dd84f8cc435"><div class="ttname"><a href="namespaceiuse.html#ad6120adfc71b4c1ec6a89dd84f8cc435">iuse::dive_tank</a></div><div class="ttdeci">std::optional&lt; int &gt; dive_tank(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03861">iuse.cpp:3861</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad832f42294f185680d3279ace95df195"><div class="ttname"><a href="namespaceiuse.html#ad832f42294f185680d3279ace95df195">iuse::electricstorage</a></div><div class="ttdeci">std::optional&lt; int &gt; electricstorage(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08537">iuse.cpp:8537</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad907a5b6293dc78b83cc9863efbb6eeb"><div class="ttname"><a href="namespaceiuse.html#ad907a5b6293dc78b83cc9863efbb6eeb">iuse::robotcontrol</a></div><div class="ttdeci">std::optional&lt; int &gt; robotcontrol(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05319">iuse.cpp:5319</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ad9181dfd00576bfaddeb22cf117aae62"><div class="ttname"><a href="namespaceiuse.html#ad9181dfd00576bfaddeb22cf117aae62">iuse::shocktonfa_on</a></div><div class="ttdeci">std::optional&lt; int &gt; shocktonfa_on(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03690">iuse.cpp:3690</a></div></div>
<div class="ttc" id="anamespaceiuse_html_adab6b73b206eb43b5402344b47614b0f"><div class="ttname"><a href="namespaceiuse.html#adab6b73b206eb43b5402344b47614b0f">iuse::directional_antenna</a></div><div class="ttdeci">std::optional&lt; int &gt; directional_antenna(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02473">iuse.cpp:2473</a></div></div>
<div class="ttc" id="anamespaceiuse_html_add3f1721b816cf46af6c28c73f61eb14"><div class="ttname"><a href="namespaceiuse.html#add3f1721b816cf46af6c28c73f61eb14">iuse::fungicide</a></div><div class="ttdeci">std::optional&lt; int &gt; fungicide(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00665">iuse.cpp:665</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae22258fb2a1d2ff3ab4d592f76160588"><div class="ttname"><a href="namespaceiuse.html#ae22258fb2a1d2ff3ab4d592f76160588">iuse::blood_draw</a></div><div class="ttdeci">std::optional&lt; int &gt; blood_draw(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04389">iuse.cpp:4389</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae23e7d15dfb30b39d0e2ed4044eda3bf"><div class="ttname"><a href="namespaceiuse.html#ae23e7d15dfb30b39d0e2ed4044eda3bf">iuse::solarpack_off</a></div><div class="ttdeci">std::optional&lt; int &gt; solarpack_off(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03937">iuse.cpp:3937</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae246e477e0e0f04bbf15bca5e511636e"><div class="ttname"><a href="namespaceiuse.html#ae246e477e0e0f04bbf15bca5e511636e">iuse::thorazine</a></div><div class="ttdeci">std::optional&lt; int &gt; thorazine(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00948">iuse.cpp:948</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae3f77bc1e845d285caf3f49d6e370733"><div class="ttname"><a href="namespaceiuse.html#ae3f77bc1e845d285caf3f49d6e370733">iuse::coke</a></div><div class="ttdeci">std::optional&lt; int &gt; coke(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00834">iuse.cpp:834</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae4f1a3a8eca6ec8320b1bd4236f9053a"><div class="ttname"><a href="namespaceiuse.html#ae4f1a3a8eca6ec8320b1bd4236f9053a">iuse::calories_intake_tracker</a></div><div class="ttdeci">std::optional&lt; int &gt; calories_intake_tracker(Character *p, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07895">iuse.cpp:7895</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae6ba2f4a41e8a170d9aa4609c7f0298e"><div class="ttname"><a href="namespaceiuse.html#ae6ba2f4a41e8a170d9aa4609c7f0298e">iuse::flumed</a></div><div class="ttdeci">std::optional&lt; int &gt; flumed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01002">iuse.cpp:1002</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae7226ce0f0d3e2bd4e29adcbfeac04b1"><div class="ttname"><a href="namespaceiuse.html#ae7226ce0f0d3e2bd4e29adcbfeac04b1">iuse::einktabletpc</a></div><div class="ttdeci">std::optional&lt; int &gt; einktabletpc(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05497">iuse.cpp:5497</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae78ed0746aa741f05071a687cc3a6244"><div class="ttname"><a href="namespaceiuse.html#ae78ed0746aa741f05071a687cc3a6244">iuse::mop</a></div><div class="ttdeci">std::optional&lt; int &gt; mop(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04765">iuse.cpp:4765</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae81079151986b7a91874751dae6720a5"><div class="ttname"><a href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">iuse::seed</a></div><div class="ttdeci">std::optional&lt; int &gt; seed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05301">iuse.cpp:5301</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae8684a173355a1746766060d7298f4d2"><div class="ttname"><a href="namespaceiuse.html#ae8684a173355a1746766060d7298f4d2">iuse::spray_can</a></div><div class="ttdeci">std::optional&lt; int &gt; spray_can(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04808">iuse.cpp:4808</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae9c902b0f778f1f2fadb6913901398f1"><div class="ttname"><a href="namespaceiuse.html#ae9c902b0f778f1f2fadb6913901398f1">iuse::hotplate</a></div><div class="ttdeci">std::optional&lt; int &gt; hotplate(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04920">iuse.cpp:4920</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae9d80690ffeeccd8acdc670ad4e5f1e1"><div class="ttname"><a href="namespaceiuse.html#ae9d80690ffeeccd8acdc670ad4e5f1e1">iuse::dive_tank_activate</a></div><div class="ttdeci">std::optional&lt; int &gt; dive_tank_activate(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03883">iuse.cpp:3883</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aeb111931df64f89983c2a55e2e761fa5"><div class="ttname"><a href="namespaceiuse.html#aeb111931df64f89983c2a55e2e761fa5">iuse::geiger</a></div><div class="ttdeci">std::optional&lt; int &gt; geiger(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03127">iuse.cpp:3127</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aec57f3dc11c77dbf445d5df1d7b99df7"><div class="ttname"><a href="namespaceiuse.html#aec57f3dc11c77dbf445d5df1d7b99df7">iuse::wash_hard_items</a></div><div class="ttdeci">std::optional&lt; int &gt; wash_hard_items(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08114">iuse.cpp:8114</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aedb4fef2a26209ed9508557251219116"><div class="ttname"><a href="namespaceiuse.html#aedb4fef2a26209ed9508557251219116">iuse::radiocontrol</a></div><div class="ttdeci">std::optional&lt; int &gt; radiocontrol(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07111">iuse.cpp:7111</a></div></div>
<div class="ttc" id="anamespaceiuse_html_aefcc86332f7e77a3d2bfbefb12ecb955"><div class="ttname"><a href="namespaceiuse.html#aefcc86332f7e77a3d2bfbefb12ecb955">iuse::pickaxe</a></div><div class="ttdeci">std::optional&lt; int &gt; pickaxe(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03112">iuse.cpp:3112</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af11a0b1f048dc2e56a03590765cb6b34"><div class="ttname"><a href="namespaceiuse.html#af11a0b1f048dc2e56a03590765cb6b34">iuse::binder_manage_recipe</a></div><div class="ttdeci">std::optional&lt; int &gt; binder_manage_recipe(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08832">iuse.cpp:8832</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af1a610c8bd93f97da84d6bc96416085a"><div class="ttname"><a href="namespaceiuse.html#af1a610c8bd93f97da84d6bc96416085a">iuse::ehandcuffs_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; ehandcuffs_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06802">iuse.cpp:6802</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af3182ba0d596fce518f8a701075565ab"><div class="ttname"><a href="namespaceiuse.html#af3182ba0d596fce518f8a701075565ab">iuse::capture_monster_veh</a></div><div class="ttdeci">std::optional&lt; int &gt; capture_monster_veh(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07944">iuse.cpp:7944</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af3433902868365f40cf8698f711b20ab"><div class="ttname"><a href="namespaceiuse.html#af3433902868365f40cf8698f711b20ab">iuse::datura</a></div><div class="ttdeci">std::optional&lt; int &gt; datura(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00988">iuse.cpp:988</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af5e170dc5c4229337842e4b35365b0bc"><div class="ttname"><a href="namespaceiuse.html#af5e170dc5c4229337842e4b35365b0bc">iuse::remoteveh_tick</a></div><div class="ttdeci">std::optional&lt; int &gt; remoteveh_tick(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07296">iuse.cpp:7296</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af8916dea8e9d4477f1822ee9a7f74a2e"><div class="ttname"><a href="namespaceiuse.html#af8916dea8e9d4477f1822ee9a7f74a2e">iuse::vortex</a></div><div class="ttdeci">std::optional&lt; int &gt; vortex(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04289">iuse.cpp:4289</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af8a43dab57bdd3c8eee883fbabdcf3ce"><div class="ttname"><a href="namespaceiuse.html#af8a43dab57bdd3c8eee883fbabdcf3ce">iuse::heatpack</a></div><div class="ttdeci">std::optional&lt; int &gt; heatpack(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04893">iuse.cpp:4893</a></div></div>
<div class="ttc" id="anamespaceiuse_html_af8ddca8d934da5ae1ffbf496ea2b02f5"><div class="ttname"><a href="namespaceiuse.html#af8ddca8d934da5ae1ffbf496ea2b02f5">iuse::meth</a></div><div class="ttdeci">std::optional&lt; int &gt; meth(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00850">iuse.cpp:850</a></div></div>
<div class="ttc" id="anamespaceiuse_html_afd2b57a28e228f3f3d4bc4ca35bb84b7"><div class="ttname"><a href="namespaceiuse.html#afd2b57a28e228f3f3d4bc4ca35bb84b7">iuse::hotplate_atomic</a></div><div class="ttdeci">std::optional&lt; int &gt; hotplate_atomic(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04936">iuse.cpp:4936</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l03422">iuse::acidbomb_act()</a>, <a class="el" href="item__factory_8cpp_source.html#l01691">add_actor()</a>, <a class="el" href="item__factory_8cpp_source.html#l01679">add_iuse()</a>, <a class="el" href="iuse_8cpp_source.html#l05028">iuse::adrenaline_injector()</a>, <a class="el" href="iuse_8cpp_source.html#l06896">iuse::afs_translocator()</a>, <a class="el" href="iuse_8cpp_source.html#l00526">iuse::alcohol_medium()</a>, <a class="el" href="iuse_8cpp_source.html#l00531">iuse::alcohol_strong()</a>, <a class="el" href="iuse_8cpp_source.html#l00521">iuse::alcohol_weak()</a>, <a class="el" href="iuse_8cpp_source.html#l00625">iuse::antibiotic()</a>, <a class="el" href="iuse_8cpp_source.html#l00789">iuse::anticonvulsant()</a>, <a class="el" href="iuse_8cpp_source.html#l00722">iuse::antifungal()</a>, <a class="el" href="iuse_8cpp_source.html#l00740">iuse::antiparasitic()</a>, <a class="el" href="iuse_8cpp_source.html#l05281">iuse::bell()</a>, <a class="el" href="iuse_8cpp_source.html#l08756">iuse::binder_add_recipe()</a>, <a class="el" href="iuse_8cpp_source.html#l08832">iuse::binder_manage_recipe()</a>, <a class="el" href="iuse_8cpp_source.html#l01054">iuse::blech()</a>, <a class="el" href="iuse_8cpp_source.html#l01092">iuse::blech_because_unclean()</a>, <a class="el" href="iuse_8cpp_source.html#l04389">iuse::blood_draw()</a>, <a class="el" href="iuse_8cpp_source.html#l04726">iuse::boltcutters()</a>, <a class="el" href="iuse_8cpp_source.html#l08253">iuse::break_stick()</a>, <a class="el" href="iuse_8cpp_source.html#l03406">iuse::c4()</a>, <a class="el" href="iuse_8cpp_source.html#l04377">iuse::call_of_tindalos()</a>, <a class="el" href="iuse_8cpp_source.html#l07895">iuse::calories_intake_tracker()</a>, <a class="el" href="iuse_8cpp_source.html#l06517">iuse::camera()</a>, <a class="el" href="iuse_8cpp_source.html#l03225">iuse::can_goo()</a>, <a class="el" href="iuse_8cpp_source.html#l07997">iuse::capture_monster_act()</a>, <a class="el" href="iuse_8cpp_source.html#l07944">iuse::capture_monster_veh()</a>, <a class="el" href="iuse_8cpp_source.html#l02964">iuse::change_eyes()</a>, <a class="el" href="iuse_8cpp_source.html#l02972">iuse::change_skin()</a>, <a class="el" href="iuse_8cpp_source.html#l01131">iuse::chew()</a>, <a class="el" href="iuse_8cpp_source.html#l04587">iuse::chop_logs()</a>, <a class="el" href="iuse_8cpp_source.html#l04544">iuse::chop_tree()</a>, <a class="el" href="iuse_8cpp_source.html#l02894">iuse::clear_rubble()</a>, <a class="el" href="iuse_8cpp_source.html#l08395">iuse::coin_flip()</a>, <a class="el" href="iuse_8cpp_source.html#l00834">iuse::coke()</a>, <a class="el" href="iuse_8cpp_source.html#l08329">iuse::craft()</a>, <a class="el" href="iuse_8cpp_source.html#l02719">iuse::crowbar()</a>, <a class="el" href="iuse_8cpp_source.html#l02714">iuse::crowbar_weak()</a>, <a class="el" href="iuse_8cpp_source.html#l00988">iuse::datura()</a>, <a class="el" href="iuse_8cpp_source.html#l07878">iuse::dbg_lux_meter()</a>, <a class="el" href="iuse_8cpp_source.html#l02830">iuse::dig()</a>, <a class="el" href="iuse_8cpp_source.html#l02854">iuse::dig_channel()</a>, <a class="el" href="iuse_8cpp_source.html#l02473">iuse::directional_antenna()</a>, <a class="el" href="iuse_8cpp_source.html#l07916">iuse::directional_hologram()</a>, <a class="el" href="iuse_8cpp_source.html#l08366">iuse::disassemble()</a>, <a class="el" href="iuse_8cpp_source.html#l03861">iuse::dive_tank()</a>, <a class="el" href="iuse_8cpp_source.html#l03883">iuse::dive_tank_activate()</a>, <a class="el" href="iuse_8cpp_source.html#l04317">iuse::dog_whistle()</a>, <a class="el" href="iuse_8cpp_source.html#l08707">iuse::ebookread()</a>, <a class="el" href="iuse_8cpp_source.html#l08665">iuse::ebooksave()</a>, <a class="el" href="iuse_8cpp_source.html#l00598">iuse::ecig()</a>, <a class="el" href="iuse_8cpp_source.html#l06884">iuse::ehandcuffs()</a>, <a class="el" href="iuse_8cpp_source.html#l06802">iuse::ehandcuffs_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l05497">iuse::einktabletpc()</a>, <a class="el" href="iuse_8cpp_source.html#l08537">iuse::electricstorage()</a>, <a class="el" href="iuse_8cpp_source.html#l02638">iuse::emf_passive_on()</a>, <a class="el" href="iuse_8cpp_source.html#l05485">iuse::epic_music()</a>, <a class="el" href="iuse_8cpp_source.html#l01918">iuse::extinguisher()</a>, <a class="el" href="iuse_8cpp_source.html#l00647">iuse::eyedrops()</a>, <a class="el" href="iuse_8cpp_source.html#l02874">iuse::fill_pit()</a>, <a class="el" href="iuse_8cpp_source.html#l03528">iuse::firecracker()</a>, <a class="el" href="iuse_8cpp_source.html#l03491">iuse::firecracker_pack()</a>, <a class="el" href="iuse_8cpp_source.html#l03508">iuse::firecracker_pack_act()</a>, <a class="el" href="iuse_8cpp_source.html#l01784">iuse::fish_trap()</a>, <a class="el" href="iuse_8cpp_source.html#l01829">iuse::fish_trap_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l01756">iuse::fishing_rod()</a>, <a class="el" href="iuse_8cpp_source.html#l04164">iuse::fitness_check()</a>, <a class="el" href="iuse_8cpp_source.html#l00888">iuse::flu_vaccine()</a>, <a class="el" href="iuse_8cpp_source.html#l01002">iuse::flumed()</a>, <a class="el" href="iuse_8cpp_source.html#l01009">iuse::flusleep()</a>, <a class="el" href="iuse_8cpp_source.html#l06934">iuse::foodperson()</a>, <a class="el" href="iuse_8cpp_source.html#l06924">iuse::foodperson_voice()</a>, <a class="el" href="iuse_8cpp_source.html#l00665">iuse::fungicide()</a>, <a class="el" href="item__group_8h_source.html#l00357">Item_group::G_COLLECTION</a>, <a class="el" href="iuse_8cpp_source.html#l03972">iuse::gasmask()</a>, <a class="el" href="iuse_8cpp_source.html#l03959">iuse::gasmask_activate()</a>, <a class="el" href="iuse_8cpp_source.html#l03127">iuse::geiger()</a>, <a class="el" href="iuse_8cpp_source.html#l03174">iuse::geiger_active()</a>, <a class="el" href="iuse_8cpp_source.html#l03274">iuse::granade_act()</a>, <a class="el" href="iuse_8cpp_source.html#l03435">iuse::grenade_inc_act()</a>, <a class="el" href="iuse_8cpp_source.html#l05139">iuse::gun_repair()</a>, <a class="el" href="iuse_8cpp_source.html#l05194">iuse::gunmod_attach()</a>, <a class="el" href="iuse_8cpp_source.html#l04678">iuse::hacksaw()</a>, <a class="el" href="iuse_8cpp_source.html#l02709">iuse::hammer()</a>, <a class="el" href="iuse_8cpp_source.html#l04215">iuse::hand_crank()</a>, <a class="el" href="iuse_8cpp_source.html#l04901">iuse::heat_food()</a>, <a class="el" href="iuse_8cpp_source.html#l04893">iuse::heatpack()</a>, <a class="el" href="iuse_8cpp_source.html#l00478">iuse::honeycomb()</a>, <a class="el" href="iuse_8cpp_source.html#l04920">iuse::hotplate()</a>, <a class="el" href="iuse_8cpp_source.html#l04936">iuse::hotplate_atomic()</a>, <a class="el" href="iuse_8cpp_source.html#l01018">iuse::inhaler()</a>, <a class="el" href="item__factory_8cpp.html#afd234c462e7d4a933a264111a6d0c082">Item_spawn_data_EMPTY_GROUP</a>, <a class="el" href="iuse_8cpp_source.html#l03051">iuse::jackhammer()</a>, <a class="el" href="iuse_8cpp_source.html#l05051">iuse::jet_injector()</a>, <a class="el" href="iuse_8cpp_source.html#l04491">iuse::lumber()</a>, <a class="el" href="iuse_8cpp_source.html#l07870">iuse::lux_meter()</a>, <a class="el" href="item__factory_8h_source.html#l00283">m_template_groups</a>, <a class="el" href="iuse_8cpp_source.html#l02692">iuse::ma_manual()</a>, <a class="el" href="iuse_8cpp_source.html#l02295">iuse::mace()</a>, <a class="el" href="iuse_8cpp_source.html#l08450">iuse::magic_8_ball()</a>, <a class="el" href="iuse_8cpp_source.html#l02795">iuse::makemound()</a>, <a class="el" href="iuse_8cpp_source.html#l02339">iuse::manage_exosuit()</a>, <a class="el" href="iuse_8cpp_source.html#l01383">iuse::marloss()</a>, <a class="el" href="iuse_8cpp_source.html#l01412">iuse::marloss_gel()</a>, <a class="el" href="iuse_8cpp_source.html#l01395">iuse::marloss_seed()</a>, <a class="el" href="iuse_8cpp_source.html#l08471">iuse::measure_resonance()</a>, <a class="el" href="iuse_8cpp_source.html#l00929">iuse::meditate()</a>, <a class="el" href="iuse_8cpp_source.html#l00850">iuse::meth()</a>, <a class="el" href="iuse_8cpp_source.html#l03544">iuse::mininuke()</a>, <a class="el" href="iuse_8cpp_source.html#l03464">iuse::molotov_lit()</a>, <a class="el" href="iuse_8cpp_source.html#l04765">iuse::mop()</a>, <a class="el" href="iuse_8cpp_source.html#l03718">iuse::mp3()</a>, <a class="el" href="iuse_8cpp_source.html#l03816">iuse::mp3_deactivate()</a>, <a class="el" href="iuse_8cpp_source.html#l03808">iuse::mp3_on()</a>, <a class="el" href="iuse_8cpp_source.html#l07431">iuse::multicooker()</a>, <a class="el" href="iuse_8cpp_source.html#l07718">iuse::multicooker_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l01424">iuse::mycus()</a>, <a class="el" href="iuse_8cpp_source.html#l02631">iuse::noise_emitter_on()</a>, <a class="el" href="iuse_8cpp_source.html#l01033">iuse::oxygen_bottle()</a>, <a class="el" href="iuse_8cpp_source.html#l04631">iuse::oxytorch()</a>, <a class="el" href="iuse_8cpp_source.html#l02366">iuse::pack_cbm()</a>, <a class="el" href="iuse_8cpp_source.html#l02397">iuse::pack_item()</a>, <a class="el" href="iuse_8cpp_source.html#l01525">iuse::petfood()</a>, <a class="el" href="iuse_8cpp_source.html#l03065">iuse::pick_lock()</a>, <a class="el" href="iuse_8cpp_source.html#l03112">iuse::pickaxe()</a>, <a class="el" href="iuse_8cpp_source.html#l01108">iuse::plantblech()</a>, <a class="el" href="iuse_8cpp_source.html#l08402">iuse::play_game()</a>, <a class="el" href="iuse_8cpp_source.html#l00907">iuse::poison()</a>, <a class="el" href="iuse_8cpp_source.html#l04023">iuse::portable_game()</a>, <a class="el" href="iuse_8cpp_source.html#l03561">iuse::portal()</a>, <a class="el" href="iuse_8cpp_source.html#l00973">iuse::prozac()</a>, <a class="el" href="iuse_8cpp_source.html#l01164">iuse::purify_smart()</a>, <a class="el" href="iuse_8cpp_source.html#l05096">iuse::radglove()</a>, <a class="el" href="iuse_8cpp_source.html#l01637">iuse::radio_mod()</a>, <a class="el" href="iuse_8cpp_source.html#l02462">iuse::radio_off()</a>, <a class="el" href="iuse_8cpp_source.html#l02582">iuse::radio_on()</a>, <a class="el" href="iuse_8cpp_source.html#l02528">iuse::radio_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l06949">iuse::radiocar()</a>, <a class="el" href="iuse_8cpp_source.html#l07026">iuse::radiocaron()</a>, <a class="el" href="iuse_8cpp_source.html#l07111">iuse::radiocontrol()</a>, <a class="el" href="iuse_8cpp_source.html#l07092">iuse::radiocontrol_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l07318">iuse::remoteveh()</a>, <a class="el" href="iuse_8cpp_source.html#l07296">iuse::remoteveh_tick()</a>, <a class="el" href="iuse_8cpp_source.html#l01698">iuse::remove_all_mods()</a>, <a class="el" href="iuse_8cpp_source.html#l05319">iuse::robotcontrol()</a>, <a class="el" href="iuse_8cpp_source.html#l03839">iuse::rpgdie()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, <a class="el" href="iuse_8cpp_source.html#l00467">iuse::sewage()</a>, <a class="el" href="iuse_8cpp_source.html#l07851">iuse::sextant()</a>, <a class="el" href="iuse_8cpp_source.html#l03662">iuse::shocktonfa_off()</a>, <a class="el" href="iuse_8cpp_source.html#l03690">iuse::shocktonfa_on()</a>, <a class="el" href="iuse_8cpp_source.html#l02914">iuse::siphon()</a>, <a class="el" href="iuse_8cpp_source.html#l00544">iuse::smoking()</a>, <a class="el" href="iuse_8cpp_source.html#l03903">iuse::solarpack()</a>, <a class="el" href="iuse_8cpp_source.html#l03937">iuse::solarpack_off()</a>, <a class="el" href="iuse_8cpp_source.html#l04808">iuse::spray_can()</a>, <a class="el" href="iuse_8cpp_source.html#l05073">iuse::stimpack()</a>, <a class="el" href="iuse_8cpp_source.html#l08299">iuse::strong_antibiotic()</a>, <a class="el" href="iuse_8cpp_source.html#l05124">iuse::talking_doll()</a>, <a class="el" href="iuse_8cpp_source.html#l03574">iuse::tazer()</a>, <a class="el" href="iuse_8cpp_source.html#l03647">iuse::tazer2()</a>, <a class="el" href="iuse_8cpp_source.html#l03208">iuse::teleport()</a>, <a class="el" href="iuse_8cpp_source.html#l00948">iuse::thorazine()</a>, <a class="el" href="translation_8cpp_source.html#l00420">to_translation()</a>, <a class="el" href="iuse_8cpp_source.html#l05231">iuse::toolmod_attach()</a>, <a class="el" href="iuse_8cpp_source.html#l04948">iuse::towel()</a>, <a class="el" href="iuse_8cpp_source.html#l05021">iuse::unfold_generic()</a>, <a class="el" href="iuse_8cpp_source.html#l02352">iuse::unpack_item()</a>, <a class="el" href="iuse_8cpp_source.html#l04249">iuse::vibe()</a>, <a class="el" href="iuse_8cpp_source.html#l08879">iuse::voltmeter()</a>, <a class="el" href="iuse_8cpp_source.html#l04289">iuse::vortex()</a>, <a class="el" href="iuse_8cpp_source.html#l08134">iuse::wash_all_items()</a>, <a class="el" href="iuse_8cpp_source.html#l08114">iuse::wash_hard_items()</a>, <a class="el" href="iuse_8cpp_source.html#l08094">iuse::wash_soft_items()</a>, <a class="el" href="iuse_8cpp_source.html#l02426">iuse::water_purifier()</a>, <a class="el" href="iuse_8cpp_source.html#l08288">iuse::weak_antibiotic()</a>, <a class="el" href="iuse_8cpp_source.html#l07781">iuse::weather_tool()</a>, <a class="el" href="iuse_8cpp_source.html#l00810">iuse::weed_cake()</a>, and <a class="el" href="iuse_8cpp_source.html#l00484">iuse::xanax()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01635">Item_factory()</a>.</p>

</div>
</div>
<a id="a756815860b4e1aad7958f5b15f3210b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756815860b4e1aad7958f5b15f3210b1">&#9670;&nbsp;</a></span>load() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__bionic.html">islot_bionic</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03608">3608</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;{</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;bionic_id&quot;</span> ) ) {</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;bionic_id&quot;</span>, slot.<a class="code" href="structislot__bionic.html#a2181146d61a333d94ec990f6a017e2e8">id</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;id&quot;</span>, slot.<a class="code" href="structislot__bionic.html#a2181146d61a333d94ec990f6a017e2e8">id</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    }</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;difficulty&quot;</span>, slot.<a class="code" href="structislot__bionic.html#ad605efa5433b2babd68377b854514496">difficulty</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;is_upgrade&quot;</span>, slot.<a class="code" href="structislot__bionic.html#ad9a120bc689e66669157f1503b5ac1c7">is_upgrade</a> );</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160; </div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;installation_data&quot;</span>, slot.<a class="code" href="structislot__bionic.html#a93e7f9bf0f6de84ce4ef1a7a44b5137b">installation_data</a> );</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;}</div>
<div class="ttc" id="acreature_8h_html_a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792"><div class="ttname"><a href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">body_part_filter::strict</a></div><div class="ttdeci">@ strict</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ad8917f8c9b5062f264dfb4feda4feb98"><div class="ttname"><a href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a></div><div class="ttdeci">static void assign(const JsonObject &amp;jo, const std::string_view name, std::map&lt; gun_mode_id, gun_modifier_data &gt; &amp;mods)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00159">item_factory.cpp:159</a></div></div>
<div class="ttc" id="astructislot__bionic_html_a2181146d61a333d94ec990f6a017e2e8"><div class="ttname"><a href="structislot__bionic.html#a2181146d61a333d94ec990f6a017e2e8">islot_bionic::id</a></div><div class="ttdeci">bionic_id id</div><div class="ttdoc">Id of the bionic, see bionics.cpp for its usage.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01066">itype.h:1066</a></div></div>
<div class="ttc" id="astructislot__bionic_html_a93e7f9bf0f6de84ce4ef1a7a44b5137b"><div class="ttname"><a href="structislot__bionic.html#a93e7f9bf0f6de84ce4ef1a7a44b5137b">islot_bionic::installation_data</a></div><div class="ttdeci">itype_id installation_data</div><div class="ttdoc">Item with installation data that can be used to provide almost guaranteed successful install of corre...</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01075">itype.h:1075</a></div></div>
<div class="ttc" id="astructislot__bionic_html_ad605efa5433b2babd68377b854514496"><div class="ttname"><a href="structislot__bionic.html#ad605efa5433b2babd68377b854514496">islot_bionic::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdoc">Arbitrary difficulty scale, see bionics.cpp for its usage.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01062">itype.h:1062</a></div></div>
<div class="ttc" id="astructislot__bionic_html_ad9a120bc689e66669157f1503b5ac1c7"><div class="ttname"><a href="structislot__bionic.html#ad9a120bc689e66669157f1503b5ac1c7">islot_bionic::is_upgrade</a></div><div class="ttdeci">bool is_upgrade</div><div class="ttdoc">Whether this CBM is an upgrade of another.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01070">itype.h:1070</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l01062">islot_bionic::difficulty</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="itype_8h_source.html#l01066">islot_bionic::id</a>, <a class="el" href="itype_8h_source.html#l01075">islot_bionic::installation_data</a>, <a class="el" href="itype_8h_source.html#l01070">islot_bionic::is_upgrade</a>, and <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>.</p>

</div>
</div>
<a id="a52ee881c5599cb5b622e536b090f87d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52ee881c5599cb5b622e536b090f87d9">&#9670;&nbsp;</a></span>load() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__comestible.html">islot_comestible</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03275">3275</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;{</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160; </div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a> = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;relative&quot;</span> );</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> proportional = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;proportional&quot;</span> );</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.allow_omitted_members();</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    proportional.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160; </div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="comment">// !slot.comesttype.empty() for was_loaded - we don&#39;t have a proper was_loaded, but</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="comment">// if it&#39;s been loaded before, this should have a value. If it&#39;s not, we&#39;ll catch it later.</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, !slot.<a class="code" href="structislot__comestible.html#a1c8377aa26060ebc8c5a1c7c17567cef">comesttype</a>.empty(), <span class="stringliteral">&quot;comestible_type&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a1c8377aa26060ebc8c5a1c7c17567cef">comesttype</a> );</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;tool&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a2a9550614166bc74108225c00700d651">tool</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;charges&quot;</span>, slot.<a class="code" href="structislot__comestible.html#adeabb2a77d60418046b8793c940ca505">def_charges</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 1 );</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;quench&quot;</span>, slot.<a class="code" href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">quench</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;fun&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a5c4074d0e4da169307309a8033e932fa">fun</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;stim&quot;</span>, slot.<a class="code" href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">stim</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sleepiness_mod&quot;</span>, slot.<a class="code" href="structislot__comestible.html#ae639a11c4df8f98c9f0ddd5e5d6056ac">sleepiness_mod</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;healthy&quot;</span>, slot.<a class="code" href="structislot__comestible.html#aea71935dc37b7f711efb6f8d9ca5353d">healthy</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;parasites&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a27612b03ea67d70514178094dc2f285b">parasites</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;freezing_point&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a97b5ed18f2bfcafef0d5182de69e7868">freeze_point</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;spoils_in&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a993552f78902a64ac85b99d973d2acaf">spoils</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 1_hours );</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;cooks_like&quot;</span>, slot.<a class="code" href="structislot__comestible.html#aa6e3e8f3028df292d4dcb27e1724818a">cooks_like</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;smoking_result&quot;</span>, slot.<a class="code" href="structislot__comestible.html#ac6e8b1e155162975298976d220d5927a">smoking_result</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;petfood&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a4896a829f8a682f0887d1d98751d5048">petfood</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160; </div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> jsobj : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;contamination&quot;</span> ) ) {</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        slot.<a class="code" href="structislot__comestible.html#af16829f31a1d2c5a4a42a88ce92496c2">contamination</a>.emplace( <a class="code" href="type__id_8h.html#affe9d743c1ec4cbbb991c70437ac67ed">diseasetype_id</a>( jsobj.get_string( <span class="stringliteral">&quot;disease&quot;</span> ) ),</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;                                    jsobj.get_int( <span class="stringliteral">&quot;probability&quot;</span> ) );</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    }</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160; </div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;primary_material&quot;</span> ) ) {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        <a class="code" href="classstring__id.html">material_id</a> mat( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;primary_material&quot;</span> ) );</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        <span class="comment">// Overwrite the materials (set by copy-from)</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">materials</a>.clear();</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">materials</a>.emplace( mat, 1 );</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        <span class="comment">// Overwrite the materials (set by copy-from)</span></div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">materials</a>.clear();</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160; </div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;material&quot;</span> ) &amp;&amp; jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;material&quot;</span> ).<a class="code" href="classJsonArray.html#a62646db1d92b58b6a5e629e46f962c01">test_object</a>() ) {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> m : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> mat_id( m.get_string( <span class="stringliteral">&quot;type&quot;</span> ) );</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;                <span class="keywordtype">int</span> portion = m.get_int( <span class="stringliteral">&quot;portion&quot;</span>, 1 );</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">materials</a>.emplace( mat_id, portion );</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;            }</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;m : jo.<a class="code" href="classJsonObject.html#ad87be22ba01dc71a2d4930d33cf5d74c">get_tags</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">materials</a>.emplace( m, 1 );</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        }</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    }</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;monotony_penalty&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a16361ca226b5a14a285f37c2bf42bbcd">monotony_penalty</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;addiction_potential&quot;</span>, slot.<a class="code" href="structislot__comestible.html#af008576a6cbe22fe0fad44af4cddefdc">default_addict_potential</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;addiction_type&quot;</span> ) ) {</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.clear();</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;addiction_type&quot;</span> ) ) {</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            slot.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.emplace( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;addiction_type&quot;</span> ) ),</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;                                     slot.<a class="code" href="structislot__comestible.html#af008576a6cbe22fe0fad44af4cddefdc">default_addict_potential</a> );</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">//&quot;addiction_type&quot; is an array</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classJsonValue.html">JsonValue</a> jval : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;addiction_type&quot;</span> ) ) {</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                <span class="keywordflow">if</span>( jval.test_string() ) {</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;                    slot.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.emplace( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( jval.get_string() ), slot.<a class="code" href="structislot__comestible.html#af008576a6cbe22fe0fad44af4cddefdc">default_addict_potential</a> );</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                } <span class="keywordflow">else</span> { <span class="comment">//nested object with addiction + potential</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                    <a class="code" href="classJsonObject.html">JsonObject</a> jobj = jval.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                    slot.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a>.emplace( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( jobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;addiction&quot;</span> ) ),</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                                             jobj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;potential&quot;</span> ) );</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;        }</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;addiction_potential&quot;</span> ) ) {</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;        <span class="comment">// copy-from&#39;d while only changing the general potential, so assign new potential to all addictions</span></div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;const addiction_id, int&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a> : slot.<a class="code" href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">addictions</a> ) {</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;            <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.second = slot.<a class="code" href="structislot__comestible.html#af008576a6cbe22fe0fad44af4cddefdc">default_addict_potential</a>;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        }</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    }</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160; </div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <span class="keywordtype">bool</span> got_calories = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;calories&quot;</span> ) ) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <span class="comment">// The value here is in kcal, but is stored as simply calories</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a72a120ffe81a179edfe5fe3387024b22">calories</a> = 1000 * jo.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;calories&quot;</span> );</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        got_calories = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.has_member( <span class="stringliteral">&quot;calories&quot;</span> ) ) {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;        <span class="comment">// The value here is in kcal, but is stored as simply calories</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a72a120ffe81a179edfe5fe3387024b22">calories</a> += 1000 * <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.get_int( <span class="stringliteral">&quot;calories&quot;</span> );</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        got_calories = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160; </div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( proportional.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;calories&quot;</span> ) ) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;        <span class="comment">// The value here is in kcal, but is stored as simply calories</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a72a120ffe81a179edfe5fe3387024b22">calories</a> *= proportional.<a class="code" href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">get_float</a>( <span class="stringliteral">&quot;calories&quot;</span> );</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        got_calories = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;nutrition&quot;</span> ) ) {</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        <span class="comment">// The value here is in kcal, but is stored as simply calories</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a72a120ffe81a179edfe5fe3387024b22">calories</a> = jo.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;nutrition&quot;</span> ) * <a class="code" href="structislot__comestible.html#aecc91e5454fc8c79df0fe6535690f246">islot_comestible::kcal_per_nutr</a> *</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                                          1000;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    }</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160; </div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonValue.html">JsonValue</a> jv : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;consumption_effect_on_conditions&quot;</span> ) ) {</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a0cead51d294f00b5b9be3bdcb98ba030">consumption_eocs</a>.push_back( <a class="code" href="namespaceeffect__on__conditions.html#a0c307f57c4ae6165227a80222184bdca">effect_on_conditions::load_inline_eoc</a>( jv, src ) );</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    }</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160; </div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;nutrition&quot;</span> ) &amp;&amp; got_calories ) {</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;nutrition&quot;</span>, <span class="stringliteral">&quot;cannot specify both nutrition and calories&quot;</span> );</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    }</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160; </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <span class="comment">// any specification of vitamins suppresses use of material defaults @see Item_factory::finalize</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;vitamins&quot;</span> ) ) {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a2626c5bfc47ad9f288831f7c9e0ffe64">finalized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> pair : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;vitamins&quot;</span> ) ) {</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            <a class="code" href="classstring__id.html">vitamin_id</a> vit( pair.get_string( 0 ) );</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;            <span class="keywordflow">if</span>( pair.has_int( 1 ) ) {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a6d8708508acc0739218308fd7fbda778">set_vitamin</a>( vit, pair.get_int( 1 ) );</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                <a class="code" href="classunits_1_1quantity.html">vitamin_units::mass</a> val = <a class="code" href="units_8h.html#a560433ef8bf665847e7f3d380874465e">read_from_json_string</a>( pair[1], <a class="code" href="namespacevitamin__units.html#a4f248b716988b6241f9d348ad6abe909">vitamin_units::mass_units</a> );</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a6d8708508acc0739218308fd7fbda778">set_vitamin</a>( vit, val );</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            }</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160; </div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.has_array( <span class="stringliteral">&quot;vitamins&quot;</span> ) ) {</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> pair : <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.get_array( <span class="stringliteral">&quot;vitamins&quot;</span> ) ) {</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            <a class="code" href="classstring__id.html">vitamin_id</a> vit( pair.get_string( 0 ) );</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <span class="keywordflow">if</span>( pair.has_int( 1 ) ) {</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a94963b2f167a36a482b3cbf9eb26965a">add_vitamin</a>( vit, pair.get_int( 1 ) );</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;                <a class="code" href="classunits_1_1quantity.html">vitamin_units::mass</a> val = <a class="code" href="units_8h.html#a560433ef8bf665847e7f3d380874465e">read_from_json_string</a>( pair[1], <a class="code" href="namespacevitamin__units.html#a4f248b716988b6241f9d348ad6abe909">vitamin_units::mass_units</a> );</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;                slot.<a class="code" href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">default_nutrition</a>.<a class="code" href="structnutrients.html#a94963b2f167a36a482b3cbf9eb26965a">add_vitamin</a>( vit, val );</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            }</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        }</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    }</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;rot_spawn&quot;</span> ) ) {</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;        slot.<a class="code" href="structislot__comestible.html#a6c8e94119486b8d95ada79f334e40db8">rot_spawn</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4adcd89267470921c316111b454af6a02c">mongroup_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;rot_spawn&quot;</span> ) );</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    }</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;rot_spawn_chance&quot;</span>, slot.<a class="code" href="structislot__comestible.html#a05bbe585d97a715412285a5760538c3b">rot_spawn_chance</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160; </div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">cata_variant_type::addiction_id</a></div><div class="ttdeci">@ addiction_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4adcd89267470921c316111b454af6a02c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4adcd89267470921c316111b454af6a02c">cata_variant_type::mongroup_id</a></div><div class="ttdeci">@ mongroup_id</div></div>
<div class="ttc" id="aclassJsonArray_html_a62646db1d92b58b6a5e629e46f962c01"><div class="ttname"><a href="classJsonArray.html#a62646db1d92b58b6a5e629e46f962c01">JsonArray::test_object</a></div><div class="ttdeci">bool test_object() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00734">flexbuffer_json-inl.h:734</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a04b6ce7355b567646a587514fb811c68"><div class="ttname"><a href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">JsonObject::throw_error_at</a></div><div class="ttdeci">void throw_error_at(std::string_view member, const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00358">flexbuffer_json.cpp:358</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a7d82ab1c2da0cb67c6315b86104c3c84"><div class="ttname"><a href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">JsonObject::get_float</a></div><div class="ttdeci">double get_float(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00845">flexbuffer_json-inl.h:845</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ad87be22ba01dc71a2d4930d33cf5d74c"><div class="ttname"><a href="classJsonObject.html#ad87be22ba01dc71a2d4930d33cf5d74c">JsonObject::get_tags</a></div><div class="ttdeci">Res get_tags(std::string_view name) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01069">flexbuffer_json-inl.h:1069</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00662">flexbuffer_json.h:662</a></div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">kb_menu_status::add</a></div><div class="ttdeci">@ add</div></div>
<div class="ttc" id="anamespacecoords_html_ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487"><div class="ttname"><a href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">coords::origin::relative</a></div><div class="ttdeci">@ relative</div></div>
<div class="ttc" id="anamespaceeffect__on__conditions_html_a0c307f57c4ae6165227a80222184bdca"><div class="ttname"><a href="namespaceeffect__on__conditions.html#a0c307f57c4ae6165227a80222184bdca">effect_on_conditions::load_inline_eoc</a></div><div class="ttdeci">effect_on_condition_id load_inline_eoc(const JsonValue &amp;jv, const std::string &amp;src)</div><div class="ttdoc">Loads an inline eoc.</div><div class="ttdef"><b>Definition:</b> <a href="effect__on__condition_8cpp_source.html#l00119">effect_on_condition.cpp:119</a></div></div>
<div class="ttc" id="anamespacevitamin__units_html_a4f248b716988b6241f9d348ad6abe909"><div class="ttname"><a href="namespacevitamin__units.html#a4f248b716988b6241f9d348ad6abe909">vitamin_units::mass_units</a></div><div class="ttdeci">const std::vector&lt; std::pair&lt; std::string, mass &gt; &gt; mass_units</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00024">stomach.h:24</a></div></div>
<div class="ttc" id="aovermap_8cpp_html_a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95"><div class="ttname"><a href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">join_type::mandatory</a></div><div class="ttdeci">@ mandatory</div></div>
<div class="ttc" id="astructislot__comestible_html_a05bbe585d97a715412285a5760538c3b"><div class="ttname"><a href="structislot__comestible.html#a05bbe585d97a715412285a5760538c3b">islot_comestible::rot_spawn_chance</a></div><div class="ttdeci">int rot_spawn_chance</div><div class="ttdoc">Chance the above monster group spawns.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00201">itype.h:201</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a0cead51d294f00b5b9be3bdcb98ba030"><div class="ttname"><a href="structislot__comestible.html#a0cead51d294f00b5b9be3bdcb98ba030">islot_comestible::consumption_eocs</a></div><div class="ttdeci">std::vector&lt; effect_on_condition_id &gt; consumption_eocs</div><div class="ttdoc">effect on conditions to apply on consumption</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00171">itype.h:171</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a16361ca226b5a14a285f37c2bf42bbcd"><div class="ttname"><a href="structislot__comestible.html#a16361ca226b5a14a285f37c2bf42bbcd">islot_comestible::monotony_penalty</a></div><div class="ttdeci">int monotony_penalty</div><div class="ttdoc">A penalty applied to fun for every time this food has been eaten in the last 48 hours.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00184">itype.h:184</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a1c8377aa26060ebc8c5a1c7c17567cef"><div class="ttname"><a href="structislot__comestible.html#a1c8377aa26060ebc8c5a1c7c17567cef">islot_comestible::comesttype</a></div><div class="ttdeci">std::string comesttype</div><div class="ttdoc">subtype, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00125">itype.h:125</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a27612b03ea67d70514178094dc2f285b"><div class="ttname"><a href="structislot__comestible.html#a27612b03ea67d70514178094dc2f285b">islot_comestible::parasites</a></div><div class="ttdeci">int parasites</div><div class="ttdoc">chance (odds) of becoming parasitised when eating (zero if never occurs)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00162">itype.h:162</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a2a9550614166bc74108225c00700d651"><div class="ttname"><a href="structislot__comestible.html#a2a9550614166bc74108225c00700d651">islot_comestible::tool</a></div><div class="ttdeci">itype_id tool</div><div class="ttdoc">tool needed to consume (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00128">itype.h:128</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a4896a829f8a682f0887d1d98751d5048"><div class="ttname"><a href="structislot__comestible.html#a4896a829f8a682f0887d1d98751d5048">islot_comestible::petfood</a></div><div class="ttdeci">std::set&lt; std::string &gt; petfood</div><div class="ttdoc">pet food category</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00168">itype.h:168</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a5c4074d0e4da169307309a8033e932fa"><div class="ttname"><a href="structislot__comestible.html#a5c4074d0e4da169307309a8033e932fa">islot_comestible::fun</a></div><div class="ttdeci">int fun</div><div class="ttdoc">effect on morale when consuming</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00205">itype.h:205</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a5cc5c5cdb8cb4246ce4978361dac2fe3"><div class="ttname"><a href="structislot__comestible.html#a5cc5c5cdb8cb4246ce4978361dac2fe3">islot_comestible::addictions</a></div><div class="ttdeci">std::map&lt; addiction_id, int &gt; addictions</div><div class="ttdoc">list of addictions and their potential</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00144">itype.h:144</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a6c8e94119486b8d95ada79f334e40db8"><div class="ttname"><a href="structislot__comestible.html#a6c8e94119486b8d95ada79f334e40db8">islot_comestible::rot_spawn</a></div><div class="ttdeci">mongroup_id rot_spawn</div><div class="ttdoc">The monster group that is drawn from when the item rots away.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00198">itype.h:198</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a88367b34fec3f07315a6ea0862b6904e"><div class="ttname"><a href="structislot__comestible.html#a88367b34fec3f07315a6ea0862b6904e">islot_comestible::materials</a></div><div class="ttdeci">std::map&lt; material_id, int &gt; materials</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00177">itype.h:177</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a8d2d5bc1943adb27ea672d51011711c2"><div class="ttname"><a href="structislot__comestible.html#a8d2d5bc1943adb27ea672d51011711c2">islot_comestible::default_nutrition</a></div><div class="ttdeci">nutrients default_nutrition</div><div class="ttdoc">Nutrition values to use for this type when they aren't calculated from components.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00138">itype.h:138</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a97b5ed18f2bfcafef0d5182de69e7868"><div class="ttname"><a href="structislot__comestible.html#a97b5ed18f2bfcafef0d5182de69e7868">islot_comestible::freeze_point</a></div><div class="ttdeci">float freeze_point</div><div class="ttdoc">freezing point in degrees celsius, below this temperature item can freeze</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00165">itype.h:165</a></div></div>
<div class="ttc" id="astructislot__comestible_html_a993552f78902a64ac85b99d973d2acaf"><div class="ttname"><a href="structislot__comestible.html#a993552f78902a64ac85b99d973d2acaf">islot_comestible::spoils</a></div><div class="ttdeci">time_duration spoils</div><div class="ttdoc">Time until becomes rotten at standard temperature, or zero if never spoils.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00141">itype.h:141</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aa6e3e8f3028df292d4dcb27e1724818a"><div class="ttname"><a href="structislot__comestible.html#aa6e3e8f3028df292d4dcb27e1724818a">islot_comestible::cooks_like</a></div><div class="ttdeci">itype_id cooks_like</div><div class="ttdoc">Reference to other item that replaces this one as a component in recipe results.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00153">itype.h:153</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aa8ccc76e6c3389ee17cbb14a7625bd39"><div class="ttname"><a href="structislot__comestible.html#aa8ccc76e6c3389ee17cbb14a7625bd39">islot_comestible::stim</a></div><div class="ttdeci">int stim</div><div class="ttdoc">stimulant effect</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00147">itype.h:147</a></div></div>
<div class="ttc" id="astructislot__comestible_html_ac6e8b1e155162975298976d220d5927a"><div class="ttname"><a href="structislot__comestible.html#ac6e8b1e155162975298976d220d5927a">islot_comestible::smoking_result</a></div><div class="ttdeci">itype_id smoking_result</div><div class="ttdoc">Reference to item that will be received after smoking current item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00156">itype.h:156</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aca5554772c9e19eb88c6e50b808b5b64"><div class="ttname"><a href="structislot__comestible.html#aca5554772c9e19eb88c6e50b808b5b64">islot_comestible::quench</a></div><div class="ttdeci">int quench</div><div class="ttdoc">effect on character thirst (may be negative)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00134">itype.h:134</a></div></div>
<div class="ttc" id="astructislot__comestible_html_adeabb2a77d60418046b8793c940ca505"><div class="ttname"><a href="structislot__comestible.html#adeabb2a77d60418046b8793c940ca505">islot_comestible::def_charges</a></div><div class="ttdeci">int def_charges</div><div class="ttdoc">Defaults # of charges (drugs, loaf of bread? etc)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00131">itype.h:131</a></div></div>
<div class="ttc" id="astructislot__comestible_html_ae639a11c4df8f98c9f0ddd5e5d6056ac"><div class="ttname"><a href="structislot__comestible.html#ae639a11c4df8f98c9f0ddd5e5d6056ac">islot_comestible::sleepiness_mod</a></div><div class="ttdeci">int sleepiness_mod</div><div class="ttdoc">sleepiness altering effect</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00150">itype.h:150</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aea71935dc37b7f711efb6f8d9ca5353d"><div class="ttname"><a href="structislot__comestible.html#aea71935dc37b7f711efb6f8d9ca5353d">islot_comestible::healthy</a></div><div class="ttdeci">int healthy</div><div class="ttdoc">TODO: add documentation.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00159">itype.h:159</a></div></div>
<div class="ttc" id="astructislot__comestible_html_aecc91e5454fc8c79df0fe6535690f246"><div class="ttname"><a href="structislot__comestible.html#aecc91e5454fc8c79df0fe6535690f246">islot_comestible::kcal_per_nutr</a></div><div class="ttdeci">static constexpr float kcal_per_nutr</div><div class="ttdoc">1 nutr ~= 8.7kcal (1 nutr/5min = 288 nutr/day at 2500kcal/day)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00187">itype.h:187</a></div></div>
<div class="ttc" id="astructislot__comestible_html_af008576a6cbe22fe0fad44af4cddefdc"><div class="ttname"><a href="structislot__comestible.html#af008576a6cbe22fe0fad44af4cddefdc">islot_comestible::default_addict_potential</a></div><div class="ttdeci">int default_addict_potential</div><div class="ttdoc">addiction potential to use when an addiction was given without one</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00208">itype.h:208</a></div></div>
<div class="ttc" id="astructislot__comestible_html_af16829f31a1d2c5a4a42a88ce92496c2"><div class="ttname"><a href="structislot__comestible.html#af16829f31a1d2c5a4a42a88ce92496c2">islot_comestible::contamination</a></div><div class="ttdeci">std::map&lt; diseasetype_id, int &gt; contamination</div><div class="ttdoc">List of diseases carried by this comestible and their associated probability.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00174">itype.h:174</a></div></div>
<div class="ttc" id="astructnutrients_html_a2626c5bfc47ad9f288831f7c9e0ffe64"><div class="ttname"><a href="structnutrients.html#a2626c5bfc47ad9f288831f7c9e0ffe64">nutrients::finalized</a></div><div class="ttdeci">bool finalized</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00089">stomach.h:89</a></div></div>
<div class="ttc" id="astructnutrients_html_a6d8708508acc0739218308fd7fbda778"><div class="ttname"><a href="structnutrients.html#a6d8708508acc0739218308fd7fbda778">nutrients::set_vitamin</a></div><div class="ttdeci">void set_vitamin(const vitamin_id &amp;, vitamin_units::mass mass)</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00061">stomach.cpp:61</a></div></div>
<div class="ttc" id="astructnutrients_html_a72a120ffe81a179edfe5fe3387024b22"><div class="ttname"><a href="structnutrients.html#a72a120ffe81a179edfe5fe3387024b22">nutrients::calories</a></div><div class="ttdeci">int64_t calories</div><div class="ttdoc">amount of calories (1/1000s of kcal) this food has</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00038">stomach.h:38</a></div></div>
<div class="ttc" id="astructnutrients_html_a94963b2f167a36a482b3cbf9eb26965a"><div class="ttname"><a href="structnutrients.html#a94963b2f167a36a482b3cbf9eb26965a">nutrients::add_vitamin</a></div><div class="ttdeci">void add_vitamin(const vitamin_id &amp;, vitamin_units::mass mass)</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00070">stomach.cpp:70</a></div></div>
<div class="ttc" id="atype__id_8h_html_affe9d743c1ec4cbbb991c70437ac67ed"><div class="ttname"><a href="type__id_8h.html#affe9d743c1ec4cbbb991c70437ac67ed">diseasetype_id</a></div><div class="ttdeci">string_id&lt; disease_type &gt; diseasetype_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00077">type_id.h:77</a></div></div>
<div class="ttc" id="aunits_8h_html_a560433ef8bf665847e7f3d380874465e"><div class="ttname"><a href="units_8h.html#a560433ef8bf665847e7f3d380874465e">read_from_json_string</a></div><div class="ttdeci">T read_from_json_string(const JsonValue &amp;jv, const std::vector&lt; std::pair&lt; std::string, T &gt;&gt; &amp;units)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l01271">units.h:1271</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>, <a class="el" href="stomach_8cpp_source.html#l00070">nutrients::add_vitamin()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>, <a class="el" href="itype_8h_source.html#l00144">islot_comestible::addictions</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="stomach_8h_source.html#l00038">nutrients::calories</a>, <a class="el" href="itype_8h_source.html#l00125">islot_comestible::comesttype</a>, <a class="el" href="itype_8h_source.html#l00171">islot_comestible::consumption_eocs</a>, <a class="el" href="itype_8h_source.html#l00174">islot_comestible::contamination</a>, <a class="el" href="itype_8h_source.html#l00153">islot_comestible::cooks_like</a>, <a class="el" href="itype_8h_source.html#l00131">islot_comestible::def_charges</a>, <a class="el" href="itype_8h_source.html#l00208">islot_comestible::default_addict_potential</a>, <a class="el" href="itype_8h_source.html#l00138">islot_comestible::default_nutrition</a>, <a class="el" href="stomach_8h_source.html#l00089">nutrients::finalized</a>, <a class="el" href="itype_8h_source.html#l00165">islot_comestible::freeze_point</a>, <a class="el" href="itype_8h_source.html#l00205">islot_comestible::fun</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00845">JsonObject::get_float()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01069">JsonObject::get_tags()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="itype_8h_source.html#l00159">islot_comestible::healthy</a>, <a class="el" href="itype_8h_source.html#l00187">islot_comestible::kcal_per_nutr</a>, <a class="el" href="effect__on__condition_8cpp_source.html#l00119">effect_on_conditions::load_inline_eoc()</a>, <a class="el" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>, <a class="el" href="stomach_8h_source.html#l00024">vitamin_units::mass_units</a>, <a class="el" href="itype_8h_source.html#l00177">islot_comestible::materials</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4adcd89267470921c316111b454af6a02c">mongroup_id</a>, <a class="el" href="itype_8h_source.html#l00184">islot_comestible::monotony_penalty</a>, <a class="el" href="itype_8h_source.html#l00162">islot_comestible::parasites</a>, <a class="el" href="itype_8h_source.html#l00168">islot_comestible::petfood</a>, <a class="el" href="itype_8h_source.html#l00134">islot_comestible::quench</a>, <a class="el" href="units_8h_source.html#l01271">read_from_json_string()</a>, <a class="el" href="itype_8h_source.html#l00198">islot_comestible::rot_spawn</a>, <a class="el" href="itype_8h_source.html#l00201">islot_comestible::rot_spawn_chance</a>, <a class="el" href="stomach_8cpp_source.html#l00061">nutrients::set_vitamin()</a>, <a class="el" href="itype_8h_source.html#l00150">islot_comestible::sleepiness_mod</a>, <a class="el" href="itype_8h_source.html#l00156">islot_comestible::smoking_result</a>, <a class="el" href="itype_8h_source.html#l00141">islot_comestible::spoils</a>, <a class="el" href="itype_8h_source.html#l00147">islot_comestible::stim</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00734">JsonArray::test_object()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, and <a class="el" href="itype_8h_source.html#l00128">islot_comestible::tool</a>.</p>

</div>
</div>
<a id="aabc9fff908ac8cece2d22241445dc8a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc9fff908ac8cece2d22241445dc8a9">&#9670;&nbsp;</a></span>load() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__gun.html">islot_gun</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02804">2804</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;{</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;skill&quot;</span>, slot.<a class="code" href="structislot__gun.html#a544f0cb6bc9627268d120be64d70054e">skill_used</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo&quot;</span>, slot.<a class="code" href="structislot__gun.html#ab57c57baec7410ed509e4fee5120fecf">ammo</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;range&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#af73392bcb456d04c3fdf1a413b6b3a9e">range</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <span class="comment">// Damage instance assign reader handles pierce</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ranged_damage&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>,</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            <a class="code" href="structdamage__instance.html">damage_instance</a>( <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">damage_type_id::NULL_ID</a>(), -20, -20, -20, -20 ) );</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;dispersion&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">dispersion</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sight_dispersion&quot;</span>, slot.<a class="code" href="structislot__gun.html#ae35086af4a0c6200e6e05c2c00d3719e">sight_dispersion</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> ) );</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;recoil&quot;</span>, slot.<a class="code" href="structislot__gun.html#ade59d069f3f719126fb885c6d61c4e3b">recoil</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;handling&quot;</span>, slot.<a class="code" href="structislot__gun.html#a815bf7350cfb03b311b04e3fb4f182c9">handling</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;durability&quot;</span>, slot.<a class="code" href="structislot__gun.html#a40255e8d661dc99204ed70dbe6013a02">durability</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0, 10 );</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;loudness&quot;</span>, slot.<a class="code" href="structislot__gun.html#a03b65c9be10a9ade4b7c84b24b609c9c">loudness</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;clip_size&quot;</span>, slot.<a class="code" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reload&quot;</span>, slot.<a class="code" href="structislot__gun.html#acedd47c3f7557f9b7b839af476c5989e">reload_time</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reload_noise&quot;</span>, slot.<a class="code" href="structislot__gun.html#afa4de5f0cb5afc766b45c7fa8484abbe">reload_noise</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reload_noise_volume&quot;</span>, slot.<a class="code" href="structislot__gun.html#af061d17935624ae9c2404fa6050dd658">reload_noise_volume</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;barrel_volume&quot;</span>, slot.<a class="code" href="structislot__gun.html#af5ea05c872246d24fed857e867bf88b0">barrel_volume</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_ml );</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;barrel_length&quot;</span>, slot.<a class="code" href="structislot__gun.html#ada95bc1579230f0cd02ccd5cfaeca2f5">barrel_length</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_mm );</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;built_in_mods&quot;</span>, slot.<a class="code" href="structislot__gun.html#a7935d9d8bac12aee90f3b36c7130ee8d">built_in_mods</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;default_mods&quot;</span>, slot.<a class="code" href="structislot__gun.html#a0e822d62253abf001dd4018374a98e40">default_mods</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;energy_drain&quot;</span>, slot.<a class="code" href="structislot__gun.html#a1623b8cc62aa3ecf7e0f8b9428e71156">energy_drain</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_kJ );</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;blackpowder_tolerance&quot;</span>, slot.<a class="code" href="structislot__gun.html#a014b797e92e543ea47be93a1d6771a90">blackpowder_tolerance</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_cycle_recoil&quot;</span>, slot.<a class="code" href="structislot__gun.html#a68eca15622f086d544820aabcb2a865a">min_cycle_recoil</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_effects&quot;</span>, slot.<a class="code" href="structislot__gun.html#a92ac42f341bef419e93537e58452cc74">ammo_effects</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_to_fire&quot;</span>, slot.<a class="code" href="structislot__gun.html#a1aeae9f77de0ba1ac7e73db1b050aa93">ammo_to_fire</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;heat_per_shot&quot;</span>, slot.<a class="code" href="structislot__gun.html#a25ca55cb76e90794dc8ac200c8baf211">heat_per_shot</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0.0 );</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;cooling_value&quot;</span>, slot.<a class="code" href="structislot__gun.html#a2dab58d1ca33c9221bb4f30fc0b17edb">cooling_value</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0.0 );</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;overheat_threshold&quot;</span>, slot.<a class="code" href="structislot__gun.html#ae11a6e126acb106ecbc74000e0ab37ad">overheat_threshold</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, -1.0 );</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160; </div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;valid_mod_locations&quot;</span> ) ) {</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        slot.<a class="code" href="structislot__gun.html#acae6c7b0619e281370014c6fb3ea1f54">valid_mod_locations</a>.clear();</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;valid_mod_locations&quot;</span> ) ) {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            slot.<a class="code" href="structislot__gun.html#acae6c7b0619e281370014c6fb3ea1f54">valid_mod_locations</a>.emplace( <a class="code" href="classgunmod__location.html">gunmod_location</a>( curr.get_string( 0 ) ),</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                                              curr.get_int( 1 ) );</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;modes&quot;</span>, slot.<a class="code" href="structislot__gun.html#a2d29bbe1ed9f259a916d19764646cfa2">modes</a> );</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;hurt_part_when_fired&quot;</span>, slot.<a class="code" href="structislot__gun.html#a7c8efa3250a559891c258d4a10cb2a43">hurt_part_when_fired</a> );</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;}</div>
<div class="ttc" id="aclassgunmod__location_html"><div class="ttname"><a href="classgunmod__location.html">gunmod_location</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00070">itype.h:71</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a497cd4533098e79f14f8a97fcec6ca1a"><div class="ttname"><a href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">common_ranged_data::dispersion</a></div><div class="ttdeci">int dispersion</div><div class="ttdoc">Dispersion &quot;bonus&quot; from gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00624">itype.h:624</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a94254f1acb94261bb47c4b7aaa3b0c89"><div class="ttname"><a href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">common_ranged_data::damage</a></div><div class="ttdeci">damage_instance damage</div><div class="ttdoc">Damage, armor piercing and multipliers for each.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00612">itype.h:612</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_af73392bcb456d04c3fdf1a413b6b3a9e"><div class="ttname"><a href="structcommon__ranged__data.html#af73392bcb456d04c3fdf1a413b6b3a9e">common_ranged_data::range</a></div><div class="ttdeci">int range</div><div class="ttdoc">Range bonus from gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00616">itype.h:616</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00132">damage.h:132</a></div></div>
<div class="ttc" id="astructislot__gun_html_a014b797e92e543ea47be93a1d6771a90"><div class="ttname"><a href="structislot__gun.html#a014b797e92e543ea47be93a1d6771a90">islot_gun::blackpowder_tolerance</a></div><div class="ttdeci">int blackpowder_tolerance</div><div class="ttdoc">One in X chance for gun to require major cleanup after firing blackpowder shot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00729">itype.h:729</a></div></div>
<div class="ttc" id="astructislot__gun_html_a03b65c9be10a9ade4b7c84b24b609c9c"><div class="ttname"><a href="structislot__gun.html#a03b65c9be10a9ade4b7c84b24b609c9c">islot_gun::loudness</a></div><div class="ttdeci">int loudness</div><div class="ttdoc">Modifies base loudness as provided by the currently loaded ammo.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00720">itype.h:720</a></div></div>
<div class="ttc" id="astructislot__gun_html_a0e822d62253abf001dd4018374a98e40"><div class="ttname"><a href="structislot__gun.html#a0e822d62253abf001dd4018374a98e40">islot_gun::default_mods</a></div><div class="ttdeci">std::set&lt; itype_id &gt; default_mods</div><div class="ttdoc">Default mods, string is id of mod.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00756">itype.h:756</a></div></div>
<div class="ttc" id="astructislot__gun_html_a1623b8cc62aa3ecf7e0f8b9428e71156"><div class="ttname"><a href="structislot__gun.html#a1623b8cc62aa3ecf7e0f8b9428e71156">islot_gun::energy_drain</a></div><div class="ttdeci">units::energy energy_drain</div><div class="ttdoc">If this uses electric energy, how much (per shot).</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00725">itype.h:725</a></div></div>
<div class="ttc" id="astructislot__gun_html_a1aeae9f77de0ba1ac7e73db1b050aa93"><div class="ttname"><a href="structislot__gun.html#a1aeae9f77de0ba1ac7e73db1b050aa93">islot_gun::ammo_to_fire</a></div><div class="ttdeci">int ammo_to_fire</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00770">itype.h:770</a></div></div>
<div class="ttc" id="astructislot__gun_html_a25ca55cb76e90794dc8ac200c8baf211"><div class="ttname"><a href="structislot__gun.html#a25ca55cb76e90794dc8ac200c8baf211">islot_gun::heat_per_shot</a></div><div class="ttdeci">double heat_per_shot</div><div class="ttdoc">Used only in overheat-based guns.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00781">itype.h:781</a></div></div>
<div class="ttc" id="astructislot__gun_html_a2d29bbe1ed9f259a916d19764646cfa2"><div class="ttname"><a href="structislot__gun.html#a2d29bbe1ed9f259a916d19764646cfa2">islot_gun::modes</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_modifier_data &gt; modes</div><div class="ttdoc">Firing modes are supported by the gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00759">itype.h:759</a></div></div>
<div class="ttc" id="astructislot__gun_html_a2dab58d1ca33c9221bb4f30fc0b17edb"><div class="ttname"><a href="structislot__gun.html#a2dab58d1ca33c9221bb4f30fc0b17edb">islot_gun::cooling_value</a></div><div class="ttdeci">double cooling_value</div><div class="ttdoc">The amount by which the item's overheat value is reduced every turn.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00776">itype.h:776</a></div></div>
<div class="ttc" id="astructislot__gun_html_a40255e8d661dc99204ed70dbe6013a02"><div class="ttname"><a href="structislot__gun.html#a40255e8d661dc99204ed70dbe6013a02">islot_gun::durability</a></div><div class="ttdeci">int durability</div><div class="ttdoc">Gun durability, affects gun being damaged during shooting.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00698">itype.h:698</a></div></div>
<div class="ttc" id="astructislot__gun_html_a544f0cb6bc9627268d120be64d70054e"><div class="ttname"><a href="structislot__gun.html#a544f0cb6bc9627268d120be64d70054e">islot_gun::skill_used</a></div><div class="ttdeci">skill_id skill_used</div><div class="ttdoc">What skill this gun uses.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00690">itype.h:690</a></div></div>
<div class="ttc" id="astructislot__gun_html_a5a7e4998071d2cd8f7ecd9504003968b"><div class="ttname"><a href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">islot_gun::clip</a></div><div class="ttdeci">int clip</div><div class="ttdoc">For guns with an integral magazine what is the capacity?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00702">itype.h:702</a></div></div>
<div class="ttc" id="astructislot__gun_html_a68eca15622f086d544820aabcb2a865a"><div class="ttname"><a href="structislot__gun.html#a68eca15622f086d544820aabcb2a865a">islot_gun::min_cycle_recoil</a></div><div class="ttdeci">int min_cycle_recoil</div><div class="ttdoc">Minimum ammo recoil for gun to be able to fire more than once per attack.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00733">itype.h:733</a></div></div>
<div class="ttc" id="astructislot__gun_html_a7935d9d8bac12aee90f3b36c7130ee8d"><div class="ttname"><a href="structislot__gun.html#a7935d9d8bac12aee90f3b36c7130ee8d">islot_gun::built_in_mods</a></div><div class="ttdeci">std::set&lt; itype_id &gt; built_in_mods</div><div class="ttdoc">Built in mods.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00752">itype.h:752</a></div></div>
<div class="ttc" id="astructislot__gun_html_a7c8efa3250a559891c258d4a10cb2a43"><div class="ttname"><a href="structislot__gun.html#a7c8efa3250a559891c258d4a10cb2a43">islot_gun::hurt_part_when_fired</a></div><div class="ttdeci">std::map&lt; bodypart_str_id, int &gt; hurt_part_when_fired</div><div class="ttdoc">Used for the skullgun cbm.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00795">itype.h:795</a></div></div>
<div class="ttc" id="astructislot__gun_html_a815bf7350cfb03b311b04e3fb4f182c9"><div class="ttname"><a href="structislot__gun.html#a815bf7350cfb03b311b04e3fb4f182c9">islot_gun::handling</a></div><div class="ttdeci">int handling</div><div class="ttdoc">How easy is control of recoil? If unset value automatically derived from weapon type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00762">itype.h:762</a></div></div>
<div class="ttc" id="astructislot__gun_html_a92ac42f341bef419e93537e58452cc74"><div class="ttname"><a href="structislot__gun.html#a92ac42f341bef419e93537e58452cc74">islot_gun::ammo_effects</a></div><div class="ttdeci">std::set&lt; std::string &gt; ammo_effects</div><div class="ttdoc">Effects that are applied to the ammo when fired.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00742">itype.h:742</a></div></div>
<div class="ttc" id="astructislot__gun_html_ab57c57baec7410ed509e4fee5120fecf"><div class="ttname"><a href="structislot__gun.html#ab57c57baec7410ed509e4fee5120fecf">islot_gun::ammo</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo</div><div class="ttdoc">What type of ammo this gun uses.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00694">itype.h:694</a></div></div>
<div class="ttc" id="astructislot__gun_html_acae6c7b0619e281370014c6fb3ea1f54"><div class="ttname"><a href="structislot__gun.html#acae6c7b0619e281370014c6fb3ea1f54">islot_gun::valid_mod_locations</a></div><div class="ttdeci">std::map&lt; gunmod_location, int &gt; valid_mod_locations</div><div class="ttdoc">Location for gun mods.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00748">itype.h:748</a></div></div>
<div class="ttc" id="astructislot__gun_html_acedd47c3f7557f9b7b839af476c5989e"><div class="ttname"><a href="structislot__gun.html#acedd47c3f7557f9b7b839af476c5989e">islot_gun::reload_time</a></div><div class="ttdeci">int reload_time</div><div class="ttdoc">Reload time, in moves.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00706">itype.h:706</a></div></div>
<div class="ttc" id="astructislot__gun_html_ada95bc1579230f0cd02ccd5cfaeca2f5"><div class="ttname"><a href="structislot__gun.html#ada95bc1579230f0cd02ccd5cfaeca2f5">islot_gun::barrel_length</a></div><div class="ttdeci">units::length barrel_length</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00738">itype.h:738</a></div></div>
<div class="ttc" id="astructislot__gun_html_ade59d069f3f719126fb885c6d61c4e3b"><div class="ttname"><a href="structislot__gun.html#ade59d069f3f719126fb885c6d61c4e3b">islot_gun::recoil</a></div><div class="ttdeci">int recoil</div><div class="ttdoc">Additional recoil applied per shot before effects of handling are considered.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00768">itype.h:768</a></div></div>
<div class="ttc" id="astructislot__gun_html_ae11a6e126acb106ecbc74000e0ab37ad"><div class="ttname"><a href="structislot__gun.html#ae11a6e126acb106ecbc74000e0ab37ad">islot_gun::overheat_threshold</a></div><div class="ttdeci">double overheat_threshold</div><div class="ttdoc">Used in overheat-based guns.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00788">itype.h:788</a></div></div>
<div class="ttc" id="astructislot__gun_html_ae35086af4a0c6200e6e05c2c00d3719e"><div class="ttname"><a href="structislot__gun.html#ae35086af4a0c6200e6e05c2c00d3719e">islot_gun::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion</div><div class="ttdoc">Maximum aim achievable using base weapon sights.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00717">itype.h:717</a></div></div>
<div class="ttc" id="astructislot__gun_html_af061d17935624ae9c2404fa6050dd658"><div class="ttname"><a href="structislot__gun.html#af061d17935624ae9c2404fa6050dd658">islot_gun::reload_noise_volume</a></div><div class="ttdeci">int reload_noise_volume</div><div class="ttdoc">Volume of the noise made when reloading this weapon.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00714">itype.h:714</a></div></div>
<div class="ttc" id="astructislot__gun_html_af5ea05c872246d24fed857e867bf88b0"><div class="ttname"><a href="structislot__gun.html#af5ea05c872246d24fed857e867bf88b0">islot_gun::barrel_volume</a></div><div class="ttdeci">units::volume barrel_volume</div><div class="ttdoc">Length of gun barrel, if positive allows sawing down of the barrel.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00737">itype.h:737</a></div></div>
<div class="ttc" id="astructislot__gun_html_afa4de5f0cb5afc766b45c7fa8484abbe"><div class="ttname"><a href="structislot__gun.html#afa4de5f0cb5afc766b45c7fa8484abbe">islot_gun::reload_noise</a></div><div class="ttdeci">translation reload_noise</div><div class="ttdoc">Noise displayed when reloading the weapon.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00710">itype.h:710</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l00694">islot_gun::ammo</a>, <a class="el" href="itype_8h_source.html#l00742">islot_gun::ammo_effects</a>, <a class="el" href="itype_8h_source.html#l00770">islot_gun::ammo_to_fire</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l00738">islot_gun::barrel_length</a>, <a class="el" href="itype_8h_source.html#l00737">islot_gun::barrel_volume</a>, <a class="el" href="itype_8h_source.html#l00729">islot_gun::blackpowder_tolerance</a>, <a class="el" href="itype_8h_source.html#l00752">islot_gun::built_in_mods</a>, <a class="el" href="itype_8h_source.html#l00702">islot_gun::clip</a>, <a class="el" href="itype_8h_source.html#l00776">islot_gun::cooling_value</a>, <a class="el" href="itype_8h_source.html#l00612">common_ranged_data::damage</a>, <a class="el" href="itype_8h_source.html#l00756">islot_gun::default_mods</a>, <a class="el" href="itype_8h_source.html#l00624">common_ranged_data::dispersion</a>, <a class="el" href="itype_8h_source.html#l00698">islot_gun::durability</a>, <a class="el" href="itype_8h_source.html#l00725">islot_gun::energy_drain</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="itype_8h_source.html#l00762">islot_gun::handling</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="itype_8h_source.html#l00781">islot_gun::heat_per_shot</a>, <a class="el" href="itype_8h_source.html#l00795">islot_gun::hurt_part_when_fired</a>, <a class="el" href="itype_8h_source.html#l00720">islot_gun::loudness</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="itype_8h_source.html#l00733">islot_gun::min_cycle_recoil</a>, <a class="el" href="itype_8h_source.html#l00759">islot_gun::modes</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; damage_type &gt;::NULL_ID()</a>, <a class="el" href="itype_8h_source.html#l00788">islot_gun::overheat_threshold</a>, <a class="el" href="itype_8h_source.html#l00616">common_ranged_data::range</a>, <a class="el" href="itype_8h_source.html#l00768">islot_gun::recoil</a>, <a class="el" href="itype_8h_source.html#l00710">islot_gun::reload_noise</a>, <a class="el" href="itype_8h_source.html#l00714">islot_gun::reload_noise_volume</a>, <a class="el" href="itype_8h_source.html#l00706">islot_gun::reload_time</a>, <a class="el" href="itype_8h_source.html#l00717">islot_gun::sight_dispersion</a>, <a class="el" href="itype_8h_source.html#l00690">islot_gun::skill_used</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, and <a class="el" href="itype_8h_source.html#l00748">islot_gun::valid_mod_locations</a>.</p>

</div>
</div>
<a id="a107f5ea5a78ed4acc84ff1dc65295eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a107f5ea5a78ed4acc84ff1dc65295eb9">&#9670;&nbsp;</a></span>load() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__gunmod.html">islot_gunmod</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03477">3477</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;{</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160; </div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;damage_modifier&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>,</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            <a class="code" href="structdamage__instance.html">damage_instance</a>( <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">damage_type_id::NULL_ID</a>(), -20, -20, -20, -20 ) );</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;loudness_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a68bd7a7bad991d610455edfea54d27f1">loudness</a> );</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;location&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a20f62eb4d6e250814ad0e51249ce9a86">location</a> );</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;dispersion_modifier&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">dispersion</a> );</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;field_of_view&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a5b0fb688a47ab4582e6b01a9c7b53f27">field_of_view</a> );</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sight_dispersion&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a68e25ba70cbdc4cd7b5dcc674af50d4a">sight_dispersion</a> );</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;aim_speed_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a3d9aa0db86fc3a1ac0abfe7260c78348">aim_speed_modifier</a> );</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;aim_speed&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">aim_speed</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, -1 );</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;handling_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ad06e7c4614c48cbdd288a412b960c801">handling</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;range_modifier&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#af73392bcb456d04c3fdf1a413b6b3a9e">range</a> );</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;range_multiplier&quot;</span>, slot.<a class="code" href="structcommon__ranged__data.html#ab1bb4e43a99ecb7ec197e23d00fc9a5a">range_multiplier</a> );</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;consume_chance&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a7d484bba5d9bb2fe12574795ae457e96">consume_chance</a> );</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;consume_divisor&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a7c89f77c624e7b37f5ccb1856ec62de1">consume_divisor</a> );</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;shot_spread_multiplier_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ab1d13bfa23ca6e4bf5ed34ec2e01aecb">shot_spread_multiplier_modifier</a> );</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_effects&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a43445b4c6265eedda7b897d54bc108d9">ammo_effects</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;energy_drain_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a125bb8c84dceed24390bc5eefb3d7dd6">energy_drain_multiplier</a> );</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;energy_drain_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#aa78198b67b53ee2bb71f6d39ddaa67c5">energy_drain_modifier</a> );</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_to_fire_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a883454b96305fa76f2c62ee1639e5682">ammo_to_fire_multiplier</a> );</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_to_fire_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#af89f710d2525ebd5b3b98da1a340ac99">ammo_to_fire_modifier</a> );</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;weight_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ac02f50551ca036e61e2b2000288f17e5">weight_multiplier</a> );</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;overwrite_min_cycle_recoil&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a696f016812a857ac7c2ea3dafe183366">overwrite_min_cycle_recoil</a> );</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;overheat_threshold_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a6241bfd145271b3a6924a8c7f0522ca7">overheat_threshold_modifier</a> );</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;overheat_threshold_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a7945878a530ec912adbf518305f6dc4d">overheat_threshold_multiplier</a> );</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;cooling_value_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a53f794fdbfe2d1e9da62c607481162e0">cooling_value_modifier</a> );</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;cooling_value_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a38c81dfa85fc595ddb73e7f0f2202371">cooling_value_multiplier</a> );</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;heat_per_shot_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ad7eba57e312854372074f70d0984cd90">heat_per_shot_modifier</a> );</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;heat_per_shot_multiplier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a103bf7743f7aefd79cdb1ba26e28d70c">heat_per_shot_multiplier</a> );</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="comment">// convert aim_speed to FoV and aim_speed_modifier automatically, if FoV is not set</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="keywordflow">if</span>( slot.<a class="code" href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">aim_speed</a> &gt;= 0 &amp;&amp; slot.<a class="code" href="structislot__gunmod.html#a5b0fb688a47ab4582e6b01a9c7b53f27">field_of_view</a> &lt;= 0 ) {</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        <span class="keywordflow">if</span>( slot.<a class="code" href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">aim_speed</a> &gt; 6 ) {</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;            slot.<a class="code" href="structislot__gunmod.html#a3d9aa0db86fc3a1ac0abfe7260c78348">aim_speed_modifier</a> = 5 * ( slot.<a class="code" href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">aim_speed</a> - 6 );</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;            slot.<a class="code" href="structislot__gunmod.html#a5b0fb688a47ab4582e6b01a9c7b53f27">field_of_view</a> = 480;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;            slot.<a class="code" href="structislot__gunmod.html#a5b0fb688a47ab4582e6b01a9c7b53f27">field_of_view</a> = 480 - 30 * ( 6 - slot.<a class="code" href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">aim_speed</a> );</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    }</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a271bf0c222d2a7c97329df4362ae6a54">has_int</a>( <span class="stringliteral">&quot;install_time&quot;</span> ) ) {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        slot.<a class="code" href="structislot__gunmod.html#aba0e936d816935c8ef99a2a85aa544f1">install_time</a> = jo.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;install_time&quot;</span> );</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;install_time&quot;</span> ) ) {</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        slot.<a class="code" href="structislot__gunmod.html#aba0e936d816935c8ef99a2a85aa544f1">install_time</a> = to_moves&lt;int&gt;( read_from_json_string&lt;time_duration&gt;</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                                           ( jo.<a class="code" href="classJsonObject.html#ab71a096f97edf5ea339e44ac4dbe39db">get_member</a>( <span class="stringliteral">&quot;install_time&quot;</span> ),</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                                             <a class="code" href="classtime__duration.html#a4694c27b90feb607344d0605cfa50db8">time_duration::units</a> ) );</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    }</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160; </div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;mod_targets&quot;</span> ) ) {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;        slot.<a class="code" href="structislot__gunmod.html#a26912068d3e61f67c23ed9fa4a59b18a">usable</a>.clear();</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;t : jo.<a class="code" href="classJsonObject.html#ad87be22ba01dc71a2d4930d33cf5d74c">get_tags</a>( <span class="stringliteral">&quot;mod_targets&quot;</span> ) ) {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;            slot.<a class="code" href="structislot__gunmod.html#a26912068d3e61f67c23ed9fa4a59b18a">usable</a>.insert( <a class="code" href="classgun__type__type.html">gun_type_type</a>( t ) );</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;        }</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    }</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160; </div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;mode_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ac88b997157e362e7482c8c40449160b3">mode_modifier</a> );</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reload_modifier&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a21ed51df149d7a2618aa789e91a6469a">reload_modifier</a> );</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_str_required_mod&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#af4e90635c4d39324e910c4241acc47b4">min_str_required_mod</a> );</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;add_mod&quot;</span> ) ) {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;        slot.<a class="code" href="structislot__gunmod.html#aed14da382a38340ce6f1c792a81be5fd">add_mod</a>.clear();</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;add_mod&quot;</span> ) ) {</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;            slot.<a class="code" href="structislot__gunmod.html#aed14da382a38340ce6f1c792a81be5fd">add_mod</a>.emplace( <a class="code" href="classgunmod__location.html">gunmod_location</a>( curr.get_string( 0 ) ), curr.get_int( 1 ) );</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;        }</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    }</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160; </div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;is_bayonet&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#ae6220a77382108814462ef6d394bf56b">is_bayonet</a> );</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;blacklist_mod&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a158fecbd23e5615d622a6ada7d020e44">blacklist_mod</a> );</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;blacklist_slot&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#a1fb0295e5b1d4cea8e265916be7a46c4">blacklist_slot</a> );</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;barrel_length&quot;</span>, slot.<a class="code" href="structislot__gunmod.html#aa565b4a4a90f6858ca49aed702164501">barrel_length</a> );</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html_a271bf0c222d2a7c97329df4362ae6a54"><div class="ttname"><a href="classJsonObject.html#a271bf0c222d2a7c97329df4362ae6a54">JsonObject::has_int</a></div><div class="ttdeci">bool has_int(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00956">flexbuffer_json-inl.h:956</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ab71a096f97edf5ea339e44ac4dbe39db"><div class="ttname"><a href="classJsonObject.html#ab71a096f97edf5ea339e44ac4dbe39db">JsonObject::get_member</a></div><div class="ttdeci">JsonValue get_member(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01038">flexbuffer_json-inl.h:1038</a></div></div>
<div class="ttc" id="aclassgun__type__type_html"><div class="ttname"><a href="classgun__type__type.html">gun_type_type</a></div><div class="ttdoc">The type of gun. The second &quot;_type&quot; suffix is only to distinguish it from item::gun_type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00799">itype.h:800</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a4694c27b90feb607344d0605cfa50db8"><div class="ttname"><a href="classtime__duration.html#a4694c27b90feb607344d0605cfa50db8">time_duration::units</a></div><div class="ttdeci">static const std::vector&lt; std::pair&lt; std::string, time_duration &gt; &gt; units</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00356">calendar.h:356</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_ab1bb4e43a99ecb7ec197e23d00fc9a5a"><div class="ttname"><a href="structcommon__ranged__data.html#ab1bb4e43a99ecb7ec197e23d00fc9a5a">common_ranged_data::range_multiplier</a></div><div class="ttdeci">float range_multiplier</div><div class="ttdoc">Range multiplier from gunmods or ammo.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00620">itype.h:620</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a103bf7743f7aefd79cdb1ba26e28d70c"><div class="ttname"><a href="structislot__gunmod.html#a103bf7743f7aefd79cdb1ba26e28d70c">islot_gunmod::heat_per_shot_multiplier</a></div><div class="ttdeci">float heat_per_shot_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00929">itype.h:929</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a125bb8c84dceed24390bc5eefb3d7dd6"><div class="ttname"><a href="structislot__gunmod.html#a125bb8c84dceed24390bc5eefb3d7dd6">islot_gunmod::energy_drain_multiplier</a></div><div class="ttdeci">float energy_drain_multiplier</div><div class="ttdoc">Increases base gun energy consumption by this many times per shot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00865">itype.h:865</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a158fecbd23e5615d622a6ada7d020e44"><div class="ttname"><a href="structislot__gunmod.html#a158fecbd23e5615d622a6ada7d020e44">islot_gunmod::blacklist_mod</a></div><div class="ttdeci">std::set&lt; itype_id &gt; blacklist_mod</div><div class="ttdoc">Not compatible on weapons that have these mods.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00912">itype.h:912</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a1fb0295e5b1d4cea8e265916be7a46c4"><div class="ttname"><a href="structislot__gunmod.html#a1fb0295e5b1d4cea8e265916be7a46c4">islot_gunmod::blacklist_slot</a></div><div class="ttdeci">std::set&lt; gunmod_location &gt; blacklist_slot</div><div class="ttdoc">Not compatible on weapons that have this mod slot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00909">itype.h:909</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a20f62eb4d6e250814ad0e51249ce9a86"><div class="ttname"><a href="structislot__gunmod.html#a20f62eb4d6e250814ad0e51249ce9a86">islot_gunmod::location</a></div><div class="ttdeci">gunmod_location location</div><div class="ttdoc">Where is this gunmod installed (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00832">itype.h:832</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a21ed51df149d7a2618aa789e91a6469a"><div class="ttname"><a href="structislot__gunmod.html#a21ed51df149d7a2618aa789e91a6469a">islot_gunmod::reload_modifier</a></div><div class="ttdeci">int reload_modifier</div><div class="ttdoc">Percentage value change to the gun's loading time.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00888">itype.h:888</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a26912068d3e61f67c23ed9fa4a59b18a"><div class="ttname"><a href="structislot__gunmod.html#a26912068d3e61f67c23ed9fa4a59b18a">islot_gunmod::usable</a></div><div class="ttdeci">std::unordered_set&lt; gun_type_type &gt; usable</div><div class="ttdoc">What kind of weapons can this gunmod be used with (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00835">itype.h:835</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a38c81dfa85fc595ddb73e7f0f2202371"><div class="ttname"><a href="structislot__gunmod.html#a38c81dfa85fc595ddb73e7f0f2202371">islot_gunmod::cooling_value_multiplier</a></div><div class="ttdeci">float cooling_value_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00925">itype.h:925</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a3d9aa0db86fc3a1ac0abfe7260c78348"><div class="ttname"><a href="structislot__gunmod.html#a3d9aa0db86fc3a1ac0abfe7260c78348">islot_gunmod::aim_speed_modifier</a></div><div class="ttdeci">double aim_speed_modifier</div><div class="ttdoc">This value is used to reflect other factors affecting aiming speed except Fov.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00856">itype.h:856</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a43445b4c6265eedda7b897d54bc108d9"><div class="ttname"><a href="structislot__gunmod.html#a43445b4c6265eedda7b897d54bc108d9">islot_gunmod::ammo_effects</a></div><div class="ttdeci">std::set&lt; std::string &gt; ammo_effects</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00882">itype.h:882</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a53f794fdbfe2d1e9da62c607481162e0"><div class="ttname"><a href="structislot__gunmod.html#a53f794fdbfe2d1e9da62c607481162e0">islot_gunmod::cooling_value_modifier</a></div><div class="ttdeci">double cooling_value_modifier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00924">itype.h:924</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a5b0fb688a47ab4582e6b01a9c7b53f27"><div class="ttname"><a href="structislot__gunmod.html#a5b0fb688a47ab4582e6b01a9c7b53f27">islot_gunmod::field_of_view</a></div><div class="ttdeci">int field_of_view</div><div class="ttdoc">If the target has not appeared in the scope, the aiming speed is relatively low.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00845">itype.h:845</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a6241bfd145271b3a6924a8c7f0522ca7"><div class="ttname"><a href="structislot__gunmod.html#a6241bfd145271b3a6924a8c7f0522ca7">islot_gunmod::overheat_threshold_modifier</a></div><div class="ttdeci">double overheat_threshold_modifier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00920">itype.h:920</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a68bd7a7bad991d610455edfea54d27f1"><div class="ttname"><a href="structislot__gunmod.html#a68bd7a7bad991d610455edfea54d27f1">islot_gunmod::loudness</a></div><div class="ttdeci">int loudness</div><div class="ttdoc">Modifies base loudness as provided by the currently loaded ammo.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00859">itype.h:859</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a68e25ba70cbdc4cd7b5dcc674af50d4a"><div class="ttname"><a href="structislot__gunmod.html#a68e25ba70cbdc4cd7b5dcc674af50d4a">islot_gunmod::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion</div><div class="ttdoc">If this value is set (non-negative), this gunmod functions as a sight.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00838">itype.h:838</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a696f016812a857ac7c2ea3dafe183366"><div class="ttname"><a href="structislot__gunmod.html#a696f016812a857ac7c2ea3dafe183366">islot_gunmod::overwrite_min_cycle_recoil</a></div><div class="ttdeci">int overwrite_min_cycle_recoil</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00917">itype.h:917</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a7945878a530ec912adbf518305f6dc4d"><div class="ttname"><a href="structislot__gunmod.html#a7945878a530ec912adbf518305f6dc4d">islot_gunmod::overheat_threshold_multiplier</a></div><div class="ttdeci">float overheat_threshold_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00921">itype.h:921</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a7c89f77c624e7b37f5ccb1856ec62de1"><div class="ttname"><a href="structislot__gunmod.html#a7c89f77c624e7b37f5ccb1856ec62de1">islot_gunmod::consume_divisor</a></div><div class="ttdeci">int consume_divisor</div><div class="ttdoc">Divsor to scale back gunmod consumption damage.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00894">itype.h:894</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a7d484bba5d9bb2fe12574795ae457e96"><div class="ttname"><a href="structislot__gunmod.html#a7d484bba5d9bb2fe12574795ae457e96">islot_gunmod::consume_chance</a></div><div class="ttdeci">int consume_chance</div><div class="ttdoc">Percentage value change to the gun's loading time.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00891">itype.h:891</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_a883454b96305fa76f2c62ee1639e5682"><div class="ttname"><a href="structislot__gunmod.html#a883454b96305fa76f2c62ee1639e5682">islot_gunmod::ammo_to_fire_multiplier</a></div><div class="ttdeci">float ammo_to_fire_multiplier</div><div class="ttdoc">Increases base gun ammo to fire by this many times per shot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00871">itype.h:871</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_aa565b4a4a90f6858ca49aed702164501"><div class="ttname"><a href="structislot__gunmod.html#aa565b4a4a90f6858ca49aed702164501">islot_gunmod::barrel_length</a></div><div class="ttdeci">units::length barrel_length</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00914">itype.h:914</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_aa78198b67b53ee2bb71f6d39ddaa67c5"><div class="ttname"><a href="structislot__gunmod.html#aa78198b67b53ee2bb71f6d39ddaa67c5">islot_gunmod::energy_drain_modifier</a></div><div class="ttdeci">units::energy energy_drain_modifier</div><div class="ttdoc">Increases base gun energy consumption by this value per shot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00868">itype.h:868</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ab1d13bfa23ca6e4bf5ed34ec2e01aecb"><div class="ttname"><a href="structislot__gunmod.html#ab1d13bfa23ca6e4bf5ed34ec2e01aecb">islot_gunmod::shot_spread_multiplier_modifier</a></div><div class="ttdeci">float shot_spread_multiplier_modifier</div><div class="ttdoc">Enlarge or reduce shot spread.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00897">itype.h:897</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_aba0e936d816935c8ef99a2a85aa544f1"><div class="ttname"><a href="structislot__gunmod.html#aba0e936d816935c8ef99a2a85aa544f1">islot_gunmod::install_time</a></div><div class="ttdeci">int install_time</div><div class="ttdoc">How many moves does this gunmod take to install?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00862">itype.h:862</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ac02f50551ca036e61e2b2000288f17e5"><div class="ttname"><a href="structislot__gunmod.html#ac02f50551ca036e61e2b2000288f17e5">islot_gunmod::weight_multiplier</a></div><div class="ttdeci">float weight_multiplier</div><div class="ttdoc">Increases gun weight by this many times.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00877">itype.h:877</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ac88b997157e362e7482c8c40449160b3"><div class="ttname"><a href="structislot__gunmod.html#ac88b997157e362e7482c8c40449160b3">islot_gunmod::mode_modifier</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_modifier_data &gt; mode_modifier</div><div class="ttdoc">Firing modes added to or replacing those of the base gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00880">itype.h:880</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ad06e7c4614c48cbdd288a412b960c801"><div class="ttname"><a href="structislot__gunmod.html#ad06e7c4614c48cbdd288a412b960c801">islot_gunmod::handling</a></div><div class="ttdeci">int handling</div><div class="ttdoc">Relative adjustment to base gun handling.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00885">itype.h:885</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ad7eba57e312854372074f70d0984cd90"><div class="ttname"><a href="structislot__gunmod.html#ad7eba57e312854372074f70d0984cd90">islot_gunmod::heat_per_shot_modifier</a></div><div class="ttdeci">double heat_per_shot_modifier</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00928">itype.h:928</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_adb4f9f1f120f6bf93da91f9fc59b1608"><div class="ttname"><a href="structislot__gunmod.html#adb4f9f1f120f6bf93da91f9fc59b1608">islot_gunmod::aim_speed</a></div><div class="ttdeci">int aim_speed</div><div class="ttdoc">Its position has been replaced by FoV.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00851">itype.h:851</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_ae6220a77382108814462ef6d394bf56b"><div class="ttname"><a href="structislot__gunmod.html#ae6220a77382108814462ef6d394bf56b">islot_gunmod::is_bayonet</a></div><div class="ttdeci">bool is_bayonet</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00906">itype.h:906</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_aed14da382a38340ce6f1c792a81be5fd"><div class="ttname"><a href="structislot__gunmod.html#aed14da382a38340ce6f1c792a81be5fd">islot_gunmod::add_mod</a></div><div class="ttdeci">std::map&lt; gunmod_location, int &gt; add_mod</div><div class="ttdoc">Additional gunmod slots to add to the gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00903">itype.h:903</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_af4e90635c4d39324e910c4241acc47b4"><div class="ttname"><a href="structislot__gunmod.html#af4e90635c4d39324e910c4241acc47b4">islot_gunmod::min_str_required_mod</a></div><div class="ttdeci">int min_str_required_mod</div><div class="ttdoc">Modifies base strength required.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00900">itype.h:900</a></div></div>
<div class="ttc" id="astructislot__gunmod_html_af89f710d2525ebd5b3b98da1a340ac99"><div class="ttname"><a href="structislot__gunmod.html#af89f710d2525ebd5b3b98da1a340ac99">islot_gunmod::ammo_to_fire_modifier</a></div><div class="ttdeci">int ammo_to_fire_modifier</div><div class="ttdoc">Increases base gun ammo to fire by this value per shot.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00874">itype.h:874</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l00903">islot_gunmod::add_mod</a>, <a class="el" href="itype_8h_source.html#l00851">islot_gunmod::aim_speed</a>, <a class="el" href="itype_8h_source.html#l00856">islot_gunmod::aim_speed_modifier</a>, <a class="el" href="itype_8h_source.html#l00882">islot_gunmod::ammo_effects</a>, <a class="el" href="itype_8h_source.html#l00874">islot_gunmod::ammo_to_fire_modifier</a>, <a class="el" href="itype_8h_source.html#l00871">islot_gunmod::ammo_to_fire_multiplier</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l00914">islot_gunmod::barrel_length</a>, <a class="el" href="itype_8h_source.html#l00912">islot_gunmod::blacklist_mod</a>, <a class="el" href="itype_8h_source.html#l00909">islot_gunmod::blacklist_slot</a>, <a class="el" href="itype_8h_source.html#l00891">islot_gunmod::consume_chance</a>, <a class="el" href="itype_8h_source.html#l00894">islot_gunmod::consume_divisor</a>, <a class="el" href="itype_8h_source.html#l00924">islot_gunmod::cooling_value_modifier</a>, <a class="el" href="itype_8h_source.html#l00925">islot_gunmod::cooling_value_multiplier</a>, <a class="el" href="itype_8h_source.html#l00612">common_ranged_data::damage</a>, <a class="el" href="itype_8h_source.html#l00624">common_ranged_data::dispersion</a>, <a class="el" href="itype_8h_source.html#l00868">islot_gunmod::energy_drain_modifier</a>, <a class="el" href="itype_8h_source.html#l00865">islot_gunmod::energy_drain_multiplier</a>, <a class="el" href="itype_8h_source.html#l00845">islot_gunmod::field_of_view</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01038">JsonObject::get_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01069">JsonObject::get_tags()</a>, <a class="el" href="itype_8h_source.html#l00885">islot_gunmod::handling</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00956">JsonObject::has_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="itype_8h_source.html#l00928">islot_gunmod::heat_per_shot_modifier</a>, <a class="el" href="itype_8h_source.html#l00929">islot_gunmod::heat_per_shot_multiplier</a>, <a class="el" href="itype_8h_source.html#l00862">islot_gunmod::install_time</a>, <a class="el" href="itype_8h_source.html#l00906">islot_gunmod::is_bayonet</a>, <a class="el" href="itype_8h_source.html#l00832">islot_gunmod::location</a>, <a class="el" href="itype_8h_source.html#l00859">islot_gunmod::loudness</a>, <a class="el" href="itype_8h_source.html#l00900">islot_gunmod::min_str_required_mod</a>, <a class="el" href="itype_8h_source.html#l00880">islot_gunmod::mode_modifier</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; damage_type &gt;::NULL_ID()</a>, <a class="el" href="itype_8h_source.html#l00920">islot_gunmod::overheat_threshold_modifier</a>, <a class="el" href="itype_8h_source.html#l00921">islot_gunmod::overheat_threshold_multiplier</a>, <a class="el" href="itype_8h_source.html#l00917">islot_gunmod::overwrite_min_cycle_recoil</a>, <a class="el" href="itype_8h_source.html#l00616">common_ranged_data::range</a>, <a class="el" href="itype_8h_source.html#l00620">common_ranged_data::range_multiplier</a>, <a class="el" href="itype_8h_source.html#l00888">islot_gunmod::reload_modifier</a>, <a class="el" href="itype_8h_source.html#l00897">islot_gunmod::shot_spread_multiplier_modifier</a>, <a class="el" href="itype_8h_source.html#l00838">islot_gunmod::sight_dispersion</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, <a class="el" href="calendar_8h_source.html#l00356">time_duration::units</a>, <a class="el" href="itype_8h_source.html#l00835">islot_gunmod::usable</a>, and <a class="el" href="itype_8h_source.html#l00877">islot_gunmod::weight_multiplier</a>.</p>

</div>
</div>
<a id="a3f002355b6183c361139ce1cfcc261ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f002355b6183c361139ce1cfcc261ac">&#9670;&nbsp;</a></span>load() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__magazine.html">islot_magazine</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03559">3559</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;{</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_type&quot;</span>, slot.<a class="code" href="structislot__magazine.html#a7db228d74fdd18fe88ea593c2783717c">type</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;capacity&quot;</span>, slot.<a class="code" href="structislot__magazine.html#aee164cd4bbb906d4700375860e47763a">capacity</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;count&quot;</span>, slot.<a class="code" href="structislot__magazine.html#a19202dda42527e83a0ba698c82c1aff3">count</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;default_ammo&quot;</span>, slot.<a class="code" href="structislot__magazine.html#a16bc229e064cbd2b0e220454b1c69bae">default_ammo</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reload_time&quot;</span>, slot.<a class="code" href="structislot__magazine.html#ad3557cba493592b984da678f15b8c0c4">reload_time</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;linkage&quot;</span>, slot.<a class="code" href="structislot__magazine.html#a71b6970e28fdd7b998556e7a9bcc254f">linkage</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;}</div>
<div class="ttc" id="astructislot__magazine_html_a16bc229e064cbd2b0e220454b1c69bae"><div class="ttname"><a href="structislot__magazine.html#a16bc229e064cbd2b0e220454b1c69bae">islot_magazine::default_ammo</a></div><div class="ttdeci">itype_id default_ammo</div><div class="ttdoc">Default type of ammo contained by a magazine (often set for ammo belts)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00943">itype.h:943</a></div></div>
<div class="ttc" id="astructislot__magazine_html_a19202dda42527e83a0ba698c82c1aff3"><div class="ttname"><a href="structislot__magazine.html#a19202dda42527e83a0ba698c82c1aff3">islot_magazine::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Default amount of ammo contained by a magazine (often set for ammo belts)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00940">itype.h:940</a></div></div>
<div class="ttc" id="astructislot__magazine_html_a71b6970e28fdd7b998556e7a9bcc254f"><div class="ttname"><a href="structislot__magazine.html#a71b6970e28fdd7b998556e7a9bcc254f">islot_magazine::linkage</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; linkage</div><div class="ttdoc">For ammo belts one linkage (of given type) is dropped for each unit of ammo consumed.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00949">itype.h:949</a></div></div>
<div class="ttc" id="astructislot__magazine_html_a7db228d74fdd18fe88ea593c2783717c"><div class="ttname"><a href="structislot__magazine.html#a7db228d74fdd18fe88ea593c2783717c">islot_magazine::type</a></div><div class="ttdeci">std::set&lt; ammotype &gt; type</div><div class="ttdoc">What type of ammo this magazine can be loaded with.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00934">itype.h:934</a></div></div>
<div class="ttc" id="astructislot__magazine_html_ad3557cba493592b984da678f15b8c0c4"><div class="ttname"><a href="structislot__magazine.html#ad3557cba493592b984da678f15b8c0c4">islot_magazine::reload_time</a></div><div class="ttdeci">int reload_time</div><div class="ttdoc">How long it takes to load each unit of ammo into the magazine.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00946">itype.h:946</a></div></div>
<div class="ttc" id="astructislot__magazine_html_aee164cd4bbb906d4700375860e47763a"><div class="ttname"><a href="structislot__magazine.html#aee164cd4bbb906d4700375860e47763a">islot_magazine::capacity</a></div><div class="ttdeci">int capacity</div><div class="ttdoc">Capacity of magazine (in equivalent units to ammo charges)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00937">itype.h:937</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l00937">islot_magazine::capacity</a>, <a class="el" href="itype_8h_source.html#l00940">islot_magazine::count</a>, <a class="el" href="itype_8h_source.html#l00943">islot_magazine::default_ammo</a>, <a class="el" href="itype_8h_source.html#l00949">islot_magazine::linkage</a>, <a class="el" href="itype_8h_source.html#l00946">islot_magazine::reload_time</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, and <a class="el" href="itype_8h_source.html#l00934">islot_magazine::type</a>.</p>

</div>
</div>
<a id="a526dce11d1507dfa5fae6162ae730282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526dce11d1507dfa5fae6162ae730282">&#9670;&nbsp;</a></span>load() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__mod.html">islot_mod</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03166">3166</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;{</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160; </div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;ammo_modifier&quot;</span> ) ) {</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string <span class="keywordtype">id</span> : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;ammo_modifier&quot;</span> ) ) {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            slot.<a class="code" href="structislot__mod.html#aebafe50c80e3e1f74b2f27b2597fa162">ammo_modifier</a>.insert( <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( <span class="keywordtype">id</span> ) );</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;        }</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;ammo_modifier&quot;</span> ) ) {</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        slot.<a class="code" href="structislot__mod.html#aebafe50c80e3e1f74b2f27b2597fa162">ammo_modifier</a>.insert( <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;ammo_modifier&quot;</span> ) ) );</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    }</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;capacity_multiplier&quot;</span>, slot.<a class="code" href="structislot__mod.html#ac3cd7bcf9a6092f5b363ffecf3cdce8b">capacity_multiplier</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;acceptable_ammo&quot;</span> ) ) {</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        slot.<a class="code" href="structislot__mod.html#ac62eecc66c02b919489a98831deee8d0">acceptable_ammo</a>.clear();</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;e : jo.<a class="code" href="classJsonObject.html#ad87be22ba01dc71a2d4930d33cf5d74c">get_tags</a>( <span class="stringliteral">&quot;acceptable_ammo&quot;</span> ) ) {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            slot.<a class="code" href="structislot__mod.html#ac62eecc66c02b919489a98831deee8d0">acceptable_ammo</a>.insert( <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( e ) );</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160; </div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <a class="code" href="classJsonArray.html">JsonArray</a> mags = jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;magazine_adaptor&quot;</span> );</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <span class="keywordflow">if</span>( !mags.<a class="code" href="classJsonArray.html#a98f560f4b4a616bd444a6ce5b066b460">empty</a>() ) {</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        slot.<a class="code" href="structislot__mod.html#a0c8e7128d40c08fe0f60695e3c9cb872">magazine_adaptor</a>.clear();</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> arr : mags ) {</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        <a class="code" href="classstring__id.html">ammotype</a> ammo( arr.get_string( 0 ) ); <span class="comment">// an ammo type (e.g. 9mm)</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        <span class="comment">// compatible magazines for this ammo type</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : arr.get_array( 1 ) ) {</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            slot.<a class="code" href="structislot__mod.html#a0c8e7128d40c08fe0f60695e3c9cb872">magazine_adaptor</a>[ ammo ].insert( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> ) );</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;        }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160; </div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <a class="code" href="classJsonArray.html">JsonArray</a> pockets = jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;pocket_mods&quot;</span> );</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <span class="keywordflow">if</span>( !pockets.<a class="code" href="classJsonArray.html#a98f560f4b4a616bd444a6ce5b066b460">empty</a>() ) {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;pocket_mods&quot;</span>, slot.<a class="code" href="structislot__mod.html#aebae604b866e6b3399aad7ef9666b8a9">add_pockets</a> );</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    }</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;}</div>
<div class="ttc" id="aclassJsonArray_html_a98f560f4b4a616bd444a6ce5b066b460"><div class="ttname"><a href="classJsonArray.html#a98f560f4b4a616bd444a6ce5b066b460">JsonArray::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00402">flexbuffer_json.h:402</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a43443191f61bb76aca1c2895eea4ad8f"><div class="ttname"><a href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a></div><div class="ttdeci">void optional(const JsonObject &amp;jo, const bool was_loaded, const std::string_view name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00829">generic_factory.h:829</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
<div class="ttc" id="astructislot__mod_html_a0c8e7128d40c08fe0f60695e3c9cb872"><div class="ttname"><a href="structislot__mod.html#a0c8e7128d40c08fe0f60695e3c9cb872">islot_mod::magazine_adaptor</a></div><div class="ttdeci">std::map&lt; ammotype, std::set&lt; itype_id &gt; &gt; magazine_adaptor</div><div class="ttdoc">If non-empty replaces the compatible magazines for the parent item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00588">itype.h:588</a></div></div>
<div class="ttc" id="astructislot__mod_html_ac3cd7bcf9a6092f5b363ffecf3cdce8b"><div class="ttname"><a href="structislot__mod.html#ac3cd7bcf9a6092f5b363ffecf3cdce8b">islot_mod::capacity_multiplier</a></div><div class="ttdeci">float capacity_multiplier</div><div class="ttdoc">Proportional adjustment of parent item ammo capacity.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00598">itype.h:598</a></div></div>
<div class="ttc" id="astructislot__mod_html_ac62eecc66c02b919489a98831deee8d0"><div class="ttname"><a href="structislot__mod.html#ac62eecc66c02b919489a98831deee8d0">islot_mod::acceptable_ammo</a></div><div class="ttdeci">std::set&lt; ammotype &gt; acceptable_ammo</div><div class="ttdoc">If non-empty restrict mod to items with those base (before modifiers) ammo types.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00582">itype.h:582</a></div></div>
<div class="ttc" id="astructislot__mod_html_aebae604b866e6b3399aad7ef9666b8a9"><div class="ttname"><a href="structislot__mod.html#aebae604b866e6b3399aad7ef9666b8a9">islot_mod::add_pockets</a></div><div class="ttdeci">std::vector&lt; pocket_data &gt; add_pockets</div><div class="ttdoc">Pockets the mod will add to the item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00595">itype.h:595</a></div></div>
<div class="ttc" id="astructislot__mod_html_aebafe50c80e3e1f74b2f27b2597fa162"><div class="ttname"><a href="structislot__mod.html#aebafe50c80e3e1f74b2f27b2597fa162">islot_mod::ammo_modifier</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo_modifier</div><div class="ttdoc">If set modifies parent ammo to this type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00585">itype.h:585</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l00582">islot_mod::acceptable_ammo</a>, <a class="el" href="itype_8h_source.html#l00595">islot_mod::add_pockets</a>, <a class="el" href="itype_8h_source.html#l00585">islot_mod::ammo_modifier</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l00598">islot_mod::capacity_multiplier</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00402">JsonArray::empty()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01069">JsonObject::get_tags()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="itype_8h_source.html#l00588">islot_mod::magazine_adaptor</a>, <a class="el" href="generic__factory_8h_source.html#l00829">optional()</a>, and <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>.</p>

</div>
</div>
<a id="a5199d46088632adcd91fc3b89187041a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5199d46088632adcd91fc3b89187041a">&#9670;&nbsp;</a></span>load() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structislot__tool.html">islot_tool</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03114">3114</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;{</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo&quot;</span>, slot.<a class="code" href="structislot__tool.html#a8aa4479b0becffd3412a2f527f2b87f2">ammo_id</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;max_charges&quot;</span>, slot.<a class="code" href="structislot__tool.html#a469419f9c49e27d69483dec969debf17">max_charges</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;initial_charges&quot;</span>, slot.<a class="code" href="structislot__tool.html#aa0d39d230129ee60303ce8bbe41ba0de">def_charges</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;charges_per_use&quot;</span>, slot.<a class="code" href="structislot__tool.html#a4906f4af3ef31373c2a1e9e0e3296b4d">charges_per_use</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;charge_factor&quot;</span>, slot.<a class="code" href="structislot__tool.html#a6cd35ec64bd5bd7978331d05f8047412">charge_factor</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 1 );</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;turns_per_charge&quot;</span>, slot.<a class="code" href="structislot__tool.html#ae3e34c1446ddf54ab0008d4e14301d1a">turns_per_charge</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0 );</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;fuel_efficiency&quot;</span>, slot.<a class="code" href="structislot__tool.html#aaff1bc04f26debcdf266d9ce64ea4b05">fuel_efficiency</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, -1.0f );</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;power_draw&quot;</span>, slot.<a class="code" href="structislot__tool.html#a5a8e125e9ff1716dae5f750178b0c3e2">power_draw</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_W );</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;revert_msg&quot;</span>, slot.<a class="code" href="structislot__tool.html#ab58efe00b49155f034209c9745398404">revert_msg</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sub&quot;</span>, slot.<a class="code" href="structislot__tool.html#a8780d2075264bdd054885b688be4c396">subtype</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordflow">if</span>( slot.<a class="code" href="structislot__tool.html#aa0d39d230129ee60303ce8bbe41ba0de">def_charges</a> &gt; slot.<a class="code" href="structislot__tool.html#a469419f9c49e27d69483dec969debf17">max_charges</a> ) {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;initial_charges&quot;</span>, <span class="stringliteral">&quot;initial_charges is larger than max_charges&quot;</span> );</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    }</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160; </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;rand_charges&quot;</span> ) ) {</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;initial_charges&quot;</span> ) ) {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>(</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="stringliteral">&quot;rand_charges&quot;</span>,</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                <span class="stringliteral">&quot;You can have a fixed initial amount of charges, or randomized.  Not both.&quot;</span> );</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        }</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> charge : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;rand_charges&quot;</span> ) ) {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            slot.<a class="code" href="structislot__tool.html#ad319b9b8dede1688bad8bb5ea7881300">rand_charges</a>.push_back( charge );</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <span class="keywordflow">if</span>( slot.<a class="code" href="structislot__tool.html#ad319b9b8dede1688bad8bb5ea7881300">rand_charges</a>.size() == 1 ) {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <span class="comment">// see item::item(...) for the use of this array</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>(</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                <span class="stringliteral">&quot;rand_charges&quot;</span>,</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                <span class="stringliteral">&quot;a rand_charges array with only one entry will be ignored, it needs at least 2 &quot;</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                <span class="stringliteral">&quot;entries!&quot;</span> );</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        }</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;}</div>
<div class="ttc" id="astructislot__tool_html_a469419f9c49e27d69483dec969debf17"><div class="ttname"><a href="structislot__tool.html#a469419f9c49e27d69483dec969debf17">islot_tool::max_charges</a></div><div class="ttdeci">int max_charges</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00105">itype.h:105</a></div></div>
<div class="ttc" id="astructislot__tool_html_a4906f4af3ef31373c2a1e9e0e3296b4d"><div class="ttname"><a href="structislot__tool.html#a4906f4af3ef31373c2a1e9e0e3296b4d">islot_tool::charges_per_use</a></div><div class="ttdeci">int charges_per_use</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00108">itype.h:108</a></div></div>
<div class="ttc" id="astructislot__tool_html_a5a8e125e9ff1716dae5f750178b0c3e2"><div class="ttname"><a href="structislot__tool.html#a5a8e125e9ff1716dae5f750178b0c3e2">islot_tool::power_draw</a></div><div class="ttdeci">units::power power_draw</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00110">itype.h:110</a></div></div>
<div class="ttc" id="astructislot__tool_html_a6cd35ec64bd5bd7978331d05f8047412"><div class="ttname"><a href="structislot__tool.html#a6cd35ec64bd5bd7978331d05f8047412">islot_tool::charge_factor</a></div><div class="ttdeci">int charge_factor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00107">itype.h:107</a></div></div>
<div class="ttc" id="astructislot__tool_html_a8780d2075264bdd054885b688be4c396"><div class="ttname"><a href="structislot__tool.html#a8780d2075264bdd054885b688be4c396">islot_tool::subtype</a></div><div class="ttdeci">itype_id subtype</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00103">itype.h:103</a></div></div>
<div class="ttc" id="astructislot__tool_html_a8aa4479b0becffd3412a2f527f2b87f2"><div class="ttname"><a href="structislot__tool.html#a8aa4479b0becffd3412a2f527f2b87f2">islot_tool::ammo_id</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo_id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00099">itype.h:99</a></div></div>
<div class="ttc" id="astructislot__tool_html_aa0d39d230129ee60303ce8bbe41ba0de"><div class="ttname"><a href="structislot__tool.html#aa0d39d230129ee60303ce8bbe41ba0de">islot_tool::def_charges</a></div><div class="ttdeci">int def_charges</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00106">itype.h:106</a></div></div>
<div class="ttc" id="astructislot__tool_html_aaff1bc04f26debcdf266d9ce64ea4b05"><div class="ttname"><a href="structislot__tool.html#aaff1bc04f26debcdf266d9ce64ea4b05">islot_tool::fuel_efficiency</a></div><div class="ttdeci">float fuel_efficiency</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00112">itype.h:112</a></div></div>
<div class="ttc" id="astructislot__tool_html_ab58efe00b49155f034209c9745398404"><div class="ttname"><a href="structislot__tool.html#ab58efe00b49155f034209c9745398404">islot_tool::revert_msg</a></div><div class="ttdeci">translation revert_msg</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00101">itype.h:101</a></div></div>
<div class="ttc" id="astructislot__tool_html_ad319b9b8dede1688bad8bb5ea7881300"><div class="ttname"><a href="structislot__tool.html#ad319b9b8dede1688bad8bb5ea7881300">islot_tool::rand_charges</a></div><div class="ttdeci">std::vector&lt; int &gt; rand_charges</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00114">itype.h:114</a></div></div>
<div class="ttc" id="astructislot__tool_html_ae3e34c1446ddf54ab0008d4e14301d1a"><div class="ttname"><a href="structislot__tool.html#ae3e34c1446ddf54ab0008d4e14301d1a">islot_tool::turns_per_charge</a></div><div class="ttdeci">int turns_per_charge</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00109">itype.h:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l00099">islot_tool::ammo_id</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l00107">islot_tool::charge_factor</a>, <a class="el" href="itype_8h_source.html#l00108">islot_tool::charges_per_use</a>, <a class="el" href="itype_8h_source.html#l00106">islot_tool::def_charges</a>, <a class="el" href="itype_8h_source.html#l00112">islot_tool::fuel_efficiency</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="itype_8h_source.html#l00105">islot_tool::max_charges</a>, <a class="el" href="itype_8h_source.html#l00110">islot_tool::power_draw</a>, <a class="el" href="itype_8h_source.html#l00114">islot_tool::rand_charges</a>, <a class="el" href="itype_8h_source.html#l00101">islot_tool::revert_msg</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, <a class="el" href="itype_8h_source.html#l00103">islot_tool::subtype</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, and <a class="el" href="itype_8h_source.html#l00109">islot_tool::turns_per_charge</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>.</p>

</div>
</div>
<a id="a7661f991170c124a5f1f17668de9a44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7661f991170c124a5f1f17668de9a44e">&#9670;&nbsp;</a></span>load() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrelic.html">relic</a> &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03161">3161</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;{</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    slot.<a class="code" href="classrelic.html#a15d22c31a5670a4ae3ee33300436336c">load</a>( jo );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;}</div>
<div class="ttc" id="aclassrelic_html_a15d22c31a5670a4ae3ee33300436336c"><div class="ttname"><a href="classrelic.html#a15d22c31a5670a4ae3ee33300436336c">relic::load</a></div><div class="ttdeci">void load(const JsonObject &amp;jo)</div><div class="ttdef"><b>Definition:</b> <a href="relic_8cpp_source.html#l00342">relic.cpp:342</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="relic_8cpp_source.html#l00342">relic::load()</a>.</p>

</div>
</div>
<a id="afe2020ce7c7301f4a3b8b5595c0bc27c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2020ce7c7301f4a3b8b5595c0bc27c">&#9670;&nbsp;</a></span>load_ammo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_ammo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02704">2704</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;{</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;stack_size&quot;</span>, def.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a>, src == <span class="stringliteral">&quot;dda&quot;</span>, 1 );</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> ) {</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> = cata::make_value&lt;islot_ammo&gt;();</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;            }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> = cata::make_value&lt;islot_ammo&gt;();</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        }</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;load( jo );</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    }</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a71118bb9471dcf03a0ac69f45dacb346"><div class="ttname"><a href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">Item_factory::load_basic_info</a></div><div class="ttdeci">void load_basic_info(const JsonObject &amp;jo, itype &amp;def, const std::string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04149">item_factory.cpp:4149</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a95c2001cf13c3a43d0d260dfff6f070c"><div class="ttname"><a href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">Item_factory::load_definition</a></div><div class="ttdeci">bool load_definition(const JsonObject &amp;jo, const std::string &amp;src, itype &amp;def)</div><div class="ttdoc">Called before creating a new template and handles inheritance via copy-from May defer instantiation o...</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l02598">item_factory.cpp:2598</a></div></div>
<div class="ttc" id="astructitype_html_a2fd0fb8931b801aaeb42d19d9725c958"><div class="ttname"><a href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">itype::was_loaded</a></div><div class="ttdeci">bool was_loaded</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01449">itype.h:1449</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01212">itype::ammo</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="itype_8h_source.html#l01408">itype::stack_size</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="a89b9af1728de9b96004db5a7ceb5e0fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89b9af1728de9b96004db5a7ceb5e0fc">&#9670;&nbsp;</a></span>load_armor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_armor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02858">2858</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;{</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> ) {</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> = cata::make_value&lt;islot_armor&gt;();</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;            }</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;            def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> = cata::make_value&lt;islot_armor&gt;();</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        }</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;load( jo );</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    }</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01201">itype::armor</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="a71118bb9471dcf03a0ac69f45dacb346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71118bb9471dcf03a0ac69f45dacb346">&#9670;&nbsp;</a></span>load_basic_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_basic_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04149">4149</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;{</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160; </div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <a class="code" href="classrestore__on__out__of__scope.html">restore_on_out_of_scope&lt;check_plural_t&gt;</a> restore_check_plural( <a class="code" href="cached__options_8cpp.html#ae70cf836c2c19d6b14b0332b18798766">check_plural</a> );</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;abstract&quot;</span> ) ) {</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;        <a class="code" href="cached__options_8cpp.html#ae70cf836c2c19d6b14b0332b18798766">check_plural</a> = <a class="code" href="cached__options_8h.html#ac77e04889b244d7c30f308cbb8b8aea4a334c4a4c42fdb79d7ebc3e73b517e6f8">check_plural_t::none</a>;</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    }</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160; </div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;category&quot;</span>, def.<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;weight&quot;</span>, def.<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_gram );</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;integral_weight&quot;</span>, def.<a class="code" href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">integral_weight</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, 0_gram );</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;volume&quot;</span>, def.<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> );</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;longest_side&quot;</span>, def.<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a> );</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;price&quot;</span>, def.<a class="code" href="structitype.html#a41038ca826de1713661d7edd6c1705d0">price</a>, <span class="keyword">false</span>, 0_cent );</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;price_postapoc&quot;</span>, def.<a class="code" href="structitype.html#a435567e9d513701c13586b96e289e33a">price_post</a>, <span class="keyword">false</span>, 0_cent );</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;stackable&quot;</span>, def.<a class="code" href="structitype.html#ae2add2e58c239cd10a2ad4551d5c6fae">stackable_</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;integral_volume&quot;</span>, def.<a class="code" href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">integral_volume</a> );</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;integral_longest_side&quot;</span>, def.<a class="code" href="structitype.html#adfcdd019a681f5c3cbf60012b366c780">integral_longest_side</a>, <span class="keyword">false</span>, 0_mm );</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) ) {</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        def.<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a> = <a class="code" href="damage_8cpp.html#a73cbc152b1401bb2312ca654430fe17b">load_damage_map</a>( jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) );</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    def.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a>.clear();</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;proportional&quot;</span> ) ) {</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jprop = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;proportional&quot;</span> );</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;        jprop.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;        <span class="keywordflow">if</span>( jprop.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) ) {</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;            def.<a class="code" href="structitype.html#ac7ce2b6d984c50cc83cd59fcb7cfb3bc">melee_proportional</a> = <a class="code" href="damage_8cpp.html#a73cbc152b1401bb2312ca654430fe17b">load_damage_map</a>( jprop.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) );</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;        }</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;    }</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;    def.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a>.clear();</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;relative&quot;</span> ) ) {</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jrel = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;relative&quot;</span> );</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;        jrel.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        <span class="keywordflow">if</span>( jrel.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) ) {</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;            def.<a class="code" href="structitype.html#a253c42f4117e518b824b4ba4df982fc0">melee_relative</a> = <a class="code" href="damage_8cpp.html#a73cbc152b1401bb2312ca654430fe17b">load_damage_map</a>( jrel.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;melee_damage&quot;</span> ) );</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;        }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    }</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a271bf0c222d2a7c97329df4362ae6a54">has_int</a>( <span class="stringliteral">&quot;to_hit&quot;</span> ) ) {</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;to_hit&quot;</span>, def.<a class="code" href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">m_to_hit</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;to_hit&quot;</span> ) ) {</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;        <a class="code" href="structio_1_1acc__data.html">io::acc_data</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>;</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        <span class="keywordtype">bool</span> was_loaded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, was_loaded, <span class="stringliteral">&quot;to_hit&quot;</span>, <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        def.<a class="code" href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">m_to_hit</a> = <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.sum_values();</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;variant_type&quot;</span>, def.<a class="code" href="structitype.html#a18f4ca3e43dc84bc3ae9ef11127e28a3">variant_kind</a>, <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a3d517f8924ac7fd03699a29d97dc52d9">itype_variant_kind::generic</a> );</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;variants&quot;</span>, def.<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a> );</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;container&quot;</span>, def.<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a> );</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;container_variant&quot;</span>, def.<a class="code" href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">default_container_variant</a> );</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sealed&quot;</span>, def.<a class="code" href="structitype.html#a402963af27c727a87b20bddb4362754e">default_container_sealed</a> );</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_strength&quot;</span>, def.<a class="code" href="structitype.html#ad8c03a65fe401a2c39c5f76116a46164">min_str</a> );</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_dexterity&quot;</span>, def.<a class="code" href="structitype.html#a025457dc0d2c2545e84cbb01533ed535">min_dex</a> );</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_intelligence&quot;</span>, def.<a class="code" href="structitype.html#a203a347d8d0a2784baa916490e2f377a">min_int</a> );</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;min_perception&quot;</span>, def.<a class="code" href="structitype.html#a3425c169f961247fd33daa19b98934ce">min_per</a> );</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;emits&quot;</span>, def.<a class="code" href="structitype.html#ac93d9775de15087ba59da8d48e89cb6f">emits</a> );</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;explode_in_fire&quot;</span>, def.<a class="code" href="structitype.html#ad3feb1bdd1db2f0b88ef6b74c25ef869">explode_in_fire</a> );</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;insulation&quot;</span>, def.<a class="code" href="structitype.html#a1f98e4086129c4db4a4903e7a6bdac72">insulation_factor</a> );</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;solar_efficiency&quot;</span>, def.<a class="code" href="structitype.html#a677f1de85e246b6f7e91a8ff70f3facf">solar_efficiency</a> );</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ascii_picture&quot;</span>, def.<a class="code" href="structitype.html#a4025c470ee962b556a984ad5acbf9e63">picture_id</a> );</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;repairs_with&quot;</span>, def.<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a> );</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;thrown_damage&quot;</span> ) ) {</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;        def.<a class="code" href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">thrown_damage</a> = <a class="code" href="damage_8cpp.html#a4ee1d4ba518b2becb0d1041a010ce7f5">load_damage_instance</a>( jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;thrown_damage&quot;</span> ) );</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;        <span class="comment">// TODO: Move to finalization</span></div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;        def.<a class="code" href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">thrown_damage</a>.<a class="code" href="structdamage__instance.html#a4591412e4fb2bce72f920783a39fda91">clear</a>();</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;        def.<a class="code" href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">thrown_damage</a>.<a class="code" href="structdamage__instance.html#a9eff5065ef6631935e95d061ca756ae4">add_damage</a>( <a class="code" href="item__factory_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>,</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;                                      def.<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a>[<a class="code" href="item__factory_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>] + def.<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a> / 1.0_kilogram );</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    }</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160; </div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;repairs_like&quot;</span> ) ) {</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;repairs_like&quot;</span>, def.<a class="code" href="structitype.html#a27af038e705697a2b9feff2a14e9cef5">repairs_like</a> );</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    }</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160; </div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">true</span>, <span class="stringliteral">&quot;weapon_category&quot;</span>, def.<a class="code" href="structitype.html#a17e05c547c1dd581333c64cdb24299a0">weapon_category</a>, <a class="code" href="classauto__flags__reader.html">auto_flags_reader&lt;weapon_category_id&gt;</a> {} );</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160; </div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;    <span class="keywordtype">float</span> degrade_mult = 1.0f;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;degradation_multiplier&quot;</span>, degrade_mult, 1.0f );</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="comment">// TODO: remove condition once degradation is ready to be applied to all items</span></div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() || def.<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a> != <a class="code" href="item__factory_8cpp.html#a7db6e5faab30702fff7f018e77f088c3">item_category_veh_parts</a> ) {</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;        degrade_mult = 0.0f;</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    }</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;    <span class="keywordflow">if</span>( ( degrade_mult * <a class="code" href="structitype.html#a1016e2c82f06a7108507ecc42a10ff04">itype::damage_max_</a> ) &lt;= 0.5f ) {</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;        def.<a class="code" href="structitype.html#a85b8077cdf6fc2230243b1a7df63cae0">degrade_increments_</a> = 0;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;        <span class="keywordtype">float</span> adjusted_inc = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( def.<a class="code" href="structitype.html#a85b8077cdf6fc2230243b1a7df63cae0">degrade_increments_</a> / degrade_mult, 1.0f );</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;        def.<a class="code" href="structitype.html#a85b8077cdf6fc2230243b1a7df63cae0">degrade_increments_</a> = std::isnan( adjusted_inc ) ? 0 : <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( adjusted_inc );</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;    }</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160; </div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    def.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a> = <a class="code" href="classtranslation.html">translation</a>( <a class="code" href="structtranslation_1_1plural__tag.html">translation::plural_tag</a>() );</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;    <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;name&quot;</span>, def.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a> ) ) {</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;        jo.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <span class="stringliteral">&quot;name unspecified for item type&quot;</span> );</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;    }</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160; </div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;description&quot;</span> ) ) {</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;description&quot;</span>, def.<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a> );</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    }</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160; </div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;symbol&quot;</span> ) ) {</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;        def.<a class="code" href="structitype.html#adc032f577167e749b91124d76f56ddfe">sym</a> = jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;symbol&quot;</span> );</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;    }</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160; </div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;color&quot;</span> ) ) {</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;        def.<a class="code" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> = <a class="code" href="color_8cpp.html#a4a88185cb5fcb714421d6bc682481d5b">color_from_string</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;color&quot;</span> ) );</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    }</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160; </div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        def.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.clear();</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;        def.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> = 0;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;        <span class="keyword">auto</span> add_mat = [&amp;def]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; m, <span class="keywordtype">int</span> portion ) {</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> res = def.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.emplace( m, portion );</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;            <span class="keywordflow">if</span>( res.second ) {</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;                def.<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> += portion;</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;            }</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;        };</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;material&quot;</span> ) &amp;&amp; jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;material&quot;</span> ).<a class="code" href="classJsonArray.html#a62646db1d92b58b6a5e629e46f962c01">test_object</a>() ) {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> mat : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;                add_mat( <a class="code" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( mat.get_string( <span class="stringliteral">&quot;type&quot;</span> ) ), mat.get_int( <span class="stringliteral">&quot;portion&quot;</span>, 1 ) );</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;                <span class="keywordflow">if</span>( first ) {</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;                    def.<a class="code" href="structitype.html#ad08f77aa643e069f397747aeec45eb94">default_mat</a> = <a class="code" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( mat.get_string( <span class="stringliteral">&quot;type&quot;</span> ) );</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;                    first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;                }</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;            }</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;mat : jo.<a class="code" href="classJsonObject.html#ad87be22ba01dc71a2d4930d33cf5d74c">get_tags</a>( <span class="stringliteral">&quot;material&quot;</span> ) ) {</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;                add_mat( <a class="code" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( mat ), 1 );</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;                <span class="keywordflow">if</span>( first ) {</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;                    def.<a class="code" href="structitype.html#ad08f77aa643e069f397747aeec45eb94">default_mat</a> = <a class="code" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( mat );</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;                    first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;                }</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;            }</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;        }</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;    }</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160; </div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;chat_topics&quot;</span> ) ) {</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;        def.<a class="code" href="structitype.html#af2872b5b305f2b8ef7f3854929bd7aa7">chat_topics</a>.clear();</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;m : jo.<a class="code" href="classJsonObject.html#a332ecdfbbcefd21204fad5e03ff43735">get_string_array</a>( <span class="stringliteral">&quot;chat_topics&quot;</span> ) ) {</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;            def.<a class="code" href="structitype.html#af2872b5b305f2b8ef7f3854929bd7aa7">chat_topics</a>.emplace_back( m );</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;        }</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    }</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;phase&quot;</span> ) ) {</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;        def.<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a> = jo.<a class="code" href="classJsonObject.html#a6d09a42b5272e3c721be6d227e772524">get_enum_value</a>&lt;<a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5">phase_id</a>&gt;( <span class="stringliteral">&quot;phase&quot;</span> );</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;    }</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160; </div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;magazines&quot;</span> ) ) {</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        def.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>.clear();</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.clear();</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> arr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;magazines&quot;</span> ) ) {</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;            <a class="code" href="classstring__id.html">ammotype</a> ammo( arr.get_string( 0 ) ); <span class="comment">// an ammo type (e.g. 9mm)</span></div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;            <a class="code" href="classJsonArray.html">JsonArray</a> compat = arr.<a class="code" href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">get_array</a>( 1 ); <span class="comment">// compatible magazines for this ammo type</span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160; </div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;            <span class="comment">// the first magazine for this ammo type is the default</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;            def.<a class="code" href="structitype.html#ab5c2a0ece3b013a4088b734cd34841d6">magazine_default</a>[ ammo ] = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( compat.<a class="code" href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">get_string</a>( 0 ) );</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160; </div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;            <span class="keywordflow">while</span>( compat.<a class="code" href="classJsonArray.html#a12e952546232a62428cb2a1741364006">has_more</a>() ) {</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;                def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>[ ammo ].insert( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( compat.<a class="code" href="classJsonArray.html#a0b9f2991ca4cbc0d3181d1c87314067d">next_string</a>() ) );</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;            }</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        }</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    }</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160; </div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;nanofab_template_group&quot;</span> ) ) {</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        def.<a class="code" href="structitype.html#a78dfdecbef70d937bd669c233af65693">nanofab_template_group</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;nanofab_template_group&quot;</span> ) );</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    }</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160; </div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;template_requirements&quot;</span> ) ) {</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;        def.<a class="code" href="structitype.html#afeecc38f5096d4bfcfa7be374dc3cbc2">template_requirements</a> = <a class="code" href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;template_requirements&quot;</span> ) );</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;    }</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160; </div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;    <a class="code" href="classJsonArray.html">JsonArray</a> jarr = jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;min_skills&quot;</span> );</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    <span class="keywordflow">if</span>( !jarr.<a class="code" href="classJsonArray.html#a98f560f4b4a616bd444a6ce5b066b460">empty</a>() ) {</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;        def.<a class="code" href="structitype.html#abef0d8869ced8040dc3004db7db39d57">min_skills</a>.clear();</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    }</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> cur : jarr ) {</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> sk = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>( cur.get_string( 0 ) );</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;        <span class="keywordflow">if</span>( !sk.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;min_skills&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;invalid skill: %s&quot;</span>, sk.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() ) );</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        }</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        def.<a class="code" href="structitype.html#abef0d8869ced8040dc3004db7db39d57">min_skills</a>[ sk ] = cur.get_int( 1 );</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;    }</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160; </div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;explosion&quot;</span> ) ) {</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> je = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;explosion&quot;</span> );</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;        def.<a class="code" href="structitype.html#a15ce9f3914d2afb7992e4683a0996791">explosion</a> = <a class="code" href="explosion_8cpp.html#ab8a73ef7725c30dd1cd66ed921df48d8">load_explosion_data</a>( je );</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;    }</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160; </div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;memory_card&quot;</span> ) ) {</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;        def.<a class="code" href="structitype.html#a4b9d5e3c1c7e05bbdbbb8f253a73d8da">memory_card_data</a> = cata::make_value&lt;memory_card_info&gt;();</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;        <a class="code" href="item__factory_8cpp.html#a4fc872ef6e0700b1c459ec7e2e15eef9">load_memory_card_data</a>( *def.<a class="code" href="structitype.html#a4b9d5e3c1c7e05bbdbbb8f253a73d8da">memory_card_data</a>, jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;memory_card&quot;</span> ) );</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    }</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160; </div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;variables&quot;</span>, def.<a class="code" href="structitype.html#a6f46e6ed5941eccded3fe37eba0491e7">item_variables</a> );</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;flags&quot;</span>, def.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a> );</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;source_monster&quot;</span> ) ) {</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;source_monster&quot;</span>, def.<a class="code" href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">source_monster</a> );</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    }</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;faults&quot;</span>, def.<a class="code" href="structitype.html#a71835820e6594955948ef1e8bc7bed68">faults</a> );</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160; </div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;qualities&quot;</span> ) ) {</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;        def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.clear();</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;        <a class="code" href="classItem__factory.html#abd13937eb5ca9022bed121004829e4fd">set_qualities_from_json</a>( jo, <span class="stringliteral">&quot;qualities&quot;</span>, def );</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;extend&quot;</span> ) ) {</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;extend&quot;</span> );</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;            tmp.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;            <a class="code" href="classItem__factory.html#ac2b39c9a10e628b86b5bf37d82b9e453">extend_qualities_from_json</a>( tmp, <span class="stringliteral">&quot;qualities&quot;</span>, def );</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        }</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;delete&quot;</span> ) ) {</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;delete&quot;</span> );</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            tmp.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            <a class="code" href="classItem__factory.html#aeb0fbd130ad5c8ed4911bc2a18a2ac0b">delete_qualities_from_json</a>( tmp, <span class="stringliteral">&quot;qualities&quot;</span>, def );</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        }</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;relative&quot;</span> ) ) {</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;relative&quot;</span> );</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;            tmp.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;            <a class="code" href="classItem__factory.html#a9224daa04d7697778df62e68ac393b23">relative_qualities_from_json</a>( tmp, <span class="stringliteral">&quot;qualities&quot;</span>, def );</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;        }</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;    }</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160; </div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;charged_qualities&quot;</span> ) ) {</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;        def.<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.clear();</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;        <a class="code" href="classItem__factory.html#abd13937eb5ca9022bed121004829e4fd">set_qualities_from_json</a>( jo, <span class="stringliteral">&quot;charged_qualities&quot;</span>, def );</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;    }</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160; </div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a>, <span class="stringliteral">&quot;properties&quot;</span>, def.<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a> );</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160; </div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;techniques&quot;</span> ) ) {</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;        def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.clear();</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;        <a class="code" href="classItem__factory.html#ae5901cfccc849eb4f9de7020f943de8f">set_techniques_from_json</a>( jo, <span class="stringliteral">&quot;techniques&quot;</span>, def );</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;extend&quot;</span> ) ) {</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;extend&quot;</span> );</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;            tmp.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;            <a class="code" href="classItem__factory.html#a0106091d79469a8ecad883461887e17f">extend_techniques_from_json</a>( tmp, <span class="stringliteral">&quot;techniques&quot;</span>, def );</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;        }</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;delete&quot;</span> ) ) {</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;delete&quot;</span> );</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;            tmp.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;            <a class="code" href="classItem__factory.html#a8eb9ad4a4aff21369193c164c959f693">delete_techniques_from_json</a>( tmp, <span class="stringliteral">&quot;techniques&quot;</span>, def );</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;        }</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    }</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160; </div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    <a class="code" href="classItem__factory.html#a953a512ac8ea396a90d91abfa004b236">set_use_methods_from_json</a>( jo, <span class="stringliteral">&quot;use_action&quot;</span>, def.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>, def.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a> );</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    <a class="code" href="classItem__factory.html#a953a512ac8ea396a90d91abfa004b236">set_use_methods_from_json</a>( jo, <span class="stringliteral">&quot;tick_action&quot;</span>, def.<a class="code" href="structitype.html#ab7049a03e8d4203a2d501f1556595fb0">tick_action</a>, def.<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a> );</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160; </div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;countdown_interval&quot;</span>, def.<a class="code" href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">countdown_interval</a> );</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;revert_to&quot;</span>, def.<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a>, <a class="code" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a> );</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160; </div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;countdown_action&quot;</span> ) ) {</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;        def.<a class="code" href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">countdown_action</a> = <a class="code" href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">usage_from_string</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;countdown_action&quot;</span> ) );</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160; </div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;countdown_action&quot;</span> ) ) {</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;countdown_action&quot;</span> );</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;        <a class="code" href="structuse__function.html">use_function</a> fun = <a class="code" href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">usage_from_object</a>( tmp ).second;</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;        <span class="keywordflow">if</span>( fun ) {</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;            def.<a class="code" href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">countdown_action</a> = fun;</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;        }</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;    }</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160; </div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;drop_action&quot;</span> ) ) {</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;        def.<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a> = <a class="code" href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">usage_from_string</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;drop_action&quot;</span> ) );</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160; </div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <span class="stringliteral">&quot;drop_action&quot;</span> ) ) {</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> tmp = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;drop_action&quot;</span> );</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;        <a class="code" href="structuse__function.html">use_function</a> fun = <a class="code" href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">usage_from_object</a>( tmp ).second;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;        <span class="keywordflow">if</span>( fun ) {</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;            def.<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a> = fun;</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;        }</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    }</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160; </div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;looks_like&quot;</span>, def.<a class="code" href="structitype.html#a4e982ae6c205d1a157d2df129373eca3">looks_like</a> );</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160; </div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;conditional_names&quot;</span> ) ) {</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;        def.<a class="code" href="structitype.html#acaa924a27717e1a4f5fa3fb17a84383c">conditional_names</a>.clear();</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;conditional_names&quot;</span> ) ) {</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;            <a class="code" href="structconditional__name.html">conditional_name</a> cname;</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;            cname.<a class="code" href="structconditional__name.html#ac51a78e5f1662317a41ec1d63b903ece">type</a> = curr.get_enum_value&lt;<a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716">condition_type</a>&gt;( <span class="stringliteral">&quot;type&quot;</span> );</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;            cname.<a class="code" href="structconditional__name.html#a7f83a54f817bcd052f2a474d2d0c37a5">condition</a> = curr.get_string( <span class="stringliteral">&quot;condition&quot;</span> );</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;            cname.<a class="code" href="structconditional__name.html#aae6859a6f0c56830765ae70546da4eda">name</a> = <a class="code" href="classtranslation.html">translation</a>( <a class="code" href="structtranslation_1_1plural__tag.html">translation::plural_tag</a>() );</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;            cname.<a class="code" href="structconditional__name.html#a5624f9baee231d4671a641ba4d47df37">value</a> = curr.get_string( <span class="stringliteral">&quot;value&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;            <span class="keywordflow">if</span>( !curr.read( <span class="stringliteral">&quot;name&quot;</span>, cname.<a class="code" href="structconditional__name.html#aae6859a6f0c56830765ae70546da4eda">name</a> ) ) {</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;                curr.throw_error( <span class="stringliteral">&quot;name unspecified for conditional name&quot;</span> );</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;            }</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;            def.<a class="code" href="structitype.html#acaa924a27717e1a4f5fa3fb17a84383c">conditional_names</a>.push_back( cname );</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;        }</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    }</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160; </div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;armor_data&quot;</span>, def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;pet_armor_data&quot;</span>, def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;book_data&quot;</span>, def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <a class="code" href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">load_slot_optional</a>( def.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>, jo, <span class="stringliteral">&quot;gun_data&quot;</span>, src );</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;    <a class="code" href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">load_slot_optional</a>( def.<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>, jo, <span class="stringliteral">&quot;bionic_data&quot;</span>, src );</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;ammo_data&quot;</span>, def.<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;seed_data&quot;</span>, def.<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;brewable&quot;</span>, def.<a class="code" href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">brewable</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;compostable&quot;</span>, def.<a class="code" href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">compostable</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    <a class="code" href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">load_slot_optional</a>( def.<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>, jo, <span class="stringliteral">&quot;relic_data&quot;</span>, src );</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;milling&quot;</span>, def.<a class="code" href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">milling_data</a>, src == <span class="stringliteral">&quot;dda&quot;</span> );</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    <span class="comment">// optional gunmod slot may also specify mod data</span></div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;gunmod_data&quot;</span> ) ) {</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;        <span class="comment">// use the same JsonObject for the two load_slot calls to avoid</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        <span class="comment">// warnings about unvisited Json members</span></div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jo_gunmod = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;gunmod_data&quot;</span> );</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a>, jo_gunmod, src );</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>, jo_gunmod, src );</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    }</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160; </div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;abstract&quot;</span> ) ) {</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;abstract&quot;</span>, def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;id&quot;</span>, def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    }</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;pocket_data&quot;</span>, def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> );</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    <a class="code" href="classItem__factory.html#ace21fd3d902abf111361b275803d2862">check_and_create_magazine_pockets</a>( def );</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    <a class="code" href="classItem__factory.html#ae916dfa1b226c1fa141f4d3515640c2f">add_special_pockets</a>( def );</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160; </div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">if</span>( !def.<a class="code" href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">src</a>.empty() &amp;&amp; def.<a class="code" href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">src</a>.back().first != def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ) {</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;        def.<a class="code" href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">src</a>.clear();</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    }</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    def.<a class="code" href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">src</a>.emplace_back( def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>, <a class="code" href="classstring__id.html">mod_id</a>( src ) );</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160; </div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a8f4b158de33b6320ba43249b005a2f94">magazines</a>.empty() ) {</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;        <a class="code" href="item__factory_8cpp.html#a758ba951e1ce75ec28480d33020ad4d8">migrate_mag_from_pockets</a>( def );</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    }</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> &amp;&amp; def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity == 0 ) {</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;        <span class="keywordtype">int</span> largest = 0;</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : def.<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;atype : def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type ) {</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;                <span class="keywordtype">int</span> current = pocket.<a class="code" href="classpocket__data.html#a5a5e9ddb054fd73b3806cdc892d6f73e">ammo_restriction</a>[atype];</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;                largest = largest &lt; current ? current : largest;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;            }</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        }</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity = largest;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    }</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160; </div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    <span class="comment">// snippet_category should be loaded after def.id is determined</span></div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;snippet_category&quot;</span> ) ) {</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        <span class="comment">// auto-create a category that is unlikely to already be used and put the</span></div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;        <span class="comment">// snippets in it.</span></div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;        def.<a class="code" href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">snippet_category</a> = <span class="stringliteral">&quot;auto:&quot;</span> + def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;        <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">add_snippets_from_json</a>( def.<a class="code" href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">snippet_category</a>, jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;snippet_category&quot;</span> ) );</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        def.<a class="code" href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">snippet_category</a> = jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;snippet_category&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    }</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160; </div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    <a class="code" href="generic__factory_8h.html#a43443191f61bb76aca1c2895eea4ad8f">optional</a>( jo, def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a>, <span class="stringliteral">&quot;expand_snippets&quot;</span>, def.<a class="code" href="structitype.html#a3bb287064006eccf3ef665895976bc7c">expand_snippets</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160; </div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    <span class="comment">// potentially replace materials and update their values</span></div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> replace_val = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;replace_materials&quot;</span> );</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    replace_val.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    <a class="code" href="item__factory_8cpp.html#a2c6f867661a6caf8fb64876c9307f0f6">replace_materials</a>( replace_val, def );</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160; </div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;abstract&quot;</span> ) ) {</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <a class="code" href="classItem__factory.html#a78c867f6a9f3fd09db30e3c3e3d4303f">m_abstracts</a>[ def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ] = def;</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.count( def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ) != 0 ) {</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;            <a class="code" href="structmod__tracker.html#af90cb04b24483b9acbabe29829fe7e2b">mod_tracker::check_duplicate_entries</a>( <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>[def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a>], def );</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;        }</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;        <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>[ def.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> ] = def;</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;    }</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;}</div>
<div class="ttc" id="acached__options_8cpp_html_ae70cf836c2c19d6b14b0332b18798766"><div class="ttname"><a href="cached__options_8cpp.html#ae70cf836c2c19d6b14b0332b18798766">check_plural</a></div><div class="ttdeci">check_plural_t check_plural</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00033">cached_options.cpp:33</a></div></div>
<div class="ttc" id="acached__options_8h_html_ac77e04889b244d7c30f308cbb8b8aea4a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="cached__options_8h.html#ac77e04889b244d7c30f308cbb8b8aea4a334c4a4c42fdb79d7ebc3e73b517e6f8">check_plural_t::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">cata_variant_type::skill_id</a></div><div class="ttdeci">@ skill_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">cata_variant_type::item_group_id</a></div><div class="ttdeci">@ item_group_id</div></div>
<div class="ttc" id="aclassItem__factory_html_a0106091d79469a8ecad883461887e17f"><div class="ttname"><a href="classItem__factory.html#a0106091d79469a8ecad883461887e17f">Item_factory::extend_techniques_from_json</a></div><div class="ttdeci">void extend_techniques_from_json(const JsonObject &amp;jo, std::string_view member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04761">item_factory.cpp:4761</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a648a5e87def27dd301a2cd2db6b60f8d"><div class="ttname"><a href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">Item_factory::load_slot</a></div><div class="ttdeci">void load_slot(cata::value_ptr&lt; SlotType &gt; &amp;slotptr, const JsonObject &amp;jo, const std::string &amp;src)</div><div class="ttdoc">Load the data of the slot struct.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l02578">item_factory.cpp:2578</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a78c867f6a9f3fd09db30e3c3e3d4303f"><div class="ttname"><a href="classItem__factory.html#a78c867f6a9f3fd09db30e3c3e3d4303f">Item_factory::m_abstracts</a></div><div class="ttdeci">std::map&lt; itype_id, itype &gt; m_abstracts</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00276">item_factory.h:276</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a8eb9ad4a4aff21369193c164c959f693"><div class="ttname"><a href="classItem__factory.html#a8eb9ad4a4aff21369193c164c959f693">Item_factory::delete_techniques_from_json</a></div><div class="ttdeci">void delete_techniques_from_json(const JsonObject &amp;jo, std::string_view member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04769">item_factory.cpp:4769</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a9224daa04d7697778df62e68ac393b23"><div class="ttname"><a href="classItem__factory.html#a9224daa04d7697778df62e68ac393b23">Item_factory::relative_qualities_from_json</a></div><div class="ttdeci">void relative_qualities_from_json(const JsonObject &amp;jo, std::string_view member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04731">item_factory.cpp:4731</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a953a512ac8ea396a90d91abfa004b236"><div class="ttname"><a href="classItem__factory.html#a953a512ac8ea396a90d91abfa004b236">Item_factory::set_use_methods_from_json</a></div><div class="ttdeci">void set_use_methods_from_json(const JsonObject &amp;jo, const std::string &amp;member, std::map&lt; std::string, use_function &gt; &amp;use_methods, std::map&lt; std::string, int &gt; &amp;ammo_scale)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05190">item_factory.cpp:5190</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aa4490e119ea3ec245b0de626e0f36ca0"><div class="ttname"><a href="classItem__factory.html#aa4490e119ea3ec245b0de626e0f36ca0">Item_factory::load_slot_optional</a></div><div class="ttdeci">void load_slot_optional(cata::value_ptr&lt; SlotType &gt; &amp;slotptr, const JsonObject &amp;jo, std::string_view member, const std::string &amp;src)</div><div class="ttdoc">Load item the item slot if present in json.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l02588">item_factory.cpp:2588</a></div></div>
<div class="ttc" id="aclassItem__factory_html_abd13937eb5ca9022bed121004829e4fd"><div class="ttname"><a href="classItem__factory.html#abd13937eb5ca9022bed121004829e4fd">Item_factory::set_qualities_from_json</a></div><div class="ttdeci">void set_qualities_from_json(const JsonObject &amp;jo, const std::string &amp;member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04687">item_factory.cpp:4687</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ac2b39c9a10e628b86b5bf37d82b9e453"><div class="ttname"><a href="classItem__factory.html#ac2b39c9a10e628b86b5bf37d82b9e453">Item_factory::extend_qualities_from_json</a></div><div class="ttdeci">void extend_qualities_from_json(const JsonObject &amp;jo, std::string_view member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04712">item_factory.cpp:4712</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ace21fd3d902abf111361b275803d2862"><div class="ttname"><a href="classItem__factory.html#ace21fd3d902abf111361b275803d2862">Item_factory::check_and_create_magazine_pockets</a></div><div class="ttdeci">void check_and_create_magazine_pockets(itype &amp;def)</div><div class="ttdoc">a temporary function to aid in nested container migration of magazine and gun json</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03774">item_factory.cpp:3774</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ae5901cfccc849eb4f9de7020f943de8f"><div class="ttname"><a href="classItem__factory.html#ae5901cfccc849eb4f9de7020f943de8f">Item_factory::set_techniques_from_json</a></div><div class="ttdeci">void set_techniques_from_json(const JsonObject &amp;jo, const std::string_view &amp;member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04744">item_factory.cpp:4744</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ae858c09c799baa5ab83217cbab2a9b0b"><div class="ttname"><a href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">Item_factory::usage_from_object</a></div><div class="ttdeci">std::pair&lt; std::string, use_function &gt; usage_from_object(const JsonObject &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05254">item_factory.cpp:5254</a></div></div>
<div class="ttc" id="aclassItem__factory_html_ae916dfa1b226c1fa141f4d3515640c2f"><div class="ttname"><a href="classItem__factory.html#ae916dfa1b226c1fa141f4d3515640c2f">Item_factory::add_special_pockets</a></div><div class="ttdeci">void add_special_pockets(itype &amp;def)</div><div class="ttdoc">adds the pockets that are not encoded in json - CORPSE, MOD, etc.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03855">item_factory.cpp:3855</a></div></div>
<div class="ttc" id="aclassItem__factory_html_aeb0fbd130ad5c8ed4911bc2a18a2ac0b"><div class="ttname"><a href="classItem__factory.html#aeb0fbd130ad5c8ed4911bc2a18a2ac0b">Item_factory::delete_qualities_from_json</a></div><div class="ttdeci">void delete_qualities_from_json(const JsonObject &amp;jo, std::string_view member, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04720">item_factory.cpp:4720</a></div></div>
<div class="ttc" id="aclassJsonArray_html_a0b9f2991ca4cbc0d3181d1c87314067d"><div class="ttname"><a href="classJsonArray.html#a0b9f2991ca4cbc0d3181d1c87314067d">JsonArray::next_string</a></div><div class="ttdeci">std::string next_string()</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00692">flexbuffer_json-inl.h:692</a></div></div>
<div class="ttc" id="aclassJsonArray_html_a12e952546232a62428cb2a1741364006"><div class="ttname"><a href="classJsonArray.html#a12e952546232a62428cb2a1741364006">JsonArray::has_more</a></div><div class="ttdeci">bool has_more() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00463">flexbuffer_json.h:463</a></div></div>
<div class="ttc" id="aclassJsonArray_html_a4da53dba40ac6d4846f6d4a36aa72af4"><div class="ttname"><a href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">JsonArray::get_string</a></div><div class="ttdeci">std::string get_string(size_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00633">flexbuffer_json-inl.h:633</a></div></div>
<div class="ttc" id="aclassJsonArray_html_aebd5eafa8b91235429384a49abc0cab4"><div class="ttname"><a href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">JsonArray::get_array</a></div><div class="ttdeci">JsonArray get_array(size_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00648">flexbuffer_json-inl.h:648</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a332ecdfbbcefd21204fad5e03ff43735"><div class="ttname"><a href="classJsonObject.html#a332ecdfbbcefd21204fad5e03ff43735">JsonObject::get_string_array</a></div><div class="ttdeci">std::vector&lt; std::string &gt; get_string_array(std::string_view name) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00919">flexbuffer_json-inl.h:919</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonObject_html_af3e3ae76afc340c1fa3510acaaba57b8"><div class="ttname"><a href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">JsonObject::throw_error</a></div><div class="ttdeci">void throw_error(const std::string &amp;err) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00353">flexbuffer_json.cpp:353</a></div></div>
<div class="ttc" id="aclassauto__flags__reader_html"><div class="ttname"><a href="classauto__flags__reader.html">auto_flags_reader</a></div><div class="ttdoc">Converts the JSON string to some type that must be construable from a std::string,...</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l01179">generic_factory.h:1180</a></div></div>
<div class="ttc" id="aclassrestore__on__out__of__scope_html"><div class="ttname"><a href="classrestore__on__out__of__scope.html">restore_on_out_of_scope</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__scope__helpers_8h_source.html#l00031">cata_scope_helpers.h:32</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a55d727b514e4af846a131fa956763637"><div class="ttname"><a href="classsnippet__library.html#a55d727b514e4af846a131fa956763637">snippet_library::add_snippets_from_json</a></div><div class="ttdeci">void add_snippets_from_json(const std::string &amp;category, const JsonArray &amp;jarr)</div><div class="ttdoc">Load all snippet definitions in the json array into given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00031">text_snippets.cpp:31</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a4a88185cb5fcb714421d6bc682481d5b"><div class="ttname"><a href="color_8cpp.html#a4a88185cb5fcb714421d6bc682481d5b">color_from_string</a></div><div class="ttdeci">nc_color color_from_string(const std::string_view color, const report_color_error color_error)</div><div class="ttdoc">Given the name of a foreground color, returns the nc_color value that matches.</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00629">color.cpp:629</a></div></div>
<div class="ttc" id="adamage_8cpp_html_a4ee1d4ba518b2becb0d1041a010ce7f5"><div class="ttname"><a href="damage_8cpp.html#a4ee1d4ba518b2becb0d1041a010ce7f5">load_damage_instance</a></div><div class="ttdeci">damage_instance load_damage_instance(const JsonObject &amp;jo)</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00734">damage.cpp:734</a></div></div>
<div class="ttc" id="adamage_8cpp_html_a73cbc152b1401bb2312ca654430fe17b"><div class="ttname"><a href="damage_8cpp.html#a73cbc152b1401bb2312ca654430fe17b">load_damage_map</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; load_damage_map(const JsonObject &amp;jo, const std::set&lt; std::string &gt; &amp;ignored_keys)</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00768">damage.cpp:768</a></div></div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">bodygraph_var::temp</a></div><div class="ttdeci">@ temp</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5">phase_id</a></div><div class="ttdeci">phase_id</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00234">enums.h:234</a></div></div>
<div class="ttc" id="aexplosion_8cpp_html_ab8a73ef7725c30dd1cd66ed921df48d8"><div class="ttname"><a href="explosion_8cpp.html#ab8a73ef7725c30dd1cd66ed921df48d8">load_explosion_data</a></div><div class="ttdeci">explosion_data load_explosion_data(const JsonObject &amp;jo)</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8cpp_source.html#l00114">explosion.cpp:114</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a157369b3ee1f3f5a889eb1d42ed97638"><div class="ttname"><a href="item__factory_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a></div><div class="ttdeci">static const damage_type_id damage_bash(&quot;bash&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a2c6f867661a6caf8fb64876c9307f0f6"><div class="ttname"><a href="item__factory_8cpp.html#a2c6f867661a6caf8fb64876c9307f0f6">replace_materials</a></div><div class="ttdeci">static void replace_materials(const JsonObject &amp;jo, itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04090">item_factory.cpp:4090</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a4fc872ef6e0700b1c459ec7e2e15eef9"><div class="ttname"><a href="item__factory_8cpp.html#a4fc872ef6e0700b1c459ec7e2e15eef9">load_memory_card_data</a></div><div class="ttdeci">static void load_memory_card_data(memory_card_info &amp;mcd, const JsonObject &amp;jo)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l02644">item_factory.cpp:2644</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a758ba951e1ce75ec28480d33020ad4d8"><div class="ttname"><a href="item__factory_8cpp.html#a758ba951e1ce75ec28480d33020ad4d8">migrate_mag_from_pockets</a></div><div class="ttdeci">static void migrate_mag_from_pockets(itype &amp;def)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04067">item_factory.cpp:4067</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a7db6e5faab30702fff7f018e77f088c3"><div class="ttname"><a href="item__factory_8cpp.html#a7db6e5faab30702fff7f018e77f088c3">item_category_veh_parts</a></div><div class="ttdeci">static const item_category_id item_category_veh_parts(&quot;veh_parts&quot;)</div></div>
<div class="ttc" id="aitype_8h_html_a900fa847a573c744b0b3ea04319d6276a3d517f8924ac7fd03699a29d97dc52d9"><div class="ttname"><a href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a3d517f8924ac7fd03699a29d97dc52d9">itype_variant_kind::generic</a></div><div class="ttdeci">@ generic</div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716">condition_type</a></div><div class="ttdeci">condition_type</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01128">itype.h:1128</a></div></div>
<div class="ttc" id="astructconditional__name_html"><div class="ttname"><a href="structconditional__name.html">conditional_name</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01144">itype.h:1144</a></div></div>
<div class="ttc" id="astructconditional__name_html_a5624f9baee231d4671a641ba4d47df37"><div class="ttname"><a href="structconditional__name.html#a5624f9baee231d4671a641ba4d47df37">conditional_name::value</a></div><div class="ttdeci">std::string value</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01150">itype.h:1150</a></div></div>
<div class="ttc" id="astructconditional__name_html_a7f83a54f817bcd052f2a474d2d0c37a5"><div class="ttname"><a href="structconditional__name.html#a7f83a54f817bcd052f2a474d2d0c37a5">conditional_name::condition</a></div><div class="ttdeci">std::string condition</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01148">itype.h:1148</a></div></div>
<div class="ttc" id="astructconditional__name_html_aae6859a6f0c56830765ae70546da4eda"><div class="ttname"><a href="structconditional__name.html#aae6859a6f0c56830765ae70546da4eda">conditional_name::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01153">itype.h:1153</a></div></div>
<div class="ttc" id="astructconditional__name_html_ac51a78e5f1662317a41ec1d63b903ece"><div class="ttname"><a href="structconditional__name.html#ac51a78e5f1662317a41ec1d63b903ece">conditional_name::type</a></div><div class="ttdeci">condition_type type</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01146">itype.h:1146</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a4591412e4fb2bce72f920783a39fda91"><div class="ttname"><a href="structdamage__instance.html#a4591412e4fb2bce72f920783a39fda91">damage_instance::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00474">damage.cpp:474</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a9eff5065ef6631935e95d061ca756ae4"><div class="ttname"><a href="structdamage__instance.html#a9eff5065ef6631935e95d061ca756ae4">damage_instance::add_damage</a></div><div class="ttdeci">void add_damage(const damage_type_id &amp;dt, float amt, float arpen=0.0f, float arpen_mult=1.0f, float dmg_mult=1.0f, float unc_arpen_mult=1.0f, float unc_dmg_mult=1.0f)</div><div class="ttdoc">Adds damage to the instance.</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00316">damage.cpp:316</a></div></div>
<div class="ttc" id="astructio_1_1acc__data_html"><div class="ttname"><a href="structio_1_1acc__data.html">io::acc_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04027">item_factory.cpp:4027</a></div></div>
<div class="ttc" id="astructitype_html_a025457dc0d2c2545e84cbb01533ed535"><div class="ttname"><a href="structitype.html#a025457dc0d2c2545e84cbb01533ed535">itype::min_dex</a></div><div class="ttdeci">int min_dex</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01366">itype.h:1366</a></div></div>
<div class="ttc" id="astructitype_html_a0a5d70cf8c883cd69f606eead503f322"><div class="ttname"><a href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">itype::snippet_category</a></div><div class="ttdeci">std::string snippet_category</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01264">itype.h:1264</a></div></div>
<div class="ttc" id="astructitype_html_a1016e2c82f06a7108507ecc42a10ff04"><div class="ttname"><a href="structitype.html#a1016e2c82f06a7108507ecc42a10ff04">itype::damage_max_</a></div><div class="ttdeci">static constexpr int damage_max_</div><div class="ttdoc">maximum amount of damage to a non- count_by_charges item</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01436">itype.h:1436</a></div></div>
<div class="ttc" id="astructitype_html_a134ff2407b627a2281b5393bd69cd78b"><div class="ttname"><a href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">itype::variants</a></div><div class="ttdeci">std::vector&lt; itype_variant_data &gt; variants</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01241">itype.h:1241</a></div></div>
<div class="ttc" id="astructitype_html_a15ce9f3914d2afb7992e4683a0996791"><div class="ttname"><a href="structitype.html#a15ce9f3914d2afb7992e4683a0996791">itype::explosion</a></div><div class="ttdeci">explosion_data explosion</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01352">itype.h:1352</a></div></div>
<div class="ttc" id="astructitype_html_a17e05c547c1dd581333c64cdb24299a0"><div class="ttname"><a href="structitype.html#a17e05c547c1dd581333c64cdb24299a0">itype::weapon_category</a></div><div class="ttdeci">std::set&lt; weapon_category_id &gt; weapon_category</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01283">itype.h:1283</a></div></div>
<div class="ttc" id="astructitype_html_a18f4ca3e43dc84bc3ae9ef11127e28a3"><div class="ttname"><a href="structitype.html#a18f4ca3e43dc84bc3ae9ef11127e28a3">itype::variant_kind</a></div><div class="ttdeci">itype_variant_kind variant_kind</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01371">itype.h:1371</a></div></div>
<div class="ttc" id="astructitype_html_a1f98e4086129c4db4a4903e7a6bdac72"><div class="ttname"><a href="structitype.html#a1f98e4086129c4db4a4903e7a6bdac72">itype::insulation_factor</a></div><div class="ttdeci">float insulation_factor</div><div class="ttdoc">How much insulation this item provides, either as a container, or as a vehicle base part.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01427">itype.h:1427</a></div></div>
<div class="ttc" id="astructitype_html_a203a347d8d0a2784baa916490e2f377a"><div class="ttname"><a href="structitype.html#a203a347d8d0a2784baa916490e2f377a">itype::min_int</a></div><div class="ttdeci">int min_int</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01367">itype.h:1367</a></div></div>
<div class="ttc" id="astructitype_html_a22e5b87c820d8b3323ffb43788bfe17c"><div class="ttname"><a href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">itype::m_to_hit</a></div><div class="ttdeci">int m_to_hit</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01416">itype.h:1416</a></div></div>
<div class="ttc" id="astructitype_html_a26a1d2bbc02a4763711cdd9f817f68b6"><div class="ttname"><a href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">itype::countdown_interval</a></div><div class="ttdeci">time_duration countdown_interval</div><div class="ttdoc">If positive starts countdown to countdown_action at item creation.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01376">itype.h:1376</a></div></div>
<div class="ttc" id="astructitype_html_a27af038e705697a2b9feff2a14e9cef5"><div class="ttname"><a href="structitype.html#a27af038e705697a2b9feff2a14e9cef5">itype::repairs_like</a></div><div class="ttdeci">itype_id repairs_like</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01262">itype.h:1262</a></div></div>
<div class="ttc" id="astructitype_html_a2e3c835eaac65d9922f07f99f2f3cf5d"><div class="ttname"><a href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">itype::countdown_action</a></div><div class="ttdeci">use_function countdown_action</div><div class="ttdoc">Action to take when countdown expires.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01222">itype.h:1222</a></div></div>
<div class="ttc" id="astructitype_html_a33aeb53774679283298d0202ae3e78ce"><div class="ttname"><a href="structitype.html#a33aeb53774679283298d0202ae3e78ce">itype::bionic</a></div><div class="ttdeci">cata::value_ptr&lt; islot_bionic &gt; bionic</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01211">itype.h:1211</a></div></div>
<div class="ttc" id="astructitype_html_a3425c169f961247fd33daa19b98934ce"><div class="ttname"><a href="structitype.html#a3425c169f961247fd33daa19b98934ce">itype::min_per</a></div><div class="ttdeci">int min_per</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01368">itype.h:1368</a></div></div>
<div class="ttc" id="astructitype_html_a37254c7bdbbddd208cc69e2338ab833b"><div class="ttname"><a href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">itype::pet_armor</a></div><div class="ttdeci">cata::value_ptr&lt; islot_pet_armor &gt; pet_armor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01202">itype.h:1202</a></div></div>
<div class="ttc" id="astructitype_html_a3bb287064006eccf3ef665895976bc7c"><div class="ttname"><a href="structitype.html#a3bb287064006eccf3ef665895976bc7c">itype::expand_snippets</a></div><div class="ttdeci">bool expand_snippets</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01452">itype.h:1452</a></div></div>
<div class="ttc" id="astructitype_html_a3d7692cff108d3b8c59ca0847d25a45c"><div class="ttname"><a href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">itype::phase</a></div><div class="ttdeci">phase_id phase</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01373">itype.h:1373</a></div></div>
<div class="ttc" id="astructitype_html_a4025c470ee962b556a984ad5acbf9e63"><div class="ttname"><a href="structitype.html#a4025c470ee962b556a984ad5acbf9e63">itype::picture_id</a></div><div class="ttdeci">ascii_art_id picture_id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01266">itype.h:1266</a></div></div>
<div class="ttc" id="astructitype_html_a402963af27c727a87b20bddb4362754e"><div class="ttname"><a href="structitype.html#a402963af27c727a87b20bddb4362754e">itype::default_container_sealed</a></div><div class="ttdeci">bool default_container_sealed</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01443">itype.h:1443</a></div></div>
<div class="ttc" id="astructitype_html_a47b4618adf9e32c2e8e1a15f82588ac9"><div class="ttname"><a href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">itype::compostable</a></div><div class="ttdeci">cata::value_ptr&lt; islot_compostable &gt; compostable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01200">itype.h:1200</a></div></div>
<div class="ttc" id="astructitype_html_a4b9d5e3c1c7e05bbdbbb8f253a73d8da"><div class="ttname"><a href="structitype.html#a4b9d5e3c1c7e05bbdbbb8f253a73d8da">itype::memory_card_data</a></div><div class="ttdeci">cata::value_ptr&lt; memory_card_info &gt; memory_card_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01350">itype.h:1350</a></div></div>
<div class="ttc" id="astructitype_html_a4e982ae6c205d1a157d2df129373eca3"><div class="ttname"><a href="structitype.html#a4e982ae6c205d1a157d2df129373eca3">itype::looks_like</a></div><div class="ttdeci">itype_id looks_like</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01259">itype.h:1259</a></div></div>
<div class="ttc" id="astructitype_html_a5122ad2da0463bc322c472df1dc9ce43"><div class="ttname"><a href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">itype::revert_to</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; revert_to</div><div class="ttdoc">If set the item will revert to this after countdown.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01382">itype.h:1382</a></div></div>
<div class="ttc" id="astructitype_html_a677f1de85e246b6f7e91a8ff70f3facf"><div class="ttname"><a href="structitype.html#a677f1de85e246b6f7e91a8ff70f3facf">itype::solar_efficiency</a></div><div class="ttdeci">float solar_efficiency</div><div class="ttdoc">Efficiency of solar energy conversion for solarpacks.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01432">itype.h:1432</a></div></div>
<div class="ttc" id="astructitype_html_a6f46e6ed5941eccded3fe37eba0491e7"><div class="ttname"><a href="structitype.html#a6f46e6ed5941eccded3fe37eba0491e7">itype::item_variables</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; item_variables</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01297">itype.h:1297</a></div></div>
<div class="ttc" id="astructitype_html_a78dfdecbef70d937bd669c233af65693"><div class="ttname"><a href="structitype.html#a78dfdecbef70d937bd669c233af65693">itype::nanofab_template_group</a></div><div class="ttdeci">item_group_id nanofab_template_group</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01341">itype.h:1341</a></div></div>
<div class="ttc" id="astructitype_html_a85b8077cdf6fc2230243b1a7df63cae0"><div class="ttname"><a href="structitype.html#a85b8077cdf6fc2230243b1a7df63cae0">itype::degrade_increments_</a></div><div class="ttdeci">int degrade_increments_</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01437">itype.h:1437</a></div></div>
<div class="ttc" id="astructitype_html_a88f1b039c08faacccaa9d637f894ee7f"><div class="ttname"><a href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">itype::thrown_damage</a></div><div class="ttdeci">damage_instance thrown_damage</div><div class="ttdoc">Base damage output when thrown.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01247">itype.h:1247</a></div></div>
<div class="ttc" id="astructitype_html_aa36633e74f64e1f6daf003687ef114b0"><div class="ttname"><a href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">itype::source_monster</a></div><div class="ttdeci">mtype_id source_monster</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01344">itype.h:1344</a></div></div>
<div class="ttc" id="astructitype_html_aaf325d340c06130e2fd994e54400a012"><div class="ttname"><a href="structitype.html#aaf325d340c06130e2fd994e54400a012">itype::default_container</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; default_container</div><div class="ttdoc">unique string identifier for this type</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01280">itype.h:1280</a></div></div>
<div class="ttc" id="astructitype_html_ab5a0c74951d7c96f34dbb6da4824f373"><div class="ttname"><a href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">itype::milling_data</a></div><div class="ttdeci">cata::value_ptr&lt; islot_milling &gt; milling_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01215">itype.h:1215</a></div></div>
<div class="ttc" id="astructitype_html_ab7049a03e8d4203a2d501f1556595fb0"><div class="ttname"><a href="structitype.html#ab7049a03e8d4203a2d501f1556595fb0">itype::tick_action</a></div><div class="ttdeci">std::map&lt; std::string, use_function &gt; tick_action</div><div class="ttdoc">Actions to take when item is processed.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01225">itype.h:1225</a></div></div>
<div class="ttc" id="astructitype_html_ab7a866401e21c24a50a5823c5dbc80f8"><div class="ttname"><a href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">itype::default_container_variant</a></div><div class="ttdeci">std::optional&lt; std::string &gt; default_container_variant</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01281">itype.h:1281</a></div></div>
<div class="ttc" id="astructitype_html_abef0d8869ced8040dc3004db7db39d57"><div class="ttname"><a href="structitype.html#abef0d8869ced8040dc3004db7db39d57">itype::min_skills</a></div><div class="ttdeci">std::map&lt; skill_id, int &gt; min_skills</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01326">itype.h:1326</a></div></div>
<div class="ttc" id="astructitype_html_ac59fb8f044e4a3841db679ecf8e646a7"><div class="ttname"><a href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">itype::src</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; itype_id, mod_id &gt; &gt; src</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01238">itype.h:1238</a></div></div>
<div class="ttc" id="astructitype_html_ac93d9775de15087ba59da8d48e89cb6f"><div class="ttname"><a href="structitype.html#ac93d9775de15087ba59da8d48e89cb6f">itype::emits</a></div><div class="ttdeci">std::set&lt; emit_id &gt; emits</div><div class="ttdoc">Fields to emit when item is in active state.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01321">itype.h:1321</a></div></div>
<div class="ttc" id="astructitype_html_acaa924a27717e1a4f5fa3fb17a84383c"><div class="ttname"><a href="structitype.html#acaa924a27717e1a4f5fa3fb17a84383c">itype::conditional_names</a></div><div class="ttdeci">std::vector&lt; conditional_name &gt; conditional_names</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01244">itype.h:1244</a></div></div>
<div class="ttc" id="astructitype_html_aceefd307b3bf001fbbcb5fde7bbcdd88"><div class="ttname"><a href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">itype::brewable</a></div><div class="ttdeci">cata::value_ptr&lt; islot_brewable &gt; brewable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01199">itype.h:1199</a></div></div>
<div class="ttc" id="astructitype_html_ad08f77aa643e069f397747aeec45eb94"><div class="ttname"><a href="structitype.html#ad08f77aa643e069f397747aeec45eb94">itype::default_mat</a></div><div class="ttdeci">material_id default_mat</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01309">itype.h:1309</a></div></div>
<div class="ttc" id="astructitype_html_ad3feb1bdd1db2f0b88ef6b74c25ef869"><div class="ttname"><a href="structitype.html#ad3feb1bdd1db2f0b88ef6b74c25ef869">itype::explode_in_fire</a></div><div class="ttdeci">bool explode_in_fire</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01446">itype.h:1446</a></div></div>
<div class="ttc" id="astructitype_html_ad55b9f82e65f57e8cfb6ecc4fc0445cb"><div class="ttname"><a href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">itype::seed</a></div><div class="ttdeci">cata::value_ptr&lt; islot_seed &gt; seed</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01213">itype.h:1213</a></div></div>
<div class="ttc" id="astructitype_html_ad8c03a65fe401a2c39c5f76116a46164"><div class="ttname"><a href="structitype.html#ad8c03a65fe401a2c39c5f76116a46164">itype::min_str</a></div><div class="ttdeci">int min_str</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01365">itype.h:1365</a></div></div>
<div class="ttc" id="astructitype_html_ada64ca1e7937118bb822cd9b0ea83497"><div class="ttname"><a href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">itype::properties</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; properties</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01294">itype.h:1294</a></div></div>
<div class="ttc" id="astructitype_html_adc032f577167e749b91124d76f56ddfe"><div class="ttname"><a href="structitype.html#adc032f577167e749b91124d76f56ddfe">itype::sym</a></div><div class="ttdeci">std::string sym</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01271">itype.h:1271</a></div></div>
<div class="ttc" id="astructitype_html_adfcdd019a681f5c3cbf60012b366c780"><div class="ttname"><a href="structitype.html#adfcdd019a681f5c3cbf60012b366c780">itype::integral_longest_side</a></div><div class="ttdeci">units::length integral_longest_side</div><div class="ttdoc">length added when integrated as part of another item (defaults to 0)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01405">itype.h:1405</a></div></div>
<div class="ttc" id="astructitype_html_ae2add2e58c239cd10a2ad4551d5c6fae"><div class="ttname"><a href="structitype.html#ae2add2e58c239cd10a2ad4551d5c6fae">itype::stackable_</a></div><div class="ttdeci">bool stackable_</div><div class="ttdoc">Can item be combined with other identical items?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01462">itype.h:1462</a></div></div>
<div class="ttc" id="astructitype_html_af2872b5b305f2b8ef7f3854929bd7aa7"><div class="ttname"><a href="structitype.html#af2872b5b305f2b8ef7f3854929bd7aa7">itype::chat_topics</a></div><div class="ttdeci">std::vector&lt; std::string &gt; chat_topics</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01256">itype.h:1256</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01420">itype.h:1420</a></div></div>
<div class="ttc" id="astructitype_html_afeecc38f5096d4bfcfa7be374dc3cbc2"><div class="ttname"><a href="structitype.html#afeecc38f5096d4bfcfa7be374dc3cbc2">itype::template_requirements</a></div><div class="ttdeci">requirement_id template_requirements</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01273">itype.h:1273</a></div></div>
<div class="ttc" id="astructmod__tracker_html_af90cb04b24483b9acbabe29829fe7e2b"><div class="ttname"><a href="structmod__tracker.html#af90cb04b24483b9acbabe29829fe7e2b">mod_tracker::check_duplicate_entries</a></div><div class="ttdeci">static void check_duplicate_entries(const T &amp;n, const T &amp;)</div><div class="ttdoc">Dummy function, for if those conditions are not satisfied.</div><div class="ttdef"><b>Definition:</b> <a href="mod__tracker_8h_source.html#l00061">mod_tracker.h:61</a></div></div>
<div class="ttc" id="astructtranslation_1_1plural__tag_html"><div class="ttname"><a href="structtranslation_1_1plural__tag.html">translation::plural_tag</a></div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00020">translation.h:20</a></div></div>
<div class="ttc" id="atype__id_8h_html_a569ce0271cf4ab170e63bb05658be142"><div class="ttname"><a href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a></div><div class="ttdeci">string_id&lt; material_type &gt; material_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00143">type_id.h:143</a></div></div>
<div class="ttc" id="atype__id_8h_html_afb36dc6d5925e5112e70d60a171ebeb1"><div class="ttname"><a href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a></div><div class="ttdeci">string_id&lt; requirement_data &gt; requirement_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00217">type_id.h:217</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00316">damage_instance::add_damage()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00031">snippet_library::add_snippets_from_json()</a>, <a class="el" href="item__factory_8cpp_source.html#l03855">add_special_pockets()</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="itype_8h_source.html#l01212">itype::ammo</a>, <a class="el" href="item__pocket_8h_source.html#l00536">pocket_data::ammo_restriction</a>, <a class="el" href="itype_8h_source.html#l01318">itype::ammo_scale</a>, <a class="el" href="itype_8h_source.html#l01201">itype::armor</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l01211">itype::bionic</a>, <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="itype_8h_source.html#l01199">itype::brewable</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8h_source.html#l01269">itype::category_force</a>, <a class="el" href="itype_8h_source.html#l01288">itype::charged_qualities</a>, <a class="el" href="itype_8h_source.html#l01256">itype::chat_topics</a>, <a class="el" href="item__factory_8cpp_source.html#l03774">check_and_create_magazine_pockets()</a>, <a class="el" href="mod__tracker_8h_source.html#l00061">mod_tracker::check_duplicate_entries()</a>, <a class="el" href="cached__options_8cpp_source.html#l00033">check_plural</a>, <a class="el" href="damage_8cpp_source.html#l00474">damage_instance::clear()</a>, <a class="el" href="itype_8h_source.html#l01420">itype::color</a>, <a class="el" href="color_8cpp_source.html#l00629">color_from_string()</a>, <a class="el" href="itype_8h_source.html#l01200">itype::compostable</a>, <a class="el" href="itype_8h_source.html#l01148">conditional_name::condition</a>, <a class="el" href="itype_8h_source.html#l01244">itype::conditional_names</a>, <a class="el" href="itype_8h_source.html#l01501">itype::count_by_charges()</a>, <a class="el" href="itype_8h_source.html#l01222">itype::countdown_action</a>, <a class="el" href="itype_8h_source.html#l01376">itype::countdown_interval</a>, <a class="el" href="item__factory_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>, <a class="el" href="itype_8h_source.html#l01436">itype::damage_max_</a>, <a class="el" href="itype_8h_source.html#l01280">itype::default_container</a>, <a class="el" href="itype_8h_source.html#l01443">itype::default_container_sealed</a>, <a class="el" href="itype_8h_source.html#l01281">itype::default_container_variant</a>, <a class="el" href="itype_8h_source.html#l01309">itype::default_mat</a>, <a class="el" href="itype_8h_source.html#l01437">itype::degrade_increments_</a>, <a class="el" href="item__factory_8cpp_source.html#l04720">delete_qualities_from_json()</a>, <a class="el" href="item__factory_8cpp_source.html#l04769">delete_techniques_from_json()</a>, <a class="el" href="itype_8h_source.html#l01354">itype::description</a>, <a class="el" href="itype_8h_source.html#l01219">itype::drop_action</a>, <a class="el" href="itype_8h_source.html#l01321">itype::emits</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00402">JsonArray::empty()</a>, <a class="el" href="itype_8h_source.html#l01452">itype::expand_snippets</a>, <a class="el" href="itype_8h_source.html#l01446">itype::explode_in_fire</a>, <a class="el" href="itype_8h_source.html#l01352">itype::explosion</a>, <a class="el" href="item__factory_8cpp_source.html#l04712">extend_qualities_from_json()</a>, <a class="el" href="item__factory_8cpp_source.html#l04761">extend_techniques_from_json()</a>, <a class="el" href="itype_8h_source.html#l01332">itype::faults</a>, <a class="el" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a3d517f8924ac7fd03699a29d97dc52d9">generic</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00648">JsonArray::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00874">JsonObject::get_enum_value()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00633">JsonArray::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00919">JsonObject::get_string_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01069">JsonObject::get_tags()</a>, <a class="el" href="itype_8h_source.html#l01207">itype::gun</a>, <a class="el" href="itype_8h_source.html#l01208">itype::gunmod</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00956">JsonObject::has_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00463">JsonArray::has_more()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00990">JsonObject::has_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, <a class="el" href="itype_8h_source.html#l01427">itype::insulation_factor</a>, <a class="el" href="itype_8h_source.html#l01405">itype::integral_longest_side</a>, <a class="el" href="itype_8h_source.html#l01395">itype::integral_volume</a>, <a class="el" href="itype_8h_source.html#l01236">itype::integral_weight</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="item__factory_8cpp.html#a7db6e5faab30702fff7f018e77f088c3">item_category_veh_parts</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>, <a class="el" href="itype_8h_source.html#l01346">itype::item_tags</a>, <a class="el" href="itype_8h_source.html#l01297">itype::item_variables</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="damage_8cpp_source.html#l00734">load_damage_instance()</a>, <a class="el" href="damage_8cpp_source.html#l00768">load_damage_map()</a>, <a class="el" href="explosion_8cpp_source.html#l00114">load_explosion_data()</a>, <a class="el" href="item__factory_8cpp_source.html#l02644">load_memory_card_data()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, <a class="el" href="item__factory_8cpp_source.html#l02588">load_slot_optional()</a>, <a class="el" href="itype_8h_source.html#l01400">itype::longest_side</a>, <a class="el" href="itype_8h_source.html#l01259">itype::looks_like</a>, <a class="el" href="item__factory_8h_source.html#l00276">m_abstracts</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="itype_8h_source.html#l01416">itype::m_to_hit</a>, <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>, <a class="el" href="itype_8h_source.html#l01338">itype::magazine_default</a>, <a class="el" href="itype_8h_source.html#l01335">itype::magazines</a>, <a class="el" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>, <a class="el" href="itype_8h_source.html#l01363">itype::mat_portion_total</a>, <a class="el" href="itype_8h_source.html#l01303">itype::materials</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="itype_8h_source.html#l01441">itype::melee</a>, <a class="el" href="itype_8h_source.html#l01456">itype::melee_proportional</a>, <a class="el" href="itype_8h_source.html#l01459">itype::melee_relative</a>, <a class="el" href="itype_8h_source.html#l01350">itype::memory_card_data</a>, <a class="el" href="item__factory_8cpp_source.html#l04067">migrate_mag_from_pockets()</a>, <a class="el" href="itype_8h_source.html#l01215">itype::milling_data</a>, <a class="el" href="itype_8h_source.html#l01366">itype::min_dex</a>, <a class="el" href="itype_8h_source.html#l01367">itype::min_int</a>, <a class="el" href="itype_8h_source.html#l01368">itype::min_per</a>, <a class="el" href="itype_8h_source.html#l01326">itype::min_skills</a>, <a class="el" href="itype_8h_source.html#l01365">itype::min_str</a>, <a class="el" href="itype_8h_source.html#l01204">itype::mod</a>, <a class="el" href="itype_8h_source.html#l01153">conditional_name::name</a>, <a class="el" href="itype_8h_source.html#l01359">itype::name</a>, <a class="el" href="itype_8h_source.html#l01341">itype::nanofab_template_group</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00692">JsonArray::next_string()</a>, <a class="el" href="cached__options_8h.html#ac77e04889b244d7c30f308cbb8b8aea4a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="generic__factory_8h_source.html#l00829">optional()</a>, <a class="el" href="itype_8h_source.html#l01202">itype::pet_armor</a>, <a class="el" href="itype_8h_source.html#l01373">itype::phase</a>, <a class="el" href="itype_8h_source.html#l01266">itype::picture_id</a>, <a class="el" href="itype_8h_source.html#l01253">itype::pockets</a>, <a class="el" href="itype_8h_source.html#l01411">itype::price</a>, <a class="el" href="itype_8h_source.html#l01414">itype::price_post</a>, <a class="el" href="itype_8h_source.html#l01294">itype::properties</a>, <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="item__factory_8cpp_source.html#l04731">relative_qualities_from_json()</a>, <a class="el" href="itype_8h_source.html#l01214">itype::relic_data</a>, <a class="el" href="itype_8h_source.html#l01262">itype::repairs_like</a>, <a class="el" href="itype_8h_source.html#l01304">itype::repairs_with</a>, <a class="el" href="item__factory_8cpp_source.html#l04090">replace_materials()</a>, <a class="el" href="itype_8h_source.html#l01382">itype::revert_to</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="itype_8h_source.html#l01213">itype::seed</a>, <a class="el" href="item__factory_8cpp_source.html#l04687">set_qualities_from_json()</a>, <a class="el" href="item__factory_8cpp_source.html#l04744">set_techniques_from_json()</a>, <a class="el" href="item__factory_8cpp_source.html#l05190">set_use_methods_from_json()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, <a class="el" href="itype_8h_source.html#l01264">itype::snippet_category</a>, <a class="el" href="itype_8h_source.html#l01432">itype::solar_efficiency</a>, <a class="el" href="itype_8h_source.html#l01344">itype::source_monster</a>, <a class="el" href="itype_8h_source.html#l01238">itype::src</a>, <a class="el" href="itype_8h_source.html#l01462">itype::stackable_</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="creature_8h.html#a94b62ae7453fbe81377022bf1cdacd47a2133fd717402a7966ee88d06f9e0b792">strict</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="itype_8h_source.html#l01271">itype::sym</a>, <a class="el" href="itype_8h_source.html#l01323">itype::techniques</a>, <a class="el" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, <a class="el" href="itype_8h_source.html#l01273">itype::template_requirements</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00734">JsonArray::test_object()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00353">JsonObject::throw_error()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, <a class="el" href="itype_8h_source.html#l01247">itype::thrown_damage</a>, <a class="el" href="itype_8h_source.html#l01225">itype::tick_action</a>, <a class="el" href="itype_8h_source.html#l01146">conditional_name::type</a>, <a class="el" href="item__factory_8cpp_source.html#l05254">usage_from_object()</a>, <a class="el" href="item__factory_8cpp_source.html#l05276">usage_from_string()</a>, <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>, <a class="el" href="itype_8h_source.html#l01150">conditional_name::value</a>, <a class="el" href="itype_8h_source.html#l01371">itype::variant_kind</a>, <a class="el" href="itype_8h_source.html#l01241">itype::variants</a>, <a class="el" href="itype_8h_source.html#l01389">itype::volume</a>, <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>, <a class="el" href="itype_8h_source.html#l01283">itype::weapon_category</a>, and <a class="el" href="itype_8h_source.html#l01234">itype::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l02704">load_ammo()</a>, <a class="el" href="item__factory_8cpp_source.html#l02858">load_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03589">load_battery()</a>, <a class="el" href="item__factory_8cpp_source.html#l03624">load_bionic()</a>, <a class="el" href="item__factory_8cpp_source.html#l03256">load_book()</a>, <a class="el" href="item__factory_8cpp_source.html#l03450">load_comestible()</a>, <a class="el" href="item__factory_8cpp_source.html#l02734">load_engine()</a>, <a class="el" href="item__factory_8cpp_source.html#l03633">load_generic()</a>, <a class="el" href="item__factory_8cpp_source.html#l02848">load_gun()</a>, <a class="el" href="item__factory_8cpp_source.html#l03549">load_gunmod()</a>, <a class="el" href="item__factory_8cpp_source.html#l03570">load_magazine()</a>, <a class="el" href="item__factory_8cpp_source.html#l02877">load_pet_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03152">load_tool()</a>, <a class="el" href="item__factory_8cpp_source.html#l03215">load_tool_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03204">load_toolmod()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02764">load_wheel()</a>.</p>

</div>
</div>
<a id="ae6ee03edfb0eafee710569d8c6983c7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ee03edfb0eafee710569d8c6983c7d">&#9670;&nbsp;</a></span>load_battery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_battery </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03589">3589</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;{</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a> ) {</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;                def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a> = cata::make_value&lt;islot_battery&gt;();</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            }</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;            def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a> = cata::make_value&lt;islot_battery&gt;();</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        }</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        def.<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;load( jo );</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    }</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;}</div>
<div class="ttc" id="astructitype_html_a9bf7494805acc141b007ddade6a6313c"><div class="ttname"><a href="structitype.html#a9bf7494805acc141b007ddade6a6313c">itype::battery</a></div><div class="ttdeci">cata::value_ptr&lt; islot_battery &gt; battery</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01210">itype.h:1210</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01210">itype::battery</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="a1c35056fa9be3e2a54f3e0d64891ff01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c35056fa9be3e2a54f3e0d64891ff01">&#9670;&nbsp;</a></span>load_bionic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_bionic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03624">3624</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;{</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>, jo, src );</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;    }</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01211">itype::bionic</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>.</p>

</div>
</div>
<a id="a62bd969ef95b44af511ba6ea0db8c7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62bd969ef95b44af511ba6ea0db8c7b4">&#9670;&nbsp;</a></span>load_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_book </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03256">3256</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;{</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> ) {</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;                def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;                def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> = cata::make_value&lt;islot_book&gt;();</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            }</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> = cata::make_value&lt;islot_book&gt;();</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;        }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        def.<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;load( jo );</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    }</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="ab809a0f986be4cd520b8bb238ff9e717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab809a0f986be4cd520b8bb238ff9e717">&#9670;&nbsp;</a></span>load_comestible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_comestible </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03450">3450</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;{</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;stack_size&quot;</span>, def.<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a>, src == <span class="stringliteral">&quot;dda&quot;</span>, 1 );</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>, jo, src );</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    }</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="itype_8h_source.html#l01198">itype::comestible</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="itype_8h_source.html#l01408">itype::stack_size</a>.</p>

</div>
</div>
<a id="a95c2001cf13c3a43d0d260dfff6f070c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95c2001cf13c3a43d0d260dfff6f070c">&#9670;&nbsp;</a></span>load_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::load_definition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called before creating a new template and handles inheritance via copy-from May defer instantiation of the template if depends on other objects not as-yet loaded. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02598">2598</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;{</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( !<a class="code" href="classItem__factory.html#a505d771e637afa6c26124010e3c561cf">frozen</a> );</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;copy-from&quot;</span> ) ) {</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        <span class="comment">// if this is a new definition ensure we start with a clean itype</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        def = <a class="code" href="structitype.html">itype</a>();</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> copy_from;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;copy-from&quot;</span>, copy_from, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keyword">auto</span> base = <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.find( copy_from );</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span>( base != <a class="code" href="classItem__factory.html#aa8803d050f39c239c1fb55873cbe699c">m_templates</a>.end() ) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        def = base-&gt;second;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        def.<a class="code" href="structitype.html#a4e982ae6c205d1a157d2df129373eca3">looks_like</a> = copy_from;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    }</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keyword">auto</span> <span class="keyword">abstract</span> = <a class="code" href="classItem__factory.html#a78c867f6a9f3fd09db30e3c3e3d4303f">m_abstracts</a>.find( copy_from );</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">abstract</span> != <a class="code" href="classItem__factory.html#a78c867f6a9f3fd09db30e3c3e3d4303f">m_abstracts</a>.end() ) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        def = <span class="keyword">abstract</span>-&gt;second;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a4e982ae6c205d1a157d2df129373eca3">looks_like</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            def.<a class="code" href="structitype.html#a4e982ae6c205d1a157d2df129373eca3">looks_like</a> = copy_from;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    }</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <a class="code" href="item__factory_8cpp.html#a9c21005f31e0aa8c574e3a02f2d265db">deferred</a>.emplace_back( jo, src );</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    jo.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="item__factory_8cpp_source.html#l00124">deferred</a>, <a class="el" href="item__factory_8h_source.html#l00274">frozen</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="itype_8h_source.html#l01259">itype::looks_like</a>, <a class="el" href="item__factory_8h_source.html#l00276">m_abstracts</a>, <a class="el" href="item__factory_8h_source.html#l00278">m_templates</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l02704">load_ammo()</a>, <a class="el" href="item__factory_8cpp_source.html#l02858">load_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03589">load_battery()</a>, <a class="el" href="item__factory_8cpp_source.html#l03624">load_bionic()</a>, <a class="el" href="item__factory_8cpp_source.html#l03256">load_book()</a>, <a class="el" href="item__factory_8cpp_source.html#l03450">load_comestible()</a>, <a class="el" href="item__factory_8cpp_source.html#l02734">load_engine()</a>, <a class="el" href="item__factory_8cpp_source.html#l03633">load_generic()</a>, <a class="el" href="item__factory_8cpp_source.html#l02848">load_gun()</a>, <a class="el" href="item__factory_8cpp_source.html#l03549">load_gunmod()</a>, <a class="el" href="item__factory_8cpp_source.html#l03570">load_magazine()</a>, <a class="el" href="item__factory_8cpp_source.html#l02877">load_pet_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03152">load_tool()</a>, <a class="el" href="item__factory_8cpp_source.html#l03215">load_tool_armor()</a>, <a class="el" href="item__factory_8cpp_source.html#l03204">load_toolmod()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02764">load_wheel()</a>.</p>

</div>
</div>
<a id="a417909e28d2d1b631af25f5086130adf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417909e28d2d1b631af25f5086130adf">&#9670;&nbsp;</a></span>load_engine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_engine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02734">2734</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;{</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a> ) {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a> = cata::make_value&lt;islot_engine&gt;();</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            }</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;            def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a> = cata::make_value&lt;islot_engine&gt;();</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        }</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        def.<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a>-&gt;load( jo );</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    }</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;}</div>
<div class="ttc" id="astructitype_html_a6e22c966e0816d5b8ad665f74fc6aeaa"><div class="ttname"><a href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">itype::engine</a></div><div class="ttdeci">cata::value_ptr&lt; islot_engine &gt; engine</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01205">itype.h:1205</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01205">itype::engine</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="adcad005219724b3e6f1227ea3ebfdb2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcad005219724b3e6f1227ea3ebfdb2e">&#9670;&nbsp;</a></span>load_generic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_generic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03633">3633</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;{</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    }</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>.</p>

</div>
</div>
<a id="aec35ae92aa379ec2424d61507bf2e949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec35ae92aa379ec2424d61507bf2e949">&#9670;&nbsp;</a></span>load_gun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_gun </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02848">2848</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;{</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>, jo, src );</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    }</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01207">itype::gun</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>.</p>

</div>
</div>
<a id="a5228d89089a41c368b340915326bd7a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5228d89089a41c368b340915326bd7a6">&#9670;&nbsp;</a></span>load_gunmod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_gunmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03549">3549</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;{</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a>, jo, src );</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>, jo, src );</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    }</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01208">itype::gunmod</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="itype_8h_source.html#l01204">itype::mod</a>.</p>

</div>
</div>
<a id="a7baab0d89393eb43d382389bd63d98b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7baab0d89393eb43d382389bd63d98b2">&#9670;&nbsp;</a></span>load_item_blacklist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_item_blacklist </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l01625">1625</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;{</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordtype">bool</span> whitelist = json.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;whitelist&quot;</span> );</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    std::set&lt;itype_id&gt; tmp_blacklist;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    json.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;items&quot;</span>, tmp_blacklist, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="item__factory_8cpp.html#a4e6e2161caa3cdc6f4bfef029ac33a52">item_blacklist</a>.<a class="code" href="structitem__blacklist__t.html#a73650585b6e23df7af1ef2281f453c94">sub_blacklist</a>.emplace_back( whitelist, tmp_blacklist );</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00850">JsonObject::get_bool()</a>, <a class="el" href="item__factory_8cpp_source.html#l00122">item_blacklist</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, and <a class="el" href="item__factory_8h_source.html#l00071">item_blacklist_t::sub_blacklist</a>.</p>

</div>
</div>
<a id="aa921518ef46c16edea58a6bcada19191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa921518ef46c16edea58a6bcada19191">&#9670;&nbsp;</a></span>load_item_group() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_item_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;&#160;</td>
          <td class="paramname"><em>group_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ammo_chance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>magazine_chance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>context</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like above, but the above loads data from several members of the object, this function assume the given array is the "entries" member of the item group. </p>
<p>For each element in the array, <a class="el" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">Item_factory::add_entry</a> is called.</p>
<p>Assuming the input array looks like <code>[ x, y, z ]</code>, this function loads it like the above would load this object: </p><div class="fragment"><div class="line">{</div>
<div class="line">     <span class="stringliteral">&quot;subtype&quot;</span>: <span class="stringliteral">&quot;depends on is_collection parameter&quot;</span>,</div>
<div class="line">     <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;identifier&quot;</span>,</div>
<div class="line">     <span class="stringliteral">&quot;entries&quot;</span>: [ x, y, z ]</div>
<div class="line">}</div>
</div><!-- fragment --><p> Note that each entry in the array has to be a JSON object. The other function above can also load data from arrays of strings, where the strings are item or group ids. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05058">5058</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;{</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>.empty() ) {</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> = <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    }</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;    <span class="keyword">const</span> <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0">Item_group::Type</a> <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = is_collection ? <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d">Item_group::G_COLLECTION</a> : <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a17cdc67b4430f8aecea238b1930a237c">Item_group::G_DISTRIBUTION</a>;</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    std::unique_ptr&lt;Item_spawn_data&gt; &amp;isd = <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>[<a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>];</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;    <a class="code" href="classItem__group.html">Item_group</a> *<span class="keyword">const</span> ig =</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;        <a class="code" href="item__factory_8cpp.html#a1dbfaf2cefdebbb56ac2847f0c60b310">make_group_or_throw</a>( <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>, isd, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, ammo_chance, magazine_chance, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160; </div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> subobj : entries ) {</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;        <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *ig, subobj, <span class="stringliteral">&quot;entry within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>() );</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;    }</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;}</div>
<div class="ttc" id="aclassItem__group_html"><div class="ttname"><a href="classItem__group.html">Item_group</a></div><div class="ttdoc">This is a list of item spawns.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00352">item_group.h:353</a></div></div>
<div class="ttc" id="aclassItem__group_html_ae51de1ef43540d3d8671f68faaa88ea0"><div class="ttname"><a href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0">Item_group::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00356">item_group.h:356</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_acbce4f51ce80eba420fd6420bc7f5807"><div class="ttname"><a href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">Item_spawn_data::context</a></div><div class="ttdeci">const std::string &amp; context() const</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00180">item_group.h:180</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a1dbfaf2cefdebbb56ac2847f0c60b310"><div class="ttname"><a href="item__factory_8cpp.html#a1dbfaf2cefdebbb56ac2847f0c60b310">make_group_or_throw</a></div><div class="ttdeci">static Item_group * make_group_or_throw(const item_group_id &amp;group_id, std::unique_ptr&lt; Item_spawn_data &gt; &amp;isd, Item_group::Type t, int ammo_chance, int magazine_chance, const std::string &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04829">item_factory.cpp:4829</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02recipe__groups_8cpp_03_html_ad3ae3cc26f6d2a1604cf7ec01d4a3dfe"><div class="ttname"><a href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">anonymous_namespace{recipe_groups.cpp}::group_id</a></div><div class="ttdeci">string_id&lt; recipe_group_data &gt; group_id</div><div class="ttdef"><b>Definition:</b> <a href="recipe__groups_8cpp_source.html#l00022">recipe_groups.cpp:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="item__group_8h_source.html#l00180">Item_spawn_data::context()</a>, <a class="el" href="item__group_8h_source.html#l00357">Item_group::G_COLLECTION</a>, <a class="el" href="item__group_8h_source.html#l00358">Item_group::G_DISTRIBUTION</a>, <a class="el" href="item__factory_8cpp_source.html#l04829">make_group_or_throw()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="a79a031be684872453957ecfb19876fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79a031be684872453957ecfb19876fd9">&#9670;&nbsp;</a></span>load_item_group() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_item_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jsobj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for the init system (<a class="el" href="classDynamicDataLoader.html">DynamicDataLoader</a>), loads an item group definitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsobj</td><td>The json object to load from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classJsonError.html">JsonError</a></td><td>if the json object contains invalid data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05051">5051</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;{</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_group_id</a> <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>( jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;id&quot;</span> ) );</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> = jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;subtype&quot;</span>, <span class="stringliteral">&quot;old&quot;</span> );</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <a class="code" href="classItem__factory.html#a79a031be684872453957ecfb19876fd9">load_item_group</a>( jsobj, <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> );</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a79a031be684872453957ecfb19876fd9"><div class="ttname"><a href="classItem__factory.html#a79a031be684872453957ecfb19876fd9">Item_factory::load_item_group</a></div><div class="ttdeci">void load_item_group(const JsonObject &amp;jsobj)</div><div class="ttdoc">Callback for the init system (DynamicDataLoader), loads an item group definitions.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05051">item_factory.cpp:5051</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">ot_match_type::subtype</a></div><div class="ttdeci">@ subtype</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="item__group_8cpp_source.html#l01034">item_group::load_item_group()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a>.</p>

</div>
</div>
<a id="a2515a4326bf856be22d99aa247143529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2515a4326bf856be22d99aa247143529">&#9670;&nbsp;</a></span>load_item_group() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_item_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jsobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#af237c901b245e3a737fbb0d6a390d2a2">item_group_id</a> &amp;&#160;</td>
          <td class="paramname"><em>group_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>context</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a item group from json. </p>
<p>It differs from the other load_item_group function as it uses the ident and subtype given as parameter and does not look up those things in the json data (the json object here does not need to have them). This is intended for inline definitions of item groups, e.g. in monster death drops: the item group there is embedded into the monster type definition. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsobj</td><td>The json object to load from. </td></tr>
    <tr><td class="paramname">group_id</td><td>The ident of the item that is to be loaded. </td></tr>
    <tr><td class="paramname">subtype</td><td>The type of the item group, either "collection", "distribution" or "old" ("old" is a distribution, too). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classJsonError.html">JsonError</a></td><td>if the json object contains invalid data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05075">5075</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;{</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>.empty() ) {</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> = <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    }</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    std::unique_ptr&lt;Item_spawn_data&gt; &amp;isd = <a class="code" href="classItem__factory.html#a1aec789abd53810026e0d878c0069aea">m_template_groups</a>[<a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>];</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="comment">// If we copy-from, do copy-from</span></div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;    <span class="comment">// Otherwise, unconditionally overwrite</span></div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;copy-from&quot;</span> ) ) {</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;        <span class="comment">// We can only copy-from a group with the same id (for now)</span></div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;        <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;copy-from&quot;</span> ) != <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() ) {</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item group &#39;%s&#39; tries to copy from different group &#39;%s&#39;&quot;</span>, <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(),</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;                      jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;copy-from&quot;</span> ) );</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;        }</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;        isd.reset();</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    }</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160; </div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0">Item_group::Type</a> <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a876684fee2fb3551378e4fcea7a3757d">Item_group::G_COLLECTION</a>;</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> == <span class="stringliteral">&quot;old&quot;</span> || <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> == <span class="stringliteral">&quot;distribution&quot;</span> ) {</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;        <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="classItem__group.html#ae51de1ef43540d3d8671f68faaa88ea0a17cdc67b4430f8aecea238b1930a237c">Item_group::G_DISTRIBUTION</a>;</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> != <span class="stringliteral">&quot;collection&quot;</span> ) {</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;        jsobj.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <span class="stringliteral">&quot;subtype&quot;</span>, <span class="stringliteral">&quot;unknown item group type&quot;</span> );</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    }</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;    <a class="code" href="classItem__group.html">Item_group</a> *ig = <a class="code" href="item__factory_8cpp.html#a1dbfaf2cefdebbb56ac2847f0c60b310">make_group_or_throw</a>( <a class="code" href="namespaceanonymous__namespace_02recipe__groups_8cpp_03.html#ad3ae3cc26f6d2a1604cf7ec01d4a3dfe">group_id</a>, isd, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, jsobj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;ammo&quot;</span>, 0 ),</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;                                          jsobj.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;magazine&quot;</span>, 0 ), <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160; </div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;    <span class="comment">// If it extends, read from the extends block (and extend our itemgroup)</span></div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;    <span class="comment">// Otherwise, read from the object into the fresh itemgroup</span></div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;    <span class="comment">// And don&#39;t read if it has copy-from because it will not handle that correctly.</span></div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;extend&quot;</span> ) ) {</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;        <a class="code" href="classItem__factory.html#aee57318acde8d116c81f6a7ca19b1642">load_item_group_data</a>( jsobj.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;extend&quot;</span> ), ig, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> );</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;copy-from&quot;</span> ) ) {</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;        <a class="code" href="classItem__factory.html#aee57318acde8d116c81f6a7ca19b1642">load_item_group_data</a>( jsobj, ig, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> );</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    }</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160; </div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;container-item&quot;</span> ) ) {</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;        ig-&gt;<a class="code" href="classItem__spawn__data.html#a9d27a15638ee905141781965b4d80d99">container_item</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( jsobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;container-item&quot;</span> ) );</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;container-item&quot;</span> ) ) {</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> jo = jsobj.<a class="code" href="classJsonObject.html#ab71a096f97edf5ea339e44ac4dbe39db">get_member</a>( <span class="stringliteral">&quot;container-item&quot;</span> );</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        ig-&gt;<a class="code" href="classItem__spawn__data.html#a9d27a15638ee905141781965b4d80d99">container_item</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;item&quot;</span> ) );</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;        ig-&gt;<a class="code" href="classItem__spawn__data.html#a5a0ea625737d6bb8a872273c47fba1bc">container_item_variant</a> = jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;variant&quot;</span> );</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    }</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160; </div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;on_overflow&quot;</span>, ig-&gt;<a class="code" href="classItem__spawn__data.html#a3a0aec4747b75a45c97ccf8de3fe9a02">on_overflow</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;sealed&quot;</span> ) ) {</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;        ig-&gt;<a class="code" href="classItem__spawn__data.html#a3de6a3d1ad557aab44a145b8783df3e4">sealed</a> = jsobj.<a class="code" href="classJsonObject.html#a3d748a5d67f435bbd170a3e92a7cd0ca">get_bool</a>( <span class="stringliteral">&quot;sealed&quot;</span> );</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    }</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_aee57318acde8d116c81f6a7ca19b1642"><div class="ttname"><a href="classItem__factory.html#aee57318acde8d116c81f6a7ca19b1642">Item_factory::load_item_group_data</a></div><div class="ttdeci">void load_item_group_data(const JsonObject &amp;jsobj, Item_group *ig, const std::string &amp;subtype)</div><div class="ttdoc">Actually the load item group data into the group.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05127">item_factory.cpp:5127</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_a3a0aec4747b75a45c97ccf8de3fe9a02"><div class="ttname"><a href="classItem__spawn__data.html#a3a0aec4747b75a45c97ccf8de3fe9a02">Item_spawn_data::on_overflow</a></div><div class="ttdeci">overflow_behaviour on_overflow</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00197">item_group.h:197</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_a3de6a3d1ad557aab44a145b8783df3e4"><div class="ttname"><a href="classItem__spawn__data.html#a3de6a3d1ad557aab44a145b8783df3e4">Item_spawn_data::sealed</a></div><div class="ttdeci">bool sealed</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00202">item_group.h:202</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_a5a0ea625737d6bb8a872273c47fba1bc"><div class="ttname"><a href="classItem__spawn__data.html#a5a0ea625737d6bb8a872273c47fba1bc">Item_spawn_data::container_item_variant</a></div><div class="ttdeci">std::optional&lt; std::string &gt; container_item_variant</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00196">item_group.h:196</a></div></div>
<div class="ttc" id="aclassItem__spawn__data_html_a9d27a15638ee905141781965b4d80d99"><div class="ttname"><a href="classItem__spawn__data.html#a9d27a15638ee905141781965b4d80d99">Item_spawn_data::container_item</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; container_item</div><div class="ttdoc">The group spawns contained in this item.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00195">item_group.h:195</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8h_source.html#l00195">Item_spawn_data::container_item</a>, <a class="el" href="item__group_8h_source.html#l00196">Item_spawn_data::container_item_variant</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__group_8h_source.html#l00357">Item_group::G_COLLECTION</a>, <a class="el" href="item__group_8h_source.html#l00358">Item_group::G_DISTRIBUTION</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00850">JsonObject::get_bool()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01038">JsonObject::get_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="item__factory_8cpp_source.html#l04829">make_group_or_throw()</a>, <a class="el" href="item__group_8h_source.html#l00197">Item_spawn_data::on_overflow</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="item__group_8h_source.html#l00202">Item_spawn_data::sealed</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="aee57318acde8d116c81f6a7ca19b1642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee57318acde8d116c81f6a7ca19b1642">&#9670;&nbsp;</a></span>load_item_group_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_item_group_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jsobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classItem__group.html">Item_group</a> *&#160;</td>
          <td class="paramname"><em>ig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>subtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actually the load item group data into the group. </p>
<p>Matches the above function, which merely organises which group to load into and the type. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsobj</td><td>The json object to load from. </td></tr>
    <tr><td class="paramname">group_id</td><td>The ident of the item that is to be loaded. </td></tr>
    <tr><td class="paramname">subtype</td><td>The type of the item group, either "collection", "distribution" or "old" ("old" is a distribution, too). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05127">5127</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;{</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a> == <span class="stringliteral">&quot;old&quot;</span> ) {</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jsobj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;items&quot;</span> ) ) {</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;            <span class="keywordflow">if</span>( entry.test_object() ) {</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;                <a class="code" href="classJsonObject.html">JsonObject</a> subobj = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;                std::string subcontext;</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;                <span class="keywordflow">if</span>( subobj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;item&quot;</span> ) ) {</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;                    subcontext = <span class="stringliteral">&quot;item &quot;</span> + subobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;item&quot;</span> ) + <span class="stringliteral">&quot; within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( subobj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;group&quot;</span> ) ) {</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;                    subcontext = <span class="stringliteral">&quot;group &quot;</span> + subobj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;group&quot;</span> ) + <span class="stringliteral">&quot; within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( subobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;distribution&quot;</span> ) ) {</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;                    subcontext = <span class="stringliteral">&quot;distribution within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( subobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;collection&quot;</span> ) ) {</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;                    subcontext = <span class="stringliteral">&quot;collection within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;couldn&#39;t determine subcontext for &quot;</span> + subobj.<a class="code" href="classJsonObject.html#a44df75c9577d85daffb2a7a8ceca74da">str</a>() );</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;                    subcontext = <span class="stringliteral">&quot;item within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;                }</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;                <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *ig, subobj, subcontext );</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;                <a class="code" href="classJsonArray.html">JsonArray</a> pair = entry.<a class="code" href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">get_array</a>();</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;                ig-&gt;<a class="code" href="classItem__group.html#a6afceac29adfa1a90686032ef8ac5c1c">add_item_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( pair.<a class="code" href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">get_string</a>( 0 ) ), pair.<a class="code" href="classJsonArray.html#a28640ec205dbf84f52cafa927e79f258">get_int</a>( 1 ) );</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;            }</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;        }</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;    }</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160; </div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;entries&quot;</span> ) ) {</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> subobj : jsobj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;entries&quot;</span> ) ) {</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;            <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *ig, subobj, <span class="stringliteral">&quot;entry within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>() );</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;        }</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;    }</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;items&quot;</span> ) ) {</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jsobj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;items&quot;</span> ) ) {</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;            <span class="keywordflow">if</span>( entry.test_string() ) {</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;                ig-&gt;<a class="code" href="classItem__group.html#a6afceac29adfa1a90686032ef8ac5c1c">add_item_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( entry.get_string() ), 100 );</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entry.test_array() ) {</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;                <a class="code" href="classJsonArray.html">JsonArray</a> subitem = entry.<a class="code" href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">get_array</a>();</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;                ig-&gt;<a class="code" href="classItem__group.html#a6afceac29adfa1a90686032ef8ac5c1c">add_item_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( subitem.<a class="code" href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">get_string</a>( 0 ) ), subitem.<a class="code" href="classJsonArray.html#a28640ec205dbf84f52cafa927e79f258">get_int</a>( 1 ) );</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;                <a class="code" href="classJsonObject.html">JsonObject</a> subobj = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;                <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *ig, subobj, <span class="stringliteral">&quot;item within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>() );</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;            }</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;        }</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    }</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;    <span class="keywordflow">if</span>( jsobj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;groups&quot;</span> ) ) {</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jsobj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;groups&quot;</span> ) ) {</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;            <span class="keywordflow">if</span>( entry.test_string() ) {</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;                ig-&gt;<a class="code" href="classItem__group.html#a019a83a394df1cb15681f8c56d075bf1">add_group_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>( entry.get_string() ), 100 );</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entry.test_array() ) {</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;                <a class="code" href="classJsonArray.html">JsonArray</a> subitem = entry.<a class="code" href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">get_array</a>();</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;                ig-&gt;<a class="code" href="classItem__group.html#a019a83a394df1cb15681f8c56d075bf1">add_group_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>( subitem.<a class="code" href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">get_string</a>( 0 ) ),</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;                                     subitem.<a class="code" href="classJsonArray.html#a28640ec205dbf84f52cafa927e79f258">get_int</a>( 1 ) );</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;                <a class="code" href="classJsonObject.html">JsonObject</a> subobj = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;                <a class="code" href="classItem__factory.html#af1179ce0319705ceafaa7094ec396a37">add_entry</a>( *ig, subobj, <span class="stringliteral">&quot;group within &quot;</span> + ig-&gt;<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>() );</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;            }</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;        }</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    }</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;}</div>
<div class="ttc" id="aclassItem__group_html_a019a83a394df1cb15681f8c56d075bf1"><div class="ttname"><a href="classItem__group.html#a019a83a394df1cb15681f8c56d075bf1">Item_group::add_group_entry</a></div><div class="ttdeci">void add_group_entry(const item_group_id &amp;groupid, int probability)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00808">item_group.cpp:808</a></div></div>
<div class="ttc" id="aclassItem__group_html_a6afceac29adfa1a90686032ef8ac5c1c"><div class="ttname"><a href="classItem__group.html#a6afceac29adfa1a90686032ef8ac5c1c">Item_group::add_item_entry</a></div><div class="ttdeci">void add_item_entry(const itype_id &amp;itemid, int probability, const std::string &amp;variant=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00795">item_group.cpp:795</a></div></div>
<div class="ttc" id="aclassJsonArray_html_a28640ec205dbf84f52cafa927e79f258"><div class="ttname"><a href="classJsonArray.html#a28640ec205dbf84f52cafa927e79f258">JsonArray::get_int</a></div><div class="ttdeci">int get_int(size_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00638">flexbuffer_json-inl.h:638</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a44df75c9577d85daffb2a7a8ceca74da"><div class="ttname"><a href="classJsonObject.html#a44df75c9577d85daffb2a7a8ceca74da">JsonObject::str</a></div><div class="ttdeci">std::string str() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8cpp_source.html#l00096">flexbuffer_json.cpp:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8cpp_source.html#l00808">Item_group::add_group_entry()</a>, <a class="el" href="item__group_8cpp_source.html#l00795">Item_group::add_item_entry()</a>, <a class="el" href="item__group_8h_source.html#l00180">Item_spawn_data::context()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00648">JsonArray::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00638">JsonArray::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00633">JsonArray::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00136">JsonObject::str()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a2e282b0d23d6ec55185caeb87b41c0e0">subtype</a>.</p>

</div>
</div>
<a id="a3a3eb479a017482c757e4b3c9a347c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a3eb479a017482c757e4b3c9a347c72">&#9670;&nbsp;</a></span>load_magazine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_magazine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03570">3570</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;{</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>, jo, src );</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    }</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="itype_8h_source.html#l01209">itype::magazine</a>.</p>

</div>
</div>
<a id="af6a176b9f3d6dc48b5ba9cf8d415f754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a176b9f3d6dc48b5ba9cf8d415f754">&#9670;&nbsp;</a></span>load_migration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_migration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Migrations transform items loaded from legacy saves. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04536">4536</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;{</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <a class="code" href="classmigration.html">migration</a> m;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;replace&quot;</span>, m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;variant&quot;</span>, m.<a class="code" href="classmigration.html#ae05d2497564d4cf8245d8c6cad1f2f26">variant</a> );</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;from_variant&quot;</span>, m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> );</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;flags&quot;</span>, m.<a class="code" href="classmigration.html#a5c35db4ea0aebaa6e9a25afff515aca9">flags</a> );</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;charges&quot;</span>, m.<a class="code" href="classmigration.html#ae36a7ab4c592ed88f6b1b7e61728a48e">charges</a> );</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;contents&quot;</span>, m.<a class="code" href="classmigration.html#af66ae90004a80d2ca8da3429b2f7adb6">contents</a> );</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;sealed&quot;</span>, m.<a class="code" href="classmigration.html#a9dd092faa9024e6d03338cfbe42e87bb">sealed</a> );</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    <a class="code" href="item__factory_8cpp.html#ad8917f8c9b5062f264dfb4feda4feb98">assign</a>( jo, <span class="stringliteral">&quot;reset_item_vars&quot;</span>, m.<a class="code" href="classmigration.html#ad64e5cad8b728b8d0a6e731d8e2cb98a">reset_item_vars</a> );</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160; </div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    std::vector&lt;itype_id&gt; ids;</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <span class="stringliteral">&quot;id&quot;</span> ) ) {</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;        ids.resize( 1 );</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;id&quot;</span>, ids[0], <span class="keyword">true</span> );</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;id&quot;</span> ) ) {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;id&quot;</span>, ids, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;        jo.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <span class="stringliteral">&quot;`id` of `MIGRATION` is neither string nor array&quot;</span> );</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    }</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span> : ids ) {</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> &amp;&amp; m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> == <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;            jo.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;`MIGRATION` attempting to replace entity with itself: %s&quot;</span>,</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;                                           <span class="keywordtype">id</span>.str() ) );</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        }</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;        m.<a class="code" href="classmigration.html#a54cc839649038a8ade6d36bc989085a1">id</a> = <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;            <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>[ m.<a class="code" href="classmigration.html#a54cc839649038a8ade6d36bc989085a1">id</a> ].push_back( m );</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;            <a class="code" href="classItem__factory.html#a73971dfefef9fb1202b2f181ef98b255">add_migration</a>( m );</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;        }</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    }</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a73971dfefef9fb1202b2f181ef98b255"><div class="ttname"><a href="classItem__factory.html#a73971dfefef9fb1202b2f181ef98b255">Item_factory::add_migration</a></div><div class="ttdeci">void add_migration(const migration &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04515">item_factory.cpp:4515</a></div></div>
<div class="ttc" id="aclassmigration_html_a5c35db4ea0aebaa6e9a25afff515aca9"><div class="ttname"><a href="classmigration.html#a5c35db4ea0aebaa6e9a25afff515aca9">migration::flags</a></div><div class="ttdeci">std::set&lt; std::string &gt; flags</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00049">item_factory.h:49</a></div></div>
<div class="ttc" id="aclassmigration_html_a9dd092faa9024e6d03338cfbe42e87bb"><div class="ttname"><a href="classmigration.html#a9dd092faa9024e6d03338cfbe42e87bb">migration::sealed</a></div><div class="ttdeci">bool sealed</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00065">item_factory.h:65</a></div></div>
<div class="ttc" id="aclassmigration_html_ad64e5cad8b728b8d0a6e731d8e2cb98a"><div class="ttname"><a href="classmigration.html#ad64e5cad8b728b8d0a6e731d8e2cb98a">migration::reset_item_vars</a></div><div class="ttdeci">bool reset_item_vars</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00053">item_factory.h:53</a></div></div>
<div class="ttc" id="aclassmigration_html_ae05d2497564d4cf8245d8c6cad1f2f26"><div class="ttname"><a href="classmigration.html#ae05d2497564d4cf8245d8c6cad1f2f26">migration::variant</a></div><div class="ttdeci">std::string variant</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00046">item_factory.h:46</a></div></div>
<div class="ttc" id="aclassmigration_html_ae36a7ab4c592ed88f6b1b7e61728a48e"><div class="ttname"><a href="classmigration.html#ae36a7ab4c592ed88f6b1b7e61728a48e">migration::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00050">item_factory.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04515">add_migration()</a>, <a class="el" href="item__factory_8cpp_source.html#l00159">assign()</a>, <a class="el" href="item__factory_8h_source.html#l00050">migration::charges</a>, <a class="el" href="item__factory_8h_source.html#l00064">migration::contents</a>, <a class="el" href="item__factory_8h_source.html#l00049">migration::flags</a>, <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="basecamp_8h_source.html#l00105">base_camps::id</a>, <a class="el" href="item__factory_8h_source.html#l00045">migration::id</a>, <a class="el" href="item__factory_8h_source.html#l00392">migrations</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>, <a class="el" href="item__factory_8h_source.html#l00053">migration::reset_item_vars</a>, <a class="el" href="item__factory_8h_source.html#l00065">migration::sealed</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00353">JsonObject::throw_error()</a>, and <a class="el" href="item__factory_8h_source.html#l00046">migration::variant</a>.</p>

</div>
</div>
<a id="abb78d901e4aaf49cbab604e32cff3890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb78d901e4aaf49cbab604e32cff3890">&#9670;&nbsp;</a></span>load_pet_armor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_pet_armor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02877">2877</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;{</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a> ) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a> = cata::make_value&lt;islot_pet_armor&gt;();</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;            }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a> = cata::make_value&lt;islot_pet_armor&gt;();</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        }</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        def.<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;load( jo );</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="itype_8h_source.html#l01202">itype::pet_armor</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="a648a5e87def27dd301a2cd2db6b60f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a648a5e87def27dd301a2cd2db6b60f8d">&#9670;&nbsp;</a></span>load_slot()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename SlotType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; SlotType &gt; &amp;&#160;</td>
          <td class="paramname"><em>slotptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the data of the slot struct. </p>
<p>It creates the slot object (of type SlotType) and and calls <a class="el" href="classItem__factory.html#a5199d46088632adcd91fc3b89187041a">load</a> to do the actual (type specific) loading. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02578">2578</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;{</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <span class="keywordflow">if</span>( !slotptr ) {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        slotptr = cata::make_value&lt;SlotType&gt;();</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    }</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <a class="code" href="classItem__factory.html#a5199d46088632adcd91fc3b89187041a">load</a>( *slotptr, jo, src );</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a5199d46088632adcd91fc3b89187041a"><div class="ttname"><a href="classItem__factory.html#a5199d46088632adcd91fc3b89187041a">Item_factory::load</a></div><div class="ttdeci">void load(islot_tool &amp;slot, const JsonObject &amp;jo, const std::string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l03114">item_factory.cpp:3114</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l03114">load()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l03624">load_bionic()</a>, <a class="el" href="item__factory_8cpp_source.html#l03450">load_comestible()</a>, <a class="el" href="item__factory_8cpp_source.html#l02848">load_gun()</a>, <a class="el" href="item__factory_8cpp_source.html#l03549">load_gunmod()</a>, <a class="el" href="item__factory_8cpp_source.html#l03570">load_magazine()</a>, <a class="el" href="item__factory_8cpp_source.html#l02588">load_slot_optional()</a>, <a class="el" href="item__factory_8cpp_source.html#l03152">load_tool()</a>, <a class="el" href="item__factory_8cpp_source.html#l03215">load_tool_armor()</a>, and <a class="el" href="item__factory_8cpp_source.html#l03204">load_toolmod()</a>.</p>

</div>
</div>
<a id="aa4490e119ea3ec245b0de626e0f36ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4490e119ea3ec245b0de626e0f36ca0">&#9670;&nbsp;</a></span>load_slot_optional()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename SlotType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_slot_optional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; SlotType &gt; &amp;&#160;</td>
          <td class="paramname"><em>slotptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load item the item slot if present in json. </p>
<p>Checks whether the json object has a member of the given name and if so, loads the item slot from that object. If the member does not exists, nothing is done. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02588">2588</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;{</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    }</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> slotjo = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> );</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( slotptr, slotjo, src );</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="aa6d399f1e90d6996988790c0180f9f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d399f1e90d6996988790c0180f9f55">&#9670;&nbsp;</a></span>load_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::load_string </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04938">4938</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;{</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;    std::string <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>;</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160; </div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;            result |= <span class="keyword">true</span>;</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;            vec.push_back( <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> );</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;        }</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;        result |= obj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;        vec.push_back( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    }</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160; </div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;}</div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, and <a class="el" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.</p>

</div>
</div>
<a id="aa41ab9d10965da89dfd956fe97586570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa41ab9d10965da89dfd956fe97586570">&#9670;&nbsp;</a></span>load_sub_ref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::load_sub_ref </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classItem__spawn__data.html">Item_spawn_data</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classItem__group.html">Item_group</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function for <a class="el" href="classItem__group.html" title="This is a list of item spawns.">Item_group</a> loading. </p>
<p>If obj contains an array or string titled name + "-item" or name + "-group", this resets ptr and adds the <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item(s)</a> or group(s) to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Data we operate on, results are stored here </td></tr>
    <tr><td class="paramname">obj</td><td><a class="el" href="classJson.html">Json</a> object being searched </td></tr>
    <tr><td class="paramname">name</td><td>Name of item or group we are searching for </td></tr>
    <tr><td class="paramname">parent</td><td>The item group that obj is in. Used so that the result's magazine and ammo probabilities can be inherited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether anything was loaded. </dd></dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04875">4875</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;{</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;    <span class="keyword">const</span> std::string iname( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;-item&quot;</span> );</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;    <span class="keyword">const</span> std::string gname( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;-group&quot;</span> );</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160; </div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;    <span class="comment">// pair.second is true for groups, false for items</span></div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    std::vector&lt; std::pair&lt;std::string, bool&gt; &gt; entries;</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> prob = 100;</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160; </div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;    <span class="keyword">auto</span> get_array = [&amp;obj, &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, &amp;entries]( <span class="keyword">const</span> std::string &amp; arr_name, <span class="keyword">const</span> <span class="keywordtype">bool</span> isgroup ) {</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;        <span class="keywordflow">if</span>( !obj.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( arr_name ) ) {</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> != <span class="stringliteral">&quot;contents&quot;</span> ) {</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;            obj.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;You can&#39;t use an array for &#39;%s&#39;&quot;</span>, arr_name ) );</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;        }</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : obj.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( arr_name ) ) {</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;            entries.emplace_back( <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, isgroup );</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;        }</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    };</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    get_array( iname, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;    get_array( gname, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160; </div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;        obj.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;This has been a TODO: since 2014.  Use &#39;%s&#39; and/or &#39;%s&#39; instead.&quot;</span>,</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;                                        iname, gname ) );</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;    }</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( iname ) ) {</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;        entries.emplace_back( obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( iname ), <span class="keyword">false</span> );</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    }</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( gname ) ) {</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;        entries.emplace_back( obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( gname ), <span class="keyword">true</span> );</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;    }</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160; </div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;    <span class="keyword">const</span> std::string subcontext = <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot; of &quot;</span> + parent.<a class="code" href="classItem__spawn__data.html#acbce4f51ce80eba420fd6420bc7f5807">context</a>();</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160; </div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    <span class="keywordflow">if</span>( entries.size() &gt; 1 &amp;&amp; <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> != <span class="stringliteral">&quot;contents&quot;</span> ) {</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;        obj.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;You can only use one of &#39;%s&#39; and &#39;%s&#39;&quot;</span>, iname, gname ) );</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entries.size() == 1 ) {</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4">Single_item_creator::Type</a> <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = entries.front().second ?</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;                                               Single_item_creator::Type::S_ITEM_GROUP :</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;                                               Single_item_creator::Type::S_ITEM;</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;        <a class="code" href="classSingle__item__creator.html">Single_item_creator</a> *result =</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;            <span class="keyword">new</span> <a class="code" href="classSingle__item__creator.html">Single_item_creator</a>( entries.front().first, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, prob, subcontext );</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;        result-&gt;<a class="code" href="classSingle__item__creator.html#a1e3335bb30eb2f8308435fea1e30ea86">inherit_ammo_mag_chances</a>( parent.<a class="code" href="classItem__group.html#ad7abcff1b113168d2050f50ff7215d47">with_ammo</a>, parent.<a class="code" href="classItem__group.html#a1e517bd3c204c8b302a902762b71c92c">with_magazine</a> );</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;        ptr.reset( result );</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entries.empty() ) {</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    }</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    <a class="code" href="classItem__group.html">Item_group</a> *result = <span class="keyword">new</span> <a class="code" href="classItem__group.html">Item_group</a>( Item_group::Type::G_COLLECTION, prob, parent.<a class="code" href="classItem__group.html#ad7abcff1b113168d2050f50ff7215d47">with_ammo</a>,</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;                                         parent.<a class="code" href="classItem__group.html#a1e517bd3c204c8b302a902762b71c92c">with_magazine</a>, subcontext );</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;    ptr.reset( result );</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : entries ) {</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        <span class="keywordflow">if</span>( elem.second ) {</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;            result-&gt;<a class="code" href="classItem__group.html#a019a83a394df1cb15681f8c56d075bf1">add_group_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>( elem.first ), prob );</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;            result-&gt;<a class="code" href="classItem__group.html#a6afceac29adfa1a90686032ef8ac5c1c">add_item_entry</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( elem.first ), prob );</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        }</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;    }</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;}</div>
<div class="ttc" id="aclassSingle__item__creator_html"><div class="ttname"><a href="classSingle__item__creator.html">Single_item_creator</a></div><div class="ttdoc">Basic item creator.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00313">item_group.h:314</a></div></div>
<div class="ttc" id="aclassSingle__item__creator_html_a1e3335bb30eb2f8308435fea1e30ea86"><div class="ttname"><a href="classSingle__item__creator.html#a1e3335bb30eb2f8308435fea1e30ea86">Single_item_creator::inherit_ammo_mag_chances</a></div><div class="ttdeci">void inherit_ammo_mag_chances(int ammo, int mag)</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00491">item_group.cpp:491</a></div></div>
<div class="ttc" id="aclassSingle__item__creator_html_aee007d93bc2db77d2035c62fa80369f4"><div class="ttname"><a href="classSingle__item__creator.html#aee007d93bc2db77d2035c62fa80369f4">Single_item_creator::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00316">item_group.h:316</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__group_8cpp_source.html#l00808">Item_group::add_group_entry()</a>, <a class="el" href="item__group_8cpp_source.html#l00795">Item_group::add_item_entry()</a>, <a class="el" href="item__group_8h_source.html#l00180">Item_spawn_data::context()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="item__group_8cpp_source.html#l00491">Single_item_creator::inherit_ammo_mag_chances()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af5c0a408d77dc8bdcc0b6fc92594b63e">item_group_id</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00353">JsonObject::throw_error()</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="item__group_8h_source.html#l00401">Item_group::with_ammo</a>, and <a class="el" href="item__group_8h_source.html#l00403">Item_group::with_magazine</a>.</p>

</div>
</div>
<a id="ac5dfadf99cb6b3dc5c41722cc51a3745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5dfadf99cb6b3dc5c41722cc51a3745">&#9670;&nbsp;</a></span>load_tool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_tool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03152">3152</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;{</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>, jo, src );</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>.</p>

</div>
</div>
<a id="abe743c41bb52871c5a2d347450f7b3ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe743c41bb52871c5a2d347450f7b3ce">&#9670;&nbsp;</a></span>load_tool_armor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_tool_armor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03215">3215</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;{</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>, jo, src );</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> ) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> = cata::make_value&lt;islot_armor&gt;();</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            }</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> = cata::make_value&lt;islot_armor&gt;();</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;        }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;        def.<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>-&gt;load( jo );</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    }</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01201">itype::armor</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, and <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>.</p>

</div>
</div>
<a id="a14cf9956758d3839da52943c37acb663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14cf9956758d3839da52943c37acb663">&#9670;&nbsp;</a></span>load_toolmod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_toolmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03204">3204</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;{</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        <a class="code" href="classItem__factory.html#a648a5e87def27dd301a2cd2db6b60f8d">load_slot</a>( def.<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>, jo, src );</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    }</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="item__factory_8cpp_source.html#l02578">load_slot()</a>, and <a class="el" href="itype_8h_source.html#l01204">itype::mod</a>.</p>

</div>
</div>
<a id="a58862a6393021df8c1616e0ed83aae30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58862a6393021df8c1616e0ed83aae30">&#9670;&nbsp;</a></span>load_wheel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::load_wheel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l02764">2764</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;{</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <a class="code" href="structitype.html">itype</a> def;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#a95c2001cf13c3a43d0d260dfff6f070c">load_definition</a>( jo, src, def ) ) {</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a2fd0fb8931b801aaeb42d19d9725c958">was_loaded</a> ) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a> ) {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a> = cata::make_value&lt;islot_wheel&gt;();</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>-&gt;was_loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            }</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a> = cata::make_value&lt;islot_wheel&gt;();</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        }</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        def.<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>-&gt;load( jo );</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <a class="code" href="classItem__factory.html#a71118bb9471dcf03a0ac69f45dacb346">load_basic_info</a>( jo, def, src );</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    }</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;}</div>
<div class="ttc" id="astructitype_html_a5c286a821362f883c93b7d984ecae163"><div class="ttname"><a href="structitype.html#a5c286a821362f883c93b7d984ecae163">itype::wheel</a></div><div class="ttdeci">cata::value_ptr&lt; islot_wheel &gt; wheel</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01206">itype.h:1206</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>, <a class="el" href="itype_8h_source.html#l01449">itype::was_loaded</a>, and <a class="el" href="itype_8h_source.html#l01206">itype::wheel</a>.</p>

</div>
</div>
<a id="a145484f308dc79d43ea1b6eff2b4f2cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a145484f308dc79d43ea1b6eff2b4f2cc">&#9670;&nbsp;</a></span>migrate_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> Item_factory::migrate_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies any migration of the item id. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04582">4582</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;{</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    <span class="keyword">auto</span> iter = <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.end() ) {</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;    }</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;    <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> *parent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;m : iter-&gt;second ) {</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;        <span class="comment">// from-variant migrations do not apply to itypes</span></div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;        }</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        parent = &amp;m;</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    }</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;    <span class="keywordflow">return</span> parent != <span class="keyword">nullptr</span> ? parent-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> : <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="item__factory_8h_source.html#l00045">migration::id</a>, <a class="el" href="namespaceanonymous__namespace_02overmap_8cpp_03.html#a08ac10348561ea07387d36d74066dd1b">anonymous_namespace{overmap.cpp}::migrations</a>, and <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>.</p>

</div>
</div>
<a id="abd06b53e691181b7d01994bb8f498351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd06b53e691181b7d01994bb8f498351">&#9670;&nbsp;</a></span>migrate_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::migrate_item </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies any migrations to an instance of an item. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the original id (before any replacement) </td></tr>
    <tr><td class="paramname">obj</td><td>The instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classItem__factory.html#a145484f308dc79d43ea1b6eff2b4f2cc" title="Applies any migration of the item id.">Item_factory::migrate_id</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04639">4639</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;{</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    <span class="keyword">auto</span> iter = <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.end() ) {</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;    }</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">convert</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> *migrant = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;m : iter-&gt;second ) {</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> &amp;&amp; obj.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; obj.<a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a> == *m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;            migrant = &amp;m;</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;            <span class="comment">// This is not the variant that the item has already been convert to</span></div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            <span class="comment">// So we&#39;ll convert it again.</span></div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;            <a class="code" href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">convert</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        }</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;        <span class="comment">// When we find a migration that doesn&#39;t care about variants, keep it around</span></div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;        <span class="keywordflow">if</span>( !m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a> ) {</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;            migrant = &amp;m;</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;        }</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    }</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="keywordflow">if</span>( migrant == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    }</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160; </div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">convert</a> ) {</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;        obj.<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( migrant-&gt;<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    }</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160; </div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    <a class="code" href="item__factory_8cpp.html#aae3afc442e67eaabd4689cf2164bf010">apply_migration</a>( migrant, obj );</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_abf446115b6197c91dd21139de6688d18"><div class="ttname"><a href="classitem.html#abf446115b6197c91dd21139de6688d18">item::convert</a></div><div class="ttdeci">item &amp; convert(const itype_id &amp;new_type, Character *carrier=nullptr)</div><div class="ttdoc">Filter converting this instance to another type preserving all other aspects.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00634">item.cpp:634</a></div></div>
<div class="ttc" id="aclassitem_html_ac748827c6e5f8720ac68669108a7ba29"><div class="ttname"><a href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">item::has_itype_variant</a></div><div class="ttdeci">bool has_itype_variant(bool check_option=true) const</div><div class="ttdoc">Does this item have a gun variant associated with it If check_option, the return of this is dependent...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09337">item.cpp:9337</a></div></div>
<div class="ttc" id="aclassitem_html_ad590c0adef8b5b3ad024bf4c67900505"><div class="ttname"><a href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">item::itype_variant</a></div><div class="ttdeci">const itype_variant_data &amp; itype_variant() const</div><div class="ttdoc">The gun variant associated with this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09356">item.cpp:9356</a></div></div>
<div class="ttc" id="agroup__string__formatter__convert_html_gaa4f57cd78b90c1f424ff38d148b1261d"><div class="ttname"><a href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">cata::convert</a></div><div class="ttdeci">std::enable_if_t&lt; is_integer&lt; RT &gt; &amp;&amp;is_integer&lt; T &gt;, RT &gt; convert(RT *, const string_formatter &amp;, T &amp;&amp;value, int)</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00081">string_formatter.h:81</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_aae3afc442e67eaabd4689cf2164bf010"><div class="ttname"><a href="item__factory_8cpp.html#aae3afc442e67eaabd4689cf2164bf010">apply_migration</a></div><div class="ttdeci">static void apply_migration(const migration *migrant, item &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04600">item_factory.cpp:4600</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_a14ff35ef22c3665018aaaeef145c81fc"><div class="ttname"><a href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">itype_variant_data::id</a></div><div class="ttdeci">std::string id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00668">itype.h:668</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04600">apply_migration()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="string__formatter_8h_source.html#l00081">cata::convert()</a>, <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="item_8cpp_source.html#l09337">item::has_itype_variant()</a>, <a class="el" href="itype_8h_source.html#l00668">itype_variant_data::id</a>, <a class="el" href="item_8cpp_source.html#l09356">item::itype_variant()</a>, <a class="el" href="namespaceanonymous__namespace_02overmap_8cpp_03.html#a08ac10348561ea07387d36d74066dd1b">anonymous_namespace{overmap.cpp}::migrations</a>, and <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>.</p>

</div>
</div>
<a id="a24e7e81c15cd05a0e23b9dda5f96c23a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24e7e81c15cd05a0e23b9dda5f96c23a">&#9670;&nbsp;</a></span>migrate_item_from_variant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::migrate_item_from_variant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>from_variant</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>applies a migration to the item if one exists with the given from_variant </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04671">4671</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;{</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    <span class="keyword">auto</span> iter = <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.find( obj.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classItem__factory.html#af4c8d7d1e0296a28d7d9fb3194cfa4de">migrations</a>.end() ) {</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;    }</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmigration.html">migration</a> &amp;m : iter-&gt;second ) {</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;        <span class="keywordflow">if</span>( !m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a>.has_value() || m.<a class="code" href="classmigration.html#a7acae714bde2abd3b487738d28f18312">from_variant</a>.value() != from_variant ) {</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;        }</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;        obj.<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( m.<a class="code" href="classmigration.html#aaf442da2e18d7ebaf62c81c53bc4c6fa">replace</a> );</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;        <a class="code" href="item__factory_8cpp.html#aae3afc442e67eaabd4689cf2164bf010">apply_migration</a>( &amp;m, obj );</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    }</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8cpp_source.html#l04600">apply_migration()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item__factory_8h_source.html#l00047">migration::from_variant</a>, <a class="el" href="namespaceanonymous__namespace_02overmap_8cpp_03.html#a08ac10348561ea07387d36d74066dd1b">anonymous_namespace{overmap.cpp}::migrations</a>, <a class="el" href="item__factory_8h_source.html#l00048">migration::replace</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

</div>
</div>
<a id="a2575b508d2fea4ba82af973171d6f45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2575b508d2fea4ba82af973171d6f45a">&#9670;&nbsp;</a></span>npc_implied_flags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::npc_implied_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>item_template</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03713">3713</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;{</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.count( <span class="stringliteral">&quot;explosion&quot;</span> ) &gt; 0 ) {</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a> );</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    }</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160; </div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a> ) ) {</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a4c5b923aa3a82dbac24b314b75536490">flag_NPC_THROW_NOW</a> );</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    }</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160; </div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a> ) ) {</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a992a6a80e8fc7944c1eda2676af9bb33">flag_NPC_ACTIVATE</a> );</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    }</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160; </div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a4c5b923aa3a82dbac24b314b75536490">flag_NPC_THROW_NOW</a> ) ) {</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#aa7a7b7262728d84835bfe397dfdd40e5">flag_NPC_THROWN</a> );</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    }</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160; </div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a992a6a80e8fc7944c1eda2676af9bb33">flag_NPC_ACTIVATE</a> ) ||</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;        item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#aa7a7b7262728d84835bfe397dfdd40e5">flag_NPC_THROWN</a> ) ) {</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a1089f9000b1350feb5b65a77b706dd7b">flag_NPC_ALT_ATTACK</a> );</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    }</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160; </div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    <span class="keywordflow">if</span>( item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a> ) ||</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a> ) || item_template.<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( <a class="code" href="flag_8cpp.html#abe92fef8aa87ba82f19f82a32795f3ed">flag_INTEGRATED</a> ) ) {</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( <a class="code" href="flag_8cpp.html#a029ae11922338abd1768f6caec7d93d3">flag_TRADER_AVOID</a> );</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    }</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a029ae11922338abd1768f6caec7d93d3"><div class="ttname"><a href="flag_8cpp.html#a029ae11922338abd1768f6caec7d93d3">flag_TRADER_AVOID</a></div><div class="ttdeci">const flag_id flag_TRADER_AVOID(&quot;TRADER_AVOID&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a1089f9000b1350feb5b65a77b706dd7b"><div class="ttname"><a href="flag_8cpp.html#a1089f9000b1350feb5b65a77b706dd7b">flag_NPC_ALT_ATTACK</a></div><div class="ttdeci">const flag_id flag_NPC_ALT_ATTACK(&quot;NPC_ALT_ATTACK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4c5b923aa3a82dbac24b314b75536490"><div class="ttname"><a href="flag_8cpp.html#a4c5b923aa3a82dbac24b314b75536490">flag_NPC_THROW_NOW</a></div><div class="ttdeci">const flag_id flag_NPC_THROW_NOW(&quot;NPC_THROW_NOW&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7fc2536a6bd2f1284ae3cff8b0c16d06"><div class="ttname"><a href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a></div><div class="ttdeci">const flag_id flag_DANGEROUS(&quot;DANGEROUS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a992a6a80e8fc7944c1eda2676af9bb33"><div class="ttname"><a href="flag_8cpp.html#a992a6a80e8fc7944c1eda2676af9bb33">flag_NPC_ACTIVATE</a></div><div class="ttdeci">const flag_id flag_NPC_ACTIVATE(&quot;NPC_ACTIVATE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa7a7b7262728d84835bfe397dfdd40e5"><div class="ttname"><a href="flag_8cpp.html#aa7a7b7262728d84835bfe397dfdd40e5">flag_NPC_THROWN</a></div><div class="ttdeci">const flag_id flag_NPC_THROWN(&quot;NPC_THROWN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_abe92fef8aa87ba82f19f82a32795f3ed"><div class="ttname"><a href="flag_8cpp.html#abe92fef8aa87ba82f19f82a32795f3ed">flag_INTEGRATED</a></div><div class="ttdeci">const flag_id flag_INTEGRATED(&quot;INTEGRATED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad5d45b309cb751520ede6a1c591e20a6"><div class="ttname"><a href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a></div><div class="ttdeci">const flag_id flag_BOMB(&quot;BOMB&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afa7c0e8f7a4654a1b825f73111f5fe8e"><div class="ttname"><a href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a></div><div class="ttdeci">const flag_id flag_PSEUDO(&quot;PSEUDO&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a>, <a class="el" href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a>, <a class="el" href="flag_8cpp.html#abe92fef8aa87ba82f19f82a32795f3ed">flag_INTEGRATED</a>, <a class="el" href="flag_8cpp.html#a992a6a80e8fc7944c1eda2676af9bb33">flag_NPC_ACTIVATE</a>, <a class="el" href="flag_8cpp.html#a1089f9000b1350feb5b65a77b706dd7b">flag_NPC_ALT_ATTACK</a>, <a class="el" href="flag_8cpp.html#a4c5b923aa3a82dbac24b314b75536490">flag_NPC_THROW_NOW</a>, <a class="el" href="flag_8cpp.html#aa7a7b7262728d84835bfe397dfdd40e5">flag_NPC_THROWN</a>, <a class="el" href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a>, <a class="el" href="flag_8cpp.html#a029ae11922338abd1768f6caec7d93d3">flag_TRADER_AVOID</a>, <a class="el" href="itype_8cpp_source.html#l00164">itype::has_flag()</a>, <a class="el" href="itype_8h_source.html#l01346">itype::item_tags</a>, and <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<a id="a30cede55b74649c2c130566e132b2852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30cede55b74649c2c130566e132b2852">&#9670;&nbsp;</a></span>register_cached_uses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::register_cached_uses </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers the item as having repair actions (if it has any). </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l00711">711</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : obj.<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a> ) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="comment">// can this item function as a repair tool?</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">repair_actions</a>.count( e.first ) ) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="classItem__factory.html#af052340e46eca62bd496455f9b345ed5">repair_tools</a>.insert( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="comment">// can this item be used to repair complex firearms?</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">if</span>( e.first == <span class="stringliteral">&quot;GUN_REPAIR&quot;</span> ) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <a class="code" href="classItem__factory.html#aad85da896b2ec191e4514e6d03ce74ef">gun_tools</a>.insert( obj.<a class="code" href="structitype.html#ab018b62882b32eef884f4efd769c0993">id</a> );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__factory_8h_source.html#l00404">gun_tools</a>, <a class="el" href="itype_8h_source.html#l01276">itype::id</a>, <a class="el" href="item__factory_8h_source.html#l00406">repair_actions</a>, <a class="el" href="item__factory_8h_source.html#l00401">repair_tools</a>, and <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>.</p>

</div>
</div>
<a id="a9224daa04d7697778df62e68ac393b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9224daa04d7697778df62e68ac393b23">&#9670;&nbsp;</a></span>relative_qualities_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::relative_qualities_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04731">4731</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;{</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> key = <a class="code" href="type__id_8h.html#a462e78d510851b30d4f5795c409c7467">quality_id</a>( curr.get_string( 0 ) );</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;        <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.find( <a class="code" href="classstring__id.html">quality_id</a>( key ) ) != def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.end() ) {</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;            def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>[ key ] += curr.get_int( 1 );</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;            jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <span class="stringliteral">&quot;Quality specified wasn&#39;t inherited&quot;</span> );</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;        }</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    }</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>, and <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a301f489c5195fee4690db8f40ae42170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a301f489c5195fee4690db8f40ae42170">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the item factory. </p>
<p>All item type definitions and item groups are erased. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04781">4781</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;{</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <a class="code" href="classItem__factory.html#a8de179e11040e0fa2d66ad9c8a5c9fd5">clear</a>();</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <a class="code" href="classItem__factory.html#af73e102368fa0e54940e7ccd69b8c6d7">init</a>();</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a8de179e11040e0fa2d66ad9c8a5c9fd5"><div class="ttname"><a href="classItem__factory.html#a8de179e11040e0fa2d66ad9c8a5c9fd5">Item_factory::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l04787">item_factory.cpp:4787</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather__type_8h_source.html#l00051">clear</a>, and <a class="el" href="smart__controller__ui_8h_source.html#l00028">init</a>.</p>

</div>
</div>
<a id="a06d9c7312db07df1a2e0cb97ad8a8dae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d9c7312db07df1a2e0cb97ad8a8dae">&#9670;&nbsp;</a></span>set_allergy_flags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::set_allergy_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>item_template</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l03643">3643</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;{</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::pair&lt;material_id, flag_id&gt;, 29&gt; all_pairs = { {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            <span class="comment">// First allergens:</span></div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;            <span class="comment">// An item is an allergen even if it has trace amounts of allergenic material</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a13777fde4af6be894eb371bdc5cf6439">material_hflesh</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a7a66d8a18b4c357a9ec56e2c6aca1d80">material_iflesh</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a1f21fb105e09724fc71c703d934c06cb">material_bread</a>, <a class="code" href="flag_8cpp.html#a3dde25ad1af1e50960d9425203fa8586">flag_ALLERGEN_BREAD</a> },</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a20136c47b45ab5d735760a8a5853f1b3">material_flesh</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a3f2d8893261a734097cff573c0d022cc">material_cheese</a>, <a class="code" href="flag_8cpp.html#ad4edd5ea90a4d8421c8617c1713c9eba">flag_ALLERGEN_CHEESE</a>},</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a262c1bbb36d62046653d8e4201015e99">material_blood</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a16532e33ffdab3f199e130842abdf2e9">material_hblood</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;            { <a class="code" href="item__factory_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a>, <a class="code" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a> },</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a68e584b7062dde188653709166ec9e6f">material_wheat</a>, <a class="code" href="flag_8cpp.html#a900bd922c7a29feb2590e13662efdd23">flag_ALLERGEN_WHEAT</a> },</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;            { <a class="code" href="item__factory_8cpp.html#ad423daf8c3d5714983d88dcf45e2c80a">material_fruit</a>, <a class="code" href="flag_8cpp.html#aac1557e5d416782005713c2acdbc5ab3">flag_ALLERGEN_FRUIT</a> },</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;            { <a class="code" href="item__factory_8cpp.html#adaa52641aaea718721dc2fd611ed5831">material_veggy</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a> },</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a6addd7b83f2e3ae4f9b48a8207595096">material_dried_vegetable</a>, <a class="code" href="flag_8cpp.html#a6a2d48c3dc9a62ed570a0e9102542de7">flag_ALLERGEN_DRIED_VEGETABLE</a> },</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a1def9977f7e655903114fded7829dfca">material_bean</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a> },</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a093d8b0226893abe901fbcbbf04efb55">material_tomato</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a> },</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a6a1062dcde49fe77b61c075c21de39cf">material_garlic</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a> },</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a656c8d03e2cfe3188c8f93712fb24856">material_nut</a>, <a class="code" href="flag_8cpp.html#a86dbf1f76454f2448f0dcffaa0fd77fc">flag_ALLERGEN_NUT</a> },</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a05628547b3eb896e65d0ae6259dda17b">material_mushroom</a>, <a class="code" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a> },</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            { <a class="code" href="item__factory_8cpp.html#ab3b8fc06d2e560050e9d492f8d0ed80c">material_milk</a>, <a class="code" href="flag_8cpp.html#aaf5745695dfba5d85a606041bb9b0692">flag_ALLERGEN_MILK</a> },</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a90917cbcf6623bec85c745da7ce57b6a">material_egg</a>, <a class="code" href="flag_8cpp.html#aa3d2f030da1260431658e020b7895fc1">flag_ALLERGEN_EGG</a> },</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;            { <a class="code" href="item__factory_8cpp.html#ae752f1709c53f9ef075ccc72da46af05">material_junk</a>, <a class="code" href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a> },</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;            <span class="comment">// Not food, but we can keep it here</span></div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;            { <a class="code" href="item__factory_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a>, <a class="code" href="flag_8cpp.html#a7cc5a3ecba9c9afdfa7654abcbdb0f76">flag_ALLERGEN_WOOL</a> },</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;            <span class="comment">// Now &quot;made of&quot;. Those flags should not be passed</span></div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a20136c47b45ab5d735760a8a5853f1b3">material_flesh</a>, <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> },</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a13777fde4af6be894eb371bdc5cf6439">material_hflesh</a>, <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> },</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a7a66d8a18b4c357a9ec56e2c6aca1d80">material_iflesh</a>, <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> },</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a262c1bbb36d62046653d8e4201015e99">material_blood</a>, <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> },</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a16532e33ffdab3f199e130842abdf2e9">material_hblood</a>, <a class="code" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a> },</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;            { <a class="code" href="item__factory_8cpp.html#af28a6d00d7bc3b917b83e2098e1532e8">material_honey</a>, <a class="code" href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a> },</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a262c1bbb36d62046653d8e4201015e99">material_blood</a>, <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> },</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            { <a class="code" href="item__factory_8cpp.html#a16532e33ffdab3f199e130842abdf2e9">material_hblood</a>, <a class="code" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a> }</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        }</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    };</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160; </div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mats = item_template.<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pr : all_pairs ) {</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;        <span class="keywordflow">if</span>( mats.find( pr.first ) != mats.end() ) {</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;            item_template.<a class="code" href="structitype.html#abd1f0b721206f746d2a645b4ef6f804b">item_tags</a>.insert( pr.second );</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;        }</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    }</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a3dde25ad1af1e50960d9425203fa8586"><div class="ttname"><a href="flag_8cpp.html#a3dde25ad1af1e50960d9425203fa8586">flag_ALLERGEN_BREAD</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_BREAD(&quot;ALLERGEN_BREAD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b54cb6ef8d3b5df451b1186e31d2dc1"><div class="ttname"><a href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_VEGGY(&quot;ALLERGEN_VEGGY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a544c01e1fca8d55c8b52169ae7a734ac"><div class="ttname"><a href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a></div><div class="ttdeci">const flag_id flag_HEMOVORE_FUN(&quot;HEMOVORE_FUN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6a2d48c3dc9a62ed570a0e9102542de7"><div class="ttname"><a href="flag_8cpp.html#a6a2d48c3dc9a62ed570a0e9102542de7">flag_ALLERGEN_DRIED_VEGETABLE</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_DRIED_VEGETABLE(&quot;ALLERGEN_DRIED_VEGETABLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a762c1eb98a1e10deeb0672efc87d72b5"><div class="ttname"><a href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_MEAT(&quot;ALLERGEN_MEAT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7cc5a3ecba9c9afdfa7654abcbdb0f76"><div class="ttname"><a href="flag_8cpp.html#a7cc5a3ecba9c9afdfa7654abcbdb0f76">flag_ALLERGEN_WOOL</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_WOOL(&quot;ALLERGEN_WOOL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a86dbf1f76454f2448f0dcffaa0fd77fc"><div class="ttname"><a href="flag_8cpp.html#a86dbf1f76454f2448f0dcffaa0fd77fc">flag_ALLERGEN_NUT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_NUT(&quot;ALLERGEN_NUT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a900bd922c7a29feb2590e13662efdd23"><div class="ttname"><a href="flag_8cpp.html#a900bd922c7a29feb2590e13662efdd23">flag_ALLERGEN_WHEAT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_WHEAT(&quot;ALLERGEN_WHEAT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa3d2f030da1260431658e020b7895fc1"><div class="ttname"><a href="flag_8cpp.html#aa3d2f030da1260431658e020b7895fc1">flag_ALLERGEN_EGG</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_EGG(&quot;ALLERGEN_EGG&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aac1557e5d416782005713c2acdbc5ab3"><div class="ttname"><a href="flag_8cpp.html#aac1557e5d416782005713c2acdbc5ab3">flag_ALLERGEN_FRUIT</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_FRUIT(&quot;ALLERGEN_FRUIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aaf5745695dfba5d85a606041bb9b0692"><div class="ttname"><a href="flag_8cpp.html#aaf5745695dfba5d85a606041bb9b0692">flag_ALLERGEN_MILK</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_MILK(&quot;ALLERGEN_MILK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab9f2755a126ad6d9442e3d71165d6ddd"><div class="ttname"><a href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a></div><div class="ttdeci">const flag_id flag_CARNIVORE_OK(&quot;CARNIVORE_OK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ace6fbf6b1fe17d0a094be54a2c4e3086"><div class="ttname"><a href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a></div><div class="ttdeci">const flag_id flag_URSINE_HONEY(&quot;URSINE_HONEY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad4edd5ea90a4d8421c8617c1713c9eba"><div class="ttname"><a href="flag_8cpp.html#ad4edd5ea90a4d8421c8617c1713c9eba">flag_ALLERGEN_CHEESE</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_CHEESE(&quot;ALLERGEN_CHEESE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae0e47ee3123936862d27d0ee69de4f41"><div class="ttname"><a href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a></div><div class="ttdeci">const flag_id flag_ALLERGEN_JUNK(&quot;ALLERGEN_JUNK&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a05628547b3eb896e65d0ae6259dda17b"><div class="ttname"><a href="item__factory_8cpp.html#a05628547b3eb896e65d0ae6259dda17b">material_mushroom</a></div><div class="ttdeci">static const material_id material_mushroom(&quot;mushroom&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a093d8b0226893abe901fbcbbf04efb55"><div class="ttname"><a href="item__factory_8cpp.html#a093d8b0226893abe901fbcbbf04efb55">material_tomato</a></div><div class="ttdeci">static const material_id material_tomato(&quot;tomato&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a13777fde4af6be894eb371bdc5cf6439"><div class="ttname"><a href="item__factory_8cpp.html#a13777fde4af6be894eb371bdc5cf6439">material_hflesh</a></div><div class="ttdeci">static const material_id material_hflesh(&quot;hflesh&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a16532e33ffdab3f199e130842abdf2e9"><div class="ttname"><a href="item__factory_8cpp.html#a16532e33ffdab3f199e130842abdf2e9">material_hblood</a></div><div class="ttdeci">static const material_id material_hblood(&quot;hblood&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a1def9977f7e655903114fded7829dfca"><div class="ttname"><a href="item__factory_8cpp.html#a1def9977f7e655903114fded7829dfca">material_bean</a></div><div class="ttdeci">static const material_id material_bean(&quot;bean&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a1f21fb105e09724fc71c703d934c06cb"><div class="ttname"><a href="item__factory_8cpp.html#a1f21fb105e09724fc71c703d934c06cb">material_bread</a></div><div class="ttdeci">static const material_id material_bread(&quot;bread&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a20136c47b45ab5d735760a8a5853f1b3"><div class="ttname"><a href="item__factory_8cpp.html#a20136c47b45ab5d735760a8a5853f1b3">material_flesh</a></div><div class="ttdeci">static const material_id material_flesh(&quot;flesh&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a262c1bbb36d62046653d8e4201015e99"><div class="ttname"><a href="item__factory_8cpp.html#a262c1bbb36d62046653d8e4201015e99">material_blood</a></div><div class="ttdeci">static const material_id material_blood(&quot;blood&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a3f2d8893261a734097cff573c0d022cc"><div class="ttname"><a href="item__factory_8cpp.html#a3f2d8893261a734097cff573c0d022cc">material_cheese</a></div><div class="ttdeci">static const material_id material_cheese(&quot;cheese&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a656c8d03e2cfe3188c8f93712fb24856"><div class="ttname"><a href="item__factory_8cpp.html#a656c8d03e2cfe3188c8f93712fb24856">material_nut</a></div><div class="ttdeci">static const material_id material_nut(&quot;nut&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a68e584b7062dde188653709166ec9e6f"><div class="ttname"><a href="item__factory_8cpp.html#a68e584b7062dde188653709166ec9e6f">material_wheat</a></div><div class="ttdeci">static const material_id material_wheat(&quot;wheat&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a6a1062dcde49fe77b61c075c21de39cf"><div class="ttname"><a href="item__factory_8cpp.html#a6a1062dcde49fe77b61c075c21de39cf">material_garlic</a></div><div class="ttdeci">static const material_id material_garlic(&quot;garlic&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a6addd7b83f2e3ae4f9b48a8207595096"><div class="ttname"><a href="item__factory_8cpp.html#a6addd7b83f2e3ae4f9b48a8207595096">material_dried_vegetable</a></div><div class="ttdeci">static const material_id material_dried_vegetable(&quot;dried_vegetable&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a7a66d8a18b4c357a9ec56e2c6aca1d80"><div class="ttname"><a href="item__factory_8cpp.html#a7a66d8a18b4c357a9ec56e2c6aca1d80">material_iflesh</a></div><div class="ttdeci">static const material_id material_iflesh(&quot;iflesh&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a90917cbcf6623bec85c745da7ce57b6a"><div class="ttname"><a href="item__factory_8cpp.html#a90917cbcf6623bec85c745da7ce57b6a">material_egg</a></div><div class="ttdeci">static const material_id material_egg(&quot;egg&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_aa83f04c09d26764216682c3f99031335"><div class="ttname"><a href="item__factory_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a></div><div class="ttdeci">static const material_id material_bone(&quot;bone&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ab3b8fc06d2e560050e9d492f8d0ed80c"><div class="ttname"><a href="item__factory_8cpp.html#ab3b8fc06d2e560050e9d492f8d0ed80c">material_milk</a></div><div class="ttdeci">static const material_id material_milk(&quot;milk&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_ad423daf8c3d5714983d88dcf45e2c80a"><div class="ttname"><a href="item__factory_8cpp.html#ad423daf8c3d5714983d88dcf45e2c80a">material_fruit</a></div><div class="ttdeci">static const material_id material_fruit(&quot;fruit&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_adaa52641aaea718721dc2fd611ed5831"><div class="ttname"><a href="item__factory_8cpp.html#adaa52641aaea718721dc2fd611ed5831">material_veggy</a></div><div class="ttdeci">static const material_id material_veggy(&quot;veggy&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_af1062f0849ca05ce9086270bf9e7f406"><div class="ttname"><a href="item__factory_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a></div><div class="ttdeci">static const material_id material_wool(&quot;wool&quot;)</div></div>
<div class="ttc" id="aitem__factory_8cpp_html_af28a6d00d7bc3b917b83e2098e1532e8"><div class="ttname"><a href="item__factory_8cpp.html#af28a6d00d7bc3b917b83e2098e1532e8">material_honey</a></div><div class="ttdeci">static const material_id material_honey(&quot;honey&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag_8cpp.html#a3dde25ad1af1e50960d9425203fa8586">flag_ALLERGEN_BREAD</a>, <a class="el" href="flag_8cpp.html#ad4edd5ea90a4d8421c8617c1713c9eba">flag_ALLERGEN_CHEESE</a>, <a class="el" href="flag_8cpp.html#a6a2d48c3dc9a62ed570a0e9102542de7">flag_ALLERGEN_DRIED_VEGETABLE</a>, <a class="el" href="flag_8cpp.html#aa3d2f030da1260431658e020b7895fc1">flag_ALLERGEN_EGG</a>, <a class="el" href="flag_8cpp.html#aac1557e5d416782005713c2acdbc5ab3">flag_ALLERGEN_FRUIT</a>, <a class="el" href="flag_8cpp.html#ae0e47ee3123936862d27d0ee69de4f41">flag_ALLERGEN_JUNK</a>, <a class="el" href="flag_8cpp.html#a762c1eb98a1e10deeb0672efc87d72b5">flag_ALLERGEN_MEAT</a>, <a class="el" href="flag_8cpp.html#aaf5745695dfba5d85a606041bb9b0692">flag_ALLERGEN_MILK</a>, <a class="el" href="flag_8cpp.html#a86dbf1f76454f2448f0dcffaa0fd77fc">flag_ALLERGEN_NUT</a>, <a class="el" href="flag_8cpp.html#a4b54cb6ef8d3b5df451b1186e31d2dc1">flag_ALLERGEN_VEGGY</a>, <a class="el" href="flag_8cpp.html#a900bd922c7a29feb2590e13662efdd23">flag_ALLERGEN_WHEAT</a>, <a class="el" href="flag_8cpp.html#a7cc5a3ecba9c9afdfa7654abcbdb0f76">flag_ALLERGEN_WOOL</a>, <a class="el" href="flag_8cpp.html#ab9f2755a126ad6d9442e3d71165d6ddd">flag_CARNIVORE_OK</a>, <a class="el" href="flag_8cpp.html#a544c01e1fca8d55c8b52169ae7a734ac">flag_HEMOVORE_FUN</a>, <a class="el" href="flag_8cpp.html#ace6fbf6b1fe17d0a094be54a2c4e3086">flag_URSINE_HONEY</a>, <a class="el" href="itype_8h_source.html#l01346">itype::item_tags</a>, <a class="el" href="item__factory_8cpp.html#a1def9977f7e655903114fded7829dfca">material_bean</a>, <a class="el" href="item__factory_8cpp.html#a262c1bbb36d62046653d8e4201015e99">material_blood</a>, <a class="el" href="item__factory_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a>, <a class="el" href="item__factory_8cpp.html#a1f21fb105e09724fc71c703d934c06cb">material_bread</a>, <a class="el" href="item__factory_8cpp.html#a3f2d8893261a734097cff573c0d022cc">material_cheese</a>, <a class="el" href="item__factory_8cpp.html#a6addd7b83f2e3ae4f9b48a8207595096">material_dried_vegetable</a>, <a class="el" href="item__factory_8cpp.html#a90917cbcf6623bec85c745da7ce57b6a">material_egg</a>, <a class="el" href="item__factory_8cpp.html#a20136c47b45ab5d735760a8a5853f1b3">material_flesh</a>, <a class="el" href="item__factory_8cpp.html#ad423daf8c3d5714983d88dcf45e2c80a">material_fruit</a>, <a class="el" href="item__factory_8cpp.html#a6a1062dcde49fe77b61c075c21de39cf">material_garlic</a>, <a class="el" href="item__factory_8cpp.html#a16532e33ffdab3f199e130842abdf2e9">material_hblood</a>, <a class="el" href="item__factory_8cpp.html#a13777fde4af6be894eb371bdc5cf6439">material_hflesh</a>, <a class="el" href="item__factory_8cpp.html#af28a6d00d7bc3b917b83e2098e1532e8">material_honey</a>, <a class="el" href="item__factory_8cpp.html#a7a66d8a18b4c357a9ec56e2c6aca1d80">material_iflesh</a>, <a class="el" href="item__factory_8cpp.html#ae752f1709c53f9ef075ccc72da46af05">material_junk</a>, <a class="el" href="item__factory_8cpp.html#ab3b8fc06d2e560050e9d492f8d0ed80c">material_milk</a>, <a class="el" href="item__factory_8cpp.html#a05628547b3eb896e65d0ae6259dda17b">material_mushroom</a>, <a class="el" href="item__factory_8cpp.html#a656c8d03e2cfe3188c8f93712fb24856">material_nut</a>, <a class="el" href="item__factory_8cpp.html#a093d8b0226893abe901fbcbbf04efb55">material_tomato</a>, <a class="el" href="item__factory_8cpp.html#adaa52641aaea718721dc2fd611ed5831">material_veggy</a>, <a class="el" href="item__factory_8cpp.html#a68e584b7062dde188653709166ec9e6f">material_wheat</a>, <a class="el" href="item__factory_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a>, and <a class="el" href="itype_8h_source.html#l01303">itype::materials</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<a id="abd13937eb5ca9022bed121004829e4fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd13937eb5ca9022bed121004829e4fd">&#9670;&nbsp;</a></span>set_qualities_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::set_qualities_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04687">4687</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;{</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> quali = std::pair&lt;quality_id, int&gt;( <a class="code" href="type__id_8h.html#a462e78d510851b30d4f5795c409c7467">quality_id</a>( curr.get_string( 0 ) ),</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;                               curr.get_int( 1 ) );</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;            <span class="comment">// Populate charged qualities or regular qualities, preventing duplicates</span></div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> == <span class="stringliteral">&quot;charged_qualities&quot;</span> ) {</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;                <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.count( quali.first ) &gt; 0 ) {</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;                    curr.throw_error( 0, <span class="stringliteral">&quot;Duplicated charged quality&quot;</span> );</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;                }</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;                def.<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.insert( quali );</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;                <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.count( quali.first ) &gt; 0 ) {</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                    curr.throw_error( 0, <span class="stringliteral">&quot;Duplicated quality&quot;</span> );</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;                }</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;                def.<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.insert( quali );</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;            }</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;        }</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;        jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <span class="stringliteral">&quot;Qualities list is not an array&quot;</span> );</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;    }</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l01288">itype::charged_qualities</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="itype_8h_source.html#l01286">itype::qualities</a>, and <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="ae5901cfccc849eb4f9de7020f943de8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5901cfccc849eb4f9de7020f943de8f">&#9670;&nbsp;</a></span>set_techniques_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::set_techniques_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l04744">4744</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;{</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;        <span class="keywordflow">for</span>( std::string curr : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> tech = <a class="code" href="type__id_8h.html#a15c813836397fb5a5747fa15b5c82d84">matec_id</a>( curr );</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;            <span class="comment">// Prevent duplicates</span></div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;            <span class="keywordflow">if</span>( def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.count( tech ) &gt; 0 ) {</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;                jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <span class="stringliteral">&quot;Duplicated technique&quot;</span> );</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;            }</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;            def.<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.insert( tech );</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;        }</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        jo.<a class="code" href="classJsonObject.html#a04b6ce7355b567646a587514fb811c68">throw_error_at</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <span class="stringliteral">&quot;Techniques list is not an array&quot;</span> );</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;    }</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="itype_8h_source.html#l01323">itype::techniques</a>, and <a class="el" href="flexbuffer__json_8cpp_source.html#l00358">JsonObject::throw_error_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a953a512ac8ea396a90d91abfa004b236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953a512ac8ea396a90d91abfa004b236">&#9670;&nbsp;</a></span>set_use_methods_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Item_factory::set_use_methods_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>use_methods</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>ammo_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05190">5190</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;{</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;    <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;    }</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160; </div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;    use_methods.clear();</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;    ammo_scale.clear();</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> entry : jo.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;            <span class="keywordflow">if</span>( entry.test_string() ) {</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;                std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = entry.get_string();</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;                <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( use_methods, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entry.test_object() ) {</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;                <a class="code" href="classJsonObject.html">JsonObject</a> obj = entry.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>();</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;                std::pair&lt;std::string, use_function&gt; fun = <a class="code" href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">usage_from_object</a>( obj );</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;                <span class="keywordflow">if</span>( fun.second ) {</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;                    use_methods.insert( fun );</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;                    <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a271bf0c222d2a7c97329df4362ae6a54">has_int</a>( <span class="stringliteral">&quot;ammo_scale&quot;</span> ) ) {</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;                        ammo_scale.emplace( fun.first, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( obj.<a class="code" href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">get_float</a>( <span class="stringliteral">&quot;ammo_scale&quot;</span> ) ) );</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;                    }</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;                }</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entry.test_array() ) {</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;                <a class="code" href="classJsonArray.html">JsonArray</a> curr = entry.<a class="code" href="classJsonArray.html#aebd5eafa8b91235429384a49abc0cab4">get_array</a>();</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;                std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = curr.<a class="code" href="classJsonArray.html#a4da53dba40ac6d4846f6d4a36aa72af4">get_string</a>( 0 );</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;                <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( use_methods, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;                <span class="keywordflow">if</span>( curr.<a class="code" href="classJsonArray.html#a64570724c5b65725b4f9502a252c0fb7">has_int</a>( 1 ) ) {</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;                    ammo_scale.emplace( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( curr.<a class="code" href="classJsonArray.html#aadfb06fe588dbd85962b9c6a0f8b51e5">get_float</a>( 1 ) ) );</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;                }</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;                entry.throw_error( <span class="stringliteral">&quot;array element is neither string nor object.&quot;</span> );</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;            }</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;        }</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;        <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#ac8dd6467300eb62e7ce842c3d99c083e">has_string</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;            std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = jo.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> );</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;            <a class="code" href="classItem__factory.html#a74be8fac6c7cb1dc966f98069741955d">emplace_usage</a>( use_methods, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a62e862f0390ad12302c9677069fb9d23">has_object</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> ) ) {</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;            <a class="code" href="classJsonObject.html">JsonObject</a> obj = jo.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> );</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;            std::pair&lt;std::string, use_function&gt; fun = <a class="code" href="classItem__factory.html#ae858c09c799baa5ab83217cbab2a9b0b">usage_from_object</a>( obj );</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;            <span class="keywordflow">if</span>( fun.second ) {</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;                use_methods.insert( fun );</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;                <span class="keywordflow">if</span>( obj.<a class="code" href="classJsonObject.html#a271bf0c222d2a7c97329df4362ae6a54">has_int</a>( <span class="stringliteral">&quot;ammo_scale&quot;</span> ) ) {</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                    ammo_scale.emplace( fun.first, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( obj.<a class="code" href="classJsonObject.html#a7d82ab1c2da0cb67c6315b86104c3c84">get_float</a>( <span class="stringliteral">&quot;ammo_scale&quot;</span> ) ) );</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;                }</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;            }</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;            jo.<a class="code" href="classJsonObject.html#af3e3ae76afc340c1fa3510acaaba57b8">throw_error</a>( <span class="stringliteral">&quot;member &#39;use_action&#39; is neither string nor object.&quot;</span> );</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;        }</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160; </div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    }</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;}</div>
<div class="ttc" id="aclassJsonArray_html_a64570724c5b65725b4f9502a252c0fb7"><div class="ttname"><a href="classJsonArray.html#a64570724c5b65725b4f9502a252c0fb7">JsonArray::has_int</a></div><div class="ttdeci">bool has_int(size_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00668">flexbuffer_json-inl.h:668</a></div></div>
<div class="ttc" id="aclassJsonArray_html_aadfb06fe588dbd85962b9c6a0f8b51e5"><div class="ttname"><a href="classJsonArray.html#aadfb06fe588dbd85962b9c6a0f8b51e5">JsonArray::get_float</a></div><div class="ttdeci">double get_float(size_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00643">flexbuffer_json-inl.h:643</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00648">JsonArray::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00643">JsonArray::get_float()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00845">JsonObject::get_float()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00864">JsonObject::get_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00633">JsonArray::get_string()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00984">JsonObject::has_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00668">JsonArray::has_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00956">JsonObject::has_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00990">JsonObject::has_object()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00972">JsonObject::has_string()</a>, <a class="el" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>, <a class="el" href="flexbuffer__json_8cpp_source.html#l00353">JsonObject::throw_error()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a6cfca92f8358a8a4a749fcb8088bfb0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cfca92f8358a8a4a749fcb8088bfb0d">&#9670;&nbsp;</a></span>subtype_replacement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; Item_factory::subtype_replacement </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05441">5441</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;{</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    std::list&lt;itype_id&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.push_back( base );</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> replacements = <a class="code" href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">tool_subtypes</a>.find( base );</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;    <span class="keywordflow">if</span>( replacements != <a class="code" href="classItem__factory.html#a884f46fe503c5e21917b3cb098383c99">tool_subtypes</a>.end() ) {</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.insert( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.end(), replacements-&gt;second.begin(), replacements-&gt;second.end() );</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;    }</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160; </div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;}</div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

</div>
</div>
<a id="ae858c09c799baa5ab83217cbab2a9b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae858c09c799baa5ab83217cbab2a9b0b">&#9670;&nbsp;</a></span>usage_from_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::string, <a class="el" href="structuse__function.html">use_function</a> &gt; Item_factory::usage_from_object </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05254">5254</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;{</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;type&quot;</span> );</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160; </div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> == <span class="stringliteral">&quot;repair_item&quot;</span> ) {</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;        <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = obj.<a class="code" href="classJsonObject.html#a1abb3808bb2a992716d5ef6f27a32b3c">get_string</a>( <span class="stringliteral">&quot;item_action_type&quot;</span> );</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classItem__factory.html#a3d5734050655293211857b8ca87f59c2">has_iuse</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ) ) {</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;            <a class="code" href="classItem__factory.html#ab6bd27c42a0bb631ea90d9745c3c031b">add_actor</a>( std::make_unique&lt;repair_item_actor&gt;( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> ) );</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;            <a class="code" href="classItem__factory.html#acbc793301935e25dc30818dd974281b7">repair_actions</a>.insert( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;        }</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;    }</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160; </div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;    <a class="code" href="structuse__function.html">use_function</a> method = <a class="code" href="classItem__factory.html#a4e652a1bb11e1fa9ca38fdd48db25bb7">usage_from_string</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160; </div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;    <span class="keywordflow">if</span>( !method.<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() ) {</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;        <span class="keywordflow">return</span> std::make_pair( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="code" href="structuse__function.html">use_function</a>() );</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    }</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160; </div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;    method.<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>()-&gt;<a class="code" href="classiuse__actor.html#aa93b616e6f6e450b098209ad19ae78c4">load</a>( obj );</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;    <span class="keywordflow">return</span> std::make_pair( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, method );</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;}</div>
<div class="ttc" id="aclassItem__factory_html_a3d5734050655293211857b8ca87f59c2"><div class="ttname"><a href="classItem__factory.html#a3d5734050655293211857b8ca87f59c2">Item_factory::has_iuse</a></div><div class="ttdeci">bool has_iuse(const item_action_id &amp;type) const</div><div class="ttdoc">Check if an iuse is known to the Item_factory.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8h_source.html#l00255">item_factory.h:255</a></div></div>
<div class="ttc" id="aclassiuse__actor_html_aa93b616e6f6e450b098209ad19ae78c4"><div class="ttname"><a href="classiuse__actor.html#aa93b616e6f6e450b098209ad19ae78c4">iuse_actor::load</a></div><div class="ttdeci">virtual void load(const JsonObject &amp;jo)=0</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapdata_8cpp_source.html#l00801">add_actor()</a>, <a class="el" href="iuse_8h_source.html#l00314">use_function::get_actor_ptr()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00813">JsonObject::get_string()</a>, <a class="el" href="classiuse__actor.html#aa93b616e6f6e450b098209ad19ae78c4">iuse_actor::load()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<a id="a4e652a1bb11e1fa9ca38fdd48db25bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e652a1bb11e1fa9ca38fdd48db25bb7">&#9670;&nbsp;</a></span>usage_from_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structuse__function.html">use_function</a> Item_factory::usage_from_string </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8cpp_source.html#l05276">5276</a> of file <a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;{</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    <span class="keyword">auto</span> <a class="code" href="structfunc.html">func</a> = <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>.find( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structfunc.html">func</a> != <a class="code" href="classItem__factory.html#ab8879bd7c6bf52cc867d21e003773171">iuse_function_list</a>.end() ) {</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfunc.html">func</a>-&gt;second;</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;    }</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160; </div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;    <span class="comment">// Otherwise, return a hardcoded function we know exists (hopefully)</span></div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Received unrecognized iuse function %s, using iuse::none instead&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.c_str() );</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structuse__function.html">use_function</a>();</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a505d771e637afa6c26124010e3c561cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505d771e637afa6c26124010e3c561cf">&#9670;&nbsp;</a></span>frozen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Item_factory::frozen = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set at finalization and prevents alterations to the static item templates. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00274">274</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01697">add_item_type()</a>, <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>, <a class="el" href="item__factory_8cpp_source.html#l02527">find_template()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>.</p>

</div>
</div>
<a id="aad85da896b2ec191e4514e6d03ce74ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad85da896b2ec191e4514e6d03ce74ef">&#9670;&nbsp;</a></span>gun_tools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&gt; Item_factory::gun_tools</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00404">404</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00711">register_cached_uses()</a>.</p>

</div>
</div>
<a id="ab8879bd7c6bf52cc867d21e003773171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8879bd7c6bf52cc867d21e003773171">&#9670;&nbsp;</a></span>iuse_function_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="item__action_8h.html#a57de7061eac1f29f767f63f516c25b24">item_action_id</a>, <a class="el" href="structuse__function.html">use_function</a>&gt; Item_factory::iuse_function_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00385">385</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01691">add_actor()</a>, <a class="el" href="item__factory_8cpp_source.html#l01679">add_iuse()</a>, and <a class="el" href="item__factory_8h_source.html#l00255">has_iuse()</a>.</p>

</div>
</div>
<a id="a78c867f6a9f3fd09db30e3c3e3d4303f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c867f6a9f3fd09db30e3c3e3d4303f">&#9670;&nbsp;</a></span>m_abstracts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="structitype.html">itype</a>&gt; Item_factory::m_abstracts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00276">276</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>.</p>

</div>
</div>
<a id="aeadd69bbf3c9c3aca9ba3c5b1d36765d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeadd69bbf3c9c3aca9ba3c5b1d36765d">&#9670;&nbsp;</a></span>m_runtimes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::unique_ptr&lt;<a class="el" href="structitype.html">itype</a>&gt; &gt; Item_factory::m_runtimes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00280">280</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01697">add_item_type()</a>, <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02527">find_template()</a>.</p>

</div>
</div>
<a id="a1aec789abd53810026e0d878c0069aea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aec789abd53810026e0d878c0069aea">&#9670;&nbsp;</a></span>m_template_groups</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classItem__factory.html#a3f61a32b56209587511d358276aed934">GroupMap</a> Item_factory::m_template_groups</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00283">283</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>, <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>, <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, <a class="el" href="item__factory_8cpp_source.html#l02564">get_group()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">init()</a>.</p>

</div>
</div>
<a id="aa8803d050f39c239c1fb55873cbe699c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8803d050f39c239c1fb55873cbe699c">&#9670;&nbsp;</a></span>m_templates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="structitype.html">itype</a>&gt; Item_factory::m_templates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00278">278</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01940">check_ammo_type()</a>, <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>, <a class="el" href="item__factory_8cpp_source.html#l01382">finalize()</a>, <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, <a class="el" href="item__factory_8cpp_source.html#l02527">find_template()</a>, <a class="el" href="item__factory_8cpp_source.html#l04149">load_basic_info()</a>, and <a class="el" href="item__factory_8cpp_source.html#l02598">load_definition()</a>.</p>

</div>
</div>
<a id="ac58203a04bf0d221f64ec46d6d82b96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac58203a04bf0d221f64ec46d6d82b96e">&#9670;&nbsp;</a></span>migrated_ammo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>&gt; Item_factory::migrated_ammo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00285">285</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, and <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<a id="a777b712b7a0b03c6e0ad239ad29d7094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777b712b7a0b03c6e0ad239ad29d7094">&#9670;&nbsp;</a></span>migrated_magazines</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&gt; Item_factory::migrated_magazines</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00286">286</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, and <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<a id="af4c8d7d1e0296a28d7d9fb3194cfa4de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c8d7d1e0296a28d7d9fb3194cfa4de">&#9670;&nbsp;</a></span>migrations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::vector&lt;<a class="el" href="classmigration.html">migration</a>&gt; &gt; Item_factory::migrations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00392">392</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l04515">add_migration()</a>, <a class="el" href="item__factory_8cpp_source.html#l01961">check_definitions()</a>, <a class="el" href="item__factory_8cpp_source.html#l01430">finalize_item_blacklist()</a>, and <a class="el" href="item__factory_8cpp_source.html#l04536">load_migration()</a>.</p>

</div>
</div>
<a id="acbc793301935e25dc30818dd974281b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc793301935e25dc30818dd974281b7">&#9670;&nbsp;</a></span>repair_actions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; Item_factory::repair_actions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00406">406</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00711">register_cached_uses()</a>.</p>

</div>
</div>
<a id="af052340e46eca62bd496455f9b345ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af052340e46eca62bd496455f9b345ed5">&#9670;&nbsp;</a></span>repair_tools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&gt; Item_factory::repair_tools</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00401">401</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00711">register_cached_uses()</a>.</p>

</div>
</div>
<a id="a884f46fe503c5e21917b3cb098383c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884f46fe503c5e21917b3cb098383c99">&#9670;&nbsp;</a></span>tool_subtypes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, std::set&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&gt; &gt; Item_factory::tool_subtypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Contains the tool subtype mappings for crafting (i.e. </p>
<p>mess kit is a hotplate etc.). This is should be obsoleted when <a class="el" href="structrequirement__data.html">requirement_data</a> allows AND/OR nesting. </p>

<p class="definition">Definition at line <a class="el" href="item__factory_8h_source.html#l00398">398</a> of file <a class="el" href="item__factory_8h_source.html">item_factory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l00220">finalize_pre()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="item__factory_8h_source.html">item_factory.h</a></li>
<li>src/<a class="el" href="item__factory_8cpp_source.html">item_factory.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:40 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
