<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: avatar_action Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">avatar_action Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a43a8332234f37cdd9b383bf8681e161b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a43a8332234f37cdd9b383bf8681e161b">eat</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> &amp;loc)</td></tr>
<tr class="memdesc:a43a8332234f37cdd9b383bf8681e161b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eat food or fuel 'E' (or 'a')  <a href="namespaceavatar__action.html#a43a8332234f37cdd9b383bf8681e161b">More...</a><br /></td></tr>
<tr class="separator:a43a8332234f37cdd9b383bf8681e161b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0954ef4d5de76f8cc456b1c8a8cfca66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a0954ef4d5de76f8cc456b1c8a8cfca66">eat</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> &amp;loc, const std::vector&lt; int &gt; &amp;consume_menu_selections, const std::vector&lt; <a class="el" href="classitem__location.html">item_location</a> &gt; &amp;consume_menu_selected_items, const std::string &amp;consume_menu_filter, <a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a> type)</td></tr>
<tr class="separator:a0954ef4d5de76f8cc456b1c8a8cfca66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18dbf8c70f67f268888720460f7b95b4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a18dbf8c70f67f268888720460f7b95b4">eat_here</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="separator:a18dbf8c70f67f268888720460f7b95b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2edf9cf73ba9fd837ce168d2330f140"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#ad2edf9cf73ba9fd837ce168d2330f140">eat_or_use</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> loc)</td></tr>
<tr class="separator:ad2edf9cf73ba9fd837ce168d2330f140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ba74774376a08222b8cdcce08f7304"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classmap.html">map</a> &amp;m, const <a class="el" href="structtripoint.html">tripoint</a> &amp;d)</td></tr>
<tr class="separator:a76ba74774376a08222b8cdcce08f7304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b98a9164601ec7d6b4d233ffc19e66"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a27b98a9164601ec7d6b4d233ffc19e66">move</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classmap.html">map</a> &amp;m, const <a class="el" href="structpoint.html">point</a> &amp;d)</td></tr>
<tr class="separator:a27b98a9164601ec7d6b4d233ffc19e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadb3333d387007017d11836c606f1e5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#abadb3333d387007017d11836c606f1e5">ramp_move</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classmap.html">map</a> &amp;m, const <a class="el" href="structtripoint.html">tripoint</a> &amp;dest)</td></tr>
<tr class="separator:abadb3333d387007017d11836c606f1e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9611563bffc4224b3e724db03688bdd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a9611563bffc4224b3e724db03688bdd4">swim</a> (<a class="el" href="classmap.html">map</a> &amp;m, <a class="el" href="classavatar.html">avatar</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="memdesc:a9611563bffc4224b3e724db03688bdd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles swimming by the player.  <a href="namespaceavatar__action.html#a9611563bffc4224b3e724db03688bdd4">More...</a><br /></td></tr>
<tr class="separator:a9611563bffc4224b3e724db03688bdd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe0323e13640197154fe53026c95211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a3fe0323e13640197154fe53026c95211">autoattack</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classmap.html">map</a> &amp;m)</td></tr>
<tr class="separator:a3fe0323e13640197154fe53026c95211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c58da1638b239e9df99d2a4611cde8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#af2c58da1638b239e9df99d2a4611cde8">mend</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> loc)</td></tr>
<tr class="separator:af2c58da1638b239e9df99d2a4611cde8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5ca617547cd7a8981f4b9963500d25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a1a5ca617547cd7a8981f4b9963500d25">can_fire_weapon</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, const <a class="el" href="classmap.html">map</a> &amp;m, const <a class="el" href="classitem.html">item</a> &amp;weapon)</td></tr>
<tr class="memdesc:a1a5ca617547cd7a8981f4b9963500d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the weapon is valid and if the player meets certain conditions for firing it.  <a href="namespaceavatar__action.html#a1a5ca617547cd7a8981f4b9963500d25">More...</a><br /></td></tr>
<tr class="separator:a1a5ca617547cd7a8981f4b9963500d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66522a5f8e132e3db71c514ca8767b0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a66522a5f8e132e3db71c514ca8767b0f">fire_wielded_weapon</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="memdesc:a66522a5f8e132e3db71c514ca8767b0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the wielded weapon is a gun and can be fired then starts interactive aiming.  <a href="namespaceavatar__action.html#a66522a5f8e132e3db71c514ca8767b0f">More...</a><br /></td></tr>
<tr class="separator:a66522a5f8e132e3db71c514ca8767b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fddd10da6731876b34027e1cb9fca3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a1fddd10da6731876b34027e1cb9fca3e">fire_ranged_mutation</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="classitem.html">item</a> &amp;fake_gun)</td></tr>
<tr class="memdesc:a1fddd10da6731876b34027e1cb9fca3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores fake gun specified by the mutation and starts interactive aiming.  <a href="namespaceavatar__action.html#a1fddd10da6731876b34027e1cb9fca3e">More...</a><br /></td></tr>
<tr class="separator:a1fddd10da6731876b34027e1cb9fca3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addf4dc8fa65c8d0cfe3953b67e2f5a36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#addf4dc8fa65c8d0cfe3953b67e2f5a36">fire_ranged_bionic</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, const <a class="el" href="classitem.html">item</a> &amp;fake_gun)</td></tr>
<tr class="memdesc:addf4dc8fa65c8d0cfe3953b67e2f5a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores fake gun specified by the bionic and starts interactive aiming.  <a href="namespaceavatar__action.html#addf4dc8fa65c8d0cfe3953b67e2f5a36">More...</a><br /></td></tr>
<tr class="separator:addf4dc8fa65c8d0cfe3953b67e2f5a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefd862045a22883087523efc24423f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#afefd862045a22883087523efc24423f4">fire_turret_manual</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classmap.html">map</a> &amp;m, <a class="el" href="classturret__data.html">turret_data</a> &amp;turret)</td></tr>
<tr class="memdesc:afefd862045a22883087523efc24423f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the player can manually (with their 2 hands, not via vehicle controls) fire a turret and then starts interactive aiming.  <a href="namespaceavatar__action.html#afefd862045a22883087523efc24423f4">More...</a><br /></td></tr>
<tr class="separator:afefd862045a22883087523efc24423f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff3ea3901fd1f5e85513178133c03f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a2ff3ea3901fd1f5e85513178133c03f5">plthrow</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> loc, const <a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; &amp;blind_throw_from_pos=std::nullopt)</td></tr>
<tr class="separator:a2ff3ea3901fd1f5e85513178133c03f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd349bc65fc375556b15241ab68095b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#afd349bc65fc375556b15241ab68095b1">unload</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="separator:afd349bc65fc375556b15241ab68095b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb00720c7ac8d9846f711c714770b373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#aeb00720c7ac8d9846f711c714770b373">use_item</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> &amp;loc, std::string const &amp;method={})</td></tr>
<tr class="separator:aeb00720c7ac8d9846f711c714770b373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad651718c214e707034374b85d936d671"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#ad651718c214e707034374b85d936d671">use_item</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="separator:ad651718c214e707034374b85d936d671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458341992db303c50a65d3b8117ed7c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceavatar__action.html#a458341992db303c50a65d3b8117ed7c8">check_stealing</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who, <a class="el" href="classitem.html">item</a> &amp;weapon)</td></tr>
<tr class="memdesc:a458341992db303c50a65d3b8117ed7c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if avatar is stealing a weapon.  <a href="namespaceavatar__action.html#a458341992db303c50a65d3b8117ed7c8">More...</a><br /></td></tr>
<tr class="separator:a458341992db303c50a65d3b8117ed7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3fe0323e13640197154fe53026c95211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe0323e13640197154fe53026c95211">&#9670;&nbsp;</a></span>autoattack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::autoattack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00715">715</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> weapon = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">int</span> reach = weapon ? weapon-&gt;<a class="code" href="classitem.html#a04985a2b99688b687432463fb2f0a853">reach_range</a>( you ) : 1;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    std::vector&lt;Creature *&gt; critters = you.<a class="code" href="classCharacter.html#a7a1a328276dae4040ef931b5976d04ba">get_targetable_creatures</a>( reach, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    critters.erase( std::remove_if( critters.begin(), critters.end(), [&amp;you,</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    reach]( <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        if( reach == 1 &amp;&amp; !you.is_adjacent( c, true ) ) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            return true;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>-&gt;is_npc() ) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            return false;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">return</span> !<span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( *c ).<a class="code" href="classnpc.html#a7ee1c9e434339418cb9b5907d8695806">is_enemy</a>();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    } ), critters.end() );</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span>( critters.empty() ) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No hostile creature in reach.  Waiting a turn.&quot;</span> ) );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;check_safe_mode_allowed() ) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            you.<a class="code" href="classCharacter.html#a1012850d13ca8a58bcf82aa75b3a55d1">pause</a>();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="classCreature.html">Creature</a> &amp;best = **std::max_element( critters.begin(), critters.end(),</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * l, <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * r ) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        return rate_critter( *l ) &gt; rate_critter( *r );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    } );</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> diff = best.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() - you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( diff.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> ) &lt;= 1 &amp;&amp; <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( diff.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> ) &lt;= 1 &amp;&amp; diff.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == 0 ) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a>( you, m, <a class="code" href="structtripoint.html">tripoint</a>( diff.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), 0 ) );</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    you.<a class="code" href="classCharacter.html#a408e887059da5e9a0b1bfd7672ff392d">reach_attack</a>( best.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1012850d13ca8a58bcf82aa75b3a55d1"><div class="ttname"><a href="classCharacter.html#a1012850d13ca8a58bcf82aa75b3a55d1">Character::pause</a></div><div class="ttdeci">void pause()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l13218">character.cpp:13218</a></div></div>
<div class="ttc" id="aclassCharacter_html_a408e887059da5e9a0b1bfd7672ff392d"><div class="ttname"><a href="classCharacter.html#a408e887059da5e9a0b1bfd7672ff392d">Character::reach_attack</a></div><div class="ttdeci">void reach_attack(const tripoint &amp;p, int forced_movecost=-1)</div><div class="ttdoc">Handles reach melee attacks.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l01012">melee.cpp:1012</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7a1a328276dae4040ef931b5976d04ba"><div class="ttname"><a href="classCharacter.html#a7a1a328276dae4040ef931b5976d04ba">Character::get_targetable_creatures</a></div><div class="ttdeci">std::vector&lt; Creature * &gt; get_targetable_creatures(int range, bool melee) const</div><div class="ttdoc">As above, but includes all creatures the player can detect well enough to target with ranged weapons,...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10505">character.cpp:10505</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa9a4335ab1fd0d975199750b1ebf5bef"><div class="ttname"><a href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">Character::get_wielded_item</a></div><div class="ttdeci">item_location get_wielded_item() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00674">character.cpp:674</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem_html_a04985a2b99688b687432463fb2f0a853"><div class="ttname"><a href="classitem.html#a04985a2b99688b687432463fb2f0a853">item::reach_range</a></div><div class="ttdeci">int reach_range(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07509">item.cpp:7509</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_a7ee1c9e434339418cb9b5907d8695806"><div class="ttname"><a href="classnpc.html#a7ee1c9e434339418cb9b5907d8695806">npc::is_enemy</a></div><div class="ttdeci">bool is_enemy() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02352">npc.cpp:2352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00173">avatar_action.cpp:173</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00202">point.h:202</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="character_8cpp_source.html#l10505">Character::get_targetable_creatures()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="npc_8cpp_source.html#l02352">npc::is_enemy()</a>, and <a class="el" href="item_8cpp_source.html#l07509">item::reach_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>.</p>

</div>
</div>
<a id="a1a5ca617547cd7a8981f4b9963500d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5ca617547cd7a8981f4b9963500d25">&#9670;&nbsp;</a></span>can_fire_weapon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::can_fire_weapon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weapon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the weapon is valid and if the player meets certain conditions for firing it. </p>
<p>Used for validating ACT_AIM and turret weapon </p><dl class="section return"><dt>Returns</dt><dd>True if all conditions are true, otherwise false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00753">753</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;{</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span>( !weapon.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Expected item to be a gun&quot;</span> );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">try_break_relax_gas</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your eyes steel, and you raise your weapon!&quot;</span> ),</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t fire your weapon, it&#39;s too heavyâ€¦&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    std::vector&lt;std::string&gt; messages;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;mode_map : weapon.<a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>() ) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordtype">bool</span> check_common = <a class="code" href="ranged_8cpp.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a>( you, m, messages, mode_map.second );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordtype">bool</span> check_weapon = <a class="code" href="ranged_8cpp.html#a207024a5d17769a16bfc8a7a434d72cd">gunmode_checks_weapon</a>( you, m, messages, mode_map.second );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordtype">bool</span> can_use_mode = check_common &amp;&amp; check_weapon;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span>( can_use_mode ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> : messages ) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> );</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div>
<div class="ttc" id="aclassavatar_html_ac0150ee6fda3f767a0e6cb3b0d769032"><div class="ttname"><a href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">avatar::try_break_relax_gas</a></div><div class="ttdeci">bool try_break_relax_gas(const std::string &amp;msg_success, const std::string &amp;msg_failure)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00887">avatar.cpp:887</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09297">item.cpp:9297</a></div></div>
<div class="ttc" id="aclassitem_html_aa1a2ecb3e9ebf95dc7fedac4c1de32b4"><div class="ttname"><a href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">item::gun_all_modes</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_mode &gt; gun_all_modes() const</div><div class="ttdoc">Get all possible modes for this gun inclusive of any attached gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11361">item.cpp:11361</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_a616ad2c7ee2eb002b683b41b04a888c1"><div class="ttname"><a href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">mapgen_defer::message</a></div><div class="ttdeci">static std::string message</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00632">mapgen.cpp:632</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a18e93476c9d626924c31cf14193305b3"><div class="ttname"><a href="ranged_8cpp.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a></div><div class="ttdeci">bool gunmode_checks_common(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Common checks for gunmode (when firing a weapon / manually firing turret)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03975">ranged.cpp:3975</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a207024a5d17769a16bfc8a7a434d72cd"><div class="ttname"><a href="ranged_8cpp.html#a207024a5d17769a16bfc8a7a434d72cd">gunmode_checks_weapon</a></div><div class="ttdeci">bool gunmode_checks_weapon(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Various checks for gunmode when firing a weapon.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l04010">ranged.cpp:4010</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l11361">item::gun_all_modes()</a>, <a class="el" href="ranged_8cpp_source.html#l03975">gunmode_checks_common()</a>, <a class="el" href="ranged_8cpp_source.html#l04010">gunmode_checks_weapon()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mapgen_8cpp_source.html#l00632">mapgen_defer::message</a>, and <a class="el" href="avatar_8cpp_source.html#l00887">avatar::try_break_relax_gas()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00315">aim_activity_actor::do_turn()</a>.</p>

</div>
</div>
<a id="a458341992db303c50a65d3b8117ed7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458341992db303c50a65d3b8117ed7c8">&#9670;&nbsp;</a></span>check_stealing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::check_stealing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weapon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if avatar is stealing a weapon. </p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l06022">6022</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;{</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    <a class="code" href="activity__actor_8cpp.html#a5bbf3a410cf91ca2647b0c683785b28e">return ::check_stealing</a>( who, weapon );</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a5bbf3a410cf91ca2647b0c683785b28e"><div class="ttname"><a href="activity__actor_8cpp.html#a5bbf3a410cf91ca2647b0c683785b28e">check_stealing</a></div><div class="ttdeci">static bool check_stealing(Character &amp;who, item &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l06004">activity_actor.cpp:6004</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor_8cpp_source.html#l06004">check_stealing()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l10110">game::wield()</a>.</p>

</div>
</div>
<a id="a43a8332234f37cdd9b383bf8681e161b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a8332234f37cdd9b383bf8681e161b">&#9670;&nbsp;</a></span>eat() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::eat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eat food or fuel 'E' (or 'a') </p>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00946">946</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;{</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    std::string <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">str_values</a>.empty() ) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">str_values</a>.back();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="namespaceavatar__action.html#a43a8332234f37cdd9b383bf8681e161b">avatar_action::eat</a>( you, loc, you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#aca09f19b9a36866a33a46cf0c8ee484d">values</a>, you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>, filter,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                        you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a955b947f2ca18118b44d3e44aa72b66e">id</a>() );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a1b2c5a44b184330e2384906fe0727210"><div class="ttname"><a href="classplayer__activity.html#a1b2c5a44b184330e2384906fe0727210">player_activity::str_values</a></div><div class="ttdeci">std::vector&lt; std::string &gt; str_values</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00063">player_activity.h:63</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a955b947f2ca18118b44d3e44aa72b66e"><div class="ttname"><a href="classplayer__activity.html#a955b947f2ca18118b44d3e44aa72b66e">player_activity::id</a></div><div class="ttdeci">const activity_id &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00114">player_activity.h:114</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a979cd5aca677ff30dcbb767d4a3980d2"><div class="ttname"><a href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">player_activity::targets</a></div><div class="ttdeci">std::vector&lt; item_location &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00061">player_activity.h:61</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_aca09f19b9a36866a33a46cf0c8ee484d"><div class="ttname"><a href="classplayer__activity.html#aca09f19b9a36866a33a46cf0c8ee484d">player_activity::values</a></div><div class="ttdeci">std::vector&lt; int &gt; values</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00062">player_activity.h:62</a></div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="anamespaceavatar__action_html_a43a8332234f37cdd9b383bf8681e161b"><div class="ttname"><a href="namespaceavatar__action.html#a43a8332234f37cdd9b383bf8681e161b">avatar_action::eat</a></div><div class="ttdeci">void eat(avatar &amp;you, item_location &amp;loc)</div><div class="ttdoc">Eat food or fuel 'E' (or 'a')</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00946">avatar_action.cpp:946</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="player__activity_8h_source.html#l00114">player_activity::id()</a>, <a class="el" href="player__activity_8h_source.html#l00063">player_activity::str_values</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, and <a class="el" href="player__activity_8h_source.html#l00062">player_activity::values</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02751">activity_handlers::consume_drink_menu_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02744">activity_handlers::consume_food_menu_do_turn()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00973">eat_or_use()</a>, <a class="el" href="game_8cpp_source.html#l02035">game::inventory_item_menu()</a>, and <a class="el" href="handle__action_8cpp_source.html#l01842">game::open_consume_item_menu()</a>.</p>

</div>
</div>
<a id="a0954ef4d5de76f8cc456b1c8a8cfca66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0954ef4d5de76f8cc456b1c8a8cfca66">&#9670;&nbsp;</a></span>eat() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::eat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>consume_menu_selections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classitem__location.html">item_location</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>consume_menu_selected_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>consume_menu_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00956">956</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;{</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        you.<a class="code" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">cancel_activity</a>();</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    loc.<a class="code" href="classitem__location.html#acf908a183e86dfb9b9a22fc555f13c4e">overflow</a>();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( loc, consume_menu_selections,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                         consume_menu_selected_items, consume_menu_filter, type ) );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    you.<a class="code" href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">last_item</a> = <a class="code" href="classitem.html">item</a>( *loc ).<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1819679d2d4e9f8ba5d62ae26737f34c"><div class="ttname"><a href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">Character::last_item</a></div><div class="ttdeci">itype_id last_item</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02713">character.h:2713</a></div></div>
<div class="ttc" id="aclassCharacter_html_a597968eba450c923b56a1c9cac1676dc"><div class="ttname"><a href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity</a></div><div class="ttdeci">void cancel_activity()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08983">character.cpp:8983</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassconsume__activity__actor_html"><div class="ttname"><a href="classconsume__activity__actor.html">consume_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00780">activity_actor_definitions.h:781</a></div></div>
<div class="ttc" id="aclassitem__location_html_acf908a183e86dfb9b9a22fc555f13c4e"><div class="ttname"><a href="classitem__location.html#acf908a183e86dfb9b9a22fc555f13c4e">item_location::overflow</a></div><div class="ttdeci">void overflow()</div><div class="ttdoc">Overflow items into parent pockets recursively.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00996">item_location.cpp:996</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l08983">Character::cancel_activity()</a>, <a class="el" href="character_8h_source.html#l02713">Character::last_item</a>, <a class="el" href="item__location_8cpp_source.html#l00996">item_location::overflow()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

</div>
</div>
<a id="a18dbf8c70f67f268888720460f7b95b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18dbf8c70f67f268888720460f7b95b4">&#9670;&nbsp;</a></span>eat_here()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::eat_here </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00885">885</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span>( ( you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a> ) || you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        ( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a8bce9805c55ddaeabb54c31211b1e137">ter_furn_flag::TFLAG_SHRUB</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &amp;&amp;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad2cb2be662a7b7fc2b58b834cbadc6e3">ter_furn_flag::TFLAG_GRAZER_INEDIBLE</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a> ) ) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re too full to eat the leaves from the %s.&quot;</span> ), here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() )-&gt;<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="avatar__action_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a> );</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <a class="code" href="classitem.html">item</a> food( <span class="stringliteral">&quot;underbrush&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 1 );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( food ) );</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span>( ( you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a> ) || you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        ( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a58cecd2007ab5d1f12647f09779a1124">ter_furn_flag::TFLAG_FLOWER</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &amp;&amp;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad2cb2be662a7b7fc2b58b834cbadc6e3">ter_furn_flag::TFLAG_GRAZER_INEDIBLE</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a> ) ) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re too full to eat the %s.&quot;</span> ), here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() )-&gt;<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <a class="code" href="classitem.html">item</a> food( <span class="stringliteral">&quot;small_plant&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 1 );</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( food ) );</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a> ) &amp;&amp;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        ( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af7a02ed6fd6c47ea863940b02d3952dd">ter_furn_flag::TFLAG_GRAZABLE</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &amp;&amp;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828">ter_furn_flag::TFLAG_FUNGUS</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a> ) ) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re too full to graze.&quot;</span> ) );</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <a class="code" href="classitem.html">item</a> food( <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;grass&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 1 ) );</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( food ) );</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), here.<a class="code" href="classmap.html#aa644647b252ed03e1724952f4bf45b33">get_ter_transforms_into</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a> ) ) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> &amp;ter_underfoot = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span>( ter_underfoot == <a class="code" href="avatar__action_8cpp.html#a256309836e4eeb5bf3b560883cac04f9">ter_t_grass_golf</a> || ter_underfoot == <a class="code" href="avatar__action_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a> ) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This grass is too short to graze.&quot;</span> ) );</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_underfoot == <a class="code" href="avatar__action_8cpp.html#a135094a0fb90484f3e2813b76b765916">ter_t_grass_dead</a> ) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This grass is dead and too mangled for you to graze.&quot;</span> ) );</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_underfoot == <a class="code" href="avatar__action_8cpp.html#a55665c6d5f355e7b7a80601edd9ba835">ter_t_grass_white</a> ) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This grass is tainted with paint and thus inedible.&quot;</span> ) );</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_underfoot == <a class="code" href="avatar__action_8cpp.html#ae474d51274e7c259f9bbfa9c971256a5">ter_t_grass_alien</a> ) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This grass is razor sharp and would probably shred your mouth.&quot;</span> ) );</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;}</div>
<div class="ttc" id="aavatar__action_8cpp_html_a0371615cbdf966655d267076abc28b68"><div class="ttname"><a href="avatar__action_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a></div><div class="ttdeci">static const trait_id trait_RUMINANT(&quot;RUMINANT&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a135094a0fb90484f3e2813b76b765916"><div class="ttname"><a href="avatar__action_8cpp.html#a135094a0fb90484f3e2813b76b765916">ter_t_grass_dead</a></div><div class="ttdeci">static const ter_str_id ter_t_grass_dead(&quot;t_grass_dead&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a256309836e4eeb5bf3b560883cac04f9"><div class="ttname"><a href="avatar__action_8cpp.html#a256309836e4eeb5bf3b560883cac04f9">ter_t_grass_golf</a></div><div class="ttdeci">static const ter_str_id ter_t_grass_golf(&quot;t_grass_golf&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a3124b68e352cad48fc7848f4dc58973b"><div class="ttname"><a href="avatar__action_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a></div><div class="ttdeci">static const efftype_id effect_hunger_engorged(&quot;hunger_engorged&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a55665c6d5f355e7b7a80601edd9ba835"><div class="ttname"><a href="avatar__action_8cpp.html#a55665c6d5f355e7b7a80601edd9ba835">ter_t_grass_white</a></div><div class="ttdeci">static const ter_str_id ter_t_grass_white(&quot;t_grass_white&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a6721e1f760efa9adcf228c4f0ad73d3a"><div class="ttname"><a href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a></div><div class="ttdeci">static const trait_id trait_GRAZER(&quot;GRAZER&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ae474d51274e7c259f9bbfa9c971256a5"><div class="ttname"><a href="avatar__action_8cpp.html#ae474d51274e7c259f9bbfa9c971256a5">ter_t_grass_alien</a></div><div class="ttdeci">static const ter_str_id ter_t_grass_alien(&quot;t_grass_alien&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_afa18c8c17b0b33f364c72c636824686f"><div class="ttname"><a href="avatar__action_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a></div><div class="ttdeci">static const ter_str_id ter_t_grass(&quot;t_grass&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a225de862f8875f9ff96ec8a303213404"><div class="ttname"><a href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">Character::has_active_mutation</a></div><div class="ttdeci">bool has_active_mutation(const trait_id &amp;b) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00613">mutation.cpp:613</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; ter_t &gt;</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a410a8dcd3e1ee0e87da584bf878d6f83"><div class="ttname"><a href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">map::furn_set</a></div><div class="ttdeci">bool furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, bool furn_reset=false, bool avoid_creatures=false)</div><div class="ttdoc">furn_reset should be true if new_furniture is being set to f_null when the player is grab-moving furn...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01743">map.cpp:1743</a></div></div>
<div class="ttc" id="aclassmap_html_a59bdb65280e5e1461469b0e1275c402e"><div class="ttname"><a href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">map::ter_set</a></div><div class="ttdeci">bool ter_set(const tripoint &amp;p, const ter_id &amp;new_terrain, bool avoid_creatures=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02226">map.cpp:2226</a></div></div>
<div class="ttc" id="aclassmap_html_aa644647b252ed03e1724952f4bf45b33"><div class="ttname"><a href="classmap.html#aa644647b252ed03e1724952f4bf45b33">map::get_ter_transforms_into</a></div><div class="ttdeci">ter_id get_ter_transforms_into(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02198">map.cpp:2198</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01922">map.cpp:1922</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; furn_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a58cecd2007ab5d1f12647f09779a1124"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a58cecd2007ab5d1f12647f09779a1124">ter_furn_flag::TFLAG_FLOWER</a></div><div class="ttdeci">@ TFLAG_FLOWER</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a8bce9805c55ddaeabb54c31211b1e137"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a8bce9805c55ddaeabb54c31211b1e137">ter_furn_flag::TFLAG_SHRUB</a></div><div class="ttdeci">@ TFLAG_SHRUB</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828">ter_furn_flag::TFLAG_FUNGUS</a></div><div class="ttdeci">@ TFLAG_FUNGUS</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ad2cb2be662a7b7fc2b58b834cbadc6e3"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad2cb2be662a7b7fc2b58b834cbadc6e3">ter_furn_flag::TFLAG_GRAZER_INEDIBLE</a></div><div class="ttdeci">@ TFLAG_GRAZER_INEDIBLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054af7a02ed6fd6c47ea863940b02d3952dd"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af7a02ed6fd6c47ea863940b02d3952dd">ter_furn_flag::TFLAG_GRAZABLE</a></div><div class="ttdeci">@ TFLAG_GRAZABLE</div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a1e749bfdff8adff5829dc013dcac0cc1"><div class="ttname"><a href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">map_data_common_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00563">mapdata.cpp:563</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="avatar__action_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l02198">map::get_ter_transforms_into()</a>, <a class="el" href="mutation_8cpp_source.html#l00613">Character::has_active_mutation()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="mapdata_8cpp_source.html#l00563">map_data_common_t::name()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="avatar__action_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a>, <a class="el" href="avatar__action_8cpp.html#ae474d51274e7c259f9bbfa9c971256a5">ter_t_grass_alien</a>, <a class="el" href="avatar__action_8cpp.html#a135094a0fb90484f3e2813b76b765916">ter_t_grass_dead</a>, <a class="el" href="avatar__action_8cpp.html#a256309836e4eeb5bf3b560883cac04f9">ter_t_grass_golf</a>, <a class="el" href="avatar__action_8cpp.html#a55665c6d5f355e7b7a80601edd9ba835">ter_t_grass_white</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a58cecd2007ab5d1f12647f09779a1124">TFLAG_FLOWER</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828">TFLAG_FUNGUS</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af7a02ed6fd6c47ea863940b02d3952dd">TFLAG_GRAZABLE</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad2cb2be662a7b7fc2b58b834cbadc6e3">TFLAG_GRAZER_INEDIBLE</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a8bce9805c55ddaeabb54c31211b1e137">TFLAG_SHRUB</a>, <a class="el" href="avatar__action_8cpp.html#a6721e1f760efa9adcf228c4f0ad73d3a">trait_GRAZER</a>, <a class="el" href="avatar__action_8cpp.html#a0371615cbdf966655d267076abc28b68">trait_RUMINANT</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>.</p>

</div>
</div>
<a id="ad2edf9cf73ba9fd837ce168d2330f140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2edf9cf73ba9fd837ce168d2330f140">&#9670;&nbsp;</a></span>eat_or_use()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::eat_or_use </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a>&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00973">973</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;{</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span>( loc &amp;&amp; loc-&gt;<a class="code" href="classitem.html#a009de9d7138e4186f03640d282ebd621">is_medical_tool</a>() ) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <a class="code" href="namespaceavatar__action.html#aeb00720c7ac8d9846f711c714770b373">avatar_action::use_item</a>( you, loc, <span class="stringliteral">&quot;heal&quot;</span> );</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <a class="code" href="namespaceavatar__action.html#a43a8332234f37cdd9b383bf8681e161b">avatar_action::eat</a>( you, loc );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a009de9d7138e4186f03640d282ebd621"><div class="ttname"><a href="classitem.html#a009de9d7138e4186f03640d282ebd621">item::is_medical_tool</a></div><div class="ttdeci">bool is_medical_tool() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09497">item.cpp:9497</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_aeb00720c7ac8d9846f711c714770b373"><div class="ttname"><a href="namespaceavatar__action.html#aeb00720c7ac8d9846f711c714770b373">avatar_action::use_item</a></div><div class="ttdeci">void use_item(avatar &amp;you, item_location &amp;loc, std::string const &amp;method={})</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l01110">avatar_action.cpp:1110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="avatar__action_8cpp_source.html#l00946">eat()</a>, <a class="el" href="item_8cpp_source.html#l09497">item::is_medical_tool()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l01110">use_item()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02758">activity_handlers::consume_meds_menu_do_turn()</a>, <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02731">activity_handlers::eat_menu_do_turn()</a>, <a class="el" href="game_8cpp_source.html#l02035">game::inventory_item_menu()</a>, and <a class="el" href="handle__action_8cpp_source.html#l01842">game::open_consume_item_menu()</a>.</p>

</div>
</div>
<a id="addf4dc8fa65c8d0cfe3953b67e2f5a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addf4dc8fa65c8d0cfe3953b67e2f5a36">&#9670;&nbsp;</a></span>fire_ranged_bionic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::fire_ranged_bionic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fake_gun</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores fake gun specified by the bionic and starts interactive aiming. </p>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00812">812</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;{</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classaim__activity__actor.html#a71ff6b5e8eb8a330bbecf8c0ef903a58">aim_activity_actor::use_bionic</a>( fake_gun ) );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="ttc" id="aclassaim__activity__actor_html_a71ff6b5e8eb8a330bbecf8c0ef903a58"><div class="ttname"><a href="classaim__activity__actor.html#a71ff6b5e8eb8a330bbecf8c0ef903a58">aim_activity_actor::use_bionic</a></div><div class="ttdeci">static aim_activity_actor use_bionic(const item &amp;fake_gun)</div><div class="ttdoc">Aiming fake gun provided by a bionic.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l00294">activity_actor.cpp:294</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l00294">aim_activity_actor::use_bionic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00722">Character::activate_bionic()</a>.</p>

</div>
</div>
<a id="a1fddd10da6731876b34027e1cb9fca3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fddd10da6731876b34027e1cb9fca3e">&#9670;&nbsp;</a></span>fire_ranged_mutation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::fire_ranged_mutation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>fake_gun</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores fake gun specified by the mutation and starts interactive aiming. </p>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00807">807</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;{</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classaim__activity__actor.html#a98e2c3f5007a07adac77555b40d6cfe4">aim_activity_actor::use_mutation</a>( fake_gun ) );</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="ttc" id="aclassaim__activity__actor_html_a98e2c3f5007a07adac77555b40d6cfe4"><div class="ttname"><a href="classaim__activity__actor.html#a98e2c3f5007a07adac77555b40d6cfe4">aim_activity_actor::use_mutation</a></div><div class="ttdeci">static aim_activity_actor use_mutation(const item &amp;fake_gun)</div><div class="ttdoc">Aiming fake gun provided by a mutation.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l00301">activity_actor.cpp:301</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l00301">aim_activity_actor::use_mutation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mutation_8cpp_source.html#l00739">Character::activate_mutation()</a>.</p>

</div>
</div>
<a id="afefd862045a22883087523efc24423f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afefd862045a22883087523efc24423f4">&#9670;&nbsp;</a></span>fire_turret_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::fire_turret_manual </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classturret__data.html">turret_data</a> &amp;&#160;</td>
          <td class="paramname"><em>turret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the player can manually (with their 2 hands, not via vehicle controls) fire a turret and then starts interactive aiming. </p>
<p>Assumes that the turret is on player position. </p><dl class="section return"><dt>Returns</dt><dd>true if attempt to fire was successful (aim then cancel is also considered success) </dd></dl>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00817">817</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;{</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">if</span>( !turret.<a class="code" href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">base</a>()-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Expected turret base to be a gun.&quot;</span> );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">switch</span>( turret.<a class="code" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() ) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ad16da1e7201b298007ba19ec58671dad">turret_data::status::no_ammo</a>:</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is out of ammo.&quot;</span> ), turret.<a class="code" href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">name</a>() );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7a27d876a7b5832c85bf83234bc47006ab">turret_data::status::no_power</a>:</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is not powered.&quot;</span> ), turret.<a class="code" href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">name</a>() );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a>:</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Unknown turret status&quot;</span> );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// check if any gun modes are usable</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    std::vector&lt;std::string&gt; messages;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keyword">const</span> std::map&lt;gun_mode_id, gun_mode&gt; gunmodes = turret.<a class="code" href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">base</a>()-&gt;<a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span>( !std::any_of( gunmodes.begin(), gunmodes.end(),</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    [&amp;you, &amp;m, &amp;messages]( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;p ) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    return gunmode_checks_common( you, m, messages, p.second );</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    } ) ) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// no gunmode is usable, dump reason messages why not</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;msg : messages ) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, msg );</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// all checks passed - start aiming</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;temp_exit_fullscreen();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a> = <a class="code" href="namespacetarget__handler.html#a9f06978559f45ddb20b5a1caec3f9c1f">target_handler::mode_turret_manual</a>( you, turret );</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.empty() ) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        turret.<a class="code" href="classturret__data.html#a2fc1d28da650ae3ab29a95c1a0582b7e">fire</a>( you, <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.back() );</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reenter_fullscreen();</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;}</div>
<div class="ttc" id="aclassturret__data_html_a2fc1d28da650ae3ab29a95c1a0582b7e"><div class="ttname"><a href="classturret__data.html#a2fc1d28da650ae3ab29a95c1a0582b7e">turret_data::fire</a></div><div class="ttdeci">int fire(Character &amp;c, const tripoint &amp;target)</div><div class="ttdoc">Fire the turret's gun at a given target.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00311">turret.cpp:311</a></div></div>
<div class="ttc" id="aclassturret__data_html_a3a01d6f45d3f23cf6b5a32c5e17440b7a27d876a7b5832c85bf83234bc47006ab"><div class="ttname"><a href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7a27d876a7b5832c85bf83234bc47006ab">turret_data::status::no_power</a></div><div class="ttdeci">@ no_power</div></div>
<div class="ttc" id="aclassturret__data_html_a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7"><div class="ttname"><a href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a></div><div class="ttdeci">@ ready</div></div>
<div class="ttc" id="aclassturret__data_html_a3a01d6f45d3f23cf6b5a32c5e17440b7ad16da1e7201b298007ba19ec58671dad"><div class="ttname"><a href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ad16da1e7201b298007ba19ec58671dad">turret_data::status::no_ammo</a></div><div class="ttdeci">@ no_ammo</div></div>
<div class="ttc" id="aclassturret__data_html_a3d31c9d61e07b678c4d7fac5d7c4646a"><div class="ttname"><a href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">turret_data::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00074">turret.cpp:74</a></div></div>
<div class="ttc" id="aclassturret__data_html_a585d18f2c33116bc1e9028210fccadbc"><div class="ttname"><a href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">turret_data::query</a></div><div class="ttdeci">status query() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00236">turret.cpp:236</a></div></div>
<div class="ttc" id="aclassturret__data_html_a737465cce9c8f1e87eec808ee1363421"><div class="ttname"><a href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">turret_data::base</a></div><div class="ttdeci">item_location base()</div><div class="ttdoc">Get base item location.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00079">turret.cpp:79</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_a9f06978559f45ddb20b5a1caec3f9c1f"><div class="ttname"><a href="namespacetarget__handler.html#a9f06978559f45ddb20b5a1caec3f9c1f">target_handler::mode_turret_manual</a></div><div class="ttdeci">trajectory mode_turret_manual(avatar &amp;you, turret_data &amp;turret)</div><div class="ttdoc">Manually firing vehicle turret.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00467">ranged.cpp:467</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_aea843144f5e69546ddea88eeda177640"><div class="ttname"><a href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; trajectory</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00029">ranged.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="turret_8cpp_source.html#l00079">turret_data::base()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="turret_8cpp_source.html#l00311">turret_data::fire()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item_8cpp_source.html#l11361">item::gun_all_modes()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="ranged_8cpp_source.html#l00467">target_handler::mode_turret_manual()</a>, <a class="el" href="turret_8cpp_source.html#l00074">turret_data::name()</a>, <a class="el" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ad16da1e7201b298007ba19ec58671dad">turret_data::no_ammo</a>, <a class="el" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7a27d876a7b5832c85bf83234bc47006ab">turret_data::no_power</a>, <a class="el" href="turret_8cpp_source.html#l00236">turret_data::query()</a>, and <a class="el" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l01635">fire()</a>.</p>

</div>
</div>
<a id="a66522a5f8e132e3db71c514ca8767b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66522a5f8e132e3db71c514ca8767b0f">&#9670;&nbsp;</a></span>fire_wielded_weapon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::fire_wielded_weapon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the wielded weapon is a gun and can be fired then starts interactive aiming. </p>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00782">782</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> weapon = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span>( !weapon ) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span>( weapon-&gt;<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s must be attached to a gun, it can not be fired separately.&quot;</span> ),</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                 weapon-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !weapon-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( weapon-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() &amp;&amp;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;               !weapon-&gt;<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().count( weapon-&gt;<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a>().<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() ) ) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s can&#39;t be fired while loaded with incompatible ammunition %s&quot;</span> ),</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                 weapon-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), weapon-&gt;<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>()-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) );</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classaim__activity__actor.html#ac533f33a95657b2f7797f37c8452a4ba">aim_activity_actor::use_wielded</a>() );</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div>
<div class="ttc" id="aclassaim__activity__actor_html_ac533f33a95657b2f7797f37c8452a4ba"><div class="ttname"><a href="classaim__activity__actor.html#ac533f33a95657b2f7797f37c8452a4ba">aim_activity_actor::use_wielded</a></div><div class="ttdeci">static aim_activity_actor use_wielded()</div><div class="ttdoc">Aiming wielded gun.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l00289">activity_actor.cpp:289</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a4adcc4a3a5f5fb20a4d245d79109640a"><div class="ttname"><a href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">item::ammo_data</a></div><div class="ttdeci">const itype * ammo_data() const</div><div class="ttdoc">Specific ammo data, returns nullptr if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10995">item.cpp:10995</a></div></div>
<div class="ttc" id="aclassitem_html_a624c3b7ec10ae766a9e75718af71e647"><div class="ttname"><a href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type, returns &quot;null&quot; if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11021">item.cpp:11021</a></div></div>
<div class="ttc" id="aclassitem_html_a81e681d4290360b38c2460ac54a614e5"><div class="ttname"><a href="classitem.html#a81e681d4290360b38c2460ac54a614e5">item::loaded_ammo</a></div><div class="ttdeci">const item &amp; loaded_ammo() const</div><div class="ttdoc">Get currently loaded ammo, if any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11031">item.cpp:11031</a></div></div>
<div class="ttc" id="aclassitem_html_a9b06bb61116b722a90aa372a4561337a"><div class="ttname"><a href="classitem.html#a9b06bb61116b722a90aa372a4561337a">item::is_gunmod</a></div><div class="ttdeci">bool is_gunmod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09435">item.cpp:9435</a></div></div>
<div class="ttc" id="aclassitem_html_aab4f4feeb64f169f408c24d03e0ce61f"><div class="ttname"><a href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">item::ammo_type</a></div><div class="ttdeci">ammotype ammo_type() const</div><div class="ttdoc">Ammo type of an ammo item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11073">item.cpp:11073</a></div></div>
<div class="ttc" id="aclassitem_html_aed15b9f2983bf68f5701e2b7e3b6ac73"><div class="ttname"><a href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">item::ammo_types</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo_types(bool conversion=true) const</div><div class="ttdoc">Ammo types (ammunition_type) the item magazine pocket can contain.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11056">item.cpp:11056</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l11021">item::ammo_current()</a>, <a class="el" href="item_8cpp_source.html#l10995">item::ammo_data()</a>, <a class="el" href="item_8cpp_source.html#l11073">item::ammo_type()</a>, <a class="el" href="item_8cpp_source.html#l11056">item::ammo_types()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="item_8cpp_source.html#l09435">item::is_gunmod()</a>, <a class="el" href="item_8cpp_source.html#l11031">item::loaded_ammo()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="itype_8cpp_source.html#l00095">itype::nname()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l00289">aim_activity_actor::use_wielded()</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, and <a class="el" href="handle__action_8cpp_source.html#l01635">fire()</a>.</p>

</div>
</div>
<a id="af2c58da1638b239e9df99d2a4611cde8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c58da1638b239e9df99d2a4611cde8">&#9670;&nbsp;</a></span>mend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::mend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a>&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00863">863</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;{</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s too dark to work on mending this.&quot;</span> ) );</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            loc = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re not wielding anything.&quot;</span> ) );</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *loc ) ) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        you.<a class="code" href="classCharacter.html#a7f2a451a9100f19df686fd1197c46208">mend_item</a>( <a class="code" href="classitem__location.html">item_location</a>( loc ) );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7f2a451a9100f19df686fd1197c46208"><div class="ttname"><a href="classCharacter.html#a7f2a451a9100f19df686fd1197c46208">Character::mend_item</a></div><div class="ttdeci">void mend_item(item_location &amp;&amp;obj, bool interactive=true)</div><div class="ttdoc">Attempt to mend an item (fix any current faults)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06566">character.cpp:6566</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad79464264cb8a2061f5888d092f5cd86"><div class="ttname"><a href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">Character::is_armed</a></div><div class="ttdeci">bool is_armed() const</div><div class="ttdoc">Returns true if the character is wielding something.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00192">melee.cpp:192</a></div></div>
<div class="ttc" id="aclassvisitable_html_af49d5ef7b3f2f0a8664c23097a56373f"><div class="ttname"><a href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">visitable::has_item</a></div><div class="ttdeci">bool has_item(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00075">visitable.cpp:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="visitable_8cpp_source.html#l00075">visitable::has_item()</a>, <a class="el" href="melee_8cpp_source.html#l00192">Character::is_armed()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, and <a class="el" href="character_8cpp_source.html#l06566">Character::mend_item()</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, and <a class="el" href="game_8cpp_source.html#l02035">game::inventory_item_menu()</a>.</p>

</div>
</div>
<a id="a27b98a9164601ec7d6b4d233ffc19e66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b98a9164601ec7d6b4d233ffc19e66">&#9670;&nbsp;</a></span>move() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::move </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8h_source.html#l00036">36</a> of file <a class="el" href="avatar__action_8h_source.html">avatar_action.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a>( you, m, <a class="code" href="structtripoint.html">tripoint</a>( d, 0 ) );</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="avatar__action_8cpp_source.html#l00173">move()</a>.</p>

</div>
</div>
<a id="a76ba74774376a08222b8cdcce08f7304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76ba74774376a08222b8cdcce08f7304">&#9670;&nbsp;</a></span>move() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::move </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00173">173</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">bool</span> in_shell = you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> ) ||</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a> );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span>( ( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;check_safe_mode_allowed() ) || in_shell ) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t move while in your shell.  Deactivate it to go mobile.&quot;</span> ) );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// If any leg broken without crutches and not already on the ground topple over</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span>( ( !you.<a class="code" href="classCharacter.html#a18f0d5c53ba7c8c945c2304bc0dadea8">enough_working_legs</a>() &amp;&amp; !you.<a class="code" href="classCharacter.html#ac6f590f28f979103633d198e32524c06">is_prone</a>() &amp;&amp;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          !( you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() &amp;&amp; you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>()-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3469d48ab1bb51e1b5aef87237e50131">flag_CRUTCHES</a> ) ) ) ) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        you.<a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar__action_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a> );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your broken legs can&#39;t hold your weight and you fall down in pain.&quot;</span> ) );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_riding = you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> dest_loc;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span>( d.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == 0 &amp;&amp; ( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a> ) || you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a> ) ) ) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() - 1, you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + 1 );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() - 1, you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + 1 );</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + d.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + d.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() + d.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span>( dest_loc == you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// Well that sure was easy</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">bool</span> via_ramp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a4099f16f8e2c4ea80e996db0ea6f4c02">ter_furn_flag::TFLAG_RAMP_UP</a>, dest_loc ) ) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> += 1;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        via_ramp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a26a026d844907da147f1350754b5210b">ter_furn_flag::TFLAG_RAMP_DOWN</a>, dest_loc ) ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> -= 1;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        via_ramp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> weapon = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aabab3b637991c0de65423ad723d6b291">ter_furn_flag::TFLAG_MINEABLE</a>, dest_loc ) &amp;&amp; <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mostseen == 0 &amp;&amp;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp; get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_MINING&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        !m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( dest_loc ) &amp;&amp; !you.<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() &amp;&amp; !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a> ) &amp;&amp;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a> ) &amp;&amp; !is_riding &amp;&amp; !you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span>( weapon &amp;&amp; weapon-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a2962f99cba158d0546ae7fc76f858e6e">flag_DIG_TOOL</a> ) ) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">if</span>( weapon-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;JACKHAMMER&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                weapon-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;you ) ) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                you.<a class="code" href="classavatar.html#a547d7adf1e902528ceced42259eab48d">invoke_item</a>( &amp;*weapon, <span class="stringliteral">&quot;JACKHAMMER&quot;</span>, dest_loc );</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">// don&#39;t move into the tile until done mining</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                you.<a class="code" href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">defer_move</a>( dest_loc );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( weapon-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;PICKAXE&quot;</span> ) ) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                you.<a class="code" href="classavatar.html#a547d7adf1e902528ceced42259eab48d">invoke_item</a>( &amp;*weapon, <span class="stringliteral">&quot;PICKAXE&quot;</span>, dest_loc );</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="comment">// don&#39;t move into the tile until done mining</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                you.<a class="code" href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">defer_move</a>( dest_loc );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// by this point we&#39;re either walking, running, crouching, or attacking, so update the activity level to match</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span>( !is_riding ) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        you.<a class="code" href="classCharacter.html#af987a23fb823861daf5d77051e3dc60f">set_activity_level</a>( you.<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value(</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                    <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a64d5e02f16b53cac227a304ee961ff41">enchant_vals::mod::MOVEMENT_EXERTION_MODIFIER</a>, you.<a class="code" href="classCharacter.html#a0e6803120e93851046bf12640c35ada2">current_movement_mode</a>()-&gt;<a class="code" href="classmove__mode.html#a312bb9774fe9c426d0e3e82221080bbd">exertion_level</a>() ) );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// If the player is *attempting to* move on the X axis, update facing direction of their sprite to match.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="structpoint.html">point</a> new_d( dest_loc.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() + <a class="code" href="structpoint.html">point</a>( -you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>(), -you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() ) );</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_tileset_isometric() ) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span>( new_d.x &gt; 0 ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            you.<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>-&gt;facing = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_d.x &lt; 0 ) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            you.<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>-&gt;facing = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">// iso:</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">// right key            =&gt;  +x -y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// left key             =&gt;  -x +y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// up key               =&gt;  +x +y       ______</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// down key             =&gt;  -x -y       ______</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">// y: left-up key       =&gt;  __ +y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// u: right-up key      =&gt;  +x __       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">// b: left-down key     =&gt;  -x __       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// n: right-down key    =&gt;  __ -y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// right key            =&gt;  +x -y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// u: right-up key      =&gt;  +x __       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// n: right-down key    =&gt;  __ -y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// up key               =&gt;  +x +y       ______</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// down key             =&gt;  -x -y       ______</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// left key             =&gt;  -x +y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// y: left-up key       =&gt;  __ +y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// b: left-down key     =&gt;  -x __       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">// right key            =&gt;  +x +y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">// u: right-up key      =&gt;  +x __       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">// n: right-down key    =&gt;  __ +y       FacingDirection::RIGHT</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">// up key               =&gt;  +x -y       ______</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="comment">// left key             =&gt;  -x -y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">// b: left-down key     =&gt;  -x __       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="comment">// y: left-up key       =&gt;  __ -y       FacingDirection::LEFT</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// down key             =&gt;  -x +y       ______</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span>( new_d.x &gt;= 0 &amp;&amp; new_d.y &gt;= 0 ) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            you.<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keyword">auto</span> *mons = you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                mons-&gt;facing = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span>( new_d.y &lt;= 0 &amp;&amp; new_d.x &lt;= 0 ) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            you.<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keyword">auto</span> *mons = you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                mons-&gt;facing = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ae65a9a8c5e0591a5f9b530b68c704235">effect_amigara</a> ) ) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordtype">int</span> curdist = INT_MAX;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordtype">int</span> newdist = INT_MAX;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> minp = <a class="code" href="structtripoint.html">tripoint</a>( 0, 0, you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> maxp = <a class="code" href="structtripoint.html">tripoint</a>( <a class="code" href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a>, <a class="code" href="game__constants_8h.html#a2b6d307dfab13601267fc3c627192f4e">MAPSIZE_Y</a>, you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pt : m.<a class="code" href="classmap.html#afc1b449ad33a0170327a2bda5f27ade3">points_in_rectangle</a>( minp, maxp ) ) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pt ) == <a class="code" href="avatar__action_8cpp.html#a8da347319b7c8fa73adbbb4486b28287">ter_t_fault</a> ) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordtype">int</span> dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( pt, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">if</span>( dist &lt; curdist ) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    curdist = dist;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( pt, dest_loc );</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="keywordflow">if</span>( dist &lt; newdist ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    newdist = dist;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span>( newdist &gt; curdist ) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot pull yourself away from the faultlineâ€¦&quot;</span> ) );</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="avatar__action_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a>( <a class="code" href="debug_8h.html#ab658e6d84759440dbf3c890446075395a533c9fc77ae74024474dda586a77c97b">D_PEDANTIC_INFO</a> ) &lt;&lt; <span class="stringliteral">&quot;game:plmove: From (&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                           you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() &lt;&lt; <span class="stringliteral">&quot;) to (&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                           dest_loc.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; dest_loc.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;disable_robot( dest_loc ) ) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// Check if our movement is actually an attack on a monster or npc</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// Are we displacing a monster?</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">bool</span> attacking = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span>( creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( dest_loc ) ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        attacking = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">move_effects</a>( attacking ) ) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="comment">// move_effects determined we could not move, waste all moves</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        you.<a class="code" href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">set_moves</a>( 0 );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest_loc, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 &amp;&amp;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            !critter.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a> ) ) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Monster in the way.  Auto move canceled.&quot;</span> ) );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Move into the monster to attack.&quot;</span> ) );</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                you.<a class="code" href="classCharacter.html#a0ea61d6622ef255afac7216bebfb337e">clear_destination</a>();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">try_break_relax_gas</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your willpower asserts itself, and so do you!&quot;</span> ),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re too pacified to strike anythingâ€¦&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordtype">bool</span> safe_mode = ( get_option&lt;bool&gt;( <span class="stringliteral">&quot;SAFEMODE&quot;</span> ) ? <a class="code" href="game_8h.html#a4b260061c2ac92a343b4d4db2ee1a440a960df25564b123bd4b93baa00f04edb6">SAFE_MODE_ON</a> : <a class="code" href="game_8h.html#a4b260061c2ac92a343b4d4db2ee1a440a316e7fadf06b9f43cf396b36b50881ec">SAFE_MODE_OFF</a> );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span>( safe_mode ) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="comment">// If safe mode is enabled, only allow attacking neutral creatures when it is inactive</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( you ) == <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217a31ba17aa58cdb681423f07ca21a6efc7">Creature::Attitude::NEUTRAL</a> &amp;&amp;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;safe_mode != <a class="code" href="game_8h.html#a4b260061c2ac92a343b4d4db2ee1a440a316e7fadf06b9f43cf396b36b50881ec">SAFE_MODE_OFF</a> ) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    <span class="keyword">const</span> std::string msg_safe_mode = <a class="code" href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a>( <a class="code" href="action_8h.html#a14769f0512c139a614db195c6477c667aeb0d6ba41f031a319a51cd2973146629">ACTION_TOGGLE_SAFEMODE</a> );</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Not attacking the %1$s -- safe mode is on!  (%2$s to turn it off)&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                             msg_safe_mode );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="comment">// If safe mode is disabled, ask for confirmation before attacking a neutral creature</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( you ) == <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217a31ba17aa58cdb681423f07ca21a6efc7">Creature::Attitude::NEUTRAL</a> &amp;&amp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You may be attacked!  Proceed?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            you.<a class="code" href="classCharacter.html#a22c61a1b7ab6ae71a3cac5f92bca2fd5">melee_attack</a>( critter, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">is_hallucination</a>() ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                critter.<a class="code" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( &amp;you );</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_hit_mon( dest_loc, critter, critter.<a class="code" href="classmonster.html#af033816139df1dfa154c27b199b51da6">is_dead</a>() );</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#af8eb4198f7564379a407e89c13cdd1b7">mon_flag_IMMOBILE</a> ) || critter.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ||</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                   critter.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a> ) ) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t displace your %s.&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// Successful displacing is handled (much) later</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// If not a monster, maybe there&#39;s an NPC there</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> np_ = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classnpc.html">npc</a>&gt;( dest_loc ) ) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="classnpc.html">npc</a> &amp;np = *np_;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;NPC in the way, Auto move canceled.&quot;</span> ) );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Move into the NPC to interact or attack.&quot;</span> ) );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            you.<a class="code" href="classCharacter.html#a0ea61d6622ef255afac7216bebfb337e">clear_destination</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span>( !np.<a class="code" href="classnpc.html#a7ee1c9e434339418cb9b5907d8695806">is_enemy</a>() ) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;npc_menu( np );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        you.<a class="code" href="classCharacter.html#a22c61a1b7ab6ae71a3cac5f92bca2fd5">melee_attack</a>( np, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        np.<a class="code" href="classnpc.html#a07f70dcf0d3f4228a4d7eda138c5ff00">make_angry</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// GRAB: pre-action checking.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">int</span> dpart = -1;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp0 = m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *<span class="keyword">const</span> veh0 = <a class="code" href="vpart__position_8h.html#a8da46e924794d004c9899494ecd600c5">veh_pointer_or_null</a>( vp0 );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp1 = m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( dest_loc );</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *<span class="keyword">const</span> veh1 = <a class="code" href="vpart__position_8h.html#a8da46e924794d004c9899494ecd600c5">veh_pointer_or_null</a>( vp1 );</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">bool</span> veh_closed_door = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">bool</span> outside_vehicle = veh0 == <span class="keyword">nullptr</span> || veh0 != veh1;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span>( veh1 != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        dpart = veh1-&gt;<a class="code" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( vp1-&gt;part_index(), outside_vehicle );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        veh_closed_door = dpart &gt;= 0 &amp;&amp; !veh1-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( dpart ).<a class="code" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span>( veh0 != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( veh0-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &gt; 100 ) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span>( veh1 == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dive from moving vehicle?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;moving_vehicle_dismount( dest_loc );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( veh1 != veh0 ) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is another vehicle in the way.&quot;</span> ) );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !vp1.<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <span class="stringliteral">&quot;BOARDABLE&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That part of the vehicle is currently unsafe.&quot;</span> ) );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">bool</span> toSwimmable = m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a>, dest_loc ) &amp;&amp;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                       !m.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <span class="stringliteral">&quot;BRIDGE&quot;</span>, dest_loc );</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordtype">bool</span> toDeepWater = m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, dest_loc ) &amp;&amp;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                       !m.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <span class="stringliteral">&quot;BRIDGE&quot;</span>, dest_loc );</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordtype">bool</span> fromSwimmable = m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">bool</span> fromDeepWater = m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordtype">bool</span> fromBoat = veh0 != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordtype">bool</span> toBoat = veh1 != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a31ed0095166e5c2ac942a478235f9479">check_mount_will_move</a>( dest_loc ) ) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                you.<a class="code" href="classCharacter.html#a0ea61d6622ef255afac7216bebfb337e">clear_destination</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * 0.2 );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Dive into water!</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span>( toSwimmable &amp;&amp; toDeepWater &amp;&amp; !toBoat ) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">// Requires confirmation if we were on dry land previously</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span>( is_riding ) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keyword">auto</span> *mon = you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">if</span>( !mon-&gt;swims() || mon-&gt;get_size() &lt; you.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() + 2 ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s cannot swim while it is carrying you!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span>( ( fromSwimmable &amp;&amp; fromDeepWater &amp;&amp; !fromBoat ) ||</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <a class="code" href="avatar__action_8cpp.html#a2030505304f9693a0fcb83dff29ccfab">check_water_affect_items</a>( you ) ) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">if</span>( ( !fromDeepWater || fromBoat ) &amp;&amp; you.<a class="code" href="classCharacter.html#a48531fb6d06678b20e3b7a2c8164c206">swim_speed</a>() &lt; 500 ) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start swimming.&quot;</span> ) );</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s to dive underwater.&quot;</span> ),</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                         <a class="code" href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a>( <a class="code" href="action_8h.html#a14769f0512c139a614db195c6477c667a4418c96ae3ca9ed38c15d638db7b17b2">ACTION_MOVE_DOWN</a> ) );</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <a class="code" href="namespaceavatar__action.html#a9611563bffc4224b3e724db03688bdd4">avatar_action::swim</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), dest_loc );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;on_move_effects();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">//Wooden Fence Gate (or equivalently walkable doors):</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// open it if we are walking</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// vault over it if we are running</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    std::string door_name = m.<a class="code" href="classmap.html#ab38205e356b39b5961e0513d45e90170">obstacle_name</a>( dest_loc );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a2d734f291c46db96540c27b8fc8bd487">passable_ter_furn</a>( dest_loc )</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        &amp;&amp; you.<a class="code" href="classCharacter.html#aaa743c562ea4b49c7aebc3ebf1298de4">is_walking</a>()</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        &amp;&amp; !veh_closed_door</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        &amp;&amp; m.<a class="code" href="classmap.html#a9ac1c68c3941554a86bff27bf1ce2389">open_door</a>( you, dest_loc, !m.<a class="code" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the %s.&quot;</span> ), door_name );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// if auto move is on, continue moving next turn</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            you.<a class="code" href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">defer_move</a>( dest_loc );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;walk_move( dest_loc, via_ramp ) ) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;phasing_move( dest_loc ) ) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span>( veh_closed_door ) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span>( !veh1-&gt;<a class="code" href="classvehicle.html#ac17a2033f05b9d7ac92c3d119c4ac75a">handle_potential_theft</a>( you ) ) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            door_name = veh1-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( dpart ).<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>();</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">if</span>( outside_vehicle ) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                veh1-&gt;<a class="code" href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">open_all_at</a>( dpart );</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                veh1-&gt;<a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>( dpart );</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="comment">//~ %1$s - vehicle name, %2$s - part name</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the %1$s&#39;s %2$s.&quot;</span> ), veh1-&gt;<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, door_name );</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">// if auto move is on, continue moving next turn</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            you.<a class="code" href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">defer_move</a>( dest_loc );</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( dest_loc ) != <a class="code" href="avatar__action_8cpp.html#a14791ef1e5ea2b65a802423ab4a0a489">furn_f_safe_c</a> &amp;&amp;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        m.<a class="code" href="classmap.html#a9ac1c68c3941554a86bff27bf1ce2389">open_door</a>( you, dest_loc, !m.<a class="code" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">if</span>( veh1 != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="comment">//~ %1$s - vehicle name, %2$s - part name</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the %1$s&#39;s %2$s.&quot;</span> ), veh1-&gt;<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, door_name );</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the %s.&quot;</span> ), door_name );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// if auto move is on, continue moving next turn</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">is_auto_moving</a>() ) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            you.<a class="code" href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">defer_move</a>( dest_loc );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// Invalid move</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> waste_moves = you.<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() || you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a> );</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span>( waste_moves || dest_loc.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() ) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You bump into the %s!&quot;</span> ), m.<a class="code" href="classmap.html#ab38205e356b39b5961e0513d45e90170">obstacle_name</a>( dest_loc ) );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">// Only lose movement if we&#39;re blind</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span>( waste_moves ) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( dest_loc ) == <a class="code" href="avatar__action_8cpp.html#afa88418851172e5fceac5c6fdcb7e700">ter_t_door_bar_locked</a> ) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You rattle the bars but the door is locked!&quot;</span> ) );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">const</span> std::unordered_set&lt;ter_str_id&gt; locked_doors = { <a class="code" href="avatar__action_8cpp.html#afeff7584a74f2c31ea6bc0d0d01dce4b">ter_t_door_locked</a>, <a class="code" href="avatar__action_8cpp.html#a7507dfb4587eeb6e2dc99637d1904332">ter_t_door_locked_peep</a>, <a class="code" href="avatar__action_8cpp.html#a8d3145a96e70d64524aad9984e7da1af">ter_t_door_locked_alarm</a>, <a class="code" href="avatar__action_8cpp.html#ad0ae9d75b8a82211e0bdd9181c36b0f0">ter_t_door_locked_interior</a> };</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;               locked_doors.find( m.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( dest_loc ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) != locked_doors.end() ) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="comment">// Don&#39;t drain move points for learning something you could learn just by looking</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That door is locked!&quot;</span> ) );</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="ttc" id="aaction_8cpp_html_a91aa34292a1156bb83b17379bbf41933"><div class="ttname"><a href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a></div><div class="ttdeci">std::string press_x(action_id act)</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l00528">action.cpp:528</a></div></div>
<div class="ttc" id="aaction_8h_html_a14769f0512c139a614db195c6477c667a4418c96ae3ca9ed38c15d638db7b17b2"><div class="ttname"><a href="action_8h.html#a14769f0512c139a614db195c6477c667a4418c96ae3ca9ed38c15d638db7b17b2">ACTION_MOVE_DOWN</a></div><div class="ttdeci">@ ACTION_MOVE_DOWN</div><div class="ttdoc">Descend a staircase.</div><div class="ttdef"><b>Definition:</b> <a href="action_8h_source.html#l00058">action.h:58</a></div></div>
<div class="ttc" id="aaction_8h_html_a14769f0512c139a614db195c6477c667aeb0d6ba41f031a319a51cd2973146629"><div class="ttname"><a href="action_8h.html#a14769f0512c139a614db195c6477c667aeb0d6ba41f031a319a51cd2973146629">ACTION_TOGGLE_SAFEMODE</a></div><div class="ttdeci">@ ACTION_TOGGLE_SAFEMODE</div><div class="ttdoc">Turn safemode on/off, while leaving autosafemode intact.</div><div class="ttdef"><b>Definition:</b> <a href="action_8h_source.html#l00229">action.h:229</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a02a4844a7fb68c13a34dc40b0a9e94d8"><div class="ttname"><a href="avatar__action_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a></div><div class="ttdeci">static const efftype_id effect_pet(&quot;pet&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a14791ef1e5ea2b65a802423ab4a0a489"><div class="ttname"><a href="avatar__action_8cpp.html#a14791ef1e5ea2b65a802423ab4a0a489">furn_f_safe_c</a></div><div class="ttdeci">static const furn_str_id furn_f_safe_c(&quot;f_safe_c&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a2030505304f9693a0fcb83dff29ccfab"><div class="ttname"><a href="avatar__action_8cpp.html#a2030505304f9693a0fcb83dff29ccfab">check_water_affect_items</a></div><div class="ttdeci">static bool check_water_affect_items(avatar &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00103">avatar_action.cpp:103</a></div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a49bc164f30e64702250d2cbea09bf86c"><div class="ttname"><a href="avatar__action_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a></div><div class="ttdeci">#define dbg(x)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00101">avatar_action.cpp:101</a></div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a738d6878919b43681d80ad9c05dfb9ba"><div class="ttname"><a href="avatar__action_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a></div><div class="ttdeci">static const trait_id trait_SHELL3(&quot;SHELL3&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a7507dfb4587eeb6e2dc99637d1904332"><div class="ttname"><a href="avatar__action_8cpp.html#a7507dfb4587eeb6e2dc99637d1904332">ter_t_door_locked_peep</a></div><div class="ttdeci">static const ter_str_id ter_t_door_locked_peep(&quot;t_door_locked_peep&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a7697771dc47ecaeff36785ff20c9aa33"><div class="ttname"><a href="avatar__action_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a></div><div class="ttdeci">static const efftype_id effect_harnessed(&quot;harnessed&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a7c7651a289cc19a34456c213eeb46edc"><div class="ttname"><a href="avatar__action_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a></div><div class="ttdeci">static const efftype_id effect_ridden(&quot;ridden&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a84fc6ad1c820373b94fc50fe81d3b32a"><div class="ttname"><a href="avatar__action_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a></div><div class="ttdeci">static const move_mode_id move_mode_prone(&quot;prone&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a8d3145a96e70d64524aad9984e7da1af"><div class="ttname"><a href="avatar__action_8cpp.html#a8d3145a96e70d64524aad9984e7da1af">ter_t_door_locked_alarm</a></div><div class="ttdeci">static const ter_str_id ter_t_door_locked_alarm(&quot;t_door_locked_alarm&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a8da347319b7c8fa73adbbb4486b28287"><div class="ttname"><a href="avatar__action_8cpp.html#a8da347319b7c8fa73adbbb4486b28287">ter_t_fault</a></div><div class="ttdeci">static const ter_str_id ter_t_fault(&quot;t_fault&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a930a7d3aa631d14eb81c3f2fa9a6863e"><div class="ttname"><a href="avatar__action_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a></div><div class="ttdeci">static const trait_id trait_SHELL2(&quot;SHELL2&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ad0ae9d75b8a82211e0bdd9181c36b0f0"><div class="ttname"><a href="avatar__action_8cpp.html#ad0ae9d75b8a82211e0bdd9181c36b0f0">ter_t_door_locked_interior</a></div><div class="ttdeci">static const ter_str_id ter_t_door_locked_interior(&quot;t_door_locked_interior&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ad1df0ca2944a94c3ad796e8baada33ae"><div class="ttname"><a href="avatar__action_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a></div><div class="ttdeci">static const efftype_id effect_stunned(&quot;stunned&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ad4dff5f85ae2547eaf44f2f058f984d1"><div class="ttname"><a href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a></div><div class="ttdeci">static const efftype_id effect_incorporeal(&quot;incorporeal&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_adcaf70773541073a0d4cdfce4b857bf7"><div class="ttname"><a href="avatar__action_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a></div><div class="ttdeci">static const efftype_id effect_psi_stunned(&quot;psi_stunned&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ae65a9a8c5e0591a5f9b530b68c704235"><div class="ttname"><a href="avatar__action_8cpp.html#ae65a9a8c5e0591a5f9b530b68c704235">effect_amigara</a></div><div class="ttdeci">static const efftype_id effect_amigara(&quot;amigara&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_afa88418851172e5fceac5c6fdcb7e700"><div class="ttname"><a href="avatar__action_8cpp.html#afa88418851172e5fceac5c6fdcb7e700">ter_t_door_bar_locked</a></div><div class="ttdeci">static const ter_str_id ter_t_door_bar_locked(&quot;t_door_bar_locked&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_afeff7584a74f2c31ea6bc0d0d01dce4b"><div class="ttname"><a href="avatar__action_8cpp.html#afeff7584a74f2c31ea6bc0d0d01dce4b">ter_t_door_locked</a></div><div class="ttdeci">static const ter_str_id ter_t_door_locked(&quot;t_door_locked&quot;)</div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0e6803120e93851046bf12640c35ada2"><div class="ttname"><a href="classCharacter.html#a0e6803120e93851046bf12640c35ada2">Character::current_movement_mode</a></div><div class="ttdeci">move_mode_id current_movement_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02159">character.cpp:2159</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0ea61d6622ef255afac7216bebfb337e"><div class="ttname"><a href="classCharacter.html#a0ea61d6622ef255afac7216bebfb337e">Character::clear_destination</a></div><div class="ttdeci">void clear_destination()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11444">character.cpp:11444</a></div></div>
<div class="ttc" id="aclassCharacter_html_a18f0d5c53ba7c8c945c2304bc0dadea8"><div class="ttname"><a href="classCharacter.html#a18f0d5c53ba7c8c945c2304bc0dadea8">Character::enough_working_legs</a></div><div class="ttdeci">bool enough_working_legs() const</div><div class="ttdoc">Returns true if enough of your legs are working Currently requires all, new morphologies could be dif...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02116">character.cpp:2116</a></div></div>
<div class="ttc" id="aclassCharacter_html_a22c61a1b7ab6ae71a3cac5f92bca2fd5"><div class="ttname"><a href="classCharacter.html#a22c61a1b7ab6ae71a3cac5f92bca2fd5">Character::melee_attack</a></div><div class="ttdeci">bool melee_attack(Creature &amp;t, bool allow_special, const matec_id &amp;force_technique, bool allow_unarmed=true, int forced_movecost=-1)</div><div class="ttdoc">Sets up a melee attack and handles melee attack function calls.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00563">melee.cpp:563</a></div></div>
<div class="ttc" id="aclassCharacter_html_a31ed0095166e5c2ac942a478235f9479"><div class="ttname"><a href="classCharacter.html#a31ed0095166e5c2ac942a478235f9479">Character::check_mount_will_move</a></div><div class="ttdeci">bool check_mount_will_move(const tripoint &amp;dest_loc)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01649">character.cpp:1649</a></div></div>
<div class="ttc" id="aclassCharacter_html_a37772343c5d5a20510bafe1890a5a839"><div class="ttname"><a href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">Character::move_effects</a></div><div class="ttdeci">bool move_effects(bool attacking) override</div><div class="ttdoc">Processes effects which may prevent the Character from moving (bear traps, crushed,...</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00373">character_escape.cpp:373</a></div></div>
<div class="ttc" id="aclassCharacter_html_a48531fb6d06678b20e3b7a2c8164c206"><div class="ttname"><a href="classCharacter.html#a48531fb6d06678b20e3b7a2c8164c206">Character::swim_speed</a></div><div class="ttdeci">int swim_speed() const</div><div class="ttdoc">Returns the player's movecost for swimming across water tiles.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01416">character.cpp:1416</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4a9671b1264d53cb74469e78000e2544"><div class="ttname"><a href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">Character::is_blind</a></div><div class="ttdeci">bool is_blind() const</div><div class="ttdoc">Returns true if the player isn't able to see.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05996">character.cpp:5996</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01732">character.cpp:1732</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6ab1a86cb826d5faa1244cb7a4674700"><div class="ttname"><a href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">Character::get_size</a></div><div class="ttdeci">creature_size get_size() const override</div><div class="ttdoc">Get size class of character.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00824">character.cpp:824</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7a2fed39e9b4cd0405f0e1b46f092416"><div class="ttname"><a href="classCharacter.html#a7a2fed39e9b4cd0405f0e1b46f092416">Character::is_auto_moving</a></div><div class="ttdeci">bool is_auto_moving() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11458">character.cpp:11458</a></div></div>
<div class="ttc" id="aclassCharacter_html_a892fcaf412fdcea4c7e2ee1340de7d6a"><div class="ttname"><a href="classCharacter.html#a892fcaf412fdcea4c7e2ee1340de7d6a">Character::defer_move</a></div><div class="ttdeci">bool defer_move(const tripoint &amp;next)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11563">character.cpp:11563</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaa743c562ea4b49c7aebc3ebf1298de4"><div class="ttname"><a href="classCharacter.html#aaa743c562ea4b49c7aebc3ebf1298de4">Character::is_walking</a></div><div class="ttdeci">bool is_walking() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02174">character.cpp:2174</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac3d46549b7cdaac1f98991167ad5f1b3"><div class="ttname"><a href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">Character::mounted_creature</a></div><div class="ttdeci">shared_ptr_fast&lt; monster &gt; mounted_creature</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02800">character.h:2800</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac6f590f28f979103633d198e32524c06"><div class="ttname"><a href="classCharacter.html#ac6f590f28f979103633d198e32524c06">Character::is_prone</a></div><div class="ttdeci">bool is_prone() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02184">character.cpp:2184</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassCharacter_html_aedc66fc50d352420cae7791b4a0f57f7"><div class="ttname"><a href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">Character::get_speed</a></div><div class="ttdeci">int get_speed() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04192">character.cpp:4192</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCharacter_html_af987a23fb823861daf5d77051e3dc60f"><div class="ttname"><a href="classCharacter.html#af987a23fb823861daf5d77051e3dc60f">Character::set_activity_level</a></div><div class="ttdeci">void set_activity_level(float new_level)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06547">character.cpp:6547</a></div></div>
<div class="ttc" id="aclassCreature_html_a21b8fbeb525a28615eec6a6c22beff44"><div class="ttname"><a href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">Creature::facing</a></div><div class="ttdeci">FacingDirection facing</div><div class="ttdoc">return the direction the creature is facing, for sdl horizontal flip</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00303">creature.h:303</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00292">creature.cpp:292</a></div></div>
<div class="ttc" id="aclassCreature_html_a88c28bc08aa3e0d6fa1b187cee97d1c4"><div class="ttname"><a href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">Creature::posz</a></div><div class="ttdeci">int posz() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00317">creature.h:317</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217a31ba17aa58cdb681423f07ca21a6efc7"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217a31ba17aa58cdb681423f07ca21a6efc7">Creature::Attitude::NEUTRAL</a></div><div class="ttdeci">@ NEUTRAL</div></div>
<div class="ttc" id="aclassCreature_html_a9f0365208b65ab1c45d23f03f402f491"><div class="ttname"><a href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">Creature::posy</a></div><div class="ttdeci">int posy() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00314">creature.h:314</a></div></div>
<div class="ttc" id="aclassCreature_html_aecea7d852ffba499ec12350c95340b9d"><div class="ttname"><a href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">Creature::posx</a></div><div class="ttdeci">int posx() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00311">creature.h:311</a></div></div>
<div class="ttc" id="aclassCreature_html_af826bfbdc9d7f81a8b9e53775f43d080"><div class="ttname"><a href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">Creature::set_moves</a></div><div class="ttdeci">void set_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02012">creature.cpp:2012</a></div></div>
<div class="ttc" id="aclassavatar_html_a228378b8c4d8dcc9965caa6b0669d3b3"><div class="ttname"><a href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">avatar::set_movement_mode</a></div><div class="ttdeci">void set_movement_mode(const move_mode_id &amp;mode) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01307">avatar.cpp:1307</a></div></div>
<div class="ttc" id="aclassavatar_html_a547d7adf1e902528ceced42259eab48d"><div class="ttname"><a href="classavatar.html#a547d7adf1e902528ceced42259eab48d">avatar::invoke_item</a></div><div class="ttdeci">bool invoke_item(item *, const tripoint &amp;pt, int pre_obtain_moves) override</div><div class="ttdoc">Asks how to use the item (if it has more than one use_method) and uses it.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01482">avatar.cpp:1482</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassmap_html_a09ef3e8c2e6664e3ed98d1e1e18a4b4f"><div class="ttname"><a href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">map::has_flag_furn</a></div><div class="ttdeci">bool has_flag_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03112">map.cpp:3112</a></div></div>
<div class="ttc" id="aclassmap_html_a2d734f291c46db96540c27b8fc8bd487"><div class="ttname"><a href="classmap.html#a2d734f291c46db96540c27b8fc8bd487">map::passable_ter_furn</a></div><div class="ttdeci">bool passable_ter_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02514">map.cpp:2514</a></div></div>
<div class="ttc" id="aclassmap_html_a3bc75c8b706a54c1575b4460b2f363b1"><div class="ttname"><a href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">map::is_outside</a></div><div class="ttdeci">bool is_outside(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03395">map.cpp:3395</a></div></div>
<div class="ttc" id="aclassmap_html_a9ac1c68c3941554a86bff27bf1ce2389"><div class="ttname"><a href="classmap.html#a9ac1c68c3941554a86bff27bf1ce2389">map::open_door</a></div><div class="ttdeci">bool open_door(Creature const &amp;u, const tripoint &amp;p, bool inside, bool check_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04689">map.cpp:4689</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_ab38205e356b39b5961e0513d45e90170"><div class="ttname"><a href="classmap.html#ab38205e356b39b5961e0513d45e90170">map::obstacle_name</a></div><div class="ttdeci">std::string obstacle_name(const tripoint &amp;p)</div><div class="ttdoc">Returns the name of the obstacle at p that might be blocking movement/projectiles/etc.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01699">map.cpp:1699</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassmap_html_afc1b449ad33a0170327a2bda5f27ade3"><div class="ttname"><a href="classmap.html#afc1b449ad33a0170327a2bda5f27ade3">map::points_in_rectangle</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_rectangle(const tripoint &amp;from, const tripoint &amp;to) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10099">map.cpp:10099</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a125622587c2069dc4dbbe07943c81336"><div class="ttname"><a href="classmonster.html#a125622587c2069dc4dbbe07943c81336">monster::attitude_to</a></div><div class="ttdeci">Attitude attitude_to(const Creature &amp;other) const override</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01450">monster.cpp:1450</a></div></div>
<div class="ttc" id="aclassmonster_html_a43202b3e829143741862e0f5f1e826a7"><div class="ttname"><a href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">monster::has_flag</a></div><div class="ttdeci">bool has_flag(const mon_flag_id &amp;f) const final</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01202">monster.cpp:1202</a></div></div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00539">monster.h:539</a></div></div>
<div class="ttc" id="aclassmonster_html_a70c250ac59c7d91b374dfa5d7b8da66c"><div class="ttname"><a href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">monster::is_hallucination</a></div><div class="ttdeci">bool is_hallucination() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03460">monster.cpp:3460</a></div></div>
<div class="ttc" id="aclassmonster_html_a7cb9d9786d11c2c0926d3482d3f51ffe"><div class="ttname"><a href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">monster::name</a></div><div class="ttdeci">std::string name(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00722">monster.cpp:722</a></div></div>
<div class="ttc" id="aclassmonster_html_a82ae41773b05af94d4b678cb33bfb329"><div class="ttname"><a href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">monster::die</a></div><div class="ttdeci">void die(Creature *killer) override</div><div class="ttdoc">Empty function.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02742">monster.cpp:2742</a></div></div>
<div class="ttc" id="aclassmonster_html_af033816139df1dfa154c27b199b51da6"><div class="ttname"><a href="classmonster.html#af033816139df1dfa154c27b199b51da6">monster::is_dead</a></div><div class="ttdeci">bool is_dead() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03580">monster.cpp:3580</a></div></div>
<div class="ttc" id="aclassmove__mode_html_a312bb9774fe9c426d0e3e82221080bbd"><div class="ttname"><a href="classmove__mode.html#a312bb9774fe9c426d0e3e82221080bbd">move_mode::exertion_level</a></div><div class="ttdeci">float exertion_level() const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00174">move_mode.cpp:174</a></div></div>
<div class="ttc" id="aclassnpc_html_a07f70dcf0d3f4228a4d7eda138c5ff00"><div class="ttname"><a href="classnpc.html#a07f70dcf0d3f4228a4d7eda138c5ff00">npc::make_angry</a></div><div class="ttdeci">void make_angry()</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l01626">npc.cpp:1626</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_a4c78451e42e97753079ecd2a54c7143d"><div class="ttname"><a href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">optional_vpart_position::part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02698">vehicle.cpp:2698</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a16b29a171a5a4add5b6a759e049cbcf0"><div class="ttname"><a href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">vehicle::open_all_at</a></div><div class="ttdeci">void open_all_at(int p)</div><div class="ttdoc">Opens everything that can be opened on the same tile as p</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01289">vehicle_use.cpp:1289</a></div></div>
<div class="ttc" id="aclassvehicle_html_a441fa41f264fb7bc45df81d71244a0d1"><div class="ttname"><a href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">vehicle::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02201">vehicle.h:2201</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02276">vehicle.h:2276</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9d96053cfef6f4cb5db1b7c74c6da067"><div class="ttname"><a href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">vehicle::open</a></div><div class="ttdeci">void open(int part_index)</div><div class="ttdoc">Opens an openable part at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01195">vehicle_use.cpp:1195</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa3c434ad827415575b465480af310487"><div class="ttname"><a href="classvehicle.html#aa3c434ad827415575b465480af310487">vehicle::next_part_to_open</a></div><div class="ttdeci">int next_part_to_open(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to open at p's location.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02946">vehicle.cpp:2946</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac17a2033f05b9d7ac92c3d119c4ac75a"><div class="ttname"><a href="classvehicle.html#ac17a2033f05b9d7ac92c3d119c4ac75a">vehicle::handle_potential_theft</a></div><div class="ttdeci">bool handle_potential_theft(Character const &amp;you, bool check_only=false, bool prompt=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04686">vehicle.cpp:4686</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdb2ebf673a32f657ac9e29b842ee7f5"><div class="ttname"><a href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">vehicle::part</a></div><div class="ttdeci">vehicle_part &amp; part(int part_num)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08098">vehicle.cpp:8098</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature_8h_html_ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403"><div class="ttname"><a href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a></div><div class="ttdeci">@ RIGHT</div></div>
<div class="ttc" id="acreature_8h_html_ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758"><div class="ttname"><a href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a></div><div class="ttdeci">@ LEFT</div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="adebug_8h_html_ab658e6d84759440dbf3c890446075395a533c9fc77ae74024474dda586a77c97b"><div class="ttname"><a href="debug_8h.html#ab658e6d84759440dbf3c890446075395a533c9fc77ae74024474dda586a77c97b">D_PEDANTIC_INFO</a></div><div class="ttdeci">@ D_PEDANTIC_INFO</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00143">debug.h:143</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a2962f99cba158d0546ae7fc76f858e6e"><div class="ttname"><a href="flag_8cpp.html#a2962f99cba158d0546ae7fc76f858e6e">flag_DIG_TOOL</a></div><div class="ttdeci">const flag_id flag_DIG_TOOL(&quot;DIG_TOOL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3469d48ab1bb51e1b5aef87237e50131"><div class="ttname"><a href="flag_8cpp.html#a3469d48ab1bb51e1b5aef87237e50131">flag_CRUTCHES</a></div><div class="ttdeci">const flag_id flag_CRUTCHES(&quot;CRUTCHES&quot;)</div></div>
<div class="ttc" id="agame_8h_html_a4b260061c2ac92a343b4d4db2ee1a440a316e7fadf06b9f43cf396b36b50881ec"><div class="ttname"><a href="game_8h.html#a4b260061c2ac92a343b4d4db2ee1a440a316e7fadf06b9f43cf396b36b50881ec">SAFE_MODE_OFF</a></div><div class="ttdeci">@ SAFE_MODE_OFF</div><div class="ttdef"><b>Definition:</b> <a href="game_8h_source.html#l00062">game.h:62</a></div></div>
<div class="ttc" id="agame_8h_html_a4b260061c2ac92a343b4d4db2ee1a440a960df25564b123bd4b93baa00f04edb6"><div class="ttname"><a href="game_8h.html#a4b260061c2ac92a343b4d4db2ee1a440a960df25564b123bd4b93baa00f04edb6">SAFE_MODE_ON</a></div><div class="ttdeci">@ SAFE_MODE_ON</div><div class="ttdef"><b>Definition:</b> <a href="game_8h_source.html#l00063">game.h:63</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2b6d307dfab13601267fc3c627192f4e"><div class="ttname"><a href="game__constants_8h.html#a2b6d307dfab13601267fc3c627192f4e">MAPSIZE_Y</a></div><div class="ttdeci">constexpr int MAPSIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00046">game_constants.h:46</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2f229f6ae9b3affb78ec8139ccdbf18e"><div class="ttname"><a href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a></div><div class="ttdeci">constexpr int MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00045">game_constants.h:45</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a></div><div class="ttdeci">@ TFLAG_SWIMMABLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a26a026d844907da147f1350754b5210b"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a26a026d844907da147f1350754b5210b">ter_furn_flag::TFLAG_RAMP_DOWN</a></div><div class="ttdeci">@ TFLAG_RAMP_DOWN</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a4099f16f8e2c4ea80e996db0ea6f4c02"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a4099f16f8e2c4ea80e996db0ea6f4c02">ter_furn_flag::TFLAG_RAMP_UP</a></div><div class="ttdeci">@ TFLAG_RAMP_UP</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054aabab3b637991c0de65423ad723d6b291"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aabab3b637991c0de65423ad723d6b291">ter_furn_flag::TFLAG_MINEABLE</a></div><div class="ttdeci">@ TFLAG_MINEABLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div></div>
<div class="ttc" id="amtype_8cpp_html_af8eb4198f7564379a407e89c13cdd1b7"><div class="ttname"><a href="mtype_8cpp.html#af8eb4198f7564379a407e89c13cdd1b7">mon_flag_IMMOBILE</a></div><div class="ttdeci">mon_flag_id mon_flag_IMMOBILE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00101">mtype.cpp:101</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a9611563bffc4224b3e724db03688bdd4"><div class="ttname"><a href="namespaceavatar__action.html#a9611563bffc4224b3e724db03688bdd4">avatar_action::swim</a></div><div class="ttdeci">void swim(map &amp;m, avatar &amp;you, const tripoint &amp;p)</div><div class="ttdoc">Handles swimming by the player.</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00618">avatar_action.cpp:618</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a64d5e02f16b53cac227a304ee961ff41"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a64d5e02f16b53cac227a304ee961ff41">enchant_vals::mod::MOVEMENT_EXERTION_MODIFIER</a></div><div class="ttdeci">@ MOVEMENT_EXERTION_MODIFIER</div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="astructitype_html_afc46b586361661f16219f0a465b71c1d"><div class="ttname"><a href="structitype.html#afc46b586361661f16219f0a465b71c1d">itype::can_use</a></div><div class="ttdeci">bool can_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00174">itype.cpp:174</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1c555386664b5d61de6bac27572c5c4f"><div class="ttname"><a href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">vehicle_part::name</a></div><div class="ttdeci">std::string name(bool with_prefix=true) const</div><div class="ttdoc">Translated name of a part inclusive of any current status effects with_prefix as true indicates the d...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00113">vehicle_part.cpp:113</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4b540ba2ddca7ce064674398be48ae68"><div class="ttname"><a href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">vehicle_part::open</a></div><div class="ttdeci">bool open</div><div class="ttdoc">door is open</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00513">vehicle.h:513</a></div></div>
<div class="ttc" id="avpart__position_8h_html_a8da46e924794d004c9899494ecd600c5"><div class="ttname"><a href="vpart__position_8h.html#a8da46e924794d004c9899494ecd600c5">veh_pointer_or_null</a></div><div class="ttdeci">vehicle * veh_pointer_or_null(const optional_vpart_position &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00185">vpart_position.h:185</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="action_8h_source.html#l00058">ACTION_MOVE_DOWN</a>, <a class="el" href="action_8h_source.html#l00229">ACTION_TOGGLE_SAFEMODE</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="monster_8cpp_source.html#l01450">monster::attitude_to()</a>, <a class="el" href="itype_8cpp_source.html#l00174">itype::can_use()</a>, <a class="el" href="character_8cpp_source.html#l01649">Character::check_mount_will_move()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00103">check_water_affect_items()</a>, <a class="el" href="character_8cpp_source.html#l11444">Character::clear_destination()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="character_8cpp_source.html#l02159">Character::current_movement_mode()</a>, <a class="el" href="debug_8h_source.html#l00143">D_PEDANTIC_INFO</a>, <a class="el" href="avatar__action_8cpp_source.html#l00101">dbg</a>, <a class="el" href="character_8cpp_source.html#l11563">Character::defer_move()</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="avatar__action_8cpp.html#ae65a9a8c5e0591a5f9b530b68c704235">effect_amigara</a>, <a class="el" href="avatar__action_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a>, <a class="el" href="avatar__action_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, <a class="el" href="avatar__action_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a>, <a class="el" href="avatar__action_8cpp.html#a7c7651a289cc19a34456c213eeb46edc">effect_ridden</a>, <a class="el" href="avatar__action_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="el" href="character_8h_source.html#l04105">Character::enchantment_cache</a>, <a class="el" href="character_8cpp_source.html#l02116">Character::enough_working_legs()</a>, <a class="el" href="move__mode_8cpp_source.html#l00174">move_mode::exertion_level()</a>, <a class="el" href="creature_8h_source.html#l00303">Creature::facing</a>, <a class="el" href="flag_8cpp.html#a3469d48ab1bb51e1b5aef87237e50131">flag_CRUTCHES</a>, <a class="el" href="flag_8cpp.html#a2962f99cba158d0546ae7fc76f858e6e">flag_DIG_TOOL</a>, <a class="el" href="monster_8h_source.html#l00539">monster::friendly</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="avatar__action_8cpp.html#a14791ef1e5ea2b65a802423ab4a0a489">furn_f_safe_c</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l00824">Character::get_size()</a>, <a class="el" href="character_8cpp_source.html#l04192">Character::get_speed()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l04686">vehicle::handle_potential_theft()</a>, <a class="el" href="mutation_8cpp_source.html#l00613">Character::has_active_mutation()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="monster_8cpp_source.html#l01202">monster::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="avatar_8cpp_source.html#l01482">avatar::invoke_item()</a>, <a class="el" href="character_8cpp_source.html#l11458">Character::is_auto_moving()</a>, <a class="el" href="character_8cpp_source.html#l05996">Character::is_blind()</a>, <a class="el" href="monster_8cpp_source.html#l03580">monster::is_dead()</a>, <a class="el" href="npc_8cpp_source.html#l02352">npc::is_enemy()</a>, <a class="el" href="monster_8cpp_source.html#l03460">monster::is_hallucination()</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="map_8cpp_source.html#l03395">map::is_outside()</a>, <a class="el" href="character_8cpp_source.html#l02184">Character::is_prone()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="character_8cpp_source.html#l02174">Character::is_walking()</a>, <a class="el" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">LEFT</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="npc_8cpp_source.html#l01626">npc::make_angry()</a>, <a class="el" href="game__constants_8h_source.html#l00045">MAPSIZE_X</a>, <a class="el" href="game__constants_8h_source.html#l00046">MAPSIZE_Y</a>, <a class="el" href="melee_8cpp_source.html#l00563">Character::melee_attack()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mtype_8cpp_source.html#l00101">mon_flag_IMMOBILE</a>, <a class="el" href="character_8h_source.html#l02800">Character::mounted_creature</a>, <a class="el" href="character__escape_8cpp_source.html#l00373">Character::move_effects()</a>, <a class="el" href="avatar__action_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a>, <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a64d5e02f16b53cac227a304ee961ff41">enchant_vals::MOVEMENT_EXERTION_MODIFIER</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00113">vehicle_part::name()</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="vehicle_8h_source.html#l02201">vehicle::name</a>, <a class="el" href="classCreature.html#a8a475630b3289c468bd06cf114008217a31ba17aa58cdb681423f07ca21a6efc7">Creature::NEUTRAL</a>, <a class="el" href="vehicle_8cpp_source.html#l02946">vehicle::next_part_to_open()</a>, <a class="el" href="map_8cpp_source.html#l01699">map::obstacle_name()</a>, <a class="el" href="vehicle_8h_source.html#l00513">vehicle_part::open</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01195">vehicle::open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01289">vehicle::open_all_at()</a>, <a class="el" href="map_8cpp_source.html#l04689">map::open_door()</a>, <a class="el" href="vehicle_8cpp_source.html#l08098">vehicle::part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02698">optional_vpart_position::part_with_feature()</a>, <a class="el" href="map_8cpp_source.html#l02514">map::passable_ter_furn()</a>, <a class="el" href="map_8cpp_source.html#l10099">map::points_in_rectangle()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="creature_8h_source.html#l00317">Creature::posz()</a>, <a class="el" href="action_8cpp_source.html#l00528">press_x()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">RIGHT</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="game_8h_source.html#l00062">SAFE_MODE_OFF</a>, <a class="el" href="game_8h_source.html#l00063">SAFE_MODE_ON</a>, <a class="el" href="character_8cpp_source.html#l06547">Character::set_activity_level()</a>, <a class="el" href="avatar_8cpp_source.html#l01307">avatar::set_movement_mode()</a>, <a class="el" href="creature_8cpp_source.html#l02012">Creature::set_moves()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00618">swim()</a>, <a class="el" href="character_8cpp_source.html#l01416">Character::swim_speed()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="avatar__action_8cpp.html#afa88418851172e5fceac5c6fdcb7e700">ter_t_door_bar_locked</a>, <a class="el" href="avatar__action_8cpp.html#afeff7584a74f2c31ea6bc0d0d01dce4b">ter_t_door_locked</a>, <a class="el" href="avatar__action_8cpp.html#a8d3145a96e70d64524aad9984e7da1af">ter_t_door_locked_alarm</a>, <a class="el" href="avatar__action_8cpp.html#ad0ae9d75b8a82211e0bdd9181c36b0f0">ter_t_door_locked_interior</a>, <a class="el" href="avatar__action_8cpp.html#a7507dfb4587eeb6e2dc99637d1904332">ter_t_door_locked_peep</a>, <a class="el" href="avatar__action_8cpp.html#a8da347319b7c8fa73adbbb4486b28287">ter_t_fault</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">TFLAG_DEEP_WATER</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aabab3b637991c0de65423ad723d6b291">TFLAG_MINEABLE</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a26a026d844907da147f1350754b5210b">TFLAG_RAMP_DOWN</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a4099f16f8e2c4ea80e996db0ea6f4c02">TFLAG_RAMP_UP</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">TFLAG_SWIMMABLE</a>, <a class="el" href="avatar__action_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a>, <a class="el" href="avatar__action_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a>, <a class="el" href="avatar_8cpp_source.html#l00887">avatar::try_break_relax_gas()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, <a class="el" href="vpart__position_8h_source.html#l00185">veh_pointer_or_null()</a>, <a class="el" href="vehicle_8h_source.html#l02276">vehicle::velocity</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00024">point::y</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, <a class="el" href="avatar__action_8h_source.html#l00036">move()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l00563">ramp_move()</a>.</p>

</div>
</div>
<a id="a2ff3ea3901fd1f5e85513178133c03f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff3ea3901fd1f5e85513178133c03f5">&#9670;&nbsp;</a></span>plthrow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::plthrow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a>&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>blind_throw_from_pos</em> = <code>std::nullopt</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00982">982</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;{</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordtype">bool</span> in_shell = you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> ) ||</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar__action_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a> );</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t effectively throw while you&#39;re in your shell.&quot;</span> ) );</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lack the substance to affect anything.&quot;</span> ) );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="classmonster.html">monster</a> *mons = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span>( mons-&gt;<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a1ce59be15eeebc2aa195dc5a5cf38358">mon_flag_RIDEABLE_MECH</a> ) ) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordflow">if</span>( !mons-&gt;<a class="code" href="classmonster.html#a36642aa60e233616102cb9a4e37db955">check_mech_powered</a>() ) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s refuses to move as its batteries have been drained.&quot;</span> ),</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                         mons-&gt;<a class="code" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>() );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        loc = <a class="code" href="namespacegame__menus_1_1inv.html#a3438177d11d4b59f12bb273d10d42f98">game_menus::inv::titled_menu</a>( you,  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Throw item&quot;</span> ),</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any items to throw.&quot;</span> ) );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = you.<a class="code" href="classCharacter.html#a28e314b50dae2c237a0675ed748aaf1d">can_wield</a>( *loc );</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.success() ) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.c_str() );</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// make a copy and get the original.</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// the copy is thrown and has its and the originals charges set appropriately</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// or deleted from inventory if its charges(1) or not stackable.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="classitem.html">item</a> *orig = loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="classitem.html">item</a> thrown = *orig;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordtype">int</span> range = you.<a class="code" href="classCharacter.html#a455c06bf0dab6e3558f759fe43e27e98">throw_range</a>( thrown );</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">if</span>( range &lt; 0 ) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item.&quot;</span> ) );</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( range == 0 ) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That is too heavy to throw.&quot;</span> ) );</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">is_wielding</a>( *orig ) &amp;&amp; orig-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a> ) ) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="comment">// pos == -1 is the weapon, NO_UNWIELD is used for bio_claws_weapon</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That&#39;s part of your body, you can&#39;t throw that!&quot;</span> ) );</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">try_break_relax_gas</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You concentrate mightily, and your body obeys!&quot;</span> ),</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t muster up the effort to throw anythingâ€¦&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">// if you&#39;re wearing the item you need to be able to take it off</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *orig ) ) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = you.<a class="code" href="classCharacter.html#a2e54afb078299e93a070e29c30692814">can_takeoff</a>( *orig );</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.success() ) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.c_str() );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">// you must wield the item to throw it</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">is_wielding</a>( *orig ) ) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">wield</a>( *orig ) ) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// Shift our position to our &quot;peeking&quot; position, so that the UI</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">// for picking a throw point lets us target the location we couldn&#39;t</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">// otherwise see.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> original_player_position = you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span>( blind_throw_from_pos ) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( *blind_throw_from_pos );</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;temp_exit_fullscreen();</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> weapon = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a> = <a class="code" href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">target_handler::mode_throw</a>( you, *weapon,</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                            blind_throw_from_pos.has_value() );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// If we previously shifted our position, put ourselves back now that we&#39;ve picked our target.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span>( blind_throw_from_pos ) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( original_player_position );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.empty() ) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span>( weapon-&gt;<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() &amp;&amp; weapon-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 1 ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        weapon-&gt;<a class="code" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">mod_charges</a>( -1 );</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        thrown.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        you.<a class="code" href="classCharacter.html#a6a3141afedc8744a698f5f2a498b9b12">remove_weapon</a>();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    you.<a class="code" href="classCharacter.html#acfb04a0e86c82c14248f911ebcb23f90">throw_item</a>( <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.back(), thrown, blind_throw_from_pos );</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reenter_fullscreen();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a28e314b50dae2c237a0675ed748aaf1d"><div class="ttname"><a href="classCharacter.html#a28e314b50dae2c237a0675ed748aaf1d">Character::can_wield</a></div><div class="ttdeci">ret_val&lt; void &gt; can_wield(const item &amp;it) const</div><div class="ttdoc">Check player capable of wielding an item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07836">character.cpp:7836</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e54afb078299e93a070e29c30692814"><div class="ttname"><a href="classCharacter.html#a2e54afb078299e93a070e29c30692814">Character::can_takeoff</a></div><div class="ttdeci">ret_val&lt; void &gt; can_takeoff(const item &amp;it, const std::list&lt; item &gt; *res=nullptr)</div><div class="ttdoc">Check player capable of taking off an item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00486">character_attire.cpp:486</a></div></div>
<div class="ttc" id="aclassCharacter_html_a455c06bf0dab6e3558f759fe43e27e98"><div class="ttname"><a href="classCharacter.html#a455c06bf0dab6e3558f759fe43e27e98">Character::throw_range</a></div><div class="ttdeci">int throw_range(const item &amp;) const</div><div class="ttdoc">Maximum thrown range with a given item, taking all active effects into account.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05937">character.cpp:5937</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4d8d747c469431f530acb05c5f7a7f45"><div class="ttname"><a href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">Character::is_worn</a></div><div class="ttdeci">bool is_worn(const item &amp;thing) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01911">character.h:1911</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6a3141afedc8744a698f5f2a498b9b12"><div class="ttname"><a href="classCharacter.html#a6a3141afedc8744a698f5f2a498b9b12">Character::remove_weapon</a></div><div class="ttdeci">item remove_weapon()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03054">character.cpp:3054</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81864eee5b75943bd4222b696117a52a"><div class="ttname"><a href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">Character::is_wielding</a></div><div class="ttdeci">bool is_wielding(const item &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03319">character.cpp:3319</a></div></div>
<div class="ttc" id="aclassCharacter_html_acfb04a0e86c82c14248f911ebcb23f90"><div class="ttname"><a href="classCharacter.html#acfb04a0e86c82c14248f911ebcb23f90">Character::throw_item</a></div><div class="ttdeci">dealt_projectile_attack throw_item(const tripoint &amp;target, const item &amp;to_throw, const std::optional&lt; tripoint &gt; &amp;blind_throw_from_pos=std::nullopt)</div><div class="ttdoc">Execute a throw.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01308">ranged.cpp:1308</a></div></div>
<div class="ttc" id="aclassCreature_html_ac16dcdb688f6f47c594c98c83528a670"><div class="ttname"><a href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">Creature::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00188">creature.cpp:188</a></div></div>
<div class="ttc" id="aclassavatar_html_a1ad59a984ed559e64375bea3766105db"><div class="ttname"><a href="classavatar.html#a1ad59a984ed559e64375bea3766105db">avatar::wield</a></div><div class="ttdeci">bool wield(item_location target)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01385">avatar.cpp:1385</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a473448af85ae4182f130bd488bf7c0fb"><div class="ttname"><a href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">item::mod_charges</a></div><div class="ttdeci">void mod_charges(int mod)</div><div class="ttdoc">Modify the charges of this item, only use for items counted by charges! The item must have enough cha...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14183">item.cpp:14183</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassmonster_html_a36642aa60e233616102cb9a4e37db955"><div class="ttname"><a href="classmonster.html#a36642aa60e233616102cb9a4e37db955">monster::check_mech_powered</a></div><div class="ttdeci">bool check_mech_powered() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02975">monster.cpp:2975</a></div></div>
<div class="ttc" id="aclassmonster_html_ad4fba0b9aea36097d8b972e05e66d914"><div class="ttname"><a href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">monster::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00717">monster.cpp:717</a></div></div>
<div class="ttc" id="aclassret__val_3_01void_01_4_html"><div class="ttname"><a href="classret__val_3_01void_01_4.html">ret_val&lt; void &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00103">ret_val.h:104</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a936d1c7b90d01c5d07e69d0628c81235"><div class="ttname"><a href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a></div><div class="ttdeci">const flag_id flag_NO_UNWIELD(&quot;NO_UNWIELD&quot;)</div></div>
<div class="ttc" id="amtype_8cpp_html_a1ce59be15eeebc2aa195dc5a5cf38358"><div class="ttname"><a href="mtype_8cpp.html#a1ce59be15eeebc2aa195dc5a5cf38358">mon_flag_RIDEABLE_MECH</a></div><div class="ttdeci">mon_flag_id mon_flag_RIDEABLE_MECH</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00142">mtype.cpp:142</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a3438177d11d4b59f12bb273d10d42f98"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a3438177d11d4b59f12bb273d10d42f98">game_menus::inv::titled_menu</a></div><div class="ttdeci">item_location titled_menu(Character &amp;you, const std::string &amp;title, const std::string &amp;none_message=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l00334">game_inventory.cpp:334</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_abf6b4d399e1ef6b51df0dc4621a5720d"><div class="ttname"><a href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">target_handler::mode_throw</a></div><div class="ttdeci">trajectory mode_throw(avatar &amp;you, item &amp;relevant, bool blind_throwing)</div><div class="ttdoc">Throwing item.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00442">ranged.cpp:442</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character__attire_8cpp_source.html#l00486">Character::can_takeoff()</a>, <a class="el" href="character_8cpp_source.html#l07836">Character::can_wield()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="monster_8cpp_source.html#l02975">monster::check_mech_powered()</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a>, <a class="el" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="monster_8cpp_source.html#l00717">monster::get_name()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="mutation_8cpp_source.html#l00613">Character::has_active_mutation()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="monster_8cpp_source.html#l01202">monster::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="character_8cpp_source.html#l03319">Character::is_wielding()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l14183">item::mod_charges()</a>, <a class="el" href="ranged_8cpp_source.html#l00442">target_handler::mode_throw()</a>, <a class="el" href="mtype_8cpp_source.html#l00142">mon_flag_RIDEABLE_MECH</a>, <a class="el" href="character_8h_source.html#l02800">Character::mounted_creature</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="character_8cpp_source.html#l03054">Character::remove_weapon()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="creature_8cpp_source.html#l00188">Creature::setpos()</a>, <a class="el" href="ranged_8cpp_source.html#l01308">Character::throw_item()</a>, <a class="el" href="character_8cpp_source.html#l05937">Character::throw_range()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00334">game_menus::inv::titled_menu()</a>, <a class="el" href="avatar__action_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a>, <a class="el" href="avatar__action_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a>, <a class="el" href="avatar_8cpp_source.html#l00887">avatar::try_break_relax_gas()</a>, and <a class="el" href="avatar_8cpp_source.html#l01385">avatar::wield()</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, <a class="el" href="game_8cpp_source.html#l02035">game::inventory_item_menu()</a>, and <a class="el" href="game_8cpp_source.html#l06380">game::peek()</a>.</p>

</div>
</div>
<a id="abadb3333d387007017d11836c606f1e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abadb3333d387007017d11836c606f1e5">&#9670;&nbsp;</a></span>ramp_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool avatar_action::ramp_move </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00563">563</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span>( dest_loc.z != you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() ) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">// No recursive ramp_moves</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// We&#39;re moving onto a tile with no support, check if it has a ramp below</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span>( !m.<a class="code" href="classmap.html#a3e525fc14178c776d0261cce3efec2a0">has_floor_or_support</a>( dest_loc ) ) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a>( dest_loc.xy(), dest_loc.z - 1 );</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a60132a40385f8951559a28563c2905f9">ter_furn_flag::TFLAG_RAMP</a>, below ) ) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="comment">// But we&#39;re moving onto one from above</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> dp = dest_loc - you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <a class="code" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a>( you, m, <a class="code" href="structtripoint.html">tripoint</a>( dp.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), -1 ) );</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="comment">// No penalty for misaligned stairs here</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="comment">// Also cheaper than climbing up</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span>( !m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a60132a40385f8951559a28563c2905f9">ter_furn_flag::TFLAG_RAMP</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ||</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        m.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( dest_loc ) ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// Try to find an aligned end of the ramp that will make our climb faster</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// Basically, finish walking on the stairs instead of pulling self up by hand</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">bool</span> aligned_ramps = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pt : m.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( pt, dest_loc ) &lt; 2 &amp;&amp; m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a46bf09e896deaf78f89633c197424789">ter_furn_flag::TFLAG_RAMP_END</a>, pt ) ) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            aligned_ramps = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> above_u( you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>(), you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>(), you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() + 1 );</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#a3e525fc14178c776d0261cce3efec2a0">has_floor_or_support</a>( above_u ) ) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t climb here - there&#39;s a ceiling above.&quot;</span> ) );</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> dp = dest_loc - you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> old_pos = you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a>( you, m, <a class="code" href="structtripoint.html">tripoint</a>( dp.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), 1 ) );</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// We can&#39;t just take the result of the above function here</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() != old_pos ) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> total_move_cost = aligned_ramps ? 0.5 : 1.0;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * total_move_cost );</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a3e525fc14178c776d0261cce3efec2a0"><div class="ttname"><a href="classmap.html#a3e525fc14178c776d0261cce3efec2a0">map::has_floor_or_support</a></div><div class="ttdeci">bool has_floor_or_support(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02733">map.cpp:2733</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">cube_direction::below</a></div><div class="ttdeci">@ below</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a46bf09e896deaf78f89633c197424789"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a46bf09e896deaf78f89633c197424789">ter_furn_flag::TFLAG_RAMP_END</a></div><div class="ttdeci">@ TFLAG_RAMP_END</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a60132a40385f8951559a28563c2905f9"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a60132a40385f8951559a28563c2905f9">ter_furn_flag::TFLAG_RAMP</a></div><div class="ttdeci">@ TFLAG_RAMP</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a>, <a class="el" href="character_8cpp_source.html#l04192">Character::get_speed()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l02733">map::has_floor_or_support()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00173">move()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="creature_8h_source.html#l00317">Creature::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a60132a40385f8951559a28563c2905f9">TFLAG_RAMP</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a46bf09e896deaf78f89633c197424789">TFLAG_RAMP_END</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

</div>
</div>
<a id="a9611563bffc4224b3e724db03688bdd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9611563bffc4224b3e724db03688bdd4">&#9670;&nbsp;</a></span>swim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::swim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles swimming by the player. </p>
<p>Called by <a class="el" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move()</a>. </p>

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l00618">618</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;{</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span>( !m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a>, p ) ) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="avatar__action_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a>( <a class="code" href="debug_8h.html#ab658e6d84759440dbf3c890446075395a4759bd3f0b71819391a3e4024b645d69">D_ERROR</a> ) &lt;&lt; <span class="stringliteral">&quot;game:plswim: Tried to swim in &quot;</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                       &lt;&lt; m.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( p ) &lt;&lt; <span class="stringliteral">&quot;!&quot;</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to swim in %s!&quot;</span>, m.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( p ) );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> ) ) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The water puts out the flames!&quot;</span> ) );</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        you.<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> );</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="classmonster.html">monster</a> *mon = you.<a class="code" href="classCharacter.html#ac3d46549b7cdaac1f98991167ad5f1b3">mounted_creature</a>.get();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">if</span>( mon-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> ) ) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                mon-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> );</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a> ) ) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The water washes off the glowing goo!&quot;</span> ) );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        you.<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="avatar__action_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a> );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;water_affect_items( you );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordtype">int</span> movecost = you.<a class="code" href="classCharacter.html#a48531fb6d06678b20e3b7a2c8164c206">swim_speed</a>();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    you.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="avatar__action_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, you.<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ? 2 : 1 );</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span>( movecost &gt;= 500 || you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#a84b3ce9a75d770cf2d33f6f1bf6eb828">effect_winded</a> ) ) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() &amp;&amp;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            !( you.<a class="code" href="classCharacter.html#ae06e5548d130b968ef3c982c2a36f357">shoe_type_count</a>( <a class="code" href="avatar__action_8cpp.html#ac3d65f74ab286c7292128ed71373f664">itype_swim_fins</a> ) == 2 ||</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;               ( you.<a class="code" href="classCharacter.html#ae06e5548d130b968ef3c982c2a36f357">shoe_type_count</a>( <a class="code" href="avatar__action_8cpp.html#ac3d65f74ab286c7292128ed71373f664">itype_swim_fins</a> ) == 1 &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) ) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You sink like a rock!&quot;</span> ) );</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            you.<a class="code" href="classCharacter.html#aa4685faead9b51d49e3489077c6848bc">set_underwater</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> &lt;= 5 &amp;&amp; you.<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">if</span>( movecost &lt; 500 ) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to breathe!  (%s to surface.)&quot;</span> ), <a class="code" href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a>( <a class="code" href="action_8h.html#a14769f0512c139a614db195c6477c667aa62dfc9c501214eb3f06a8eb16d27a36">ACTION_MOVE_UP</a> ) );</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to breathe but you can&#39;t swim!  Get to dry land, quick!&quot;</span> ) );</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">bool</span> diagonal = p.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> != you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() &amp;&amp; p.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> != you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        m.<a class="code" href="classmap.html#a53d95390d133477f8b4a1ce76482750b">unboard_vehicle</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() &amp;&amp; m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ).<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot board a vehicle while mounted.&quot;</span> ) );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <span class="keyword">auto</span> vp = m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( p ).<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span>( !vp-&gt;vehicle().handle_potential_theft( you ) ) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> old_abs_pos = m.<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( p );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( you );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="namespacecata__event__dispatch.html#a5fa5ced911a7e79ed6851c428c5689ce">cata_event_dispatch::avatar_moves</a>( old_abs_pos, you, m );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ).<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        m.<a class="code" href="classmap.html#ae9e52026d9d68ff5e7fe85c6f8963421">board_vehicle</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), &amp;you );</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -( ( movecost &gt; 200 ? 200 : movecost ) * ( <a class="code" href="line_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a> &amp;&amp; diagonal ? <a class="code" href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a> : 1 ) ) );</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    you.<a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;rust_iron_items();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        you.<a class="code" href="classCharacter.html#a0a19076e05cfbfb9e2ef9c57dd45958d">burn_move_stamina</a>( movecost );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classbody__part__set.html">body_part_set</a> flags;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        flags = you.<a class="code" href="classCreature.html#ac380c4fbe0ac80511f51477a4ea52846">get_drenching_body_parts</a>( <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        flags = you.<a class="code" href="classCreature.html#ac380c4fbe0ac80511f51477a4ea52846">get_drenching_body_parts</a>();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    you.<a class="code" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 100, flags, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="ttc" id="aaction_8h_html_a14769f0512c139a614db195c6477c667aa62dfc9c501214eb3f06a8eb16d27a36"><div class="ttname"><a href="action_8h.html#a14769f0512c139a614db195c6477c667aa62dfc9c501214eb3f06a8eb16d27a36">ACTION_MOVE_UP</a></div><div class="ttdeci">@ ACTION_MOVE_UP</div><div class="ttdoc">Ascend a staircase.</div><div class="ttdef"><b>Definition:</b> <a href="action_8h_source.html#l00060">action.h:60</a></div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a1d815a8053cfecc8a05374bf92924ba2"><div class="ttname"><a href="avatar__action_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a></div><div class="ttdeci">static const skill_id skill_swimming(&quot;swimming&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a84b3ce9a75d770cf2d33f6f1bf6eb828"><div class="ttname"><a href="avatar__action_8cpp.html#a84b3ce9a75d770cf2d33f6f1bf6eb828">effect_winded</a></div><div class="ttdeci">static const efftype_id effect_winded(&quot;winded&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_a8f6887393d4085f03584ef53b2c63d2f"><div class="ttname"><a href="avatar__action_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a></div><div class="ttdeci">static const efftype_id effect_glowing(&quot;glowing&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_ac3d65f74ab286c7292128ed71373f664"><div class="ttname"><a href="avatar__action_8cpp.html#ac3d65f74ab286c7292128ed71373f664">itype_swim_fins</a></div><div class="ttdeci">static const itype_id itype_swim_fins(&quot;swim_fins&quot;)</div></div>
<div class="ttc" id="aavatar__action_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a0a19076e05cfbfb9e2ef9c57dd45958d"><div class="ttname"><a href="classCharacter.html#a0a19076e05cfbfb9e2ef9c57dd45958d">Character::burn_move_stamina</a></div><div class="ttdeci">void burn_move_stamina(int moves)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06975">character.cpp:6975</a></div></div>
<div class="ttc" id="aclassCharacter_html_a44dbe53874421147bfc4491d8753cccc"><div class="ttname"><a href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">Character::drench</a></div><div class="ttdeci">void drench(int saturation, const body_part_set &amp;flags, bool ignore_waterproof)</div><div class="ttdoc">Drenches the player with water, saturation is the percent gotten wet.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01881">suffer.cpp:1881</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02693">character.h:2693</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6535a02158a1d6b23b0a6bb623dfae19"><div class="ttname"><a href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">Character::practice</a></div><div class="ttdeci">bool practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02683">character.cpp:2683</a></div></div>
<div class="ttc" id="aclassCharacter_html_a865e5eb770c71b3bd4ec4a05235cd3b6"><div class="ttname"><a href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">Character::oxygen</a></div><div class="ttdeci">int oxygen</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02735">character.h:2735</a></div></div>
<div class="ttc" id="aclassCharacter_html_a96ec9152d401f128cf31a7cc35c97f65"><div class="ttname"><a href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">Character::inv</a></div><div class="ttdeci">pimpl&lt; inventory &gt; inv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02712">character.h:2712</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa4685faead9b51d49e3489077c6848bc"><div class="ttname"><a href="classCharacter.html#aa4685faead9b51d49e3489077c6848bc">Character::set_underwater</a></div><div class="ttdeci">void set_underwater(bool)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12396">character.cpp:12396</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae06e5548d130b968ef3c982c2a36f357"><div class="ttname"><a href="classCharacter.html#ae06e5548d130b968ef3c982c2a36f357">Character::shoe_type_count</a></div><div class="ttdeci">int shoe_type_count(const itype_id &amp;it) const</div><div class="ttdoc">Returns 1 if the player is wearing an item of that count on one foot, 2 if on both,...</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00705">character_attire.cpp:705</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_ac380c4fbe0ac80511f51477a4ea52846"><div class="ttname"><a href="classCreature.html#ac380c4fbe0ac80511f51477a4ea52846">Creature::get_drenching_body_parts</a></div><div class="ttdeci">body_part_set get_drenching_body_parts(bool upper=true, bool mid=true, bool lower=true) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02704">creature.cpp:2704</a></div></div>
<div class="ttc" id="aclassbody__part__set_html"><div class="ttname"><a href="classbody__part__set.html">body_part_set</a></div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00011">body_part_set.h:12</a></div></div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09614">map.cpp:9614</a></div></div>
<div class="ttc" id="aclassmap_html_a51e32639c8df0c90e0743f929bcf2111"><div class="ttname"><a href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">map::tername</a></div><div class="ttdeci">std::string tername(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02340">map.cpp:2340</a></div></div>
<div class="ttc" id="aclassmap_html_a53d95390d133477f8b4a1ce76482750b"><div class="ttname"><a href="classmap.html#a53d95390d133477f8b4a1ce76482750b">map::unboard_vehicle</a></div><div class="ttdeci">void unboard_vehicle(const vpart_reference &amp;, Character *passenger, bool dead_passenger=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01395">map.cpp:1395</a></div></div>
<div class="ttc" id="aclassmap_html_ae9e52026d9d68ff5e7fe85c6f8963421"><div class="ttname"><a href="classmap.html#ae9e52026d9d68ff5e7fe85c6f8963421">map::board_vehicle</a></div><div class="ttdeci">void board_vehicle(const tripoint &amp;p, Character *pl)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01361">map.cpp:1361</a></div></div>
<div class="ttc" id="adebug_8h_html_ab658e6d84759440dbf3c890446075395a4759bd3f0b71819391a3e4024b645d69"><div class="ttname"><a href="debug_8h.html#ab658e6d84759440dbf3c890446075395a4759bd3f0b71819391a3e4024b645d69">D_ERROR</a></div><div class="ttdeci">@ D_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00142">debug.h:142</a></div></div>
<div class="ttc" id="aline_8cpp_html_a40b9d88f6d95e646490329d0071ec931"><div class="ttname"><a href="line_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a></div><div class="ttdeci">bool trigdist</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00018">line.cpp:18</a></div></div>
<div class="ttc" id="amath__defines_8h_html_a66b3ab30f1332874326ed93969e496e0"><div class="ttname"><a href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a></div><div class="ttdeci">#define M_SQRT2</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00031">math_defines.h:31</a></div></div>
<div class="ttc" id="anamespacecata__event__dispatch_html_a5fa5ced911a7e79ed6851c428c5689ce"><div class="ttname"><a href="namespacecata__event__dispatch.html#a5fa5ced911a7e79ed6851c428c5689ce">cata_event_dispatch::avatar_moves</a></div><div class="ttdeci">void avatar_moves(const tripoint &amp;old_abs_pos, const avatar &amp;u, const map &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13758">game.cpp:13758</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a></div><div class="ttdeci">@ VPFLAG_BOARDABLE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00067">veh_type.h:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="action_8h_source.html#l00060">ACTION_MOVE_UP</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13758">cata_event_dispatch::avatar_moves()</a>, <a class="el" href="map_8cpp_source.html#l01361">map::board_vehicle()</a>, <a class="el" href="character_8cpp_source.html#l06975">Character::burn_move_stamina()</a>, <a class="el" href="debug_8h_source.html#l00142">D_ERROR</a>, <a class="el" href="avatar__action_8cpp_source.html#l00101">dbg</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="suffer_8cpp_source.html#l01881">Character::drench()</a>, <a class="el" href="avatar__action_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a>, <a class="el" href="avatar__action_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, <a class="el" href="avatar__action_8cpp.html#a84b3ce9a75d770cf2d33f6f1bf6eb828">effect_winded</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="creature_8cpp_source.html#l02704">Creature::get_drenching_body_parts()</a>, <a class="el" href="map_8cpp_source.html#l09614">map::getabs()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="character_8h_source.html#l02693">Character::in_vehicle</a>, <a class="el" href="character_8h_source.html#l02712">Character::inv</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="avatar__action_8cpp.html#ac3d65f74ab286c7292128ed71373f664">itype_swim_fins</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="math__defines_8h_source.html#l00031">M_SQRT2</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8h_source.html#l02800">Character::mounted_creature</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="character_8h_source.html#l02735">Character::oxygen</a>, <a class="el" href="vehicle_8cpp_source.html#l02698">optional_vpart_position::part_with_feature()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="action_8cpp_source.html#l00528">press_x()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="character_8cpp_source.html#l12396">Character::set_underwater()</a>, <a class="el" href="creature_8cpp_source.html#l00188">Creature::setpos()</a>, <a class="el" href="character__attire_8cpp_source.html#l00705">Character::shoe_type_count()</a>, <a class="el" href="avatar__action_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, <a class="el" href="character_8cpp_source.html#l01416">Character::swim_speed()</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">TFLAG_SWIMMABLE</a>, <a class="el" href="line_8cpp_source.html#l00018">trigdist</a>, <a class="el" href="map_8cpp_source.html#l01395">map::unboard_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>, <a class="el" href="veh__type_8h_source.html#l00067">VPFLAG_BOARDABLE</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="timed__event_8cpp_source.html#l00102">timed_event::actualize()</a>, <a class="el" href="faction__camp_8cpp_source.html#l04385">basecamp::combat_mission_return()</a>, <a class="el" href="character_8cpp_source.html#l12722">Character::knock_back_to()</a>, <a class="el" href="game_8cpp_source.html#l04869">game::knockback()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l00173">move()</a>.</p>

</div>
</div>
<a id="afd349bc65fc375556b15241ab68095b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd349bc65fc375556b15241ab68095b1">&#9670;&nbsp;</a></span>unload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::unload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l01214">1214</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;{</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    std::pair&lt;item_location, bool&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="namespacegame__menus_1_1inv.html#afb40453948bfdfbb7c992b08226ba321">game_menus::inv::unload</a>( you );</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first ) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.second || !<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first-&gt;is_container() ) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="comment">// Auto contain</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        you.<a class="code" href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">unload</a>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first );</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// Manual contain</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> new_container = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( [&amp;you]( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp; it ) {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">return</span> it-&gt;<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() &amp;&amp; !it-&gt;<a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; you.<a class="code" href="classCharacter.html#a5cbc3a2ebe42118b5ca60f129fcfeeb8">rate_action_insert</a>( it ) == <a class="code" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert item&quot;</span> ), 1, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no container to insert items.&quot;</span> ) );</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">if</span>( !new_container ) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        you.<a class="code" href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">unload</a>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.first, <span class="keyword">false</span>, new_container );</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a3f04ae380d2d633eee808c7c6a11b6fb"><div class="ttname"><a href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">Character::unload</a></div><div class="ttdeci">bool unload(item_location &amp;loc, bool bypass_activity=false, const item_location &amp;new_container=item_location::nowhere)</div><div class="ttdoc">Unload item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11621">character.cpp:11621</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5cbc3a2ebe42118b5ca60f129fcfeeb8"><div class="ttname"><a href="classCharacter.html#a5cbc3a2ebe42118b5ca60f129fcfeeb8">Character::rate_action_insert</a></div><div class="ttdeci">hint_rating rate_action_insert(const item_location &amp;loc) const</div><div class="ttdef"><b>Definition:</b> <a href="character__ammo_8cpp_source.html#l00241">character_ammo.cpp:241</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09667">item.cpp:9667</a></div></div>
<div class="ttc" id="aclassitem_html_ac9df48bb2d4404a70af9d2fc5e1fa1dd"><div class="ttname"><a href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">item::is_corpse</a></div><div class="ttdeci">bool is_corpse() const</div><div class="ttdoc">Whether this is a corpse item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09526">item.cpp:9526</a></div></div>
<div class="ttc" id="aitem_8h_html_a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8"><div class="ttname"><a href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">hint_rating::good</a></div><div class="ttdeci">@ good</div><div class="ttdoc">Item permits this action.</div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_afb40453948bfdfbb7c992b08226ba321"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#afb40453948bfdfbb7c992b08226ba321">game_menus::inv::unload</a></div><div class="ttdeci">std::pair&lt; item_location, bool &gt; unload(Character &amp;you)</div><div class="ttdoc">Unload item menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02757">game_inventory.cpp:2757</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item_8h.html#a4f974518dea58a566d831531303a34b9a755f85c2723bb39381c7379a604160d8">good</a>, <a class="el" href="item_8cpp_source.html#l09667">item::is_container()</a>, <a class="el" href="item_8cpp_source.html#l09526">item::is_corpse()</a>, <a class="el" href="character__ammo_8cpp_source.html#l00241">Character::rate_action_insert()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="game__inventory_8cpp_source.html#l02757">game_menus::inv::unload()</a>, and <a class="el" href="character_8cpp_source.html#l11621">Character::unload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="savegame__json_8cpp_source.html#l00291">item_pocket::favorite_settings::deserialize()</a>, <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, <a class="el" href="item__pocket_8cpp_source.html#l02728">item_pocket::favorite_settings::info()</a>, <a class="el" href="item__pocket_8cpp_source.html#l02505">item_pocket::favorite_settings::is_null()</a>, <a class="el" href="item__pocket_8cpp_source.html#l02688">item_pocket::favorite_settings::is_unloadable()</a>, and <a class="el" href="item__pocket_8cpp_source.html#l02693">item_pocket::favorite_settings::set_unloadable()</a>.</p>

</div>
</div>
<a id="ad651718c214e707034374b85d936d671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad651718c214e707034374b85d936d671">&#9670;&nbsp;</a></span>use_item() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::use_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l01104">1104</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;{</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <a class="code" href="namespaceavatar__action.html#aeb00720c7ac8d9846f711c714770b373">avatar_action::use_item</a>( you, loc );</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="avatar__action_8cpp_source.html#l01110">use_item()</a>.</p>

</div>
</div>
<a id="aeb00720c7ac8d9846f711c714770b373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb00720c7ac8d9846f711c714770b373">&#9670;&nbsp;</a></span>use_item() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avatar_action::use_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>method</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="avatar__action_8cpp_source.html#l01110">1110</a> of file <a class="el" href="avatar__action_8cpp_source.html">avatar_action.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t use anything while incorporeal.&quot;</span> ) );</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// Some items may be used without being picked up first</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordtype">bool</span> use_in_place = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        loc = <a class="code" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">game_menus::inv::use</a>( you );</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    loc.<a class="code" href="classitem__location.html#acf908a183e86dfb9b9a22fc555f13c4e">overflow</a>();</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span>( loc-&gt;<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() &amp;&amp; loc-&gt;<a class="code" href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">is_frozen_liquid</a>() ) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Try as you might, you can&#39;t consume frozen liquids.&quot;</span> ) );</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span>( loc-&gt;<a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &amp;&amp; loc-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad0b1ce806d6f23c25a67db4e5043f6f0">flag_WATER_BREAK_ACTIVE</a> ) ) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item is still wet and it will break if you turn it on. Proceed?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            loc-&gt;<a class="code" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">deactivate</a>();</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>()-&gt;<a class="code" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">set_fault</a>( <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code" href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a>( std::string( <span class="stringliteral">&quot;wet&quot;</span> ) ) ) );</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            <span class="comment">// An electronic item in water is also shorted.</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">if</span>( loc-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afc6a264fae40049bceeea9bd1e1b6fb7">flag_ELECTRONIC</a> ) ) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>()-&gt;<a class="code" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">set_fault</a>( <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code" href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a>( std::string( <span class="stringliteral">&quot;shorted&quot;</span> ) ) ) );</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="classitem__pocket.html">item_pocket</a> *parent_pocket = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordtype">bool</span> on_person = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordtype">int</span> pre_obtain_moves = you.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>();</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span>( loc-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac22277325d81dcfd92b7611a5b705b07">flag_ALLOWS_REMOTE_USE</a> ) || you.<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *loc ) ) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        use_in_place = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="comment">// Activate holster on map only if hands are free.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a28e314b50dae2c237a0675ed748aaf1d">can_wield</a>( *loc ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() &amp;&amp; loc-&gt;<a class="code" href="classitem.html#a6de81eeb1c4666a84e1d774582b945ae">is_holster</a>() &amp;&amp; !loc.<a class="code" href="classitem__location.html#a337696f1679154f092c1e941dc10ba12">held_by</a>( you ) ) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        use_in_place = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">// Adjustment because in player::wield_contents this amount is refunded.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -loc.<a class="code" href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">obtain_cost</a>( you ) );</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888d">item_location::type</a> loc_where = loc.<a class="code" href="classitem__location.html#a2c8620185442e2923bd811d251af1aaa">where_recursive</a>();</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        std::string <span class="keyword">const</span> <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = loc-&gt;<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>();</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">if</span>( loc_where != <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a> ) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            pre_obtain_moves = -1;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            on_person = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="comment">// Get the parent pocket before the item is obtained.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="keywordflow">if</span>( loc.<a class="code" href="classitem__location.html#afbeb9ca7c1b58ec0564c0ffa437e415a">has_parent</a>() ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            parent_pocket = loc.<a class="code" href="classitem__location.html#aedbceea8bfe96a2132afa87b08bff716">parent_pocket</a>();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        loc = loc.<a class="code" href="classitem__location.html#a61b090f9b4c37858e4a7b85e9265f34d">obtain</a>( you, 1 );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keywordflow">if</span>( parent_pocket ) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            parent_pocket-&gt;<a class="code" href="classitem__pocket.html#afc5c39b878142d094c7d61ddb802920a">on_contents_changed</a>();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">if</span>( pre_obtain_moves == -1 ) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            pre_obtain_moves = you.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Couldn&#39;t pick up the %s.&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">if</span>( loc_where != <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a> ) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pick up the %s.&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">if</span>( use_in_place ) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="avatar__action_8cpp.html#a8083fa84fc1e37380cb41aa8c2e6e2f3">update_lum</a>( loc, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        you.<a class="code" href="classCharacter.html#a1881ce22e9f108fea6ff32da4d4accc2">use</a>( loc, pre_obtain_moves, method );</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">if</span>( loc ) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <a class="code" href="avatar__action_8cpp.html#a8083fa84fc1e37380cb41aa8c2e6e2f3">update_lum</a>( loc, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            loc.<a class="code" href="classitem__location.html#aa7fe8f49804524de3dcdfedd523be549">make_active</a>();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        you.<a class="code" href="classCharacter.html#a1881ce22e9f108fea6ff32da4d4accc2">use</a>( loc, pre_obtain_moves, method );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">if</span>( parent_pocket &amp;&amp; on_person &amp;&amp; parent_pocket-&gt;<a class="code" href="classitem__pocket.html#a53fa35b48e368c36c9d734859ecdac44">will_spill</a>() ) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            parent_pocket-&gt;<a class="code" href="classitem__pocket.html#a5ffb4056c2d770161b4f30f4e91f0398">handle_liquid_or_spill</a>( you, loc.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>().<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() );</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span>( loc ) {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        loc.<a class="code" href="classitem__location.html#aae27f98a520a46e960cb7e258f7a9e30">on_contents_changed</a>();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    you.<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="ttc" id="aavatar__action_8cpp_html_a8083fa84fc1e37380cb41aa8c2e6e2f3"><div class="ttname"><a href="avatar__action_8cpp.html#a8083fa84fc1e37380cb41aa8c2e6e2f3">update_lum</a></div><div class="ttdeci">static void update_lum(item_location loc, bool add)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l01093">avatar_action.cpp:1093</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1881ce22e9f108fea6ff32da4d4accc2"><div class="ttname"><a href="classCharacter.html#a1881ce22e9f108fea6ff32da4d4accc2">Character::use</a></div><div class="ttdeci">void use(int inventory_position)</div><div class="ttdoc">Uses a tool.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l13037">character.cpp:13037</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe4c095c2e6510f07f351d7e091f5787"><div class="ttname"><a href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">Character::invalidate_crafting_inventory</a></div><div class="ttdeci">void invalidate_crafting_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00692">crafting.cpp:692</a></div></div>
<div class="ttc" id="aclassCreature_html_af3d3fb7cfb98cf3c36f0f0681414274a"><div class="ttname"><a href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">Creature::get_moves</a></div><div class="ttdeci">int get_moves() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02004">creature.cpp:2004</a></div></div>
<div class="ttc" id="aclassfault_html_ab3996d8c55a12438a10bae3e4228ecdc"><div class="ttname"><a href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a></div><div class="ttdeci">static const std::list&lt; fault_id &gt; &amp; get_by_type(const std::string &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="fault_8cpp_source.html#l00147">fault.cpp:147</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888d"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888d">item_location::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00031">item_location.h:31</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a></div><div class="ttdeci">@ character</div></div>
<div class="ttc" id="aclassitem__location_html_a2c8620185442e2923bd811d251af1aaa"><div class="ttname"><a href="classitem__location.html#a2c8620185442e2923bd811d251af1aaa">item_location::where_recursive</a></div><div class="ttdeci">type where_recursive() const</div><div class="ttdoc">Returns the type of location where the topmost container of the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01006">item_location.cpp:1006</a></div></div>
<div class="ttc" id="aclassitem__location_html_a337696f1679154f092c1e941dc10ba12"><div class="ttname"><a href="classitem__location.html#a337696f1679154f092c1e941dc10ba12">item_location::held_by</a></div><div class="ttdeci">bool held_by(Character const &amp;who) const</div><div class="ttdoc">returns true if the item is in the inventory of the given character</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01107">item_location.cpp:1107</a></div></div>
<div class="ttc" id="aclassitem__location_html_a61b090f9b4c37858e4a7b85e9265f34d"><div class="ttname"><a href="classitem__location.html#a61b090f9b4c37858e4a7b85e9265f34d">item_location::obtain</a></div><div class="ttdeci">item_location obtain(Character &amp;ch, int qty=-1)</div><div class="ttdoc">Move an item from the location to the character inventory If the player fails to obtain the item (lik...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01027">item_location.cpp:1027</a></div></div>
<div class="ttc" id="aclassitem__location_html_aa7fe8f49804524de3dcdfedd523be549"><div class="ttname"><a href="classitem__location.html#aa7fe8f49804524de3dcdfedd523be549">item_location::make_active</a></div><div class="ttdeci">void make_active()</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01060">item_location.cpp:1060</a></div></div>
<div class="ttc" id="aclassitem__location_html_aae27f98a520a46e960cb7e258f7a9e30"><div class="ttname"><a href="classitem__location.html#aae27f98a520a46e960cb7e258f7a9e30">item_location::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Handles updates to the item location, mostly for caching.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01051">item_location.cpp:1051</a></div></div>
<div class="ttc" id="aclassitem__location_html_ac61eb40367834d791602ff3a2ca5c5a9"><div class="ttname"><a href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">item_location::obtain_cost</a></div><div class="ttdeci">int obtain_cost(const Character &amp;ch, int qty=-1) const</div><div class="ttdoc">Calculate (but do not deduct) number of moves required to obtain an item.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01036">item_location.cpp:1036</a></div></div>
<div class="ttc" id="aclassitem__location_html_ad2c318c46c6daaa28c9ed522ae6d13a4"><div class="ttname"><a href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">item_location::parent_item</a></div><div class="ttdeci">item_location parent_item() const</div><div class="ttdoc">returns the parent item, or an invalid location if it has no parent</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00860">item_location.cpp:860</a></div></div>
<div class="ttc" id="aclassitem__location_html_aedbceea8bfe96a2132afa87b08bff716"><div class="ttname"><a href="classitem__location.html#aedbceea8bfe96a2132afa87b08bff716">item_location::parent_pocket</a></div><div class="ttdeci">item_pocket * parent_pocket() const</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00868">item_location.cpp:868</a></div></div>
<div class="ttc" id="aclassitem__location_html_afbeb9ca7c1b58ec0564c0ffa437e415a"><div class="ttname"><a href="classitem__location.html#afbeb9ca7c1b58ec0564c0ffa437e415a">item_location::has_parent</a></div><div class="ttdeci">bool has_parent() const</div><div class="ttdoc">true if this item location can and does have a parent</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00876">item_location.cpp:876</a></div></div>
<div class="ttc" id="aclassitem__pocket_html"><div class="ttname"><a href="classitem__pocket.html">item_pocket</a></div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00036">item_pocket.h:37</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a53fa35b48e368c36c9d734859ecdac44"><div class="ttname"><a href="classitem__pocket.html#a53fa35b48e368c36c9d734859ecdac44">item_pocket::will_spill</a></div><div class="ttdeci">bool will_spill() const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00835">item_pocket.cpp:835</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a5ffb4056c2d770161b4f30f4e91f0398"><div class="ttname"><a href="classitem__pocket.html#a5ffb4056c2d770161b4f30f4e91f0398">item_pocket::handle_liquid_or_spill</a></div><div class="ttdeci">void handle_liquid_or_spill(Character &amp;guy, const item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00785">item_pocket.cpp:785</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_afc5c39b878142d094c7d61ddb802920a"><div class="ttname"><a href="classitem__pocket.html#afc5c39b878142d094c7d61ddb802920a">item_pocket::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l01924">item_pocket.cpp:1924</a></div></div>
<div class="ttc" id="aclassitem_html_a371350eafdd2727f65f2371a3cdfa9f0"><div class="ttname"><a href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">item::set_fault</a></div><div class="ttdeci">item &amp; set_fault(const fault_id &amp;fault_id)</div><div class="ttdoc">Idempotent filter setting an item specific fault.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07635">item.cpp:7635</a></div></div>
<div class="ttc" id="aclassitem_html_a3e058f8327de11a69a8e33f597be6d80"><div class="ttname"><a href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">item::deactivate</a></div><div class="ttdeci">item &amp; deactivate(const Character *ch=nullptr, bool alert=true)</div><div class="ttdoc">Filter converting this instance to the inactive type If the item is either inactive or cannot be deac...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00668">item.cpp:668</a></div></div>
<div class="ttc" id="aclassitem_html_a3e7fc9f4062c12d8e50e01bc7ac121d1"><div class="ttname"><a href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">item::wetness</a></div><div class="ttdeci">int wetness</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03153">item.h:3153</a></div></div>
<div class="ttc" id="aclassitem_html_a52f5044582c9c5dd6ccf882fad039d64"><div class="ttname"><a href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">item::is_frozen_liquid</a></div><div class="ttdeci">bool is_frozen_liquid() const</div><div class="ttdoc">Returns true if the item is A: is SOLID and if it B: is of type LIQUID.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00937">item.cpp:937</a></div></div>
<div class="ttc" id="aclassitem_html_a6de81eeb1c4666a84e1d774582b945ae"><div class="ttname"><a href="classitem.html#a6de81eeb1c4666a84e1d774582b945ae">item::is_holster</a></div><div class="ttdeci">bool is_holster() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09465">item.cpp:9465</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06855">item.cpp:6855</a></div></div>
<div class="ttc" id="aclassitem_html_ac070089c03e5dc687bae39670edd5401"><div class="ttname"><a href="classitem.html#ac070089c03e5dc687bae39670edd5401">item::is_comestible</a></div><div class="ttdeci">bool is_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09475">item.cpp:9475</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="aflag_8cpp_html_ac22277325d81dcfd92b7611a5b705b07"><div class="ttname"><a href="flag_8cpp.html#ac22277325d81dcfd92b7611a5b705b07">flag_ALLOWS_REMOTE_USE</a></div><div class="ttdeci">const flag_id flag_ALLOWS_REMOTE_USE(&quot;ALLOWS_REMOTE_USE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad0b1ce806d6f23c25a67db4e5043f6f0"><div class="ttname"><a href="flag_8cpp.html#ad0b1ce806d6f23c25a67db4e5043f6f0">flag_WATER_BREAK_ACTIVE</a></div><div class="ttdeci">const flag_id flag_WATER_BREAK_ACTIVE(&quot;WATER_BREAK_ACTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afc6a264fae40049bceeea9bd1e1b6fb7"><div class="ttname"><a href="flag_8cpp.html#afc6a264fae40049bceeea9bd1e1b6fb7">flag_ELECTRONIC</a></div><div class="ttdeci">const flag_id flag_ELECTRONIC(&quot;ELECTRONIC&quot;)</div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a233578a2d65d51f06b773ae57531fb3b"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">game_menus::inv::use</a></div><div class="ttdeci">item_location use(avatar &amp;you)</div><div class="ttdoc">Item activation menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l01180">game_inventory.cpp:1180</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00104">rng.h:104</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l07836">Character::can_wield()</a>, <a class="el" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::character</a>, <a class="el" href="item_8cpp_source.html#l00668">item::deactivate()</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="avatar__action_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a>, <a class="el" href="flag_8cpp.html#ac22277325d81dcfd92b7611a5b705b07">flag_ALLOWS_REMOTE_USE</a>, <a class="el" href="flag_8cpp.html#afc6a264fae40049bceeea9bd1e1b6fb7">flag_ELECTRONIC</a>, <a class="el" href="flag_8cpp.html#ad0b1ce806d6f23c25a67db4e5043f6f0">flag_WATER_BREAK_ACTIVE</a>, <a class="el" href="fault_8cpp_source.html#l00147">fault::get_by_type()</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="item__pocket_8cpp_source.html#l00785">item_pocket::handle_liquid_or_spill()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item__location_8cpp_source.html#l00876">item_location::has_parent()</a>, <a class="el" href="item__location_8cpp_source.html#l01107">item_location::held_by()</a>, <a class="el" href="crafting_8cpp_source.html#l00692">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8cpp_source.html#l09475">item::is_comestible()</a>, <a class="el" href="item_8cpp_source.html#l00937">item::is_frozen_liquid()</a>, <a class="el" href="item_8cpp_source.html#l09465">item::is_holster()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="item__location_8cpp_source.html#l01060">item_location::make_active()</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="item__location_8cpp_source.html#l01027">item_location::obtain()</a>, <a class="el" href="item__location_8cpp_source.html#l01036">item_location::obtain_cost()</a>, <a class="el" href="item__location_8cpp_source.html#l01051">item_location::on_contents_changed()</a>, <a class="el" href="item__pocket_8cpp_source.html#l01924">item_pocket::on_contents_changed()</a>, <a class="el" href="item__location_8cpp_source.html#l00996">item_location::overflow()</a>, <a class="el" href="item__location_8cpp_source.html#l00860">item_location::parent_item()</a>, <a class="el" href="item__location_8cpp_source.html#l00868">item_location::parent_pocket()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="rng_8h_source.html#l00104">random_entry()</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, <a class="el" href="item_8cpp_source.html#l07635">item::set_fault()</a>, <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>, <a class="el" href="avatar__action_8cpp_source.html#l01093">update_lum()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01180">game_menus::inv::use()</a>, <a class="el" href="character_8cpp_source.html#l13037">Character::use()</a>, <a class="el" href="item_8h_source.html#l03153">item::wetness</a>, <a class="el" href="item__location_8cpp_source.html#l01006">item_location::where_recursive()</a>, and <a class="el" href="item__pocket_8cpp_source.html#l00835">item_pocket::will_spill()</a>.</p>

<p class="reference">Referenced by <a class="el" href="medical__ui_8cpp_source.html#l00692">avatar::disp_medical()</a>, <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00973">eat_or_use()</a>, <a class="el" href="iuse_8cpp_source.html#l02171">exosuit_interact::insert_replace_activate_mod()</a>, <a class="el" href="game_8cpp_source.html#l02035">game::inventory_item_menu()</a>, <a class="el" href="game_8cpp_source.html#l05941">game::npc_menu()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l01104">use_item()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:46 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
