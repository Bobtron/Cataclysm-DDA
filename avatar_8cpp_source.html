<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/avatar.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">avatar.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="avatar_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="action_8h.html">action.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__assert_8h.html">cata_assert.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="catacharset_8h.html">catacharset.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__id_8h.html">character_id.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__martial__arts_8h.html">character_martial_arts.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cursesdef_8h.html">cursesdef.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="diary_8h.html">diary.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="event_8h.html">event.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="event__bus_8h.html">event_bus.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="faction_8h.html">faction.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="field__type_8h.html">field_type.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flexbuffer__json-inl_8h.html">flexbuffer_json-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flexbuffer__json_8h.html">flexbuffer_json.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__inventory_8h.html">game_inventory.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="help_8h.html">help.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="inventory_8h.html">inventory.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__location_8h.html">item_location.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse_8h.html">iuse.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="json_8h.html">json.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="line_8h.html">line.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map__memory_8h.html">map_memory.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mapdata_8h.html">mapdata.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="martialarts_8h.html">martialarts.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mission_8h.html">mission.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="morale_8h.html">morale.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="morale__types_8h.html">morale_types.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="move__mode_8h.html">move_mode.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutation_8h.html">mutation.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="npc_8h.html">npc.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="overmap_8h.html">overmap.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pathfinding_8h.html">pathfinding.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pimpl_8h.html">pimpl.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="profession_8h.html">profession.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ranged_8h.html">ranged.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recipe_8h.html">recipe.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="scenario_8h.html">scenario.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="skill_8h.html">skill.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stomach_8h.html">stomach.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="talker_8h.html">talker.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="talker__avatar_8h.html">talker_avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timed__event_8h.html">timed_event.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trap_8h.html">trap.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ui_8h.html">ui.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="value__ptr_8h.html">value_ptr.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__type_8h.html">veh_type.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">class </span><a class="code" href="classmonfaction.html">monfaction</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a8d1fcf8d24e911eb69b460cd5cd32f9a">   91</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="avatar_8cpp.html#a8d1fcf8d24e911eb69b460cd5cd32f9a">bio_cloak</a>( <span class="stringliteral">&quot;bio_cloak&quot;</span> );</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">   92</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="avatar_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a>( <span class="stringliteral">&quot;bio_soporific&quot;</span> );</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#aed41c52190bc19cff7fa3c714d0be50f">   94</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#aed41c52190bc19cff7fa3c714d0be50f">effect_alarm_clock</a>( <span class="stringliteral">&quot;alarm_clock&quot;</span> );</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">   95</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>( <span class="stringliteral">&quot;boomered&quot;</span> );</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">   96</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a>( <span class="stringliteral">&quot;depressants&quot;</span> );</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a>( <span class="stringliteral">&quot;happy&quot;</span> );</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">   98</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a>( <span class="stringliteral">&quot;irradiated&quot;</span> );</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>( <span class="stringliteral">&quot;onfire&quot;</span> );</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a>( <span class="stringliteral">&quot;pkill&quot;</span> );</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a>( <span class="stringliteral">&quot;psi_stunned&quot;</span> );</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a8573cc3a9649fd0a9b82dc86b0dff30e">  102</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#a8573cc3a9649fd0a9b82dc86b0dff30e">effect_relax_gas</a>( <span class="stringliteral">&quot;relax_gas&quot;</span> );</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a09f3ea407cf63807e000861190ad1515">  103</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a>( <span class="stringliteral">&quot;sad&quot;</span> );</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">  104</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a>( <span class="stringliteral">&quot;sleep&quot;</span> );</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">  105</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a>( <span class="stringliteral">&quot;sleep_deprived&quot;</span> );</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ac9e11d8127ad8d0ad1582cc53939301f">  106</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ac9e11d8127ad8d0ad1582cc53939301f">effect_slept_through_alarm</a>( <span class="stringliteral">&quot;slept_through_alarm&quot;</span> );</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">  107</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a>( <span class="stringliteral">&quot;stim&quot;</span> );</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">  108</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>( <span class="stringliteral">&quot;stim_overdose&quot;</span> );</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">  109</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="avatar_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>( <span class="stringliteral">&quot;stunned&quot;</span> );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">  111</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">faction_id</a> <a class="code" href="avatar_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a>( <span class="stringliteral">&quot;your_followers&quot;</span> );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a0b39eb8da100f09941bb64988793485a">  113</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="avatar_8cpp.html#a0b39eb8da100f09941bb64988793485a">itype_guidebook</a>( <span class="stringliteral">&quot;guidebook&quot;</span> );</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#adebf9d34c44cf8946560251e2adc2cd4">  114</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="avatar_8cpp.html#adebf9d34c44cf8946560251e2adc2cd4">itype_mut_longpull</a>( <span class="stringliteral">&quot;mut_longpull&quot;</span> );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ac0fbe9dfcb50737d44ee4d31653e25ac">  116</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="avatar_8cpp.html#ac0fbe9dfcb50737d44ee4d31653e25ac">json_flag_ALARMCLOCK</a>( <span class="stringliteral">&quot;ALARMCLOCK&quot;</span> );</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a3eff2536d0f2d082101e71815160a288">  117</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="avatar_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a>( <span class="stringliteral">&quot;PAIN_IMMUNE&quot;</span> );</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af1c6c1c6abc2a67da91b74814eda8078">  118</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="avatar_8cpp.html#af1c6c1c6abc2a67da91b74814eda8078">json_flag_WEBBED_HANDS</a>( <span class="stringliteral">&quot;WEBBED_HANDS&quot;</span> );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ad371690d1256c38ada780add49e8b23e">  120</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> <a class="code" href="avatar_8cpp.html#ad371690d1256c38ada780add49e8b23e">move_mode_crouch</a>( <span class="stringliteral">&quot;crouch&quot;</span> );</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">  121</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> <a class="code" href="avatar_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a>( <span class="stringliteral">&quot;prone&quot;</span> );</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a9793d68ab3c4775ab78fc24e93b97a6e">  122</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> <a class="code" href="avatar_8cpp.html#a9793d68ab3c4775ab78fc24e93b97a6e">move_mode_run</a>( <span class="stringliteral">&quot;run&quot;</span> );</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">  123</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> <a class="code" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a>( <span class="stringliteral">&quot;walk&quot;</span> );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a2988b5084978cc9f6f891ae04b11c3c8">  125</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;monfaction&gt;</a> <a class="code" href="avatar_8cpp.html#a2988b5084978cc9f6f891ae04b11c3c8">monfaction_player</a>( <span class="stringliteral">&quot;player&quot;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">  127</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a>( <span class="stringliteral">&quot;t_dirt&quot;</span> );</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">  128</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a>( <span class="stringliteral">&quot;t_dirtmound&quot;</span> );</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af2540b2bf274cc61340154c538845226">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#af2540b2bf274cc61340154c538845226">ter_t_floor</a>( <span class="stringliteral">&quot;t_floor&quot;</span> );</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#afa18c8c17b0b33f364c72c636824686f">  130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a>( <span class="stringliteral">&quot;t_grass&quot;</span> );</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#aaa258c5465ca70ec4568914f0975902c">  131</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a>( <span class="stringliteral">&quot;t_pit&quot;</span> );</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#added40875b98d3240b4ff7b208435270">  132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="avatar_8cpp.html#added40875b98d3240b4ff7b208435270">ter_t_pit_shallow</a>( <span class="stringliteral">&quot;t_pit_shallow&quot;</span> );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a1f13575e0c937c4721778a685093e25d">  134</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a>( <span class="stringliteral">&quot;ARACHNID_ARMS&quot;</span> );</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">  135</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a>( <span class="stringliteral">&quot;ARACHNID_ARMS_OK&quot;</span> );</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a9c5c38ebc99fa84cc6fa6cea24213099">  136</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a9c5c38ebc99fa84cc6fa6cea24213099">trait_CENOBITE</a>( <span class="stringliteral">&quot;CENOBITE&quot;</span> );</div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">  137</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a>( <span class="stringliteral">&quot;CHITIN2&quot;</span> );</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a>( <span class="stringliteral">&quot;CHITIN3&quot;</span> );</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">  139</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a>( <span class="stringliteral">&quot;CHITIN_FUR3&quot;</span> );</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">  140</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a>( <span class="stringliteral">&quot;CHLOROMORPH&quot;</span> );</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">  141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a>( <span class="stringliteral">&quot;COMPOUND_EYES&quot;</span> );</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a45fe17320739b38daf72f34792dbd657">  142</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a45fe17320739b38daf72f34792dbd657">trait_DEBUG_CLOAK</a>( <span class="stringliteral">&quot;DEBUG_CLOAK&quot;</span> );</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">  143</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a>( <span class="stringliteral">&quot;INSECT_ARMS&quot;</span> );</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ac41827abd252cabc27c7c385291f71e4">  144</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a>( <span class="stringliteral">&quot;INSECT_ARMS_OK&quot;</span> );</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a039c3379527621f928cbc2e62686108c">  145</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a>( <span class="stringliteral">&quot;M_SKIN3&quot;</span> );</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#abe59975b0f897b05b7572b71af1a2ca7">  146</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#abe59975b0f897b05b7572b71af1a2ca7">trait_PROF_DICEMASTER</a>( <span class="stringliteral">&quot;PROF_DICEMASTER&quot;</span> );</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">  147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a>( <span class="stringliteral">&quot;SHELL2&quot;</span> );</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">  148</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a>( <span class="stringliteral">&quot;SHELL3&quot;</span> );</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">  149</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a>( <span class="stringliteral">&quot;STIMBOOST&quot;</span> );</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">  150</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a>( <span class="stringliteral">&quot;THICK_SCALES&quot;</span> );</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af9f531764978ce897647a8b151bebfef">  151</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a>( <span class="stringliteral">&quot;THRESH_SPIDER&quot;</span> );</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">  152</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a>( <span class="stringliteral">&quot;UNDINE_SLEEP_WATER&quot;</span> );</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">  153</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a>( <span class="stringliteral">&quot;WATERSLEEP&quot;</span> );</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">  154</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a>( <span class="stringliteral">&quot;WEB_SPINNER&quot;</span> );</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">  155</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a>( <span class="stringliteral">&quot;WEB_WALKER&quot;</span> );</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a6d71b37c506e3143c525c4021a580366">  156</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a>( <span class="stringliteral">&quot;WEB_WEAVER&quot;</span> );</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">  157</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a>( <span class="stringliteral">&quot;WHISKERS&quot;</span> );</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">  158</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="avatar_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a>( <span class="stringliteral">&quot;WHISKERS_RAT&quot;</span> );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classavatar.html#a88bb46be41a2d8a1ccda560fe9ca3872">  160</a></span>&#160;<a class="code" href="classavatar.html#a88bb46be41a2d8a1ccda560fe9ca3872">avatar::avatar</a>()</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a> = std::make_unique&lt;map_memory&gt;();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classavatar.html#ae30cd3f5d76ab5f173cf720d6b7aada7">show_map_memory</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a> = <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.emplace_front( );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classavatar.html#ab6e59125d481438c7481444c3ce78617">a_diary</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<a class="code" href="classavatar.html#a5914c9812e809ca1e43173118c7aa5ec">avatar::~avatar</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// NOLINTNEXTLINE(performance-noexcept-move-constructor)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="classavatar.html#a88bb46be41a2d8a1ccda560fe9ca3872">avatar::avatar</a>( <a class="code" href="classavatar.html">avatar</a> &amp;&amp; ) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// NOLINTNEXTLINE(performance-noexcept-move-constructor)</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="classavatar.html#ae10c26ee9266084346b8da1d41abf33c">avatar::operator=</a>( <a class="code" href="classavatar.html">avatar</a> &amp;&amp; ) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classavatar.html#a8f968a043376121130a5cfc5d578b648">  176</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a8f968a043376121130a5cfc5d578b648">avatar::control_npc</a>( <a class="code" href="classnpc.html">npc</a> &amp;np, <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span>( !np.<a class="code" href="classnpc.html#ab762e1b5cc3053fb9b04df37714e14b7">is_player_ally</a>() ) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;control_npc() called on non-allied npc %s&quot;</span>, np.<a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classcharacter__id.html">character_id</a> new_character = np.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">const</span> std::function&lt;void( <a class="code" href="classnpc.html">npc</a> &amp; )&gt; update_npc = [new_character]( <a class="code" href="classnpc.html">npc</a> &amp; guy ) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        guy.update_missions_target( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), new_character );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    };</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a373a98167f20af7399b8d8a01f824306">foreach_npc</a>( update_npc );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classmission.html">mission</a>().<a class="code" href="classmission.html#a09bfff0d223c6859a3b389812a0a4734">update_world_missions_character</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), new_character );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// move avatar character data into shadow npc</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classCharacter.html#a89bae4bdcf077182255a45f8cebef788">swap_character</a>( <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>() );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// swap target npc with shadow npc</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>( <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>(), np );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// move shadow npc character data into avatar</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classCharacter.html#a89bae4bdcf077182255a45f8cebef788">swap_character</a>( <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>() );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// the avatar character is no longer a follower NPC</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remove_npc_follower( <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// the previous avatar character is now a follower</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;add_npc_follower( np.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() );</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    np.<a class="code" href="classnpc.html#ae4ee8462177eb0d0d5b4447b74d436d8">set_fac</a>( <a class="code" href="avatar_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a> );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// perception and mutations may have changed, so reset light level caches</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reset_light_level();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// center the map on the new avatar character</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> z_level_changed = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;vertical_shift( <a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( *<span class="keyword">this</span>, z_level_changed );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classavatar.html#a4ee0e4b06382c473ec8f4fb7c14b7c88">character_mood_face</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classstring__id.html">profession_id</a> prof_id = <a class="code" href="classCharacter.html#aabdb3984d92298545456bf8d5dcf1fd0">prof</a> ? <a class="code" href="classCharacter.html#aabdb3984d92298545456bf8d5dcf1fd0">prof</a>-&gt;<a class="code" href="classprofession.html#a086008c97a3e1a7c90abe13206c3f8bc">ident</a>() : <a class="code" href="classprofession.html#a30863aff05431320802058dee4113a6d">profession::generic</a>()-&gt;<a class="code" href="classprofession.html#a086008c97a3e1a7c90abe13206c3f8bc">ident</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a2399bc378fc3eb202892ff81cf8c7597">event_type::game_avatar_new</a>&gt;( <span class="comment">/*is_new_game=*/</span><span class="keyword">false</span>, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), <a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>, <a class="code" href="classCharacter.html#a8e6a78e6c4497a9aa7b8cc127dcdd4e3">male</a>, prof_id, <a class="code" href="classCharacter.html#a79882594452430db545255b936e220a7">custom_profession</a> );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classavatar.html#ae725b627365617ad8ee7e0d1d3297728">  211</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ae725b627365617ad8ee7e0d1d3297728">avatar::control_npc_menu</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    std::vector&lt;shared_ptr_fast&lt;npc&gt;&gt; followers;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classuilist.html">uilist</a> charmenu;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> charnum = 0;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcharacter__id.html">character_id</a> &amp;elem : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_follower_list() ) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;npc&gt;</a> follower = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#abe3397983bdf2419ede84ee43bdf587f">find_npc</a>( elem );</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span>( follower ) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            followers.emplace_back( follower );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            charmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( charnum++, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, follower-&gt;get_name() );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span>( followers.empty() ) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s no one to take control of!&quot;</span> ) );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    charmenu.<a class="code" href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">w_y_setup</a> = 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    charmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span>( charmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( charmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &gt;= followers.size() ) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classavatar.html#a8f968a043376121130a5cfc5d578b648">control_npc</a>( *followers[charmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>], <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classavatar.html#a68bbe6837937efefaa91d7d13304db7d">  235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a68bbe6837937efefaa91d7d13304db7d">avatar::longpull</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classitem.html">item</a> wtmp( <a class="code" href="avatar_8cpp.html#adebf9d34c44cf8946560251e2adc2cd4">itype_mut_longpull</a> );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;temp_exit_fullscreen();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> traj = <a class="code" href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">target_handler::mode_throw</a>( *<span class="keyword">this</span>, wtmp, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;reenter_fullscreen();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span>( traj.empty() ) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// cancel</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classCreature.html#abe6022b1e8465afa8f672d77cbbe5680">Creature::longpull</a>( <a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>, traj.back() );</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classavatar.html#a6ec30083e8dea5cac8879b5a9a84fceb">  248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a6ec30083e8dea5cac8879b5a9a84fceb">avatar::toggle_map_memory</a>()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="classavatar.html#ae30cd3f5d76ab5f173cf720d6b7aada7">show_map_memory</a> = !<a class="code" href="classavatar.html#ae30cd3f5d76ab5f173cf720d6b7aada7">show_map_memory</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classavatar.html#a2702a3d3c3a071f73f64dc3c141d8d61">  253</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a2702a3d3c3a071f73f64dc3c141d8d61">avatar::is_map_memory_valid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;is_valid();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classavatar.html#a248cc7684548ae2f92dae45a889ec23e">  258</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a248cc7684548ae2f92dae45a889ec23e">avatar::should_show_map_memory</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a>().<a class="code" href="namespacerotatable__symbols.html#a7d2f855a39674de736a7829423a577f4">get</a>( <a class="code" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a12afd509d0817037a3fa8d912d0f525e">timed_event_type::OVERRIDE_PLACE</a> ) ) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#ae30cd3f5d76ab5f173cf720d6b7aada7">show_map_memory</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classavatar.html#a4cfc5a1088f2c47cad459ba08a4b7504">  266</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a4cfc5a1088f2c47cad459ba08a4b7504">avatar::save_map_memory</a>()</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;{</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;save( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classavatar.html#a7d4c908c964c354d7dd9c24892065bf5">  271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a7d4c908c964c354d7dd9c24892065bf5">avatar::load_map_memory</a>()</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;load( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getglobal( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classavatar.html#af690d039ef033cc62fe6c43a9519bb1d">  276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#af690d039ef033cc62fe6c43a9519bb1d">avatar::prepare_map_memory_region</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p2 )</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;prepare_region( p1, p2 );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classavatar.html#a73c5cdc86dbe8861397ac85d22122d12">  281</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classmemorized__tile.html">memorized_tile</a> &amp;<a class="code" href="classavatar.html#a73c5cdc86dbe8861397ac85d22122d12">avatar::get_memorized_tile</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p )<span class="keyword"> const</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#a248cc7684548ae2f92dae45a889ec23e">should_show_map_memory</a>() ) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;get_tile( p );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structmm__submap.html#a05cadd6f8ed333dd6664feb0499b076d">mm_submap::default_tile</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classavatar.html#ab19cabc9e315ac018646a3b49d26bdf0">  289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ab19cabc9e315ac018646a3b49d26bdf0">avatar::memorize_terrain</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p, <span class="keyword">const</span> std::string_view <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                               <span class="keywordtype">int</span> subtile, <span class="keywordtype">int</span> rotation )</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;set_tile_terrain( p, <span class="keywordtype">id</span>, subtile, rotation );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classavatar.html#a3f93e313b981c8a9a70f651d3cd4bbf3">  295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a3f93e313b981c8a9a70f651d3cd4bbf3">avatar::memorize_decoration</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p, <span class="keyword">const</span> std::string_view <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                  <span class="keywordtype">int</span> subtile, <span class="keywordtype">int</span> rotation )</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;set_tile_decoration( p, <span class="keywordtype">id</span>, subtile, rotation );</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classavatar.html#acd38b68669752e6a658b686ae5dac2c4">  301</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#acd38b68669752e6a658b686ae5dac2c4">avatar::memorize_symbol</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p, char32_t <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a> )</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;set_tile_symbol( p, <a class="code" href="classCharacter.html#ad19243d81ad7ecca4e08055128f11f70">symbol</a> );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="classavatar.html#aa386699e6b2e7a85f60cdcb81d17538f">  306</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#aa386699e6b2e7a85f60cdcb81d17538f">avatar::memorize_clear_decoration</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;p, std::string_view <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a> )</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">player_map_memory</a>-&gt;clear_tile_decoration( p, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a> );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classavatar.html#ab9d7689c7af3f73b1adc4c434b426d29">  311</a></span>&#160;std::vector&lt;mission *&gt; <a class="code" href="classavatar.html#ab9d7689c7af3f73b1adc4c434b426d29">avatar::get_active_missions</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classavatar.html#a8e0f8b762a3c2023adda8062934f1a3c">  316</a></span>&#160;std::vector&lt;mission *&gt; <a class="code" href="classavatar.html#a8e0f8b762a3c2023adda8062934f1a3c">avatar::get_completed_missions</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a564acaf48366141fa00b3361c113cca5">completed_missions</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classavatar.html#acb364421bb9cfdb88c8fa2383ba17dcb">  321</a></span>&#160;std::vector&lt;mission *&gt; <a class="code" href="classavatar.html#acb364421bb9cfdb88c8fa2383ba17dcb">avatar::get_failed_missions</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a5ba10797079b08c7a31c1dd5a1437e9f">failed_missions</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classavatar.html#a4182354816e64fa9d18a9f36f6873131">  326</a></span>&#160;<a class="code" href="classmission.html">mission</a> *<a class="code" href="classavatar.html#a4182354816e64fa9d18a9f36f6873131">avatar::get_active_mission</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classavatar.html#afc69f2fb0562c4789c69aee0ec1bf201">  331</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#afc69f2fb0562c4789c69aee0ec1bf201">avatar::reset_all_missions</a>()</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.clear();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="classavatar.html#a564acaf48366141fa00b3361c113cca5">completed_missions</a>.clear();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="classavatar.html#a5ba10797079b08c7a31c1dd5a1437e9f">failed_missions</a>.clear();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="classavatar.html#a9c40a50429a13a1a3d0e7d38d93e72f4">  339</a></span>&#160;<a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> <a class="code" href="classavatar.html#a9c40a50429a13a1a3d0e7d38d93e72f4">avatar::get_active_mission_target</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classovermap.html#aa0999e49bed45fc1eb5e30498b8934f4">overmap::invalid_tripoint</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a>-&gt;<a class="code" href="classmission.html#a13e39f34d8079f690e671c6dc0f794cd">get_target</a>();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classavatar.html#a00bfae63e1361a778f24a24255758001">  347</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a00bfae63e1361a778f24a24255758001">avatar::set_active_mission</a>( <a class="code" href="classmission.html">mission</a> &amp;cur_mission )</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;{</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find( <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.begin(), <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end(), &amp;cur_mission );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end() ) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;new objective %s is not in the active_missions list&quot;</span>,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                  cur_mission.<a class="code" href="classmission.html#a3e0b5122b1eb9917a9279ab4e131f1c1">mission_id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = &amp;cur_mission;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="classavatar.html#aeeb4184fd41835431d91efc8570e6cd1">  358</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#aeeb4184fd41835431d91efc8570e6cd1">avatar::on_mission_assignment</a>( <a class="code" href="classmission.html">mission</a> &amp;new_mission )</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.push_back( &amp;new_mission );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="classavatar.html#a00bfae63e1361a778f24a24255758001">set_active_mission</a>( new_mission );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="classavatar.html#ad6f9f354206620723ff007995f669963">  364</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ad6f9f354206620723ff007995f669963">avatar::on_mission_finished</a>( <a class="code" href="classmission.html">mission</a> &amp;cur_mission )</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span>( cur_mission.<a class="code" href="classmission.html#a68856a2b760bcef1a4cd0319c6d7dfec">has_failed</a>() ) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span>( !cur_mission.<a class="code" href="classmission.html#af99364a9afac4abce5af8a056835f95d">get_type</a>().<a class="code" href="structmission__type.html#a0427808ac14b1fc6ae57eb07904c37d7">invisible_on_complete</a> ) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="classavatar.html#a5ba10797079b08c7a31c1dd5a1437e9f">failed_missions</a>.push_back( &amp;cur_mission );</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mission \&quot;%s\&quot; is failed.&quot;</span> ), cur_mission.<a class="code" href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">name</a>() );</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span>( !cur_mission.<a class="code" href="classmission.html#af99364a9afac4abce5af8a056835f95d">get_type</a>().<a class="code" href="structmission__type.html#a0427808ac14b1fc6ae57eb07904c37d7">invisible_on_complete</a> ) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="classavatar.html#a564acaf48366141fa00b3361c113cca5">completed_missions</a>.push_back( &amp;cur_mission );</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mission \&quot;%s\&quot; is successfully completed.&quot;</span> ),</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                           cur_mission.<a class="code" href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">name</a>() );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find( <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.begin(), <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end(), &amp;cur_mission );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end() ) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;completed mission %s was not in the active_missions list&quot;</span>,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                  cur_mission.<a class="code" href="classmission.html#a3e0b5122b1eb9917a9279ab4e131f1c1">mission_id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.erase( iter );</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span>( &amp;cur_mission == <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.empty() ) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.front();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="classavatar.html#a2ac4ba17c0fec6f9c44fc4cd29cb3662">  394</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a2ac4ba17c0fec6f9c44fc4cd29cb3662">avatar::has_mission_id</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">mission_type_id</a> &amp;miss_id )</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;{</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classmission.html">mission</a> *miss : <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a> ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">if</span>( miss-&gt;mission_id() == miss_id ) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="classavatar.html#ae02571ea21f34f48a44f3e9d5242c08f">  404</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ae02571ea21f34f48a44f3e9d5242c08f">avatar::remove_active_mission</a>( <a class="code" href="classmission.html">mission</a> &amp;cur_mission )</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    cur_mission.<a class="code" href="classmission.html#af2c33d226079157de633e1ca76f1e1c6">remove_active_world_mission</a>( cur_mission );</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find( <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.begin(), <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end(), &amp;cur_mission );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span>( iter == <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.end() ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;removed mission %s was not in the active_missions list&quot;</span>,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                  cur_mission.<a class="code" href="classmission.html#a3e0b5122b1eb9917a9279ab4e131f1c1">mission_id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.erase( iter );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span>( &amp;cur_mission == <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> ) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.empty() ) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">active_mission</a> = <a class="code" href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">active_missions</a>.front();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classavatar.html#a9778980e66d2f6587c6ac9e00eae5006">  424</a></span>&#160;<a class="code" href="classdiary.html">diary</a> *<a class="code" href="classavatar.html#a9778980e66d2f6587c6ac9e00eae5006">avatar::get_avatar_diary</a>()</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#ab6e59125d481438c7481444c3ce78617">a_diary</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="classavatar.html#ab6e59125d481438c7481444c3ce78617">a_diary</a> = std::make_unique&lt;diary&gt;();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#ab6e59125d481438c7481444c3ce78617">a_diary</a>.get();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classavatar.html#a070c1b744213489475a890af58a6dbea">  432</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a070c1b744213489475a890af58a6dbea">avatar::read</a>( <a class="code" href="classitem__location.html">item_location</a> &amp;book, <a class="code" href="classitem__location.html">item_location</a> ereader )</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span>( !book ) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    std::vector&lt;std::string&gt; fail_messages;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *reader = <a class="code" href="classCharacter.html#a66aab249399aba9fc327965b92e0262c">get_book_reader</a>( *book, fail_messages );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span>( reader == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// We can&#39;t read, and neither can our followers</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;reason : fail_messages ) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, reason );</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// spells are handled in a different place</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// src/iuse_actor.cpp -&gt; learn_spell_actor::use</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span>( book-&gt;<a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;learn_spell&quot;</span> ) ) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        book-&gt;<a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;learn_spell&quot;</span> )-&gt;<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( <span class="keyword">this</span>, *book, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">bool</span> continuous = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> time_taken = <a class="code" href="classCharacter.html#a7bdec5b3c9990b8c7232796641915728">time_to_read</a>( *book, *reader );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;avatar::read time_taken = %s&quot;</span>,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                   <a class="code" href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a>( time_taken ) );</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// If the player hasn&#39;t read this book before, skim it to get an idea of what&#39;s in it.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( book-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span>( reader != <span class="keyword">this</span> ) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, fail_messages[0] );</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s reads aloud…&quot;</span> ), reader-&gt;<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classread__activity__actor.html">read_activity_actor</a>( time_taken, book, ereader, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span>( book-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="avatar_8cpp.html#a0b39eb8da100f09941bb64988793485a">itype_guidebook</a> ) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="comment">// special guidebook effect: print a misc. hint when read</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span>( reader != <span class="keyword">this</span> ) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, fail_messages[0] );</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( *reader ).<a class="code" href="classnpc.html#a077962bdd033d5a96974c8ddf3e26a59">say</a>( <a class="code" href="help_8cpp.html#aa32b35413d90584d6e8fc93520f00e9d">get_hint</a>() );</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="help_8cpp.html#aa32b35413d90584d6e8fc93520f00e9d">get_hint</a>() );</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4">event_type::reads_book</a>&gt;( <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), book-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_book&gt;</a> &amp;<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = book-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;skill = <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;skill;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">const</span> std::string skill_name = skill ? skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// Find NPCs to join the study session:</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    std::map&lt;Character *, std::string&gt; learners;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">//reading only for fun</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    std::map&lt;Character *, std::string&gt; fun_learners;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    std::map&lt;Character *, std::string&gt; nonlearners;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCharacter.html">Character</a> *elem : <a class="code" href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">get_crafting_helpers</a>() ) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keyword">const</span> <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7">book_mastery</a> mastery = elem-&gt;get_book_mastery( *book );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> morale_req = elem-&gt;fun_to_read( *book ) || elem-&gt;has_morale_to_read();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="comment">// Note that the reader cannot be a nonlearner</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// since a reader should always have enough morale to read</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// and at the very least be able to understand the book</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span>( elem-&gt;is_deaf() &amp;&amp; elem != reader ) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            nonlearners.insert( { elem, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (deaf)&quot;</span> ) } );</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">book_mastery::MASTERED</a> &amp;&amp; elem-&gt;fun_to_read( *book ) ) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            fun_learners.insert( {elem, elem == reader ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (reading aloud to you)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span> } );</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">book_mastery::LEARNING</a> &amp;&amp; morale_req ) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            learners.insert( {elem, elem == reader ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (reading aloud to you)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span>} );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            std::string reason = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (uninterested)&quot;</span> );</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">if</span>( !morale_req ) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                reason = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (too sad)&quot;</span> );</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ab28c9da4856f2af975701af7ccf27ce2">book_mastery::CANT_UNDERSTAND</a> ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                reason = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (needs %d %s)&quot;</span> ), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;req, skill_name );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">book_mastery::MASTERED</a> ) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                reason = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (already has %d %s)&quot;</span> ), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;level, skill_name );</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            nonlearners.insert( { elem, reason } );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordtype">int</span> learner_id = -1;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_martialarts = book-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.count( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">//only show the menu if there&#39;s useful information or multiple options</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span>( ( skill || !nonlearners.empty() || !fun_learners.empty() ) &amp;&amp; !is_martialarts ) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Some helpers to reduce repetition:</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keyword">auto</span> <a class="code" href="smart__controller__ui_8h.html#a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3">length</a> = []( <span class="keyword">const</span> std::pair&lt;Character *, std::string&gt; &amp;elem ) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( elem.first-&gt;disp_name() ) + <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( elem.second );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        };</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keyword">auto</span> max_length = [&amp;<a class="code" href="smart__controller__ui_8h.html#a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3">length</a>]( <span class="keyword">const</span> std::map&lt;Character *, std::string&gt; &amp;m ) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keyword">auto</span> max_ele = std::max_element( m.begin(),</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                             m.end(), [&amp;<a class="code" href="smart__controller__ui_8h.html#a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3">length</a>]( <span class="keyword">const</span> std::pair&lt;Character *, std::string&gt; &amp;<a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8ea811882fecd5c7618d7099ebbd39ea254">left</a>,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keyword">const</span> std::pair&lt;Character *, std::string&gt; &amp;<a class="code" href="calendar_8h.html#ab6e1f01689c2dec473157375188392afa7c4f29407893c334a6cb7a87bf045c0d">right</a> ) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                return length( left ) &lt; length( right );</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            } );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">return</span> max_ele == m.end() ? 0 : <a class="code" href="smart__controller__ui_8h.html#a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3">length</a>( *max_ele );</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        };</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keyword">auto</span> get_text = [&amp;]( <span class="keyword">const</span> std::map&lt;Character *, std::string&gt; &amp;m,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                             <span class="keyword">const</span> std::pair&lt;Character *, std::string&gt; &amp;elem</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        ) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> lvl = elem.first-&gt;get_knowledge_level( skill );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keyword">const</span> std::string lvl_text = skill ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; | current level: %d&quot;</span> ), lvl ) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keyword">const</span> std::string name_text = elem.first-&gt;disp_name() + elem.second;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="catacharset_8cpp.html#a756b52a0bf9f4b63eadbe44da3e11a00">left_justify</a>( name_text, max_length( m ) ), lvl_text );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        };</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacedebug__menu.html#adaed30e5f02eb35cd72017cfdc36529d">add_header</a> = [&amp;menu]( <span class="keyword">const</span> std::string &amp; str ) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( -1, <span class="keyword">false</span>, -1, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <a class="code" href="structuilist__entry.html">uilist_entry</a> header( -1, <span class="keyword">false</span>, -1, str, <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>, <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            header.<a class="code" href="structuilist__entry.html#afac63498c9ea7cd5c5ea72e67001d238">force_color</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.push_back( header );</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        };</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        menu.<a class="code" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = !skill ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reading %s&quot;</span> ), book-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() ) :</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                     <span class="comment">//~ %1$s: book name, %2$s: skill name, %3$d and %4$d: skill levels</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                     <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reading %1$s (can train %2$s from %3$d to %4$d)&quot;</span> ), book-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(),</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                    skill_name, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;req, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;level );</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;0&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Read once&quot;</span> ) );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> lvl = <a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( skill );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2 + <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>().<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>(), lvl &lt; type-&gt;level, <span class="charliteral">&#39;1&#39;</span>,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Read until you gain a level | current level: %d&quot;</span> ), lvl ) );</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">// select until player gets level by default</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span>( lvl &lt; type-&gt;level ) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            menu.<a class="code" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = 1;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span>( !learners.empty() ) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="namespacedebug__menu.html#adaed30e5f02eb35cd72017cfdc36529d">add_header</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Read until this character gains a level:&quot;</span> ) );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;Character *const, std::string&gt; &amp;elem : learners ) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2 + elem.first-&gt;getID().get_value(), <span class="keyword">true</span>, -1,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                               get_text( learners, elem ) );</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span>( !fun_learners.empty() ) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="namespacedebug__menu.html#adaed30e5f02eb35cd72017cfdc36529d">add_header</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reading for fun:&quot;</span> ) );</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;Character *const, std::string&gt; &amp;elem : fun_learners ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( -1, <span class="keyword">false</span>, -1, get_text( fun_learners, elem ) );</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span>( !nonlearners.empty() ) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <a class="code" href="namespacedebug__menu.html#adaed30e5f02eb35cd72017cfdc36529d">add_header</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Not participating:&quot;</span> ) );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;Character *const, std::string&gt; &amp;elem : nonlearners ) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( -1, <span class="keyword">false</span>, -1, get_text( nonlearners, elem ) );</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 2 ) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            continuous = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            learner_id = menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> - 2;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span>( is_martialarts ) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;has_martialart( <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *book-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) ) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You already know all this book has to teach.&quot;</span> ) );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        menu.<a class="code" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Train %s from manual:&quot;</span> ),</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                    <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *book-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> )-&gt;<a class="code" href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">name</a> );</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;1&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Train once&quot;</span> ) );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;0&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Train until tired or success&quot;</span> ) );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 1 ) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            continuous = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        } <span class="keywordflow">else</span> {    <span class="comment">// menu.ret == 2</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            continuous = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Now reading %s, %s to stop early.&quot;</span> ),</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;             book-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(), <a class="code" href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a>( <a class="code" href="action_8h.html#a14769f0512c139a614db195c6477c667ac558a2f59b4d885a83def7f0878d03b1">ACTION_PAUSE</a> ) );</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// Print some informational messages</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span>( reader != <span class="keyword">this</span> ) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, fail_messages[0] );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s reads aloud…&quot;</span> ), reader-&gt;<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !learners.empty() || !fun_learners.empty() ) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You read aloud…&quot;</span> ) );</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span>( learners.size() == 1 ) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s studies with you.&quot;</span> ), learners.begin()-&gt;first-&gt;disp_name() );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !learners.empty() ) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keyword">const</span> std::string them = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( learners.begin(),</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        learners.end(), [&amp;]( <span class="keyword">const</span> std::pair&lt;Character *, std::string&gt; &amp;elem ) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            return elem.first-&gt;disp_name();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        } );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s study with you.&quot;</span> ), them );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// Don&#39;t include the reader as it would be too redundant.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    std::set&lt;std::string&gt; readers;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;Character *const, std::string&gt; &amp;elem : fun_learners ) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span>( elem.first != reader ) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            readers.insert( elem.first-&gt;disp_name() );</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span>( readers.size() == 1 ) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s reads with you for fun.&quot;</span> ), readers.begin()-&gt;c_str() );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !readers.empty() ) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keyword">const</span> std::string them = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( readers );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s read with you for fun.&quot;</span> ), them );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>(), reader-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() ) &gt; 1.0 ) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s difficult for %s to see fine details right now.  Reading will take longer than usual.&quot;</span> ),</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                 reader-&gt;<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a90b884933d23c4d57ca01dbe2898d405">intelligence</a> = <a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> complex_penalty = <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>-&gt;intel &gt; <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a90b884933d23c4d57ca01dbe2898d405">intelligence</a>, reader-&gt;<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() ) &amp;&amp;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                 !reader-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#abe59975b0f897b05b7572b71af1a2ca7">trait_PROF_DICEMASTER</a> );</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *complex_player = reader-&gt;<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() &lt; <a class="code" href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a90b884933d23c4d57ca01dbe2898d405">intelligence</a> ? reader : <span class="keyword">this</span>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span>( complex_penalty ) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This book is too complex for %s to easily understand.  It will take longer to read.&quot;</span> ),</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                 complex_player-&gt;<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// push an identifier of martial art book to the action handling</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span>( is_martialarts &amp;&amp;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>() &lt; <a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() / 10 )  {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too exhausted to train martial arts.&quot;</span> ) );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classread__activity__actor.html">read_activity_actor</a>( time_taken, book, ereader, continuous, learner_id ) );</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="classavatar.html#ae8ce7a37a82a161735e383882ee7b3c0">  699</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ae8ce7a37a82a161735e383882ee7b3c0">avatar::grab</a>( <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71">object_type</a> grab_type_new, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;grab_point_new )</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;{</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> update_memory =</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71">object_type</a> gtype, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; gpoint, <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacecatacurses.html#ab21fb51b59b9cfef11982366b84e8ebe">erase</a> ) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;m = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span>( gtype == <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ae9fa318f4d73c31493e98096efa497e2">object_type::VEHICLE</a> ) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = m.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() + gpoint ) ) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;target : ovp-&gt;vehicle().get_points() ) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="namespacecatacurses.html#ab21fb51b59b9cfef11982366b84e8ebe">erase</a> ) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        <a class="code" href="classavatar.html#aa386699e6b2e7a85f60cdcb81d17538f">memorize_clear_decoration</a>( m.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( target ), <span class="comment">/* prefix = */</span> <span class="stringliteral">&quot;vp_&quot;</span> );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    m.<a class="code" href="classmap.html#a1807357b0f079f62746e9fe4c117b592">memory_cache_dec_set_dirty</a>( target, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( gtype != <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a> ) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacecatacurses.html#ab21fb51b59b9cfef11982366b84e8ebe">erase</a> ) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <a class="code" href="classavatar.html#aa386699e6b2e7a85f60cdcb81d17538f">memorize_clear_decoration</a>( m.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() + gpoint ) );</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            m.<a class="code" href="classmap.html#a1807357b0f079f62746e9fe4c117b592">memory_cache_dec_set_dirty</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() + gpoint, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    };</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// Mark the area covered by the previous vehicle/furniture/etc for re-memorizing.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    update_memory( <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a>, <a class="code" href="classCharacter.html#ac033cd38ee98900bb08eb196c674aa55">grab_point</a>, <span class="comment">/* erase = */</span> <span class="keyword">false</span> );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a> = grab_type_new;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="classCharacter.html#ac033cd38ee98900bb08eb196c674aa55">grab_point</a> = grab_point_new;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// Clear the map memory for the area covered by the vehicle/furniture/etc to</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// eliminate ghost vehicles/furnitures/etc.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    update_memory( <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a>, <a class="code" href="classCharacter.html#ac033cd38ee98900bb08eb196c674aa55">grab_point</a>, <span class="comment">/* erase = */</span> <span class="keyword">true</span> );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="classCharacter.html#a87b2b972822f230803ab63dd4f836b7a">path_settings</a>-&gt;avoid_rough_terrain = <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a> != <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="classavatar.html#a3fe7bbe225126bee662ce6127526cdfb">  733</a></span>&#160;<a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71">object_type</a> <a class="code" href="classavatar.html#a3fe7bbe225126bee662ce6127526cdfb">avatar::get_grab_type</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a84371498e35f55357d1104e71afce540">grab_type</a>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">  738</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">avatar::has_identified</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;item_id )<span class="keyword"> const</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a4edad4ae6301de98fd880ea45a01c448">items_identified</a>.count( item_id ) &gt; 0;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">  743</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">avatar::identify</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html">item</a> )</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to identify non-book item&quot;</span> );</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    const ::item &amp;book = <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>; <span class="comment">// alias</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( !<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) );</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="classavatar.html#a4edad4ae6301de98fd880ea45a01c448">items_identified</a>.insert( <a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;reading = <a class="code" href="classitem.html">item</a>.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;skill = reading-&gt;skill;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You skim %s to find out what&#39;s in it.&quot;</span> ), book.type_name() );</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span>( skill &amp;&amp; <a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( skill ).can_train() ) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Can bring your %s knowledge to %d.&quot;</span> ),</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                 skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(), reading-&gt;level );</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span>( reading-&gt;req != 0 ) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Requires %1$s knowledge level %2$d to understand.&quot;</span> ),</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                     skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(), reading-&gt;req );</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span>( reading-&gt;intel != 0 ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Requires intelligence of %d to easily read.&quot;</span> ), reading-&gt;intel );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">//It feels wrong to use a pointer to *this, but I can&#39;t find any other player pointers in this method.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">book_fun_for</a>( book, *<span class="keyword">this</span> ) != 0 ) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reading this book affects your morale by %d.&quot;</span> ), <a class="code" href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">book_fun_for</a>( book, *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span>( book.type-&gt;use_methods.count( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) ) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> style_to_learn = <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *book.type );</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can learn %s style from it.&quot;</span> ), style_to_learn-&gt;<a class="code" href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">name</a> );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This fighting style is %s to learn.&quot;</span> ),</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                 <a class="code" href="martialarts_8cpp.html#abbde71d679db0bf89e89279e18183337">martialart_difficulty</a>( style_to_learn ) );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It would be easier to master if you&#39;d have skill expertise in %s.&quot;</span> ),</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                 style_to_learn-&gt;<a class="code" href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">primary_skill</a>-&gt;<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() );</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A training session with this book takes %s.&quot;</span> ),</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                 <a class="code" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( reading-&gt;time ) );</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A chapter of this book takes %s to read.&quot;</span> ),</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                 <a class="code" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( reading-&gt;time ) );</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    std::vector&lt;std::string&gt; crafting_recipes;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    std::vector&lt;std::string&gt; practice_recipes;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a> &amp;elem : reading-&gt;recipes ) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="comment">// If the player knows it, they recognize it even if it&#39;s not clearly stated.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">if</span>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#ab1754e8717fef2508852ad9cf8576bff">is_hidden</a>() &amp;&amp; !<a class="code" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a> ) ) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a6ffa5ac015e9cb54bf2d360e5709cff3">is_practice</a>() ) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            practice_recipes.emplace_back( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() );</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            crafting_recipes.emplace_back( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() );</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span>( !crafting_recipes.empty() ) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This book can help you craft: %s&quot;</span> ),</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                                        <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( crafting_recipes ) ) );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span>( !practice_recipes.empty() ) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This book can help you practice: %s&quot;</span> ),</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                                        <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( practice_recipes ) ) );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keyword">const</span> std::size_t num_total_recipes = crafting_recipes.size() + practice_recipes.size();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span>( num_total_recipes &lt; reading-&gt;recipes.size() ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It might help you figuring out some more recipes.&quot;</span> ) );</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="classavatar.html#aa863f2e803ad611d327fe05ac46191ae">  820</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#aa863f2e803ad611d327fe05ac46191ae">avatar::clear_nutrition</a>()</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.clear();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.emplace_front();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">consumption_history</a>.clear();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="classavatar.html#a636f7addec9a39ee06b733d8f6d0e0ba">  827</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a636f7addec9a39ee06b733d8f6d0e0ba">avatar::clear_identified</a>()</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="classavatar.html#a4edad4ae6301de98fd880ea45a01c448">items_identified</a>.clear();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="classavatar.html#af94b71a9d5957236d1c205a17e855b96">  832</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#af94b71a9d5957236d1c205a17e855b96">avatar::wake_up</a>()</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;{</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a> ) ) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">// alarm was set and player hasn&#39;t slept through the alarm.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#aed41c52190bc19cff7fa3c714d0be50f">effect_alarm_clock</a> ) &amp;&amp; !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#ac9e11d8127ad8d0ad1582cc53939301f">effect_slept_through_alarm</a> ) ) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It looks like you woke up before your alarm.&quot;</span> ) );</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="comment">// effects will be removed in Character::wake_up.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#ac9e11d8127ad8d0ad1582cc53939301f">effect_slept_through_alarm</a> ) ) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="avatar_8cpp.html#ac0fbe9dfcb50737d44ee4d31653e25ac">json_flag_ALARMCLOCK</a> ) ) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It looks like you&#39;ve slept through your internal alarm…&quot;</span> ) );</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It looks like you&#39;ve slept through the alarm…&quot;</span> ) );</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="classCharacter.html#a0b32571db45faeab8561f33af6da1e28">Character::wake_up</a>();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="classavatar.html#adcd442574ee8441af971162f8d9857be">  850</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#adcd442574ee8441af971162f8d9857be">avatar::add_snippet</a>( <a class="code" href="classstring__id.html">snippet_id</a> snippet )</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#ad9f996cafc4e58efd7931116da025de5">has_seen_snippet</a>( snippet ) ) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="classavatar.html#abb59991d0b221eb936a69c28df755da8">snippets_read</a>.emplace( snippet );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;}</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="classavatar.html#ad9f996cafc4e58efd7931116da025de5">  859</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#ad9f996cafc4e58efd7931116da025de5">avatar::has_seen_snippet</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">snippet_id</a> &amp;snippet )<span class="keyword"> const</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#abb59991d0b221eb936a69c28df755da8">snippets_read</a>.count( snippet ) &gt; 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="classavatar.html#a56d9f1444d91d0692744ba2caac7dae8">  864</a></span>&#160;<span class="keyword">const</span> std::set&lt;snippet_id&gt; &amp;<a class="code" href="classavatar.html#a56d9f1444d91d0692744ba2caac7dae8">avatar::get_snippets</a>()</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#abb59991d0b221eb936a69c28df755da8">snippets_read</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="classavatar.html#a5dba2eeda46f94995f1b4181c2f71499">  869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a5dba2eeda46f94995f1b4181c2f71499">avatar::vomit</a>()</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() != 0_ml ) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// Remove all joy from previously eaten food and apply the penalty</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a> );</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#aaa5338b2599dee343776a16d858acd72">MORALE_FOOD_HOT</a> );</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">// bears must suffer too</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#a0526ed49652901e606e16ddc54b34507">MORALE_HONEY</a> );</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// 1.5 times longer</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a655c7e5a3f27bc87986154329af62690">MORALE_VOMITED</a>, -2 * <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() / 50 ), -40, 90_minutes,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                    45_minutes, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You retched, but your stomach is empty.&quot;</span> ) );</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">Character::vomit</a>();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">  887</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">avatar::try_break_relax_gas</a>( <span class="keyword">const</span> std::string &amp;msg_success, <span class="keyword">const</span> std::string &amp;msg_failure )</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;pacify = <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="avatar_8cpp.html#a8573cc3a9649fd0a9b82dc86b0dff30e">effect_relax_gas</a>, <a class="code" href="bodypart_8cpp.html#acce4686c4642d33fd10230b461987d34">body_part_mouth</a> );</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span>( pacify.<a class="code" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() ) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( pacify.<a class="code" href="classeffect.html#a68192c5a91cf7ad4618263ba3de8b802">get_intensity</a>() ) ) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, msg_success );</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, pacify.<a class="code" href="classeffect.html#a68192c5a91cf7ad4618263ba3de8b802">get_intensity</a>() * 10 + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -30, 30 ) ) );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, msg_failure );</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="classavatar.html#a0c113b6c70932cce763473e04130ad9f">  902</a></span>&#160;<a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="classavatar.html#a0c113b6c70932cce763473e04130ad9f">avatar::basic_symbol_color</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordtype">bool</span> in_shell = <a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> ) ||</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    <a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a> );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> ) ) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a> ) ) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a> ) ) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> ) ) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a0a561860988a2692df47476d9a15511e">underwater</a> ) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="avatar_8cpp.html#a8d1fcf8d24e911eb69b460cd5cd32f9a">bio_cloak</a> ) ||</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="classCharacter.html#a33ae50fa04d45782f640c2fc572d9eee">is_wearing_active_optcloak</a>() || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a45fe17320739b38daf72f34792dbd657">trait_DEBUG_CLOAK</a> ) ) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classmove__mode.html">move_mode</a>-&gt;<a class="code" href="classmove__mode.html#ab8d51c606d510445889190c062f19c24">symbol_color</a>();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="classavatar.html#a4198c108f2bb3c70956bb35d7c666f7b">  931</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classavatar.html#a4198c108f2bb3c70956bb35d7c666f7b">avatar::print_info</a>( <span class="keyword">const</span> <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;w, <span class="keywordtype">int</span> vStart, <span class="keywordtype">int</span>, <span class="keywordtype">int</span> column )<span class="keyword"> const</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">return</span> vStart + <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( w, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( column, vStart ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( w ) - column - 1, <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>,</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You (%s)&quot;</span> ),</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                    <a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>() ) - 1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="classavatar.html#a876031ea6847647c17d9d65b8d0b4fb1">  938</a></span>&#160;<a class="code" href="classint__id.html">mfaction_id</a> <a class="code" href="classavatar.html#a876031ea6847647c17d9d65b8d0b4fb1">avatar::get_monster_faction</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="avatar_8cpp.html#a2988b5084978cc9f6f891ae04b11c3c8">monfaction_player</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="classavatar.html#ae73c56da5377b57b9a09ac5c6affa4c1">  943</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ae73c56da5377b57b9a09ac5c6affa4c1">avatar::disp_morale</a>()</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;{</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordtype">int</span> equilibrium = <a class="code" href="classCharacter.html#a2a28975ceb2a1a50d3d6607fd6c36ea5">calc_focus_equilibrium</a>();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordtype">int</span> sleepiness_penalty = 0;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sleepiness_cap = <a class="code" href="classCharacter.html#a196af8e36243af3dc02a5ea02fc8425d">focus_equilibrium_sleepiness_cap</a>( equilibrium );</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span>( sleepiness_cap &lt; equilibrium ) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        sleepiness_penalty = equilibrium - sleepiness_cap;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        equilibrium = sleepiness_cap;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordtype">int</span> pain_penalty = 0;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">get_perceived_pain</a>() &amp;&amp; !<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a9c5c38ebc99fa84cc6fa6cea24213099">trait_CENOBITE</a> ) ) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        pain_penalty = <a class="code" href="classCharacter.html#a2a28975ceb2a1a50d3d6607fd6c36ea5">calc_focus_equilibrium</a>( <span class="keyword">true</span> ) - equilibrium - sleepiness_penalty;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a>-&gt;display( equilibrium, pain_penalty, sleepiness_penalty );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="classavatar.html#a064a855ec85f657a0dd39a4c385b09bc">  963</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a064a855ec85f657a0dd39a4c385b09bc">avatar::reset_stats</a>()</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;{</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> current_stim = <a class="code" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">// Trait / mutation buffs</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a> ) ) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your thick scales get in the way.&quot;</span> ), 2 );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your chitin gets in the way.&quot;</span> ), 1 );</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;eyes&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <a class="code" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( 2 );</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a> ) ) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your insect limbs get in the way.&quot;</span> ), 2 );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a> ) ) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">wearing_fitting_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( 1 );</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your clothing restricts your insect arms.&quot;</span> ), 1 );</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="avatar_8cpp.html#af1c6c1c6abc2a67da91b74814eda8078">json_flag_WEBBED_HANDS</a> ) ) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your webbed hands get in the way.&quot;</span> ), 1 );</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a> ) ) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your arachnid limbs get in the way.&quot;</span> ), 4 );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a> ) ) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">wearing_fitting_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( 2 );</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your clothing constricts your arachnid limbs.&quot;</span> ), 2 );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> set_fake_effect_dur = [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> &amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp; <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> ) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <a class="code" href="classeffect.html">effect</a> &amp;eff = <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">if</span>( eff.<a class="code" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() == <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> ) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span>( eff.<a class="code" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() &amp;&amp; <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> &gt; 0_turns ) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> &gt; 0_turns ) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            eff.<a class="code" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> );</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    };</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// Painkiller</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a>, 1_turns * <a class="code" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() );</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// Pain</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">get_perceived_pain</a>() &gt; 0 ) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keyword">const</span> <a class="code" href="structstat__mod.html">stat_mod</a> ppen = <a class="code" href="classCharacter.html#a229739fc346dabfff09225d6c0fcf92f">get_pain_penalty</a>();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <a class="code" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( -ppen.<a class="code" href="structstat__mod.html#a362a69480e76954ddece8a94f8fb41d9">strength</a> );</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -ppen.<a class="code" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> );</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( -ppen.<a class="code" href="structstat__mod.html#a02fc9b713716dc8d9c8643db09cd853a">intelligence</a> );</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( -ppen.<a class="code" href="structstat__mod.html#aedeca4241e12b9b4171454522d162baa">perception</a> );</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">if</span>( ppen.<a class="code" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> &gt; 0 ) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your pain distracts you!&quot;</span> ), <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( ppen.<a class="code" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> ) );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// Radiation</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a>, 1_turns * <a class="code" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>() );</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="comment">// Morale</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> = <a class="code" href="classCharacter.html#a81a81cee431c657465e6ab54af345eaf">get_morale_level</a>();</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a>, 1_turns * <a class="code" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> );</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a>, 1_turns * -<a class="code" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> );</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// Stimulants</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a>, 1_turns * current_stim );</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a>, 1_turns * -current_stim );</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a> ) ) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>, 1_turns * ( current_stim - 60 ) );</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>, 1_turns * ( current_stim - 30 ) );</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// Starvation</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> bmi = <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span>( bmi &lt; <a class="code" href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a> ) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> str_penalty = <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( ( 1.0f - ( <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() /</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                                              <a class="code" href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a> ) ) * <a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> );</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dexint_penalty = <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( ( <a class="code" href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a> - bmi ) * 3.0f );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re weak from hunger.&quot;</span> ),</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( ( <a class="code" href="classCharacter.html#a8824c91d628b74c695d338d71b3efa44">get_starvation</a>() + 300 ) / 1000 ) );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( -1 * str_penalty );</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -1 * dexint_penalty );</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( -1 * dexint_penalty );</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// Thirst</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt;= 200 ) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="comment">// We die at 1200</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dex_mod = -<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() / 200;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re weak from thirst.&quot;</span> ), <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( -dex_mod ) );</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( -<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() / 200 );</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( dex_mod );</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <a class="code" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( -<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() / 200 );</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <a class="code" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( -<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() / 200 );</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">get_sleep_deprivation</a>() &gt;= <a class="code" href="character_8h.html#add2c3c4e579b70ff498c9d0959488e18add80d2b76b090fb82d4fcf7199419419">SLEEP_DEPRIVATION_HARMLESS</a> ) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        set_fake_effect_dur( <a class="code" href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a>, 1_turns * <a class="code" href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">get_sleep_deprivation</a>() );</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a> ) ) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a> );</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// Dodge-related effects</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( <a class="code" href="classCharacter.html#aba0dd3cd625129fd3792d9cf10bf5f77">mabuff_dodge_bonus</a>() );</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// Whiskers don&#39;t work so well if they&#39;re covered</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#a327a42f3afe42f0ea55db6613a8e7d4d">natural_attack_restricted_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 1 );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a> ) &amp;&amp; !<a class="code" href="classCharacter.html#a327a42f3afe42f0ea55db6613a8e7d4d">natural_attack_restricted_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 2 );</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// depending on mounts size, attacks will hit the mount and use their dodge rating.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// if they hit the player, the player cannot dodge as effectively.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( -4 );</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">// Spider hair is basically a full-body set of whiskers, once you get the brain for it</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;bodypart_str_id, 5&gt; parts {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <a class="code" href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a>, <a class="code" href="bodypart_8cpp.html#aa26e675361f884c329258a89ecbdf0ec">body_part_arm_r</a>, <a class="code" href="bodypart_8cpp.html#a954b36de93f2258bf1d31e8f24494ad0">body_part_arm_l</a>,</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <a class="code" href="bodypart_8cpp.html#aa372ea85b9fd9dee0197b2c16362d7a9">body_part_leg_r</a>, <a class="code" href="bodypart_8cpp.html#a92caf587794873fa1f3cc4bace29993c">body_part_leg_l</a></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        };</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : parts ) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( +1 );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="comment">// Torso handled separately, bigger bonus</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <a class="code" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 4 );</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// Apply static martial arts buffs</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;ma_static_effects( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="comment">// Effects</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;maps : *<a class="code" href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">effects</a> ) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;i : maps.second ) {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;it = i.second;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordtype">bool</span> reduced = <a class="code" href="classCreature.html#a6b40041c12e2c414170aad5511878446">resists_effect</a>( it );</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <a class="code" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( it.<a class="code" href="classeffect.html#ae39c587cde27fc8512aee5491026006b">get_mod</a>( <span class="stringliteral">&quot;STR&quot;</span>, reduced ) );</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <a class="code" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( it.<a class="code" href="classeffect.html#ae39c587cde27fc8512aee5491026006b">get_mod</a>( <span class="stringliteral">&quot;DEX&quot;</span>, reduced ) );</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <a class="code" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( it.<a class="code" href="classeffect.html#ae39c587cde27fc8512aee5491026006b">get_mod</a>( <span class="stringliteral">&quot;PER&quot;</span>, reduced ) );</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( it.<a class="code" href="classeffect.html#ae39c587cde27fc8512aee5491026006b">get_mod</a>( <span class="stringliteral">&quot;INT&quot;</span>, reduced ) );</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="classCharacter.html#a997ede96b346ac8b05305c7b1c9b2e4d">Character::reset_stats</a>();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <a class="code" href="classCharacter.html#aa0d1b26c15ad4a52973774bf6a7610c1">recalc_sight_limits</a>();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">recalc_speed_bonus</a>();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">// based on  D&amp;D 5e level progression</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d"> 1126</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;int, 20&gt; <a class="code" href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d">xp_cutoffs</a> = { {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        300, 900, 2700, 6500, 14000,</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        23000, 34000, 48000, 64000, 85000,</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        100000, 120000, 140000, 165000, 195000,</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        225000, 265000, 305000, 355000, 405000</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;};</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="classavatar.html#a1a267dbb3a03790f915a738ac39c8f87"> 1134</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classavatar.html#a1a267dbb3a03790f915a738ac39c8f87">avatar::free_upgrade_points</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordtype">int</span> lvl = 0;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;xp_lvl : <a class="code" href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d">xp_cutoffs</a> ) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa1ab02d104dc242c371917a78d301f47">kill_xp</a> &gt;= xp_lvl ) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            lvl++;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">return</span> lvl - <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;}</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="classavatar.html#a0fa909642ff8c9c62682cc06ca5616d9"> 1147</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a0fa909642ff8c9c62682cc06ca5616d9">avatar::upgrade_stat_prompt</a>( <span class="keyword">const</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755">character_stat</a> &amp;stat )</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> free_points = <a class="code" href="classavatar.html#a1a267dbb3a03790f915a738ac39c8f87">free_upgrade_points</a>();</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span>( free_points &lt;= 0 ) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keyword">const</span> std::size_t lvl = <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a> + free_points;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">if</span>( lvl &gt;= <a class="code" href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d">xp_cutoffs</a>.size() ) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ve already reached maximum level.&quot;</span> ) );</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Needs %d more experience to gain next level.&quot;</span> ), <a class="code" href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d">xp_cutoffs</a>[lvl] - <a class="code" href="classCharacter.html#aa1ab02d104dc242c371917a78d301f47">kill_xp</a> );</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    std::string stat_string;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">switch</span>( stat ) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc">character_stat::STRENGTH</a>:</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            stat_string = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;strength&quot;</span> );</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203">character_stat::DEXTERITY</a>:</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            stat_string = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;dexterity&quot;</span> );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e">character_stat::INTELLIGENCE</a>:</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            stat_string = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;intelligence&quot;</span> );</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319">character_stat::PERCEPTION</a>:</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            stat_string = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;perception&quot;</span> );</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a308f546dec073d676fe48face3d09056">character_stat::DUMMY_STAT</a>:</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            stat_string = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;invalid stat&quot;</span> );</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to use invalid stat&quot;</span> );</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#a6cf703e3582ab38ec9eda6fd38d67328">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to raise %s?  %d points available.&quot;</span> ), stat_string,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                  free_points ) ) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">switch</span>( stat ) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc">character_stat::STRENGTH</a>:</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a>++;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a>++;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <a class="code" href="classCharacter.html#ae9de69bc0450c41078c9f5c86bcf837c">recalc_hp</a>();</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203">character_stat::DEXTERITY</a>:</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <a class="code" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a>++;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a>++;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e">character_stat::INTELLIGENCE</a>:</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <a class="code" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a>++;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a>++;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319">character_stat::PERCEPTION</a>:</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <a class="code" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a>++;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                <a class="code" href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">spent_upgrade_points</a>++;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a308f546dec073d676fe48face3d09056">character_stat::DUMMY_STAT</a>:</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to use invalid stat&quot;</span> );</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;}</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="classavatar.html#afec8778f4d75bec620dad82c69af0071"> 1210</a></span>&#160;<a class="code" href="classfaction.html">faction</a> *<a class="code" href="classavatar.html#afec8778f4d75bec620dad82c69af0071">avatar::get_faction</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="avatar_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a> );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="classavatar.html#a90125323cf9c7aa8e5e37c36da0cbae5"> 1215</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a90125323cf9c7aa8e5e37c36da0cbae5">avatar::is_ally</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p )<span class="keyword"> const</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() == <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() ) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp;guy = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( p );</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">return</span> guy.<a class="code" href="classnpc.html#a325fff8094f3e9ce2ba6970f969ada3f">is_ally</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="classavatar.html#aced1c67b31f5ed8287040348ab18ea8f"> 1224</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#aced1c67b31f5ed8287040348ab18ea8f">avatar::is_obeying</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p )<span class="keyword"> const</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() == <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() ) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp;guy = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( p );</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">return</span> guy.<a class="code" href="classnpc.html#ab295ee78874dc25faebb27d562a8e890">is_obeying</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"><a class="line" href="classavatar.html#aeb3d6148ca381978e3cc60d892846828"> 1233</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#aeb3d6148ca381978e3cc60d892846828">avatar::cant_see</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p )</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;{</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// calc based on recoil</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.has_value() ) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">aim_cache_dirty</a> ) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <a class="code" href="classavatar.html#afe83b617efab7d97dbf45384c0948633">rebuild_aim_cache</a>();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a3d788870d2bf36f540d9e333379bd39c">aim_cache</a>[p.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>][p.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>];</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"><a class="line" href="classavatar.html#afe83b617efab7d97dbf45384c0948633"> 1248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#afe83b617efab7d97dbf45384c0948633">avatar::rebuild_aim_cache</a>()</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;{</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordtype">double</span> pi = 2 * <a class="code" href="namespaceunits.html#aae47d0424d7fabfbe481a807e7697518">acos</a>( 0.0 );</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> local_last_target = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( <a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.value() );</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordtype">float</span> base_angle = atan2f( local_last_target.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - <a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>(),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                               local_last_target.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - <a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() );</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// move from -pi to pi, to 0 to 2pi for angles</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">if</span>( base_angle &lt; 0 ) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        base_angle = base_angle + 2 * pi;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// todo: this is not the correct weapon when aiming with fake items</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="classitem.html">item</a> *<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() ? &amp;*<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() : &amp;<a class="code" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a>();</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">// calc steadiness with player recoil (like they are taking a regular shot not careful etc.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">float</span> range = 3.0f - 2.8f * <a class="code" href="ranged_8cpp.html#a969d7fb0eb05d60c2c98eb568bce69f2">calc_steadiness</a>( *<span class="keyword">this</span>, *<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>, <a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.value(), <a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> );</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// pin between pi and negative pi</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordtype">float</span> upper_bound = base_angle + range;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordtype">float</span> lower_bound = base_angle - range;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// cap each within 0 - 2pi</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span>( upper_bound &gt; 2 * pi ) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        upper_bound = upper_bound - 2 * pi;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span>( lower_bound &lt; 0 ) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        lower_bound = lower_bound + 2 * pi;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> smx = 0; smx &lt; <a class="code" href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a>; ++smx ) {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> smy = 0; smy &lt; <a class="code" href="game__constants_8h.html#a2b6d307dfab13601267fc3c627192f4e">MAPSIZE_Y</a>; ++smy ) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <span class="keywordtype">float</span> current_angle = atan2f( smy - <a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>(), smx - <a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() );</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="comment">// move from -pi to pi, to 0 to 2pi for angles</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">if</span>( current_angle &lt; 0 ) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                current_angle = current_angle + 2 * pi;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <span class="comment">// some basic angle inclusion math, but also everything with 15 is still seen</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( smx, smy ), <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().z ), <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &lt; 15 ) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                <a class="code" href="classavatar.html#a3d788870d2bf36f540d9e333379bd39c">aim_cache</a>[smx][smy] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( lower_bound &gt; upper_bound ) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                <a class="code" href="classavatar.html#a3d788870d2bf36f540d9e333379bd39c">aim_cache</a>[smx][smy] = !( current_angle &gt;= lower_bound ||</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                                         current_angle &lt;= upper_bound );</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <a class="code" href="classavatar.html#a3d788870d2bf36f540d9e333379bd39c">aim_cache</a>[smx][smy] = !( current_angle &gt;= lower_bound &amp;&amp;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                                         current_angle &lt;= upper_bound );</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="comment">// set cache as no longer dirty</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">aim_cache_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;}</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3"> 1307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">avatar::set_movement_mode</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> &amp;new_mode )</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;{</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a176ce3209cdeec68a0bddd09dcb37513">can_switch_to</a>( new_mode ) ) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a459be1dc759e2674295b14585bf868d5">is_hauling</a>() &amp;&amp; new_mode-&gt;<a class="code" href="classmove__mode.html#ade822da07471656f7a2949dd16aa90e2">stop_hauling</a>() ) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            <a class="code" href="classCharacter.html#af41b2402ff6f402c399454156f152ef2">stop_hauling</a>();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( new_mode-&gt;<a class="code" href="classmove__mode.html#a55562ed424864e229a6f3d91988cc67d">change_message</a>( <span class="keyword">true</span>, <a class="code" href="classCharacter.html#aef5c50fd97b52deedba39807cf2ba5d2">get_steed_type</a>() ) );</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <a class="code" href="classmove__mode.html">move_mode</a> = new_mode;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="comment">// Enchantments based on move modes can stack inappropriately without a recalc here</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <a class="code" href="classCharacter.html#aa6396870f289f9c3b1dc4ea91f7a65f0">recalculate_enchantment_cache</a>();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment">// crouching affects visibility</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a4fb2eb743dcaef576cea6790d17aa32e">set_seen_cache_dirty</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().z );</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( new_mode-&gt;<a class="code" href="classmove__mode.html#a55562ed424864e229a6f3d91988cc67d">change_message</a>( <span class="keyword">false</span>, <a class="code" href="classCharacter.html#aef5c50fd97b52deedba39807cf2ba5d2">get_steed_type</a>() ) );</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;}</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"><a class="line" href="classavatar.html#ab9f3bf2c2864aaefbc62e22f082ff000"> 1325</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ab9f3bf2c2864aaefbc62e22f082ff000">avatar::toggle_run_mode</a>()</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;{</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa8ca0aff57b3786855a03205a810d76c">is_running</a>() ) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a> );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a9793d68ab3c4775ab78fc24e93b97a6e">move_mode_run</a> );</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"><a class="line" href="classavatar.html#ab10e5fb6060bc9dd059974b366103d6d"> 1334</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ab10e5fb6060bc9dd059974b366103d6d">avatar::toggle_crouch_mode</a>()</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;{</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a18ff0119f4fe89b2234275f1fc019106">is_crouching</a>() ) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a> );</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#ad371690d1256c38ada780add49e8b23e">move_mode_crouch</a> );</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="classavatar.html#ac4c2acc8936573d60bb74d309654dd28"> 1343</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ac4c2acc8936573d60bb74d309654dd28">avatar::toggle_prone_mode</a>()</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;{</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ac6f590f28f979103633d198e32524c06">is_prone</a>() ) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a> );</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a> );</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;}</div>
<div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="classavatar.html#a69c6abbd56c85f3aa8ff275908c0aeba"> 1351</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a69c6abbd56c85f3aa8ff275908c0aeba">avatar::activate_crouch_mode</a>()</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;{</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a18ff0119f4fe89b2234275f1fc019106">is_crouching</a>() ) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#ad371690d1256c38ada780add49e8b23e">move_mode_crouch</a> );</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;}</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"><a class="line" href="classavatar.html#afe96b5b38706039d754e6d9e052217bb"> 1358</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#afe96b5b38706039d754e6d9e052217bb">avatar::reset_move_mode</a>()</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;{</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#aaa743c562ea4b49c7aebc3ebf1298de4">is_walking</a>() ) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( <a class="code" href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a> );</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;}</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="classavatar.html#a1e7d92dd18560909f7ca36154ba7d5ea"> 1365</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a1e7d92dd18560909f7ca36154ba7d5ea">avatar::cycle_move_mode</a>()</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;{</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> next = <a class="code" href="classCharacter.html#a0e6803120e93851046bf12640c35ada2">current_movement_mode</a>()-&gt;<a class="code" href="classmove__mode.html#a36c26d06642756fbd8c553c0838882c4">cycle</a>();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( next );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">// if a movemode is disabled then just cycle to the next one</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a24acb67f566e6b53a346a2bac61f3d09">movement_mode_is</a>( next ) ) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( next-&gt;<a class="code" href="classmove__mode.html#a36c26d06642756fbd8c553c0838882c4">cycle</a>() );</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="classavatar.html#a6f24a1b5b15acba20c986345f0294b6d"> 1375</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a6f24a1b5b15acba20c986345f0294b6d">avatar::cycle_move_mode_reverse</a>()</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;{</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">move_mode_id</a> prev = <a class="code" href="classCharacter.html#a0e6803120e93851046bf12640c35ada2">current_movement_mode</a>()-&gt;<a class="code" href="classmove__mode.html#a8007e5b9f293d55925ce95654571a837">cycle_reverse</a>();</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( prev );</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="comment">// if a movemode is disabled then just cycle to the previous one</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a24acb67f566e6b53a346a2bac61f3d09">movement_mode_is</a>( prev ) ) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">set_movement_mode</a>( prev-&gt;<a class="code" href="classmove__mode.html#a8007e5b9f293d55925ce95654571a837">cycle_reverse</a>() );</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"><a class="line" href="classavatar.html#a1ad59a984ed559e64375bea3766105db"> 1385</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">avatar::wield</a>( <a class="code" href="classitem__location.html">item_location</a> target )</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;{</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">wield</a>( *target, target.<a class="code" href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">obtain_cost</a>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;}</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="classavatar.html#a994c28bd40ea7a03fe5aa0e3b0efcb1c"> 1390</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">avatar::wield</a>( <a class="code" href="classitem.html">item</a> &amp;target )</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;{</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="classCharacter.html#afdec750ba898d61951dea20d9d01d885">invalidate_inventory_validity_cache</a>();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="classCharacter.html#a7682e1f03ef37975c56f244d7e232692">invalidate_leak_level_cache</a>();</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">wield</a>( target,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                  <a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( target, <span class="keyword">true</span>,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                                      <a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( target ) ? <a class="code" href="game__constants_8h.html#aa5931cb2f162c829bae20f0df39ae014">INVENTORY_HANDLING_PENALTY</a> / 2 :</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                                      <a class="code" href="game__constants_8h.html#aa5931cb2f162c829bae20f0df39ae014">INVENTORY_HANDLING_PENALTY</a> ) );</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;}</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"><a class="line" href="classavatar.html#a30b8106cc28fc8ae481f4c7306ece1e1"> 1400</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a1ad59a984ed559e64375bea3766105db">avatar::wield</a>( <a class="code" href="classitem.html">item</a> &amp;target, <span class="keyword">const</span> <span class="keywordtype">int</span> obtain_cost )</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;{</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">is_wielding</a>( target ) ) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> &amp;&amp; <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>-&gt;<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( target ) ) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to put the bag away before trying to wield something from it.&quot;</span> ) );</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a28e314b50dae2c237a0675ed748aaf1d">can_wield</a>( target ).success() ) {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordtype">bool</span> combine_stacks = <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> &amp;&amp; target.<a class="code" href="classitem.html#ab8b0e2273c6555d01adbe242697940ab">can_combine</a>( *<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span>( !combine_stacks &amp;&amp; !<a class="code" href="classCharacter.html#a5140a7e16506aaabd28cf36c287b7619">unwield</a>() ) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <a class="code" href="classCharacter.html#a28028d965c0eaed38c5e132f52bf41cf">cached_info</a>.erase( <span class="stringliteral">&quot;weapon_value&quot;</span> );</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">if</span>( target.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// Wielding from inventory is relatively slow and does not improve with increasing weapon skill.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// Worn items (including guns with shoulder straps) are faster but still slower</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// than a skilled player with a holster.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="comment">// There is an additional penalty when wielding items from the inventory whilst currently grabbed.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a> = <a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( target );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mv = obtain_cost;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a> ) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        target.<a class="code" href="classitem.html#a8673667a3d9507e9b7c66be499e51d80">on_takeoff</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aff83dd93cc5849c8a08f3215878490bc">debugmode::DF_AVATAR</a>, <span class="stringliteral">&quot;wielding took %d moves&quot;</span>, mv );</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -mv );</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( target ) ) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <a class="code" href="classitem.html">item</a> removed = <a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( &amp;target );</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="keywordflow">if</span>( combine_stacks ) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>-&gt;<a class="code" href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">combine</a>( removed );</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <a class="code" href="classCharacter.html#a0a5e680935c5765ed1432837e071ed54">set_wielded_item</a>( removed );</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span>( combine_stacks ) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>-&gt;<a class="code" href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">combine</a>( target );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <a class="code" href="classCharacter.html#a0a5e680935c5765ed1432837e071ed54">set_wielded_item</a>( target );</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="comment">// set_wielded_item invalidates the weapon item_location, so get it again</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <a class="code" href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">last_item</a> = <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>-&gt;<a class="code" href="classitem.html#a9fbebe808fb497b219858f7a61fa8419">on_wield</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <a class="code" href="classcata_1_1event.html">cata::event</a> e = cata::event::make&lt;event_type::character_wields_item&gt;( <a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), <a class="code" href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">last_item</a> );</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#a29fab483aed46dcf2697e6e504e685dc">send_with_talker</a>( <span class="keyword">this</span>, &amp;<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>, e );</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;update_invlet( *<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> );</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;update_cache_with_item( *<a class="code" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> );</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="classavatar.html#a31678fd6e26392623dbbf6a5c6564502"> 1472</a></span>&#160;<a class="code" href="classitem_1_1reload__option.html">item::reload_option</a> <a class="code" href="classavatar.html#a31678fd6e26392623dbbf6a5c6564502">avatar::select_ammo</a>( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;base, <span class="keywordtype">bool</span> <a class="code" href="namespacePickup.html#a5acb24d81cad5d2200e4c573b30398b2a22a3e048b0a073f8509421d9adfa541b">prompt</a>,</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordtype">bool</span> empty )</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;{</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">if</span>( !base ) {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem_1_1reload__option.html">item::reload_option</a>();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacegame__menus_1_1inv.html#a1c93571a600078f88f78d95ada77fdd7">game_menus::inv::select_ammo</a>( *<span class="keyword">this</span>, base, <a class="code" href="namespacePickup.html#a5acb24d81cad5d2200e4c573b30398b2a22a3e048b0a073f8509421d9adfa541b">prompt</a>, empty );</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;}</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="classavatar.html#a547d7adf1e902528ceced42259eab48d"> 1482</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">avatar::invoke_item</a>( <a class="code" href="classitem.html">item</a> *used, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pt, <span class="keywordtype">int</span> pre_obtain_moves )</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;{</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keyword">const</span> std::map&lt;std::string, use_function&gt; &amp;use_methods = used-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_methods = use_methods.size();</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_relic = used-&gt;<a class="code" href="classitem.html#acf89390a6191405cc59bc902cb3f1609">has_relic_activation</a>();</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span>( use_methods.empty() &amp;&amp; !has_relic ) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num_methods == 1 &amp;&amp; !has_relic ) {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">invoke_item</a>( used, use_methods.begin()-&gt;first, pt, pre_obtain_moves );</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num_methods == 0 &amp;&amp; has_relic ) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <span class="keywordflow">return</span> used-&gt;<a class="code" href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">use_relic</a>( *<span class="keyword">this</span>, pt );</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="classuilist.html">uilist</a> umenu;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    umenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with your %s?&quot;</span> ), used-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    umenu.<a class="code" href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">hilight_disabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : use_methods ) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> res = e.second.can_call( *<span class="keyword">this</span>, *used, pt );</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        umenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, res.success(), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, e.second.get_name(),</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                             res.str() );</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">if</span>( has_relic ) {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        umenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use relic&quot;</span> ),</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Activate this relic.&quot;</span> ) );</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    umenu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = std::any_of( umenu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.begin(),</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    umenu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.end(), []( <span class="keyword">const</span> <a class="code" href="structuilist__entry.html">uilist_entry</a> &amp; elem ) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        return !elem.desc.empty();</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    } );</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    umenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordtype">int</span> choice = umenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// Use the relic</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">if</span>( choice == num_methods ) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">return</span> used-&gt;<a class="code" href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">use_relic</a>( *<span class="keyword">this</span>, pt );</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 || choice &gt;= num_methods ) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keyword">const</span> std::string &amp;method = std::next( use_methods.begin(), choice )-&gt;first;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">invoke_item</a>( used, method, pt, pre_obtain_moves );</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;}</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="classavatar.html#a56d74b6f3a5a47f4011ddaeb1fa3bf4e"> 1532</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">avatar::invoke_item</a>( <a class="code" href="classitem.html">item</a> *used )</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">Character::invoke_item</a>( used );</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"><a class="line" href="classavatar.html#a48bb24e9082ac59c1bdbbed43877d97d"> 1537</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">avatar::invoke_item</a>( <a class="code" href="classitem.html">item</a> *used, <span class="keyword">const</span> std::string &amp;method, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pt,</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                          <span class="keywordtype">int</span> pre_obtain_moves )</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span>( pre_obtain_moves == -1 ) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        pre_obtain_moves = <a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>();</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">Character::invoke_item</a>( used, method, pt, pre_obtain_moves );</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"><a class="line" href="classavatar.html#aef24aa722884fea12ae9fe0db33580da"> 1546</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">avatar::invoke_item</a>( <a class="code" href="classitem.html">item</a> *used, <span class="keyword">const</span> std::string &amp;method )</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;{</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">Character::invoke_item</a>( used, method );</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="classavatar.html#a4c07a102dc6e18b31eea927c5297bf01"> 1551</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a4c07a102dc6e18b31eea927c5297bf01">avatar::update_cardio_acc</a>()</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;{</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// This function should be called once every 24 hours,</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// before the front of the calorie diary is reset for the next day.</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">// Cardio goal is 1000 times the ratio of kcals spent versus bmr,</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">// giving a default of 1000 for no extra activity.</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> bmr = <a class="code" href="classCharacter.html#a2fd91641a2b7d9449712891d16e347dc">get_bmr</a>();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span>( bmr == 0 ) {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <a class="code" href="classCharacter.html#aed1aceefe3c2a32b2bd82e5d439da471">set_cardio_acc</a>( <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( <a class="code" href="classCharacter.html#a74ea39bd5cfd3989342daf4f6c5fa2ea">get_cardio_acc</a>(), <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>(), <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>() * 3 ) );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> last_24h_kcal = <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().spent;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> cardio_goal = ( last_24h_kcal * <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>() ) / bmr;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">// If cardio accumulator is below cardio goal, gain some cardio.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="comment">// Or, if cardio accumulator is above cardio goal, lose some cardio.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> cardio_accum = <a class="code" href="classCharacter.html#a74ea39bd5cfd3989342daf4f6c5fa2ea">get_cardio_acc</a>();</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordtype">int</span> adjustment = 0;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span>( cardio_accum &gt; cardio_goal ) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        adjustment = -<a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>( cardio_accum - cardio_goal );</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cardio_goal &gt; cardio_accum ) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        adjustment = <a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>( cardio_goal - cardio_accum );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="comment">// Set a large sane upper limit to cardio fitness. This could be done</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="comment">// asymptotically instead of as a sharp cutoff, but the gradual growth</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// rate of cardio_acc should accomplish that naturally.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="classCharacter.html#aed1aceefe3c2a32b2bd82e5d439da471">set_cardio_acc</a>( <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( cardio_accum + adjustment, <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>(),</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                           <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>() * 3 ) );</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;}</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"><a class="line" href="classavatar.html#a0698f21d33da87261681237fef7b5002"> 1584</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a0698f21d33da87261681237fef7b5002">avatar::advance_daily_calories</a>()</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;{</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.emplace_front( );</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.size() &gt; 30 ) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.pop_back();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"><a class="line" href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82"> 1592</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82">avatar::get_daily_spent_kcal</a>( <span class="keywordtype">bool</span> yesterday )<span class="keyword"> const</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">if</span>( yesterday ) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.size() &lt; 2 ) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        std::list&lt;avatar::daily_calories&gt; copy = <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        copy.pop_front();</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordflow">return</span> copy.front().spent;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().spent;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;}</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9"> 1605</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">avatar::get_daily_ingested_kcal</a>( <span class="keywordtype">bool</span> yesterday )<span class="keyword"> const</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">if</span>( yesterday ) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.size() &lt; 2 ) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        std::list&lt;avatar::daily_calories&gt; copy = <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        copy.pop_front();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keywordflow">return</span> copy.front().ingested;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().ingested;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;}</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"><a class="line" href="classavatar.html#afec92019a1c7cdbe52dc959faccdf1ba"> 1618</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#afec92019a1c7cdbe52dc959faccdf1ba">avatar::add_ingested_kcal</a>( <span class="keywordtype">int</span> kcal )</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;{</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().ingested += kcal;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;}</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"><a class="line" href="classavatar.html#a16d5dc64ec8887ca6338949299eb69c6"> 1623</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a16d5dc64ec8887ca6338949299eb69c6">avatar::add_spent_calories</a>( <span class="keywordtype">int</span> cal )</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;{</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().spent += cal;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;}</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"><a class="line" href="classavatar.html#af9dff5fc4b44f847b051bd1c0cd16579"> 1628</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#af9dff5fc4b44f847b051bd1c0cd16579">avatar::add_gained_calories</a>( <span class="keywordtype">int</span> cal )</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;{</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().gained += cal;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"><a class="line" href="classavatar.html#a95a9eee8456c42808a666ad2a72b6a78"> 1633</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a95a9eee8456c42808a666ad2a72b6a78">avatar::log_activity_level</a>( <span class="keywordtype">float</span> level )</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;{</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a>.front().activity_levels[level]++;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160; </div>
<div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="structavatar_1_1daily__calories.html#a56a8fac04714478c4b948b13d68bdb7d"> 1638</a></span>&#160;<a class="code" href="structavatar_1_1daily__calories.html#a56a8fac04714478c4b948b13d68bdb7d">avatar::daily_calories::daily_calories</a>()</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;{</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#a2ff11848079530402510dded26ad7b71">NO_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#a3eff0a66c45e8fc9175f3e424c140950">LIGHT_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#ab4f6aee0718ae4c2d33e35bcccc19eb3">MODERATE_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#af493e8618b57ed45c296eed8ab6e730a">ACTIVE_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">activity_levels</a>.emplace( <a class="code" href="game__constants_8h.html#acb2d9f7a196b657e32a4e71733a89e5c">EXTRA_EXERCISE</a>, 0 );</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="structavatar_1_1daily__calories.html#a7c6527984c22a3341377eb7a5b1d87de"> 1648</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structavatar_1_1daily__calories.html#a7c6527984c22a3341377eb7a5b1d87de">avatar::daily_calories::serialize</a>( <a class="code" href="classJsonOut.html">JsonOut</a> &amp;json )<span class="keyword"> const</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    json.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;spent&quot;</span>, spent );</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;gained&quot;</span>, gained );</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;ingested&quot;</span>, ingested );</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    save_activity( json );</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    json.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;}</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="structavatar_1_1daily__calories.html#a494a539e7ac3608af5adb5d5104e8a51"> 1660</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structavatar_1_1daily__calories.html#a494a539e7ac3608af5adb5d5104e8a51">avatar::daily_calories::deserialize</a>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> &amp;data )</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;{</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;spent&quot;</span>, spent );</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;gained&quot;</span>, gained );</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;ingested&quot;</span>, ingested );</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordflow">if</span>( data.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( <span class="stringliteral">&quot;activity&quot;</span> ) ) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        read_activity( data );</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;}</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"><a class="line" href="structavatar_1_1daily__calories.html#a153c5ecfdc12f8a667b87b04c413f89e"> 1670</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structavatar_1_1daily__calories.html#a153c5ecfdc12f8a667b87b04c413f89e">avatar::daily_calories::save_activity</a>( <a class="code" href="classJsonOut.html">JsonOut</a> &amp;json )<span class="keyword"> const</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;activity&quot;</span> );</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    json.<a class="code" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const float, int&gt; &amp;level : activity_levels ) {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        <span class="keywordflow">if</span>( level.second &gt; 0 ) {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            json.<a class="code" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            json.<a class="code" href="classJsonOut.html#a4b8c8e50e3be57e737ae971ecf2c3fd5">write</a>( level.first );</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            json.<a class="code" href="classJsonOut.html#a4b8c8e50e3be57e737ae971ecf2c3fd5">write</a>( level.second );</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            json.<a class="code" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    json.<a class="code" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;}</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"><a class="line" href="structavatar_1_1daily__calories.html#ad79593d05f92e31b1b0039c9c427667a"> 1685</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structavatar_1_1daily__calories.html#ad79593d05f92e31b1b0039c9c427667a">avatar::daily_calories::read_activity</a>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> &amp;data )</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;{</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">if</span>( data.<a class="code" href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">has_array</a>( <span class="stringliteral">&quot;activity&quot;</span> ) ) {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordtype">double</span> act_level;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonArray.html">JsonArray</a> ja : data.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;activity&quot;</span> ) ) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            act_level = ja.next_float();</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            activity_levels[ act_level ] = ja.next_int();</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="comment">// Fallback to legacy format for backward compatibility</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> jo = data.<a class="code" href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">get_object</a>( <span class="stringliteral">&quot;activity&quot;</span> );</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, float&gt; &amp;<a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a> : <a class="code" href="game__constants_8h.html#ae10b2c094962496f0ee92691af5472be">activity_levels_map</a> ) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordtype">int</span> times;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>.first, times ) ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        activity_levels.at( <a class="code" href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">member</a>.second ) = times;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;}</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"><a class="line" href="classavatar.html#ace1eb09441d228faf4c1dad4edfeee4a"> 1706</a></span>&#160;std::string <a class="code" href="classavatar.html#ace1eb09441d228faf4c1dad4edfeee4a">avatar::total_daily_calories_string</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keyword">const</span> std::string header_string =</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;       Minutes at each exercise level                  Calories per day&quot;</span>,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                  <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> ) + <span class="stringliteral">&quot;\n&quot;</span> +</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;  Day  Sleep None Light Moderate Brisk Active Extra    Gained  Spent  Total&quot;</span>,</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                  <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keyword">const</span> std::string format_string =</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="stringliteral">&quot; %4d  %4d   %4d  %4d     %4d  %4d   %4d  %4d    %6d %6d&quot;</span>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> no_ex_thresh = ( <a class="code" href="game__constants_8h.html#a81cb9f7f10147d30b078e70a2d1399ec">SLEEP_EXERCISE</a> + <a class="code" href="game__constants_8h.html#a2ff11848079530402510dded26ad7b71">NO_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> light_ex_thresh = ( <a class="code" href="game__constants_8h.html#a2ff11848079530402510dded26ad7b71">NO_EXERCISE</a> + <a class="code" href="game__constants_8h.html#a3eff0a66c45e8fc9175f3e424c140950">LIGHT_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> mod_ex_thresh = ( <a class="code" href="game__constants_8h.html#a3eff0a66c45e8fc9175f3e424c140950">LIGHT_EXERCISE</a> + <a class="code" href="game__constants_8h.html#ab4f6aee0718ae4c2d33e35bcccc19eb3">MODERATE_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> brisk_ex_thresh = ( <a class="code" href="game__constants_8h.html#ab4f6aee0718ae4c2d33e35bcccc19eb3">MODERATE_EXERCISE</a> + <a class="code" href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> active_ex_thresh = ( <a class="code" href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a> + <a class="code" href="game__constants_8h.html#af493e8618b57ed45c296eed8ab6e730a">ACTIVE_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> extra_ex_thresh = ( <a class="code" href="game__constants_8h.html#af493e8618b57ed45c296eed8ab6e730a">ACTIVE_EXERCISE</a> + <a class="code" href="game__constants_8h.html#acb2d9f7a196b657e32a4e71733a89e5c">EXTRA_EXERCISE</a> ) / 2.0f;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160; </div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = header_string;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="comment">// Start with today in the first row, day number from start of the Cataclysm</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordtype">int</span> today = day_of_season&lt;int&gt;( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) + 1;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="keywordtype">int</span> day_offset = 0;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structavatar_1_1daily__calories.html">daily_calories</a> &amp;<a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a> : <a class="code" href="classavatar.html#af36035af0be319801dade07750ebc8e1">calorie_diary</a> ) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <span class="comment">// Yes, this is clunky.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="comment">// Perhaps it should be done in log_activity_level? But that&#39;s called a lot more often.</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordtype">int</span> sleep_exercise = 0;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <span class="keywordtype">int</span> no_exercise = 0;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordtype">int</span> light_exercise = 0;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordtype">int</span> moderate_exercise = 0;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="keywordtype">int</span> brisk_exercise = 0;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordtype">int</span> active_exercise = 0;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordtype">int</span> extra_exercise = 0;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const float, int&gt; &amp;level : <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.activity_levels ) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keywordflow">if</span>( level.second &gt; 0 ) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <span class="keywordflow">if</span>( level.first &lt; no_ex_thresh ) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                    sleep_exercise += level.second;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( level.first &lt; light_ex_thresh ) {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                    no_exercise += level.second;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( level.first &lt; mod_ex_thresh ) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                    light_exercise += level.second;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( level.first &lt; brisk_ex_thresh ) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    moderate_exercise += level.second;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( level.first &lt; active_ex_thresh ) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                    brisk_exercise += level.second;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( level.first &lt; extra_ex_thresh ) {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                    active_exercise += level.second;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                    extra_exercise += level.second;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        std::string row_data = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( format_string, today + day_offset--,</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                                              5 * sleep_exercise,</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                                              5 * no_exercise,</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                                              5 * light_exercise,</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                                              5 * moderate_exercise,</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                                              5 * brisk_exercise,</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                                              5 * active_exercise,</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                                              5 * extra_exercise,</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                                              <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.gained, <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.spent );</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="comment">// Alternate gray and white text for row data</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">if</span>( day_offset % 2 == 0 ) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( row_data, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> );</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( row_data, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> );</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="comment">// Color-code each day&#39;s net calories</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        std::string total_kcals = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; %6d&quot;</span>, <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() );</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &gt; 4000 ) {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a> );</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &gt; 2000 ) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a> );</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &gt; 250 ) {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &lt; -4000 ) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> );</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &lt; -2000 ) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">day</a>.total() &lt; -250 ) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a> );</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( total_kcals, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> );</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379"> 1795</a></span>&#160;std::unique_ptr&lt;talker&gt; <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( <a class="code" href="classavatar.html">avatar</a> &amp;me )</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;{</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;talker_avatar&gt;( &amp;me );</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;}</div>
<div class="line"><a name="l01799"></a><span class="lineno"><a class="line" href="avatar_8cpp.html#af6e9ed880ccc64ccd65d34ea84b6bede"> 1799</a></span>&#160;std::unique_ptr&lt;talker&gt; <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( <a class="code" href="classavatar.html">avatar</a> *me )</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;{</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;talker_avatar&gt;( me );</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;}</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"><a class="line" href="classavatar.html#af36fcea90558019acce120be1fd9eb76"> 1804</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#af36fcea90558019acce120be1fd9eb76">avatar::randomize_hobbies</a>()</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;{</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="classCharacter.html#a3f66f89a3ff5963c0052d0f0f6946262">hobbies</a>.clear();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    std::vector&lt;profession_id&gt; choices = <a class="code" href="game_8cpp.html#ad0b0d2173cd53cfd3e9c5a89d5335766">get_scenario</a>()-&gt;<a class="code" href="classscenario.html#a1850973c9349ebe8b113a0b6d869bf67">permitted_hobbies</a>();</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    choices.erase( std::remove_if( choices.begin(), choices.end(),</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;profession&gt;</a> &amp;hobby ) {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        return !prof-&gt;allows_hobby( hobby );</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    } ), choices.end() );</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span>( choices.empty() ) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Why would you blacklist all hobbies?&quot;</span> );</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        choices = <a class="code" href="classprofession.html#ac5ca2dd614fb55df63b5ebd496b1fc93">profession::get_all_hobbies</a>();</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    };</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceom__direction.html#a0fdbb3cc8e25454026b9ab57f9b91c69">random</a> = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 5 );</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceom__direction.html#a0fdbb3cc8e25454026b9ab57f9b91c69">random</a> &gt;= 1 ) {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <a class="code" href="classavatar.html#adabb0f86710fd8c6505f7a902af58226">add_random_hobby</a>( choices );</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceom__direction.html#a0fdbb3cc8e25454026b9ab57f9b91c69">random</a> &gt;= 3 ) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <a class="code" href="classavatar.html#adabb0f86710fd8c6505f7a902af58226">add_random_hobby</a>( choices );</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceom__direction.html#a0fdbb3cc8e25454026b9ab57f9b91c69">random</a> &gt;= 5 ) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="classavatar.html#adabb0f86710fd8c6505f7a902af58226">add_random_hobby</a>( choices );</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;}</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="classavatar.html#adabb0f86710fd8c6505f7a902af58226"> 1830</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#adabb0f86710fd8c6505f7a902af58226">avatar::add_random_hobby</a>( std::vector&lt;profession_id&gt; &amp;choices )</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;{</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">profession_id</a> hobby = <a class="code" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( choices );</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="classCharacter.html#a3f66f89a3ff5963c0052d0f0f6946262">hobbies</a>.insert( &amp;*hobby );</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="comment">// Add or remove traits from hobby</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrait__and__var.html">trait_and_var</a> &amp;cur : hobby-&gt;<a class="code" href="classprofession.html#a8a7ae097efc3ac0e1179aacc3de7574e">get_locked_traits</a>() ) {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="classCharacter.html#a10389288ada57f4431eab188ca109528">toggle_trait</a>( cur.trait );</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;}</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"><a class="line" href="classavatar.html#aa3958dc898057ef6fd284fa68a6d0f1e"> 1841</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#aa3958dc898057ef6fd284fa68a6d0f1e">avatar::reassign_item</a>( <a class="code" href="classitem.html">item</a> &amp;it, <span class="keywordtype">int</span> invlet )</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;{</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordtype">bool</span> remove_old = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">if</span>( invlet ) {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <a class="code" href="classitem.html">item</a> *prev = <a class="code" href="classCharacter.html#a72814cbd916b863b7b20b43345ef2329">invlet_to_item</a>( invlet );</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">if</span>( prev != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            remove_old = it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() != prev-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;reassign_item( *prev, it.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a>, remove_old );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        }</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    }</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">if</span>( !invlet || <a class="code" href="inventory_8h.html#a30cdf5c616c63b894825e5e92a5b1e5c">inv_chars</a>.<a class="code" href="classinvlet__wrapper.html#a7c0b7eaf67cf02bae041ada17aa1f71d">valid</a>( invlet ) ) {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;assigned_invlet.find( it.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> );</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordtype">bool</span> found = iter != <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;assigned_invlet.end();</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keywordflow">if</span>( found ) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;assigned_invlet.erase( iter );</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">if</span>( invlet &amp;&amp; ( !found || it.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> != invlet ) ) {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;assigned_invlet[invlet] = it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;reassign_item( it, invlet, remove_old );</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    }</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;}</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"><a class="line" href="classavatar.html#a150a5b377ce94ed8828a31850ac5165b"> 1865</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a150a5b377ce94ed8828a31850ac5165b">avatar::add_pain_msg</a>( <span class="keywordtype">int</span> val, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="avatar_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> ) ) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;bp_null&quot;</span> ) ) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <span class="keywordflow">if</span>( val &gt; 20 ) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your body is wracked with excruciating pain!&quot;</span> ) );</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 10 ) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your body is wracked with terrible pain!&quot;</span> ) );</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your body is wracked with pain!&quot;</span> ) );</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 1 ) {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your body pains you!&quot;</span> ) );</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your body aches.&quot;</span> ) );</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">if</span>( val &gt; 20 ) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is wracked with excruciating pain!&quot;</span> ),</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                               <a class="code" href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 10 ) {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is wracked with terrible pain!&quot;</span> ),</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                               <a class="code" href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is wracked with pain!&quot;</span> ),</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                               <a class="code" href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 1 ) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s pains you!&quot;</span> ),</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                               <a class="code" href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s aches.&quot;</span> ),</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                               <a class="code" href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;}</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"><a class="line" href="classavatar.html#a431f0d0d9043f9ab57bf092e436b2a52"> 1902</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a431f0d0d9043f9ab57bf092e436b2a52">avatar::wield_contents</a>( <a class="code" href="classitem.html">item</a> &amp;container, <a class="code" href="classitem.html">item</a> *internal_item, <span class="keywordtype">bool</span> penalties, <span class="keywordtype">int</span> base_cost )</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;{</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="comment">// if index not specified and container has multiple items then ask the player to choose one</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">if</span>( internal_item == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        std::vector&lt;std::string&gt; opts;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        std::list&lt;item *&gt; container_contents = container.<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>();</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        std::transform( container_contents.begin(), container_contents.end(),</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        std::back_inserter( opts ), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * elem ) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            return elem-&gt;display_name();</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        } );</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        <span class="keywordflow">if</span>( opts.size() &gt; 1 ) {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a> = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wield what?&quot;</span> ), opts );</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a> &lt; 0 ) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            internal_item = *std::next( container_contents.begin(), <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a> );</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            internal_item = container_contents.front();</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    }</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160; </div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a91d79990e2ed8aecde6ab040e75d6a4c">Character::wield_contents</a>( container, internal_item, penalties, base_cost );</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;}</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"><a class="line" href="classavatar.html#af0f0d2b403b5ba6cf29890dd04dabe12"> 1926</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#af0f0d2b403b5ba6cf29890dd04dabe12">avatar::try_to_sleep</a>( <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp;<a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> )</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;{</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtrap.html">trap</a> &amp;trap_at_pos = here.<a class="code" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> ter_at_pos = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">furn_id</a> furn_at_pos = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordtype">bool</span> plantsleep = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordtype">bool</span> fungaloid_cosplay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordtype">bool</span> websleep = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordtype">bool</span> webforce = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordtype">bool</span> websleeping = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordtype">bool</span> in_shell = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordtype">bool</span> watersleep = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a> ) ) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        plantsleep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keyword">const</span> std::unordered_set&lt;ter_str_id&gt; comfy_ters = { <a class="code" href="avatar_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a>, <a class="code" href="avatar_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a>, <a class="code" href="avatar_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a>, <a class="code" href="avatar_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a>, <a class="code" href="avatar_8cpp.html#added40875b98d3240b4ff7b208435270">ter_t_pit_shallow</a> };</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="keywordflow">if</span>( comfy_ters.find( ter_at_pos.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) != comfy_ters.end() &amp;&amp; !vp &amp;&amp;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            furn_at_pos == <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You relax as your roots embrace the soil.&quot;</span> ) );</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s impossible to sleep in this wheeled pot!&quot;</span> ) );</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( furn_at_pos != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The humans&#39; furniture blocks your roots.  You can&#39;t get comfortable.&quot;</span> ) );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// Floor problems</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your roots scrabble ineffectively at the unyielding surface.&quot;</span> ) );</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a> ) ) {</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        fungaloid_cosplay = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828">ter_furn_flag::TFLAG_FUNGUS</a>, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Our fibers meld with the ground beneath us.  The gills on our neck begin to seed the air with spores as our awareness fades.&quot;</span> ) );</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a> ) ) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        websleep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="comment">// Not sure how one would get Arachnid w/o web-making, but Just In Case</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a> ) &amp;&amp; ( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a> ) ||</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a> ) ) ) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        webforce = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">if</span>( websleep || webforce ) {</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordtype">int</span> web = here.<a class="code" href="classmap.html#a34f983a946812fa51de439bd68f6dc09">get_field_intensity</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="field__type_8cpp.html#acd17fbab1a93c90c8748a2b0777027fa">fd_web</a> );</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordflow">if</span>( !webforce ) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            <span class="comment">// At this point, it&#39;s kinda weird, but surprisingly comfy...</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            <span class="keywordflow">if</span>( web &gt;= 3 ) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;These thick webs support your weight, and are strangely comfortable…&quot;</span> ) );</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                websleeping = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( web &gt; 0 ) {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to sleep, but the webs get in the way.  You brush them aside.&quot;</span> ) );</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                here.<a class="code" href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">remove_field</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="field__type_8cpp.html#acd17fbab1a93c90c8748a2b0777027fa">fd_web</a> );</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            <span class="comment">// Here, you&#39;re just not comfortable outside a nice thick web.</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <span class="keywordflow">if</span>( web &gt;= 3 ) {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You relax into your web.&quot;</span> ) );</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                websleeping = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to sleep, but you feel exposed and your spinnerets keep twitching.&quot;</span> ) );</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Maybe a nice thick web would help you sleep.&quot;</span> ) );</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        }</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    }</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> ) || <a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="avatar_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a> ) ) {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="comment">// Your shell&#39;s interior is a comfortable place to sleep.</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        in_shell = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    }</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="avatar_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a> ) ) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a0a561860988a2692df47476d9a15511e">underwater</a> ) {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lay beneath the waves&#39; embrace, gazing up through the water&#39;s surface…&quot;</span> ) );</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            watersleep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">has_flag_ter</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a>, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You settle into the water and begin to drowse…&quot;</span> ) );</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            watersleep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        }</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    }</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keywordflow">if</span>( !plantsleep &amp;&amp; ( furn_at_pos.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#aeeb5fd98ea185b1d0c767f2bfb5e781d">comfort</a> &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#aaf1c149989ac933ff6b094384f4a5462a5da248ea6840aca1ae2b417b17982a89">comfort_level::neutral</a> ) ||</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                         ter_at_pos.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#aeeb5fd98ea185b1d0c767f2bfb5e781d">comfort</a> &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#aaf1c149989ac933ff6b094384f4a5462a5da248ea6840aca1ae2b417b17982a89">comfort_level::neutral</a> ) ||</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                         trap_at_pos.<a class="code" href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">comfort</a> &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#aaf1c149989ac933ff6b094384f4a5462a5da248ea6840aca1ae2b417b17982a89">comfort_level::neutral</a> ) ||</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                         in_shell || websleeping || watersleep ||</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                         vp.<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <span class="stringliteral">&quot;SEAT&quot;</span>, <span class="keyword">true</span> ) ||</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                         vp.<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <span class="stringliteral">&quot;BED&quot;</span>, <span class="keyword">true</span> ) ) ) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is a comfortable place to sleep.&quot;</span> ) );</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !plantsleep &amp;&amp; !fungaloid_cosplay &amp;&amp; !watersleep ) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">if</span>( !vp &amp;&amp; ter_at_pos != <a class="code" href="avatar_8cpp.html#af2540b2bf274cc61340154c538845226">ter_t_floor</a> ) {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( ter_at_pos.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">movecost</a> &lt;= 2 ?</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s a little hard to get to sleep on this %s.&quot;</span> ) :</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s hard to get to sleep on this %s.&quot;</span> ),</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                               ter_at_pos.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            <span class="keywordflow">if</span>( vp-&gt;<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea827ce264aff5ea40d24e0be152420ef4">VPFLAG_AISLE</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>(</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="comment">//~ %1$s: vehicle name, %2$s: vehicle part name</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s a little hard to get to sleep on this %2$s in %1$s.&quot;</span> ),</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                    vp-&gt;vehicle().disp_name(),</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                    vp-&gt;<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea827ce264aff5ea40d24e0be152420ef4">VPFLAG_AISLE</a>, <span class="keyword">true</span> )-&gt;part().name( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>(</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                    <span class="comment">//~ %1$s: vehicle name</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s hard to get to sleep in %1$s.&quot;</span> ),</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                    vp-&gt;vehicle().disp_name() );</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start trying to fall asleep.&quot;</span> ) );</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="avatar_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a> ) ) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        <a class="code" href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">bio_soporific_powered_at_last_sleep_check</a> = <a class="code" href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">has_power</a>();</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">bio_soporific_powered_at_last_sleep_check</a> ) {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <span class="comment">// The actual bonus is applied in sleep_spot( p ).</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your soporific inducer starts working its magic.&quot;</span> ) );</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            <a class="code" href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your soporific inducer doesn&#39;t have enough power to operate.&quot;</span> ) );</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classtry__sleep__activity__actor.html">try_sleep_activity_actor</a>( <a class="code" href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a> ) );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"><a class="line" href="classavatar.html#a3eda4b65d6ddd41bbbfd56c0c0078780"> 2049</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classavatar.html#a6cf703e3582ab38ec9eda6fd38d67328">avatar::query_yn</a>( <span class="keyword">const</span> std::string &amp;mes )<span class="keyword"> const</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">return ::query_yn</a>( mes );</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;}</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"><a class="line" href="classavatar.html#a8604832bf1612a4a61f959a2079e68b2"> 2054</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#a8604832bf1612a4a61f959a2079e68b2">avatar::set_location</a>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> &amp;loc )</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;{</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="classCreature.html#ac93f4ccc1bff76ada002c7e886c941ef">Creature::set_location</a>( loc );</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;}</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160; </div>
<div class="line"><a name="l02059"></a><span class="lineno"><a class="line" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb"> 2059</a></span>&#160;<a class="code" href="classnpc.html">npc</a> &amp;<a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">avatar::get_shadow_npc</a>()</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;{</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a> ) {</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a> = std::make_unique&lt;npc&gt;();</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        <a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a>-&gt;op_of_u.trust = 10;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a>-&gt;op_of_u.value = 10;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a>-&gt;set_attitude( <a class="code" href="npc_8h.html#a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d">NPCATT_FOLLOW</a> );</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">shadow_npc</a>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;}</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160; </div>
<div class="line"><a name="l02070"></a><span class="lineno"><a class="line" href="classavatar.html#ac92bea5372876bca04ef3c2a3a237c79"> 2070</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classavatar.html#ac92bea5372876bca04ef3c2a3a237c79">avatar::export_as_npc</a>( <span class="keyword">const</span> <a class="code" href="classcata__path.html">cata_path</a> &amp;path )</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;{</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="classCharacter.html#a89bae4bdcf077182255a45f8cebef788">swap_character</a>( <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>() );</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>().<a class="code" href="classnpc.html#a158166e9813730768c18c227a7cac30b">export_to</a>( path );</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="classCharacter.html#a89bae4bdcf077182255a45f8cebef788">swap_character</a>( <a class="code" href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">get_shadow_npc</a>() );</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;}</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"><a class="line" href="structmonster__visible__info.html#ada211b5c681b9298a04917edd5f274e1"> 2077</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structmonster__visible__info.html#ada211b5c681b9298a04917edd5f274e1">monster_visible_info::remove_npc</a>( <a class="code" href="classnpc.html">npc</a> *n )</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;{</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;t : unique_types ) {</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keyword">auto</span> it = std::find( t.begin(), t.end(), n );</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">if</span>( it != t.end() ) {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            t.erase( it );</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;}</div>
<div class="ttc" id="aaction_8cpp_html_a91aa34292a1156bb83b17379bbf41933"><div class="ttname"><a href="action_8cpp.html#a91aa34292a1156bb83b17379bbf41933">press_x</a></div><div class="ttdeci">std::string press_x(action_id act)</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l00528">action.cpp:528</a></div></div>
<div class="ttc" id="aaction_8h_html"><div class="ttname"><a href="action_8h.html">action.h</a></div></div>
<div class="ttc" id="aaction_8h_html_a14769f0512c139a614db195c6477c667ac558a2f59b4d885a83def7f0878d03b1"><div class="ttname"><a href="action_8h.html#a14769f0512c139a614db195c6477c667ac558a2f59b4d885a83def7f0878d03b1">ACTION_PAUSE</a></div><div class="ttdeci">@ ACTION_PAUSE</div><div class="ttdoc">Pause an on-going activity.</div><div class="ttdef"><b>Definition:</b> <a href="action_8h_source.html#l00038">action.h:38</a></div></div>
<div class="ttc" id="aactivity__actor__definitions_8h_html"><div class="ttname"><a href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a></div></div>
<div class="ttc" id="aavatar_8cpp_html_a039c3379527621f928cbc2e62686108c"><div class="ttname"><a href="avatar_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a></div><div class="ttdeci">static const trait_id trait_M_SKIN3(&quot;M_SKIN3&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a09f3ea407cf63807e000861190ad1515"><div class="ttname"><a href="avatar_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a></div><div class="ttdeci">static const efftype_id effect_sad(&quot;sad&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a0b39eb8da100f09941bb64988793485a"><div class="ttname"><a href="avatar_8cpp.html#a0b39eb8da100f09941bb64988793485a">itype_guidebook</a></div><div class="ttdeci">static const itype_id itype_guidebook(&quot;guidebook&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a0e02f772574a897b72bd8fc3c48e7f3d"><div class="ttname"><a href="avatar_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a></div><div class="ttdeci">static const trait_id trait_WEB_WALKER(&quot;WEB_WALKER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a1cb839b00dab2fe99f9dacfc8492e1b2"><div class="ttname"><a href="avatar_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a></div><div class="ttdeci">static const efftype_id effect_pkill(&quot;pkill&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a1f13575e0c937c4721778a685093e25d"><div class="ttname"><a href="avatar_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS(&quot;ARACHNID_ARMS&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a2988b5084978cc9f6f891ae04b11c3c8"><div class="ttname"><a href="avatar_8cpp.html#a2988b5084978cc9f6f891ae04b11c3c8">monfaction_player</a></div><div class="ttdeci">static const string_id&lt; monfaction &gt; monfaction_player(&quot;player&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a29f4215e8aa45718fd0c33d7a6c7300e"><div class="ttname"><a href="avatar_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a></div><div class="ttdeci">static const trait_id trait_THICK_SCALES(&quot;THICK_SCALES&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a2f88100c922915703a21ea4c48e8c6bd"><div class="ttname"><a href="avatar_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a></div><div class="ttdeci">static const trait_id trait_COMPOUND_EYES(&quot;COMPOUND_EYES&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a33041f424d0dc4a08128c7f3a4f32c26"><div class="ttname"><a href="avatar_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a></div><div class="ttdeci">static const faction_id faction_your_followers(&quot;your_followers&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a39faa1c7d3f986d7dd89f347f4e2f43f"><div class="ttname"><a href="avatar_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a></div><div class="ttdeci">static const ter_str_id ter_t_dirt(&quot;t_dirt&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a3eff2536d0f2d082101e71815160a288"><div class="ttname"><a href="avatar_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_PAIN_IMMUNE(&quot;PAIN_IMMUNE&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a45fe17320739b38daf72f34792dbd657"><div class="ttname"><a href="avatar_8cpp.html#a45fe17320739b38daf72f34792dbd657">trait_DEBUG_CLOAK</a></div><div class="ttdeci">static const trait_id trait_DEBUG_CLOAK(&quot;DEBUG_CLOAK&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a468a4ea99d05230e46c7e014a68270a7"><div class="ttname"><a href="avatar_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a></div><div class="ttdeci">static const efftype_id effect_boomered(&quot;boomered&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a4860b2a9de9f5aafed467e6b1bfd7c8b"><div class="ttname"><a href="avatar_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a></div><div class="ttdeci">static const efftype_id effect_irradiated(&quot;irradiated&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a6d71b37c506e3143c525c4021a580366"><div class="ttname"><a href="avatar_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a></div><div class="ttdeci">static const trait_id trait_WEB_WEAVER(&quot;WEB_WEAVER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a6e269b6cff6957ea12e9319dd5c806fb"><div class="ttname"><a href="avatar_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a></div><div class="ttdeci">static const trait_id trait_CHITIN3(&quot;CHITIN3&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a738d6878919b43681d80ad9c05dfb9ba"><div class="ttname"><a href="avatar_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a></div><div class="ttdeci">static const trait_id trait_SHELL3(&quot;SHELL3&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aavatar_8cpp_html_a76750c571fbc6b0459bc6879b9ecd65d"><div class="ttname"><a href="avatar_8cpp.html#a76750c571fbc6b0459bc6879b9ecd65d">xp_cutoffs</a></div><div class="ttdeci">static const std::array&lt; int, 20 &gt; xp_cutoffs</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01126">avatar.cpp:1126</a></div></div>
<div class="ttc" id="aavatar_8cpp_html_a7aaef64e8c7bda4e721b9abfc0f29876"><div class="ttname"><a href="avatar_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a></div><div class="ttdeci">static const trait_id trait_CHITIN2(&quot;CHITIN2&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a7b80d711466946f3fb75c76a9d47de41"><div class="ttname"><a href="avatar_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a></div><div class="ttdeci">static const trait_id trait_STIMBOOST(&quot;STIMBOOST&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a7b9b5dc5aace58de30f3602e0413cfb8"><div class="ttname"><a href="avatar_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR3(&quot;CHITIN_FUR3&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a81b633e679725d3a23cfed0548dd0a17"><div class="ttname"><a href="avatar_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a></div><div class="ttdeci">static const trait_id trait_WEB_SPINNER(&quot;WEB_SPINNER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a84fc6ad1c820373b94fc50fe81d3b32a"><div class="ttname"><a href="avatar_8cpp.html#a84fc6ad1c820373b94fc50fe81d3b32a">move_mode_prone</a></div><div class="ttdeci">static const move_mode_id move_mode_prone(&quot;prone&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a8573cc3a9649fd0a9b82dc86b0dff30e"><div class="ttname"><a href="avatar_8cpp.html#a8573cc3a9649fd0a9b82dc86b0dff30e">effect_relax_gas</a></div><div class="ttdeci">static const efftype_id effect_relax_gas(&quot;relax_gas&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a8d1fcf8d24e911eb69b460cd5cd32f9a"><div class="ttname"><a href="avatar_8cpp.html#a8d1fcf8d24e911eb69b460cd5cd32f9a">bio_cloak</a></div><div class="ttdeci">static const bionic_id bio_cloak(&quot;bio_cloak&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a91ccc7a1ea38fab00f479290b48d4e94"><div class="ttname"><a href="avatar_8cpp.html#a91ccc7a1ea38fab00f479290b48d4e94">move_mode_walk</a></div><div class="ttdeci">static const move_mode_id move_mode_walk(&quot;walk&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a930a7d3aa631d14eb81c3f2fa9a6863e"><div class="ttname"><a href="avatar_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a></div><div class="ttdeci">static const trait_id trait_SHELL2(&quot;SHELL2&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a93a8aea38d781d7a0b51285a6d33c8e5"><div class="ttname"><a href="avatar_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a></div><div class="ttdeci">static const trait_id trait_WHISKERS(&quot;WHISKERS&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a978adf30232e0bcf1b9d38a73b8dd30e"><div class="ttname"><a href="avatar_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a></div><div class="ttdeci">static const bionic_id bio_soporific(&quot;bio_soporific&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a9793d68ab3c4775ab78fc24e93b97a6e"><div class="ttname"><a href="avatar_8cpp.html#a9793d68ab3c4775ab78fc24e93b97a6e">move_mode_run</a></div><div class="ttdeci">static const move_mode_id move_mode_run(&quot;run&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_a9c5c38ebc99fa84cc6fa6cea24213099"><div class="ttname"><a href="avatar_8cpp.html#a9c5c38ebc99fa84cc6fa6cea24213099">trait_CENOBITE</a></div><div class="ttdeci">static const trait_id trait_CENOBITE(&quot;CENOBITE&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_aaa258c5465ca70ec4568914f0975902c"><div class="ttname"><a href="avatar_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a></div><div class="ttdeci">static const ter_str_id ter_t_pit(&quot;t_pit&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_aad2f825b2368c52145a0829bcc37eadf"><div class="ttname"><a href="avatar_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a></div><div class="ttdeci">static const trait_id trait_WHISKERS_RAT(&quot;WHISKERS_RAT&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ab16f8be4be2050986e76d2cb0cff7609"><div class="ttname"><a href="avatar_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a></div><div class="ttdeci">static const efftype_id effect_sleep(&quot;sleep&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_aba25188f1c6479109ff8fb4004f03ebb"><div class="ttname"><a href="avatar_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a></div><div class="ttdeci">static const trait_id trait_CHLOROMORPH(&quot;CHLOROMORPH&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_abe59975b0f897b05b7572b71af1a2ca7"><div class="ttname"><a href="avatar_8cpp.html#abe59975b0f897b05b7572b71af1a2ca7">trait_PROF_DICEMASTER</a></div><div class="ttdeci">static const trait_id trait_PROF_DICEMASTER(&quot;PROF_DICEMASTER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_abf29a0f9f2b03dbf9baa8dd6af688d41"><div class="ttname"><a href="avatar_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a></div><div class="ttdeci">static const trait_id trait_WATERSLEEP(&quot;WATERSLEEP&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ac0fbe9dfcb50737d44ee4d31653e25ac"><div class="ttname"><a href="avatar_8cpp.html#ac0fbe9dfcb50737d44ee4d31653e25ac">json_flag_ALARMCLOCK</a></div><div class="ttdeci">static const json_character_flag json_flag_ALARMCLOCK(&quot;ALARMCLOCK&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ac41827abd252cabc27c7c385291f71e4"><div class="ttname"><a href="avatar_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS_OK(&quot;INSECT_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ac9e11d8127ad8d0ad1582cc53939301f"><div class="ttname"><a href="avatar_8cpp.html#ac9e11d8127ad8d0ad1582cc53939301f">effect_slept_through_alarm</a></div><div class="ttdeci">static const efftype_id effect_slept_through_alarm(&quot;slept_through_alarm&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_accbe02d1b542c1aeb1081f0e11e3afd5"><div class="ttname"><a href="avatar_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS_OK(&quot;ARACHNID_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ace41dee69a6d53ab6af1332a89b87b92"><div class="ttname"><a href="avatar_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a></div><div class="ttdeci">static const efftype_id effect_stim_overdose(&quot;stim_overdose&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ad1df0ca2944a94c3ad796e8baada33ae"><div class="ttname"><a href="avatar_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a></div><div class="ttdeci">static const efftype_id effect_stunned(&quot;stunned&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ad360eeb9caef5284f4139bc57cfcebe8"><div class="ttname"><a href="avatar_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a></div><div class="ttdeci">static const ter_str_id ter_t_dirtmound(&quot;t_dirtmound&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ad371690d1256c38ada780add49e8b23e"><div class="ttname"><a href="avatar_8cpp.html#ad371690d1256c38ada780add49e8b23e">move_mode_crouch</a></div><div class="ttdeci">static const move_mode_id move_mode_crouch(&quot;crouch&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ad745add32a91e0a8f43b0d57f9d6ca2b"><div class="ttname"><a href="avatar_8cpp.html#ad745add32a91e0a8f43b0d57f9d6ca2b">trait_UNDINE_SLEEP_WATER</a></div><div class="ttdeci">static const trait_id trait_UNDINE_SLEEP_WATER(&quot;UNDINE_SLEEP_WATER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_adcaf70773541073a0d4cdfce4b857bf7"><div class="ttname"><a href="avatar_8cpp.html#adcaf70773541073a0d4cdfce4b857bf7">effect_psi_stunned</a></div><div class="ttdeci">static const efftype_id effect_psi_stunned(&quot;psi_stunned&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_added40875b98d3240b4ff7b208435270"><div class="ttname"><a href="avatar_8cpp.html#added40875b98d3240b4ff7b208435270">ter_t_pit_shallow</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_shallow(&quot;t_pit_shallow&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_adebf9d34c44cf8946560251e2adc2cd4"><div class="ttname"><a href="avatar_8cpp.html#adebf9d34c44cf8946560251e2adc2cd4">itype_mut_longpull</a></div><div class="ttdeci">static const itype_id itype_mut_longpull(&quot;mut_longpull&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ae331a8118e681234ecce8aaf10d4ddc9"><div class="ttname"><a href="avatar_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a></div><div class="ttdeci">static const efftype_id effect_stim(&quot;stim&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_ae9288df70e6cd6c1ff0bdd5404a18138"><div class="ttname"><a href="avatar_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a></div><div class="ttdeci">static const efftype_id effect_happy(&quot;happy&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_aed41c52190bc19cff7fa3c714d0be50f"><div class="ttname"><a href="avatar_8cpp.html#aed41c52190bc19cff7fa3c714d0be50f">effect_alarm_clock</a></div><div class="ttdeci">static const efftype_id effect_alarm_clock(&quot;alarm_clock&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_af08049a13ec857cf18fe65c4ac30788d"><div class="ttname"><a href="avatar_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a></div><div class="ttdeci">static const efftype_id effect_depressants(&quot;depressants&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_af1c6c1c6abc2a67da91b74814eda8078"><div class="ttname"><a href="avatar_8cpp.html#af1c6c1c6abc2a67da91b74814eda8078">json_flag_WEBBED_HANDS</a></div><div class="ttdeci">static const json_character_flag json_flag_WEBBED_HANDS(&quot;WEBBED_HANDS&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_af2540b2bf274cc61340154c538845226"><div class="ttname"><a href="avatar_8cpp.html#af2540b2bf274cc61340154c538845226">ter_t_floor</a></div><div class="ttdeci">static const ter_str_id ter_t_floor(&quot;t_floor&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_af2c1415b677a83667f038144ea42eb43"><div class="ttname"><a href="avatar_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a></div><div class="ttdeci">static const efftype_id effect_sleep_deprived(&quot;sleep_deprived&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_af9f531764978ce897647a8b151bebfef"><div class="ttname"><a href="avatar_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a></div><div class="ttdeci">static const trait_id trait_THRESH_SPIDER(&quot;THRESH_SPIDER&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_afa18c8c17b0b33f364c72c636824686f"><div class="ttname"><a href="avatar_8cpp.html#afa18c8c17b0b33f364c72c636824686f">ter_t_grass</a></div><div class="ttdeci">static const ter_str_id ter_t_grass(&quot;t_grass&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="avatar_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
<div class="ttc" id="aavatar_8cpp_html_afecd12cfe9b9e60cb64816a1e6d8d043"><div class="ttname"><a href="avatar_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS(&quot;INSECT_ARMS&quot;)</div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_a92caf587794873fa1f3cc4bace29993c"><div class="ttname"><a href="bodypart_8cpp.html#a92caf587794873fa1f3cc4bace29993c">body_part_leg_l</a></div><div class="ttdeci">const bodypart_str_id body_part_leg_l(&quot;leg_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_a954b36de93f2258bf1d31e8f24494ad0"><div class="ttname"><a href="bodypart_8cpp.html#a954b36de93f2258bf1d31e8f24494ad0">body_part_arm_l</a></div><div class="ttdeci">const bodypart_str_id body_part_arm_l(&quot;arm_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa097cb26e12eaa87b56e93c3568a5a74"><div class="ttname"><a href="bodypart_8cpp.html#aa097cb26e12eaa87b56e93c3568a5a74">body_part_name_accusative</a></div><div class="ttdeci">std::string body_part_name_accusative(const bodypart_id &amp;bp, int number)</div><div class="ttdoc">Returns the matching accusative name of the body_part token, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00798">bodypart.cpp:798</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_aa26e675361f884c329258a89ecbdf0ec"><div class="ttname"><a href="bodypart_8cpp.html#aa26e675361f884c329258a89ecbdf0ec">body_part_arm_r</a></div><div class="ttdeci">const bodypart_str_id body_part_arm_r(&quot;arm_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa372ea85b9fd9dee0197b2c16362d7a9"><div class="ttname"><a href="bodypart_8cpp.html#aa372ea85b9fd9dee0197b2c16362d7a9">body_part_leg_r</a></div><div class="ttdeci">const bodypart_str_id body_part_leg_r(&quot;leg_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_acce4686c4642d33fd10230b461987d34"><div class="ttname"><a href="bodypart_8cpp.html#acce4686c4642d33fd10230b461987d34">body_part_mouth</a></div><div class="ttdeci">const bodypart_str_id body_part_mouth(&quot;mouth&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ade2e301ed150ac0191c87e8fb19420c1"><div class="ttname"><a href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a></div><div class="ttdeci">const bodypart_str_id body_part_head(&quot;head&quot;)</div></div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00032">bodypart.h:32</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00427">calendar.cpp:427</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a605b73d77fee1cb3c3cc3b32c45fad47"><div class="ttname"><a href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a></div><div class="ttdeci">std::string to_string_writable(const time_duration &amp;dur)</div><div class="ttdoc">Returns a string that is writable to JSON that is also readable from JSON.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00626">calendar.cpp:626</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acalendar_8h_html_a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8"><div class="ttname"><a href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a></div><div class="ttdeci">@ day</div></div>
<div class="ttc" id="acalendar_8h_html_ab6e1f01689c2dec473157375188392afa7c4f29407893c334a6cb7a87bf045c0d"><div class="ttname"><a href="calendar_8h.html#ab6e1f01689c2dec473157375188392afa7c4f29407893c334a6cb7a87bf045c0d">clipped_align::right</a></div><div class="ttdeci">@ right</div></div>
<div class="ttc" id="acata__assert_8h_html"><div class="ttname"><a href="cata__assert_8h.html">cata_assert.h</a></div></div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="acata__tiles_8h_html_affa90804269b044a43867f93746f8f8ea811882fecd5c7618d7099ebbd39ea254"><div class="ttname"><a href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8ea811882fecd5c7618d7099ebbd39ea254">text_alignment::left</a></div><div class="ttdeci">@ left</div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">cata_variant_type::tripoint</a></div><div class="ttdeci">@ tripoint</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">cata_variant_type::point</a></div><div class="ttdeci">@ point</div></div>
<div class="ttc" id="acatacharset_8cpp_html_a756b52a0bf9f4b63eadbe44da3e11a00"><div class="ttname"><a href="catacharset_8cpp.html#a756b52a0bf9f4b63eadbe44da3e11a00">left_justify</a></div><div class="ttdeci">std::string left_justify(const std::string &amp;str, const int width, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00127">catacharset.cpp:127</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_af20ee33da59ccceb9f4c14005c0bbe80"><div class="ttname"><a href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a></div><div class="ttdeci">int utf8_width(const std::string_view s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00104">catacharset.cpp:104</a></div></div>
<div class="ttc" id="acatacharset_8h_html"><div class="ttname"><a href="catacharset_8h.html">catacharset.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755">character_stat</a></div><div class="ttdeci">character_stat</div><div class="ttdoc">Four ability stats available on character creation.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00437">character.h:437</a></div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a308f546dec073d676fe48face3d09056"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a308f546dec073d676fe48face3d09056">character_stat::DUMMY_STAT</a></div><div class="ttdeci">@ DUMMY_STAT</div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc">character_stat::STRENGTH</a></div><div class="ttdeci">@ STRENGTH</div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203">character_stat::DEXTERITY</a></div><div class="ttdeci">@ DEXTERITY</div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319">character_stat::PERCEPTION</a></div><div class="ttdeci">@ PERCEPTION</div></div>
<div class="ttc" id="acharacter_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e"><div class="ttname"><a href="character_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e">character_stat::INTELLIGENCE</a></div><div class="ttdeci">@ INTELLIGENCE</div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7">book_mastery</a></div><div class="ttdeci">book_mastery</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00452">character.h:452</a></div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">book_mastery::MASTERED</a></div><div class="ttdeci">@ MASTERED</div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7ab28c9da4856f2af975701af7ccf27ce2"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ab28c9da4856f2af975701af7ccf27ce2">book_mastery::CANT_UNDERSTAND</a></div><div class="ttdeci">@ CANT_UNDERSTAND</div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">book_mastery::LEARNING</a></div><div class="ttdeci">@ LEARNING</div></div>
<div class="ttc" id="acharacter_8h_html_add2c3c4e579b70ff498c9d0959488e18add80d2b76b090fb82d4fcf7199419419"><div class="ttname"><a href="character_8h.html#add2c3c4e579b70ff498c9d0959488e18add80d2b76b090fb82d4fcf7199419419">SLEEP_DEPRIVATION_HARMLESS</a></div><div class="ttdeci">@ SLEEP_DEPRIVATION_HARMLESS</div><div class="ttdoc">2 days</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00238">character.h:238</a></div></div>
<div class="ttc" id="acharacter__id_8h_html"><div class="ttname"><a href="character__id_8h.html">character_id.h</a></div></div>
<div class="ttc" id="acharacter__martial__arts_8h_html"><div class="ttname"><a href="character__martial__arts_8h.html">character_martial_arts.h</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclassCharacter_html_a09d9ec4b94ca85ac0b546d02232faf90"><div class="ttname"><a href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">Character::wearing_fitting_on</a></div><div class="ttdeci">bool wearing_fitting_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body part.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00578">character_attire.cpp:578</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0a5e680935c5765ed1432837e071ed54"><div class="ttname"><a href="classCharacter.html#a0a5e680935c5765ed1432837e071ed54">Character::set_wielded_item</a></div><div class="ttdeci">void set_wielded_item(const item &amp;to_wield)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00687">character.cpp:687</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0b32571db45faeab8561f33af6da1e28"><div class="ttname"><a href="classCharacter.html#a0b32571db45faeab8561f33af6da1e28">Character::wake_up</a></div><div class="ttdeci">virtual void wake_up()</div><div class="ttdoc">Removes &quot;sleep&quot; and &quot;lying_down&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07385">character.cpp:7385</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bbd9aa7982f98e08f67db130e4eb9f8"><div class="ttname"><a href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">Character::str_max</a></div><div class="ttdeci">int str_max</div><div class="ttdoc">Character stats.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00572">character.h:572</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0e6803120e93851046bf12640c35ada2"><div class="ttname"><a href="classCharacter.html#a0e6803120e93851046bf12640c35ada2">Character::current_movement_mode</a></div><div class="ttdeci">move_mode_id current_movement_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02159">character.cpp:2159</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0fb6896d21fc20b5f30f2a0b8afd9b1d"><div class="ttname"><a href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">Character::mod_per_bonus</a></div><div class="ttdeci">void mod_per_bonus(int nper)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04288">character.cpp:4288</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0ffe14df559cee6e9b5d02f5b214d009"><div class="ttname"><a href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">Character::get_stamina</a></div><div class="ttdeci">int get_stamina() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06806">character.cpp:6806</a></div></div>
<div class="ttc" id="aclassCharacter_html_a10008df58d7e74a17110f62d2c45d22b"><div class="ttname"><a href="classCharacter.html#a10008df58d7e74a17110f62d2c45d22b">Character::consumption_history</a></div><div class="ttdeci">std::list&lt; consumption_event &gt; consumption_history</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02730">character.h:2730</a></div></div>
<div class="ttc" id="aclassCharacter_html_a10389288ada57f4431eab188ca109528"><div class="ttname"><a href="classCharacter.html#a10389288ada57f4431eab188ca109528">Character::toggle_trait</a></div><div class="ttdeci">void toggle_trait(const trait_id &amp;, const std::string &amp;=&quot;&quot;)</div><div class="ttdoc">Toggles a trait on the player and in their mutation list.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00220">mutation.cpp:220</a></div></div>
<div class="ttc" id="aclassCharacter_html_a176ce3209cdeec68a0bddd09dcb37513"><div class="ttname"><a href="classCharacter.html#a176ce3209cdeec68a0bddd09dcb37513">Character::can_switch_to</a></div><div class="ttdeci">bool can_switch_to(const move_mode_id &amp;mode) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02282">character.cpp:2282</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1819679d2d4e9f8ba5d62ae26737f34c"><div class="ttname"><a href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">Character::last_item</a></div><div class="ttdeci">itype_id last_item</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02713">character.h:2713</a></div></div>
<div class="ttc" id="aclassCharacter_html_a18ff0119f4fe89b2234275f1fc019106"><div class="ttname"><a href="classCharacter.html#a18ff0119f4fe89b2234275f1fc019106">Character::is_crouching</a></div><div class="ttdeci">bool is_crouching() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02179">character.cpp:2179</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1961ab0f9c702252e550bf42cb8dd974"><div class="ttname"><a href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">Character::get_painkiller</a></div><div class="ttdeci">int get_painkiller() const</div><div class="ttdoc">Returns intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09839">character.cpp:9839</a></div></div>
<div class="ttc" id="aclassCharacter_html_a196af8e36243af3dc02a5ea02fc8425d"><div class="ttname"><a href="classCharacter.html#a196af8e36243af3dc02a5ea02fc8425d">Character::focus_equilibrium_sleepiness_cap</a></div><div class="ttdeci">int focus_equilibrium_sleepiness_cap(int equilibrium) const</div><div class="ttdoc">Returns focus equilibrium cap due to sleepiness.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03690">character.cpp:3690</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00829">character.cpp:829</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1f1ce1b5bdc4116046f13af5ef5236fc"><div class="ttname"><a href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">Character::mod_dex_bonus</a></div><div class="ttdeci">void mod_dex_bonus(int ndex)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04283">character.cpp:4283</a></div></div>
<div class="ttc" id="aclassCharacter_html_a225de862f8875f9ff96ec8a303213404"><div class="ttname"><a href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">Character::has_active_mutation</a></div><div class="ttdeci">bool has_active_mutation(const trait_id &amp;b) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00613">mutation.cpp:613</a></div></div>
<div class="ttc" id="aclassCharacter_html_a229739fc346dabfff09225d6c0fcf92f"><div class="ttname"><a href="classCharacter.html#a229739fc346dabfff09225d6c0fcf92f">Character::get_pain_penalty</a></div><div class="ttdeci">stat_mod get_pain_penalty() const</div><div class="ttdoc">Returns the effect of pain on stats.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12404">character.cpp:12404</a></div></div>
<div class="ttc" id="aclassCharacter_html_a24acb67f566e6b53a346a2bac61f3d09"><div class="ttname"><a href="classCharacter.html#a24acb67f566e6b53a346a2bac61f3d09">Character::movement_mode_is</a></div><div class="ttdeci">bool movement_mode_is(const move_mode_id &amp;mode) const</div><div class="ttdoc">Check against the character's current movement mode.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02164">character.cpp:2164</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2725bcbfa9e92e0590930e6a8e35764c"><div class="ttname"><a href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">Character::rem_morale</a></div><div class="ttdeci">void rem_morale(const morale_type &amp;type, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00154">character_morale.cpp:154</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2726ac089fa49e864b486e289f53fade"><div class="ttname"><a href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">Character::get_skill_level_object</a></div><div class="ttdeci">SkillLevel &amp; get_skill_level_object(const skill_id &amp;ident)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03423">character.cpp:3423</a></div></div>
<div class="ttc" id="aclassCharacter_html_a28028d965c0eaed38c5e132f52bf41cf"><div class="ttname"><a href="classCharacter.html#a28028d965c0eaed38c5e132f52bf41cf">Character::cached_info</a></div><div class="ttdeci">std::map&lt; std::string, double &gt; cached_info</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03898">character.h:3898</a></div></div>
<div class="ttc" id="aclassCharacter_html_a28e314b50dae2c237a0675ed748aaf1d"><div class="ttname"><a href="classCharacter.html#a28e314b50dae2c237a0675ed748aaf1d">Character::can_wield</a></div><div class="ttdeci">ret_val&lt; void &gt; can_wield(const item &amp;it) const</div><div class="ttdoc">Check player capable of wielding an item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07836">character.cpp:7836</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2a28975ceb2a1a50d3d6607fd6c36ea5"><div class="ttname"><a href="classCharacter.html#a2a28975ceb2a1a50d3d6607fd6c36ea5">Character::calc_focus_equilibrium</a></div><div class="ttdeci">int calc_focus_equilibrium(bool ignore_pain=false) const</div><div class="ttdoc">Uses morale and other factors to return the character's focus target goto value.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03704">character.cpp:3704</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2a2c471f540c3b26afae14b63753afd0"><div class="ttname"><a href="classCharacter.html#a2a2c471f540c3b26afae14b63753afd0">Character::spent_upgrade_points</a></div><div class="ttdeci">int spent_upgrade_points</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00584">character.h:584</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2fd91641a2b7d9449712891d16e347dc"><div class="ttname"><a href="classCharacter.html#a2fd91641a2b7d9449712891d16e347dc">Character::get_bmr</a></div><div class="ttdeci">int get_bmr() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06540">character.cpp:6540</a></div></div>
<div class="ttc" id="aclassCharacter_html_a30822b2d5fb0dfa613aed0043f494c66"><div class="ttname"><a href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">Character::book_fun_for</a></div><div class="ttdeci">int book_fun_for(const item &amp;book, const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11840">character.cpp:11840</a></div></div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02724">character.h:2724</a></div></div>
<div class="ttc" id="aclassCharacter_html_a327a42f3afe42f0ea55db6613a8e7d4d"><div class="ttname"><a href="classCharacter.html#a327a42f3afe42f0ea55db6613a8e7d4d">Character::natural_attack_restricted_on</a></div><div class="ttdeci">bool natural_attack_restricted_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body_part, ignoring items with the ...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02656">character.cpp:2656</a></div></div>
<div class="ttc" id="aclassCharacter_html_a33ae50fa04d45782f640c2fc572d9eee"><div class="ttname"><a href="classCharacter.html#a33ae50fa04d45782f640c2fc572d9eee">Character::is_wearing_active_optcloak</a></div><div class="ttdeci">bool is_wearing_active_optcloak() const</div><div class="ttdoc">Returns true if the player is wearing an active optical cloak.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00818">character_attire.cpp:818</a></div></div>
<div class="ttc" id="aclassCharacter_html_a379081ad133b17e4ab3d230270b2414d"><div class="ttname"><a href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">Character::i_rem</a></div><div class="ttdeci">item i_rem(const item *it)</div><div class="ttdoc">Remove a specific item from player possession.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00433">character_inventory.cpp:433</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3f66f89a3ff5963c0052d0f0f6946262"><div class="ttname"><a href="classCharacter.html#a3f66f89a3ff5963c0052d0f0f6946262">Character::hobbies</a></div><div class="ttdeci">std::set&lt; const profession * &gt; hobbies</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00589">character.h:589</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4226b37a0e4383461e0fd072586a394a"><div class="ttname"><a href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">Character::get_knowledge_level</a></div><div class="ttdeci">int get_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03441">character.cpp:3441</a></div></div>
<div class="ttc" id="aclassCharacter_html_a459be1dc759e2674295b14585bf868d5"><div class="ttname"><a href="classCharacter.html#a459be1dc759e2674295b14585bf868d5">Character::is_hauling</a></div><div class="ttdeci">bool is_hauling() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08873">character.cpp:8873</a></div></div>
<div class="ttc" id="aclassCharacter_html_a46302dc71cfc84856e8af85ddb61c7e1"><div class="ttname"><a href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">Character::worn</a></div><div class="ttdeci">outfit worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02690">character.h:2690</a></div></div>
<div class="ttc" id="aclassCharacter_html_a47ef71a39b5845920b1ba0a87a8cb200"><div class="ttname"><a href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">Character::invoke_item</a></div><div class="ttdeci">virtual bool invoke_item(item *, const tripoint &amp;pt, int pre_obtain_moves=-1)</div><div class="ttdoc">Asks how to use the item (if it has more than one use_method) and uses it.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07149">character.cpp:7149</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4b20f9ae261b906ead741771a8a48311"><div class="ttname"><a href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">Character::per_max</a></div><div class="ttdeci">int per_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00575">character.h:575</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4d8d747c469431f530acb05c5f7a7f45"><div class="ttname"><a href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">Character::is_worn</a></div><div class="ttdeci">bool is_worn(const item &amp;thing) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01911">character.h:1911</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5140a7e16506aaabd28cf36c287b7619"><div class="ttname"><a href="classCharacter.html#a5140a7e16506aaabd28cf36c287b7619">Character::unwield</a></div><div class="ttdeci">bool unwield()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07899">character.cpp:7899</a></div></div>
<div class="ttc" id="aclassCharacter_html_a517b958e3db0d2619eb237aa838ffe71"><div class="ttname"><a href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">Character::get_cardio_acc_base</a></div><div class="ttdeci">int get_cardio_acc_base() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07139">character.cpp:7139</a></div></div>
<div class="ttc" id="aclassCharacter_html_a51eea7d6d7e07294b74c4fcf93d77923"><div class="ttname"><a href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">Character::get_bmi_fat</a></div><div class="ttdeci">float get_bmi_fat() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06381">character.cpp:6381</a></div></div>
<div class="ttc" id="aclassCharacter_html_a588d5cc1d729490552fe03b006685ae5"><div class="ttname"><a href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">Character::get_int</a></div><div class="ttdeci">int get_int() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04139">character.cpp:4139</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02684">character.h:2684</a></div></div>
<div class="ttc" id="aclassCharacter_html_a65a091d2c8d36f9102c09bc24836bf6e"><div class="ttname"><a href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">Character::bio_soporific_powered_at_last_sleep_check</a></div><div class="ttdeci">bool bio_soporific_powered_at_last_sleep_check</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03899">character.h:3899</a></div></div>
<div class="ttc" id="aclassCharacter_html_a66aab249399aba9fc327965b92e0262c"><div class="ttname"><a href="classCharacter.html#a66aab249399aba9fc327965b92e0262c">Character::get_book_reader</a></div><div class="ttdeci">const Character * get_book_reader(const item &amp;book, std::vector&lt; std::string &gt; &amp;reasons) const</div><div class="ttdoc">Helper function for player::read.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12130">character.cpp:12130</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01732">character.cpp:1732</a></div></div>
<div class="ttc" id="aclassCharacter_html_a68de7da109abd90b4f2210057c982fe0"><div class="ttname"><a href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">Character::get_perceived_pain</a></div><div class="ttdeci">int get_perceived_pain() const override</div><div class="ttdoc">Returns perceived pain (reduced with painkillers)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12517">character.cpp:12517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6924ca4d6836c2a8c64bd6fda0436c70"><div class="ttname"><a href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">Character::add_miss_reason</a></div><div class="ttdeci">void add_miss_reason(const std::string &amp;reason, unsigned int weight)</div><div class="ttdoc">Adds a reason for why the player would miss a melee attack.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00405">melee.cpp:405</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6b1320339a403e092d041e141e62e6ba"><div class="ttname"><a href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">Character::last_target_pos</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; last_target_pos</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02762">character.h:2762</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6c34c8584d08676678b5001a74de77dc"><div class="ttname"><a href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">Character::get_crafting_helpers</a></div><div class="ttdeci">std::vector&lt; Character * &gt; get_crafting_helpers() const</div><div class="ttdoc">Return nearby Characters ready and willing to help with crafting.</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l03051">crafting.cpp:3051</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6cb8078ce8af28f6a779c039e3c1e1ca"><div class="ttname"><a href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">Character::mod_str_bonus</a></div><div class="ttdeci">void mod_str_bonus(int nstr)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04278">character.cpp:4278</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6d3588802fde645fd5387038b259377c"><div class="ttname"><a href="classCharacter.html#a6d3588802fde645fd5387038b259377c">Character::wearing_something_on</a></div><div class="ttdeci">bool wearing_something_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body part.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00573">character_attire.cpp:573</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72814cbd916b863b7b20b43345ef2329"><div class="ttname"><a href="classCharacter.html#a72814cbd916b863b7b20b43345ef2329">Character::invlet_to_item</a></div><div class="ttdeci">item * invlet_to_item(int invlet) const</div><div class="ttdoc">Return the item pointer of the item with given invlet, return nullptr if the player does not have suc...</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00540">character_inventory.cpp:540</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72b82d2498ae823e0cd6cad311215327"><div class="ttname"><a href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">Character::vomit</a></div><div class="ttdeci">void vomit()</div><div class="ttdoc">Handles Character vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07521">character.cpp:7521</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06742">character.cpp:6742</a></div></div>
<div class="ttc" id="aclassCharacter_html_a74ea39bd5cfd3989342daf4f6c5fa2ea"><div class="ttname"><a href="classCharacter.html#a74ea39bd5cfd3989342daf4f6c5fa2ea">Character::get_cardio_acc</a></div><div class="ttdeci">int get_cardio_acc() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07124">character.cpp:7124</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7682e1f03ef37975c56f244d7e232692"><div class="ttname"><a href="classCharacter.html#a7682e1f03ef37975c56f244d7e232692">Character::invalidate_leak_level_cache</a></div><div class="ttdeci">void invalidate_leak_level_cache()</div><div class="ttdoc">Sets leak_level_dirty to true.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06801">character.cpp:6801</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7950b035ea05fa28a0851b4107377265"><div class="ttname"><a href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">Character::knows_recipe</a></div><div class="ttdeci">bool knows_recipe(const recipe *rec) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00026">character_crafting.cpp:26</a></div></div>
<div class="ttc" id="aclassCharacter_html_a79882594452430db545255b936e220a7"><div class="ttname"><a href="classCharacter.html#a79882594452430db545255b936e220a7">Character::custom_profession</a></div><div class="ttdeci">std::string custom_profession</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01119">character.h:1119</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7bdec5b3c9990b8c7232796641915728"><div class="ttname"><a href="classCharacter.html#a7bdec5b3c9990b8c7232796641915728">Character::time_to_read</a></div><div class="ttdeci">time_duration time_to_read(const item &amp;book, const Character &amp;reader, const Character *learner=nullptr) const</div><div class="ttdoc">Helper function for get_book_reader.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12235">character.cpp:12235</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">virtual int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04517">character.cpp:4517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81864eee5b75943bd4222b696117a52a"><div class="ttname"><a href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">Character::is_wielding</a></div><div class="ttdeci">bool is_wielding(const item &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03319">character.cpp:3319</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81a81cee431c657465e6ab54af345eaf"><div class="ttname"><a href="classCharacter.html#a81a81cee431c657465e6ab54af345eaf">Character::get_morale_level</a></div><div class="ttdeci">int get_morale_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00137">character_morale.cpp:137</a></div></div>
<div class="ttc" id="aclassCharacter_html_a87b2b972822f230803ab63dd4f836b7a"><div class="ttname"><a href="classCharacter.html#a87b2b972822f230803ab63dd4f836b7a">Character::path_settings</a></div><div class="ttdeci">pimpl&lt; pathfinding_settings &gt; path_settings</div><div class="ttdoc">Cache for pathfinding settings.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03950">character.h:3950</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8824c91d628b74c695d338d71b3efa44"><div class="ttname"><a href="classCharacter.html#a8824c91d628b74c695d338d71b3efa44">Character::get_starvation</a></div><div class="ttdeci">int get_starvation() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04503">character.cpp:4503</a></div></div>
<div class="ttc" id="aclassCharacter_html_a89bae4bdcf077182255a45f8cebef788"><div class="ttname"><a href="classCharacter.html#a89bae4bdcf077182255a45f8cebef788">Character::swap_character</a></div><div class="ttdeci">void swap_character(Character &amp;other)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00657">character.cpp:657</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e6a78e6c4497a9aa7b8cc127dcdd4e3"><div class="ttname"><a href="classCharacter.html#a8e6a78e6c4497a9aa7b8cc127dcdd4e3">Character::male</a></div><div class="ttdeci">bool male</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02687">character.h:2687</a></div></div>
<div class="ttc" id="aclassCharacter_html_a91d79990e2ed8aecde6ab040e75d6a4c"><div class="ttname"><a href="classCharacter.html#a91d79990e2ed8aecde6ab040e75d6a4c">Character::wield_contents</a></div><div class="ttdeci">bool wield_contents(item &amp;container, item *internal_item=nullptr, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY)</div><div class="ttdoc">Try to wield a contained item consuming moves proportional to weapon skill and volume.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12939">character.cpp:12939</a></div></div>
<div class="ttc" id="aclassCharacter_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCharacter.html#a91dc4715c36eef7d116f944be9a4d435">Character::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00976">creature.h:976</a></div></div>
<div class="ttc" id="aclassCharacter_html_a96ec9152d401f128cf31a7cc35c97f65"><div class="ttname"><a href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">Character::inv</a></div><div class="ttdeci">pimpl&lt; inventory &gt; inv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02712">character.h:2712</a></div></div>
<div class="ttc" id="aclassCharacter_html_a997ede96b346ac8b05305c7b1c9b2e4d"><div class="ttname"><a href="classCharacter.html#a997ede96b346ac8b05305c7b1c9b2e4d">Character::reset_stats</a></div><div class="ttdeci">void reset_stats() override</div><div class="ttdoc">Resets stats, and applies effects in an idempotent manner.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03788">character.cpp:3788</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9c3a6b61668d4d7d771441e50095c544"><div class="ttname"><a href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">Character::int_max</a></div><div class="ttdeci">int int_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00574">character.h:574</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa0d1b26c15ad4a52973774bf6a7610c1"><div class="ttname"><a href="classCharacter.html#aa0d1b26c15ad4a52973774bf6a7610c1">Character::recalc_sight_limits</a></div><div class="ttdeci">void recalc_sight_limits()</div><div class="ttdoc">Modifies the player's sight values Must be called when any of the following change: This must be call...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02517">character.cpp:2517</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa1ab02d104dc242c371917a78d301f47"><div class="ttname"><a href="classCharacter.html#aa1ab02d104dc242c371917a78d301f47">Character::kill_xp</a></div><div class="ttdeci">int kill_xp</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00582">character.h:582</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa4ecfee35839a07be48afccbe582023e"><div class="ttname"><a href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">Character::stomach</a></div><div class="ttdeci">stomach_contents stomach</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02728">character.h:2728</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa6396870f289f9c3b1dc4ea91f7a65f0"><div class="ttname"><a href="classCharacter.html#aa6396870f289f9c3b1dc4ea91f7a65f0">Character::recalculate_enchantment_cache</a></div><div class="ttdeci">void recalculate_enchantment_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07750">character.cpp:7750</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa81a4b0db6f2387bfc02706a6b7a678e"><div class="ttname"><a href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">Character::get_rad</a></div><div class="ttdeci">int get_rad() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06757">character.cpp:6757</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa8ca0aff57b3786855a03205a810d76c"><div class="ttname"><a href="classCharacter.html#aa8ca0aff57b3786855a03205a810d76c">Character::is_running</a></div><div class="ttdeci">bool is_running() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02169">character.cpp:2169</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa9a4335ab1fd0d975199750b1ebf5bef"><div class="ttname"><a href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">Character::get_wielded_item</a></div><div class="ttdeci">item_location get_wielded_item() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00674">character.cpp:674</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaa743c562ea4b49c7aebc3ebf1298de4"><div class="ttname"><a href="classCharacter.html#aaa743c562ea4b49c7aebc3ebf1298de4">Character::is_walking</a></div><div class="ttdeci">bool is_walking() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02174">character.cpp:2174</a></div></div>
<div class="ttc" id="aclassCharacter_html_aabdb3984d92298545456bf8d5dcf1fd0"><div class="ttname"><a href="classCharacter.html#aabdb3984d92298545456bf8d5dcf1fd0">Character::prof</a></div><div class="ttdeci">const profession * prof</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00588">character.h:588</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaf1c149989ac933ff6b094384f4a5462a5da248ea6840aca1ae2b417b17982a89"><div class="ttname"><a href="classCharacter.html#aaf1c149989ac933ff6b094384f4a5462a5da248ea6840aca1ae2b417b17982a89">Character::comfort_level::neutral</a></div><div class="ttdeci">@ neutral</div></div>
<div class="ttc" id="aclassCharacter_html_ab2db9a91b7251e1ca4c1735c9cc2bf52"><div class="ttname"><a href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">Character::get_sleep_deprivation</a></div><div class="ttdeci">int get_sleep_deprivation() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04609">character.cpp:4609</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aclassCharacter_html_aba0dd3cd625129fd3792d9cf10bf5f77"><div class="ttname"><a href="classCharacter.html#aba0dd3cd625129fd3792d9cf10bf5f77">Character::mabuff_dodge_bonus</a></div><div class="ttdeci">float mabuff_dodge_bonus() const</div><div class="ttdoc">Returns the dodge bonus from martial arts buffs.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01630">martialarts.cpp:1630</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac033cd38ee98900bb08eb196c674aa55"><div class="ttname"><a href="classCharacter.html#ac033cd38ee98900bb08eb196c674aa55">Character::grab_point</a></div><div class="ttdeci">tripoint grab_point</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00592">character.h:592</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac6f590f28f979103633d198e32524c06"><div class="ttname"><a href="classCharacter.html#ac6f590f28f979103633d198e32524c06">Character::is_prone</a></div><div class="ttdeci">bool is_prone() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02184">character.cpp:2184</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca511c2b9cca76347a32edd2c2ac0fd2"><div class="ttname"><a href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">Character::morale</a></div><div class="ttdeci">pimpl&lt; player_morale &gt; morale</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03969">character.h:3969</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad19243d81ad7ecca4e08055128f11f70"><div class="ttname"><a href="classCharacter.html#ad19243d81ad7ecca4e08055128f11f70">Character::symbol</a></div><div class="ttdeci">const std::string &amp; symbol() const override</div><div class="ttdoc">Creature symbol.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00784">character.cpp:784</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad33fda9a7f9d4c8529cff2bbaea675ae"><div class="ttname"><a href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">Character::has_power</a></div><div class="ttdeci">bool has_power() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02875">character.cpp:2875</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae4ce8cb45c93fcafc3f4ba489e63a4c2"><div class="ttname"><a href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">Character::dex_max</a></div><div class="ttdeci">int dex_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00573">character.h:573</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02715">character.h:2715</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae71c3fe41d9c5dba9d9ccc0cb8c50f02"><div class="ttname"><a href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">Character::recalc_speed_bonus</a></div><div class="ttdeci">void recalc_speed_bonus()</div><div class="ttdoc">Calculates the various speed bonuses we will get from mutations, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12291">character.cpp:12291</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae9de69bc0450c41078c9f5c86bcf837c"><div class="ttname"><a href="classCharacter.html#ae9de69bc0450c41078c9f5c86bcf837c">Character::recalc_hp</a></div><div class="ttdeci">void recalc_hp()</div><div class="ttdoc">Recalculates HP after a change to max strength or enchantment.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02464">character.cpp:2464</a></div></div>
<div class="ttc" id="aclassCharacter_html_aec78049b0ee4401d3a4c073663735aad"><div class="ttname"><a href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">Character::has_flag</a></div><div class="ttdeci">virtual bool has_flag(const mon_flag_id &amp;) const</div><div class="ttdoc">This is to prevent clang complaining about overloading a virtual function, the creature version uses ...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00752">creature.h:752</a></div></div>
<div class="ttc" id="aclassCharacter_html_aed1aceefe3c2a32b2bd82e5d439da471"><div class="ttname"><a href="classCharacter.html#aed1aceefe3c2a32b2bd82e5d439da471">Character::set_cardio_acc</a></div><div class="ttdeci">void set_cardio_acc(int ncardio_acc)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07129">character.cpp:7129</a></div></div>
<div class="ttc" id="aclassCharacter_html_aef5c50fd97b52deedba39807cf2ba5d2"><div class="ttname"><a href="classCharacter.html#aef5c50fd97b52deedba39807cf2ba5d2">Character::get_steed_type</a></div><div class="ttdeci">steed_type get_steed_type() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02267">character.cpp:2267</a></div></div>
<div class="ttc" id="aclassCharacter_html_aefe5432750eb1c2c65fea628fd9878a7"><div class="ttname"><a href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">Character::get_stamina_max</a></div><div class="ttdeci">int get_stamina_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06815">character.cpp:6815</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af41b2402ff6f402c399454156f152ef2"><div class="ttname"><a href="classCharacter.html#af41b2402ff6f402c399454156f152ef2">Character::stop_hauling</a></div><div class="ttdeci">void stop_hauling()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08860">character.cpp:8860</a></div></div>
<div class="ttc" id="aclassCharacter_html_af5284cbdea522644fc9a677dd7e3f847"><div class="ttname"><a href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">Character::item_handling_cost</a></div><div class="ttdeci">int item_handling_cost(const item &amp;it, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY, int charges_in_it=-1, bool bulk_cost=false) const</div><div class="ttdoc">Calculate (but do not deduct) the number of moves required when handling (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07285">character.cpp:7285</a></div></div>
<div class="ttc" id="aclassCharacter_html_af6603125d7342944862004a14de55a8a"><div class="ttname"><a href="classCharacter.html#af6603125d7342944862004a14de55a8a">Character::mod_int_bonus</a></div><div class="ttdeci">void mod_int_bonus(int nint)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04293">character.cpp:4293</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02658">bionics.cpp:2658</a></div></div>
<div class="ttc" id="aclassCharacter_html_afdec750ba898d61951dea20d9d01d885"><div class="ttname"><a href="classCharacter.html#afdec750ba898d61951dea20d9d01d885">Character::invalidate_inventory_validity_cache</a></div><div class="ttdeci">void invalidate_inventory_validity_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03315">character.cpp:3315</a></div></div>
<div class="ttc" id="aclassCreature_html_a0a561860988a2692df47476d9a15511e"><div class="ttname"><a href="classCreature.html#a0a561860988a2692df47476d9a15511e">Creature::underwater</a></div><div class="ttdeci">bool underwater</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00941">creature.h:941</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01959">creature.cpp:1959</a></div></div>
<div class="ttc" id="aclassCreature_html_a60ca228583adf18b2e56e1c96ff8b048"><div class="ttname"><a href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">Creature::mod_dodge_bonus</a></div><div class="ttdeci">virtual void mod_dodge_bonus(float ndodge)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02906">creature.cpp:2906</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a6b40041c12e2c414170aad5511878446"><div class="ttname"><a href="classCreature.html#a6b40041c12e2c414170aad5511878446">Creature::resists_effect</a></div><div class="ttdeci">bool resists_effect(const effect &amp;e) const</div><div class="ttdoc">Returns true if the creature resists an effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01928">creature.cpp:1928</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_a88c28bc08aa3e0d6fa1b187cee97d1c4"><div class="ttname"><a href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">Creature::posz</a></div><div class="ttdeci">int posz() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00317">creature.h:317</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassCreature_html_a9f0365208b65ab1c45d23f03f402f491"><div class="ttname"><a href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">Creature::posy</a></div><div class="ttdeci">int posy() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00314">creature.h:314</a></div></div>
<div class="ttc" id="aclassCreature_html_aa8d3d8f5a3260c5b54e4973e957f356d"><div class="ttname"><a href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">Creature::get_effect</a></div><div class="ttdeci">const effect &amp; get_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Return the effect that matches the given arguments exactly.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01852">creature.cpp:1852</a></div></div>
<div class="ttc" id="aclassCreature_html_abe6022b1e8465afa8f672d77cbbe5680"><div class="ttname"><a href="classCreature.html#abe6022b1e8465afa8f672d77cbbe5680">Creature::longpull</a></div><div class="ttdeci">void longpull(const std::string &amp;name, const tripoint &amp;p)</div><div class="ttdoc">Attempts to pull the target at point p towards this creature.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01339">creature.cpp:1339</a></div></div>
<div class="ttc" id="aclassCreature_html_ac93f4ccc1bff76ada002c7e886c941ef"><div class="ttname"><a href="classCreature.html#ac93f4ccc1bff76ada002c7e886c941ef">Creature::set_location</a></div><div class="ttdeci">void set_location(const tripoint_abs_ms &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00207">creature.cpp:207</a></div></div>
<div class="ttc" id="aclassCreature_html_ae14e3b3ab4a876a17538cfe38818356c"><div class="ttname"><a href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">Creature::effects</a></div><div class="ttdeci">pimpl&lt; effects_map &gt; effects</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01204">creature.h:1204</a></div></div>
<div class="ttc" id="aclassCreature_html_aecea7d852ffba499ec12350c95340b9d"><div class="ttname"><a href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">Creature::posx</a></div><div class="ttdeci">int posx() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00311">creature.h:311</a></div></div>
<div class="ttc" id="aclassCreature_html_af3d3fb7cfb98cf3c36f0f0681414274a"><div class="ttname"><a href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">Creature::get_moves</a></div><div class="ttdeci">int get_moves() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02004">creature.cpp:2004</a></div></div>
<div class="ttc" id="aclassJsonArray_html"><div class="ttname"><a href="classJsonArray.html">JsonArray</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00346">flexbuffer_json.h:347</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a3b9722313d9692826235c87e73e94f04"><div class="ttname"><a href="classJsonObject.html#a3b9722313d9692826235c87e73e94f04">JsonObject::get_object</a></div><div class="ttdeci">JsonObject get_object(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00864">flexbuffer_json-inl.h:864</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a4d917fcb285203f91b74002565375dce"><div class="ttname"><a href="classJsonObject.html#a4d917fcb285203f91b74002565375dce">JsonObject::has_array</a></div><div class="ttdeci">bool has_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00984">flexbuffer_json-inl.h:984</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a619cb4eae7922f357db47479fc71cf9b"><div class="ttname"><a href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">JsonObject::has_member</a></div><div class="ttdeci">bool has_member(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00944">flexbuffer_json-inl.h:944</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclassJsonOut_html"><div class="ttname"><a href="classJsonOut.html">JsonOut</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00735">json.h:736</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a44cdd853d4c6913b37caa9f0131eeff2"><div class="ttname"><a href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">JsonOut::end_array</a></div><div class="ttdeci">void end_array()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02346">json.cpp:2346</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4550e2036b904c4d4a90e440dd41c684"><div class="ttname"><a href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">JsonOut::start_array</a></div><div class="ttdeci">void start_array(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02335">json.cpp:2335</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4b8c8e50e3be57e737ae971ecf2c3fd5"><div class="ttname"><a href="classJsonOut.html#a4b8c8e50e3be57e737ae971ecf2c3fd5">JsonOut::write</a></div><div class="ttdeci">void write(T val)</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00776">json.h:776</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
<div class="ttc" id="aclassSkill_html_a11c69074ce9b251983f170510808bd85"><div class="ttname"><a href="classSkill.html#a11c69074ce9b251983f170510808bd85">Skill::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00071">skill.h:71</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassavatar_html_a00bfae63e1361a778f24a24255758001"><div class="ttname"><a href="classavatar.html#a00bfae63e1361a778f24a24255758001">avatar::set_active_mission</a></div><div class="ttdeci">void set_active_mission(mission &amp;cur_mission)</div><div class="ttdoc">Set which mission is active.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00347">avatar.cpp:347</a></div></div>
<div class="ttc" id="aclassavatar_html_a064a855ec85f657a0dd39a4c385b09bc"><div class="ttname"><a href="classavatar.html#a064a855ec85f657a0dd39a4c385b09bc">avatar::reset_stats</a></div><div class="ttdeci">void reset_stats() override</div><div class="ttdoc">Resets stats, and applies effects in an idempotent manner.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00963">avatar.cpp:963</a></div></div>
<div class="ttc" id="aclassavatar_html_a0698f21d33da87261681237fef7b5002"><div class="ttname"><a href="classavatar.html#a0698f21d33da87261681237fef7b5002">avatar::advance_daily_calories</a></div><div class="ttdeci">void advance_daily_calories()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01584">avatar.cpp:1584</a></div></div>
<div class="ttc" id="aclassavatar_html_a070c1b744213489475a890af58a6dbea"><div class="ttname"><a href="classavatar.html#a070c1b744213489475a890af58a6dbea">avatar::read</a></div><div class="ttdeci">bool read(item_location &amp;book, item_location ereader={})</div><div class="ttdoc">Handles reading effects and returns true if activity started.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00432">avatar.cpp:432</a></div></div>
<div class="ttc" id="aclassavatar_html_a0c113b6c70932cce763473e04130ad9f"><div class="ttname"><a href="classavatar.html#a0c113b6c70932cce763473e04130ad9f">avatar::basic_symbol_color</a></div><div class="ttdeci">nc_color basic_symbol_color() const override</div><div class="ttdoc">Creature symbol color.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00902">avatar.cpp:902</a></div></div>
<div class="ttc" id="aclassavatar_html_a0fa909642ff8c9c62682cc06ca5616d9"><div class="ttname"><a href="classavatar.html#a0fa909642ff8c9c62682cc06ca5616d9">avatar::upgrade_stat_prompt</a></div><div class="ttdeci">void upgrade_stat_prompt(const character_stat &amp;stat_name)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01147">avatar.cpp:1147</a></div></div>
<div class="ttc" id="aclassavatar_html_a150a5b377ce94ed8828a31850ac5165b"><div class="ttname"><a href="classavatar.html#a150a5b377ce94ed8828a31850ac5165b">avatar::add_pain_msg</a></div><div class="ttdeci">void add_pain_msg(int val, const bodypart_id &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01865">avatar.cpp:1865</a></div></div>
<div class="ttc" id="aclassavatar_html_a16d5dc64ec8887ca6338949299eb69c6"><div class="ttname"><a href="classavatar.html#a16d5dc64ec8887ca6338949299eb69c6">avatar::add_spent_calories</a></div><div class="ttdeci">void add_spent_calories(int cal) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01623">avatar.cpp:1623</a></div></div>
<div class="ttc" id="aclassavatar_html_a1a267dbb3a03790f915a738ac39c8f87"><div class="ttname"><a href="classavatar.html#a1a267dbb3a03790f915a738ac39c8f87">avatar::free_upgrade_points</a></div><div class="ttdeci">int free_upgrade_points() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01134">avatar.cpp:1134</a></div></div>
<div class="ttc" id="aclassavatar_html_a1ad59a984ed559e64375bea3766105db"><div class="ttname"><a href="classavatar.html#a1ad59a984ed559e64375bea3766105db">avatar::wield</a></div><div class="ttdeci">bool wield(item_location target)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01385">avatar.cpp:1385</a></div></div>
<div class="ttc" id="aclassavatar_html_a1dc3965d2f76d5d0e4103375b4c63b72"><div class="ttname"><a href="classavatar.html#a1dc3965d2f76d5d0e4103375b4c63b72">avatar::shadow_npc</a></div><div class="ttdeci">std::unique_ptr&lt; npc &gt; shadow_npc</div><div class="ttdoc">The NPC that would control the avatar's character in the avatar's absence.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00436">avatar.h:436</a></div></div>
<div class="ttc" id="aclassavatar_html_a1e7d92dd18560909f7ca36154ba7d5ea"><div class="ttname"><a href="classavatar.html#a1e7d92dd18560909f7ca36154ba7d5ea">avatar::cycle_move_mode</a></div><div class="ttdeci">void cycle_move_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01365">avatar.cpp:1365</a></div></div>
<div class="ttc" id="aclassavatar_html_a2189ddd8d5de90d6b614172ca2b31e78"><div class="ttname"><a href="classavatar.html#a2189ddd8d5de90d6b614172ca2b31e78">avatar::player_map_memory</a></div><div class="ttdeci">std::unique_ptr&lt; map_memory &gt; player_map_memory</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00391">avatar.h:391</a></div></div>
<div class="ttc" id="aclassavatar_html_a228378b8c4d8dcc9965caa6b0669d3b3"><div class="ttname"><a href="classavatar.html#a228378b8c4d8dcc9965caa6b0669d3b3">avatar::set_movement_mode</a></div><div class="ttdeci">void set_movement_mode(const move_mode_id &amp;mode) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01307">avatar.cpp:1307</a></div></div>
<div class="ttc" id="aclassavatar_html_a248cc7684548ae2f92dae45a889ec23e"><div class="ttname"><a href="classavatar.html#a248cc7684548ae2f92dae45a889ec23e">avatar::should_show_map_memory</a></div><div class="ttdeci">bool should_show_map_memory() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00258">avatar.cpp:258</a></div></div>
<div class="ttc" id="aclassavatar_html_a2702a3d3c3a071f73f64dc3c141d8d61"><div class="ttname"><a href="classavatar.html#a2702a3d3c3a071f73f64dc3c141d8d61">avatar::is_map_memory_valid</a></div><div class="ttdeci">bool is_map_memory_valid() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00253">avatar.cpp:253</a></div></div>
<div class="ttc" id="aclassavatar_html_a2ac4ba17c0fec6f9c44fc4cd29cb3662"><div class="ttname"><a href="classavatar.html#a2ac4ba17c0fec6f9c44fc4cd29cb3662">avatar::has_mission_id</a></div><div class="ttdeci">bool has_mission_id(const mission_type_id &amp;miss_id)</div><div class="ttdoc">Returns true if character has the mission in their active missions list.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00394">avatar.cpp:394</a></div></div>
<div class="ttc" id="aclassavatar_html_a2e1e62369b3ec336c6488edd04edd8f9"><div class="ttname"><a href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">avatar::get_daily_ingested_kcal</a></div><div class="ttdeci">int get_daily_ingested_kcal(bool yesterday) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01605">avatar.cpp:1605</a></div></div>
<div class="ttc" id="aclassavatar_html_a31678fd6e26392623dbbf6a5c6564502"><div class="ttname"><a href="classavatar.html#a31678fd6e26392623dbbf6a5c6564502">avatar::select_ammo</a></div><div class="ttdeci">item::reload_option select_ammo(const item_location &amp;base, bool prompt=false, bool empty=true) override</div><div class="ttdoc">Select suitable ammo with which to reload the item.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01472">avatar.cpp:1472</a></div></div>
<div class="ttc" id="aclassavatar_html_a38a6b29bff4c2170263d00ea3822a715"><div class="ttname"><a href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">avatar::identify</a></div><div class="ttdeci">void identify(const item &amp;item) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00743">avatar.cpp:743</a></div></div>
<div class="ttc" id="aclassavatar_html_a3d788870d2bf36f540d9e333379bd39c"><div class="ttname"><a href="classavatar.html#a3d788870d2bf36f540d9e333379bd39c">avatar::aim_cache</a></div><div class="ttdeci">cata::mdarray&lt; bool, point_bub_ms &gt; aim_cache</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00439">avatar.h:439</a></div></div>
<div class="ttc" id="aclassavatar_html_a3f93e313b981c8a9a70f651d3cd4bbf3"><div class="ttname"><a href="classavatar.html#a3f93e313b981c8a9a70f651d3cd4bbf3">avatar::memorize_decoration</a></div><div class="ttdeci">void memorize_decoration(const tripoint_abs_ms &amp;p, std::string_view id, int subtile, int rotation)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00295">avatar.cpp:295</a></div></div>
<div class="ttc" id="aclassavatar_html_a3fe7bbe225126bee662ce6127526cdfb"><div class="ttname"><a href="classavatar.html#a3fe7bbe225126bee662ce6127526cdfb">avatar::get_grab_type</a></div><div class="ttdeci">object_type get_grab_type() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00733">avatar.cpp:733</a></div></div>
<div class="ttc" id="aclassavatar_html_a4182354816e64fa9d18a9f36f6873131"><div class="ttname"><a href="classavatar.html#a4182354816e64fa9d18a9f36f6873131">avatar::get_active_mission</a></div><div class="ttdeci">mission * get_active_mission() const</div><div class="ttdoc">Returns the mission that is currently active.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00326">avatar.cpp:326</a></div></div>
<div class="ttc" id="aclassavatar_html_a4198c108f2bb3c70956bb35d7c666f7b"><div class="ttname"><a href="classavatar.html#a4198c108f2bb3c70956bb35d7c666f7b">avatar::print_info</a></div><div class="ttdeci">int print_info(const catacurses::window &amp;w, int vStart, int vLines, int column) const override</div><div class="ttdoc">Write information about this creature.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00931">avatar.cpp:931</a></div></div>
<div class="ttc" id="aclassavatar_html_a431f0d0d9043f9ab57bf092e436b2a52"><div class="ttname"><a href="classavatar.html#a431f0d0d9043f9ab57bf092e436b2a52">avatar::wield_contents</a></div><div class="ttdeci">bool wield_contents(item &amp;container, item *internal_item=nullptr, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY)</div><div class="ttdoc">Try to wield a contained item consuming moves proportional to weapon skill and volume.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01902">avatar.cpp:1902</a></div></div>
<div class="ttc" id="aclassavatar_html_a442dd75dc4462353f4d75c84ab77cf82"><div class="ttname"><a href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82">avatar::get_daily_spent_kcal</a></div><div class="ttdeci">int get_daily_spent_kcal(bool yesterday) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01592">avatar.cpp:1592</a></div></div>
<div class="ttc" id="aclassavatar_html_a47ef71a39b5845920b1ba0a87a8cb200"><div class="ttname"><a href="classavatar.html#a47ef71a39b5845920b1ba0a87a8cb200">avatar::invoke_item</a></div><div class="ttdeci">virtual bool invoke_item(item *, const tripoint &amp;pt, int pre_obtain_moves=-1)</div><div class="ttdoc">Asks how to use the item (if it has more than one use_method) and uses it.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01923">character.cpp:7149</a></div></div>
<div class="ttc" id="aclassavatar_html_a4c07a102dc6e18b31eea927c5297bf01"><div class="ttname"><a href="classavatar.html#a4c07a102dc6e18b31eea927c5297bf01">avatar::update_cardio_acc</a></div><div class="ttdeci">void update_cardio_acc() override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01551">avatar.cpp:1551</a></div></div>
<div class="ttc" id="aclassavatar_html_a4cfc5a1088f2c47cad459ba08a4b7504"><div class="ttname"><a href="classavatar.html#a4cfc5a1088f2c47cad459ba08a4b7504">avatar::save_map_memory</a></div><div class="ttdeci">bool save_map_memory()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00266">avatar.cpp:266</a></div></div>
<div class="ttc" id="aclassavatar_html_a4edad4ae6301de98fd880ea45a01c448"><div class="ttname"><a href="classavatar.html#a4edad4ae6301de98fd880ea45a01c448">avatar::items_identified</a></div><div class="ttdeci">std::unordered_set&lt; itype_id &gt; items_identified</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00423">avatar.h:423</a></div></div>
<div class="ttc" id="aclassavatar_html_a4ee0e4b06382c473ec8f4fb7c14b7c88"><div class="ttname"><a href="classavatar.html#a4ee0e4b06382c473ec8f4fb7c14b7c88">avatar::character_mood_face</a></div><div class="ttdeci">const mood_face_id &amp; character_mood_face(bool clear_cache=false) const</div><div class="ttdef"><b>Definition:</b> <a href="mood__face_8cpp_source.html#l00066">mood_face.cpp:66</a></div></div>
<div class="ttc" id="aclassavatar_html_a564acaf48366141fa00b3361c113cca5"><div class="ttname"><a href="classavatar.html#a564acaf48366141fa00b3361c113cca5">avatar::completed_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; completed_missions</div><div class="ttdoc">Missions that the player has successfully completed.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00403">avatar.h:403</a></div></div>
<div class="ttc" id="aclassavatar_html_a56d9f1444d91d0692744ba2caac7dae8"><div class="ttname"><a href="classavatar.html#a56d9f1444d91d0692744ba2caac7dae8">avatar::get_snippets</a></div><div class="ttdeci">const std::set&lt; snippet_id &gt; &amp; get_snippets()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00864">avatar.cpp:864</a></div></div>
<div class="ttc" id="aclassavatar_html_a5914c9812e809ca1e43173118c7aa5ec"><div class="ttname"><a href="classavatar.html#a5914c9812e809ca1e43173118c7aa5ec">avatar::~avatar</a></div><div class="ttdeci">~avatar() override</div></div>
<div class="ttc" id="aclassavatar_html_a5ba10797079b08c7a31c1dd5a1437e9f"><div class="ttname"><a href="classavatar.html#a5ba10797079b08c7a31c1dd5a1437e9f">avatar::failed_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; failed_missions</div><div class="ttdoc">Missions that have failed while being assigned to the player.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00407">avatar.h:407</a></div></div>
<div class="ttc" id="aclassavatar_html_a5dba2eeda46f94995f1b4181c2f71499"><div class="ttname"><a href="classavatar.html#a5dba2eeda46f94995f1b4181c2f71499">avatar::vomit</a></div><div class="ttdeci">void vomit()</div><div class="ttdoc">Handles player vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00869">avatar.cpp:869</a></div></div>
<div class="ttc" id="aclassavatar_html_a636f7addec9a39ee06b733d8f6d0e0ba"><div class="ttname"><a href="classavatar.html#a636f7addec9a39ee06b733d8f6d0e0ba">avatar::clear_identified</a></div><div class="ttdeci">void clear_identified()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00827">avatar.cpp:827</a></div></div>
<div class="ttc" id="aclassavatar_html_a68bbe6837937efefaa91d7d13304db7d"><div class="ttname"><a href="classavatar.html#a68bbe6837937efefaa91d7d13304db7d">avatar::longpull</a></div><div class="ttdeci">void longpull(const std::string &amp;name)</div><div class="ttdoc">Opens the targeting menu to pull a nearby creature towards the character.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00235">avatar.cpp:235</a></div></div>
<div class="ttc" id="aclassavatar_html_a69c6abbd56c85f3aa8ff275908c0aeba"><div class="ttname"><a href="classavatar.html#a69c6abbd56c85f3aa8ff275908c0aeba">avatar::activate_crouch_mode</a></div><div class="ttdeci">void activate_crouch_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01351">avatar.cpp:1351</a></div></div>
<div class="ttc" id="aclassavatar_html_a6a1fb5db7eeb5cd2c973318ed9546f7c"><div class="ttname"><a href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">avatar::has_identified</a></div><div class="ttdeci">bool has_identified(const itype_id &amp;item_id) const override</div><div class="ttdoc">Note that we've read a book at least once.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00738">avatar.cpp:738</a></div></div>
<div class="ttc" id="aclassavatar_html_a6cf703e3582ab38ec9eda6fd38d67328"><div class="ttname"><a href="classavatar.html#a6cf703e3582ab38ec9eda6fd38d67328">avatar::query_yn</a></div><div class="ttdeci">virtual bool query_yn(const std::string &amp;msg) const=0</div></div>
<div class="ttc" id="aclassavatar_html_a6ec30083e8dea5cac8879b5a9a84fceb"><div class="ttname"><a href="classavatar.html#a6ec30083e8dea5cac8879b5a9a84fceb">avatar::toggle_map_memory</a></div><div class="ttdeci">void toggle_map_memory()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00248">avatar.cpp:248</a></div></div>
<div class="ttc" id="aclassavatar_html_a6f24a1b5b15acba20c986345f0294b6d"><div class="ttname"><a href="classavatar.html#a6f24a1b5b15acba20c986345f0294b6d">avatar::cycle_move_mode_reverse</a></div><div class="ttdeci">void cycle_move_mode_reverse()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01375">avatar.cpp:1375</a></div></div>
<div class="ttc" id="aclassavatar_html_a73c5cdc86dbe8861397ac85d22122d12"><div class="ttname"><a href="classavatar.html#a73c5cdc86dbe8861397ac85d22122d12">avatar::get_memorized_tile</a></div><div class="ttdeci">const memorized_tile &amp; get_memorized_tile(const tripoint_abs_ms &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00281">avatar.cpp:281</a></div></div>
<div class="ttc" id="aclassavatar_html_a7d4c908c964c354d7dd9c24892065bf5"><div class="ttname"><a href="classavatar.html#a7d4c908c964c354d7dd9c24892065bf5">avatar::load_map_memory</a></div><div class="ttdeci">void load_map_memory()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00271">avatar.cpp:271</a></div></div>
<div class="ttc" id="aclassavatar_html_a8344dc1c4b8cd02a9633f3275cc69a2d"><div class="ttname"><a href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">avatar::aim_cache_dirty</a></div><div class="ttdeci">bool aim_cache_dirty</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00381">avatar.h:381</a></div></div>
<div class="ttc" id="aclassavatar_html_a84371498e35f55357d1104e71afce540"><div class="ttname"><a href="classavatar.html#a84371498e35f55357d1104e71afce540">avatar::grab_type</a></div><div class="ttdeci">object_type grab_type</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00428">avatar.h:428</a></div></div>
<div class="ttc" id="aclassavatar_html_a8604832bf1612a4a61f959a2079e68b2"><div class="ttname"><a href="classavatar.html#a8604832bf1612a4a61f959a2079e68b2">avatar::set_location</a></div><div class="ttdeci">void set_location(const tripoint_abs_ms &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l02054">avatar.cpp:2054</a></div></div>
<div class="ttc" id="aclassavatar_html_a876031ea6847647c17d9d65b8d0b4fb1"><div class="ttname"><a href="classavatar.html#a876031ea6847647c17d9d65b8d0b4fb1">avatar::get_monster_faction</a></div><div class="ttdeci">mfaction_id get_monster_faction() const override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00938">avatar.cpp:938</a></div></div>
<div class="ttc" id="aclassavatar_html_a88bb46be41a2d8a1ccda560fe9ca3872"><div class="ttname"><a href="classavatar.html#a88bb46be41a2d8a1ccda560fe9ca3872">avatar::avatar</a></div><div class="ttdeci">avatar()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00160">avatar.cpp:160</a></div></div>
<div class="ttc" id="aclassavatar_html_a8e0f8b762a3c2023adda8062934f1a3c"><div class="ttname"><a href="classavatar.html#a8e0f8b762a3c2023adda8062934f1a3c">avatar::get_completed_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; get_completed_missions() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00316">avatar.cpp:316</a></div></div>
<div class="ttc" id="aclassavatar_html_a8f968a043376121130a5cfc5d578b648"><div class="ttname"><a href="classavatar.html#a8f968a043376121130a5cfc5d578b648">avatar::control_npc</a></div><div class="ttdeci">void control_npc(npc &amp;, bool debug=false)</div><div class="ttdoc">Makes the avatar &quot;take over&quot; the given NPC, while the current avatar character becomes an NPC.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00176">avatar.cpp:176</a></div></div>
<div class="ttc" id="aclassavatar_html_a90125323cf9c7aa8e5e37c36da0cbae5"><div class="ttname"><a href="classavatar.html#a90125323cf9c7aa8e5e37c36da0cbae5">avatar::is_ally</a></div><div class="ttdeci">bool is_ally(const Character &amp;p) const override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01215">avatar.cpp:1215</a></div></div>
<div class="ttc" id="aclassavatar_html_a95a9eee8456c42808a666ad2a72b6a78"><div class="ttname"><a href="classavatar.html#a95a9eee8456c42808a666ad2a72b6a78">avatar::log_activity_level</a></div><div class="ttdeci">void log_activity_level(float level) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01633">avatar.cpp:1633</a></div></div>
<div class="ttc" id="aclassavatar_html_a9778980e66d2f6587c6ac9e00eae5006"><div class="ttname"><a href="classavatar.html#a9778980e66d2f6587c6ac9e00eae5006">avatar::get_avatar_diary</a></div><div class="ttdeci">diary * get_avatar_diary()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00424">avatar.cpp:424</a></div></div>
<div class="ttc" id="aclassavatar_html_a9c40a50429a13a1a3d0e7d38d93e72f4"><div class="ttname"><a href="classavatar.html#a9c40a50429a13a1a3d0e7d38d93e72f4">avatar::get_active_mission_target</a></div><div class="ttdeci">tripoint_abs_omt get_active_mission_target() const</div><div class="ttdoc">Returns the target of the active mission or overmap::invalid_tripoint if there is no active mission.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00339">avatar.cpp:339</a></div></div>
<div class="ttc" id="aclassavatar_html_aa386699e6b2e7a85f60cdcb81d17538f"><div class="ttname"><a href="classavatar.html#aa386699e6b2e7a85f60cdcb81d17538f">avatar::memorize_clear_decoration</a></div><div class="ttdeci">void memorize_clear_decoration(const tripoint_abs_ms &amp;p, std::string_view prefix=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00306">avatar.cpp:306</a></div></div>
<div class="ttc" id="aclassavatar_html_aa3958dc898057ef6fd284fa68a6d0f1e"><div class="ttname"><a href="classavatar.html#aa3958dc898057ef6fd284fa68a6d0f1e">avatar::reassign_item</a></div><div class="ttdeci">void reassign_item(item &amp;it, int invlet)</div><div class="ttdoc">Reassign letter.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01841">avatar.cpp:1841</a></div></div>
<div class="ttc" id="aclassavatar_html_aa863f2e803ad611d327fe05ac46191ae"><div class="ttname"><a href="classavatar.html#aa863f2e803ad611d327fe05ac46191ae">avatar::clear_nutrition</a></div><div class="ttdeci">void clear_nutrition()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00820">avatar.cpp:820</a></div></div>
<div class="ttc" id="aclassavatar_html_ab0020a41db32a32aefbc46182e9c9528"><div class="ttname"><a href="classavatar.html#ab0020a41db32a32aefbc46182e9c9528">avatar::active_mission</a></div><div class="ttdeci">mission * active_mission</div><div class="ttdoc">The currently active mission, or null if no mission is currently in progress.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00411">avatar.h:411</a></div></div>
<div class="ttc" id="aclassavatar_html_ab10e5fb6060bc9dd059974b366103d6d"><div class="ttname"><a href="classavatar.html#ab10e5fb6060bc9dd059974b366103d6d">avatar::toggle_crouch_mode</a></div><div class="ttdeci">void toggle_crouch_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01334">avatar.cpp:1334</a></div></div>
<div class="ttc" id="aclassavatar_html_ab19cabc9e315ac018646a3b49d26bdf0"><div class="ttname"><a href="classavatar.html#ab19cabc9e315ac018646a3b49d26bdf0">avatar::memorize_terrain</a></div><div class="ttdeci">void memorize_terrain(const tripoint_abs_ms &amp;p, std::string_view id, int subtile, int rotation)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00289">avatar.cpp:289</a></div></div>
<div class="ttc" id="aclassavatar_html_ab6e59125d481438c7481444c3ce78617"><div class="ttname"><a href="classavatar.html#ab6e59125d481438c7481444c3ce78617">avatar::a_diary</a></div><div class="ttdeci">std::unique_ptr&lt; diary &gt; a_diary</div><div class="ttdoc">diary to track player progression and to write the players stroy</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00415">avatar.h:415</a></div></div>
<div class="ttc" id="aclassavatar_html_ab9d7689c7af3f73b1adc4c434b426d29"><div class="ttname"><a href="classavatar.html#ab9d7689c7af3f73b1adc4c434b426d29">avatar::get_active_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; get_active_missions() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00311">avatar.cpp:311</a></div></div>
<div class="ttc" id="aclassavatar_html_ab9f3bf2c2864aaefbc62e22f082ff000"><div class="ttname"><a href="classavatar.html#ab9f3bf2c2864aaefbc62e22f082ff000">avatar::toggle_run_mode</a></div><div class="ttdeci">void toggle_run_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01325">avatar.cpp:1325</a></div></div>
<div class="ttc" id="aclassavatar_html_abb59991d0b221eb936a69c28df755da8"><div class="ttname"><a href="classavatar.html#abb59991d0b221eb936a69c28df755da8">avatar::snippets_read</a></div><div class="ttdeci">std::set&lt; snippet_id &gt; snippets_read</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00426">avatar.h:426</a></div></div>
<div class="ttc" id="aclassavatar_html_ac0150ee6fda3f767a0e6cb3b0d769032"><div class="ttname"><a href="classavatar.html#ac0150ee6fda3f767a0e6cb3b0d769032">avatar::try_break_relax_gas</a></div><div class="ttdeci">bool try_break_relax_gas(const std::string &amp;msg_success, const std::string &amp;msg_failure)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00887">avatar.cpp:887</a></div></div>
<div class="ttc" id="aclassavatar_html_ac4c2acc8936573d60bb74d309654dd28"><div class="ttname"><a href="classavatar.html#ac4c2acc8936573d60bb74d309654dd28">avatar::toggle_prone_mode</a></div><div class="ttdeci">void toggle_prone_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01343">avatar.cpp:1343</a></div></div>
<div class="ttc" id="aclassavatar_html_ac92bea5372876bca04ef3c2a3a237c79"><div class="ttname"><a href="classavatar.html#ac92bea5372876bca04ef3c2a3a237c79">avatar::export_as_npc</a></div><div class="ttdeci">void export_as_npc(const cata_path &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l02070">avatar.cpp:2070</a></div></div>
<div class="ttc" id="aclassavatar_html_acb364421bb9cfdb88c8fa2383ba17dcb"><div class="ttname"><a href="classavatar.html#acb364421bb9cfdb88c8fa2383ba17dcb">avatar::get_failed_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; get_failed_missions() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00321">avatar.cpp:321</a></div></div>
<div class="ttc" id="aclassavatar_html_acd38b68669752e6a658b686ae5dac2c4"><div class="ttname"><a href="classavatar.html#acd38b68669752e6a658b686ae5dac2c4">avatar::memorize_symbol</a></div><div class="ttdeci">void memorize_symbol(const tripoint_abs_ms &amp;p, char32_t symbol)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00301">avatar.cpp:301</a></div></div>
<div class="ttc" id="aclassavatar_html_ace1eb09441d228faf4c1dad4edfeee4a"><div class="ttname"><a href="classavatar.html#ace1eb09441d228faf4c1dad4edfeee4a">avatar::total_daily_calories_string</a></div><div class="ttdeci">std::string total_daily_calories_string() const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01706">avatar.cpp:1706</a></div></div>
<div class="ttc" id="aclassavatar_html_aced1c67b31f5ed8287040348ab18ea8f"><div class="ttname"><a href="classavatar.html#aced1c67b31f5ed8287040348ab18ea8f">avatar::is_obeying</a></div><div class="ttdeci">bool is_obeying(const Character &amp;p) const override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01224">avatar.cpp:1224</a></div></div>
<div class="ttc" id="aclassavatar_html_ad6f9f354206620723ff007995f669963"><div class="ttname"><a href="classavatar.html#ad6f9f354206620723ff007995f669963">avatar::on_mission_finished</a></div><div class="ttdeci">void on_mission_finished(mission &amp;cur_mission)</div><div class="ttdoc">Called when a mission has been completed or failed.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00364">avatar.cpp:364</a></div></div>
<div class="ttc" id="aclassavatar_html_ad797797c461321ea1bbb8f4d125e2b66"><div class="ttname"><a href="classavatar.html#ad797797c461321ea1bbb8f4d125e2b66">avatar::active_missions</a></div><div class="ttdeci">std::vector&lt; mission * &gt; active_missions</div><div class="ttdoc">Missions that the player has accepted and that are not finished (one way or the other).</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00399">avatar.h:399</a></div></div>
<div class="ttc" id="aclassavatar_html_ad9f996cafc4e58efd7931116da025de5"><div class="ttname"><a href="classavatar.html#ad9f996cafc4e58efd7931116da025de5">avatar::has_seen_snippet</a></div><div class="ttdeci">bool has_seen_snippet(const snippet_id &amp;snippet) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00859">avatar.cpp:859</a></div></div>
<div class="ttc" id="aclassavatar_html_adabb0f86710fd8c6505f7a902af58226"><div class="ttname"><a href="classavatar.html#adabb0f86710fd8c6505f7a902af58226">avatar::add_random_hobby</a></div><div class="ttdeci">void add_random_hobby(std::vector&lt; profession_id &gt; &amp;choices)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01830">avatar.cpp:1830</a></div></div>
<div class="ttc" id="aclassavatar_html_adcd442574ee8441af971162f8d9857be"><div class="ttname"><a href="classavatar.html#adcd442574ee8441af971162f8d9857be">avatar::add_snippet</a></div><div class="ttdeci">void add_snippet(snippet_id snippet)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00850">avatar.cpp:850</a></div></div>
<div class="ttc" id="aclassavatar_html_ae02571ea21f34f48a44f3e9d5242c08f"><div class="ttname"><a href="classavatar.html#ae02571ea21f34f48a44f3e9d5242c08f">avatar::remove_active_mission</a></div><div class="ttdeci">void remove_active_mission(mission &amp;cur_mission)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00404">avatar.cpp:404</a></div></div>
<div class="ttc" id="aclassavatar_html_ae10c26ee9266084346b8da1d41abf33c"><div class="ttname"><a href="classavatar.html#ae10c26ee9266084346b8da1d41abf33c">avatar::operator=</a></div><div class="ttdeci">avatar &amp; operator=(const avatar &amp;)=delete</div></div>
<div class="ttc" id="aclassavatar_html_ae30cd3f5d76ab5f173cf720d6b7aada7"><div class="ttname"><a href="classavatar.html#ae30cd3f5d76ab5f173cf720d6b7aada7">avatar::show_map_memory</a></div><div class="ttdeci">bool show_map_memory</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00392">avatar.h:392</a></div></div>
<div class="ttc" id="aclassavatar_html_ae725b627365617ad8ee7e0d1d3297728"><div class="ttname"><a href="classavatar.html#ae725b627365617ad8ee7e0d1d3297728">avatar::control_npc_menu</a></div><div class="ttdeci">void control_npc_menu(bool debug=false)</div><div class="ttdoc">Open a menu to choose the NPC to take over.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00211">avatar.cpp:211</a></div></div>
<div class="ttc" id="aclassavatar_html_ae73c56da5377b57b9a09ac5c6affa4c1"><div class="ttname"><a href="classavatar.html#ae73c56da5377b57b9a09ac5c6affa4c1">avatar::disp_morale</a></div><div class="ttdeci">void disp_morale()</div><div class="ttdoc">Provides the window and detailed morale data.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00943">avatar.cpp:943</a></div></div>
<div class="ttc" id="aclassavatar_html_ae8ce7a37a82a161735e383882ee7b3c0"><div class="ttname"><a href="classavatar.html#ae8ce7a37a82a161735e383882ee7b3c0">avatar::grab</a></div><div class="ttdeci">void grab(object_type grab_type, const tripoint &amp;grab_point=tripoint_zero)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00699">avatar.cpp:699</a></div></div>
<div class="ttc" id="aclassavatar_html_aeb3d6148ca381978e3cc60d892846828"><div class="ttname"><a href="classavatar.html#aeb3d6148ca381978e3cc60d892846828">avatar::cant_see</a></div><div class="ttdeci">bool cant_see(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01233">avatar.cpp:1233</a></div></div>
<div class="ttc" id="aclassavatar_html_aeeb4184fd41835431d91efc8570e6cd1"><div class="ttname"><a href="classavatar.html#aeeb4184fd41835431d91efc8570e6cd1">avatar::on_mission_assignment</a></div><div class="ttdeci">void on_mission_assignment(mission &amp;new_mission)</div><div class="ttdoc">Called when a mission has been assigned to the player.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00358">avatar.cpp:358</a></div></div>
<div class="ttc" id="aclassavatar_html_af0f0d2b403b5ba6cf29890dd04dabe12"><div class="ttname"><a href="classavatar.html#af0f0d2b403b5ba6cf29890dd04dabe12">avatar::try_to_sleep</a></div><div class="ttdeci">void try_to_sleep(const time_duration &amp;dur)</div><div class="ttdoc">Handles sleep attempts by the player, starts ACT_TRY_SLEEP activity.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01926">avatar.cpp:1926</a></div></div>
<div class="ttc" id="aclassavatar_html_af1bd66ecd6f1740d590393d5060b4cdb"><div class="ttname"><a href="classavatar.html#af1bd66ecd6f1740d590393d5060b4cdb">avatar::get_shadow_npc</a></div><div class="ttdeci">npc &amp; get_shadow_npc()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l02059">avatar.cpp:2059</a></div></div>
<div class="ttc" id="aclassavatar_html_af36035af0be319801dade07750ebc8e1"><div class="ttname"><a href="classavatar.html#af36035af0be319801dade07750ebc8e1">avatar::calorie_diary</a></div><div class="ttdeci">std::list&lt; daily_calories &gt; calorie_diary</div><div class="ttdoc">The amount of calories spent and gained per day for the last 30 days.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00420">avatar.h:420</a></div></div>
<div class="ttc" id="aclassavatar_html_af36fcea90558019acce120be1fd9eb76"><div class="ttname"><a href="classavatar.html#af36fcea90558019acce120be1fd9eb76">avatar::randomize_hobbies</a></div><div class="ttdeci">void randomize_hobbies()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01804">avatar.cpp:1804</a></div></div>
<div class="ttc" id="aclassavatar_html_af690d039ef033cc62fe6c43a9519bb1d"><div class="ttname"><a href="classavatar.html#af690d039ef033cc62fe6c43a9519bb1d">avatar::prepare_map_memory_region</a></div><div class="ttdeci">void prepare_map_memory_region(const tripoint_abs_ms &amp;p1, const tripoint_abs_ms &amp;p2)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00276">avatar.cpp:276</a></div></div>
<div class="ttc" id="aclassavatar_html_af94b71a9d5957236d1c205a17e855b96"><div class="ttname"><a href="classavatar.html#af94b71a9d5957236d1c205a17e855b96">avatar::wake_up</a></div><div class="ttdeci">void wake_up() override</div><div class="ttdoc">Removes &quot;sleep&quot; and &quot;lying_down&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00832">avatar.cpp:832</a></div></div>
<div class="ttc" id="aclassavatar_html_af9dff5fc4b44f847b051bd1c0cd16579"><div class="ttname"><a href="classavatar.html#af9dff5fc4b44f847b051bd1c0cd16579">avatar::add_gained_calories</a></div><div class="ttdeci">void add_gained_calories(int cal) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01628">avatar.cpp:1628</a></div></div>
<div class="ttc" id="aclassavatar_html_afc69f2fb0562c4789c69aee0ec1bf201"><div class="ttname"><a href="classavatar.html#afc69f2fb0562c4789c69aee0ec1bf201">avatar::reset_all_missions</a></div><div class="ttdeci">void reset_all_missions()</div><div class="ttdoc">Resets all missions before saving character to template.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00331">avatar.cpp:331</a></div></div>
<div class="ttc" id="aclassavatar_html_afe83b617efab7d97dbf45384c0948633"><div class="ttname"><a href="classavatar.html#afe83b617efab7d97dbf45384c0948633">avatar::rebuild_aim_cache</a></div><div class="ttdeci">void rebuild_aim_cache()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01248">avatar.cpp:1248</a></div></div>
<div class="ttc" id="aclassavatar_html_afe96b5b38706039d754e6d9e052217bb"><div class="ttname"><a href="classavatar.html#afe96b5b38706039d754e6d9e052217bb">avatar::reset_move_mode</a></div><div class="ttdeci">void reset_move_mode()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01358">avatar.cpp:1358</a></div></div>
<div class="ttc" id="aclassavatar_html_afec8778f4d75bec620dad82c69af0071"><div class="ttname"><a href="classavatar.html#afec8778f4d75bec620dad82c69af0071">avatar::get_faction</a></div><div class="ttdeci">faction * get_faction() const override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01210">avatar.cpp:1210</a></div></div>
<div class="ttc" id="aclassavatar_html_afec92019a1c7cdbe52dc959faccdf1ba"><div class="ttname"><a href="classavatar.html#afec92019a1c7cdbe52dc959faccdf1ba">avatar::add_ingested_kcal</a></div><div class="ttdeci">void add_ingested_kcal(int kcal)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01618">avatar.cpp:1618</a></div></div>
<div class="ttc" id="aclasscata_1_1event_html"><div class="ttname"><a href="classcata_1_1event.html">cata::event</a></div><div class="ttdef"><b>Definition:</b> <a href="event_8h_source.html#l00923">event.h:924</a></div></div>
<div class="ttc" id="aclasscata_1_1value__ptr_html"><div class="ttname"><a href="classcata_1_1value__ptr.html">cata::value_ptr&lt; islot_book &gt;</a></div></div>
<div class="ttc" id="aclasscata__path_html"><div class="ttname"><a href="classcata__path.html">cata_path</a></div><div class="ttdoc">One of the problems of filesystem paths is they lack contextual awareness of 'where' they are.</div><div class="ttdef"><b>Definition:</b> <a href="cata__path_8h_source.html#l00033">cata_path.h:34</a></div></div>
<div class="ttc" id="aclasscatacurses_1_1window_html"><div class="ttname"><a href="classcatacurses_1_1window.html">catacurses::window</a></div><div class="ttdoc">A wrapper over a pointer to a curses window.</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00054">cursesdef.h:55</a></div></div>
<div class="ttc" id="aclasscharacter__id_html"><div class="ttname"><a href="classcharacter__id.html">character_id</a></div><div class="ttdef"><b>Definition:</b> <a href="character__id_8h_source.html#l00009">character_id.h:10</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclassdiary_html"><div class="ttname"><a href="classdiary.html">diary</a></div><div class="ttdoc">Diary is connected to the player avatar.</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00076">diary.h:77</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00260">effect.h:261</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01068">effect.cpp:1068</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00767">effect.cpp:767</a></div></div>
<div class="ttc" id="aclasseffect_html_a40265c904a684396b45a347239e38782"><div class="ttname"><a href="classeffect.html#a40265c904a684396b45a347239e38782">effect::set_duration</a></div><div class="ttdeci">void set_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Sets the duration, capping at max duration.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01076">effect.cpp:1076</a></div></div>
<div class="ttc" id="aclasseffect_html_a68192c5a91cf7ad4618263ba3de8b802"><div class="ttname"><a href="classeffect.html#a68192c5a91cf7ad4618263ba3de8b802">effect::get_intensity</a></div><div class="ttdeci">int get_intensity() const</div><div class="ttdoc">Returns the intensity of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01188">effect.cpp:1188</a></div></div>
<div class="ttc" id="aclasseffect_html_ae39c587cde27fc8512aee5491026006b"><div class="ttname"><a href="classeffect.html#ae39c587cde27fc8512aee5491026006b">effect::get_mod</a></div><div class="ttdeci">int get_mod(const std::string &amp;arg, bool reduced=false) const</div><div class="ttdoc">Returns the matching modifier type from an effect, used for getting actual effect effects.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01265">effect.cpp:1265</a></div></div>
<div class="ttc" id="aclassevent__bus_html_a29fab483aed46dcf2697e6e504e685dc"><div class="ttname"><a href="classevent__bus.html#a29fab483aed46dcf2697e6e504e685dc">event_bus::send_with_talker</a></div><div class="ttdeci">void send_with_talker(Creature *, Creature *, const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00085">event_bus.cpp:85</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassfaction_html"><div class="ttname"><a href="classfaction.html">faction</a></div><div class="ttdef"><b>Definition:</b> <a href="faction_8h_source.html#l00126">faction.h:127</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; monfaction &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassinvlet__wrapper_html_a7c0b7eaf67cf02bae041ada17aa1f71d"><div class="ttname"><a href="classinvlet__wrapper.html#a7c0b7eaf67cf02bae041ada17aa1f71d">invlet_wrapper::valid</a></div><div class="ttdeci">bool valid(int invlet) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00059">inventory.cpp:59</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html"><div class="ttname"><a href="classitem_1_1reload__option.html">item::reload_option</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00550">item.h:551</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_ac61eb40367834d791602ff3a2ca5c5a9"><div class="ttname"><a href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">item_location::obtain_cost</a></div><div class="ttdeci">int obtain_cost(const Character &amp;ch, int qty=-1) const</div><div class="ttdoc">Calculate (but do not deduct) number of moves required to obtain an item.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01036">item_location.cpp:1036</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a10898a02e2696873c90e6b9ea3aca7bc"><div class="ttname"><a href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a></div><div class="ttdeci">std::list&lt; const item * &gt; all_items_top() const</div><div class="ttdoc">returns a list of pointers to all top-level items that are not mods</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14951">item.cpp:14951</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_a71dac02bae8b97487391d5540a89bc1c"><div class="ttname"><a href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">item::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;use_name) const</div><div class="ttdoc">Returns the pointer to use_function with name use_name assigned to the type of this item or any of it...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11463">item.cpp:11463</a></div></div>
<div class="ttc" id="aclassitem_html_a8673667a3d9507e9b7c66be499e51d80"><div class="ttname"><a href="classitem.html#a8673667a3d9507e9b7c66be499e51d80">item::on_takeoff</a></div><div class="ttdeci">void on_takeoff(Character &amp;p)</div><div class="ttdoc">Callback when a character takes off an item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06525">item.cpp:6525</a></div></div>
<div class="ttc" id="aclassitem_html_a980b9e48afd103973a201fc487d0af8b"><div class="ttname"><a href="classitem.html#a980b9e48afd103973a201fc487d0af8b">item::is_book</a></div><div class="ttdeci">bool is_book() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09628">item.cpp:9628</a></div></div>
<div class="ttc" id="aclassitem_html_a9fbebe808fb497b219858f7a61fa8419"><div class="ttname"><a href="classitem.html#a9fbebe808fb497b219858f7a61fa8419">item::on_wield</a></div><div class="ttdeci">void on_wield(Character &amp;you)</div><div class="ttdoc">Callback when a player starts wielding the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06570">item.cpp:6570</a></div></div>
<div class="ttc" id="aclassitem_html_aaaa8e9d52bfe10d10fa4d44c1d2fdc52"><div class="ttname"><a href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">item::combine</a></div><div class="ttdeci">bool combine(const item &amp;rhs)</div><div class="ttdoc">combines two items together if possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01397">item.cpp:1397</a></div></div>
<div class="ttc" id="aclassitem_html_aaf38b59b3f6c11e04845ae782a4ba2e1"><div class="ttname"><a href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">item::use_relic</a></div><div class="ttdeci">bool use_relic(Character &amp;guy, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13040">item.cpp:13040</a></div></div>
<div class="ttc" id="aclassitem_html_ab8b0e2273c6555d01adbe242697940ab"><div class="ttname"><a href="classitem.html#ab8b0e2273c6555d01adbe242697940ab">item::can_combine</a></div><div class="ttdeci">bool can_combine(const item &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01383">item.cpp:1383</a></div></div>
<div class="ttc" id="aclassitem_html_abfb7ed1fed5f72c532192eb33e6c4962"><div class="ttname"><a href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14449">item.cpp:14449</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassitem_html_acf89390a6191405cc59bc902cb3f1609"><div class="ttname"><a href="classitem.html#acf89390a6191405cc59bc902cb3f1609">item::has_relic_activation</a></div><div class="ttdeci">bool has_relic_activation() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09989">item.cpp:9989</a></div></div>
<div class="ttc" id="aclassitem_html_af38d78ce6d128f6c7a1999b7f9e00965"><div class="ttname"><a href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">item::invlet</a></div><div class="ttdeci">char invlet</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03211">item.h:3211</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a02ff5fbdbdb3df97210f4874c41fd75a"><div class="ttname"><a href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">map::remove_field</a></div><div class="ttdeci">void remove_field(const tripoint &amp;p, const field_type_id &amp;field_to_remove)</div><div class="ttdoc">Remove field entry at xy, ignored if the field entry is not present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06630">map.cpp:6630</a></div></div>
<div class="ttc" id="aclassmap_html_a1807357b0f079f62746e9fe4c117b592"><div class="ttname"><a href="classmap.html#a1807357b0f079f62746e9fe4c117b592">map::memory_cache_dec_set_dirty</a></div><div class="ttdeci">void memory_cache_dec_set_dirty(const tripoint &amp;p, bool value) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00336">map.cpp:336</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06213">map.cpp:6213</a></div></div>
<div class="ttc" id="aclassmap_html_a34f983a946812fa51de439bd68f6dc09"><div class="ttname"><a href="classmap.html#a34f983a946812fa51de439bd68f6dc09">map::get_field_intensity</a></div><div class="ttdeci">int get_field_intensity(const tripoint &amp;p, const field_type_id &amp;type) const</div><div class="ttdoc">Get the intensity of a field entry (field_entry::intensity), if there is no field of that type,...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06476">map.cpp:6476</a></div></div>
<div class="ttc" id="aclassmap_html_a426c21f7244ff80a61685a89e9146fec"><div class="ttname"><a href="classmap.html#a426c21f7244ff80a61685a89e9146fec">map::getlocal</a></div><div class="ttdeci">tripoint getlocal(const tripoint &amp;p) const</div><div class="ttdoc">Inverse of getabs.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09635">map.cpp:9635</a></div></div>
<div class="ttc" id="aclassmap_html_a4fb2eb743dcaef576cea6790d17aa32e"><div class="ttname"><a href="classmap.html#a4fb2eb743dcaef576cea6790d17aa32e">map::set_seen_cache_dirty</a></div><div class="ttdeci">void set_seen_cache_dirty(const tripoint &amp;change_location)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00291">map.cpp:291</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03122">map.cpp:3122</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01922">map.cpp:1922</a></div></div>
<div class="ttc" id="aclassmap_html_ac868b594b36b6b9bbcb130650fd4f61f"><div class="ttname"><a href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">map::getglobal</a></div><div class="ttdeci">tripoint_abs_ms getglobal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09625">map.cpp:9625</a></div></div>
<div class="ttc" id="aclassmap_html_af0e872a5d0a7bf1e9745aeb18d3b5e44"><div class="ttname"><a href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">map::has_flag_ter</a></div><div class="ttdeci">bool has_flag_ter(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03107">map.cpp:3107</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassmartialart_html_a755de10d91b0292258efb0ab55b80cbc"><div class="ttname"><a href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">martialart::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00367">martialarts.h:367</a></div></div>
<div class="ttc" id="aclassmartialart_html_aaafaa92848ceeac9e66c6cbc28e38dd5"><div class="ttname"><a href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">martialart::primary_skill</a></div><div class="ttdeci">skill_id primary_skill</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00372">martialarts.h:372</a></div></div>
<div class="ttc" id="aclassmemorized__tile_html"><div class="ttname"><a href="classmemorized__tile.html">memorized_tile</a></div><div class="ttdef"><b>Definition:</b> <a href="map__memory_8h_source.html#l00019">map_memory.h:20</a></div></div>
<div class="ttc" id="aclassmission_html"><div class="ttname"><a href="classmission.html">mission</a></div><div class="ttdef"><b>Definition:</b> <a href="mission_8h_source.html#l00272">mission.h:273</a></div></div>
<div class="ttc" id="aclassmission_html_a09bfff0d223c6859a3b389812a0a4734"><div class="ttname"><a href="classmission.html#a09bfff0d223c6859a3b389812a0a4734">mission::update_world_missions_character</a></div><div class="ttdeci">void update_world_missions_character(const character_id &amp;old_char_id, const character_id &amp;new_char_id)</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00802">mission.cpp:802</a></div></div>
<div class="ttc" id="aclassmission_html_a13e39f34d8079f690e671c6dc0f794cd"><div class="ttname"><a href="classmission.html#a13e39f34d8079f690e671c6dc0f794cd">mission::get_target</a></div><div class="ttdeci">const tripoint_abs_omt &amp; get_target() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00709">mission.cpp:709</a></div></div>
<div class="ttc" id="aclassmission_html_a3e0b5122b1eb9917a9279ab4e131f1c1"><div class="ttname"><a href="classmission.html#a3e0b5122b1eb9917a9279ab4e131f1c1">mission::mission_id</a></div><div class="ttdeci">mission_type_id mission_id() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00832">mission.cpp:832</a></div></div>
<div class="ttc" id="aclassmission_html_a68856a2b760bcef1a4cd0319c6d7dfec"><div class="ttname"><a href="classmission.html#a68856a2b760bcef1a4cd0319c6d7dfec">mission::has_failed</a></div><div class="ttdeci">bool has_failed() const</div><div class="ttdoc">Checks if the player has failed the matching mission and returns true if they have.</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00749">mission.cpp:749</a></div></div>
<div class="ttc" id="aclassmission_html_aee1d08a5297b5b9117cf5bf33b960c53"><div class="ttname"><a href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">mission::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00824">mission.cpp:824</a></div></div>
<div class="ttc" id="aclassmission_html_af2c33d226079157de633e1ca76f1e1c6"><div class="ttname"><a href="classmission.html#af2c33d226079157de633e1ca76f1e1c6">mission::remove_active_world_mission</a></div><div class="ttdeci">void remove_active_world_mission(mission &amp;cur_mission)</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00111">mission.cpp:111</a></div></div>
<div class="ttc" id="aclassmission_html_af99364a9afac4abce5af8a056835f95d"><div class="ttname"><a href="classmission.html#af99364a9afac4abce5af8a056835f95d">mission::get_type</a></div><div class="ttdeci">const mission_type &amp; get_type() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00714">mission.cpp:714</a></div></div>
<div class="ttc" id="aclassmonfaction_html"><div class="ttname"><a href="classmonfaction.html">monfaction</a></div><div class="ttdef"><b>Definition:</b> <a href="monfaction_8h_source.html#l00048">monfaction.h:49</a></div></div>
<div class="ttc" id="aclassmove__mode_html"><div class="ttname"><a href="classmove__mode.html">move_mode</a></div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8h_source.html#l00033">move_mode.h:34</a></div></div>
<div class="ttc" id="aclassmove__mode_html_a36c26d06642756fbd8c553c0838882c4"><div class="ttname"><a href="classmove__mode.html#a36c26d06642756fbd8c553c0838882c4">move_mode::cycle</a></div><div class="ttdeci">move_mode_id cycle() const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00149">move_mode.cpp:149</a></div></div>
<div class="ttc" id="aclassmove__mode_html_a55562ed424864e229a6f3d91988cc67d"><div class="ttname"><a href="classmove__mode.html#a55562ed424864e229a6f3d91988cc67d">move_mode::change_message</a></div><div class="ttdeci">std::string change_message(bool success, steed_type steed) const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00132">move_mode.cpp:132</a></div></div>
<div class="ttc" id="aclassmove__mode_html_a8007e5b9f293d55925ce95654571a837"><div class="ttname"><a href="classmove__mode.html#a8007e5b9f293d55925ce95654571a837">move_mode::cycle_reverse</a></div><div class="ttdeci">move_mode_id cycle_reverse() const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00154">move_mode.cpp:154</a></div></div>
<div class="ttc" id="aclassmove__mode_html_ab8d51c606d510445889190c062f19c24"><div class="ttname"><a href="classmove__mode.html#ab8d51c606d510445889190c062f19c24">move_mode::symbol_color</a></div><div class="ttdeci">nc_color symbol_color() const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00199">move_mode.cpp:199</a></div></div>
<div class="ttc" id="aclassmove__mode_html_ade822da07471656f7a2949dd16aa90e2"><div class="ttname"><a href="classmove__mode.html#ade822da07471656f7a2949dd16aa90e2">move_mode::stop_hauling</a></div><div class="ttdeci">bool stop_hauling() const</div><div class="ttdef"><b>Definition:</b> <a href="move__mode_8cpp_source.html#l00214">move_mode.cpp:214</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_a077962bdd033d5a96974c8ddf3e26a59"><div class="ttname"><a href="classnpc.html#a077962bdd033d5a96974c8ddf3e26a59">npc::say</a></div><div class="ttdeci">void say(const char *const line, Args &amp;&amp;... args) const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l01025">npc.h:1025</a></div></div>
<div class="ttc" id="aclassnpc_html_a158166e9813730768c18c227a7cac30b"><div class="ttname"><a href="classnpc.html#a158166e9813730768c18c227a7cac30b">npc::export_to</a></div><div class="ttdeci">void export_to(const cata_path &amp;path) const</div><div class="ttdef"><b>Definition:</b> <a href="savegame_8cpp_source.html#l01802">savegame.cpp:1802</a></div></div>
<div class="ttc" id="aclassnpc_html_a325fff8094f3e9ce2ba6970f969ada3f"><div class="ttname"><a href="classnpc.html#a325fff8094f3e9ce2ba6970f969ada3f">npc::is_ally</a></div><div class="ttdeci">bool is_ally(const Character &amp;p) const override</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02260">npc.cpp:2260</a></div></div>
<div class="ttc" id="aclassnpc_html_ab295ee78874dc25faebb27d562a8e890"><div class="ttname"><a href="classnpc.html#ab295ee78874dc25faebb27d562a8e890">npc::is_obeying</a></div><div class="ttdeci">bool is_obeying(const Character &amp;p) const override</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02322">npc.cpp:2322</a></div></div>
<div class="ttc" id="aclassnpc_html_ab762e1b5cc3053fb9b04df37714e14b7"><div class="ttname"><a href="classnpc.html#ab762e1b5cc3053fb9b04df37714e14b7">npc::is_player_ally</a></div><div class="ttdeci">bool is_player_ally() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02297">npc.cpp:2297</a></div></div>
<div class="ttc" id="aclassnpc_html_ae4ee8462177eb0d0d5b4447b74d436d8"><div class="ttname"><a href="classnpc.html#ae4ee8462177eb0d0d5b4447b74d436d8">npc::set_fac</a></div><div class="ttdeci">void set_fac(const faction_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00747">npc.cpp:747</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_a4c78451e42e97753079ecd2a54c7143d"><div class="ttname"><a href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">optional_vpart_position::part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02698">vehicle.cpp:2698</a></div></div>
<div class="ttc" id="aclassovermap_html_aa0999e49bed45fc1eb5e30498b8934f4"><div class="ttname"><a href="classovermap.html#aa0999e49bed45fc1eb5e30498b8934f4">overmap::invalid_tripoint</a></div><div class="ttdeci">static constexpr tripoint_abs_omt invalid_tripoint</div><div class="ttdoc">Dummy value, used to indicate that a point returned by a function is invalid.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00277">overmap.h:277</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a373a98167f20af7399b8d8a01f824306"><div class="ttname"><a href="classovermapbuffer.html#a373a98167f20af7399b8d8a01f824306">overmapbuffer::foreach_npc</a></div><div class="ttdeci">void foreach_npc(const std::function&lt; void(npc &amp;)&gt; &amp;callback)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01244">overmapbuffer.cpp:1244</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_abe3397983bdf2419ede84ee43bdf587f"><div class="ttname"><a href="classovermapbuffer.html#abe3397983bdf2419ede84ee43bdf587f">overmapbuffer::find_npc</a></div><div class="ttdeci">shared_ptr_fast&lt; npc &gt; find_npc(character_id id)</div><div class="ttdoc">Find the npc with the given ID.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01234">overmapbuffer.cpp:1234</a></div></div>
<div class="ttc" id="aclassprofession_html_a086008c97a3e1a7c90abe13206c3f8bc"><div class="ttname"><a href="classprofession.html#a086008c97a3e1a7c90abe13206c3f8bc">profession::ident</a></div><div class="ttdeci">const string_id&lt; profession &gt; &amp; ident() const</div><div class="ttdef"><b>Definition:</b> <a href="profession_8cpp_source.html#l00475">profession.cpp:475</a></div></div>
<div class="ttc" id="aclassprofession_html_a30863aff05431320802058dee4113a6d"><div class="ttname"><a href="classprofession.html#a30863aff05431320802058dee4113a6d">profession::generic</a></div><div class="ttdeci">static const profession * generic()</div><div class="ttdef"><b>Definition:</b> <a href="profession_8cpp_source.html#l00330">profession.cpp:330</a></div></div>
<div class="ttc" id="aclassprofession_html_a8a7ae097efc3ac0e1179aacc3de7574e"><div class="ttname"><a href="classprofession.html#a8a7ae097efc3ac0e1179aacc3de7574e">profession::get_locked_traits</a></div><div class="ttdeci">std::vector&lt; trait_and_var &gt; get_locked_traits() const</div><div class="ttdef"><b>Definition:</b> <a href="profession_8cpp_source.html#l00643">profession.cpp:643</a></div></div>
<div class="ttc" id="aclassprofession_html_ac5ca2dd614fb55df63b5ebd496b1fc93"><div class="ttname"><a href="classprofession.html#ac5ca2dd614fb55df63b5ebd496b1fc93">profession::get_all_hobbies</a></div><div class="ttdeci">static std::vector&lt; string_id&lt; profession &gt; &gt; get_all_hobbies()</div><div class="ttdef"><b>Definition:</b> <a href="profession_8cpp_source.html#l00342">profession.cpp:342</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html"><div class="ttname"><a href="classread__activity__actor.html">read_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00439">activity_actor_definitions.h:440</a></div></div>
<div class="ttc" id="aclassrecipe_html_a6ffa5ac015e9cb54bf2d360e5709cff3"><div class="ttname"><a href="classrecipe.html#a6ffa5ac015e9cb54bf2d360e5709cff3">recipe::is_practice</a></div><div class="ttdeci">bool is_practice() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01336">recipe.cpp:1336</a></div></div>
<div class="ttc" id="aclassrecipe_html_a7aab303fc95f1e765db693bc59823ed6"><div class="ttname"><a href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">recipe::result_name</a></div><div class="ttdeci">std::string result_name(bool decorated=false) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01216">recipe.cpp:1216</a></div></div>
<div class="ttc" id="aclassscenario_html_a1850973c9349ebe8b113a0b6d869bf67"><div class="ttname"><a href="classscenario.html#a1850973c9349ebe8b113a0b6d869bf67">scenario::permitted_hobbies</a></div><div class="ttdeci">std::vector&lt; string_id&lt; profession &gt; &gt; permitted_hobbies() const</div><div class="ttdef"><b>Definition:</b> <a href="scenario_8cpp_source.html#l00449">scenario.cpp:449</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a52e4721f4afcc99ddb28d261fc90cc32"><div class="ttname"><a href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">stomach_contents::contains</a></div><div class="ttdeci">units::volume contains() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00316">stomach.cpp:316</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; bionic_data &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; furn_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstry__sleep__activity__actor_html"><div class="ttname"><a href="classtry__sleep__activity__actor.html">try_sleep_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00831">activity_actor_definitions.h:832</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00451">ui.h:451</a></div></div>
<div class="ttc" id="aclassuilist_html_a53ff5990a6abb4e7da837db31afea4b8"><div class="ttname"><a href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">uilist::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00418">ui.h:418</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00526">ui.h:526</a></div></div>
<div class="ttc" id="aclassuilist_html_ad9e47c1efe3c9fb954ceaeb5c65791fe"><div class="ttname"><a href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">uilist::w_y_setup</a></div><div class="ttdeci">pos_scalar w_y_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00437">ui.h:437</a></div></div>
<div class="ttc" id="aclassuilist_html_adc2a36afdfede40aa5927aa8c3b0d526"><div class="ttname"><a href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">uilist::addentry_desc</a></div><div class="ttdeci">void addentry_desc(const std::string &amp;txt, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01227">ui.cpp:1227</a></div></div>
<div class="ttc" id="aclassuilist_html_ae4ae08b4f010935825c956ea705065aa"><div class="ttname"><a href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">uilist::hilight_disabled</a></div><div class="ttdeci">bool hilight_disabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00467">ui.h:467</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00422">ui.h:422</a></div></div>
<div class="ttc" id="aclassvisitable_html_af49d5ef7b3f2f0a8664c23097a56373f"><div class="ttname"><a href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">visitable::has_item</a></div><div class="ttdeci">bool has_item(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00075">visitable.cpp:75</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00016">color.h:16</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_a2740fd73e1b9184c904d95a580c5ea7b"><div class="ttname"><a href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a></div><div class="ttdeci">#define c_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
<div class="ttc" id="acolor_8h_html_a39fc218ef401d918701636583a85a168"><div class="ttname"><a href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a></div><div class="ttdeci">#define c_magenta</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00023">color.h:23</a></div></div>
<div class="ttc" id="acolor_8h_html_a5738d18ff9e165cca088a623cb1883ae"><div class="ttname"><a href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a></div><div class="ttdeci">#define c_dark_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00018">color.h:18</a></div></div>
<div class="ttc" id="acolor_8h_html_a6c870a877c442090edead1e229b3953d"><div class="ttname"><a href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a></div><div class="ttdeci">#define c_pink</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_a894265dad49331c44392826fc52b848f"><div class="ttname"><a href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a></div><div class="ttdeci">#define c_light_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00022">color.h:22</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00025">color.h:25</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acondition_8h_html_a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3"><div class="ttname"><a href="condition_8h.html#a56caa864bd8a797e79177057e53088f7aaa08769cdcb26674c6706093503ff0a3">jarg::member</a></div><div class="ttdeci">@ member</div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="acreature_8h_html_afb9a39a835be84327a86693636f5fc49"><div class="ttname"><a href="creature_8h.html#afb9a39a835be84327a86693636f5fc49">dur</a></div><div class="ttdeci">time_duration dur</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00237">creature.h:237</a></div></div>
<div class="ttc" id="acursesdef_8h_html"><div class="ttname"><a href="cursesdef_8h.html">cursesdef.h</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adiary_8h_html"><div class="ttname"><a href="diary_8h.html">diary.h</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_aad8315087dc1d0ef9212680412a20601"><div class="ttname"><a href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a></div><div class="ttdeci">static int symbol(const T_t &amp;t)</div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">ot_match_type::type</a></div><div class="ttdeci">@ type</div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">ot_match_type::prefix</a></div><div class="ttdeci">@ prefix</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aenums_8h_html_a805138f2fff55cebf7ad4bc2b49f1f71"><div class="ttname"><a href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71">object_type</a></div><div class="ttdeci">object_type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00251">enums.h:251</a></div></div>
<div class="ttc" id="aenums_8h_html_a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="aenums_8h_html_a805138f2fff55cebf7ad4bc2b49f1f71ae9fa318f4d73c31493e98096efa497e2"><div class="ttname"><a href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ae9fa318f4d73c31493e98096efa497e2">object_type::VEHICLE</a></div><div class="ttdeci">@ VEHICLE</div></div>
<div class="ttc" id="aevent_8h_html"><div class="ttname"><a href="event_8h.html">event.h</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a2399bc378fc3eb202892ff81cf8c7597"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a2399bc378fc3eb202892ff81cf8c7597">event_type::game_avatar_new</a></div><div class="ttdeci">@ game_avatar_new</div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4">event_type::reads_book</a></div><div class="ttdeci">@ reads_book</div></div>
<div class="ttc" id="aevent__bus_8h_html"><div class="ttname"><a href="event__bus_8h.html">event_bus.h</a></div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
<div class="ttc" id="afaction_8h_html"><div class="ttname"><a href="faction_8h.html">faction.h</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_acd17fbab1a93c90c8748a2b0777027fa"><div class="ttname"><a href="field__type_8cpp.html#acd17fbab1a93c90c8748a2b0777027fa">fd_web</a></div><div class="ttdeci">const field_type_str_id fd_web(&quot;fd_web&quot;)</div></div>
<div class="ttc" id="afield__type_8h_html"><div class="ttname"><a href="field__type_8h.html">field_type.h</a></div></div>
<div class="ttc" id="aflexbuffer__json-inl_8h_html"><div class="ttname"><a href="flexbuffer__json-inl_8h.html">flexbuffer_json-inl.h</a></div></div>
<div class="ttc" id="aflexbuffer__json_8h_html"><div class="ttname"><a href="flexbuffer__json_8h.html">flexbuffer_json.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_a843dd63af25a83f66fdc5ea2bea33f01"><div class="ttname"><a href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a></div><div class="ttdeci">timed_event_manager &amp; get_timed_events()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13861">game.cpp:13861</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_ad0b0d2173cd53cfd3e9c5a89d5335766"><div class="ttname"><a href="game_8cpp.html#ad0b0d2173cd53cfd3e9c5a89d5335766">get_scenario</a></div><div class="ttdeci">const scenario * get_scenario()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13842">game.cpp:13842</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2b6d307dfab13601267fc3c627192f4e"><div class="ttname"><a href="game__constants_8h.html#a2b6d307dfab13601267fc3c627192f4e">MAPSIZE_Y</a></div><div class="ttdeci">constexpr int MAPSIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00046">game_constants.h:46</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2f229f6ae9b3affb78ec8139ccdbf18e"><div class="ttname"><a href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a></div><div class="ttdeci">constexpr int MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00045">game_constants.h:45</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2ff11848079530402510dded26ad7b71"><div class="ttname"><a href="game__constants_8h.html#a2ff11848079530402510dded26ad7b71">NO_EXERCISE</a></div><div class="ttdeci">constexpr float NO_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00181">game_constants.h:181</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3eff0a66c45e8fc9175f3e424c140950"><div class="ttname"><a href="game__constants_8h.html#a3eff0a66c45e8fc9175f3e424c140950">LIGHT_EXERCISE</a></div><div class="ttdeci">constexpr float LIGHT_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00182">game_constants.h:182</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a81cb9f7f10147d30b078e70a2d1399ec"><div class="ttname"><a href="game__constants_8h.html#a81cb9f7f10147d30b078e70a2d1399ec">SLEEP_EXERCISE</a></div><div class="ttdeci">constexpr float SLEEP_EXERCISE</div><div class="ttdoc">activity levels, used for BMR.</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00180">game_constants.h:180</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aa5931cb2f162c829bae20f0df39ae014"><div class="ttname"><a href="game__constants_8h.html#aa5931cb2f162c829bae20f0df39ae014">INVENTORY_HANDLING_PENALTY</a></div><div class="ttdeci">constexpr int INVENTORY_HANDLING_PENALTY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00082">game_constants.h:82</a></div></div>
<div class="ttc" id="agame__constants_8h_html_ab4f6aee0718ae4c2d33e35bcccc19eb3"><div class="ttname"><a href="game__constants_8h.html#ab4f6aee0718ae4c2d33e35bcccc19eb3">MODERATE_EXERCISE</a></div><div class="ttdeci">constexpr float MODERATE_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00183">game_constants.h:183</a></div></div>
<div class="ttc" id="agame__constants_8h_html_abb5fc20f9a59bdfcb7319f2b856a9ab9"><div class="ttname"><a href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a></div><div class="ttdeci">constexpr float BRISK_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00184">game_constants.h:184</a></div></div>
<div class="ttc" id="agame__constants_8h_html_acb2d9f7a196b657e32a4e71733a89e5c"><div class="ttname"><a href="game__constants_8h.html#acb2d9f7a196b657e32a4e71733a89e5c">EXTRA_EXERCISE</a></div><div class="ttdeci">constexpr float EXTRA_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00186">game_constants.h:186</a></div></div>
<div class="ttc" id="agame__constants_8h_html_ae10b2c094962496f0ee92691af5472be"><div class="ttname"><a href="game__constants_8h.html#ae10b2c094962496f0ee92691af5472be">activity_levels_map</a></div><div class="ttdeci">const std::map&lt; std::string, float &gt; activity_levels_map</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00188">game_constants.h:188</a></div></div>
<div class="ttc" id="agame__constants_8h_html_af493e8618b57ed45c296eed8ab6e730a"><div class="ttname"><a href="game__constants_8h.html#af493e8618b57ed45c296eed8ab6e730a">ACTIVE_EXERCISE</a></div><div class="ttdeci">constexpr float ACTIVE_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00185">game_constants.h:185</a></div></div>
<div class="ttc" id="agame__inventory_8h_html"><div class="ttname"><a href="game__inventory_8h.html">game_inventory.h</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="ahelp_8cpp_html_aa32b35413d90584d6e8fc93520f00e9d"><div class="ttname"><a href="help_8cpp.html#aa32b35413d90584d6e8fc93520f00e9d">get_hint</a></div><div class="ttdeci">std::string get_hint()</div><div class="ttdef"><b>Definition:</b> <a href="help_8cpp_source.html#l00269">help.cpp:269</a></div></div>
<div class="ttc" id="ahelp_8h_html"><div class="ttname"><a href="help_8h.html">help.h</a></div></div>
<div class="ttc" id="ainventory_8h_html"><div class="ttname"><a href="inventory_8h.html">inventory.h</a></div></div>
<div class="ttc" id="ainventory_8h_html_a30cdf5c616c63b894825e5e92a5b1e5c"><div class="ttname"><a href="inventory_8h.html#a30cdf5c616c63b894825e5e92a5b1e5c">inv_chars</a></div><div class="ttdeci">const invlet_wrapper inv_chars</div></div>
<div class="ttc" id="aitem_8cpp_html_a69e37326c7c5f142d13f8ac8e070b728"><div class="ttname"><a href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a></div><div class="ttdeci">item &amp; null_item_reference()</div><div class="ttdoc">Returns a reference to a null item (see item::is_null).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00248">item.cpp:248</a></div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__location_8h_html"><div class="ttname"><a href="item__location_8h.html">item_location.h</a></div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aiuse_8h_html"><div class="ttname"><a href="iuse_8h.html">iuse.h</a></div></div>
<div class="ttc" id="ajson_8h_html"><div class="ttname"><a href="json_8h.html">json.h</a></div></div>
<div class="ttc" id="aline_8h_html"><div class="ttname"><a href="line_8h.html">line.h</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amap__memory_8h_html"><div class="ttname"><a href="map__memory_8h.html">map_memory.h</a></div></div>
<div class="ttc" id="amapdata_8h_html"><div class="ttname"><a href="mapdata_8h.html">mapdata.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a></div><div class="ttdeci">@ TFLAG_SWIMMABLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaa8b2b00c1c1ab3344fda4ca7aaa4828">ter_furn_flag::TFLAG_FUNGUS</a></div><div class="ttdeci">@ TFLAG_FUNGUS</div></div>
<div class="ttc" id="amartialarts_8cpp_html_abbde71d679db0bf89e89279e18183337"><div class="ttname"><a href="martialarts_8cpp.html#abbde71d679db0bf89e89279e18183337">martialart_difficulty</a></div><div class="ttdeci">std::string martialart_difficulty(const matype_id &amp;mstyle)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00570">martialarts.cpp:570</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_ad99254fef8817d713c1577c9f7021eb0"><div class="ttname"><a href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a></div><div class="ttdeci">matype_id martial_art_learned_from(const itype &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00109">martialarts.cpp:109</a></div></div>
<div class="ttc" id="amartialarts_8h_html"><div class="ttname"><a href="martialarts_8h.html">martialarts.h</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a204ca52ef1b97d079c45e1cb6407f73b"><div class="ttname"><a href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">floor</a></div><div class="ttdeci">double floor(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00095">math_parser_func.h:95</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_aeb3bbc4ec861ea58cbfca028920e4cc6"><div class="ttname"><a href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">sqrt</a></div><div class="ttdeci">double sqrt(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00061">math_parser_func.h:61</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ada897699f31fc8b37c5af09d95d45840"><div class="ttname"><a href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00016">memory_fast.h:16</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amission_8h_html"><div class="ttname"><a href="mission_8h.html">mission.h</a></div></div>
<div class="ttc" id="amorale_8h_html"><div class="ttname"><a href="morale_8h.html">morale.h</a></div></div>
<div class="ttc" id="amorale__types_8cpp_html_a0526ed49652901e606e16ddc54b34507"><div class="ttname"><a href="morale__types_8cpp.html#a0526ed49652901e606e16ddc54b34507">MORALE_HONEY</a></div><div class="ttdeci">const morale_type MORALE_HONEY(&quot;morale_honey&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a655c7e5a3f27bc87986154329af62690"><div class="ttname"><a href="morale__types_8cpp.html#a655c7e5a3f27bc87986154329af62690">MORALE_VOMITED</a></div><div class="ttdeci">const morale_type MORALE_VOMITED(&quot;morale_vomited&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_aaa5338b2599dee343776a16d858acd72"><div class="ttname"><a href="morale__types_8cpp.html#aaa5338b2599dee343776a16d858acd72">MORALE_FOOD_HOT</a></div><div class="ttdeci">const morale_type MORALE_FOOD_HOT(&quot;morale_food_hot&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ab2e7f135d6749b067f488c38bec7eb8c"><div class="ttname"><a href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a></div><div class="ttdeci">const morale_type MORALE_FOOD_GOOD(&quot;morale_food_good&quot;)</div></div>
<div class="ttc" id="amorale__types_8h_html"><div class="ttname"><a href="morale__types_8h.html">morale_types.h</a></div></div>
<div class="ttc" id="amove__mode_8h_html"><div class="ttname"><a href="move__mode_8h.html">move_mode.h</a></div></div>
<div class="ttc" id="amutation_8h_html"><div class="ttname"><a href="mutation_8h.html">mutation.h</a></div></div>
<div class="ttc" id="anamespacePickup_html_a5acb24d81cad5d2200e4c573b30398b2a22a3e048b0a073f8509421d9adfa541b"><div class="ttname"><a href="namespacePickup.html#a5acb24d81cad5d2200e4c573b30398b2a22a3e048b0a073f8509421d9adfa541b">Pickup::prompt</a></div><div class="ttdeci">@ prompt</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00043">pickup.h:42</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacecata_html_a097b137e977a6b843c0dada2c8b19611"><div class="ttname"><a href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">cata::swap</a></div><div class="ttdeci">void swap(colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;a, colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;b) COLONY_NOEXCEPT_SWAP(element_allocator_type)</div><div class="ttdoc">Swaps colony A's contents with that of colony B.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l03505">colony.h:3505</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00091">ncurses_def.cpp:91</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ab21fb51b59b9cfef11982366b84e8ebe"><div class="ttname"><a href="namespacecatacurses.html#ab21fb51b59b9cfef11982366b84e8ebe">catacurses::erase</a></div><div class="ttdeci">void erase()</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00201">ncurses_def.cpp:201</a></div></div>
<div class="ttc" id="anamespacecharacter__weight__category_html_a4796dc02b0d31bbc649f0d96a93fd600"><div class="ttname"><a href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a></div><div class="ttdeci">constexpr float normal</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00213">game_constants.h:213</a></div></div>
<div class="ttc" id="anamespacedebug__menu_html_aa07895d5fd8a5172b7e5fa9a1e261fa6"><div class="ttname"><a href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug_menu::debug</a></div><div class="ttdeci">void debug()</div><div class="ttdef"><b>Definition:</b> <a href="debug__menu_8cpp_source.html#l03358">debug_menu.cpp:3358</a></div></div>
<div class="ttc" id="anamespacedebug__menu_html_adaed30e5f02eb35cd72017cfdc36529d"><div class="ttname"><a href="namespacedebug__menu.html#adaed30e5f02eb35cd72017cfdc36529d">debug_menu::add_header</a></div><div class="ttdeci">static void add_header(uilist &amp;mmenu, const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="debug__menu_8cpp_source.html#l02450">debug_menu.cpp:2450</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a></div><div class="ttdeci">@ DF_ACT_READ</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00242">debug.h:242</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2aff83dd93cc5849c8a08f3215878490bc"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aff83dd93cc5849c8a08f3215878490bc">debugmode::DF_AVATAR</a></div><div class="ttdeci">@ DF_AVATAR</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00248">debug.h:248</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a1c93571a600078f88f78d95ada77fdd7"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a1c93571a600078f88f78d95ada77fdd7">game_menus::inv::select_ammo</a></div><div class="ttdeci">item::reload_option select_ammo(Character &amp;you, const item_location &amp;loc, bool prompt=false, bool empty=true)</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02912">game_inventory.cpp:2912</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a0fdbb3cc8e25454026b9ab57f9b91c69"><div class="ttname"><a href="namespaceom__direction.html#a0fdbb3cc8e25454026b9ab57f9b91c69">om_direction::random</a></div><div class="ttdeci">type random()</div><div class="ttdoc">Returns a random direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06504">overmap.cpp:6504</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="anamespacerotatable__symbols_html_a7d2f855a39674de736a7829423a577f4"><div class="ttname"><a href="namespacerotatable__symbols.html#a7d2f855a39674de736a7829423a577f4">rotatable_symbols::get</a></div><div class="ttdeci">uint32_t get(const uint32_t &amp;symbol, int n)</div><div class="ttdef"><b>Definition:</b> <a href="rotatable__symbols_8cpp_source.html#l00091">rotatable_symbols.cpp:91</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_abf6b4d399e1ef6b51df0dc4621a5720d"><div class="ttname"><a href="namespacetarget__handler.html#abf6b4d399e1ef6b51df0dc4621a5720d">target_handler::mode_throw</a></div><div class="ttdeci">trajectory mode_throw(avatar &amp;you, item &amp;relevant, bool blind_throwing)</div><div class="ttdoc">Throwing item.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00442">ranged.cpp:442</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_aea843144f5e69546ddea88eeda177640"><div class="ttname"><a href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; trajectory</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00029">ranged.h:29</a></div></div>
<div class="ttc" id="anamespaceunits_html_a144476d36f26d6e1916493c3636d54dc"><div class="ttname"><a href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a></div><div class="ttdeci">constexpr value_type to_milliliter(const quantity&lt; value_type, volume_in_milliliter_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00316">units.h:316</a></div></div>
<div class="ttc" id="anamespaceunits_html_aae47d0424d7fabfbe481a807e7697518"><div class="ttname"><a href="namespaceunits.html#aae47d0424d7fabfbe481a807e7697518">units::acos</a></div><div class="ttdeci">units::angle acos(double x)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l01132">units.h:1132</a></div></div>
<div class="ttc" id="anpc_8h_html"><div class="ttname"><a href="npc_8h.html">npc.h</a></div></div>
<div class="ttc" id="anpc_8h_html_a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d"><div class="ttname"><a href="npc_8h.html#a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d">NPCATT_FOLLOW</a></div><div class="ttdeci">@ NPCATT_FOLLOW</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00110">npc.h:110</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab9659cbe9ec23a2efd813f795cb7fb73"><div class="ttname"><a href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, const point &amp;begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00379">output.cpp:379</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
<div class="ttc" id="aovermap_8h_html"><div class="ttname"><a href="overmap_8h.html">overmap.h</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="apathfinding_8h_html"><div class="ttname"><a href="pathfinding_8h.html">pathfinding.h</a></div></div>
<div class="ttc" id="apimpl_8h_html"><div class="ttname"><a href="pimpl_8h.html">pimpl.h</a></div></div>
<div class="ttc" id="aprofession_8h_html"><div class="ttname"><a href="profession_8h.html">profession.h</a></div></div>
<div class="ttc" id="aproficiency_8h_html_a7c174fe5c5322e5b2d41254424fc5f75a90b884933d23c4d57ca01dbe2898d405"><div class="ttname"><a href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a90b884933d23c4d57ca01dbe2898d405">proficiency_bonus_type::intelligence</a></div><div class="ttdeci">@ intelligence</div></div>
<div class="ttc" id="aranged_8cpp_html_a969d7fb0eb05d60c2c98eb568bce69f2"><div class="ttname"><a href="ranged_8cpp.html#a969d7fb0eb05d60c2c98eb568bce69f2">calc_steadiness</a></div><div class="ttdeci">double calc_steadiness(const Character &amp;you, const item &amp;weapon, const tripoint &amp;pos, double predicted_recoil)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01156">ranged.cpp:1156</a></div></div>
<div class="ttc" id="aranged_8h_html"><div class="ttname"><a href="ranged_8h.html">ranged.h</a></div></div>
<div class="ttc" id="arecipe_8h_html"><div class="ttname"><a href="recipe_8h.html">recipe.h</a></div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="arng_8h_html_ac634f688b3c7864ab6992939ac7b0a6e"><div class="ttname"><a href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a></div><div class="ttdeci">V random_entry_removed(C &amp;container)</div><div class="ttdoc">Returns a random entry in the container and removes it from the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00186">rng.h:186</a></div></div>
<div class="ttc" id="ascenario_8h_html"><div class="ttname"><a href="scenario_8h.html">scenario.h</a></div></div>
<div class="ttc" id="askill_8h_html"><div class="ttname"><a href="skill_8h.html">skill.h</a></div></div>
<div class="ttc" id="asmart__controller__ui_8h_html_a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3"><div class="ttname"><a href="smart__controller__ui_8h.html#a70311dd7f8c88e8727c2a7567aa555caaa7970bb5f1149f16a82922773632ebe3">length</a></div><div class="ttdeci">@ length</div><div class="ttdef"><b>Definition:</b> <a href="smart__controller__ui_8h_source.html#l00026">smart_controller_ui.h:26</a></div></div>
<div class="ttc" id="astomach_8h_html"><div class="ttname"><a href="stomach_8h.html">stomach.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html"><div class="ttname"><a href="structavatar_1_1daily__calories.html">avatar::daily_calories</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00334">avatar.h:334</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_a153c5ecfdc12f8a667b87b04c413f89e"><div class="ttname"><a href="structavatar_1_1daily__calories.html#a153c5ecfdc12f8a667b87b04c413f89e">avatar::daily_calories::save_activity</a></div><div class="ttdeci">void save_activity(JsonOut &amp;json) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01670">avatar.cpp:1670</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_a494a539e7ac3608af5adb5d5104e8a51"><div class="ttname"><a href="structavatar_1_1daily__calories.html#a494a539e7ac3608af5adb5d5104e8a51">avatar::daily_calories::deserialize</a></div><div class="ttdeci">void deserialize(const JsonObject &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01660">avatar.cpp:1660</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_a56a8fac04714478c4b948b13d68bdb7d"><div class="ttname"><a href="structavatar_1_1daily__calories.html#a56a8fac04714478c4b948b13d68bdb7d">avatar::daily_calories::daily_calories</a></div><div class="ttdeci">daily_calories()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01638">avatar.cpp:1638</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_a7c6527984c22a3341377eb7a5b1d87de"><div class="ttname"><a href="structavatar_1_1daily__calories.html#a7c6527984c22a3341377eb7a5b1d87de">avatar::daily_calories::serialize</a></div><div class="ttdeci">void serialize(JsonOut &amp;json) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01648">avatar.cpp:1648</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_ad79593d05f92e31b1b0039c9c427667a"><div class="ttname"><a href="structavatar_1_1daily__calories.html#ad79593d05f92e31b1b0039c9c427667a">avatar::daily_calories::read_activity</a></div><div class="ttdeci">void read_activity(const JsonObject &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01685">avatar.cpp:1685</a></div></div>
<div class="ttc" id="astructavatar_1_1daily__calories_html_af58c0c43eb663302fc7daeaf8124fe77"><div class="ttname"><a href="structavatar_1_1daily__calories.html#af58c0c43eb663302fc7daeaf8124fe77">avatar::daily_calories::activity_levels</a></div><div class="ttdeci">std::map&lt; float, int &gt; activity_levels</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00341">avatar.h:341</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a></div><div class="ttdoc">What recipes can be learned from this book.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00544">itype.h:544</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_a37c2b2d291c1507dce0dcfa736dcc39e"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">islot_book::recipe_with_description_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00024">itype.cpp:24</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_a81128db90cd0174d3500d4cb1bbf002e"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">islot_book::recipe_with_description_t::recipe</a></div><div class="ttdeci">const class recipe * recipe</div><div class="ttdoc">The recipe that can be learned (never null).</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00548">itype.h:548</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_ab1754e8717fef2508852ad9cf8576bff"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#ab1754e8717fef2508852ad9cf8576bff">islot_book::recipe_with_description_t::is_hidden</a></div><div class="ttdeci">bool is_hidden() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00564">itype.h:564</a></div></div>
<div class="ttc" id="astructitype_html_aec04d23e907e3ea3cd9cfb08369dffcd"><div class="ttname"><a href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">itype::book</a></div><div class="ttdeci">cata::value_ptr&lt; islot_book &gt; book</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01203">itype.h:1203</a></div></div>
<div class="ttc" id="astructitype_html_afa43bb71000c037c9918d907fdacf0b5"><div class="ttname"><a href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">itype::use_methods</a></div><div class="ttdeci">std::map&lt; std::string, use_function &gt; use_methods</div><div class="ttdoc">Actions an instance can perform (if any) indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01312">itype.h:1312</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a1e749bfdff8adff5829dc013dcac0cc1"><div class="ttname"><a href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">map_data_common_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00563">mapdata.cpp:563</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_aa6eb23c1a5d8e89d877880f9aaf32eb6"><div class="ttname"><a href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">map_data_common_t::movecost</a></div><div class="ttdeci">int movecost</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00501">mapdata.h:501</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_aeeb5fd98ea185b1d0c767f2bfb5e781d"><div class="ttname"><a href="structmap__data__common__t.html#aeeb5fd98ea185b1d0c767f2bfb5e781d">map_data_common_t::comfort</a></div><div class="ttdeci">int comfort</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00507">mapdata.h:507</a></div></div>
<div class="ttc" id="astructmission__type_html_a0427808ac14b1fc6ae57eb07904c37d7"><div class="ttname"><a href="structmission__type.html#a0427808ac14b1fc6ae57eb07904c37d7">mission_type::invisible_on_complete</a></div><div class="ttdeci">bool invisible_on_complete</div><div class="ttdef"><b>Definition:</b> <a href="mission_8h_source.html#l00212">mission.h:212</a></div></div>
<div class="ttc" id="astructmm__submap_html_a05cadd6f8ed333dd6664feb0499b076d"><div class="ttname"><a href="structmm__submap.html#a05cadd6f8ed333dd6664feb0499b076d">mm_submap::default_tile</a></div><div class="ttdeci">static const memorized_tile default_tile</div><div class="ttdef"><b>Definition:</b> <a href="map__memory_8h_source.html#l00056">map_memory.h:56</a></div></div>
<div class="ttc" id="astructmonster__visible__info_html_ada211b5c681b9298a04917edd5f274e1"><div class="ttname"><a href="structmonster__visible__info.html#ada211b5c681b9298a04917edd5f274e1">monster_visible_info::remove_npc</a></div><div class="ttdeci">void remove_npc(npc *n)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l02077">avatar.cpp:2077</a></div></div>
<div class="ttc" id="astructstat__mod_html"><div class="ttname"><a href="structstat__mod.html">stat_mod</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00420">character.h:420</a></div></div>
<div class="ttc" id="astructstat__mod_html_a02fc9b713716dc8d9c8643db09cd853a"><div class="ttname"><a href="structstat__mod.html#a02fc9b713716dc8d9c8643db09cd853a">stat_mod::intelligence</a></div><div class="ttdeci">int intelligence</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00423">character.h:423</a></div></div>
<div class="ttc" id="astructstat__mod_html_a362a69480e76954ddece8a94f8fb41d9"><div class="ttname"><a href="structstat__mod.html#a362a69480e76954ddece8a94f8fb41d9">stat_mod::strength</a></div><div class="ttdeci">int strength</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00421">character.h:421</a></div></div>
<div class="ttc" id="astructstat__mod_html_a68d43eb8265c5a2b6af57db10fd25ce8"><div class="ttname"><a href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">stat_mod::dexterity</a></div><div class="ttdeci">int dexterity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00422">character.h:422</a></div></div>
<div class="ttc" id="astructstat__mod_html_aedeca4241e12b9b4171454522d162baa"><div class="ttname"><a href="structstat__mod.html#aedeca4241e12b9b4171454522d162baa">stat_mod::perception</a></div><div class="ttdeci">int perception</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00424">character.h:424</a></div></div>
<div class="ttc" id="astructtrait__and__var_html"><div class="ttname"><a href="structtrait__and__var.html">trait_and_var</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00127">mutation.h:127</a></div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdoc">Some traps aren't actually traps in the usual sense of the word.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00109">trap.h:109</a></div></div>
<div class="ttc" id="astructtrap_html_a9e32dc8e92c961fb52b3086421c62b8e"><div class="ttname"><a href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">trap::comfort</a></div><div class="ttdeci">int comfort</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00165">trap.h:165</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
<div class="ttc" id="astructuilist__entry_html"><div class="ttname"><a href="structuilist__entry.html">uilist_entry</a></div><div class="ttdoc">uilist_entry: entry line for uilist</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00059">ui.h:59</a></div></div>
<div class="ttc" id="astructuilist__entry_html_afac63498c9ea7cd5c5ea72e67001d238"><div class="ttname"><a href="structuilist__entry.html#afac63498c9ea7cd5c5ea72e67001d238">uilist_entry::force_color</a></div><div class="ttdeci">bool force_color</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00062">ui.h:62</a></div></div>
<div class="ttc" id="astructuse__function_html_a308134b3f05ca40164e867ac8d922da8"><div class="ttname"><a href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">use_function::call</a></div><div class="ttdeci">std::optional&lt; int &gt; call(Character *, item &amp;, const tripoint &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08922">iuse.cpp:8922</a></div></div>
<div class="ttc" id="atalker_8h_html"><div class="ttname"><a href="talker_8h.html">talker.h</a></div></div>
<div class="ttc" id="atalker__avatar_8h_html"><div class="ttname"><a href="talker__avatar_8h.html">talker_avatar.h</a></div></div>
<div class="ttc" id="atimed__event_8h_html"><div class="ttname"><a href="timed__event_8h.html">timed_event.h</a></div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7a12afd509d0817037a3fa8d912d0f525e"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a12afd509d0817037a3fa8d912d0f525e">timed_event_type::OVERRIDE_PLACE</a></div><div class="ttdeci">@ OVERRIDE_PLACE</div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atrap_8h_html"><div class="ttname"><a href="trap_8h.html">trap.h</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="aui_8h_html"><div class="ttname"><a href="ui_8h.html">ui.h</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00038">ui.h:38</a></div></div>
<div class="ttc" id="aui_8h_html_ae8a811731dd950d56e478c3ddc17e725"><div class="ttname"><a href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a></div><div class="ttdeci">const int UILIST_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00035">ui.h:35</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="avalue__ptr_8h_html"><div class="ttname"><a href="value__ptr_8h.html">value_ptr.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html"><div class="ttname"><a href="veh__type_8h.html">veh_type.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea827ce264aff5ea40d24e0be152420ef4"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea827ce264aff5ea40d24e0be152420ef4">VPFLAG_AISLE</a></div><div class="ttdeci">@ VPFLAG_AISLE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00068">veh_type.h:68</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:25 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
