<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: math_exp::math_exp_impl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classmath__exp.html">math_exp</a></li><li class="navelem"><a class="el" href="classmath__exp_1_1math__exp__impl.html">math_exp_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmath__exp_1_1math__exp__impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">math_exp::math_exp_impl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html">arity_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab56940238c3f17d1a4dad7c8fee2cdb6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ab56940238c3f17d1a4dad7c8fee2cdb6">math_exp_impl</a> ()=default</td></tr>
<tr class="separator:ab56940238c3f17d1a4dad7c8fee2cdb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad765930ee7a0d97a2a16ed6a80294807"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ad765930ee7a0d97a2a16ed6a80294807">math_exp_impl</a> (<a class="el" href="structthingie.html">thingie</a> &amp;&amp;t)</td></tr>
<tr class="separator:ad765930ee7a0d97a2a16ed6a80294807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6baefc4ac2b4582c4696d0559774829b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a6baefc4ac2b4582c4696d0559774829b">parse</a> (std::string_view str, bool assignment)</td></tr>
<tr class="separator:a6baefc4ac2b4582c4696d0559774829b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8954196d9e810cb41490a4d4f800716"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ae8954196d9e810cb41490a4d4f800716">eval</a> (<a class="el" href="structdialogue.html">dialogue</a> &amp;d) const</td></tr>
<tr class="separator:ae8954196d9e810cb41490a4d4f800716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6676c8f59cc670e12305d04c649bcf40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a6676c8f59cc670e12305d04c649bcf40">assign</a> (<a class="el" href="structdialogue.html">dialogue</a> &amp;d, double val) const</td></tr>
<tr class="separator:a6676c8f59cc670e12305d04c649bcf40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a51f95697f9e7a7ad910d0b56d14f6dc5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a51f95697f9e7a7ad910d0b56d14f6dc5">_parse</a> (std::string_view str, bool assignment)</td></tr>
<tr class="separator:a51f95697f9e7a7ad910d0b56d14f6dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ccfbe22142a412a1b05a4545707c79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ad7ccfbe22142a412a1b05a4545707c79">parse_string</a> (std::string_view token, std::string_view full)</td></tr>
<tr class="separator:ad7ccfbe22142a412a1b05a4545707c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc0ff28328bc91c8c50c08fda438bbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#addc0ff28328bc91c8c50c08fda438bbc">parse_bin_op</a> (<a class="el" href="math__parser__impl_8h.html#a3821cce5a0742ed0a54d9a39e79c7cf5">pbin_op</a> const &amp;op)</td></tr>
<tr class="separator:addc0ff28328bc91c8c50c08fda438bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1aace1774a745c8445e5fbcde8417a"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a8a1aace1774a745c8445e5fbcde8417a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a8a1aace1774a745c8445e5fbcde8417a">parse_diag_f</a> (std::string_view <a class="el" href="editmap_8cpp.html#af3a48bbc04229a7bb0c7b74b6718d02f">symbol</a>, T const &amp;token)</td></tr>
<tr class="separator:a8a1aace1774a745c8445e5fbcde8417a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7384db63119cd14bc1d4c8be59d1a7a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a7384db63119cd14bc1d4c8be59d1a7a6">parse_comma</a> ()</td></tr>
<tr class="separator:a7384db63119cd14bc1d4c8be59d1a7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a27d922664f930ff7b4e9137e6f4c43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a7a27d922664f930ff7b4e9137e6f4c43">parse_lparen</a> (<a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336">arity_t::type_t</a> <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>=<a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a9df60d2c4b9e9125d641c10d7ee68401">arity_t::type_t::parens</a>)</td></tr>
<tr class="separator:a7a27d922664f930ff7b4e9137e6f4c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30da6e20bf4370be67ad8c14c2f7f955"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a30da6e20bf4370be67ad8c14c2f7f955">parse_rparen</a> ()</td></tr>
<tr class="separator:a30da6e20bf4370be67ad8c14c2f7f955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8244ae803a3dee36d1e6c2fab1df28d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a8244ae803a3dee36d1e6c2fab1df28d2">parse_lbracket</a> ()</td></tr>
<tr class="separator:a8244ae803a3dee36d1e6c2fab1df28d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbb188b54caa0849b54d6f05d89c6d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#afbbb188b54caa0849b54d6f05d89c6d7">parse_rbracket</a> ()</td></tr>
<tr class="separator:afbbb188b54caa0849b54d6f05d89c6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8a26e922ee0536a4607a0272d2c86a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ada8a26e922ee0536a4607a0272d2c86a">new_func</a> ()</td></tr>
<tr class="separator:ada8a26e922ee0536a4607a0272d2c86a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a226cc72a2f40ad1729ae4ed32dd72296"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a> ()</td></tr>
<tr class="separator:a226cc72a2f40ad1729ae4ed32dd72296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f964eca9e46b4250c4feb9d15af7fec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a3f964eca9e46b4250c4feb9d15af7fec">new_var</a> (std::string_view str)</td></tr>
<tr class="separator:a3f964eca9e46b4250c4feb9d15af7fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dafdec53449b7d09fa6347eaf9f77ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a0dafdec53449b7d09fa6347eaf9f77ef">new_kwarg</a> (<a class="el" href="structthingie.html">thingie</a> &amp;lhs, <a class="el" href="structthingie.html">thingie</a> &amp;rhs)</td></tr>
<tr class="separator:a0dafdec53449b7d09fa6347eaf9f77ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47398aafdffb5b0f8e949fc67deced8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#af47398aafdffb5b0f8e949fc67deced8">new_ternary</a> (<a class="el" href="structthingie.html">thingie</a> &amp;lhs, <a class="el" href="structthingie.html">thingie</a> &amp;rhs)</td></tr>
<tr class="separator:af47398aafdffb5b0f8e949fc67deced8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1d2227a43433f7697aff555dd05a278"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ac1d2227a43433f7697aff555dd05a278">new_array</a> ()</td></tr>
<tr class="separator:ac1d2227a43433f7697aff555dd05a278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58875b6ccd4d615331b9da60245cbdfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a> ()</td></tr>
<tr class="separator:a58875b6ccd4d615331b9da60245cbdfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29e782b8be538ed550adee973940553"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ab29e782b8be538ed550adee973940553">error</a> (std::string_view str, std::string_view what)</td></tr>
<tr class="separator:ab29e782b8be538ed550adee973940553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242a84336c2d86429e1746b98c600d37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a242a84336c2d86429e1746b98c600d37">validate_string</a> (std::string_view str, std::string_view <a class="el" href="structlabel.html">label</a>, std::string_view badlist)</td></tr>
<tr class="separator:a242a84336c2d86429e1746b98c600d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ac18ae29cd1b78b722a80429959a4a6e0"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="structdiag__value.html">diag_value</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ac18ae29cd1b78b722a80429959a4a6e0">_get_diag_vals</a> (std::vector&lt; <a class="el" href="structthingie.html">thingie</a> &gt; &amp;params)</td></tr>
<tr class="separator:ac18ae29cd1b78b722a80429959a4a6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c68ca41c71508b0b30b72963de3cd55"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdiag__value.html">diag_value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a3c68ca41c71508b0b30b72963de3cd55">_get_diag_value</a> (<a class="el" href="structthingie.html">thingie</a> &amp;param)</td></tr>
<tr class="separator:a3c68ca41c71508b0b30b72963de3cd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a011f6ad129c19da6176a010d2714f84a"><td class="memItemLeft" align="right" valign="top">std::stack&lt; <a class="el" href="math__parser__impl_8h.html#aa19d5c3976d527bd05aa4b76264e4500">op_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a></td></tr>
<tr class="separator:a011f6ad129c19da6176a010d2714f84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9860afaa5043cbabe59fb1688b220cf"><td class="memItemLeft" align="right" valign="top">std::stack&lt; <a class="el" href="structthingie.html">thingie</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a></td></tr>
<tr class="separator:ae9860afaa5043cbabe59fb1688b220cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4117298a8c0d5a967c857b4d4d95f7"><td class="memItemLeft" align="right" valign="top">std::stack&lt; <a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html">arity_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a></td></tr>
<tr class="separator:acd4117298a8c0d5a967c857b4d4d95f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4516f8dd80406d330737a37b0d6e4f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structthingie.html">thingie</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a> { 0.0 }</td></tr>
<tr class="separator:aa4516f8dd80406d330737a37b0d6e4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7464630b2854502179fbc8df6f0f5aa9"><td class="memItemLeft" align="right" valign="top">std::string_view&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">last_token</a></td></tr>
<tr class="separator:a7464630b2854502179fbc8df6f0f5aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72551ab4e19de1d3f2ef313868825705"><td class="memItemLeft" align="right" valign="top">parse_state&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a></td></tr>
<tr class="separator:a72551ab4e19de1d3f2ef313868825705"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00269">269</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab56940238c3f17d1a4dad7c8fee2cdb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab56940238c3f17d1a4dad7c8fee2cdb6">&#9670;&nbsp;</a></span>math_exp_impl() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">math_exp::math_exp_impl::math_exp_impl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad765930ee7a0d97a2a16ed6a80294807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad765930ee7a0d97a2a16ed6a80294807">&#9670;&nbsp;</a></span>math_exp_impl() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">math_exp::math_exp_impl::math_exp_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00273">273</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;: <a class="code" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a>( t ) {}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_aa4516f8dd80406d330737a37b0d6e4f1"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">math_exp::math_exp_impl::tree</a></div><div class="ttdeci">thingie tree</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00339">math_parser.cpp:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac18ae29cd1b78b722a80429959a4a6e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac18ae29cd1b78b722a80429959a4a6e0">&#9670;&nbsp;</a></span>_get_diag_vals()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structdiag__value.html">diag_value</a> &gt; math_exp::math_exp_impl::_get_diag_vals </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structthingie.html">thingie</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00675">675</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    std::vector&lt;diag_value&gt; vals( params.size() );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">for</span>( decltype( vals )::size_type i = 0; i &lt; params.size(); i++ ) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        vals[i] = <a class="code" href="classmath__exp_1_1math__exp__impl.html#a3c68ca41c71508b0b30b72963de3cd55">_get_diag_value</a>( params[i] );</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span> vals;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a3c68ca41c71508b0b30b72963de3cd55"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a3c68ca41c71508b0b30b72963de3cd55">math_exp::math_exp_impl::_get_diag_value</a></div><div class="ttdeci">static diag_value _get_diag_value(thingie &amp;param)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00641">math_parser.cpp:641</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c68ca41c71508b0b30b72963de3cd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c68ca41c71508b0b30b72963de3cd55">&#9670;&nbsp;</a></span>_get_diag_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdiag__value.html">diag_value</a> math_exp::math_exp_impl::_get_diag_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00641">641</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="structdiag__value.html">diag_value</a> val;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    std::visit( <a class="code" href="structoverloaded.html">overloaded</a>{</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        [&amp;val]( <span class="keywordtype">double</span> v )</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            val.<a class="code" href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">data</a>.emplace&lt;<span class="keywordtype">double</span>&gt;( v );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        },</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        [&amp;val]( std::string &amp; v )</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            val.<a class="code" href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">data</a>.emplace&lt;std::string&gt;( std::move( v ) );</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        },</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        [&amp;val]( <a class="code" href="structvar.html">var</a> &amp; v )</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            val.<a class="code" href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">data</a>.emplace&lt;<a class="code" href="structabstract__var__info.html">var_info</a>&gt;( std::move( v.varinfo ) );</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        },</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        [&amp;val]( <a class="code" href="structarray.html">array</a> &amp; v )</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="math__parser__diag__value_8h.html#a6151aa4a54c25cbbead836d183607360">diag_array</a> arr;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            arr.reserve( v.params.size() );</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="structthingie.html">thingie</a> &amp;t : v.params ) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                arr.emplace_back( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a3c68ca41c71508b0b30b72963de3cd55">_get_diag_value</a>( t ) );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            val.<a class="code" href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">data</a>.emplace&lt;<a class="code" href="math__parser__diag__value_8h.html#a6151aa4a54c25cbbead836d183607360">diag_array</a>&gt;( std::move( arr ) );</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        },</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        [&amp;val, &amp;param]( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;<span class="comment">/* v */</span> )</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            val.<a class="code" href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">data</a>.emplace&lt;<a class="code" href="classmath__exp.html">math_exp</a>&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ab56940238c3f17d1a4dad7c8fee2cdb6">math_exp_impl</a>{ std::move( param ) } );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        },</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    },</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    param.<a class="code" href="structthingie.html#a88fd5748c85c48dc625cc5505f0babae">data</a> );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ab56940238c3f17d1a4dad7c8fee2cdb6"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ab56940238c3f17d1a4dad7c8fee2cdb6">math_exp::math_exp_impl::math_exp_impl</a></div><div class="ttdeci">math_exp_impl()=default</div></div>
<div class="ttc" id="aclassmath__exp_html"><div class="ttname"><a href="classmath__exp.html">math_exp</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8h_source.html#l00010">math_parser.h:11</a></div></div>
<div class="ttc" id="amath__parser__diag__value_8h_html_a6151aa4a54c25cbbead836d183607360"><div class="ttname"><a href="math__parser__diag__value_8h.html#a6151aa4a54c25cbbead836d183607360">diag_array</a></div><div class="ttdeci">std::vector&lt; diag_value &gt; diag_array</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__diag__value_8h_source.html#l00017">math_parser_diag_value.h:17</a></div></div>
<div class="ttc" id="astructabstract__var__info_html"><div class="ttname"><a href="structabstract__var__info.html">abstract_var_info&lt; std::string &gt;</a></div></div>
<div class="ttc" id="astructarray_html"><div class="ttname"><a href="structarray.html">array</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00123">math_parser_impl.h:123</a></div></div>
<div class="ttc" id="astructdiag__value_html"><div class="ttname"><a href="structdiag__value.html">diag_value</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__diag__value_8h_source.html#l00018">math_parser_diag_value.h:18</a></div></div>
<div class="ttc" id="astructdiag__value_html_a80fe7e5791fb3c5c99e5e6514e84b00f"><div class="ttname"><a href="structdiag__value.html#a80fe7e5791fb3c5c99e5e6514e84b00f">diag_value::data</a></div><div class="ttdeci">impl_t data</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__diag__value_8h_source.html#l00043">math_parser_diag_value.h:43</a></div></div>
<div class="ttc" id="astructoverloaded_html"><div class="ttname"><a href="structoverloaded.html">overloaded</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00749">cata_utility.h:749</a></div></div>
<div class="ttc" id="astructthingie_html"><div class="ttname"><a href="structthingie.html">thingie</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00136">math_parser_impl.h:136</a></div></div>
<div class="ttc" id="astructthingie_html_a88fd5748c85c48dc625cc5505f0babae"><div class="ttname"><a href="structthingie.html#a88fd5748c85c48dc625cc5505f0babae">thingie::data</a></div><div class="ttdeci">impl_t data</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00148">math_parser_impl.h:148</a></div></div>
<div class="ttc" id="astructvar_html"><div class="ttname"><a href="structvar.html">var</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00109">math_parser_impl.h:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__diag__value_8h_source.html#l00043">diag_value::data</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00148">thingie::data</a>.</p>

</div>
</div>
<a id="a51f95697f9e7a7ad910d0b56d14f6dc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f95697f9e7a7ad910d0b56d14f6dc5">&#9670;&nbsp;</a></span>_parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::_parse </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>assignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00373">373</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    constexpr std::string_view expression_separators = <span class="stringliteral">&quot;+-*/^,()[]%&#39;:&gt;&lt;=!?&quot;</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a> = {};</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">for</span>( std::string_view <span class="keyword">const</span> token : <a class="code" href="math__parser__func_8cpp.html#a59e3fa242cbdffa4b1742b8d4e0d0438">tokenize</a>( str, expression_separators ) ) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">last_token</a> = token;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.instring || token == <span class="stringliteral">&quot;&#39;&quot;</span> ) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ad7ccfbe22142a412a1b05a4545707c79">parse_string</a>( token, str );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;double&gt; val = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#acc0b780192ec6e1ff93fa7881598b43a">get_number</a>( token ); val ) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( *val );</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::oper );</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;pmath_func&gt; ftoken = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a25b36e53a22b923c82499f2fc3f4c946">get_function</a>( token ); ftoken ) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( *ftoken );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.emplace( ( *ftoken )-&gt;symbol, ( *ftoken )-&gt;num_params, <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754">arity_t::type_t::func</a> );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::lparen );</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classstring__id.html">jmath_func_id</a> jmfid( token ); jmfid.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( jmfid );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.emplace( token, jmfid-&gt;num_params, <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754">arity_t::type_t::func</a> );</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::lparen );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;scoped_diag_eval&gt; feval = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#ac25336bf9eb9dde5b3531c4ff644bc5f">get_dialogue_eval</a>( token ); feval &amp;&amp;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                   !assignment ) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a8a1aace1774a745c8445e5fbcde8417a">parse_diag_f</a>( token, *feval );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;scoped_diag_ass&gt; fass = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a610d6ef66850bbdc7c602cfd1ca817f7">get_dialogue_ass</a>( token ); fass &amp;&amp;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                   assignment ) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a8a1aace1774a745c8445e5fbcde8417a">parse_diag_f</a>( token, *fass );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;punary_op&gt; op = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#abdd58f39f90e207996ae8b987cae580a">get_unary_op</a>( token ); op &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.allows_prefix_unary ) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( *op );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::operand );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( std::optional&lt;pbin_op&gt; op = <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a48ba7a7477f3cfd8fb9c7ea8b5a054a1">get_binary_op</a>( token ); op ) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#addc0ff28328bc91c8c50c08fda438bbc">parse_bin_op</a>( *op );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;,&quot;</span> ) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7384db63119cd14bc1d4c8be59d1a7a6">parse_comma</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;(&quot;</span> ) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7a27d922664f930ff7b4e9137e6f4c43">parse_lparen</a>();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;)&quot;</span> ) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a30da6e20bf4370be67ad8c14c2f7f955">parse_rparen</a>();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;[&quot;</span> ) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a8244ae803a3dee36d1e6c2fab1df28d2">parse_lbracket</a>();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;]&quot;</span> ) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#afbbb188b54caa0849b54d6f05d89c6d7">parse_rbracket</a>();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;=&quot;</span> ) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument( R<span class="stringliteral">&quot;(Misplaced &quot;=&quot;.  Did you mean &quot;==&quot;?)&quot; );</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="stringliteral">        } </span><span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a3f964eca9e46b4250c4feb9d15af7fec">new_var</a>( token );</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::oper );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::eof );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">while</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() ) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span>( std::holds_alternative&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) &amp;&amp; std::get&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) == <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a> ) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Unterminated left paranthesis&quot;</span> );</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span>( std::holds_alternative&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) &amp;&amp; std::get&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) == <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">paren::left_sq</a> ) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Unterminated left bracket&quot;</span> );</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a>();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span>( assignment &amp;&amp; !<a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#ae6172e3e74fdc662acead4eefe57d18d">is_assign_target</a>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() ) ) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Assignment tree can only contain one variable name or dialogue assignment function&quot;</span> );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.size() != 1 ) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Invalid expression.  That&#39;s all we know.  Blame andrei.&quot;</span> );</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a> = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a011f6ad129c19da6176a010d2714f84a"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">math_exp::math_exp_impl::ops</a></div><div class="ttdeci">std::stack&lt; op_t &gt; ops</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00316">math_parser.cpp:316</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a226cc72a2f40ad1729ae4ed32dd72296"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">math_exp::math_exp_impl::new_oper</a></div><div class="ttdeci">void new_oper()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00719">math_parser.cpp:719</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a30da6e20bf4370be67ad8c14c2f7f955"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a30da6e20bf4370be67ad8c14c2f7f955">math_exp::math_exp_impl::parse_rparen</a></div><div class="ttdeci">void parse_rparen()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00536">math_parser.cpp:536</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a3f964eca9e46b4250c4feb9d15af7fec"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a3f964eca9e46b4250c4feb9d15af7fec">math_exp::math_exp_impl::new_var</a></div><div class="ttdeci">void new_var(std::string_view str)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00772">math_parser.cpp:772</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a58875b6ccd4d615331b9da60245cbdfd"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">math_exp::math_exp_impl::maybe_first_argument</a></div><div class="ttdeci">void maybe_first_argument()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00366">math_parser.cpp:366</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a72551ab4e19de1d3f2ef313868825705"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">math_exp::math_exp_impl::state</a></div><div class="ttdeci">parse_state state</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00341">math_parser.cpp:341</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a7384db63119cd14bc1d4c8be59d1a7a6"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a7384db63119cd14bc1d4c8be59d1a7a6">math_exp::math_exp_impl::parse_comma</a></div><div class="ttdeci">void parse_comma()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00513">math_parser.cpp:513</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a7464630b2854502179fbc8df6f0f5aa9"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">math_exp::math_exp_impl::last_token</a></div><div class="ttdeci">std::string_view last_token</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00340">math_parser.cpp:340</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a7a27d922664f930ff7b4e9137e6f4c43"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a7a27d922664f930ff7b4e9137e6f4c43">math_exp::math_exp_impl::parse_lparen</a></div><div class="ttdeci">void parse_lparen(arity_t::type_t type=arity_t::type_t::parens)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00526">math_parser.cpp:526</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a8244ae803a3dee36d1e6c2fab1df28d2"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a8244ae803a3dee36d1e6c2fab1df28d2">math_exp::math_exp_impl::parse_lbracket</a></div><div class="ttdeci">void parse_lbracket()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00553">math_parser.cpp:553</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a8a1aace1774a745c8445e5fbcde8417a"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a8a1aace1774a745c8445e5fbcde8417a">math_exp::math_exp_impl::parse_diag_f</a></div><div class="ttdeci">void parse_diag_f(std::string_view symbol, T const &amp;token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00505">math_parser.cpp:505</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_acd4117298a8c0d5a967c857b4d4d95f7"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">math_exp::math_exp_impl::arity</a></div><div class="ttdeci">std::stack&lt; arity_t &gt; arity</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00338">math_parser.cpp:338</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ad7ccfbe22142a412a1b05a4545707c79"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ad7ccfbe22142a412a1b05a4545707c79">math_exp::math_exp_impl::parse_string</a></div><div class="ttdeci">void parse_string(std::string_view token, std::string_view full)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00465">math_parser.cpp:465</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_addc0ff28328bc91c8c50c08fda438bbc"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#addc0ff28328bc91c8c50c08fda438bbc">math_exp::math_exp_impl::parse_bin_op</a></div><div class="ttdeci">void parse_bin_op(pbin_op const &amp;op)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00487">math_parser.cpp:487</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ae9860afaa5043cbabe59fb1688b220cf"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">math_exp::math_exp_impl::output</a></div><div class="ttdeci">std::stack&lt; thingie &gt; output</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00317">math_parser.cpp:317</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_afbbb188b54caa0849b54d6f05d89c6d7"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#afbbb188b54caa0849b54d6f05d89c6d7">math_exp::math_exp_impl::parse_rbracket</a></div><div class="ttdeci">void parse_rbracket()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00565">math_parser.cpp:565</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; jmath_func &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="amath__parser__func_8cpp_html_a59e3fa242cbdffa4b1742b8d4e0d0438"><div class="ttname"><a href="math__parser__func_8cpp.html#a59e3fa242cbdffa4b1742b8d4e0d0438">tokenize</a></div><div class="ttdeci">std::vector&lt; std::string_view &gt; tokenize(std::string_view str, std::string_view separators, bool include_seps)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8cpp_source.html#l00007">math_parser_func.cpp:7</a></div></div>
<div class="ttc" id="amath__parser__impl_8h_html_a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254"><div class="ttname"><a href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a></div><div class="ttdeci">@ left</div></div>
<div class="ttc" id="amath__parser__impl_8h_html_a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2"><div class="ttname"><a href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">paren::left_sq</a></div><div class="ttdeci">@ left_sq</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_a25b36e53a22b923c82499f2fc3f4c946"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a25b36e53a22b923c82499f2fc3f4c946">anonymous_namespace{math_parser.cpp}::get_function</a></div><div class="ttdeci">constexpr std::optional&lt; pmath_func &gt; get_function(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00065">math_parser.cpp:65</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_a48ba7a7477f3cfd8fb9c7ea8b5a054a1"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a48ba7a7477f3cfd8fb9c7ea8b5a054a1">anonymous_namespace{math_parser.cpp}::get_binary_op</a></div><div class="ttdeci">constexpr std::optional&lt; pbin_op &gt; get_binary_op(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00102">math_parser.cpp:102</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_a610d6ef66850bbdc7c602cfd1ca817f7"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a610d6ef66850bbdc7c602cfd1ca817f7">anonymous_namespace{math_parser.cpp}::get_dialogue_ass</a></div><div class="ttdeci">std::optional&lt; scoped_diag_ass &gt; get_dialogue_ass(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00097">math_parser.cpp:97</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_abdd58f39f90e207996ae8b987cae580a"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#abdd58f39f90e207996ae8b987cae580a">anonymous_namespace{math_parser.cpp}::get_unary_op</a></div><div class="ttdeci">constexpr std::optional&lt; punary_op &gt; get_unary_op(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00107">math_parser.cpp:107</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_ac25336bf9eb9dde5b3531c4ff644bc5f"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#ac25336bf9eb9dde5b3531c4ff644bc5f">anonymous_namespace{math_parser.cpp}::get_dialogue_eval</a></div><div class="ttdeci">std::optional&lt; scoped_diag_eval &gt; get_dialogue_eval(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00092">math_parser.cpp:92</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_acc0b780192ec6e1ff93fa7881598b43a"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#acc0b780192ec6e1ff93fa7881598b43a">anonymous_namespace{math_parser.cpp}::get_number</a></div><div class="ttdeci">std::optional&lt; double &gt; get_number(std::string_view token)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00056">math_parser.cpp:56</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_ae6172e3e74fdc662acead4eefe57d18d"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#ae6172e3e74fdc662acead4eefe57d18d">anonymous_namespace{math_parser.cpp}::is_assign_target</a></div><div class="ttdeci">bool is_assign_target(thingie const &amp;thing)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00177">math_parser.cpp:177</a></div></div>
<div class="ttc" id="astructmath__exp_1_1math__exp__impl_1_1arity__t_html_aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754"><div class="ttname"><a href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754">math_exp::math_exp_impl::arity_t::type_t::func</a></div><div class="ttdeci">@ func</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00102">anonymous_namespace{math_parser.cpp}::get_binary_op()</a>, <a class="el" href="math__parser_8cpp_source.html#l00097">anonymous_namespace{math_parser.cpp}::get_dialogue_ass()</a>, <a class="el" href="math__parser_8cpp_source.html#l00092">anonymous_namespace{math_parser.cpp}::get_dialogue_eval()</a>, <a class="el" href="math__parser_8cpp_source.html#l00065">anonymous_namespace{math_parser.cpp}::get_function()</a>, <a class="el" href="math__parser_8cpp_source.html#l00056">anonymous_namespace{math_parser.cpp}::get_number()</a>, <a class="el" href="math__parser_8cpp_source.html#l00107">anonymous_namespace{math_parser.cpp}::get_unary_op()</a>, <a class="el" href="math__parser_8cpp_source.html#l00177">anonymous_namespace{math_parser.cpp}::is_assign_target()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">left</a>, <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">left_sq</a>, and <a class="el" href="math__parser__func_8cpp_source.html#l00007">tokenize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<a id="a6676c8f59cc670e12305d04c649bcf40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6676c8f59cc670e12305d04c649bcf40">&#9670;&nbsp;</a></span>assign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::assign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00299">299</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                                     {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            std::visit( <a class="code" href="structoverloaded.html">overloaded</a>{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                [&amp;d, val]( <a class="code" href="structfunc__diag__ass.html">func_diag_ass</a> <span class="keyword">const</span> &amp; v ) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    v.assign( d, val );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                },</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                [&amp;d, val]( <a class="code" href="structvar.html">var</a> <span class="keyword">const</span> &amp; v ) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    <a class="code" href="condition_8cpp.html#a01d5042674cad3ab7c81f5e1033fa010">write_var_value</a>( v.varinfo.type, v.varinfo.name,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                     &amp;d, val );</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                },</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                []( <span class="keyword">auto</span> &amp;<span class="comment">/* v */</span> ) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Assignment called on eval tree&quot;</span> );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                },</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            },</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a>.<a class="code" href="structthingie.html#a88fd5748c85c48dc625cc5505f0babae">data</a> );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="ttc" id="acondition_8cpp_html_a01d5042674cad3ab7c81f5e1033fa010"><div class="ttname"><a href="condition_8cpp.html#a01d5042674cad3ab7c81f5e1033fa010">write_var_value</a></div><div class="ttdeci">void write_var_value(var_type type, const std::string &amp;name, dialogue *d, const std::string &amp;value, int call_depth)</div><div class="ttdef"><b>Definition:</b> <a href="condition_8cpp_source.html#l00477">condition.cpp:477</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="astructfunc__diag__ass_html"><div class="ttname"><a href="structfunc__diag__ass.html">func_diag_ass</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00094">math_parser_impl.h:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h_source.html#l00148">thingie::data</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="math__parser_8cpp_source.html#l00339">tree</a>, and <a class="el" href="condition_8cpp_source.html#l00477">write_var_value()</a>.</p>

</div>
</div>
<a id="ab29e782b8be538ed550adee973940553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab29e782b8be538ed550adee973940553">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::error </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>what</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00799">799</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;{</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    std::ptrdiff_t offset =</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        std::max&lt;std::ptrdiff_t&gt;( 0, <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">last_token</a>.data() - str.data() );</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">// center the problematic token on screen if the expression is too long</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span>( offset &gt; 80 ) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        str.remove_prefix( offset - 40 );</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        offset = 40;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal): debug message</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    std::string mess = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Expression parsing failed: %s&quot;</span>, what );</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">last_token</a> == <span class="stringliteral">&quot;(&quot;</span> &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.expected == parse_state::expect::oper &amp;&amp;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        std::holds_alternative&lt;var&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top().data ) ) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal): debug message</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        mess = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s (or unknown function %s)&quot;</span>, mess,</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                              std::get&lt;var&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top().data ).varinfo.name.substr( 12 ) );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    offset = std::max&lt;std::ptrdiff_t&gt;( 0, offset - 1 );</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s\n\n%.80s\n%*s\n&quot;</span>, mess, str, offset, <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<a id="ae8954196d9e810cb41490a4d4f800716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8954196d9e810cb41490a4d4f800716">&#9670;&nbsp;</a></span>eval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double math_exp::math_exp_impl::eval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdialogue.html">dialogue</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00295">295</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                         {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a>.<a class="code" href="structthingie.html#a7223c68a7d270d4dd2e1bae138d088c0">eval</a>( d );</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="ttc" id="astructthingie_html_a7223c68a7d270d4dd2e1bae138d088c0"><div class="ttname"><a href="structthingie.html#a7223c68a7d270d4dd2e1bae138d088c0">thingie::eval</a></div><div class="ttdeci">constexpr double eval(dialogue &amp;d) const</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00151">math_parser_impl.h:151</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h_source.html#l00151">thingie::eval()</a>, and <a class="el" href="math__parser_8cpp_source.html#l00339">tree</a>.</p>

</div>
</div>
<a id="a58875b6ccd4d615331b9da60245cbdfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58875b6ccd4d615331b9da60245cbdfd">&#9670;&nbsp;</a></span>maybe_first_argument()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::maybe_first_argument </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00366">366</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().allows_comma() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current == 0 ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current++;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00338">arity</a>.</p>

</div>
</div>
<a id="ac1d2227a43433f7697aff555dd05a278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1d2227a43433f7697aff555dd05a278">&#9670;&nbsp;</a></span>new_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00708">708</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    std::vector&lt;thingie&gt;::size_type <span class="keyword">const</span> nparams = <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    std::vector&lt;thingie&gt; params( nparams );</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">for</span>( std::vector&lt;thingie&gt;::size_type i = 0; i &lt; nparams; i++ ) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        params[nparams - i - 1] = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;array&gt;(), std::move( params ) );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ada8a26e922ee0536a4607a0272d2c86a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8a26e922ee0536a4607a0272d2c86a">&#9670;&nbsp;</a></span>new_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_func </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00581">581</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;{</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() &amp;&amp; <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#acc6ac098a89964ecb09c4b8eea687705">is_function</a>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) ) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        std::vector&lt;thingie&gt;::size_type <span class="keyword">const</span> nparams = <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().expected &gt;= 0 ) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current &lt; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().expected ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Not enough arguments for function %s()&quot;</span>, <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().sym ) );</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current &gt; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().expected ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Too many arguments for function %s()&quot;</span>, <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().sym ) );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        std::vector&lt;thingie&gt; params( nparams );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="math__parser__diag_8h.html#a3b78394b12aaee54b0d69a2d05dd5155">diag_kwargs</a> kwargs;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">for</span>( std::vector&lt;kwarg&gt;::size_type i = 0; i &lt; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().nkwargs; i++ ) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span>( !std::holds_alternative&lt;kwarg&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top().data ) ) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    <span class="stringliteral">&quot;All positional arguments must precede keyword-value pairs&quot;</span> );</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="structkwarg.html">kwarg</a> &amp;kw = std::get&lt;kwarg&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top().data );</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            kwargs.emplace( kw.<a class="code" href="structkwarg.html#aa234e4fe06370646f0250ce3ed0f96d5">key</a>, <a class="code" href="classmath__exp_1_1math__exp__impl.html#a3c68ca41c71508b0b30b72963de3cd55">_get_diag_value</a>( *kw.<a class="code" href="structkwarg.html#a33a6698e95b7722fed2e2b5551fc5c7b">val</a> ) );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">for</span>( std::vector&lt;thingie&gt;::size_type i = 0; i &lt; nparams; i++ ) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            params[nparams - i - 1] = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        std::visit( <a class="code" href="structoverloaded.html">overloaded</a>{</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            [&amp;params, &amp;kwargs, <span class="keyword">this</span>]( <a class="code" href="structscoped__diag__eval.html">scoped_diag_eval</a> <span class="keyword">const</span> &amp; v )</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                std::vector&lt;diag_value&gt; <span class="keyword">const</span> args = <a class="code" href="classmath__exp_1_1math__exp__impl.html#ac18ae29cd1b78b722a80429959a4a6e0">_get_diag_vals</a>( params );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;func_diag_eval&gt;(), v.df-&gt;f( v.scope, args, kwargs ) );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            },</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            [&amp;params, &amp;kwargs, <span class="keyword">this</span>]( <a class="code" href="structscoped__diag__ass.html">scoped_diag_ass</a> <span class="keyword">const</span> &amp; v )</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                std::vector&lt;diag_value&gt; <span class="keyword">const</span> args = <a class="code" href="classmath__exp_1_1math__exp__impl.html#ac18ae29cd1b78b722a80429959a4a6e0">_get_diag_vals</a>( params );</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;func_diag_ass&gt;(), v.df-&gt;f( v.scope, args, kwargs ) );</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            },</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            [&amp;params, <span class="keyword">this</span>]( <a class="code" href="math__parser__func_8h.html#a6427b84eddf517e75d7ffb1ace22c75b">pmath_func</a> v )</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;func&gt;(), std::move( params ), v-&gt;f );</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            },</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            [&amp;params, <span class="keyword">this</span>]( <a class="code" href="classstring__id.html">jmath_func_id</a> <span class="keyword">const</span> &amp; v )</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;func_jmath&gt;(), std::move( params ), v );</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            },</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            []( <span class="keyword">auto</span> <span class="comment">/* v */</span> )</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Internal func error.  That&#39;s all we know.&quot;</span> );</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            },</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        },</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() );</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a0dfa586f07ec1812993af539e999765b">_validate_unused_kwargs</a>( kwargs );</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.pop();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ac18ae29cd1b78b722a80429959a4a6e0"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ac18ae29cd1b78b722a80429959a4a6e0">math_exp::math_exp_impl::_get_diag_vals</a></div><div class="ttdeci">static std::vector&lt; diag_value &gt; _get_diag_vals(std::vector&lt; thingie &gt; &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00675">math_parser.cpp:675</a></div></div>
<div class="ttc" id="amath__parser__diag_8h_html_a3b78394b12aaee54b0d69a2d05dd5155"><div class="ttname"><a href="math__parser__diag_8h.html#a3b78394b12aaee54b0d69a2d05dd5155">diag_kwargs</a></div><div class="ttdeci">std::map&lt; std::string, deref_diag_value &gt; diag_kwargs</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__diag_8h_source.html#l00012">math_parser_diag.h:12</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a6427b84eddf517e75d7ffb1ace22c75b"><div class="ttname"><a href="math__parser__func_8h.html#a6427b84eddf517e75d7ffb1ace22c75b">pmath_func</a></div><div class="ttdeci">math_func const * pmath_func</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00022">math_parser_func.h:22</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_a0dfa586f07ec1812993af539e999765b"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a0dfa586f07ec1812993af539e999765b">anonymous_namespace{math_parser.cpp}::_validate_unused_kwargs</a></div><div class="ttdeci">void _validate_unused_kwargs(diag_kwargs const &amp;kwargs)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00205">math_parser.cpp:205</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_acc6ac098a89964ecb09c4b8eea687705"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#acc6ac098a89964ecb09c4b8eea687705">anonymous_namespace{math_parser.cpp}::is_function</a></div><div class="ttdeci">bool is_function(op_t const &amp;op)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00169">math_parser.cpp:169</a></div></div>
<div class="ttc" id="astructkwarg_html"><div class="ttname"><a href="structkwarg.html">kwarg</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00117">math_parser_impl.h:117</a></div></div>
<div class="ttc" id="astructkwarg_html_a33a6698e95b7722fed2e2b5551fc5c7b"><div class="ttname"><a href="structkwarg.html#a33a6698e95b7722fed2e2b5551fc5c7b">kwarg::val</a></div><div class="ttdeci">std::shared_ptr&lt; thingie &gt; val</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00121">math_parser_impl.h:121</a></div></div>
<div class="ttc" id="astructkwarg_html_aa234e4fe06370646f0250ce3ed0f96d5"><div class="ttname"><a href="structkwarg.html#aa234e4fe06370646f0250ce3ed0f96d5">kwarg::key</a></div><div class="ttdeci">std::string key</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00120">math_parser_impl.h:120</a></div></div>
<div class="ttc" id="astructscoped__diag__ass_html"><div class="ttname"><a href="structscoped__diag__ass.html">scoped_diag_ass</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00053">math_parser_impl.h:53</a></div></div>
<div class="ttc" id="astructscoped__diag__eval_html"><div class="ttname"><a href="structscoped__diag__eval.html">scoped_diag_eval</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00048">math_parser_impl.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00205">anonymous_namespace{math_parser.cpp}::_validate_unused_kwargs()</a>, <a class="el" href="math__parser_8cpp_source.html#l00169">anonymous_namespace{math_parser.cpp}::is_function()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00120">kwarg::key</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00121">kwarg::val</a>.</p>

</div>
</div>
<a id="a0dafdec53449b7d09fa6347eaf9f77ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dafdec53449b7d09fa6347eaf9f77ef">&#9670;&nbsp;</a></span>new_kwarg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_kwarg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&#160;</td>
          <td class="paramname"><em>lhs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00684">684</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().type != <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754">arity_t::type_t::func</a> || !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().stringy ) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;kwargs are not supported in this scope&quot;</span> );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span>( !std::holds_alternative&lt;std::string&gt;( lhs.<a class="code" href="structthingie.html#a88fd5748c85c48dc625cc5505f0babae">data</a> ) ) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;kwarg key must be a string&quot;</span> );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;kwarg&gt;(), std::get&lt;std::string&gt;( lhs.<a class="code" href="structthingie.html#a88fd5748c85c48dc625cc5505f0babae">data</a> ), rhs );</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current--;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().nkwargs++;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h_source.html#l00148">thingie::data</a>.</p>

</div>
</div>
<a id="a226cc72a2f40ad1729ae4ed32dd72296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a226cc72a2f40ad1729ae4ed32dd72296">&#9670;&nbsp;</a></span>new_oper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_oper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00719">719</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="math__parser__impl_8h.html#aa19d5c3976d527bd05aa4b76264e4500">op_t</a> op( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.pop();</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    std::visit( <a class="code" href="structoverloaded.html">overloaded</a>{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        [<span class="keyword">this</span>]( <a class="code" href="math__parser__impl_8h.html#a3821cce5a0742ed0a54d9a39e79c7cf5">pbin_op</a> v )</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.size() &gt;= 2 );</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <a class="code" href="structthingie.html">thingie</a> rhs = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <a class="code" href="structthingie.html">thingie</a> lhs = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordflow">if</span>( v-&gt;symbol == <span class="stringliteral">&quot;?&quot;</span> ) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Unterminated ternary&quot;</span> );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">if</span>( v-&gt;symbol == <span class="stringliteral">&quot;:&quot;</span> ) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                std::string_view top_sym =</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                    !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() &amp;&amp; std::holds_alternative&lt;pbin_op&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() )</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    ? std::get&lt;pbin_op&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() )-&gt;symbol</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    : std::string_view{};</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.empty() &amp;&amp; top_sym == <span class="stringliteral">&quot;?&quot;</span> ) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                    <a class="code" href="classmath__exp_1_1math__exp__impl.html#af47398aafdffb5b0f8e949fc67deced8">new_ternary</a>( lhs, rhs );</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current &gt; 0 ) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a0dafdec53449b7d09fa6347eaf9f77ef">new_kwarg</a>( lhs, rhs );</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Misplaced colon&quot;</span> );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( lhs, v-&gt;symbol );</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( rhs, v-&gt;symbol );</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;oper&gt;(), lhs, rhs, v-&gt;f );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        },</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        [<span class="keyword">this</span>]( <a class="code" href="math__parser__impl_8h.html#a2d0d918ab50b515085b894aef9df5fac">punary_op</a> v )</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.empty() );</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <a class="code" href="structthingie.html">thingie</a> rhs = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( rhs, v-&gt;symbol );</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;oper&gt;(), <a class="code" href="structthingie.html">thingie</a> { 0.0 }, rhs, v-&gt;f );</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        },</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        []( <span class="keyword">auto</span> <span class="comment">/* v */</span> )</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="comment">// we should never get here due to paren validation</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Internal oper error.  That&#39;s all we know.&quot;</span> );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    },</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    op );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a0dafdec53449b7d09fa6347eaf9f77ef"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a0dafdec53449b7d09fa6347eaf9f77ef">math_exp::math_exp_impl::new_kwarg</a></div><div class="ttdeci">void new_kwarg(thingie &amp;lhs, thingie &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00684">math_parser.cpp:684</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_af47398aafdffb5b0f8e949fc67deced8"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#af47398aafdffb5b0f8e949fc67deced8">math_exp::math_exp_impl::new_ternary</a></div><div class="ttdeci">void new_ternary(thingie &amp;lhs, thingie &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00697">math_parser.cpp:697</a></div></div>
<div class="ttc" id="amath__parser__impl_8h_html_a2d0d918ab50b515085b894aef9df5fac"><div class="ttname"><a href="math__parser__impl_8h.html#a2d0d918ab50b515085b894aef9df5fac">punary_op</a></div><div class="ttdeci">unary_op const * punary_op</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00034">math_parser_impl.h:34</a></div></div>
<div class="ttc" id="amath__parser__impl_8h_html_a3821cce5a0742ed0a54d9a39e79c7cf5"><div class="ttname"><a href="math__parser__impl_8h.html#a3821cce5a0742ed0a54d9a39e79c7cf5">pbin_op</a></div><div class="ttdeci">binary_op const * pbin_op</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00029">math_parser_impl.h:29</a></div></div>
<div class="ttc" id="amath__parser__impl_8h_html_aa19d5c3976d527bd05aa4b76264e4500"><div class="ttname"><a href="math__parser__impl_8h.html#aa19d5c3976d527bd05aa4b76264e4500">op_t</a></div><div class="ttdeci">std::variant&lt; pbin_op, punary_op, pmath_func, jmath_func_id, scoped_diag_eval, scoped_diag_ass, paren &gt; op_t</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00182">math_parser_impl.h:183</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02math__parser_8cpp_03_html_a4b91055f19dff32fd71682e16b93cb69"><div class="ttname"><a href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">anonymous_namespace{math_parser.cpp}::_validate_operand</a></div><div class="ttdeci">constexpr void _validate_operand(thingie const &amp;thing, std::string_view symbol)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00193">math_parser.cpp:193</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00193">anonymous_namespace{math_parser.cpp}::_validate_operand()</a>, and <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>.</p>

</div>
</div>
<a id="af47398aafdffb5b0f8e949fc67deced8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af47398aafdffb5b0f8e949fc67deced8">&#9670;&nbsp;</a></span>new_ternary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_ternary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&#160;</td>
          <td class="paramname"><em>lhs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structthingie.html">thingie</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00697">697</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;{</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( lhs, <span class="stringliteral">&quot;?:&quot;</span> );</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( rhs, <span class="stringliteral">&quot;?:&quot;</span> );</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.pop();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="structthingie.html">thingie</a> cond = std::move( <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.top() );</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#a4b91055f19dff32fd71682e16b93cb69">_validate_operand</a>( cond, <span class="stringliteral">&quot;?:&quot;</span> );</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.pop();</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;ternary&gt;(), cond, lhs, rhs );</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00193">anonymous_namespace{math_parser.cpp}::_validate_operand()</a>.</p>

</div>
</div>
<a id="a3f964eca9e46b4250c4feb9d15af7fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f964eca9e46b4250c4feb9d15af7fec">&#9670;&nbsp;</a></span>new_var()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::new_var </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00772">772</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;{</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    std::string_view scoped = str;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89">var_type</a> <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a9c70933aff6b2a6d08c687a6cbb6b765">var_type::global</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span>( str.size() &gt; 2 &amp;&amp; str[1] == <span class="charliteral">&#39;_&#39;</span> ) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        scoped = scoped.substr( 2 );</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">switch</span>( str[0] ) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a1579b7fb48b3bdb81d6e6d7f30b734c9">var_type::npc</a>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89ab2145aac704ce76dbe1ac7adac535b23">var_type::var</a>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Unknown scope %c in variable %s&quot;</span>, str[0], str );</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( str.size() &gt; 1 &amp;&amp; str[0] == <span class="charliteral">&#39;_&#39;</span> ) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        scoped = scoped.substr( 1 );</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a242a84336c2d86429e1746b98c600d37">validate_string</a>( scoped, <span class="stringliteral">&quot;variable&quot;</span>, <span class="stringliteral">&quot; \&#39;&quot;</span> );</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;var&gt;(), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <span class="stringliteral">&quot;npctalk_var_&quot;</span> + std::string{ scoped } );</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a242a84336c2d86429e1746b98c600d37"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a242a84336c2d86429e1746b98c600d37">math_exp::math_exp_impl::validate_string</a></div><div class="ttdeci">void validate_string(std::string_view str, std::string_view label, std::string_view badlist)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00821">math_parser.cpp:821</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">ot_match_type::type</a></div><div class="ttdeci">@ type</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89">var_type</a></div><div class="ttdeci">var_type</div><div class="ttdef"><b>Definition:</b> <a href="global__vars_8h_source.html#l00008">global_vars.h:8</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a1579b7fb48b3bdb81d6e6d7f30b734c9"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a1579b7fb48b3bdb81d6e6d7f30b734c9">var_type::npc</a></div><div class="ttdeci">@ npc</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a9c70933aff6b2a6d08c687a6cbb6b765"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a9c70933aff6b2a6d08c687a6cbb6b765">var_type::global</a></div><div class="ttdeci">@ global</div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89ab2145aac704ce76dbe1ac7adac535b23"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89ab2145aac704ce76dbe1ac7adac535b23">var_type::var</a></div><div class="ttdeci">@ var</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a9c70933aff6b2a6d08c687a6cbb6b765">global</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a1579b7fb48b3bdb81d6e6d7f30b734c9">npc</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>, and <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89ab2145aac704ce76dbe1ac7adac535b23">var</a>.</p>

</div>
</div>
<a id="a6baefc4ac2b4582c4696d0559774829b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6baefc4ac2b4582c4696d0559774829b">&#9670;&nbsp;</a></span>parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool math_exp::math_exp_impl::parse </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>assignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00275">275</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                                          {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span>( str.empty() ) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            std::locale <span class="keyword">const</span> &amp;oldloc = std::locale::global( std::locale::classic() );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="classon__out__of__scope.html">on_out_of_scope</a> reset_loc( [&amp;oldloc]() {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                std::locale::global( oldloc );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            } );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#a51f95697f9e7a7ad910d0b56d14f6dc5">_parse</a>( str, assignment );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            } <span class="keywordflow">catch</span>( std::invalid_argument <span class="keyword">const</span> &amp;ex ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ab29e782b8be538ed550adee973940553">error</a>( str, ex.what() );</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a> = {};</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a> = {};</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a> = {};</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="classmath__exp_1_1math__exp__impl.html#aa4516f8dd80406d330737a37b0d6e4f1">tree</a> = <a class="code" href="structthingie.html">thingie</a> { 0.0 };</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_a51f95697f9e7a7ad910d0b56d14f6dc5"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#a51f95697f9e7a7ad910d0b56d14f6dc5">math_exp::math_exp_impl::_parse</a></div><div class="ttdeci">void _parse(std::string_view str, bool assignment)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00373">math_parser.cpp:373</a></div></div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ab29e782b8be538ed550adee973940553"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ab29e782b8be538ed550adee973940553">math_exp::math_exp_impl::error</a></div><div class="ttdeci">void error(std::string_view str, std::string_view what)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00799">math_parser.cpp:799</a></div></div>
<div class="ttc" id="aclasson__out__of__scope_html"><div class="ttname"><a href="classon__out__of__scope.html">on_out_of_scope</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__scope__helpers_8h_source.html#l00007">cata_scope_helpers.h:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00373">_parse()</a>, <a class="el" href="math__parser_8cpp_source.html#l00338">arity</a>, <a class="el" href="math__parser_8cpp_source.html#l00799">error()</a>, <a class="el" href="math__parser_8cpp_source.html#l00316">ops</a>, <a class="el" href="math__parser_8cpp_source.html#l00317">output</a>, and <a class="el" href="math__parser_8cpp_source.html#l00339">tree</a>.</p>

</div>
</div>
<a id="addc0ff28328bc91c8c50c08fda438bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc0ff28328bc91c8c50c08fda438bbc">&#9670;&nbsp;</a></span>parse_bin_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_bin_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="math__parser__impl_8h.html#a3821cce5a0742ed0a54d9a39e79c7cf5">pbin_op</a> const &amp;&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00487">487</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;{</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span>( op-&gt;symbol == <span class="stringliteral">&quot;:&quot;</span> &amp;&amp; !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().type == <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a1f18e38f332585635cc9bc04ee61bcf1">arity_t::type_t::ternary</a> ) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// insert a pair of parens to help resolve nested ternaries like 0?0?-1:-2:1</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a30da6e20bf4370be67ad8c14c2f7f955">parse_rparen</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::oper );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">while</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() &gt; *op ) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a>();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( op );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::operand, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span>( op-&gt;symbol == <span class="stringliteral">&quot;?&quot;</span> ) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7a27d922664f930ff7b4e9137e6f4c43">parse_lparen</a>( <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a1f18e38f332585635cc9bc04ee61bcf1">arity_t::type_t::ternary</a> );</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="ttc" id="astructmath__exp_1_1math__exp__impl_1_1arity__t_html_aa5150e9ea65ace49afd35087f48e1336a1f18e38f332585635cc9bc04ee61bcf1"><div class="ttname"><a href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a1f18e38f332585635cc9bc04ee61bcf1">math_exp::math_exp_impl::arity_t::type_t::ternary</a></div><div class="ttdeci">@ ternary</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7384db63119cd14bc1d4c8be59d1a7a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7384db63119cd14bc1d4c8be59d1a7a6">&#9670;&nbsp;</a></span>parse_comma()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_comma </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00513">513</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::oper );</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() || !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().allows_comma() ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Misplaced comma&quot;</span> );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">while</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() &gt; <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a> ) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a>();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().current++;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::operand, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">left</a>.</p>

</div>
</div>
<a id="a8a1aace1774a745c8445e5fbcde8417a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a1aace1774a745c8445e5fbcde8417a">&#9670;&nbsp;</a></span>parse_diag_f()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_diag_f </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>symbol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T const &amp;&#160;</td>
          <td class="paramname"><em>token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00505">505</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( token );</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.emplace( <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a>, token.df-&gt;num_params, <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a7df4935f4a5a2865191ef74f64df8754">arity_t::type_t::func</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::lparen, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="ttc" id="aeditmap_8cpp_html_aad8315087dc1d0ef9212680412a20601"><div class="ttname"><a href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a></div><div class="ttdeci">static int symbol(const T_t &amp;t)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol()</a>.</p>

</div>
</div>
<a id="a8244ae803a3dee36d1e6c2fab1df28d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8244ae803a3dee36d1e6c2fab1df28d2">&#9670;&nbsp;</a></span>parse_lbracket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_lbracket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00553">553</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::lbracket );</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() || !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().stringy ) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Arrays can only be used as arguments for dialogue functions&quot;</span> );</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.emplace( std::string_view{}, 0, <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336af1f713c9e000f5d3f280adbd124df4f5">arity_t::type_t::array</a>,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                   !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().stringy );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">paren::left_sq</a> );</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::operand, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="ttc" id="astructmath__exp_1_1math__exp__impl_1_1arity__t_html_aa5150e9ea65ace49afd35087f48e1336af1f713c9e000f5d3f280adbd124df4f5"><div class="ttname"><a href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336af1f713c9e000f5d3f280adbd124df4f5">math_exp::math_exp_impl::arity_t::type_t::array</a></div><div class="ttdeci">@ array</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">left_sq</a>.</p>

</div>
</div>
<a id="a7a27d922664f930ff7b4e9137e6f4c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a27d922664f930ff7b4e9137e6f4c43">&#9670;&nbsp;</a></span>parse_lparen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_lparen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336">arity_t::type_t</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336a9df60d2c4b9e9125d641c10d7ee68401">arity_t::type_t::parens</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00526">526</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::lparen );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() || !<a class="code" href="namespaceanonymous__namespace_02math__parser_8cpp_03.html#acc6ac098a89964ecb09c4b8eea687705">is_function</a>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) ) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.emplace( std::string_view{}, 0, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().stringy );</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.emplace( <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a> );</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::operand, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser_8cpp_source.html#l00169">anonymous_namespace{math_parser.cpp}::is_function()</a>, <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">left</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="afbbb188b54caa0849b54d6f05d89c6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbbb188b54caa0849b54d6f05d89c6d7">&#9670;&nbsp;</a></span>parse_rbracket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_rbracket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00565">565</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::rbracket );</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() || <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().type != <a class="code" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html#aa5150e9ea65ace49afd35087f48e1336af1f713c9e000f5d3f280adbd124df4f5">arity_t::type_t::array</a> ) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Misplaced right bracket&quot;</span> );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">while</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() &gt; <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">paren::left_sq</a> ) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a>();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.pop();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ac1d2227a43433f7697aff555dd05a278">new_array</a>();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.pop();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::oper );</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ac1d2227a43433f7697aff555dd05a278"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ac1d2227a43433f7697aff555dd05a278">math_exp::math_exp_impl::new_array</a></div><div class="ttdeci">void new_array()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00708">math_parser.cpp:708</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1add1cffa0033b3f8d4bb58438e9b22cb2">left_sq</a>.</p>

</div>
</div>
<a id="a30da6e20bf4370be67ad8c14c2f7f955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30da6e20bf4370be67ad8c14c2f7f955">&#9670;&nbsp;</a></span>parse_rparen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_rparen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00536">536</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::rparen );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">while</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() &amp;&amp; <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() &gt; <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a> ) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a226cc72a2f40ad1729ae4ed32dd72296">new_oper</a>();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.empty() || !std::holds_alternative&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) ||</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        std::get&lt;paren&gt;( <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.top() ) != <a class="code" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">paren::left</a> ) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;Misplaced right parenthesis&quot;</span> );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a011f6ad129c19da6176a010d2714f84a">ops</a>.pop();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#ada8a26e922ee0536a4607a0272d2c86a">new_func</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.pop();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::oper, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div>
<div class="ttc" id="aclassmath__exp_1_1math__exp__impl_html_ada8a26e922ee0536a4607a0272d2c86a"><div class="ttname"><a href="classmath__exp_1_1math__exp__impl.html#ada8a26e922ee0536a4607a0272d2c86a">math_exp::math_exp_impl::new_func</a></div><div class="ttdeci">void new_func()</div><div class="ttdef"><b>Definition:</b> <a href="math__parser_8cpp_source.html#l00581">math_parser.cpp:581</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h.html#a03038e8554bc1390e59ad3e4a66bb8b1a811882fecd5c7618d7099ebbd39ea254">left</a>.</p>

</div>
</div>
<a id="ad7ccfbe22142a412a1b05a4545707c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ccfbe22142a412a1b05a4545707c79">&#9670;&nbsp;</a></span>parse_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::parse_string </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>full</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00465">465</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.instring ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.validate( parse_state::expect::operand );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a58875b6ccd4d615331b9da60245cbdfd">maybe_first_argument</a>();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.empty() || !<a class="code" href="classmath__exp_1_1math__exp__impl.html#acd4117298a8c0d5a967c857b4d4d95f7">arity</a>.top().stringy ) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument( <span class="stringliteral">&quot;String arguments can only be used in dialogue functions&quot;</span> );</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.instring = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.strpos = token;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::string, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( token == <span class="stringliteral">&quot;&#39;&quot;</span> ) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// FIXME: write a better tokenizer that returns the entire quoted string as a single token</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#ae9860afaa5043cbabe59fb1688b220cf">output</a>.emplace( std::in_place_type_t&lt;std::string&gt;(), full, <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.strpos.data() - full.data() + 1,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        token.data() - <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.strpos.data() - 1 );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.instring = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a72551ab4e19de1d3f2ef313868825705">state</a>.set( parse_state::expect::oper, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// skip tokens inside string</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a242a84336c2d86429e1746b98c600d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242a84336c2d86429e1746b98c600d37">&#9670;&nbsp;</a></span>validate_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void math_exp::math_exp_impl::validate_string </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>badlist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00821">821</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;{</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    std::string_view::size_type <span class="keyword">const</span> <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> = str.find_first_of( badlist );</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> != std::string_view::npos ) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="classmath__exp_1_1math__exp__impl.html#a7464630b2854502179fbc8df6f0f5aa9">last_token</a>.remove_prefix( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> + ( <a class="code" href="structlabel.html">label</a> == <span class="stringliteral">&quot;string&quot;</span> ? 1 : 0 ) );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal): debug message</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( R<span class="stringliteral">&quot;(Stray &quot; %c &quot; inside %s operand &quot;%s&quot;)&quot;,</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral">                                     str[<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>], <a class="code" href="structlabel.html">label</a>, str ) );</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">}</span></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="astructlabel_html"><div class="ttname"><a href="structlabel.html">label</a></div><div class="ttdoc">Struct used for storing labels (easier to json opposed to a std::map&lt;point, std::string&gt;)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00687">vehicle.h:687</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="acd4117298a8c0d5a967c857b4d4d95f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4117298a8c0d5a967c857b4d4d95f7">&#9670;&nbsp;</a></span>arity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::stack&lt;<a class="el" href="structmath__exp_1_1math__exp__impl_1_1arity__t.html">arity_t</a>&gt; math_exp::math_exp_impl::arity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00338">338</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00366">maybe_first_argument()</a>, and <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<a id="a7464630b2854502179fbc8df6f0f5aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7464630b2854502179fbc8df6f0f5aa9">&#9670;&nbsp;</a></span>last_token</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string_view math_exp::math_exp_impl::last_token</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00340">340</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

</div>
</div>
<a id="a011f6ad129c19da6176a010d2714f84a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011f6ad129c19da6176a010d2714f84a">&#9670;&nbsp;</a></span>ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::stack&lt;<a class="el" href="math__parser__impl_8h.html#aa19d5c3976d527bd05aa4b76264e4500">op_t</a>&gt; math_exp::math_exp_impl::ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00316">316</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<a id="ae9860afaa5043cbabe59fb1688b220cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9860afaa5043cbabe59fb1688b220cf">&#9670;&nbsp;</a></span>output</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::stack&lt;<a class="el" href="structthingie.html">thingie</a>&gt; math_exp::math_exp_impl::output</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00317">317</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<a id="a72551ab4e19de1d3f2ef313868825705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72551ab4e19de1d3f2ef313868825705">&#9670;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">parse_state math_exp::math_exp_impl::state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00341">341</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

</div>
</div>
<a id="aa4516f8dd80406d330737a37b0d6e4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4516f8dd80406d330737a37b0d6e4f1">&#9670;&nbsp;</a></span>tree</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthingie.html">thingie</a> math_exp::math_exp_impl::tree { 0.0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="math__parser_8cpp_source.html#l00339">339</a> of file <a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="math__parser_8cpp_source.html#l00299">assign()</a>, <a class="el" href="math__parser_8cpp_source.html#l00295">eval()</a>, and <a class="el" href="math__parser_8cpp_source.html#l00275">parse()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="math__parser_8cpp_source.html">math_parser.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:41 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
