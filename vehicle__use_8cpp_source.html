<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/vehicle_use.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vehicle_use.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vehicle__use_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span> <span class="comment">// IWYU pragma: associated</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="action_8h.html">action.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__handlers_8h.html">activity_handlers.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__type_8h.html">activity_type.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clzones_8h.html">clzones.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature__tracker_8h.html">creature_tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gates_8h.html">gates.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iexamine_8h.html">iexamine.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="inventory_8h.html">inventory.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse_8h.html">iuse.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__inventory_8h.html">game_inventory.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="make__static_8h.html">make_static.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map__iterator_8h.html">map_iterator.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mapdata_8h.html">mapdata.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtype_8h.html">mtype.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="player__activity_8h.html">player_activity.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pocket__type_8h.html">pocket_type.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="requirements_8h.html">requirements.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="smart__controller__ui_8h.html">smart_controller_ui.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sounds_8h.html">sounds.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__input__popup_8h.html">string_input_popup.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ui_8h.html">ui.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="value__ptr_8h.html">value_ptr.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__interact_8h.html">veh_interact.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__type_8h.html">veh_type.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__utils_8h.html">veh_utils.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vehicle__selector_8h.html">vehicle_selector.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vpart__range_8h.html">vpart_range.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">   61</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">activity_id</a> <a class="code" href="vehicle__use_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a>( <span class="stringliteral">&quot;ACT_REPAIR_ITEM&quot;</span> );</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">   62</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">activity_id</a> <a class="code" href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a>( <span class="stringliteral">&quot;ACT_START_ENGINES&quot;</span> );</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">   64</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">   66</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="vehicle__use_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>( <span class="stringliteral">&quot;bash&quot;</span> );</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">   68</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>( <span class="stringliteral">&quot;harnessed&quot;</span> );</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">   69</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a>( <span class="stringliteral">&quot;tied&quot;</span> );</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a8e2f350813b04bfbc356da976a2bc369">   71</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> <a class="code" href="vehicle__use_8cpp.html#a8e2f350813b04bfbc356da976a2bc369">fault_engine_starter</a>( <span class="stringliteral">&quot;fault_engine_starter&quot;</span> );</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a4df4dd60924cd337468bb34326d879a7">   73</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="vehicle__use_8cpp.html#a4df4dd60924cd337468bb34326d879a7">json_flag_FILTHY</a>( <span class="stringliteral">&quot;FILTHY&quot;</span> );</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ac4c2af725902e13cce0e1974ac38dc35">   75</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="vehicle__use_8cpp.html#ac4c2af725902e13cce0e1974ac38dc35">furn_f_plant_harvest</a>( <span class="stringliteral">&quot;f_plant_harvest&quot;</span> );</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ac25a0a4122882b4e13daa1ff9a930921">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="vehicle__use_8cpp.html#ac25a0a4122882b4e13daa1ff9a930921">furn_f_plant_seed</a>( <span class="stringliteral">&quot;f_plant_seed&quot;</span> );</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">   78</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">   79</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>( <span class="stringliteral">&quot;muscle&quot;</span> );</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">   80</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a>( <span class="stringliteral">&quot;null&quot;</span> );</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">   81</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>( <span class="stringliteral">&quot;wind&quot;</span> );</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">   82</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">   83</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>( <span class="stringliteral">&quot;detergent&quot;</span> );</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">   84</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a>( <span class="stringliteral">&quot;fungal_seeds&quot;</span> );</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a2b1ee59bed1fc9f28ad1906bdd6156f1">   85</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a2b1ee59bed1fc9f28ad1906bdd6156f1">itype_large_repairkit</a>( <span class="stringliteral">&quot;large_repairkit&quot;</span> );</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>( <span class="stringliteral">&quot;marloss_seed&quot;</span> );</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">   87</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a>( <span class="stringliteral">&quot;null&quot;</span> );</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a3f88913d28ce63b5bdc3c8d0896309fc">   88</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a3f88913d28ce63b5bdc3c8d0896309fc">itype_pseudo_magazine</a>( <span class="stringliteral">&quot;pseudo_magazine&quot;</span> );</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a135bb2f0f8f655d6940d21d5266b681d">   89</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a135bb2f0f8f655d6940d21d5266b681d">itype_small_repairkit</a>( <span class="stringliteral">&quot;small_repairkit&quot;</span> );</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">   90</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a>( <span class="stringliteral">&quot;soldering_iron&quot;</span> );</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">   91</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>( <span class="stringliteral">&quot;water&quot;</span> );</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">   92</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>( <span class="stringliteral">&quot;water_clean&quot;</span> );</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">   93</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">itype_water_faucet</a>( <span class="stringliteral">&quot;water_faucet&quot;</span> );</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">   94</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>( <span class="stringliteral">&quot;water_purifier&quot;</span> );</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">   95</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a>( <span class="stringliteral">&quot;welder&quot;</span> );</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ad3c8ecbda4c90e562b969cdc72d44b13">   96</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#ad3c8ecbda4c90e562b969cdc72d44b13">itype_welder_crude</a>( <span class="stringliteral">&quot;welder_crude&quot;</span> );</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a7cb50793d92110f40ccdf73a939db97b">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="vehicle__use_8cpp.html#a7cb50793d92110f40ccdf73a939db97b">itype_welding_kit</a>( <span class="stringliteral">&quot;welding_kit&quot;</span> );</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a9e7b1fa7f02502a1af5b038562385985">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> <a class="code" href="vehicle__use_8cpp.html#a9e7b1fa7f02502a1af5b038562385985">qual_SCREW</a>( <span class="stringliteral">&quot;SCREW&quot;</span> );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a>( <span class="stringliteral">&quot;mechanics&quot;</span> );</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">  103</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="vehicle__use_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a>( <span class="stringliteral">&quot;t_dirt&quot;</span> );</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">  104</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ter_str_id</a> <a class="code" href="vehicle__use_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a>( <span class="stringliteral">&quot;t_dirtmound&quot;</span> );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#ab274b12c85d52a095004b28251a35c19">  106</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">vpart_id</a> <a class="code" href="vehicle__use_8cpp.html#ab274b12c85d52a095004b28251a35c19">vpart_horn_bicycle</a>( <span class="stringliteral">&quot;horn_bicycle&quot;</span> );</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#adcb832c9bde8f6dd957bf98e1e27066f">  108</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">zone_type_id</a> <a class="code" href="vehicle__use_8cpp.html#adcb832c9bde8f6dd957bf98e1e27066f">zone_type_VEHICLE_PATROL</a>( <span class="stringliteral">&quot;VEHICLE_PATROL&quot;</span> );</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="vehicle_8h.html#af62204c610c3c22a0ca114864a5f2822">  110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vehicle__use_8cpp.html#af62204c610c3c22a0ca114864a5f2822">handbrake</a>()</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span>( !vp ) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *<span class="keyword">const</span> veh = &amp;vp-&gt;vehicle();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pull a handbrake.&quot;</span> ) );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    veh-&gt;<a class="code" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span>( veh-&gt;<a class="code" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> != 0_degrees &amp;&amp; <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 15, 60 ) * 100 &lt; <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) ) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        veh-&gt;<a class="code" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lose control of %s.&quot;</span> ), veh-&gt;<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        veh-&gt;<a class="code" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( veh-&gt;<a class="code" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> &gt; 0_degrees ? 60_degrees : -60_degrees );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordtype">int</span> braking_power = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) / 2 + 10 * 100;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &lt; braking_power ) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            veh-&gt;<a class="code" href="classvehicle.html#a7d1af7145ff1eac8281e3282daae8efd">stop</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a> = veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 ? 1 : -1;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <a class="code" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a> * ( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) - braking_power );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    player_character.<a class="code" href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">set_moves</a>( 0 );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">  136</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">vehicle::control_doors</a>()</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> open_or_close_all = [<span class="keyword">this</span>]( <span class="keywordtype">bool</span> new_open, <span class="keyword">const</span> std::string &amp; require_flag ) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vpr_motor : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> motorized_idx = new_open</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                      ? <a class="code" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( vpr_motor.part_index() )</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                      : <a class="code" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a>( vpr_motor.part_index() );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">if</span>( motorized_idx == -1 ) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( motorized_idx );</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span>( !require_flag.empty() &amp;&amp; !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( require_flag ) ) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">if</span>( new_open || <a class="code" href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426">can_close</a>( motorized_idx, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) ) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <a class="code" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( motorized_idx, new_open );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    };</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> lock_or_unlock_all = [<span class="keyword">this</span>]( <span class="keywordtype">bool</span> new_lock, <span class="keyword">const</span> std::string &amp; require_flag ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vpr_motor : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> motorized_idx = new_lock</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                      ? <a class="code" href="classvehicle.html#ab475af4821e8a739f4fbd1a4185fb1f1">next_part_to_lock</a>( vpr_motor.part_index() )</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                      : <a class="code" href="classvehicle.html#a316ae13526323d2e762ee54d4161a064">next_part_to_unlock</a>( vpr_motor.part_index() );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">if</span>( motorized_idx == -1 ) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( motorized_idx );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span>( !require_flag.empty() &amp;&amp; !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( require_flag ) ) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">lock_or_unlock</a>( motorized_idx, new_lock );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    };</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> add_openable = [<span class="keyword">this</span>]( <a class="code" href="classveh__menu.html">veh_menu</a> &amp; menu, <span class="keywordtype">int</span> vp_idx ) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span>( vp_idx == -1 ) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( vp_idx );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keyword">const</span> std::string actname = vp.<a class="code" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Close&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Open&quot;</span> );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> = !vp.<a class="code" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, actname, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ) )</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        .<a class="code" href="structveh__menu__item.html#a74eaa5207895c5014aa730385870f9be">hotkey_auto</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp ) )</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vp_idx, <a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>] {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426">can_close</a>( vp_idx, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) )</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <a class="code" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( vp_idx, <a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        } );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    };</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> add_lockable = [<span class="keyword">this</span>]( <a class="code" href="classveh__menu.html">veh_menu</a> &amp; menu, <span class="keywordtype">int</span> vp_idx ) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span>( vp_idx == -1 ) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( vp_idx );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keyword">const</span> std::string actname = vp.<a class="code" href="structvehicle__part.html#a2340e7c1ece626b907ffcc036774b2ca">locked</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unlock&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lock&quot;</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#a5337fabbf67a2981c161b341b896999d">lock</a> = !vp.<a class="code" href="structvehicle__part.html#a2340e7c1ece626b907ffcc036774b2ca">locked</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, actname, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ) )</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        .<a class="code" href="structveh__menu__item.html#a74eaa5207895c5014aa730385870f9be">hotkey_auto</a>()</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp ) )</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vp_idx, <a class="code" href="classvehicle.html#a5337fabbf67a2981c161b341b896999d">lock</a>] {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">lock_or_unlock</a>( vp_idx, <a class="code" href="classvehicle.html#a5337fabbf67a2981c161b341b896999d">lock</a> );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        } );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    };</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classveh__menu.html">veh_menu</a> menu( <span class="keyword">this</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select door to toggle&quot;</span> ) );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        menu.<a class="code" href="classveh__menu.html#a7b9a58449435145fe59d0cc51a3eb3d4">reset</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Open all curtains&quot;</span> ) )</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        .<a class="code" href="structveh__menu__item.html#a74eaa5207895c5014aa730385870f9be">hotkey_auto</a>()</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>() )</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [&amp;open_or_close_all] { open_or_close_all( <span class="keyword">true</span>, <span class="stringliteral">&quot;CURTAIN&quot;</span> ); } );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Open all curtains and doors&quot;</span> ) )</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        .hotkey_auto()</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        .on_submit( [&amp;open_or_close_all, &amp;lock_or_unlock_all] {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            lock_or_unlock_all( <span class="keyword">false</span>, <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span> );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            open_or_close_all( <span class="keyword">true</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        } );</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Close all doors&quot;</span> ) )</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        .hotkey_auto()</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() )</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        .on_submit( [&amp;open_or_close_all] { open_or_close_all( <span class="keyword">false</span>, <span class="stringliteral">&quot;DOOR&quot;</span> ); } );</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Close all curtains and doors&quot;</span> ) )</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        .hotkey_auto()</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">location</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() )</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        .on_submit( [&amp;open_or_close_all] { open_or_close_all( <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span> ); } );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp_motor : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            add_openable( menu, <a class="code" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( vp_motor.part_index() ) );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            add_openable( menu, <a class="code" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a>( vp_motor.part_index() ) );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            add_lockable( menu, <a class="code" href="classvehicle.html#a316ae13526323d2e762ee54d4161a064">next_part_to_unlock</a>( vp_motor.part_index() ) );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            add_lockable( menu, <a class="code" href="classvehicle.html#ab475af4821e8a739f4fbd1a4185fb1f1">next_part_to_lock</a>( vp_motor.part_index() ) );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span>( menu.<a class="code" href="classveh__menu.html#a3175b420aeccaf36f96a68dc80341883">get_items_size</a>() == 4 ) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::control_doors called but no door motors found&quot;</span> );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    } <span class="keywordflow">while</span>( menu.<a class="code" href="classveh__menu.html#a03bca47bb0ae3f015bcd4ba5e0616baf">query</a>() );</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="vehicle__use_8cpp.html#a833b9c4f784363ad7f168bf1632e1121">  247</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vehicle__use_8cpp.html#a833b9c4f784363ad7f168bf1632e1121">add_electronic_toggle</a>( <a class="code" href="classvehicle.html">vehicle</a> &amp;veh, <a class="code" href="classveh__menu.html">veh_menu</a> &amp;menu, <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                   <span class="keyword">const</span> std::string &amp;<a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, <span class="keyword">const</span> std::string &amp;flag )</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// fetch matching parts and abort early if none found</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> found = veh.<a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( flag );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span>( empty( found ) ) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// determine target state - currently parts of similar type are all switched concurrently</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">bool</span> state = std::none_of( found.begin(), found.end(), []( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp; vp ) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        return vp.part().enabled;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    } );</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// can this menu option be selected by the user?</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// if toggled part potentially usable check if could be enabled now (sufficient fuel etc.)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">bool</span> allow = !state || std::any_of( found.begin(), found.end(), []( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp; vp ) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        return vp.vehicle().can_enable( vp.part() );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    } );</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">const</span> std::string msg = state ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on %s&quot;</span> ) : <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn off %s&quot;</span> ), <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> );</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( msg, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) )</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    .<a class="code" href="structveh__menu__item.html#a00631f25b9799a462b4d6b403e4f6c62">enable</a>( allow )</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> )</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [found, state] {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : found )</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;e = vp.<a class="code" href="classvpart__reference.html#a7c5f0276964121404ca463b41254288c">part</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span>( e.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> != state ) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                add_msg( state ? _( <span class="stringliteral">&quot;Turned on %s.&quot;</span> ) : _( <span class="stringliteral">&quot;Turned off %s.&quot;</span> ), e.name() );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                e.enabled = state;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    } );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classvehicle.html#a2408b58971e01ae0fdc695e413d955e9">  285</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a2408b58971e01ae0fdc695e413d955e9">vehicle::build_electronics_menu</a>( <a class="code" href="classveh__menu.html">veh_menu</a> &amp;menu )</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Control doors and curtains&quot;</span> ) )</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;TOGGLE_DOORS&quot;</span> )</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">control_doors</a>(); } );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> || ( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CAMERA&quot;</span> ) &amp;&amp; <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CAMERA_CONTROL&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                  ? <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn off camera system&quot;</span> ), <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> )</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                  : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on camera system&quot;</span> ) )</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        .enable( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) )</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        .hotkey( <span class="stringliteral">&quot;TOGGLE_CAMERA&quot;</span> )</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [&amp;] {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> )</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Camera system disabled&quot;</span> ) );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Camera system enabled&quot;</span> ) );</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = !<a class="code" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        } );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">auto</span> add_toggle = [<span class="keyword">this</span>, &amp;menu]( <span class="keyword">const</span> std::string &amp; <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <span class="keyword">const</span> std::string &amp; <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">const</span> std::string &amp; flag ) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="vehicle__use_8cpp.html#a833b9c4f784363ad7f168bf1632e1121">add_electronic_toggle</a>( *<span class="keyword">this</span>, menu, <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, flag );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    };</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;reactor&quot;</span> ),</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="stringliteral">&quot;TOGGLE_REACTOR&quot;</span>, <span class="stringliteral">&quot;REACTOR&quot;</span> );</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;headlights&quot;</span> ),</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="stringliteral">&quot;TOGGLE_HEADLIGHT&quot;</span>, <span class="stringliteral">&quot;CONE_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;wide angle headlights&quot;</span> ),</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="stringliteral">&quot;TOGGLE_WIDE_HEADLIGHT&quot;</span>, <span class="stringliteral">&quot;WIDE_CONE_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;directed overhead lights&quot;</span> ),</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="stringliteral">&quot;TOGGLE_HALF_OVERHEAD_LIGHT&quot;</span>, <span class="stringliteral">&quot;HALF_CIRCLE_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;overhead lights&quot;</span> ),</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <span class="stringliteral">&quot;TOGGLE_OVERHEAD_LIGHT&quot;</span>, <span class="stringliteral">&quot;CIRCLE_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;aisle lights&quot;</span> ),</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="stringliteral">&quot;TOGGLE_AISLE_LIGHT&quot;</span>, <span class="stringliteral">&quot;AISLE_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;dome lights&quot;</span> ),</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="stringliteral">&quot;TOGGLE_DOME_LIGHT&quot;</span>, <span class="stringliteral">&quot;DOME_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;atomic lights&quot;</span> ),</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="stringliteral">&quot;TOGGLE_ATOMIC_LIGHT&quot;</span>, <span class="stringliteral">&quot;ATOMIC_LIGHT&quot;</span> );</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;stereo&quot;</span> ),</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="stringliteral">&quot;TOGGLE_STEREO&quot;</span>, <span class="stringliteral">&quot;STEREO&quot;</span> );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;chimes&quot;</span> ),</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="stringliteral">&quot;TOGGLE_CHIMES&quot;</span>, <span class="stringliteral">&quot;CHIMES&quot;</span> );</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;fridge&quot;</span> ),</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="stringliteral">&quot;TOGGLE_FRIDGE&quot;</span>, <span class="stringliteral">&quot;FRIDGE&quot;</span> );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;freezer&quot;</span> ),</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="stringliteral">&quot;TOGGLE_FREEZER&quot;</span>, <span class="stringliteral">&quot;FREEZER&quot;</span> );</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;arcade&quot;</span> ),</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="stringliteral">&quot;TOGGLE_ARCADE&quot;</span>, <span class="stringliteral">&quot;ARCADE&quot;</span> );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;space heater&quot;</span> ),</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="stringliteral">&quot;TOGGLE_SPACE_HEATER&quot;</span>, <span class="stringliteral">&quot;SPACE_HEATER&quot;</span> );</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;heated tank&quot;</span> ),</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="stringliteral">&quot;TOGGLE_HEATED_TANK&quot;</span>, <span class="stringliteral">&quot;HEATED_TANK&quot;</span> );</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;cooler&quot;</span> ),</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="stringliteral">&quot;TOGGLE_COOLER&quot;</span>, <span class="stringliteral">&quot;COOLER&quot;</span> );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;recharger&quot;</span> ),</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <span class="stringliteral">&quot;TOGGLE_RECHARGER&quot;</span>, <span class="stringliteral">&quot;RECHARGE&quot;</span> );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;plow&quot;</span> ),</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span>, <span class="stringliteral">&quot;PLOW&quot;</span> );</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;reaper&quot;</span> ),</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="stringliteral">&quot;TOGGLE_REAPER&quot;</span>, <span class="stringliteral">&quot;REAPER&quot;</span> );</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;planter&quot;</span> ),</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="stringliteral">&quot;TOGGLE_PLANTER&quot;</span>, <span class="stringliteral">&quot;PLANTER&quot;</span> );</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;rockwheel&quot;</span> ),</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span>, <span class="stringliteral">&quot;ROCKWHEEL&quot;</span> );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;roadheader&quot;</span> ),</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span>, <span class="stringliteral">&quot;ROADHEAD&quot;</span> );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;scoop&quot;</span> ),</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="stringliteral">&quot;TOGGLE_SCOOP&quot;</span>, <span class="stringliteral">&quot;SCOOP&quot;</span> );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;water purifier&quot;</span> ),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="stringliteral">&quot;TOGGLE_WATER_PURIFIER&quot;</span>, <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span> );</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    add_toggle( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;smart controller&quot;</span> ),</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="stringliteral">&quot;TOGGLE_SMART_ENGINE_CONTROLLER&quot;</span>, <span class="stringliteral">&quot;SMART_ENGINE_CONTROLLER&quot;</span> );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;arc_vp : <a class="code" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;ARCADE&quot;</span> ) ) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">if</span>( arc_vp.part().enabled ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="classitem.html">item</a> *arc_itm = &amp;arc_vp.part().base;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play arcade machine&quot;</span> ) )</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;ARCADE&quot;</span> )</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            .<a class="code" href="structveh__menu__item.html#a00631f25b9799a462b4d6b403e4f6c62">enable</a>( !!arc_itm )</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [arc_itm] { <a class="code" href="namespaceiuse.html#a85b7f720ce7cd6c3b8cc00791a8a46e0">iuse::portable_game</a>( &amp;<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), arc_itm, <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ); } );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="classvehicle.html#af03022f10e08674024f2fb664624ca54">  380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#af03022f10e08674024f2fb664624ca54">vehicle::control_engines</a>()</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">bool</span> dirty = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classveh__menu.html">veh_menu</a> menu( <span class="keyword">this</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Toggle which?&quot;</span> ) );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        menu.<a class="code" href="classveh__menu.html#a7b9a58449435145fe59d0cc51a3eb3d4">reset</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> engine_idx : <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[engine_idx];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;fuel_type : vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;fuel_opts ) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> is_active = vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> &amp;&amp; vp.<a class="code" href="structvehicle__part.html#ad32ebfa9316b0c3baaddea4efa9b7d96">fuel_current</a>() == fuel_type;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> has_fuel = <a class="code" href="classvehicle.html#a289ae4a1152ace4192ff520337364f7a">is_perpetual_type</a>( vp ) || <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( fuel_type );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;[%s] %s %s&quot;</span>, is_active ? <span class="stringliteral">&quot;x&quot;</span> : <span class="stringliteral">&quot; &quot;</span>, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), fuel_type-&gt;nname( 1 ) ) )</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                .<a class="code" href="structveh__menu__item.html#a00631f25b9799a462b4d6b403e4f6c62">enable</a>( vp.<a class="code" href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">is_available</a>() &amp;&amp; has_fuel )</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, engine_idx, fuel_type, &amp;dirty] {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[engine_idx];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#ad32ebfa9316b0c3baaddea4efa9b7d96">fuel_current</a>() == fuel_type )</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        vp.enabled = !vp.enabled;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        vp.fuel_set( fuel_type );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    dirty = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                } );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    } <span class="keywordflow">while</span>( menu.<a class="code" href="classveh__menu.html#a03bca47bb0ae3f015bcd4ba5e0616baf">query</a>() );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span>( !dirty ) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">bool</span> engines_were_on = <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> |= vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// if current velocity greater than new configuration safe speed</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// drop down cruise velocity.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">int</span> safe_vel = <a class="code" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; safe_vel ) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = safe_vel;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span>( engines_were_on &amp;&amp; !<a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn off the %s&#39;s engines to change their configurations.&quot;</span> ), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().controlling_vehicle ) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You change the %s&#39;s engine configuration.&quot;</span> ), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">  438</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">vehicle::smash_security_system</a>()</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span> idx_security = -1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">int</span> idx_controls = -1;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : <a class="code" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a> ) { <span class="comment">//get security and controls location</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( p );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;SECURITY&quot;</span> ) &amp;&amp; !vp.<a class="code" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            idx_security = p;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            idx_controls = <a class="code" href="classvehicle.html#ad8a64866c703516f0746b4e6ee98370c">part_with_feature</a>( vp.<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>, <span class="stringliteral">&quot;CONTROLS&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span>( idx_controls &lt; 0 || idx_security &lt; 0 ) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;No security system found on vehicle.&quot;</span> );</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// both must be valid parts</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_controls = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx_controls );</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_security = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx_security );<span class="comment"></span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">    ///\EFFECT_MECHANICS reduces chance of damaging controls when smashing security system</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">float</span> skill = player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> );</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> percent_controls = 70 / ( 1 + skill );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> percent_alarm = ( skill + 3 ) * 10;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="math__parser__func_8h.html#ae50076ab819eab792b11f8b67d4facc0">rand</a> = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 100 );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span>( percent_controls &gt; <a class="code" href="math__parser__func_8h.html#ae50076ab819eab792b11f8b67d4facc0">rand</a> ) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="classvehicle.html#af221fa947705a0ddfad607245c03dcdd">damage_direct</a>( here, vp_controls, vp_controls.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> / 4 );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span>( vp_controls.<a class="code" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> || vp_controls.<a class="code" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            player_character.<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You destroy the controls…&quot;</span> ) );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You damage the controls.&quot;</span> ) );</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span>( percent_alarm &gt; <a class="code" href="math__parser__func_8h.html#ae50076ab819eab792b11f8b67d4facc0">rand</a> ) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="classvehicle.html#af221fa947705a0ddfad607245c03dcdd">damage_direct</a>( here, vp_security, vp_security.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> / 5 );</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// chance to disable alarm immediately, or disable on destruction</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span>( percent_alarm / 4 &gt; <a class="code" href="math__parser__func_8h.html#ae50076ab819eab792b11f8b67d4facc0">rand</a> || vp_security.<a class="code" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The alarm keeps going.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The alarm stops.&quot;</span> ) );</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">  485</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">vehicle::autopilot_patrol_check</a>()</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code" href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a>();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span>( mgr.<a class="code" href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">has_near</a>( <a class="code" href="vehicle__use_8cpp.html#adcb832c9bde8f6dd957bf98e1e27066f">zone_type_VEHICLE_PATROL</a>, <a class="code" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>(), 60 ) ) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">enable_patrol</a>();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zones_manager();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">  495</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">vehicle::toggle_autopilot</a>()</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;{</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classveh__menu.html">veh_menu</a> menu( <span class="keyword">this</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose action for the autopilot&quot;</span> ) );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Patrol…&quot;</span> ) )</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;CONTROL_AUTOPILOT_PATROL&quot;</span> )</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Program the autopilot to patrol a nearby vehicle patrol zone.  If no zones are nearby, you will be prompted to create one.&quot;</span> ) )</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">autopilot_patrol_check</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    } );</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Follow…&quot;</span> ) )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    .hotkey( <span class="stringliteral">&quot;CONTROL_AUTOPILOT_FOLLOW&quot;</span> )</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Program the autopilot to follow you.  It might be a good idea to have a remote control available to tell it to stop, too.&quot;</span> ) )</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    .on_submit( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> )</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    } );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop…&quot;</span> ) )</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    .hotkey( <span class="stringliteral">&quot;CONTROL_AUTOPILOT_STOP&quot;</span> )</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop all autopilot related activities.&quot;</span> ) )</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    .on_submit( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <a class="code" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the engine off.&quot;</span> ) );</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a>();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    } );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="classvehicle.html#abbeca5eb3e4596f67b2b4ef6413a7bf6">precollision_on</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disable pre-collision system&quot;</span> ) :</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Enable pre-collision system&quot;</span> ) )</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    .hotkey( <span class="stringliteral">&quot;CONTROL_AUTOPILOT_CAS&quot;</span> )</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Toggle pre-collision system&quot;</span> ) )</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    .on_submit( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="classvehicle.html#abbeca5eb3e4596f67b2b4ef6413a7bf6">precollision_on</a> = !<a class="code" href="classvehicle.html#abbeca5eb3e4596f67b2b4ef6413a7bf6">precollision_on</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="classvehicle.html#abbeca5eb3e4596f67b2b4ef6413a7bf6">precollision_on</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn on pre-collision system.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn off pre-collision system.&quot;</span> ) );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    } );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    menu.<a class="code" href="classveh__menu.html#a03bca47bb0ae3f015bcd4ba5e0616baf">query</a>();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">  543</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">vehicle::toggle_tracking</a>()</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#aed7c783516f532d6c51339caa802374d">remove_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop keeping track of the vehicle position.&quot;</span> ) );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a4b068ec14497611ce63808e286fc27aa">add_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start keeping track of this vehicle&#39;s position.&quot;</span> ) );</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="classvehicle.html#ae58b6c97109417e1f6c7e85a92e5078b">  556</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ae58b6c97109417e1f6c7e85a92e5078b">vehicle::connect</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;source_pos, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;target_pos )</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> sel_vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( target_pos );</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> prev_vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( source_pos );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span>( !sel_vp ) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span>( &amp;sel_vp-&gt;vehicle() == &amp;prev_vp-&gt;vehicle() ) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        return ;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classitem.html">item</a> cord( <span class="stringliteral">&quot;power_cord&quot;</span> );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span>( !cord.<a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">link_to</a>( prev_vp, sel_vp, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Failed to connect the %s, it tried to make an invalid connection!&quot;</span>, cord.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classvehicle.html#a4db57f7c62bbaeb0c4a9aad9267f0294">  575</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classvehicle.html#a4db57f7c62bbaeb0c4a9aad9267f0294">vehicle::engine_cold_factor</a>( <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp )<span class="keyword"> const</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;E_COLD_START&quot;</span> ) ) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">double</span> eff_temp = <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().get_temperature( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) );</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a272061805f6f4af210b3506491478755">has_fault_flag</a>( <span class="stringliteral">&quot;BAD_COLD_START&quot;</span> ) ) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        eff_temp = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( eff_temp, 20.0 );</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> 1.0 - ( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 30.0, eff_temp ) ) / 30.0 );</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classvehicle.html#a2526f9ddb721f55af6cf2086e96698d6">  590</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classvehicle.html#a2526f9ddb721f55af6cf2086e96698d6">vehicle::engine_start_time</a>( <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp )<span class="keyword"> const</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> result = 0_seconds;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a3c2e2dbcb069f8ce5c3c420732b2243b">is_engine_on</a>( vp ) || vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;E_STARTS_INSTANTLY&quot;</span> ) || !<a class="code" href="classvehicle.html#a7b8d76280c691a38d166a2d27ecf1a9f">engine_fuel_left</a>( vp ) ) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    result += 1_seconds * vp.<a class="code" href="structvehicle__part.html#a8b6c8fd3924772afdd6acb0398ca059a">damage_percent</a>();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// non-linear range [100-1000]; f(0.0) = 100, f(0.6) = 250, f(0.8) = 500, f(0.9) = 1000</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// diesel engines with working glow plugs always start with f = 0.6 (or better)</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    result += 1_seconds / tanh( 1.0 - <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classvehicle.html#a4db57f7c62bbaeb0c4a9aad9267f0294">engine_cold_factor</a>( vp ), 0.9 ) );</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// divided by magic 16 = watts / 6000</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> watts_per_time = 6000;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> engine_watts = <a class="code" href="namespaceunits.html#a76c965afaad76c83c6caa338d1eb6777">units::to_watt</a>( <a class="code" href="classvehicle.html#a8b2f8d06e77ea427866b75587c863f1e">part_vpower_w</a>( vp, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    result += <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( engine_watts / watts_per_time );</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">// NOLINTNEXTLINE(readability-make-member-function-const)</span></div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="classvehicle.html#a6bdd8fbcddc6e06fcd16160fec5776ed">  611</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#a6bdd8fbcddc6e06fcd16160fec5776ed">vehicle::auto_select_fuel</a>( <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp )</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;vp_engine_info = vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">is_available</a>() || !vp.<a class="code" href="structvehicle__part.html#ad81c11110f4a172253a99fd970046224">is_engine</a>() ) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span>( vp_engine_info.<a class="code" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code" href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a> || <a class="code" href="classvehicle.html#a7b8d76280c691a38d166a2d27ecf1a9f">engine_fuel_left</a>( vp ) &gt; 0 ) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;fuel_id : vp_engine_info.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;fuel_opts ) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( fuel_id ) &gt; 0 ) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            vp.<a class="code" href="structvehicle__part.html#abd5713514b5ab3a5f8a7aea140a22406">fuel_set</a>( fuel_id );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// not a single fuel type left for this engine</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="classvehicle.html#aac4076aef5e2c53234a8da14fa7c0472">  629</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#aac4076aef5e2c53234a8da14fa7c0472">vehicle::start_engine</a>( <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp )</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;vpi = vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a3c2e2dbcb069f8ce5c3c420732b2243b">is_engine_on</a>( vp ) ) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> out_of_fuel = !<a class="code" href="classvehicle.html#a6bdd8fbcddc6e06fcd16160fec5776ed">auto_select_fuel</a>( vp );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span>( out_of_fuel ) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span>( vpi.<a class="code" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="comment">// Muscle engines cannot start with broken limbs</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span>( vpi.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;MUSCLE_ARMS&quot;</span> ) &amp;&amp; !player_character.<a class="code" href="classCharacter.html#a3abc3f2f3d7ad4ec9967ec6ccbcc1c97">has_two_arms_lifting</a>() ) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot use %s with a broken arm.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vpi.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;MUSCLE_LEGS&quot;</span> ) &amp;&amp; ( player_character.<a class="code" href="classCharacter.html#a263014a43f6feb8ef0666f1de36e2853">get_working_leg_count</a>() &lt; 2 ) ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot use %s without at least two legs.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Looks like the %1$s is out of %2$s.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(),</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                     <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( vpi.<a class="code" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> ) );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;NEED_LEG&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        player_character.<a class="code" href="classCharacter.html#a263014a43f6feb8ef0666f1de36e2853">get_working_leg_count</a>() &lt; 1 &amp;&amp;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        !<a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;IGNORE_LEG_REQUIREMENT&quot;</span> ) ) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need at least one leg to control the %s.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;INOPERABLE_SMALL&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        ( player_character.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a> ||</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          player_character.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a> ) &amp;&amp;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        !<a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;IGNORE_HEIGHT_REQUIREMENT&quot;</span> ) ) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too short to reach the pedals!&quot;</span> ) );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> dmg = vp.<a class="code" href="structvehicle__part.html#a8b6c8fd3924772afdd6acb0398ca059a">damage_percent</a>();</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> start_time = <a class="code" href="classvehicle.html#a2526f9ddb721f55af6cf2086e96698d6">engine_start_time</a>( vp );</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span>( ( 1 - dmg ) &lt; vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;backfire_threshold &amp;&amp;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;backfire_freq ) ) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="classvehicle.html#ab87891d82618518ddcbb7f084e567ee6">backfire</a>( vp );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, to_seconds&lt;int&gt;( start_time ) * 10, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s bang as it starts!&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                       <span class="stringliteral">&quot;engine_bangs_start&quot;</span> );</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">// Immobilizers need removing before the vehicle can be started</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a272061805f6f4af210b3506491478755">has_fault_flag</a>( <span class="stringliteral">&quot;IMMOBILIZER&quot;</span> ) ) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 5, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s making a long beep.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                       <span class="stringliteral">&quot;fault_immobiliser_beep&quot;</span> );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">// Engine with starter motors can fail on both battery and starter motor</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">faults_potential</a>().count( <a class="code" href="vehicle__use_8cpp.html#a8e2f350813b04bfbc356da976a2bc369">fault_engine_starter</a> ) ) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a272061805f6f4af210b3506491478755">has_fault_flag</a>( <span class="stringliteral">&quot;BAD_STARTER&quot;</span> ) ) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s clicking once.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                           <span class="stringliteral">&quot;engine_single_click_fail&quot;</span> );</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> cold_factor = <a class="code" href="classvehicle.html#a4db57f7c62bbaeb0c4a9aad9267f0294">engine_cold_factor</a>( vp );</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::power</a> start_power = -<a class="code" href="classvehicle.html#a8edd9a92bf0ae2e5306700a8a63aae7f">part_epower</a>( vp ) * ( dmg * 5 + cold_factor * 2 + 10 );</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> start_bat = <a class="code" href="classvehicle.html#a4585389250d4d47d2bf487dbb610701b">power_to_energy_bat</a>( start_power, start_time );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">discharge_battery</a>( start_bat ) != 0 ) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s rapidly clicking.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                           <span class="stringliteral">&quot;engine_multi_click_fail&quot;</span> );</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// Engines always fail to start with faulty fuel pumps</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a272061805f6f4af210b3506491478755">has_fault_flag</a>( <span class="stringliteral">&quot;BAD_FUEL_PUMP&quot;</span> ) ) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s quickly stuttering out.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                       <span class="stringliteral">&quot;engine_stutter_fail&quot;</span> );</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// Damaged non-electric engines have a chance of failing to start</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) &amp;&amp; vpi.<a class="code" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> != <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> &amp;&amp;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( dmg * 100, 120 ) ) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s clanking and grinding.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                       <span class="stringliteral">&quot;engine_clanking_fail&quot;</span> );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the %s starting.&quot;</span> ), vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ) );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    std::string variant = vpi.<a class="code" href="classvpart__info.html#aba80d384b977306eb749c9c9958a62a7">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, variant ) ) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="comment">// has special sound variant for this vpart id</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vpi.<a class="code" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        variant = <span class="stringliteral">&quot;muscle&quot;</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a> ) ) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        variant = <span class="stringliteral">&quot;wind&quot;</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) ) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        variant = <span class="stringliteral">&quot;electric&quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        variant = <span class="stringliteral">&quot;combustion&quot;</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, variant, vpi.<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor );</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">  746</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">vehicle::stop_engines</a>()</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle_noise</a> = 0;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a3c2e2dbcb069f8ce5c3c420732b2243b">is_engine_on</a>( vp ) ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp ), 2, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the engine go silent&quot;</span> ) );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        std::string variant = vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aba80d384b977306eb749c9c9958a62a7">id</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, variant ) ) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="comment">// has special sound variant for this vpart id</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) ) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            variant = <span class="stringliteral">&quot;electric&quot;</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) ) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            variant = <span class="stringliteral">&quot;muscle&quot;</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">is_engine_type</a>( vp, <a class="code" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a> ) ) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            variant = <span class="stringliteral">&quot;wind&quot;</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            variant = <span class="stringliteral">&quot;combustion&quot;</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, variant, vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">engine_info</a>-&gt;noise_factor );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="namespacesfx.html#a03291faa7dbf7c6a4c0aa23c160cd33f">sfx::do_vehicle_engine_sfx</a>();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classvehicle.html#aafa5868126f645069bdda36536e901a9">refresh</a>();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">  778</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">vehicle::start_engines</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> take_control, <span class="keyword">const</span> <span class="keywordtype">bool</span> autodrive )</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;{</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">bool</span> has_engine = std::any_of( <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.begin(), <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.end(), [&amp;]( <span class="keywordtype">int</span> idx ) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        return parts[ idx ].enabled &amp;&amp; !parts[ idx ].is_broken();</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    } );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// if no engines enabled then enable all before trying to start the vehicle</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span>( !has_engine ) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = !vp.<a class="code" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>();</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> start_time = 0_seconds;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// record the first usable engine as the referenced position checked at the end of the engine starting activity</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordtype">bool</span> has_starting_engine_position = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> starting_engine_position;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span>( !has_starting_engine_position &amp;&amp; !vp.<a class="code" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() &amp;&amp; vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> ) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            starting_engine_position = <a class="code" href="classvehicle.html#a17ca39b6ff2abc922ae68969c1e2134c">bub_part_pos</a>( vp );</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            has_starting_engine_position = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        has_engine = has_engine || <a class="code" href="classvehicle.html#a3c2e2dbcb069f8ce5c3c420732b2243b">is_engine_on</a>( vp );</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        start_time = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( start_time, <a class="code" href="classvehicle.html#a2526f9ddb721f55af6cf2086e96698d6">engine_start_time</a>( vp ) );</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span>( !has_starting_engine_position ) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        starting_engine_position = {};</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span>( !has_engine ) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t have an engine!&quot;</span> ), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="classvehicle.html#aafa5868126f645069bdda36536e901a9">refresh</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span>( take_control &amp;&amp; !player_character.<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> ) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        player_character.<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take control of the %s.&quot;</span> ), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span>( !autodrive ) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        player_character.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a>, to_moves&lt;int&gt;( start_time ) );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        player_character.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#add304db68223aefc55b89a9bdea47c34">relative_placement</a> =</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            starting_engine_position - player_character.<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        player_character.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#aca09f19b9a36866a33a46cf0c8ee484d">values</a>.push_back( take_control );</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="classvehicle.html#aafa5868126f645069bdda36536e901a9">refresh</a>();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">  830</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">vehicle::enable_patrol</a>()</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno"><a class="line" href="classvehicle.html#a681502e6f751410d0ade8fbdea497c63">  840</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a681502e6f751410d0ade8fbdea497c63">vehicle::honk_horn</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> no_power = !<a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordtype">bool</span> honked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;HORN&quot;</span> ) ) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">//Only bicycle horn doesn&#39;t need electricity to work</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;horn_type = vp.info();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span>( ( horn_type.<a class="code" href="classvpart__info.html#aba80d384b977306eb749c9c9958a62a7">id</a> != <a class="code" href="vehicle__use_8cpp.html#ab274b12c85d52a095004b28251a35c19">vpart_horn_bicycle</a> ) &amp;&amp; no_power ) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">if</span>( !honked ) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You honk the horn!&quot;</span> ) );</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            honked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="comment">//Get global position of horn</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> horn_pos = vp.pos();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="comment">//Determine sound</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span>( horn_type.<a class="code" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a> &gt;= 110 ) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="comment">//~ Loud horn sound</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;HOOOOORNK!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                           <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;horn_loud&quot;</span> );</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( horn_type.<a class="code" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a> &gt;= 80 ) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment">//~ Moderate horn sound</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BEEEP!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                           <span class="stringliteral">&quot;horn_medium&quot;</span> );</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="comment">//~ Weak horn sound</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;honk.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                           <span class="stringliteral">&quot;horn_low&quot;</span> );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span>( !honked ) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You honk the horn, but nothing happens.&quot;</span> ) );</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;}</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">  878</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">vehicle::reload_seeds</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;{</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    std::vector&lt;item *&gt; seed_inv = player_character.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <span class="stringliteral">&quot;is_seed&quot;</span>, &amp;<a class="code" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a> );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keyword">auto</span> seed_entries = <a class="code" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a>( seed_inv );</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    seed_entries.emplace( seed_entries.begin(), <a class="code" href="vehicle__use_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No seed&quot;</span> ), 0 );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordtype">int</span> seed_index = <a class="code" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a>( seed_entries );</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span>( seed_index &gt; 0 &amp;&amp; seed_index &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( seed_entries.size() ) ) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> count = std::get&lt;2&gt;( seed_entries[seed_index] );</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordtype">int</span> amount = 0;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keyword">const</span> std::string popupmsg = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Move how many?  [Have %d] (0 to cancel)&quot;</span> ), count );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        amount = <a class="code" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                 .<a class="code" href="classstring__input__popup.html#aa96aa0184abb3c9740c2a48f098eeb8b">title</a>( popupmsg )</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                 .<a class="code" href="classstring__input__popup.html#ab3273f9bfdeac38fff067187b1d3715c">width</a>( 5 )</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                 .<a class="code" href="classstring__input__popup.html#af38cf4937c0dea802498161d1642fb08">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                 .<a class="code" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">if</span>( amount &gt; 0 ) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordtype">int</span> actual_amount = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( amount, count );</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> seed_id = std::get&lt;0&gt;( seed_entries[seed_index] );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            std::list&lt;item&gt; used_seed;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( seed_id ) ) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                used_seed = player_character.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( seed_id, actual_amount );</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                used_seed = player_character.<a class="code" href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">use_amount</a>( seed_id, actual_amount );</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            used_seed.front().set_age( 0_turns );</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="comment">//place seeds into the planter</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <a class="code" href="activity__handlers_8h.html#a678a9b1ab0a1e58f70b4d6456aa54586">put_into_vehicle_or_drop</a>( player_character, <a class="code" href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a>, used_seed,</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                      <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) );</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="classvehicle.html#a2e0ee458717c0089922ff3604f1a8ca2">  917</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a2e0ee458717c0089922ff3604f1a8ca2">vehicle::beeper_sound</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// No power = no sound</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) == 0 ) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> odd_turn = <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 2_turns );</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;BEEPER&quot;</span> ) ) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">if</span>( ( odd_turn &amp;&amp; vp.has_feature( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7">VPFLAG_EVENTURN</a> ) ) ||</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            ( !odd_turn &amp;&amp; vp.has_feature( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813">VPFLAG_ODDTURN</a> ) ) ) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="comment">//~ Beeper sound</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( vp.pos(), vp.info().bonus, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;beep!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                       <span class="stringliteral">&quot;rear_beeper&quot;</span> );</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="classvehicle.html#a4da300ded16cef32658e27074436163f">  937</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a4da300ded16cef32658e27074436163f">vehicle::play_music</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;STEREO&quot;</span> ) ) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="namespaceiuse.html#a1cb12a40a0a229ae9901588301ba37c5">iuse::play_music</a>( &amp;player_character, vp.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 15, 30 );</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="classvehicle.html#a3781d93b55f0b4a8a9c74305bb91003e">  945</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a3781d93b55f0b4a8a9c74305bb91003e">vehicle::play_chimes</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;CHIMES&quot;</span> ) ) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( vp.pos(), 40, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;a simple melody blaring from the loudspeakers.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;chimes&quot;</span> );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">  957</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">vehicle::crash_terrain_around</a>()</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;{</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a2db34d06c73c9adf5c39174ed615beed">total_power</a>() &lt;= 0_W ) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;CRASH_TERRAIN_AROUND&quot;</span> ) ) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> crush_target( 0, 0, -<a class="code" href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a> );</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> start_pos = vp.pos();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvpslot__terrain__transform.html">vpslot_terrain_transform</a> &amp;ttd = *vp.info().transform_terrain_info;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>.size() &amp;&amp;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;             crush_target.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == -<a class="code" href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a>; i++ ) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> cur_pos = start_pos + <a class="code" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[i];</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordtype">bool</span> busy_pos = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp_tmp : <a class="code" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                busy_pos |= vp_tmp.pos() == cur_pos;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : ttd.<a class="code" href="structvpslot__terrain__transform.html#a7f7a690a6f229e20fc514480d6582c12">pre_flags</a> ) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( flag, cur_pos ) &amp;&amp; !busy_pos ) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    crush_target = cur_pos;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="comment">//target chosen</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">if</span>( crush_target.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != -<a class="code" href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a> ) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            here.<a class="code" href="classmap.html#a07dbd4505e0464a1f58bc732febfd6f4">destroy</a>( crush_target );</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( crush_target, 500, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Clanggggg!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                           <span class="stringliteral">&quot;smash_success&quot;</span>, <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;}</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno"><a class="line" href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">  992</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">vehicle::transform_terrain</a>()</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;{</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;TRANSFORM_TERRAIN&quot;</span> ) ) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> start_pos = vp.pos();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvpslot__terrain__transform.html">vpslot_terrain_transform</a> &amp;ttd = *vp.info().transform_terrain_info;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordtype">bool</span> prereq_fulfilled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : ttd.<a class="code" href="structvpslot__terrain__transform.html#a7f7a690a6f229e20fc514480d6582c12">pre_flags</a> ) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( flag, start_pos ) ) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                prereq_fulfilled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">if</span>( prereq_fulfilled ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> new_ter = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b">ter_id</a>( ttd.<a class="code" href="structvpslot__terrain__transform.html#aac59bcd0083eefa7511bd3affac515d5">post_terrain</a> );</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">if</span>( new_ter != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">ter_str_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( start_pos, new_ter );</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">furn_id</a> new_furn = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aedc784ee4f8f5738f6c32507c3874cdf">furn_id</a>( ttd.<a class="code" href="structvpslot__terrain__transform.html#a789238dbb0f86edb22b71ec7cec19ffb">post_furniture</a> );</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">if</span>( new_furn != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( start_pos, new_furn );</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">field_type_id</a> <a class="code" href="structnew__field.html">new_field</a> = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561">field_type_id</a>( ttd.<a class="code" href="structvpslot__terrain__transform.html#afd5e8c3ab5daeb4d82694308d105d522">post_field</a> );</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structnew__field.html">new_field</a>.id() ) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( start_pos, <a class="code" href="structnew__field.html">new_field</a>, ttd.<a class="code" href="structvpslot__terrain__transform.html#ac68a7d773155aa1409d940e3ff5e1c6c">post_field_intensity</a>, ttd.<a class="code" href="structvpslot__terrain__transform.html#ab5e4d4e14faf93e65d46fd8348740f9a">post_field_age</a> );</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983face4ef3ec98443ed10da505114b58f153">speed</a> = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordtype">int</span> v_damage = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3, <a class="code" href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983face4ef3ec98443ed10da505114b58f153">speed</a> );</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="classvehicle.html#afedb4619774754d0b805138c81be5f49">damage</a>( here, vp.part_index(), v_damage, <a class="code" href="vehicle__use_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( start_pos, v_damage, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Clanggggg!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                           <span class="stringliteral">&quot;smash_success&quot;</span>, <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3"> 1028</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3">vehicle::operate_reaper</a>()</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;{</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;REAPER&quot;</span> ) ) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> reaper_pos = vp.pos();</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> plant_produced = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, vp.info().bonus );</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> seed_produced = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 3 );</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> max_pickup_volume = vp.info().size / 20;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( reaper_pos ) != <a class="code" href="vehicle__use_8cpp.html#ac4c2af725902e13cce0e1974ac38dc35">furn_f_plant_harvest</a> ) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( reaper_pos );</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> = std::find_if( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            return it.is_seed();</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        } );</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> == items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() || <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;typeId() == <a class="code" href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a> ||</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;typeId() == <a class="code" href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a> ) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="comment">// Otherworldly plants, the earth-made reaper can not handle those.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( reaper_pos, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="comment">// Secure the seed type before i_clear destroys the item.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp;seed_type = *<a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;type;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( reaper_pos );</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;i : <a class="code" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a>(</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                 seed_type, plant_produced, seed_produced, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( reaper_pos, i );</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( reaper_pos, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 10, 25 ), <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Swish&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                       <span class="stringliteral">&quot;reaper&quot;</span> );</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keywordflow">if</span>( vp.info().has_flag( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a> ) ) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> iter = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); iter != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="keywordflow">if</span>( ( iter-&gt;volume() &lt;= max_pickup_volume ) &amp;&amp;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    <a class="code" href="classvehicle.html#a4aed7fe17e4b040bda8b6abb431d3673">add_item</a>( vp.part(), *iter ) ) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    iter = items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( iter );</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                    ++iter;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"><a class="line" href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b"> 1072</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b">vehicle::operate_planter</a>()</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;{</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;PLANTER&quot;</span> ) ) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> planter_id = vp.part_index();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> loc = vp.pos();</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <a class="code" href="classvehicle__stack.html">vehicle_stack</a> v = <a class="code" href="classvehicle.html#abbc4051229bf116dfd03c53dcc4a0765">get_items</a>( vp.part() );</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> i = v.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); i != v.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); i++ ) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <span class="keywordflow">if</span>( i-&gt;is_seed() ) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                <span class="comment">// If it is an &quot;advanced model&quot; then it will avoid damaging itself or becoming damaged. It&#39;s a real feature.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( loc ) != <a class="code" href="vehicle__use_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a> &amp;&amp; vp.has_feature( <span class="stringliteral">&quot;ADVANCED_PLANTER&quot;</span> ) ) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                    <span class="comment">//then don&#39;t put the item there.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( loc ) == <a class="code" href="vehicle__use_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a> ) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                    here.<a class="code" href="classmap.html#a029b364a2b257f06a689f27412d21576">set</a>( loc, <a class="code" href="vehicle__use_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a>, <a class="code" href="vehicle__use_8cpp.html#ac25a0a4122882b4e13daa1ff9a930921">furn_f_plant_seed</a> );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f">ter_furn_flag::TFLAG_PLOWABLE</a>, loc ) ) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    <span class="comment">//If it isn&#39;t plowable terrain, then it will most likely be damaged.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    <a class="code" href="classvehicle.html#afedb4619774754d0b805138c81be5f49">damage</a>( here, planter_id, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 10 ), <a class="code" href="vehicle__use_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( loc, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 10, 20 ), <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Clink&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;smash_success&quot;</span>,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                                   <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">if</span>( !i-&gt;count_by_charges() || i-&gt;charges == 1 ) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    i-&gt;set_age( 0_turns );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( loc, *i );</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                    v.<a class="code" href="classvehicle__stack.html#ac3090521c59c43ec57666ddb4e0e2484">erase</a>( i );</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                    <a class="code" href="classitem.html">item</a> tmp = *i;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                    tmp.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                    tmp.<a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( loc, tmp );</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    i-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>--;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24"> 1110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24">vehicle::operate_scoop</a>()</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;SCOOP&quot;</span> ) ) {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> scoop = vp.part_index();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> chance_to_damage_item = 9;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> max_pickup_volume = vp.info().size / 10;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keyword">const</span> std::array&lt;std::string, 4&gt; sound_msgs = {{</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Whirrrr&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ker-chunk&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Swish&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cugugugugug&quot;</span> )</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        };</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( scoop ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 20, 35 ), <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                       <a class="code" href="rng_8h.html#a4fdc7c520170d091a7d541ede1c93d48">random_entry_ref</a>( sound_msgs ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;scoop&quot;</span> );</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        std::vector&lt;tripoint&gt; parts_points;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;current :</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;             here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( scoop ), 1 ) ) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            parts_points.push_back( current );</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;position : parts_points ) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            here.<a class="code" href="classmap.html#ac0f2abd4806cc1d145bbb29493c9f2cd">mop_spills</a>( <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( position ) );</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aa904e9f61ca568d8ed985cf22193b8ed">has_items</a>( position ) ) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <a class="code" href="classitem.html">item</a> *that_item_there = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( position );</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a">ter_furn_flag::TFLAG_SEALED</a>, position ) ) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <span class="comment">// Ignore it. Street sweepers are not known for their ability to harvest crops.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                <span class="keywordflow">if</span>( it.volume() &lt; max_pickup_volume ) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                    that_item_there = &amp;it;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">if</span>( !that_item_there ) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( chance_to_damage_item ) &amp;&amp; that_item_there-&gt;<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt; that_item_there-&gt;<a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() ) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                <span class="comment">//The scoop will not destroy the item, but it may damage it a bit.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                that_item_there-&gt;<a class="code" href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">inc_damage</a>();</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                <span class="comment">//The scoop gets a lot louder when breaking an item.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( position, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 10,</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                              that_item_there-&gt;<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> * 2 + 10 ),</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                               <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BEEEThump&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;scoop_thump&quot;</span> );</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="comment">//This attempts to add the item to the scoop inventory and if successful, removes it from the map.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a4aed7fe17e4b040bda8b6abb431d3673">add_item</a>( vp.part(), *that_item_there ) ) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( position, that_item_there );</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc"> 1167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc">vehicle::alarm</a>()</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="comment">//first check if the alarm is still installed</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordtype">bool</span> found_alarm = <a class="code" href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">has_security_working</a>();</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="comment">//if alarm found, make noise, else set alarm disabled</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keywordflow">if</span>( found_alarm ) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            <span class="keyword">const</span> std::array&lt;std::string, 4&gt; sound_msgs = {{</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;WHOOP WHOOP&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;NEEeu NEEeu NEEeu&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BLEEEEEEP&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;WREEP&quot;</span> )</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            };</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>(), <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 45, 80 ) ),</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                           <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,  <a class="code" href="rng_8h.html#a4fdc7c520170d091a7d541ede1c93d48">random_entry_ref</a>( sound_msgs ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;car_alarm&quot;</span> );</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1000 ) ) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"> * Opens an openable part at the specified index. If it&#39;s a multipart, opens</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment"> * all attached parts as well.</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to open.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067"> 1195</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">vehicle::open</a>( <span class="keywordtype">int</span> part_index )</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;{</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( part_index );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) ) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to open non-openable part %d (%s) on a %s!&quot;</span>, part_index, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <a class="code" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( part_index, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"> * Closes an openable part at the specified index. If it&#39;s a multipart, closes</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"> * all attached parts as well.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to close.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="classvehicle.html#ac522e55cee675f48861c5f931f8695df"> 1210</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ac522e55cee675f48861c5f931f8695df">vehicle::close</a>( <span class="keywordtype">int</span> part_index )</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( part_index );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) ) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to close non-closeable part %d (%s) on a %s!&quot;</span>, part_index, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( part_index, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"> * Unlocks a lockable, closed part at the specified index. If it&#39;s a multipart, unlocks</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment"> * all attached parts as well. Does not affect vehicle is_locked flag.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to unlock.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="classvehicle.html#ac5fc3a0639ca7bc5c2eeb0c574e6ca01"> 1225</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ad92cd61244eadd6f9c62469a1632fcea">vehicle::unlock</a>( <span class="keywordtype">int</span> part_index )</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;{</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( part_index );</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span> ) ) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to unlock non-lockable part %d (%s) on a %s!&quot;</span>, part_index, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">lock_or_unlock</a>( part_index, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment"> * Locks a lockable, closed part at the specified index. If it&#39;s a multipart, locks</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment"> * all attached parts as well. Does not affect vehicle is_locked flag.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to lock.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="classvehicle.html#a5337fabbf67a2981c161b341b896999d"> 1240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a5337fabbf67a2981c161b341b896999d">vehicle::lock</a>( <span class="keywordtype">int</span> part_index )</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( part_index );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span>( !vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span> ) ) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to lock non-lockable part %d (%s) on a %s!&quot;</span>, part_index, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a> ) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to lock open part %d (%s) on a %s!&quot;</span>, part_index, vp.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <a class="code" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">lock_or_unlock</a>( part_index, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426"> 1252</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426">vehicle::can_close</a>( <span class="keywordtype">int</span> part_index, <a class="code" href="classCharacter.html">Character</a> &amp;who )</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;{</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    part_index = <a class="code" href="classvehicle.html#a4836138cb7d26641981bf4478f889012">get_non_fake_part</a>( part_index );</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    std::vector&lt;std::vector&lt;int&gt;&gt; openable_parts = <a class="code" href="classvehicle.html#aec747d255af237871b53f5869d43ed6f">find_lines_of_parts</a>( part_index, <span class="stringliteral">&quot;OPENABLE&quot;</span> );</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span>( openable_parts.empty() ) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        std::vector&lt;int&gt; base_element;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        base_element.push_back( part_index );</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        openable_parts.emplace_back( base_element );</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;int&gt; &amp;vec : openable_parts ) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> partID : vec ) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="comment">// Check the part for collisions, then if there&#39;s a fake part present check that too.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">while</span>( partID &gt;= 0 ) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> *<span class="keyword">const</span> mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( <a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID] ) );</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="keywordflow">if</span>( mon ) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    <span class="keywordflow">if</span>( mon-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                        who.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s some buffoon in the way!&quot;</span> ) );</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mon-&gt;<a class="code" href="classCreature.html#a07012d6d1998068bef112510c7424374">is_monster</a>() ) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                        <span class="comment">// TODO: Houseflies, mosquitoes, etc shouldn&#39;t count</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                        who.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is in the way!&quot;</span> ), mon-&gt;<a class="code" href="classCreature.html#a5881c150a3ed435f757e0b34b0d1009e">get_name</a>() );</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        who.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s is in the way!&quot;</span> ), mon-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID].has_fake &amp;&amp; <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID].fake_part_at].is_active_fake ) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    partID = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID].fake_part_at;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                    partID = -1;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0"> 1289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">vehicle::open_all_at</a>( <span class="keywordtype">int</span> p )</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> elem : <a class="code" href="classvehicle.html#ae9844787dd02657b4282b93f237c4987">parts_at_relative</a>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem];</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) ) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            <span class="comment">// Note that this will open multi-square and non-multipart parts in the tile. This</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="comment">// means that adjacent open multi-square openables can still have closed stuff</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            <span class="comment">// on same tile after this function returns</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <a class="code" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>( elem );</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment"> * Opens or closes an openable part at the specified index based on the @opening value passed.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"> * If it&#39;s a multipart, opens or closes all attached parts as well.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to open or close.</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="classvehicle.html#a190ccc33782a28e26089122eec15f767"> 1307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">vehicle::open_or_close</a>( <span class="keyword">const</span> <span class="keywordtype">int</span> part_index, <span class="keyword">const</span> <span class="keywordtype">bool</span> opening )</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;{</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> part_open_or_close = [&amp;]( <span class="keyword">const</span> <span class="keywordtype">int</span> parti, <span class="keyword">const</span> <span class="keywordtype">bool</span> opening ) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;prt = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( parti );</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="comment">// Open doors should never be locked.</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span>( opening &amp;&amp; prt.<a class="code" href="structvehicle__part.html#a2340e7c1ece626b907ffcc036774b2ca">locked</a> ) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <a class="code" href="classvehicle.html#ad92cd61244eadd6f9c62469a1632fcea">unlock</a>( parti );</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        prt.<a class="code" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a> = opening;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">if</span>( prt.<a class="code" href="structvehicle__part.html#a72c9606de83a919a30468273ec6fdb0b">is_fake</a> ) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( prt.<a class="code" href="structvehicle__part.html#a02e888cd272e98d30098629ad8846f45">fake_part_to</a> ).open = opening;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( prt.<a class="code" href="structvehicle__part.html#ace4e784a62a3d33ee3636917b907bf61">has_fake</a> ) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( prt.<a class="code" href="structvehicle__part.html#ac1400abb20165723a376e5778bc12c24">fake_part_at</a> ).open = opening;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    };</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="comment">//find_lines_of_parts() doesn&#39;t return the part_index we passed, so we set it on its own</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    part_open_or_close( part_index, opening );</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    here.<a class="code" href="classmap.html#a017fb2b4060eff01e4b8397952048ad6">set_transparency_cache_dirty</a>( <a class="code" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> part_location = <a class="code" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_index].mount );</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    here.<a class="code" href="classmap.html#a4fb2eb743dcaef576cea6790d17aa32e">set_seen_cache_dirty</a>( part_location );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>(), part_location );</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span>( dist &lt; 20 ) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <a class="code" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( opening ? <span class="stringliteral">&quot;vehicle_open&quot;</span> : <span class="stringliteral">&quot;vehicle_close&quot;</span>,</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                                 <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_index ].info().<span class="keywordtype">id</span>.str(), 100 - dist * 3 );</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;int&gt; &amp;vec : <a class="code" href="classvehicle.html#aec747d255af237871b53f5869d43ed6f">find_lines_of_parts</a>( part_index, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;partID : vec ) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            part_open_or_close( partID, opening );</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <a class="code" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <a class="code" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;}</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment"> * Locks or unlocks a lockable door part at the specified index based on the @locking value passed.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment"> * Part must have the OPENABLE and LOCKABLE_DOOR flags, and be closed.</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment"> * If it&#39;s a multipart, locks or unlocks all attached parts as well.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment"> * @param part_index The index in the parts list of the part to lock or unlock.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"><a class="line" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1"> 1350</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">vehicle::lock_or_unlock</a>( <span class="keyword">const</span> <span class="keywordtype">int</span> part_index, <span class="keyword">const</span> <span class="keywordtype">bool</span> locking )</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;{</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> part_lock_or_unlock = [&amp;]( <span class="keyword">const</span> <span class="keywordtype">int</span> parti, <span class="keyword">const</span> <span class="keywordtype">bool</span> locking ) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;prt = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( parti );</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        prt.<a class="code" href="structvehicle__part.html#a2340e7c1ece626b907ffcc036774b2ca">locked</a> = locking;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="keywordflow">if</span>( prt.<a class="code" href="structvehicle__part.html#a72c9606de83a919a30468273ec6fdb0b">is_fake</a> ) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( prt.<a class="code" href="structvehicle__part.html#a02e888cd272e98d30098629ad8846f45">fake_part_to</a> ).locked = locking;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( prt.<a class="code" href="structvehicle__part.html#ace4e784a62a3d33ee3636917b907bf61">has_fake</a> ) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.at( prt.<a class="code" href="structvehicle__part.html#ac1400abb20165723a376e5778bc12c24">fake_part_at</a> ).locked = locking;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    };</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">//find_lines_of_parts() doesn&#39;t return the part_index we passed, so we set it on its own</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    part_lock_or_unlock( part_index, locking );</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;int&gt; &amp;vec : <a class="code" href="classvehicle.html#aec747d255af237871b53f5869d43ed6f">find_lines_of_parts</a>( part_index, <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span> ) ) {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;partID : vec ) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            part_lock_or_unlock( partID, locking );</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"><a class="line" href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce"> 1370</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce">vehicle::use_autoclave</a>( <span class="keywordtype">int</span> p )</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;{</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="classvehicle__stack.html">vehicle_stack</a> items = <a class="code" href="classvehicle.html#abbc4051229bf116dfd03c53dcc4a0765">get_items</a>( vp );</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordtype">bool</span> filthy_items = std::any_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        return i.has_flag( json_flag_FILTHY );</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    } );</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordtype">bool</span> unpacked_items = std::any_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        return i.has_flag( STATIC( flag_id( <span class="stringliteral">&quot;NO_PACKED&quot;</span> ) ) );</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    } );</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordtype">bool</span> cbms = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        return i.is_bionic();</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    } );</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> ) {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the autoclave off before it&#39;s finished the program, and open its door.&quot;</span> ) );</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The autoclave is empty; there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 8 &amp;&amp; <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 8 ) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need 8 charges of water in the tanks of the %s for the autoclave to run.&quot;</span> ),</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                 <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( filthy_items ) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to remove all filthy items from the autoclave to start the sterilizing cycle.&quot;</span> ) );</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !cbms ) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Only CBMs can be sterilized in an autoclave.&quot;</span> ) );</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( unpacked_items ) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You should put your CBMs in autoclave pouches to keep them sterile.&quot;</span> ) );</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;n : items ) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            n.set_age( 0_turns );</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 8 ) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 8 );</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 8 );</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the autoclave on and it starts its cycle.&quot;</span> ) );</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405"> 1418</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405">vehicle::use_washing_machine</a>( <span class="keywordtype">int</span> p )</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;{</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="comment">// Get all the items that can be used as detergent</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;inv = player_character.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    std::vector&lt;const item *&gt; detergents = inv.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( [inv]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">flag_id</a>( <span class="stringliteral">&quot;DETERGENT&quot;</span> ) ) ) &amp;&amp; inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), 5 );</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    } );</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="classvehicle__stack.html">vehicle_stack</a> items = <a class="code" href="classvehicle.html#abbc4051229bf116dfd03c53dcc4a0765">get_items</a>( vp );</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordtype">bool</span> filthy_items = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        return i.has_flag( json_flag_FILTHY );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    } );</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">bool</span> cbms = std::any_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        return i.is_bionic();</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    } );</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> ) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the washing machine off before it&#39;s finished its cycle, and open its lid.&quot;</span> ) );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The washing machine is empty; there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 24 &amp;&amp; <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 24 ) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need 24 charges of water in the tanks of the %s to fill the washing machine.&quot;</span> ), <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( detergents.empty() ) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need 5 charges of a detergent for the washing machine.&quot;</span> ) );</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !filthy_items ) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to remove all non-filthy items from the washing machine to start the washing program.&quot;</span> ) );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cbms ) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;CBMs can&#39;t be cleaned in a washing machine.  You need to remove them.&quot;</span> ) );</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <a class="code" href="classuilist.html">uilist</a> detergent_selector;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        detergent_selector.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use what detergent?&quot;</span> );</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        std::vector&lt;itype_id&gt; det_types;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : detergents ) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> det_type = it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="comment">// If the vector does not contain the detergent type, add it</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            <span class="keywordflow">if</span>( std::find( det_types.begin(), det_types.end(), det_type ) == det_types.end() ) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                det_types.emplace_back( det_type );</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordtype">int</span> chosen_detergent = 0;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="comment">// If there&#39;s a choice to be made on what detergent to use, ask the player</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">if</span>( det_types.size() &gt; 1 ) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; det_types.size(); ++i ) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                detergent_selector.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( i, <span class="keyword">true</span>, 0, <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( det_types[i] ) );</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            detergent_selector.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a>, <span class="keyword">true</span>, 0, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cancel&quot;</span> ) );</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            detergent_selector.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            chosen_detergent = detergent_selector.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">// If the player exits the menu, don&#39;t do anything else</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">if</span>( chosen_detergent == <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;n : items ) {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            n.set_age( 0_turns );</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 24 ) {</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 24 );</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 24 );</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        std::vector&lt;item_comp&gt; detergent;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        detergent.emplace_back( det_types[chosen_detergent], 5 );</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        player_character.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( detergent, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pour some detergent into the washing machine, close its lid, and turn it on.  The washing machine is being filled from the water tanks.&quot;</span> ) );</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    }</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;}</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed"> 1502</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed">vehicle::use_dishwasher</a>( <span class="keywordtype">int</span> p )</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;{</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordtype">bool</span> detergent_is_enough = player_character.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, 5 );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="classvehicle__stack.html">vehicle_stack</a> items = <a class="code" href="classvehicle.html#abbc4051229bf116dfd03c53dcc4a0765">get_items</a>( vp );</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordtype">bool</span> filthy_items = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        return i.has_flag( json_flag_FILTHY );</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    } );</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    std::string buffer;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    buffer += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Soft items can&#39;t be cleaned in a dishwasher; you should use a washing machine for that.  You need to remove them:&quot;</span> );</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordtype">bool</span> soft_items = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <span class="keywordflow">if</span>( it.is_soft() ) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            soft_items = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            buffer += <span class="stringliteral">&quot; &quot;</span> + it.tname();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160; </div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> ) {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the dishwasher off before it&#39;s finished its cycle, and open its lid.&quot;</span> ) );</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The dishwasher is empty, there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 24 &amp;&amp; <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 24 ) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need 24 charges of water in the tanks of the %s to fill the dishwasher.&quot;</span> ),</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                 <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !detergent_is_enough ) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need 5 charges of a detergent for the dishwasher.&quot;</span> ) );</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !filthy_items ) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to remove all non-filthy items from the dishwasher to start the washing program.&quot;</span> ) );</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( soft_items ) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, buffer );</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        vp.<a class="code" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;n : items ) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            n.set_age( 0_turns );</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 24 ) {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 24 );</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 24 );</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        std::vector&lt;item_comp&gt; detergent;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        detergent.emplace_back( <a class="code" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, 5 );</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        player_character.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( detergent, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pour some detergent into the dishwasher, close its lid, and turn it on.  The dishwasher is being filled from the water tanks.&quot;</span> ) );</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"><a class="line" href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4"> 1559</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4">vehicle::use_monster_capture</a>( <span class="keywordtype">int</span> part, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;{</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].is_broken() || <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="classitem.html">item</a> base = <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].get_base() );</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    base.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a76600c0d6a88c8d983838f0df2276212">invoke</a>( &amp;<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), base, <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">if</span>( base.<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span> ) ) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].set_flag( <a class="code" href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3cea4ba69bd9d8e78a234def8fb1c9a3544e">vp_flag::animal_flag</a> );</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].remove_flag( <a class="code" href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3cea4ba69bd9d8e78a234def8fb1c9a3544e">vp_flag::animal_flag</a> );</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].set_base( std::move( base ) );</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"><a class="line" href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4"> 1575</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4">vehicle::use_harness</a>( <span class="keywordtype">int</span> part, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;{</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>];</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;vpi = vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span>( vp.<a class="code" href="structvehicle__part.html#a98ee54e00ccccb0f28b736cc67cbd193">is_unavailable</a>() || vp.<a class="code" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> ) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;use_harness called on invalid part&quot;</span> );</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The harness is blocked.&quot;</span> ) );</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;creatures]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <a class="code" href="classmonster.html">monster</a> *mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( pnt );</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">if</span>( mon_ptr == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;f = *mon_ptr;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">return</span> f.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 &amp;&amp; ( f.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#ada7c9e7242ae6cab937fdeec0513f6d8">mon_flag_PET_MOUNTABLE</a> ) ||</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                                    f.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a7a0a5fdb5cfeee7154a7ad7b3317252d">mon_flag_PET_HARNESSABLE</a> ) );</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    };</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Where is the creature to harness?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no creature to harness nearby.&quot;</span> ), f,</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            <span class="keyword">false</span> );</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    }</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;target = *pnt_;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <a class="code" href="classmonster.html">monster</a> *mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( target );</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">if</span>( mon_ptr == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No creature there.&quot;</span> ) );</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <a class="code" href="classmonster.html">monster</a> &amp;m = *mon_ptr;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    std::string Harness_Bodytype = <span class="stringliteral">&quot;HARNESS_&quot;</span> + m.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">bodytype</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 ) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This creature is not friendly!&quot;</span> ) );</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !m.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#ada7c9e7242ae6cab937fdeec0513f6d8">mon_flag_PET_MOUNTABLE</a> ) &amp;&amp; !m.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a7a0a5fdb5cfeee7154a7ad7b3317252d">mon_flag_PET_HARNESSABLE</a> ) ) {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This creature cannot be harnessed.&quot;</span> ) );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !vpi.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( Harness_Bodytype ) &amp;&amp; !vpi.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;HARNESS_any&quot;</span> ) ) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The harness is not adapted for this creature morphology.&quot;</span> ) );</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    m.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    m.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( <a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">//~ %1$s: monster name, %2$s: vehicle name</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You harness your %1$s to %2$s.&quot;</span> ), m.<a class="code" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>(), <a class="code" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a> ) ) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You untie your %s.&quot;</span> ), m.<a class="code" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>() );</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        m.<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a> );</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="keywordflow">if</span>( m.<a class="code" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a> ) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">i_add</a>( *m.<a class="code" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a> );</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            m.<a class="code" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a>.reset();</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    }</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"><a class="line" href="classvehicle.html#a252d9bdf38ff0a522b813b692fdaa086"> 1639</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a252d9bdf38ff0a522b813b692fdaa086">vehicle::build_bike_rack_menu</a>( <a class="code" href="classveh__menu.html">veh_menu</a> &amp;menu, <span class="keywordtype">int</span> part )</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;{</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="comment">// prevent racking two vehicles with same name on single vehicle</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">// @returns true if vehicle already has a vehicle with this name racked</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> has_veh_name_racked = [<span class="keyword">this</span>]( <span class="keyword">const</span> std::string &amp; <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vpr : <a class="code" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;BIKE_RACK_VEH&quot;</span> ) ) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvehicle_1_1unrackable__vehicle.html">unrackable_vehicle</a> &amp;unrackable : <a class="code" href="classvehicle.html#abc3e3599949424184053bb279f706183">find_vehicles_to_unrack</a>( vpr.part_index() ) ) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                <span class="keywordflow">if</span>( unrackable.name == <a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        }</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    };</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    menu.<a class="code" href="classveh__menu.html#a8ac984585867c962321a1e510f5d3ead">desc_lines_hint</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, menu.<a class="code" href="classveh__menu.html#a8ac984585867c962321a1e510f5d3ead">desc_lines_hint</a> );</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordtype">bool</span> has_rack_actions = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvehicle_1_1rackable__vehicle.html">rackable_vehicle</a> &amp;rackable : <a class="code" href="classvehicle.html#a44bbf668cecc3943d0c682969e094ea5">find_vehicles_to_rack</a>( <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> has_this_name_racked = has_veh_name_racked( rackable.name );</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attach the %s to the rack&quot;</span> ), rackable.name ) )</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( has_this_name_racked</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;               ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This vehicle already has &#39;%s&#39; racked.  &quot;</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                                   <span class="stringliteral">&quot;Please rename before racking.&quot;</span> ), rackable.name )</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;               : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        .<a class="code" href="structveh__menu__item.html#a00631f25b9799a462b4d6b403e4f6c62">enable</a>( !has_this_name_racked )</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        .<a class="code" href="structveh__menu__item.html#a74eaa5207895c5014aa730385870f9be">hotkey_auto</a>()</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, rackable] {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            <a class="code" href="classbikerack__racking__activity__actor.html">bikerack_racking_activity_actor</a> rack( *<span class="keyword">this</span>, *rackable.veh, rackable.racks );</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( rack );</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        } );</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        has_rack_actions = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structvehicle_1_1unrackable__vehicle.html">unrackable_vehicle</a> &amp;unrackable : <a class="code" href="classvehicle.html#abc3e3599949424184053bb279f706183">find_vehicles_to_unrack</a>( <a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove the %s from the rack&quot;</span> ), unrackable.name ) )</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        .hotkey_auto()</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, unrackable] {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <a class="code" href="classbikerack__unracking__activity__actor.html">bikerack_unracking_activity_actor</a> unrack( *<span class="keyword">this</span>, unrackable.parts, unrackable.racks );</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( unrack );</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        } );</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        has_rack_actions = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span>( !has_rack_actions ) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bike rack is empty&quot;</span> ) )</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        .desc( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nothing to take off or put on the rack is nearby.&quot;</span> ) )</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        .enable( <span class="keyword">false</span> )</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    }</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;}</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"><a class="line" href="classvpart__position.html#a2ef88792023cde20d4c80ac82a57b1ab"> 1696</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvpart__position.html#a2ef88792023cde20d4c80ac82a57b1ab">vpart_position::form_inventory</a>( <a class="code" href="classinventory.html">inventory</a> &amp;inv )<span class="keyword"> const</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_cargo = <a class="code" href="classvpart__position.html#acdeb84d4dd0494cf14b1c0138e9b2a1c">part_with_feature</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : vp_cargo-&gt;items() ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="keywordflow">if</span>( it.empty_container() &amp;&amp; it.is_watertight_container() ) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> count = it.count_by_charges() ? it.charges : 1;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                inv.<a class="code" href="classinventory.html#a4f147fecd25dc1ef701a11d5b3a51689">update_liq_container_count</a>( it.typeId(), count );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            inv.<a class="code" href="classinventory.html#a3840801d19b8b8b3ae4be0e832bd1c7d">add_item</a>( it );</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="comment">// HACK: water_faucet pseudo tool gives access to liquids in tanks</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_faucet = <a class="code" href="classvpart__position.html#a50d042495c3b69f084da4de6a8b04bbe">part_with_tool</a>( <a class="code" href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">itype_water_faucet</a> );</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordflow">if</span>( vp_faucet &amp;&amp; inv.<a class="code" href="classinventory.html#a366f3faf3a7ba32e384b843d36bc0d6a">provide_pseudo_item</a>( <a class="code" href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">itype_water_faucet</a> ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : <a class="code" href="classvpart__position.html#a75d50308cc415fe2468c79d7fd76e96e">vehicle</a>().fuel_items_left() ) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            <span class="keywordflow">if</span>( it-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                <a class="code" href="classitem.html">item</a> fuel( *it );</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                inv.<a class="code" href="classinventory.html#a3840801d19b8b8b3ae4be0e832bd1c7d">add_item</a>( fuel );</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160; </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp;[tool_item, discard_] : <a class="code" href="classvpart__position.html#a1875cbc210f80e51cda83c9d1c9c3f74">get_tools</a>() ) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        inv.<a class="code" href="classinventory.html#a366f3faf3a7ba32e384b843d36bc0d6a">provide_pseudo_item</a>( tool_item );</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"><a class="line" href="classvehicle.html#a1bfe85bfaf844d426fbaaf5a03271af1"> 1724</a></span>&#160;std::pair&lt;const itype_id &amp;, int&gt; <a class="code" href="classvehicle.html#a1bfe85bfaf844d426fbaaf5a03271af1">vehicle::tool_ammo_available</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;tool_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">if</span>( !tool_type-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keywordflow">return</span> { <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>(), 0 };</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;ft = tool_type-&gt;<a class="code" href="structitype.html#a582ad2fbe9e0c895585006a71cd351ff">tool_slot_first_ammo</a>();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span>( ft.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">return</span> { <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>(), 0 };</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment">// 2 bil ought to be enough for everyone, and hopefully not overflow int</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keyword">const</span> int64_t <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = 2&#39;000&#39;000&#39;000;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">if</span>( ft-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type == <a class="code" href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordflow">return</span> { ft, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( std::min&lt;int64_t&gt;( <a class="code" href="classvehicle.html#ad0c66d2b639d76ea65f9a181954b7ed0">battery_left</a>(), <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> ) ) };</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">return</span> { ft, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( std::min&lt;int64_t&gt;( <a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( ft ), <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> ) ) };</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"><a class="line" href="classvehicle.html#abc3414338b99688ae524554b3bdff82e"> 1742</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classvehicle.html#abc3414338b99688ae524554b3bdff82e">vehicle::prepare_tool</a>( <a class="code" href="classitem.html">item</a> &amp;tool )<span class="keyword"> const</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    tool.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">flag_id</a>( <span class="stringliteral">&quot;PSEUDO&quot;</span> ) ) );</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[ammo_itype_id, ammo_amount] = <a class="code" href="classvehicle.html#a1bfe85bfaf844d426fbaaf5a03271af1">tool_ammo_available</a>( tool.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">if</span>( ammo_itype_id.is_null() ) {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">// likely tool needs no ammo</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="classitem.html">item</a> mag_mod( <span class="stringliteral">&quot;pseudo_magazine_mod&quot;</span> );</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    mag_mod.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">flag_id</a>( <span class="stringliteral">&quot;IRREMOVABLE&quot;</span> ) ) );</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">if</span>( !tool.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( mag_mod, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tool %s has no space for a %s, this is likely a bug&quot;</span>,</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                  tool.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), mag_mod.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> mag_type;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">if</span>( tool.<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">can_link_up</a>() ) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        mag_type = <a class="code" href="vehicle__use_8cpp.html#a3f88913d28ce63b5bdc3c8d0896309fc">itype_pseudo_magazine</a>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        mag_type = tool.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>();</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="classitem.html">item</a> mag( mag_type );</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    mag.<a class="code" href="classitem.html#a1d000670a57419e2cc154245d7b27ca3">clear_items</a>(); <span class="comment">// no initial ammo</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">if</span>( !tool.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( mag, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;inserting %s into %s&#39;s MAGAZINE_WELL pocket failed&quot;</span>,</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                  mag.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), tool.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ammo_capacity = tool.<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( ammo_itype_id-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ammo_count = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( ammo_amount, ammo_capacity );</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    tool.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_itype_id, ammo_count );</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a1cc72568f1ce0f6bfe45b254c87b32f3">debugmode::DF_VEHICLE</a>, <span class="stringliteral">&quot;prepared vehtool %s with %d %s&quot;</span>,</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                   tool.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), ammo_count, ammo_itype_id.str() );</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordflow">return</span> ammo_count;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;}</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"><a class="line" href="classvehicle.html#a7823f1d9260600bd8bd6b49a49f73e7c"> 1781</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classvehicle.html#a7823f1d9260600bd8bd6b49a49f73e7c">vehicle::use_vehicle_tool</a>( <a class="code" href="classvehicle.html">vehicle</a> &amp;veh, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;vp_pos, <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;tool_type,</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                                <span class="keywordtype">bool</span> no_invoke )</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;{</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <a class="code" href="classitem.html">item</a> tool( tool_type, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[ammo_type_id, avail_ammo_amount] = veh.<a class="code" href="classvehicle.html#a1bfe85bfaf844d426fbaaf5a03271af1">tool_ammo_available</a>( tool_type );</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ammo_in_tool = veh.<a class="code" href="classvehicle.html#abc3414338b99688ae524554b3bdff82e">prepare_tool</a>( tool );</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_battery_tool = !ammo_type_id.is_null() &amp;&amp; ammo_type_id-&gt;ammo-&gt;type == <a class="code" href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span>( tool.<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() &gt; avail_ammo_amount ) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">if</span>( !no_invoke ) {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">invoke_item</a>( &amp;tool, vp_pos );</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="comment">// HACK: Evil hack incoming</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <a class="code" href="classplayer__activity.html">player_activity</a> &amp;<a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() == <a class="code" href="vehicle__use_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a> &amp;&amp;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        ( tool_type == <a class="code" href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a> ||</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;          tool_type == <a class="code" href="vehicle__use_8cpp.html#ad3c8ecbda4c90e562b969cdc72d44b13">itype_welder_crude</a> ||</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;          tool_type == <a class="code" href="vehicle__use_8cpp.html#a7cb50793d92110f40ccdf73a939db97b">itype_welding_kit</a> ||</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;          tool_type == <a class="code" href="vehicle__use_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a> ||</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;          tool_type == <a class="code" href="vehicle__use_8cpp.html#a135bb2f0f8f655d6940d21d5266b681d">itype_small_repairkit</a> ||</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;          tool_type == <a class="code" href="vehicle__use_8cpp.html#a2b1ee59bed1fc9f28ad1906bdd6156f1">itype_large_repairkit</a></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        ) ) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.index = INT_MIN; <span class="comment">// tell activity the item doesn&#39;t really exist</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.coords.push_back( vp_pos ); <span class="comment">// tell it to search for the tool on `pos`</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.str_values.push_back( tool_type.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() ); <span class="comment">// specific tool on the rig</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> used_charges = ammo_in_tool - tool.<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span>( used_charges &gt; 0 ) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="keywordflow">if</span>( is_battery_tool ) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <span class="comment">// if tool has less battery charges than it started with - discharge from vehicle batteries</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            veh.<a class="code" href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">discharge_battery</a>( used_charges );</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            veh.<a class="code" href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">drain</a>( tool.<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>(), used_charges );</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        }</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"><a class="line" href="classvehicle.html#a7560cb88cfe42683ebe48ee1b0a237d4"> 1822</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#a7560cb88cfe42683ebe48ee1b0a237d4">vehicle::build_interact_menu</a>( <a class="code" href="classveh__menu.html">veh_menu</a> &amp;menu, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p, <span class="keywordtype">bool</span> with_pickup )</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;{</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( p );</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">if</span>( !ovp ) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::build_interact_menu couldn&#39;t find vehicle at %s&quot;</span>, p.<a class="code" href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">to_string</a>() );</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keyword">const</span> <a class="code" href="classvpart__position.html">vpart_position</a> vp = *ovp;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> vppos = vp.<a class="code" href="classvpart__position.html#a94bbba6ce79073316fdb7fea7c6d8a60">pos</a>();</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    std::vector&lt;vehicle_part *&gt; vp_parts = <a class="code" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( vppos, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> );</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// @returns true if pos contains available part with a flag</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> has_part_here = [vp_parts]( <span class="keyword">const</span> std::string &amp; flag ) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keywordflow">return</span> std::any_of( vp_parts.begin(), vp_parts.end(), [flag]( <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> * vp_part ) {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            return vp_part-&gt;info().has_flag( flag );</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        } );</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    };</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> remote = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh() == <span class="keyword">this</span>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_electronic_controls = remote</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                         ? <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> ) || <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;REMOTE_CONTROLS&quot;</span> )</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                         : has_part_here( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> );</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> controls_here = has_part_here( <span class="stringliteral">&quot;CONTROLS&quot;</span> );</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> player_is_driving = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> player_inside = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>() ) ?</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                               &amp;<a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>() )-&gt;vehicle() == this :</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                               <span class="keyword">false</span>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordtype">bool</span> power_linked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordtype">bool</span> item_linked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordtype">bool</span> tow_linked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structvehicle__part.html">vehicle_part</a> *vp_part : vp_parts ) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        power_linked = power_linked || vp_part-&gt;info().has_flag( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8">VPFLAG_POWER_TRANSFER</a> );</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        item_linked = item_linked || vp_part-&gt;has_flag( <a class="code" href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40">vp_flag::linked_flag</a> );</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        tow_linked = tow_linked || vp_part-&gt;info().has_flag( <span class="stringliteral">&quot;TOW_CABLE&quot;</span> );</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a99a8fdcafffed2fd43ef9e663b1d446a">is_appliance</a>() ) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Examine vehicle&quot;</span> ) )</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        .<a class="code" href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">skip_theft_check</a>()</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;EXAMINE_VEHICLE&quot;</span> )</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vp] {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <span class="keyword">const</span> <a class="code" href="classvpart__position.html">vpart_position</a> non_fake( *<span class="keyword">this</span>, <a class="code" href="classvehicle.html#a4836138cb7d26641981bf4478f889012">get_non_fake_part</a>( vp.<a class="code" href="classvpart__position.html#a89192e86585711fa4c803a48d9f5de29">part_index</a>() ) );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> start_pos = non_fake.<a class="code" href="classvpart__position.html#a46700b8fb722ddb6c104f114e820c9b8">mount</a>().<a class="code" href="structpoint.html#a9404b750fdf6bffb8aeddf8b298ab8f6">rotate</a>( 2 );</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;exam_vehicle( *<span class="keyword">this</span>, start_pos );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        } );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Forget vehicle position&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remember vehicle position&quot;</span> ) )</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        .skip_theft_check()</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        .<a class="code" href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">keep_menu_open</a>()</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;TOGGLE_TRACKING&quot;</span> )</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">toggle_tracking</a>(); } );</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> &amp;&amp; controls_here ) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">if</span>( player_inside ) {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Hotwire&quot;</span> ) )</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            .enable( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="vehicle__use_8cpp.html#a9e7b1fa7f02502a1af5b038562385985">qual_SCREW</a> ) )</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            .desc( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attempt to hotwire the car using a screwdriver.&quot;</span> ) )</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            .skip_locked_check()</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;HOTWIRE&quot;</span> )</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {<span class="comment"></span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">                ///\EFFECT_MECHANICS speeds up vehicle hotwiring</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment"></span>                <span class="keyword">const</span> <span class="keywordtype">float</span> skill = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1.0f, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().get_skill_level( <a class="code" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> ) );</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( 6000_seconds / skill );</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> target = <a class="code" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() + <a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[0].mount );</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                <span class="keyword">const</span> <a class="code" href="classhotwire__car__activity__actor.html">hotwire_car_activity_actor</a> hotwire_act( moves, target );</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( hotwire_act );</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            } );</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> &amp;&amp; <a class="code" href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">has_security_working</a>() ) {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Trigger the alarm&quot;</span> ) )</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            .desc( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Trigger the alarm to make noise.&quot;</span> ) )</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            .skip_locked_check()</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;TOGGLE_ALARM&quot;</span> )</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You trigger the alarm&quot;</span> ) );</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            } );</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        }</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> &amp;&amp; controls_here &amp;&amp; !<a class="code" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a>() &amp;&amp; player_inside ) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Try to smash alarm&quot;</span> ) )</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        .skip_locked_check()</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;TOGGLE_ALARM&quot;</span> )</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">smash_security_system</a>(); } );</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">if</span>( remote ) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop controlling&quot;</span> ) )</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        .hotkey( <span class="stringliteral">&quot;RELEASE_CONTROLS&quot;</span> )</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        .<a class="code" href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">skip_theft_check</a>()</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [] {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop controlling the vehicle.&quot;</span> ) );</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        } );</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;ENGINE&quot;</span> ) ) {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            <span class="keywordflow">if</span>( ( controls_here &amp;&amp; player_is_driving ) || ( remote &amp;&amp; <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) ) {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop driving&quot;</span> ) )</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                .hotkey( <span class="stringliteral">&quot;TOGGLE_ENGINE&quot;</span> )</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                .<a class="code" href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">skip_theft_check</a>()</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> &amp;&amp; <a class="code" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) )</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the engine off and let go of the controls.&quot;</span> ) );</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                    {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You let go of the controls.&quot;</span> ) );</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                    }</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                    <a class="code" href="classvehicle.html#a96182f6a7ea67ab885d73ddfe9b33dbf">disable_smart_controller_if_needed</a>();</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                    <a class="code" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a>();</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                    <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                } );</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( controls_here &amp;&amp; <a class="code" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn off the engine&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on the engine&quot;</span> ) )</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                .hotkey( <span class="stringliteral">&quot;TOGGLE_ENGINE&quot;</span> )</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                .<a class="code" href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">skip_theft_check</a>()</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> )</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                    {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                        <a class="code" href="classvehicle.html#a96182f6a7ea67ab885d73ddfe9b33dbf">disable_smart_controller_if_needed</a>();</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the engine off.&quot;</span> ) );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                        <a class="code" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a>();</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                    {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                        <a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                    }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                } );</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordflow">if</span>( player_is_driving ) {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Let go of controls&quot;</span> ) )</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            .hotkey( <span class="stringliteral">&quot;RELEASE_CONTROLS&quot;</span> )</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>() <span class="comment">// in case player somehow controls locked vehicle</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            .<a class="code" href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">skip_theft_check</a>()</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [] {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You let go of the controls.&quot;</span> ) );</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            } );</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pull handbrake&quot;</span> ) )</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            .hotkey( <span class="stringliteral">&quot;PULL_HANDBRAKE&quot;</span> )</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [] { <a class="code" href="vehicle__use_8cpp.html#af62204c610c3c22a0ca114864a5f2822">handbrake</a>(); } );</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        }</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> has_engine_or_fuel_controls = ( <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size() &gt; 1 ) ||</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        std::any_of( <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.begin(), <a class="code" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.end(), [&amp;]( <span class="keywordtype">int</span> engine_idx ) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[engine_idx].info().engine_info-&gt;fuel_opts.size() &gt; 1;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        } );</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="keywordflow">if</span>( controls_here &amp;&amp; has_engine_or_fuel_controls ) {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Control individual engines&quot;</span> ) )</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            .hotkey( <span class="stringliteral">&quot;CONTROL_ENGINES&quot;</span> )</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#af03022f10e08674024f2fb664624ca54">control_engines</a>(); } );</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span>( controls_here &amp;&amp; <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;AUTOPILOT&quot;</span> ) &amp;&amp; has_electronic_controls ) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Control autopilot&quot;</span> ) )</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        .hotkey( <span class="stringliteral">&quot;CONTROL_AUTOPILOT&quot;</span> )</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">toggle_autopilot</a>(); } );</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#a99a8fdcafffed2fd43ef9e663b1d446a">is_appliance</a>() || vp.<a class="code" href="classvpart__position.html#ab1077430678db572f2681f6cbee1dcba">avail_part_with_feature</a>( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> ) ) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <a class="code" href="classvehicle.html#a2408b58971e01ae0fdc695e413d955e9">build_electronics_menu</a>( menu );</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    }</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">if</span>( has_electronic_controls &amp;&amp; <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;SMART_ENGINE_CONTROLLER&quot;</span> ) ) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Smart controller settings&quot;</span> ) )</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;CONTROL_SMART_ENGINE&quot;</span> )</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classvehicle.html#accf7c13036a2e8dc56d53c47f690bff0">smart_controller_cfg</a> )</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                <a class="code" href="classvehicle.html#accf7c13036a2e8dc56d53c47f690bff0">smart_controller_cfg</a> = <a class="code" href="structsmart__controller__config.html">smart_controller_config</a>();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            <a class="code" href="structsmart__controller__settings.html">smart_controller_settings</a> cfg_view = <a class="code" href="structsmart__controller__settings.html">smart_controller_settings</a>(</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                <a class="code" href="classvehicle.html#a0766211a71a7b42f1ead48865208f936">has_enabled_smart_controller</a>,</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                <a class="code" href="classvehicle.html#accf7c13036a2e8dc56d53c47f690bff0">smart_controller_cfg</a> -&gt; battery_lo,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                <a class="code" href="classvehicle.html#accf7c13036a2e8dc56d53c47f690bff0">smart_controller_cfg</a> -&gt; battery_hi );</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            <a class="code" href="classsmart__controller__ui.html">smart_controller_ui</a>( cfg_view ).<a class="code" href="classsmart__controller__ui.html#aab21ba2534eedc83830087501eaad979">control</a>();</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;SMART_ENGINE_CONTROLLER&quot;</span> ) )</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                vp.part().enabled = cfg_view.<a class="code" href="structsmart__controller__settings.html#a6fb234cec125271a82348abd50b24ff6">enabled</a>;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        } );</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keyword">const</span> <a class="code" href="classturret__data.html">turret_data</a> turret = <a class="code" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( vp.<a class="code" href="classvpart__position.html#a94bbba6ce79073316fdb7fea7c6d8a60">pos</a>() );</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160; </div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">if</span>( turret.<a class="code" href="classturret__data.html#a8daa2231407bc772e7905ae4535a754d">can_unload</a>() ) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unload %s&quot;</span> ), turret.<a class="code" href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">name</a>() ) )</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;UNLOAD_TURRET&quot;</span> )</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vppos] {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( vppos ).<a class="code" href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">base</a>();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">unload</a>( loc );</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        } );</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160; </div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">if</span>( turret.<a class="code" href="classturret__data.html#a022fc6dcc3b43aa8b2e1d6445f5c664a">can_reload</a>() ) {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload %s&quot;</span> ), turret.<a class="code" href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">name</a>() ) )</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        .hotkey( <span class="stringliteral">&quot;RELOAD_TURRET&quot;</span> )</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vppos] {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( vppos ).<a class="code" href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">base</a>();</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            <a class="code" href="classitem_1_1reload__option.html">item::reload_option</a> opt = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a0b6837863db773dabf67c312a37a0c9b">select_ammo</a>( loc, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="keywordflow">if</span>( opt )</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                <a class="code" href="classreload__activity__actor.html">reload_activity_actor</a> reload_act( std::move( opt ) );</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( reload_act );</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        } );</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    }</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="keywordflow">if</span>( controls_here &amp;&amp; <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;TURRET&quot;</span> ) ) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set turret targeting modes&quot;</span> ) )</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        .hotkey( <span class="stringliteral">&quot;TURRET_TARGET_MODE&quot;</span> )</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#a25395ffcb67e950d30682050f3147778">turrets_set_targeting</a>(); } );</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set turret firing modes&quot;</span> ) )</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        .hotkey( <span class="stringliteral">&quot;TURRET_FIRE_MODE&quot;</span> )</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">turrets_set_mode</a>(); } );</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        <span class="comment">// We can also fire manual turrets with ACTION_FIRE while standing at the controls.</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Aim turrets manually&quot;</span> ) )</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        .hotkey( <span class="stringliteral">&quot;TURRET_MANUAL_AIM&quot;</span> )</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#aee60cda2d8d84a6f1a912512fa523cba">turrets_aim_and_fire_all_manual</a>( <span class="keyword">true</span> ); } );</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160; </div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="comment">// This lets us manually override and set the target for the automatic turrets instead.</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Aim automatic turrets&quot;</span> ) )</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        .hotkey( <span class="stringliteral">&quot;TURRET_MANUAL_OVERRIDE&quot;</span> )</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">turrets_override_automatic_aim</a>(); } );</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Aim individual turret&quot;</span> ) )</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        .hotkey( <span class="stringliteral">&quot;TURRET_SINGLE_FIRE&quot;</span> )</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">turrets_aim_and_fire_single</a>(); } );</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span>( controls_here ) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;HORN&quot;</span> ) ) {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Honk horn&quot;</span> ) )</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            .skip_locked_check()</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;SOUND_HORN&quot;</span> )</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>] { <a class="code" href="classvehicle.html#a681502e6f751410d0ade8fbdea497c63">honk_horn</a>(); } );</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">if</span>( power_linked ) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disconnect power connections&quot;</span> ) )</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        .enable( !item_linked &amp;&amp; !tow_linked )</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        .<a class="code" href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">desc</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( !item_linked &amp;&amp; !tow_linked ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove other cables first&quot;</span> ) ) )</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        .skip_locked_check()</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;DISCONNECT_CABLES&quot;</span> )</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vp] {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <a class="code" href="classvehicle.html#af54f1f29e7bed4134c59b4ab6fba3904">unlink_cables</a>( vp.<a class="code" href="classvpart__position.html#a46700b8fb722ddb6c104f114e820c9b8">mount</a>(), <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a1012850d13ca8a58bcf82aa75b3a55d1">pause</a>();</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        } );</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">if</span>( item_linked || tow_linked ) {</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        std::string menu_text = item_linked &amp;&amp; tow_linked ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disconnect items and tow cables&quot;</span> ) :</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                                item_linked ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disconnect items&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disconnect tow cables&quot;</span> );</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        menu.<a class="code" href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">add</a>( menu_text )</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        .<a class="code" href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">skip_locked_check</a>()</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        .<a class="code" href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">hotkey</a>( <span class="stringliteral">&quot;DISCONNECT_CABLES&quot;</span> )</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        .<a class="code" href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">on_submit</a>( [<span class="keyword">this</span>, vp] {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;            <a class="code" href="classvehicle.html#af54f1f29e7bed4134c59b4ab6fba3904">unlink_cables</a>( vp.<a class="code" href="classvpart__position.html#a46700b8fb722ddb6c104f114e820c9b8">mount</a>(), <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a1012850d13ca8a58bcf82aa75b3a55d1">pause</a>();</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        } );</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160; </div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_toolstation = vp.<a class="code" href="classvpart__position.html#ab1077430678db572f2681f6cbee1dcba">avail_part_with_feature</a>( <span class="stringliteral">&quot;VEH_TOOLS&quot;</span> );</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="comment">// Remove attached tools that have become incompatible with workstation because of migration etc</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="keywordflow">if</span>( vp_toolstation &amp;&amp; !vp.<a class="code" href="classvpart__position.html#a1875cbc210f80e51cda83c9d1c9c3f74">get_tools</a>().empty() ) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> vp_info = vp_toolstation-&gt;info();</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="keywordflow">if</span>( vp_info.<a class="code" href="classvpart__info.html#abc2abb40bda9593afb1bbb2e897261d0">toolkit_info</a> ) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            <span class="keyword">const</span> std::set&lt;itype_id&gt; &amp;allowed_tool_types = vp_info.<a class="code" href="classvpart__info.html#abc2abb40bda9593afb1bbb2e897261d0">toolkit_info</a>-&gt;allowed_types;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; </div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            std::set&lt;itype_id&gt; builtin_tool_types;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[tool_type, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>] : vp_info.<a class="code" href="classvpart__info.html#a092286f8dfa6c5c57b5c8244ffe37c41">get_pseudo_tools</a>() ) {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                builtin_tool_types.insert( tool_type );</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            std::vector&lt;item&gt; &amp;stored_tools = vp_toolstation-&gt;part().tools;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            std::vector&lt;item&gt; tools_to_remove;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="comment">// Tool is incompatible if it&#39;s not in allowed types and isn&#39;t a pseudo tool</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;tool_item : stored_tools ) {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;tool_type = tool_item.typeId();</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                <span class="keywordflow">if</span>( builtin_tool_types.find( tool_type ) != builtin_tool_types.end() ) {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                <span class="keywordflow">if</span>( allowed_tool_types.find( tool_type ) == allowed_tool_types.end() ) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                    tools_to_remove.push_back( tool_item );</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            }</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; </div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <span class="keywordflow">if</span>( !tools_to_remove.empty() ) {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                <a class="code" href="classCharacter.html">Character</a> &amp;you = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;tool_to_remove : tools_to_remove ) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is no longer compatible with %s and pops out.&quot;</span> ),</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                                           tool_to_remove.tname(), vp_toolstation-&gt;part().name( <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                    you.<a class="code" href="classCharacter.html#afcfc4afce2aeb5db3c3b51ea5d65e8ec">add_or_drop_with_msg</a>( tool_to_remove );</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                stored_tools.erase( std::remove_if( stored_tools.begin(),</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                                    stored_tools.end(),</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                [&amp;tools_to_remove]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; item_to_remove ) {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                    return std::find_if( tools_to_remove.begin(), tools_to_remove.end(),</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                    [&amp;item_to_remove]( const item &amp; tools_to_remove_item ) {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                        return tools_to_remove_item.typeId() == item_to_remove.typeId();</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                    } ) != tools_to_remove.end();</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                } ),</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                stored_tools.end() );</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                <a class="code" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                you.invalidate_crafting_inventory();</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;            }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        }</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp;[tool_item, hk] : vp.get_tools() ) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;tool_type = tool_item.typeId();</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="keywordflow">if</span>( !tool_type-&gt;<a class="code" href="structitype.html#a7ff45d94507fdbf7369ae269a0f1e52b">has_use</a>() ) {</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;            <span class="keywordflow">continue</span>; <span class="comment">// passive tool</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="keywordflow">if</span>( hk == -1 ) {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            <span class="keywordflow">continue</span>; <span class="comment">// skip old passive tools</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        }</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[tool_ammo, ammo_amount] = tool_ammo_available( tool_type );</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use %s&quot;</span> ), tool_type-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) ) )</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        .enable( ammo_amount &gt;= tool_item.typeId()-&gt;charges_to_use() )</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        .hotkey( hk )</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        .skip_locked_check( tool_ammo.is_null() || tool_ammo-&gt;ammo-&gt;type != <a class="code" href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> )</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        .on_submit( [<span class="keyword">this</span>, vppos, tool_type] { use_vehicle_tool( *<span class="keyword">this</span>, vppos, tool_type ); } );</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    }</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_autoclave = vp.avail_part_with_feature( <span class="stringliteral">&quot;AUTOCLAVE&quot;</span> );</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordflow">if</span>( vp_autoclave ) {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> cl_idx = vp_autoclave-&gt;part_index();</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        menu.add( vp_autoclave-&gt;part().enabled</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                  ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Deactivate the autoclave&quot;</span> )</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                  : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Activate the autoclave (1.5 hours)&quot;</span> ) )</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        .hotkey( <span class="stringliteral">&quot;TOGGLE_AUTOCLAVE&quot;</span> )</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        .on_submit( [this, cl_idx] { use_autoclave( cl_idx ); } );</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_washing_machine =</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        vp.avail_part_with_feature( <span class="stringliteral">&quot;WASHING_MACHINE&quot;</span> );</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <span class="keywordflow">if</span>( vp_washing_machine ) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> wm_idx = vp_washing_machine-&gt;part_index();</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        menu.add( vp_washing_machine-&gt;part().enabled</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                  ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Deactivate the washing machine&quot;</span> )</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                  : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Activate the washing machine (1.5 hours)&quot;</span> ) )</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        .hotkey( <span class="stringliteral">&quot;TOGGLE_WASHING_MACHINE&quot;</span> )</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        .on_submit( [this, wm_idx] { use_washing_machine( wm_idx ); } );</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_dishwasher = vp.avail_part_with_feature( <span class="stringliteral">&quot;DISHWASHER&quot;</span> );</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">if</span>( vp_dishwasher ) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> dw_idx = vp_dishwasher-&gt;part_index();</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        menu.add( vp_dishwasher-&gt;part().enabled</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                  ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Deactivate the dishwasher&quot;</span> )</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                  : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Activate the dishwasher (1.5 hours)&quot;</span> ) )</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        .hotkey( <span class="stringliteral">&quot;TOGGLE_DISHWASHER&quot;</span> )</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        .on_submit( [this, dw_idx] { use_dishwasher( dw_idx ); } );</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_cargo = vp.cargo();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="comment">// Whether vehicle part (cargo) contains items, and whether map tile (ground) has items</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">if</span>( with_pickup &amp;&amp; (</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().has_items( vp.pos() ) ||</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            ( vp_cargo &amp;&amp; !vp_cargo-&gt;items().empty() ) ) ) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) )</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        .hotkey( <span class="stringliteral">&quot;GET_ITEMS&quot;</span> )</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        .skip_locked_check()</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        .skip_theft_check()</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        .on_submit( [vppos] { <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;pickup( vppos ); } );</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_curtain = vp.avail_part_with_feature( <span class="stringliteral">&quot;CURTAIN&quot;</span> );</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">if</span>( vp_curtain &amp;&amp; !vp_curtain-&gt;part().open ) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Peek through the closed curtains&quot;</span> ) )</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        .hotkey( <span class="stringliteral">&quot;CURTAIN_PEEK&quot;</span> )</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        .skip_locked_check()</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        .on_submit( [vppos] {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You carefully peek through the curtains.&quot;</span> ) );</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( vppos );</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        } );</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">if</span>( vp.part_with_tool( <a class="code" href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">itype_water_faucet</a> ) ) {</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        <span class="keywordtype">int</span> vp_tank_idx = -1;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <a class="code" href="classitem.html">item</a> *water_item = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> i : fuel_containers ) {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;part = parts[i];</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            <span class="keywordflow">if</span>( part.<a class="code" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>() == <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> &amp;&amp;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                part.<a class="code" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">only_item</a>().<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                vp_tank_idx = i;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                water_item = &amp;part.<a class="code" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">only_item</a>();</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keywordflow">if</span>( vp_tank_idx != -1 &amp;&amp; water_item != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fill a container with water&quot;</span> ) )</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            .hotkey( <span class="stringliteral">&quot;FAUCET_FILL&quot;</span> )</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            .skip_locked_check()</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            .on_submit( [<span class="keyword">this</span>, vp_tank_idx] {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                <a class="code" href="classitem.html">item</a> &amp;vp_tank_item = parts[vp_tank_idx].base;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a> = vp_tank_item.<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">only_item</a>();</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                <a class="code" href="namespaceliquid__handler.html#ae1d5d63f7372f4fb16a24624d0434fcd">liquid_handler::handle_liquid</a>( water, &amp;vp_tank_item, 1, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, vp_tank_idx );</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            } );</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Have a drink&quot;</span> ) )</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            .enable( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">will_eat</a>( *water_item ).success() )</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            .hotkey( <span class="stringliteral">&quot;FAUCET_DRINK&quot;</span> )</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            .skip_locked_check()</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            .on_submit( [<span class="keyword">this</span>, vp_tank_idx] {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_tank = parts[vp_tank_idx];</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                <span class="comment">// this is not &quot;proper&quot; use of vehicle_cursor, but should be good enough for reducing</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                <span class="comment">// charges and deleting the liquid on last charge drained, for more details see #61164</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                <a class="code" href="classitem__location.html">item_location</a> base_loc( <a class="code" href="classvehicle__cursor.html">vehicle_cursor</a>( *<span class="keyword">this</span>, vp_tank_idx ), &amp;vp_tank.<a class="code" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a> );</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                <a class="code" href="classitem__location.html">item_location</a> water_loc( base_loc, &amp;vp_tank.<a class="code" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">only_item</a>() );</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                <span class="keyword">const</span> <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a> consume_act( water_loc );</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( consume_act );</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            } );</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="keywordflow">if</span>( vp.part_with_tool( <a class="code" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a> ) ) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Purify water in vehicle tank&quot;</span> ) )</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        .enable( fuel_left( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &amp;&amp;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                 fuel_left( <a class="code" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) &gt;= <a class="code" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>() )</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        .hotkey( <span class="stringliteral">&quot;PURIFY_WATER&quot;</span> )</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        .on_submit( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> sel = []( <span class="keyword">const</span> <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp; pt )</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;            {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                <span class="keywordflow">return</span> pt.is_tank() &amp;&amp; pt.ammo_current() == <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            };</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            std::string <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Purify &lt;color_%s&gt;water&lt;/color&gt; in tank&quot;</span> ),</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                                               <a class="code" href="color_8cpp.html#a936ada358907519ef76966d7774212e4">get_all_colors</a>().get_name( <a class="code" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>-&gt;<a class="code" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> ) );</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;            <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vpr = <a class="code" href="classveh__interact.html#aa95d3528435647c137700c708d840f12">veh_interact::select_part</a>( *<span class="keyword">this</span>, sel, <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> );</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;            <span class="keywordflow">if</span>( !vpr )</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;tank = vpr-&gt;part();</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            int64_t cost = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>( <a class="code" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>() );</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            <span class="keywordflow">if</span>( fuel_left( <a class="code" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) &lt; tank.<a class="code" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() * cost )</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                <span class="comment">//~ $1 - vehicle name, $2 - part name</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insufficient power to purify the contents of the %1$s&#39;s %2$s&quot;</span> ),</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                         <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, tank.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                <span class="comment">//~ $1 - vehicle name, $2 - part name</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You purify the contents of the %1$s&#39;s %2$s&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, tank.<a class="code" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                discharge_battery( tank.<a class="code" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() * cost );</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                tank.<a class="code" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, tank.<a class="code" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() );</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;            }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        } );</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_monster_capture =</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        vp.avail_part_with_feature( <span class="stringliteral">&quot;CAPTURE_MONSTER_VEH&quot;</span> );</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">if</span>( vp_monster_capture ) {</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> mc_idx = vp_monster_capture-&gt;part_index();</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Capture or release a creature&quot;</span> ) )</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        .hotkey( <span class="stringliteral">&quot;USE_CAPTURE_MONSTER_VEH&quot;</span> )</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        .on_submit( [<span class="keyword">this</span>, mc_idx, vppos] { use_monster_capture( mc_idx, vppos ); } );</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_bike_rack = vp.avail_part_with_feature( <span class="stringliteral">&quot;BIKE_RACK_VEH&quot;</span> );</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordflow">if</span>( vp_bike_rack ) {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        build_bike_rack_menu( menu, vp_bike_rack-&gt;part_index() );</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_harness = vp.avail_part_with_feature( <span class="stringliteral">&quot;ANIMAL_CTRL&quot;</span> );</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">if</span>( vp_harness ) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> hn_idx = vp_harness-&gt;part_index();</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Harness an animal&quot;</span> ) )</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        .hotkey( <span class="stringliteral">&quot;USE_ANIMAL_CTRL&quot;</span> )</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        .on_submit( [<span class="keyword">this</span>, hn_idx, vppos] { use_harness( hn_idx, vppos ); } );</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    }</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">if</span>( vp.avail_part_with_feature( <span class="stringliteral">&quot;PLANTER&quot;</span> ) ) {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        menu.add( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload seed drill with seeds&quot;</span> ) )</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        .hotkey( <span class="stringliteral">&quot;USE_PLANTER&quot;</span> )</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        .on_submit( [<span class="keyword">this</span>, vppos] { reload_seeds( vppos ); } );</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_workbench = vp.avail_part_with_feature( <span class="stringliteral">&quot;WORKBENCH&quot;</span> );</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">if</span>( vp_workbench ) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> wb_idx = vp_workbench-&gt;part_index();</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Craft at the %s&quot;</span> ), vp_workbench-&gt;part().name() ) )</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        .hotkey( <span class="stringliteral">&quot;USE_WORKBENCH&quot;</span> )</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        .skip_locked_check()</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        .on_submit( [<span class="keyword">this</span>, wb_idx, vppos] {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> vp_workbench( *<span class="keyword">this</span>, wb_idx );</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            <a class="code" href="namespaceiexamine.html#a9bc39070b625f5b003d3401d46bf2a0c">iexamine::workbench_internal</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), vppos, vp_workbench );</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        } );</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    }</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">if</span>( vp_toolstation &amp;&amp; vp_toolstation-&gt;info().toolkit_info ) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> vp_idx = vp_toolstation-&gt;part_index();</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keyword">const</span> std::string vp_name = vp_toolstation-&gt;part().name( <span class="comment">/* with_prefix = */</span> <span class="keyword">false</span> );</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attach a tool to %s&quot;</span> ), vp_name ) )</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        .skip_locked_check( <span class="keyword">true</span> )</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        .on_submit( [<span class="keyword">this</span>, vp_idx, vp_name] {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            <a class="code" href="classCharacter.html">Character</a> &amp;you = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp = part( vp_idx );</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;            std::set&lt;itype_id&gt; allowed_types = vp.<a class="code" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code" href="classvpart__info.html#abc2abb40bda9593afb1bbb2e897261d0">toolkit_info</a>-&gt;allowed_types;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const item, int&gt; &amp;pair : prepare_tools( vp ) )</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                allowed_types.erase( pair.first.typeId() ); <span class="comment">// one tool of each kind max</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="namespacegame__menus_1_1inv.html#a757499c2bf4f0f52d64952a30d7cc64f">game_menus::inv::veh_tool_attach</a>( you, vp_name, allowed_types );</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;            <span class="keywordflow">if</span>( !loc )</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;            }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a> = *loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attach %s to %s.&quot;</span> ), <a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.tname(), vp_name );</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            vp.<a class="code" href="structvehicle__part.html#aae847d69aa5295112c72a1cf99f307d6">tools</a>.emplace_back( <a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a> );</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;            loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            invalidate_mass();</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        } );</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> detach_ok = !get_tools( part( vp_idx ) ).empty();</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Detach a tool from %s&quot;</span> ), vp_name ) )</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        .enable( detach_ok )</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        .desc( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( detach_ok ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There are no tools attached to %s&quot;</span> ), vp_name ) )</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        .skip_locked_check( <span class="keyword">true</span> )</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        .on_submit( [<span class="keyword">this</span>, vp_idx, vp_name] {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <a class="code" href="classveh__menu.html">veh_menu</a> detach_menu( <span class="keyword">this</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Detach a tool from %s&quot;</span> ), vp_name ) );</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160; </div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            <a class="code" href="structvehicle__part.html">vehicle_part</a> &amp;vp_tools = part( vp_idx );</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;i : get_tools( vp_tools ) )</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                detach_menu.add( i.display_name() )</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                .skip_locked_check( <span class="keyword">true</span> )</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                .skip_theft_check( <span class="keyword">true</span> )</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                .on_submit( [<span class="keyword">this</span>, &amp;i, &amp;vp_tools, vp_name]() {</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                    <a class="code" href="classCharacter.html">Character</a> &amp;you = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                    std::vector&lt;item&gt; &amp;tools = get_tools( vp_tools );</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> it_to_remove = std::find_if( tools.begin(), tools.end(),</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                    [&amp;i]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                        return &amp;it == &amp;i;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                    } );</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                    <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You detach %s from %s.&quot;</span> ),</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                            i.tname(), vp_name );</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                    you.<a class="code" href="classCharacter.html#afcfc4afce2aeb5db3c3b51ea5d65e8ec">add_or_drop_with_msg</a>( *it_to_remove );</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                    tools.erase( it_to_remove );</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                    invalidate_mass();</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                    you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                } );</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            detach_menu.query();</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        } );</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span>( is_foldable() &amp;&amp; !remote ) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fold %s&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) )</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        .hotkey( <span class="stringliteral">&quot;FOLD_VEHICLE&quot;</span> )</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        .on_submit( [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <a class="code" href="classvehicle__folding__activity__actor.html">vehicle_folding_activity_actor</a> folding_act( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( folding_act );</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        } );</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    }</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160; </div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_lockable_door =</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        vp.avail_part_with_feature( <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span> );</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp_door_lock = vp.avail_part_with_feature( <span class="stringliteral">&quot;DOOR_LOCKING&quot;</span> );</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keywordflow">if</span>( vp_lockable_door &amp;&amp; vp_door_lock &amp;&amp; !vp_lockable_door-&gt;part().open ) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="keywordflow">if</span>( player_inside &amp;&amp; !vp_lockable_door-&gt;part().locked ) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lock %s&quot;</span> ), vp_lockable_door-&gt;part().name() ) )</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            .hotkey( <span class="stringliteral">&quot;LOCK_DOOR&quot;</span> )</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            .on_submit( [p] {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                <a class="code" href="namespacedoors.html#ae7c1bfb249698cfb947810fb98b62f1e">doors::lock_door</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( p ) );</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            } );</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_inside &amp;&amp; vp_lockable_door-&gt;part().locked ) {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unlock %s&quot;</span> ), vp_lockable_door-&gt;part().name() ) )</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            .hotkey( <span class="stringliteral">&quot;UNLOCK_DOOR&quot;</span> )</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            .on_submit( [p] {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                <a class="code" href="namespacedoors.html#ac942d0e590fade74ac316bd18fae5357">doors::unlock_door</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( p ) );</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            } );</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp_lockable_door-&gt;part().locked ) {</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            menu.add( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Check the lock on %s&quot;</span> ), vp_lockable_door-&gt;part().name() ) )</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            .hotkey( <span class="stringliteral">&quot;LOCKPICK&quot;</span> )</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;            .on_submit( [p] {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <a class="code" href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">iexamine::locked_object</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), p );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            } );</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    }</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;}</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160; </div>
<div class="line"><a name="l02434"></a><span class="lineno"><a class="line" href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb"> 2434</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb">vehicle::interact_with</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p, <span class="keywordtype">bool</span> with_pickup )</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;{</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( p );</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span>( !ovp ) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;interact_with called at %s and no vehicle is found&quot;</span>, p.<a class="code" href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">to_string</a>() );</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <a class="code" href="classveh__menu.html">veh_menu</a> menu( *<span class="keyword">this</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> ) );</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        menu.<a class="code" href="classveh__menu.html#a7b9a58449435145fe59d0cc51a3eb3d4">reset</a>();</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        <a class="code" href="classvehicle.html#a7560cb88cfe42683ebe48ee1b0a237d4">build_interact_menu</a>( menu, p, with_pickup );</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    } <span class="keywordflow">while</span>( menu.<a class="code" href="classveh__menu.html#a03bca47bb0ae3f015bcd4ba5e0616baf">query</a>() );</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;}</div>
<div class="ttc" id="aaction_8cpp_html_aacc6080fc103e50e9a4b54671c1c031a"><div class="ttname"><a href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; choose_adjacent_highlight(const std::string &amp;message, const std::string &amp;failure_message, const action_id action, const bool allow_vertical, const bool allow_autoselect)</div><div class="ttdoc">Request player input of adjacent tile with highlighting, possibly on different z-level.</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l01212">action.cpp:1212</a></div></div>
<div class="ttc" id="aaction_8h_html"><div class="ttname"><a href="action_8h.html">action.h</a></div></div>
<div class="ttc" id="aactivity__actor__definitions_8h_html"><div class="ttname"><a href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a></div></div>
<div class="ttc" id="aactivity__handlers_8h_html"><div class="ttname"><a href="activity__handlers_8h.html">activity_handlers.h</a></div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb"><div class="ttname"><a href="activity__handlers_8h.html#a0d84fb943914cecb4ecf3e469beeb42ca38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a></div><div class="ttdeci">@ deliberate</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_a678a9b1ab0a1e58f70b4d6456aa54586"><div class="ttname"><a href="activity__handlers_8h.html#a678a9b1ab0a1e58f70b4d6456aa54586">put_into_vehicle_or_drop</a></div><div class="ttdeci">void put_into_vehicle_or_drop(Character &amp;you, item_drop_reason, const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00442">activity_item_handling.cpp:442</a></div></div>
<div class="ttc" id="aactivity__type_8h_html"><div class="ttname"><a href="activity__type_8h.html">activity_type.h</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00784">calendar.cpp:784</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561">cata_variant_type::field_type_id</a></div><div class="ttdeci">@ field_type_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">cata_variant_type::flag_id</a></div><div class="ttdeci">@ flag_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b">cata_variant_type::ter_id</a></div><div class="ttdeci">@ ter_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4aedc784ee4f8f5738f6c32507c3874cdf"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aedc784ee4f8f5738f6c32507c3874cdf">cata_variant_type::furn_id</a></div><div class="ttdeci">@ furn_id</div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0701e6a3f1987d9fa3f76b450dd5624a"><div class="ttname"><a href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">Character::controlling_vehicle</a></div><div class="ttdeci">bool controlling_vehicle</div><div class="ttdoc">Is currently in control of a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00559">character.h:559</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0b6837863db773dabf67c312a37a0c9b"><div class="ttname"><a href="classCharacter.html#a0b6837863db773dabf67c312a37a0c9b">Character::select_ammo</a></div><div class="ttdeci">virtual item::reload_option select_ammo(const item_location &amp;base, bool prompt=false, bool empty=true)=0</div><div class="ttdoc">Select suitable ammo with which to reload the item.</div></div>
<div class="ttc" id="aclassCharacter_html_a0e8509fc038cee083b5a7cc7bdf0f8f9"><div class="ttname"><a href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">Character::cache_get_items_with</a></div><div class="ttdeci">std::vector&lt; item * &gt; cache_get_items_with(const itype_id &amp;type, const std::function&lt; bool(item &amp;)&gt; &amp;do_and_check_func=return_true&lt; item &gt;)</div><div class="ttdoc">Returns all items with the given flag and/or that pass the given boolean item function,...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09494">character.cpp:9494</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1012850d13ca8a58bcf82aa75b3a55d1"><div class="ttname"><a href="classCharacter.html#a1012850d13ca8a58bcf82aa75b3a55d1">Character::pause</a></div><div class="ttdeci">void pause()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l13218">character.cpp:13218</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a24e0a245e9fafffb3c4a2e676b5cb635"><div class="ttname"><a href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">Character::use_amount</a></div><div class="ttdeci">std::list&lt; item &gt; use_amount(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09595">character.cpp:9595</a></div></div>
<div class="ttc" id="aclassCharacter_html_a263014a43f6feb8ef0666f1de36e2853"><div class="ttname"><a href="classCharacter.html#a263014a43f6feb8ef0666f1de36e2853">Character::get_working_leg_count</a></div><div class="ttdeci">int get_working_leg_count() const</div><div class="ttdoc">Returns the number of functioning legs.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02133">character.cpp:2133</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3abc3f2f3d7ad4ec9967ec6ccbcc1c97"><div class="ttname"><a href="classCharacter.html#a3abc3f2f3d7ad4ec9967ec6ccbcc1c97">Character::has_two_arms_lifting</a></div><div class="ttdeci">bool has_two_arms_lifting() const</div><div class="ttdoc">Returns true if the character has two functioning arms.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02083">character.cpp:2083</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdoc">Use charges in character inventory.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09769">character.cpp:9769</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3f04ae380d2d633eee808c7c6a11b6fb"><div class="ttname"><a href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">Character::unload</a></div><div class="ttdeci">bool unload(item_location &amp;loc, bool bypass_activity=false, const item_location &amp;new_container=item_location::nowhere)</div><div class="ttdoc">Unload item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11621">character.cpp:11621</a></div></div>
<div class="ttc" id="aclassCharacter_html_a47ef71a39b5845920b1ba0a87a8cb200"><div class="ttname"><a href="classCharacter.html#a47ef71a39b5845920b1ba0a87a8cb200">Character::invoke_item</a></div><div class="ttdeci">virtual bool invoke_item(item *, const tripoint &amp;pt, int pre_obtain_moves=-1)</div><div class="ttdoc">Asks how to use the item (if it has more than one use_method) and uses it.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07149">character.cpp:7149</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4eb1793aafe89d34ba7ab96bf9facc19"><div class="ttname"><a href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">Character::will_eat</a></div><div class="ttdeci">ret_val&lt; edible_rating &gt; will_eat(const item &amp;food, bool interactive=false) const</div><div class="ttdoc">Same as can_eat, but takes consequences into account.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00923">consumption.cpp:923</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5d161e8df8122b5f3d74a081ee8d12cf"><div class="ttname"><a href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">Character::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02029">crafting.cpp:2029</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6ab1a86cb826d5faa1244cb7a4674700"><div class="ttname"><a href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">Character::get_size</a></div><div class="ttdeci">creature_size get_size() const override</div><div class="ttdoc">Get size class of character.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00824">character.cpp:824</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassCharacter_html_af04d061e415da9cb6f1fc234b04f3dfb"><div class="ttname"><a href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">Character::i_add</a></div><div class="ttdeci">item_location i_add(item it, bool should_stack=true, const item *avoid=nullptr, const item *original_inventory_item=nullptr, bool allow_drop=true, bool allow_wield=true, bool ignore_pkt_settings=false)</div><div class="ttdoc">Adds the item to the character's worn items or wields it, or prompts if the Character cannot pick it ...</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00326">character_inventory.cpp:326</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassCharacter_html_afcfc4afce2aeb5db3c3b51ea5d65e8ec"><div class="ttname"><a href="classCharacter.html#afcfc4afce2aeb5db3c3b51ea5d65e8ec">Character::add_or_drop_with_msg</a></div><div class="ttdeci">bool add_or_drop_with_msg(item &amp;it, bool unloading=false, const item *avoid=nullptr, const item *original_inventory_item=nullptr)</div><div class="ttdoc">So far only called by unload() from game.cpp @avoid - do not put @it into @avoid @original_inventory_...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11580">character.cpp:11580</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe4c095c2e6510f07f351d7e091f5787"><div class="ttname"><a href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">Character::invalidate_crafting_inventory</a></div><div class="ttdeci">void invalidate_crafting_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00692">crafting.cpp:692</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a07012d6d1998068bef112510c7424374"><div class="ttname"><a href="classCreature.html#a07012d6d1998068bef112510c7424374">Creature::is_monster</a></div><div class="ttdeci">virtual bool is_monster() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00271">creature.h:271</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassCreature_html_a5881c150a3ed435f757e0b34b0d1009e"><div class="ttname"><a href="classCreature.html#a5881c150a3ed435f757e0b34b0d1009e">Creature::get_name</a></div><div class="ttdeci">virtual std::string get_name() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_ac16dcdb688f6f47c594c98c83528a670"><div class="ttname"><a href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">Creature::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00188">creature.cpp:188</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassCreature_html_af7172e571c5c69240d9f71a01fddf035"><div class="ttname"><a href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">Creature::pos_bub</a></div><div class="ttdeci">tripoint_bub_ms pos_bub() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00183">creature.cpp:183</a></div></div>
<div class="ttc" id="aclassCreature_html_af826bfbdc9d7f81a8b9e53775f43d080"><div class="ttname"><a href="classCreature.html#af826bfbdc9d7f81a8b9e53775f43d080">Creature::set_moves</a></div><div class="ttdeci">void set_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02012">creature.cpp:2012</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassbikerack__racking__activity__actor_html"><div class="ttname"><a href="classbikerack__racking__activity__actor.html">bikerack_racking_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00381">activity_actor_definitions.h:382</a></div></div>
<div class="ttc" id="aclassbikerack__unracking__activity__actor_html"><div class="ttname"><a href="classbikerack__unracking__activity__actor.html">bikerack_unracking_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00410">activity_actor_definitions.h:411</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclassconsume__activity__actor_html"><div class="ttname"><a href="classconsume__activity__actor.html">consume_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00780">activity_actor_definitions.h:781</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::reality_bubble, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclasshotwire__car__activity__actor_html"><div class="ttname"><a href="classhotwire__car__activity__actor.html">hotwire_car_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00317">activity_actor_definitions.h:318</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; ter_t &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a315169d32cce4267b7c8dceff4b0d1d7"><div class="ttname"><a href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">int_id::obj</a></div><div class="ttdeci">const ammo_effect &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassinventory_html_a366f3faf3a7ba32e384b843d36bc0d6a"><div class="ttname"><a href="classinventory.html#a366f3faf3a7ba32e384b843d36bc0d6a">inventory::provide_pseudo_item</a></div><div class="ttdeci">item * provide_pseudo_item(const item &amp;tool)</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00356">inventory.cpp:356</a></div></div>
<div class="ttc" id="aclassinventory_html_a3840801d19b8b8b3ae4be0e832bd1c7d"><div class="ttname"><a href="classinventory.html#a3840801d19b8b8b3ae4be0e832bd1c7d">inventory::add_item</a></div><div class="ttdeci">item &amp; add_item(item newit, bool keep_invlet=false, bool assign_invlet=true, bool should_stack=true)</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00301">inventory.cpp:301</a></div></div>
<div class="ttc" id="aclassinventory_html_a4f147fecd25dc1ef701a11d5b3a51689"><div class="ttname"><a href="classinventory.html#a4f147fecd25dc1ef701a11d5b3a51689">inventory::update_liq_container_count</a></div><div class="ttdeci">void update_liq_container_count(const itype_id &amp;id, int count)</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l01148">inventory.cpp:1148</a></div></div>
<div class="ttc" id="aclassinventory_html_a8646038685427ab8967fd8ea2ee36e92"><div class="ttname"><a href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const override</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html"><div class="ttname"><a href="classitem_1_1reload__option.html">item::reload_option</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00550">item.h:551</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01041">item_location.cpp:1041</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00032">item_stack.cpp:32</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00019">item_stack.cpp:19</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00037">item_stack.cpp:37</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a018fe1a11eaa7e18cae915d683088c02"><div class="ttname"><a href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">item::put_in</a></div><div class="ttdeci">ret_val&lt; void &gt; put_in(const item &amp;payload, pocket_type pk_type, bool unseal_pockets=false, Character *carrier=nullptr)</div><div class="ttdoc">Puts the given item into this one.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01784">item.cpp:1784</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aclassitem_html_a159a8d7dbb5135f556838aec5e223287"><div class="ttname"><a href="classitem.html#a159a8d7dbb5135f556838aec5e223287">item::magazine_default</a></div><div class="ttdeci">itype_id magazine_default(bool conversion=false) const</div><div class="ttdoc">Get the default magazine type (if any) for the current effective ammo type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11185">item.cpp:11185</a></div></div>
<div class="ttc" id="aclassitem_html_a1d000670a57419e2cc154245d7b27ca3"><div class="ttname"><a href="classitem.html#a1d000670a57419e2cc154245d7b27ca3">item::clear_items</a></div><div class="ttdeci">void clear_items()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15130">item.cpp:15130</a></div></div>
<div class="ttc" id="aclassitem_html_a216affc51dde30087c21fa5689a5c5e9"><div class="ttname"><a href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">item::max_damage</a></div><div class="ttdeci">int max_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08900">item.cpp:8900</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a478ecf81e48540e1ba39de33df968c43"><div class="ttname"><a href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a></div><div class="ttdeci">bool has_var(const std::string &amp;name) const</div><div class="ttdoc">Whether the variable is defined at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01928">item.cpp:1928</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a624c3b7ec10ae766a9e75718af71e647"><div class="ttname"><a href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type, returns &quot;null&quot; if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11021">item.cpp:11021</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_a6a3f16444c412bce4b75a7d600d6a3fe"><div class="ttname"><a href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a></div><div class="ttdeci">item &amp; ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Filter setting the ammo for this instance Any existing ammo is removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00719">item.cpp:719</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a6dc463a17ae0cac2850b6d1bc8b34fa7"><div class="ttname"><a href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">item::inc_damage</a></div><div class="ttdeci">bool inc_damage()</div><div class="ttdoc">Same as mod_damage( itype::damage_scale ), advances item to next damage level.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08947">item.cpp:8947</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_ab00eaab576446da90f829d1ceae66c98"><div class="ttname"><a href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a></div><div class="ttdeci">bool is_seed() const</div><div class="ttdoc">Whether this is actually a seed, the seed functions won't be of much use for non-seeds.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14201">item.cpp:14201</a></div></div>
<div class="ttc" id="aclassitem_html_ab21800e6d065dc9649a86d586e879912"><div class="ttname"><a href="classitem.html#ab21800e6d065dc9649a86d586e879912">item::can_link_up</a></div><div class="ttdeci">bool can_link_up() const</div><div class="ttdoc">Returns true if the item is/has a cable that can link up to other things. Should usually be called be...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13319">item.cpp:13319</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14681">item.cpp:14681</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassitem_html_ae8a58c6fe3c80cded11d6f3ccfa548a3"><div class="ttname"><a href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdoc">How much damage has the item sustained?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00858">item.cpp:858</a></div></div>
<div class="ttc" id="aclassitem_html_af876b00a46cde846cf22f1f550bf37e2"><div class="ttname"><a href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">item::only_item</a></div><div class="ttdeci">item &amp; only_item()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15145">item.cpp:15145</a></div></div>
<div class="ttc" id="aclassitem_html_afa39b2bde9d8c33ad973c1dd34602bc4"><div class="ttname"><a href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">item::link_to</a></div><div class="ttdeci">ret_val&lt; void &gt; link_to(const optional_vpart_position &amp;linked_vp, link_state link_type=link_state::no_link)</div><div class="ttdoc">Initializes the item's link_data and starts a connection to the specified vehicle position.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13348">item.cpp:13348</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00106">map.h:107</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00219">map.cpp:219</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a017fb2b4060eff01e4b8397952048ad6"><div class="ttname"><a href="classmap.html#a017fb2b4060eff01e4b8397952048ad6">map::set_transparency_cache_dirty</a></div><div class="ttdeci">void set_transparency_cache_dirty(int zlev)</div><div class="ttdoc">Sets a dirty flag on the a given cache.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00273">map.cpp:273</a></div></div>
<div class="ttc" id="aclassmap_html_a029b364a2b257f06a689f27412d21576"><div class="ttname"><a href="classmap.html#a029b364a2b257f06a689f27412d21576">map::set</a></div><div class="ttdeci">void set(const tripoint &amp;p, const ter_id &amp;new_terrain, const furn_id &amp;new_furniture)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01678">map.cpp:1678</a></div></div>
<div class="ttc" id="aclassmap_html_a07dbd4505e0464a1f58bc732febfd6f4"><div class="ttname"><a href="classmap.html#a07dbd4505e0464a1f58bc732febfd6f4">map::destroy</a></div><div class="ttdeci">void destroy(const tripoint &amp;p, bool silent=false)</div><div class="ttdoc">Keeps bashing a square until it can't be bashed anymore.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04394">map.cpp:4394</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06563">map.cpp:6563</a></div></div>
<div class="ttc" id="aclassmap_html_a410a8dcd3e1ee0e87da584bf878d6f83"><div class="ttname"><a href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">map::furn_set</a></div><div class="ttdeci">bool furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, bool furn_reset=false, bool avoid_creatures=false)</div><div class="ttdoc">furn_reset should be true if new_furniture is being set to f_null when the player is grab-moving furn...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01743">map.cpp:1743</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_a4fb2eb743dcaef576cea6790d17aa32e"><div class="ttname"><a href="classmap.html#a4fb2eb743dcaef576cea6790d17aa32e">map::set_seen_cache_dirty</a></div><div class="ttdeci">void set_seen_cache_dirty(const tripoint &amp;change_location)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00291">map.cpp:291</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmap_html_a59bdb65280e5e1461469b0e1275c402e"><div class="ttname"><a href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">map::ter_set</a></div><div class="ttdeci">bool ter_set(const tripoint &amp;p, const ter_id &amp;new_terrain, bool avoid_creatures=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02226">map.cpp:2226</a></div></div>
<div class="ttc" id="aclassmap_html_a9b1c092685c43287d5db23156f3f337e"><div class="ttname"><a href="classmap.html#a9b1c092685c43287d5db23156f3f337e">map::i_clear</a></div><div class="ttdeci">void i_clear(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05030">map.cpp:5030</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_aa904e9f61ca568d8ed985cf22193b8ed"><div class="ttname"><a href="classmap.html#aa904e9f61ca568d8ed985cf22193b8ed">map::has_items</a></div><div class="ttdeci">bool has_items(const tripoint &amp;p) const</div><div class="ttdoc">Checks for existence of items.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05890">map.cpp:5890</a></div></div>
<div class="ttc" id="aclassmap_html_ab075f4bc498a7cbf386b8f53b86b017d"><div class="ttname"><a href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, const map_stack::const_iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05001">map.cpp:5001</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01922">map.cpp:1922</a></div></div>
<div class="ttc" id="aclassmap_html_ac0f2abd4806cc1d145bbb29493c9f2cd"><div class="ttname"><a href="classmap.html#ac0f2abd4806cc1d145bbb29493c9f2cd">map::mop_spills</a></div><div class="ttdeci">bool mop_spills(const tripoint_bub_ms &amp;p)</div><div class="ttdoc">Remove moppable fields/items at this location.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03695">map.cpp:3695</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassmap_html_af79fb1f952314ecb64890590c91cf5a8"><div class="ttname"><a href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">map::add_item</a></div><div class="ttdeci">item &amp; add_item(const tripoint &amp;p, item new_item, int copies)</div><div class="ttdoc">Place an item on the map, despite the parameter name, this is not necessarily a new item.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05329">map.cpp:5329</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a2881507933646bca97ef83c7112595ac"><div class="ttname"><a href="classmonster.html#a2881507933646bca97ef83c7112595ac">monster::tied_item</a></div><div class="ttdeci">cata::value_ptr&lt; item &gt; tied_item</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00529">monster.h:529</a></div></div>
<div class="ttc" id="aclassmonster_html_a43202b3e829143741862e0f5f1e826a7"><div class="ttname"><a href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">monster::has_flag</a></div><div class="ttdeci">bool has_flag(const mon_flag_id &amp;f) const final</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01202">monster.cpp:1202</a></div></div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00539">monster.h:539</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00550">monster.h:550</a></div></div>
<div class="ttc" id="aclassmonster_html_ad4fba0b9aea36097d8b972e05e66d914"><div class="ttname"><a href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">monster::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00717">monster.cpp:717</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a4b068ec14497611ce63808e286fc27aa"><div class="ttname"><a href="classovermapbuffer.html#a4b068ec14497611ce63808e286fc27aa">overmapbuffer::add_vehicle</a></div><div class="ttdeci">void add_vehicle(vehicle *veh)</div><div class="ttdoc">Add the vehicle to be tracked in the overmap.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00740">overmapbuffer.cpp:740</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aed7c783516f532d6c51339caa802374d"><div class="ttname"><a href="classovermapbuffer.html#aed7c783516f532d6c51339caa802374d">overmapbuffer::remove_vehicle</a></div><div class="ttdeci">void remove_vehicle(const vehicle *veh)</div><div class="ttdoc">Remove the vehicle from being tracked in the overmap.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00729">overmapbuffer.cpp:729</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00032">player_activity.h:33</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_aca09f19b9a36866a33a46cf0c8ee484d"><div class="ttname"><a href="classplayer__activity.html#aca09f19b9a36866a33a46cf0c8ee484d">player_activity::values</a></div><div class="ttdeci">std::vector&lt; int &gt; values</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00062">player_activity.h:62</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_add304db68223aefc55b89a9bdea47c34"><div class="ttname"><a href="classplayer__activity.html#add304db68223aefc55b89a9bdea47c34">player_activity::relative_placement</a></div><div class="ttdeci">tripoint_rel_ms relative_placement</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00071">player_activity.h:71</a></div></div>
<div class="ttc" id="aclassread__only__visitable_html_a97ab02b5ae44854ce2869532a222ee8d"><div class="ttname"><a href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">read_only_visitable::has_charges</a></div><div class="ttdeci">virtual bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00223">visitable.cpp:223</a></div></div>
<div class="ttc" id="aclassreload__activity__actor_html"><div class="ttname"><a href="classreload__activity__actor.html">reload_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01155">activity_actor_definitions.h:1156</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="aclasssmart__controller__ui_html"><div class="ttname"><a href="classsmart__controller__ui.html">smart_controller_ui</a></div><div class="ttdef"><b>Definition:</b> <a href="smart__controller__ui_8h_source.html#l00032">smart_controller_ui.h:33</a></div></div>
<div class="ttc" id="aclasssmart__controller__ui_html_aab21ba2534eedc83830087501eaad979"><div class="ttname"><a href="classsmart__controller__ui.html#aab21ba2534eedc83830087501eaad979">smart_controller_ui::control</a></div><div class="ttdeci">void control()</div><div class="ttdef"><b>Definition:</b> <a href="smart__controller__ui_8cpp_source.html#l00133">smart_controller_ui.cpp:133</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; activity_type &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; ter_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; ter_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00048">string_input_popup.h:49</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_aa96aa0184abb3c9740c2a48f098eeb8b"><div class="ttname"><a href="classstring__input__popup.html#aa96aa0184abb3c9740c2a48f098eeb8b">string_input_popup::title</a></div><div class="ttdeci">string_input_popup &amp; title(const std::string &amp;value)</div><div class="ttdoc">The title: short string before the actual input field.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00113">string_input_popup.h:113</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ab3273f9bfdeac38fff067187b1d3715c"><div class="ttname"><a href="classstring__input__popup.html#ab3273f9bfdeac38fff067187b1d3715c">string_input_popup::width</a></div><div class="ttdeci">string_input_popup &amp; width(int value)</div><div class="ttdoc">Width (in console cells) of the input field itself.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00151">string_input_popup.h:151</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ad9511310a3e0d119d5587fbf0f877c07"><div class="ttname"><a href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">string_input_popup::query_int</a></div><div class="ttdeci">int query_int(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00361">string_input_popup.cpp:361</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_af38cf4937c0dea802498161d1642fb08"><div class="ttname"><a href="classstring__input__popup.html#af38cf4937c0dea802498161d1642fb08">string_input_popup::only_digits</a></div><div class="ttdeci">string_input_popup &amp; only_digits(bool value)</div><div class="ttdoc">If true, any non-digit input cancels the input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00166">string_input_popup.h:166</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
<div class="ttc" id="aclassturret__data_html"><div class="ttname"><a href="classturret__data.html">turret_data</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00583">vehicle.h:584</a></div></div>
<div class="ttc" id="aclassturret__data_html_a022fc6dcc3b43aa8b2e1d6445f5c664a"><div class="ttname"><a href="classturret__data.html#a022fc6dcc3b43aa8b2e1d6445f5c664a">turret_data::can_reload</a></div><div class="ttdeci">bool can_reload() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00212">turret.cpp:212</a></div></div>
<div class="ttc" id="aclassturret__data_html_a3d31c9d61e07b678c4d7fac5d7c4646a"><div class="ttname"><a href="classturret__data.html#a3d31c9d61e07b678c4d7fac5d7c4646a">turret_data::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00074">turret.cpp:74</a></div></div>
<div class="ttc" id="aclassturret__data_html_a737465cce9c8f1e87eec808ee1363421"><div class="ttname"><a href="classturret__data.html#a737465cce9c8f1e87eec808ee1363421">turret_data::base</a></div><div class="ttdeci">item_location base()</div><div class="ttdoc">Get base item location.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00079">turret.cpp:79</a></div></div>
<div class="ttc" id="aclassturret__data_html_a8daa2231407bc772e7905ae4535a754d"><div class="ttname"><a href="classturret__data.html#a8daa2231407bc772e7905ae4535a754d">turret_data::can_unload</a></div><div class="ttdeci">bool can_unload() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00228">turret.cpp:228</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassveh__interact_html_aa95d3528435647c137700c708d840f12"><div class="ttname"><a href="classveh__interact.html#aa95d3528435647c137700c708d840f12">veh_interact::select_part</a></div><div class="ttdeci">static std::optional&lt; vpart_reference &gt; select_part(const vehicle &amp;veh, const part_selector &amp;sel, const std::string &amp;title=std::string())</div><div class="ttdoc">Prompt for a part matching the selector function.</div><div class="ttdef"><b>Definition:</b> <a href="veh__interact_8cpp_source.html#l00232">veh_interact.cpp:232</a></div></div>
<div class="ttc" id="aclassveh__menu_html"><div class="ttname"><a href="classveh__menu.html">veh_menu</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8h_source.html#l00059">veh_utils.h:60</a></div></div>
<div class="ttc" id="aclassveh__menu_html_a03bca47bb0ae3f015bcd4ba5e0616baf"><div class="ttname"><a href="classveh__menu.html#a03bca47bb0ae3f015bcd4ba5e0616baf">veh_menu::query</a></div><div class="ttdeci">bool query()</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00324">veh_utils.cpp:324</a></div></div>
<div class="ttc" id="aclassveh__menu_html_a3175b420aeccaf36f96a68dc80341883"><div class="ttname"><a href="classveh__menu.html#a3175b420aeccaf36f96a68dc80341883">veh_menu::get_items_size</a></div><div class="ttdeci">size_t get_items_size() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00264">veh_utils.cpp:264</a></div></div>
<div class="ttc" id="aclassveh__menu_html_a71b9ab3d30856c8039bab29fa92de92f"><div class="ttname"><a href="classveh__menu.html#a71b9ab3d30856c8039bab29fa92de92f">veh_menu::add</a></div><div class="ttdeci">veh_menu_item &amp; add(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00256">veh_utils.cpp:256</a></div></div>
<div class="ttc" id="aclassveh__menu_html_a7b9a58449435145fe59d0cc51a3eb3d4"><div class="ttname"><a href="classveh__menu.html#a7b9a58449435145fe59d0cc51a3eb3d4">veh_menu::reset</a></div><div class="ttdeci">void reset(bool keep_last_selected=true)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00287">veh_utils.cpp:287</a></div></div>
<div class="ttc" id="aclassveh__menu_html_a8ac984585867c962321a1e510f5d3ead"><div class="ttname"><a href="classveh__menu.html#a8ac984585867c962321a1e510f5d3ead">veh_menu::desc_lines_hint</a></div><div class="ttdeci">int desc_lines_hint</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8h_source.html#l00071">veh_utils.h:71</a></div></div>
<div class="ttc" id="aclassvehicle__cursor_html"><div class="ttname"><a href="classvehicle__cursor.html">vehicle_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__selector_8h_source.html#l00018">vehicle_selector.h:19</a></div></div>
<div class="ttc" id="aclassvehicle__folding__activity__actor_html"><div class="ttname"><a href="classvehicle__folding__activity__actor.html">vehicle_folding_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01606">activity_actor_definitions.h:1607</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html"><div class="ttname"><a href="classvehicle__stack.html">vehicle_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00173">vehicle.h:174</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html_ac3090521c59c43ec57666ddb4e0e2484"><div class="ttname"><a href="classvehicle__stack.html#ac3090521c59c43ec57666ddb4e0e2484">vehicle_stack::erase</a></div><div class="ttdeci">item_stack::iterator erase(item_stack::const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00187">vehicle.cpp:187</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0766211a71a7b42f1ead48865208f936"><div class="ttname"><a href="classvehicle.html#a0766211a71a7b42f1ead48865208f936">vehicle::has_enabled_smart_controller</a></div><div class="ttdeci">bool has_enabled_smart_controller</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02227">vehicle.h:2227</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0cada0f94f36c1bbaf243d6ff82426ed"><div class="ttname"><a href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed">vehicle::use_dishwasher</a></div><div class="ttdeci">void use_dishwasher(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01502">vehicle_use.cpp:1502</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0ccf22f114d5d8f239ebe58f5c8f70ad"><div class="ttname"><a href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">vehicle::engine_on</a></div><div class="ttdeci">bool engine_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02352">vehicle.h:2352</a></div></div>
<div class="ttc" id="aclassvehicle_html_a12844862e123c12dc923ca390becf79e"><div class="ttname"><a href="classvehicle.html#a12844862e123c12dc923ca390becf79e">vehicle::pos</a></div><div class="ttdeci">point pos</div><div class="ttdoc">Position of the vehicle inside the submap that contains the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02274">vehicle.h:2274</a></div></div>
<div class="ttc" id="aclassvehicle_html_a13625127df9cee2d242276a4a1f61bef"><div class="ttname"><a href="classvehicle.html#a13625127df9cee2d242276a4a1f61bef">vehicle::is_engine_type</a></div><div class="ttdeci">bool is_engine_type(const vehicle_part &amp;vp, const itype_id &amp;ft) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01000">vehicle.cpp:1000</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1380ff85985897f9f8a34eba538e04db"><div class="ttname"><a href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">vehicle::turn</a></div><div class="ttdeci">void turn(units::angle deg)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00668">vehicle_move.cpp:668</a></div></div>
<div class="ttc" id="aclassvehicle_html_a14d2f19fb47d302e96c268c202904e71"><div class="ttname"><a href="classvehicle.html#a14d2f19fb47d302e96c268c202904e71">vehicle::drain</a></div><div class="ttdeci">int drain(const itype_id &amp;ftype, int amount, const std::function&lt; bool(vehicle_part &amp;)&gt; &amp;filter=return_true&lt; vehicle_part &amp; &gt;, bool apply_loss=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03604">vehicle.cpp:3604</a></div></div>
<div class="ttc" id="aclassvehicle_html_a16b29a171a5a4add5b6a759e049cbcf0"><div class="ttname"><a href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">vehicle::open_all_at</a></div><div class="ttdeci">void open_all_at(int p)</div><div class="ttdoc">Opens everything that can be opened on the same tile as p</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01289">vehicle_use.cpp:1289</a></div></div>
<div class="ttc" id="aclassvehicle_html_a17ca39b6ff2abc922ae68969c1e2134c"><div class="ttname"><a href="classvehicle.html#a17ca39b6ff2abc922ae68969c1e2134c">vehicle::bub_part_pos</a></div><div class="ttdeci">tripoint_bub_ms bub_part_pos(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03452">vehicle.cpp:3452</a></div></div>
<div class="ttc" id="aclassvehicle_html_a190ccc33782a28e26089122eec15f767"><div class="ttname"><a href="classvehicle.html#a190ccc33782a28e26089122eec15f767">vehicle::open_or_close</a></div><div class="ttdeci">void open_or_close(int part_index, bool opening)</div><div class="ttdoc">Opens or closes an openable part at the specified index based on the @opening value passed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01307">vehicle_use.cpp:1307</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1a59e5df3ef43114973413525dcafaa9"><div class="ttname"><a href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">vehicle::crash_terrain_around</a></div><div class="ttdeci">void crash_terrain_around()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00957">vehicle_use.cpp:957</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1b64eabc86039e338bf054c96f5a26ff"><div class="ttname"><a href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">vehicle::get_avail_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_avail_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are available: not broke...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03007">vehicle.cpp:3007</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1bfe85bfaf844d426fbaaf5a03271af1"><div class="ttname"><a href="classvehicle.html#a1bfe85bfaf844d426fbaaf5a03271af1">vehicle::tool_ammo_available</a></div><div class="ttdeci">std::pair&lt; const itype_id &amp;, int &gt; tool_ammo_available(const itype_id &amp;tool_type) const</div><div class="ttdoc">if tool is not an itype with tool != nullptr this returns { itype::NULL_ID(), 0 } pair</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01724">vehicle_use.cpp:1724</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1de4016879048f712da9fa4ecd286a87"><div class="ttname"><a href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">vehicle::turrets_override_automatic_aim</a></div><div class="ttdeci">void turrets_override_automatic_aim()</div><div class="ttdoc">Set target for automatic turrets using the aiming UI.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00371">turret.cpp:371</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1ef4731130505bdde94982112587d140"><div class="ttname"><a href="classvehicle.html#a1ef4731130505bdde94982112587d140">vehicle::fuel_left</a></div><div class="ttdeci">int64_t fuel_left(const itype_id &amp;ftype, const std::function&lt; bool(const vehicle_part &amp;)&gt; &amp;filter=return_true&lt; const vehicle_part &amp; &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03516">vehicle.cpp:3516</a></div></div>
<div class="ttc" id="aclassvehicle_html_a20879efe6f04d7de665ba3a57f73e0af"><div class="ttname"><a href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">vehicle::enable_patrol</a></div><div class="ttdeci">void enable_patrol()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00830">vehicle_use.cpp:830</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2408b58971e01ae0fdc695e413d955e9"><div class="ttname"><a href="classvehicle.html#a2408b58971e01ae0fdc695e413d955e9">vehicle::build_electronics_menu</a></div><div class="ttdeci">void build_electronics_menu(veh_menu &amp;menu)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00285">vehicle_use.cpp:285</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2526f9ddb721f55af6cf2086e96698d6"><div class="ttname"><a href="classvehicle.html#a2526f9ddb721f55af6cf2086e96698d6">vehicle::engine_start_time</a></div><div class="ttdeci">time_duration engine_start_time(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00590">vehicle_use.cpp:590</a></div></div>
<div class="ttc" id="aclassvehicle_html_a252d9bdf38ff0a522b813b692fdaa086"><div class="ttname"><a href="classvehicle.html#a252d9bdf38ff0a522b813b692fdaa086">vehicle::build_bike_rack_menu</a></div><div class="ttdeci">void build_bike_rack_menu(veh_menu &amp;menu, int part)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01639">vehicle_use.cpp:1639</a></div></div>
<div class="ttc" id="aclassvehicle_html_a25395ffcb67e950d30682050f3147778"><div class="ttname"><a href="classvehicle.html#a25395ffcb67e950d30682050f3147778">vehicle::turrets_set_targeting</a></div><div class="ttdeci">void turrets_set_targeting()</div><div class="ttdoc">Set targeting mode for specific turrets.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00453">turret.cpp:453</a></div></div>
<div class="ttc" id="aclassvehicle_html_a25da50ff11a0bbdb949f12cf2e62e5d3"><div class="ttname"><a href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3">vehicle::operate_reaper</a></div><div class="ttdeci">void operate_reaper()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01028">vehicle_use.cpp:1028</a></div></div>
<div class="ttc" id="aclassvehicle_html_a26f98c384048e03538bca10e4f26905d"><div class="ttname"><a href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">vehicle::is_following</a></div><div class="ttdeci">bool is_following</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02348">vehicle.h:2348</a></div></div>
<div class="ttc" id="aclassvehicle_html_a289ae4a1152ace4192ff520337364f7a"><div class="ttname"><a href="classvehicle.html#a289ae4a1152ace4192ff520337364f7a">vehicle::is_perpetual_type</a></div><div class="ttdeci">bool is_perpetual_type(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01010">vehicle.cpp:1010</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2db34d06c73c9adf5c39174ed615beed"><div class="ttname"><a href="classvehicle.html#a2db34d06c73c9adf5c39174ed615beed">vehicle::total_power</a></div><div class="ttdeci">units::power total_power(bool fueled=true, bool safe=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03697">vehicle.cpp:3697</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2e0ee458717c0089922ff3604f1a8ca2"><div class="ttname"><a href="classvehicle.html#a2e0ee458717c0089922ff3604f1a8ca2">vehicle::beeper_sound</a></div><div class="ttdeci">void beeper_sound() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00917">vehicle_use.cpp:917</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2ecd7bbfce4b780111a1cbf5d8251d9b"><div class="ttname"><a href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b">vehicle::operate_planter</a></div><div class="ttdeci">void operate_planter()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01072">vehicle_use.cpp:1072</a></div></div>
<div class="ttc" id="aclassvehicle_html_a316ae13526323d2e762ee54d4161a064"><div class="ttname"><a href="classvehicle.html#a316ae13526323d2e762ee54d4161a064">vehicle::next_part_to_unlock</a></div><div class="ttdeci">int next_part_to_unlock(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to unlock at part p's location.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02993">vehicle.cpp:2993</a></div></div>
<div class="ttc" id="aclassvehicle_html_a31bcfe9c61adc2fe500315a59e1bb690"><div class="ttname"><a href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">vehicle::engines</a></div><div class="ttdeci">std::vector&lt; int &gt; engines</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02173">vehicle.h:2173</a></div></div>
<div class="ttc" id="aclassvehicle_html_a320ca34b5c38568efd801731cef78a35"><div class="ttname"><a href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">vehicle::skidding</a></div><div class="ttdeci">bool skidding</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02363">vehicle.h:2363</a></div></div>
<div class="ttc" id="aclassvehicle_html_a34630935e46860003c616e0522316f02"><div class="ttname"><a href="classvehicle.html#a34630935e46860003c616e0522316f02">vehicle::sm_pos</a></div><div class="ttdeci">tripoint sm_pos</div><div class="ttdoc">Submap coordinates of the currently loaded submap (see game::m) that contains this vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02261">vehicle.h:2261</a></div></div>
<div class="ttc" id="aclassvehicle_html_a34acaf3108178e27a2530566749a17c2"><div class="ttname"><a href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">vehicle::turrets_set_mode</a></div><div class="ttdeci">void turrets_set_mode()</div><div class="ttdoc">Set firing mode for specific turrets.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00509">turret.cpp:509</a></div></div>
<div class="ttc" id="aclassvehicle_html_a370afbdd3c703760b7f2c9f04d1a05ce"><div class="ttname"><a href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce">vehicle::use_autoclave</a></div><div class="ttdeci">void use_autoclave(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01370">vehicle_use.cpp:1370</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3781d93b55f0b4a8a9c74305bb91003e"><div class="ttname"><a href="classvehicle.html#a3781d93b55f0b4a8a9c74305bb91003e">vehicle::play_chimes</a></div><div class="ttdeci">void play_chimes() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00945">vehicle_use.cpp:945</a></div></div>
<div class="ttc" id="aclassvehicle_html_a38ba5bdc99241568c83ada974ed73e07"><div class="ttname"><a href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">vehicle::get_parts_at</a></div><div class="ttdeci">std::vector&lt; vehicle_part * &gt; get_parts_at(const tripoint &amp;pos, const std::string &amp;flag, part_status_flag condition)</div><div class="ttdoc">Get all enabled, available, unbroken vehicle parts at specified position.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02855">vehicle.cpp:2855</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3900ee345be0453828a955a200154db1"><div class="ttname"><a href="classvehicle.html#a3900ee345be0453828a955a200154db1">vehicle::global_pos3</a></div><div class="ttdeci">tripoint global_pos3() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03431">vehicle.cpp:3431</a></div></div>
<div class="ttc" id="aclassvehicle_html_a397b40aa92dd1fd09ee592aa279bc656"><div class="ttname"><a href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">vehicle::get_all_parts</a></div><div class="ttdeci">vehicle_part_range get_all_parts() const</div><div class="ttdoc">Yields a range containing all parts (including broken ones) that can be iterated over.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08119">vehicle.cpp:8119</a></div></div>
<div class="ttc" id="aclassvehicle_html_a39ef96d5220fa3c0bde366f463039c21"><div class="ttname"><a href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">vehicle::has_engine_type_not</a></div><div class="ttdeci">bool has_engine_type_not(const itype_id &amp;ft, bool enabled) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00967">vehicle.cpp:967</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3c2e2dbcb069f8ce5c3c420732b2243b"><div class="ttname"><a href="classvehicle.html#a3c2e2dbcb069f8ce5c3c420732b2243b">vehicle::is_engine_on</a></div><div class="ttdeci">bool is_engine_on(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01015">vehicle.cpp:1015</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3d4d97e9ca8cb2642001f8f61df500d5"><div class="ttname"><a href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">vehicle::last_turn</a></div><div class="ttdeci">units::angle last_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02293">vehicle.h:2293</a></div></div>
<div class="ttc" id="aclassvehicle_html_a42aa0af38e1a54ca47855c9231aa1457"><div class="ttname"><a href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">vehicle::insides_dirty</a></div><div class="ttdeci">bool insides_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02367">vehicle.h:2367</a></div></div>
<div class="ttc" id="aclassvehicle_html_a441fa41f264fb7bc45df81d71244a0d1"><div class="ttname"><a href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">vehicle::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02201">vehicle.h:2201</a></div></div>
<div class="ttc" id="aclassvehicle_html_a44bbf668cecc3943d0c682969e094ea5"><div class="ttname"><a href="classvehicle.html#a44bbf668cecc3943d0c682969e094ea5">vehicle::find_vehicles_to_rack</a></div><div class="ttdeci">std::vector&lt; rackable_vehicle &gt; find_vehicles_to_rack(int rack) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01528">vehicle.cpp:1528</a></div></div>
<div class="ttc" id="aclassvehicle_html_a450b5dd0e3c8e21773995962f381157b"><div class="ttname"><a href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">vehicle::has_security_working</a></div><div class="ttdeci">bool has_security_working() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01038">vehicle.cpp:1038</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4585389250d4d47d2bf487dbb610701b"><div class="ttname"><a href="classvehicle.html#a4585389250d4d47d2bf487dbb610701b">vehicle::power_to_energy_bat</a></div><div class="ttdeci">int power_to_energy_bat(units::power power, const time_duration &amp;d) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01146">vehicle.cpp:1146</a></div></div>
<div class="ttc" id="aclassvehicle_html_a45a1410dc6e76021f7ed69ba82e93fe8"><div class="ttname"><a href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">vehicle::transform_terrain</a></div><div class="ttdeci">void transform_terrain()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00992">vehicle_use.cpp:992</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4836138cb7d26641981bf4478f889012"><div class="ttname"><a href="classvehicle.html#a4836138cb7d26641981bf4478f889012">vehicle::get_non_fake_part</a></div><div class="ttdeci">int get_non_fake_part(int part_num) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08108">vehicle.cpp:8108</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4aed7fe17e4b040bda8b6abb431d3673"><div class="ttname"><a href="classvehicle.html#a4aed7fe17e4b040bda8b6abb431d3673">vehicle::add_item</a></div><div class="ttdeci">std::optional&lt; vehicle_stack::iterator &gt; add_item(vehicle_part &amp;vp, const item &amp;itm)</div><div class="ttdoc">Try to add an item to part's cargo.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05853">vehicle.cpp:5853</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02276">vehicle.h:2276</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4da300ded16cef32658e27074436163f"><div class="ttname"><a href="classvehicle.html#a4da300ded16cef32658e27074436163f">vehicle::play_music</a></div><div class="ttdeci">void play_music() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00937">vehicle_use.cpp:937</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4db57f7c62bbaeb0c4a9aad9267f0294"><div class="ttname"><a href="classvehicle.html#a4db57f7c62bbaeb0c4a9aad9267f0294">vehicle::engine_cold_factor</a></div><div class="ttdeci">double engine_cold_factor(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00575">vehicle_use.cpp:575</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5337fabbf67a2981c161b341b896999d"><div class="ttname"><a href="classvehicle.html#a5337fabbf67a2981c161b341b896999d">vehicle::lock</a></div><div class="ttdeci">void lock(int part_index)</div><div class="ttdoc">Locks a lockable, closed part at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01240">vehicle_use.cpp:1240</a></div></div>
<div class="ttc" id="aclassvehicle_html_a555d22bca89b0f11d8477c7df6711d24"><div class="ttname"><a href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24">vehicle::operate_scoop</a></div><div class="ttdeci">void operate_scoop()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01110">vehicle_use.cpp:1110</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5b4729ccb92667a95c0682c31b4d44c4"><div class="ttname"><a href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4">vehicle::use_monster_capture</a></div><div class="ttdeci">void use_monster_capture(int part, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01559">vehicle_use.cpp:1559</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6035e37524b3ea6157fd0f3bef16ca97"><div class="ttname"><a href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">vehicle::autopilot_patrol_check</a></div><div class="ttdeci">void autopilot_patrol_check()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00485">vehicle_use.cpp:485</a></div></div>
<div class="ttc" id="aclassvehicle_html_a61be41a90435acf77c1c078c2966643b"><div class="ttname"><a href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">vehicle::is_locked</a></div><div class="ttdeci">bool is_locked</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02356">vehicle.h:2356</a></div></div>
<div class="ttc" id="aclassvehicle_html_a62e8354926b0f973a2a0ec1db3deb997"><div class="ttname"><a href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">vehicle::coeff_air_changed</a></div><div class="ttdeci">bool coeff_air_changed</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02332">vehicle.h:2332</a></div></div>
<div class="ttc" id="aclassvehicle_html_a681502e6f751410d0ade8fbdea497c63"><div class="ttname"><a href="classvehicle.html#a681502e6f751410d0ade8fbdea497c63">vehicle::honk_horn</a></div><div class="ttdeci">void honk_horn() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00840">vehicle_use.cpp:840</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6bdd8fbcddc6e06fcd16160fec5776ed"><div class="ttname"><a href="classvehicle.html#a6bdd8fbcddc6e06fcd16160fec5776ed">vehicle::auto_select_fuel</a></div><div class="ttdeci">bool auto_select_fuel(vehicle_part &amp;vp)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00611">vehicle_use.cpp:611</a></div></div>
<div class="ttc" id="aclassvehicle_html_a70a0f1b85b1b3eed228b92d7b70334b1"><div class="ttname"><a href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">vehicle::camera_on</a></div><div class="ttdeci">bool camera_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02359">vehicle.h:2359</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7183b4a2eac4da678e316f5ca1d46e08"><div class="ttname"><a href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">vehicle::start_engines</a></div><div class="ttdeci">void start_engines(bool take_control=false, bool autodrive=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00778">vehicle_use.cpp:778</a></div></div>
<div class="ttc" id="aclassvehicle_html_a726572f5d8dc1c0123bc0ea2357499d9"><div class="ttname"><a href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">vehicle::smash_security_system</a></div><div class="ttdeci">void smash_security_system()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00438">vehicle_use.cpp:438</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7560cb88cfe42683ebe48ee1b0a237d4"><div class="ttname"><a href="classvehicle.html#a7560cb88cfe42683ebe48ee1b0a237d4">vehicle::build_interact_menu</a></div><div class="ttdeci">void build_interact_menu(veh_menu &amp;menu, const tripoint &amp;p, bool with_pickup)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01822">vehicle_use.cpp:1822</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7823f1d9260600bd8bd6b49a49f73e7c"><div class="ttname"><a href="classvehicle.html#a7823f1d9260600bd8bd6b49a49f73e7c">vehicle::use_vehicle_tool</a></div><div class="ttdeci">static bool use_vehicle_tool(vehicle &amp;veh, const tripoint &amp;vp_pos, const itype_id &amp;tool_type, bool no_invoke=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01781">vehicle_use.cpp:1781</a></div></div>
<div class="ttc" id="aclassvehicle_html_a789289c4179f7677e45cb100ff5ffb9a"><div class="ttname"><a href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">vehicle::global_square_location</a></div><div class="ttdeci">tripoint_abs_ms global_square_location() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03421">vehicle.cpp:3421</a></div></div>
<div class="ttc" id="aclassvehicle_html_a791413b7697a0ef434df0fe73d85b9fe"><div class="ttname"><a href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">vehicle::get_enabled_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_enabled_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are enabled and availabl...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03050">vehicle.cpp:3050</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7ad9e33e7768c469c58e7d9f3bb1fd83"><div class="ttname"><a href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">vehicle::discharge_battery</a></div><div class="ttdeci">int discharge_battery(int amount, bool apply_loss=true)</div><div class="ttdoc">Discharges batteries in connected vehicles/appliances.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05564">vehicle.cpp:5564</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7b8d76280c691a38d166a2d27ecf1a9f"><div class="ttname"><a href="classvehicle.html#a7b8d76280c691a38d166a2d27ecf1a9f">vehicle::engine_fuel_left</a></div><div class="ttdeci">int engine_fuel_left(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03576">vehicle.cpp:3576</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7d1af7145ff1eac8281e3282daae8efd"><div class="ttname"><a href="classvehicle.html#a7d1af7145ff1eac8281e3282daae8efd">vehicle::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00682">vehicle_move.cpp:682</a></div></div>
<div class="ttc" id="aclassvehicle_html_a86f77e344d17d7ec786d86f6a6c9a426"><div class="ttname"><a href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426">vehicle::can_close</a></div><div class="ttdeci">bool can_close(int part_index, Character &amp;who)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01252">vehicle_use.cpp:1252</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8b2f8d06e77ea427866b75587c863f1e"><div class="ttname"><a href="classvehicle.html#a8b2f8d06e77ea427866b75587c863f1e">vehicle::part_vpower_w</a></div><div class="ttdeci">units::power part_vpower_w(const vehicle_part &amp;vp, bool at_full_hp=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01077">vehicle.cpp:1077</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8c5c783aa99f2c3cab059be7a72e80c4"><div class="ttname"><a href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4">vehicle::use_harness</a></div><div class="ttdeci">void use_harness(int part, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01575">vehicle_use.cpp:1575</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8e8079a6591b3104191c881509f16d61"><div class="ttname"><a href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">vehicle::invalidate_mass</a></div><div class="ttdeci">void invalidate_mass()</div><div class="ttdoc">Mark mass caches and pivot cache as dirty.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07986">vehicle.cpp:7986</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8edd9a92bf0ae2e5306700a8a63aae7f"><div class="ttname"><a href="classvehicle.html#a8edd9a92bf0ae2e5306700a8a63aae7f">vehicle::part_epower</a></div><div class="ttdeci">units::power part_epower(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01137">vehicle.cpp:1137</a></div></div>
<div class="ttc" id="aclassvehicle_html_a949775a37c7daa7a6b67e510f548bca3"><div class="ttname"><a href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">vehicle::is_alarm_on</a></div><div class="ttdeci">bool is_alarm_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02358">vehicle.h:2358</a></div></div>
<div class="ttc" id="aclassvehicle_html_a953fed1abe9bacc2a7c98cee6425c5b2"><div class="ttname"><a href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">vehicle::is_patrolling</a></div><div class="ttdeci">bool is_patrolling</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02349">vehicle.h:2349</a></div></div>
<div class="ttc" id="aclassvehicle_html_a96182f6a7ea67ab885d73ddfe9b33dbf"><div class="ttname"><a href="classvehicle.html#a96182f6a7ea67ab885d73ddfe9b33dbf">vehicle::disable_smart_controller_if_needed</a></div><div class="ttdeci">void disable_smart_controller_if_needed()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05796">vehicle.cpp:5796</a></div></div>
<div class="ttc" id="aclassvehicle_html_a99a8fdcafffed2fd43ef9e663b1d446a"><div class="ttname"><a href="classvehicle.html#a99a8fdcafffed2fd43ef9e663b1d446a">vehicle::is_appliance</a></div><div class="ttdeci">bool is_appliance() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01445">vehicle.cpp:1445</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9d96053cfef6f4cb5db1b7c74c6da067"><div class="ttname"><a href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">vehicle::open</a></div><div class="ttdeci">void open(int part_index)</div><div class="ttdoc">Opens an openable part at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01195">vehicle_use.cpp:1195</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa0eb12133195f158fb7f903572e4afcc"><div class="ttname"><a href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc">vehicle::alarm</a></div><div class="ttdeci">void alarm()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01167">vehicle_use.cpp:1167</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa2123b10ad5b9401069f9b5774361878"><div class="ttname"><a href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">vehicle::mount_to_tripoint</a></div><div class="ttdeci">tripoint mount_to_tripoint(const point &amp;mount) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03326">vehicle.cpp:3326</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa33bd32301526128292da1ec7f78be55"><div class="ttname"><a href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">vehicle::speciality</a></div><div class="ttdeci">std::vector&lt; int &gt; speciality</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02188">vehicle.h:2188</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa3c434ad827415575b465480af310487"><div class="ttname"><a href="classvehicle.html#aa3c434ad827415575b465480af310487">vehicle::next_part_to_open</a></div><div class="ttdeci">int next_part_to_open(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to open at p's location.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02946">vehicle.cpp:2946</a></div></div>
<div class="ttc" id="aclassvehicle_html_aac4076aef5e2c53234a8da14fa7c0472"><div class="ttname"><a href="classvehicle.html#aac4076aef5e2c53234a8da14fa7c0472">vehicle::start_engine</a></div><div class="ttdeci">bool start_engine(vehicle_part &amp;vp)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00629">vehicle_use.cpp:629</a></div></div>
<div class="ttc" id="aclassvehicle_html_aafa5868126f645069bdda36536e901a9"><div class="ttname"><a href="classvehicle.html#aafa5868126f645069bdda36536e901a9">vehicle::refresh</a></div><div class="ttdeci">void refresh(bool remove_fakes=true)</div><div class="ttdoc">Refreshes all caches and refinds all parts.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06179">vehicle.cpp:6179</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab0ffd12faf770950ee7d2493ffaf9bd0"><div class="ttname"><a href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">vehicle::autopilot_on</a></div><div class="ttdeci">bool autopilot_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02360">vehicle.h:2360</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab475af4821e8a739f4fbd1a4185fb1f1"><div class="ttname"><a href="classvehicle.html#ab475af4821e8a739f4fbd1a4185fb1f1">vehicle::next_part_to_lock</a></div><div class="ttdeci">int next_part_to_lock(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to lock at part p's location.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02974">vehicle.cpp:2974</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab87891d82618518ddcbb7f084e567ee6"><div class="ttname"><a href="classvehicle.html#ab87891d82618518ddcbb7f084e567ee6">vehicle::backfire</a></div><div class="ttdeci">void backfire(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01064">vehicle.cpp:1064</a></div></div>
<div class="ttc" id="aclassvehicle_html_aba6e9fdfba42c0da3a77890b8dba5cd1"><div class="ttname"><a href="classvehicle.html#aba6e9fdfba42c0da3a77890b8dba5cd1">vehicle::lock_or_unlock</a></div><div class="ttdeci">void lock_or_unlock(int part_index, bool locking)</div><div class="ttdoc">Locks or unlocks a lockable door part at the specified index based on the @locking value passed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01350">vehicle_use.cpp:1350</a></div></div>
<div class="ttc" id="aclassvehicle_html_abb1d7445bb1b9448594d50402103bc7c"><div class="ttname"><a href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">vehicle::turrets_aim_and_fire_single</a></div><div class="ttdeci">void turrets_aim_and_fire_single()</div><div class="ttdoc">Select a single ready turret, aim it using the aiming UI and fire.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00325">turret.cpp:325</a></div></div>
<div class="ttc" id="aclassvehicle_html_abbc4051229bf116dfd03c53dcc4a0765"><div class="ttname"><a href="classvehicle.html#abbc4051229bf116dfd03c53dcc4a0765">vehicle::get_items</a></div><div class="ttdeci">vehicle_stack get_items(const vehicle_part &amp;vp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05922">vehicle.cpp:5922</a></div></div>
<div class="ttc" id="aclassvehicle_html_abbeca5eb3e4596f67b2b4ef6413a7bf6"><div class="ttname"><a href="classvehicle.html#abbeca5eb3e4596f67b2b4ef6413a7bf6">vehicle::precollision_on</a></div><div class="ttdeci">bool precollision_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02361">vehicle.h:2361</a></div></div>
<div class="ttc" id="aclassvehicle_html_abc3414338b99688ae524554b3bdff82e"><div class="ttname"><a href="classvehicle.html#abc3414338b99688ae524554b3bdff82e">vehicle::prepare_tool</a></div><div class="ttdeci">int prepare_tool(item &amp;tool) const</div><div class="ttdoc">Flags item tool with PSEUDO, if it has MOD pocket then a pseudo_magazine_mod is installed and a pseud...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01742">vehicle_use.cpp:1742</a></div></div>
<div class="ttc" id="aclassvehicle_html_abc3e3599949424184053bb279f706183"><div class="ttname"><a href="classvehicle.html#abc3e3599949424184053bb279f706183">vehicle::find_vehicles_to_unrack</a></div><div class="ttdeci">std::vector&lt; unrackable_vehicle &gt; find_vehicles_to_unrack(int rack) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01579">vehicle.cpp:1579</a></div></div>
<div class="ttc" id="aclassvehicle_html_abe5f5ade599d2cd543a3e3c3860bc051"><div class="ttname"><a href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">vehicle::tracking_on</a></div><div class="ttdeci">bool tracking_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02354">vehicle.h:2354</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac026aecb053a772b6d5902fe180166c5"><div class="ttname"><a href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">vehicle::next_part_to_close</a></div><div class="ttdeci">int next_part_to_close(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to close at p</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02928">vehicle.cpp:2928</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac1e6fe4cf22c08ceb542a7a3d515268b"><div class="ttname"><a href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">vehicle::coeff_air_dirty</a></div><div class="ttdeci">bool coeff_air_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02326">vehicle.h:2326</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac35c686d0d5bc43d6605036bcde5e62b"><div class="ttname"><a href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">vehicle::stop_engines</a></div><div class="ttdeci">void stop_engines()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00746">vehicle_use.cpp:746</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac522e55cee675f48861c5f931f8695df"><div class="ttname"><a href="classvehicle.html#ac522e55cee675f48861c5f931f8695df">vehicle::close</a></div><div class="ttdeci">void close(int part_index)</div><div class="ttdoc">Closes an openable part at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01210">vehicle_use.cpp:1210</a></div></div>
<div class="ttc" id="aclassvehicle_html_aca3ae013973cb492b14967e574189c1c"><div class="ttname"><a href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">vehicle::has_part</a></div><div class="ttdeci">bool has_part(const std::string &amp;flag, bool enabled=false) const</div><div class="ttdoc">Check if vehicle has at least one unbroken part with specified flag.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02827">vehicle.cpp:2827</a></div></div>
<div class="ttc" id="aclassvehicle_html_accf7c13036a2e8dc56d53c47f690bff0"><div class="ttname"><a href="classvehicle.html#accf7c13036a2e8dc56d53c47f690bff0">vehicle::smart_controller_cfg</a></div><div class="ttdeci">std::optional&lt; smart_controller_config &gt; smart_controller_cfg</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02226">vehicle.h:2226</a></div></div>
<div class="ttc" id="aclassvehicle_html_accfab81af66cd979bdfff4c39e5a3a8e"><div class="ttname"><a href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">vehicle::turret_query</a></div><div class="ttdeci">turret_data turret_query(vehicle_part &amp;pt)</div><div class="ttdoc">Get firing data for a turret.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00060">turret.cpp:60</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdb2ebf673a32f657ac9e29b842ee7f5"><div class="ttname"><a href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">vehicle::part</a></div><div class="ttdeci">vehicle_part &amp; part(int part_num)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08098">vehicle.cpp:8098</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdbb2eec025972d86be23e90e9e92d22"><div class="ttname"><a href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">vehicle::autodrive_local_target</a></div><div class="ttdeci">tripoint autodrive_local_target</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02244">vehicle.h:2244</a></div></div>
<div class="ttc" id="aclassvehicle_html_ace5c25f3faffd8848491570cfb89f086"><div class="ttname"><a href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">vehicle::disp_name</a></div><div class="ttdeci">std::string disp_name() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__display_8cpp_source.html#l00032">vehicle_display.cpp:32</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad0c66d2b639d76ea65f9a181954b7ed0"><div class="ttname"><a href="classvehicle.html#ad0c66d2b639d76ea65f9a181954b7ed0">vehicle::battery_left</a></div><div class="ttdeci">int64_t battery_left(bool apply_loss=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05507">vehicle.cpp:5507</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad38e05507056b3b3da5a5a5e482adba4"><div class="ttname"><a href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">vehicle::safe_velocity</a></div><div class="ttdeci">int safe_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03972">vehicle.cpp:3972</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad45ae53f6326f7fde4d8e59848470457"><div class="ttname"><a href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">vehicle::coord_translate</a></div><div class="ttdeci">point coord_translate(const point &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03301">vehicle.cpp:3301</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad5903e76e7d6113d396c9eb5eeef8f7a"><div class="ttname"><a href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">vehicle::toggle_autopilot</a></div><div class="ttdeci">void toggle_autopilot()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00495">vehicle_use.cpp:495</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad7ee1f39dba42cbe13f9afe26ffc8405"><div class="ttname"><a href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405">vehicle::use_washing_machine</a></div><div class="ttdeci">void use_washing_machine(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01418">vehicle_use.cpp:1418</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad86cc0a8a3062faefa39c24ca8e97fcb"><div class="ttname"><a href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb">vehicle::interact_with</a></div><div class="ttdeci">void interact_with(const tripoint &amp;p, bool with_pickup=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l02434">vehicle_use.cpp:2434</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad8a64866c703516f0746b4e6ee98370c"><div class="ttname"><a href="classvehicle.html#ad8a64866c703516f0746b4e6ee98370c">vehicle::part_with_feature</a></div><div class="ttdeci">int part_with_feature(const point &amp;pt, const std::string &amp;f, bool unbroken) const</div><div class="ttdoc">Returns index of part at mount point pt which has given f flag.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02785">vehicle.cpp:2785</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad92cd61244eadd6f9c62469a1632fcea"><div class="ttname"><a href="classvehicle.html#ad92cd61244eadd6f9c62469a1632fcea">vehicle::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01051">vehicle.cpp:1051</a></div></div>
<div class="ttc" id="aclassvehicle_html_adfbc0794c9bb9a5f1d75e1c52a2e561a"><div class="ttname"><a href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">vehicle::get_any_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_any_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and not removed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03037">vehicle.cpp:3037</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae3281409ce9ec7e878f9e22427e815e5"><div class="ttname"><a href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle::vehicle_noise</a></div><div class="ttdeci">unsigned char vehicle_noise</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02374">vehicle.h:2374</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae432d73f12b167105d62fdd832f9b30e"><div class="ttname"><a href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">vehicle::control_doors</a></div><div class="ttdeci">void control_doors()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00136">vehicle_use.cpp:136</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae58b6c97109417e1f6c7e85a92e5078b"><div class="ttname"><a href="classvehicle.html#ae58b6c97109417e1f6c7e85a92e5078b">vehicle::connect</a></div><div class="ttdeci">void connect(const tripoint &amp;source_pos, const tripoint &amp;target_pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00556">vehicle_use.cpp:556</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae8132c34a1ea24866889e6e599796adc"><div class="ttname"><a href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">vehicle::global_part_pos3</a></div><div class="ttdeci">tripoint global_part_pos3(const int &amp;index) const</div><div class="ttdoc">Get the coordinates of the studied part of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03442">vehicle.cpp:3442</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae9844787dd02657b4282b93f237c4987"><div class="ttname"><a href="classvehicle.html#ae9844787dd02657b4282b93f237c4987">vehicle::parts_at_relative</a></div><div class="ttdeci">std::vector&lt; int &gt; parts_at_relative(const point &amp;dp, bool use_cache, bool include_fake=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02569">vehicle.cpp:2569</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec747d255af237871b53f5869d43ed6f"><div class="ttname"><a href="classvehicle.html#aec747d255af237871b53f5869d43ed6f">vehicle::find_lines_of_parts</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; find_lines_of_parts(int part, const std::string &amp;flag) const</div><div class="ttdoc">Returns all parts in the vehicle that have the specified flag in their vpinfo and are on the same X-a...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03120">vehicle.cpp:3120</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec9a1faa6740b681867d48878e37d7bb"><div class="ttname"><a href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">vehicle::is_moving</a></div><div class="ttdeci">bool is_moving() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03728">vehicle.cpp:3728</a></div></div>
<div class="ttc" id="aclassvehicle_html_aee60cda2d8d84a6f1a912512fa523cba"><div class="ttname"><a href="classvehicle.html#aee60cda2d8d84a6f1a912512fa523cba">vehicle::turrets_aim_and_fire_all_manual</a></div><div class="ttdeci">bool turrets_aim_and_fire_all_manual(bool show_msg=false)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00355">turret.cpp:355</a></div></div>
<div class="ttc" id="aclassvehicle_html_af03022f10e08674024f2fb664624ca54"><div class="ttname"><a href="classvehicle.html#af03022f10e08674024f2fb664624ca54">vehicle::control_engines</a></div><div class="ttdeci">void control_engines()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00380">vehicle_use.cpp:380</a></div></div>
<div class="ttc" id="aclassvehicle_html_af1374dea5212a7c1311a1fd5bb3d1f0f"><div class="ttname"><a href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">vehicle::reload_seeds</a></div><div class="ttdeci">void reload_seeds(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00878">vehicle_use.cpp:878</a></div></div>
<div class="ttc" id="aclassvehicle_html_af215ec0fe4b4e7a8a8bf7e03e5874678"><div class="ttname"><a href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">vehicle::toggle_tracking</a></div><div class="ttdeci">void toggle_tracking()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00543">vehicle_use.cpp:543</a></div></div>
<div class="ttc" id="aclassvehicle_html_af221fa947705a0ddfad607245c03dcdd"><div class="ttname"><a href="classvehicle.html#af221fa947705a0ddfad607245c03dcdd">vehicle::damage_direct</a></div><div class="ttdeci">int damage_direct(map &amp;here, vehicle_part &amp;vp, int dmg, const damage_type_id &amp;type=damage_type_id(&quot;pure&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07457">vehicle.cpp:7457</a></div></div>
<div class="ttc" id="aclassvehicle_html_af54f1f29e7bed4134c59b4ab6fba3904"><div class="ttname"><a href="classvehicle.html#af54f1f29e7bed4134c59b4ab6fba3904">vehicle::unlink_cables</a></div><div class="ttdeci">void unlink_cables(const point &amp;mount, Character &amp;remover, bool unlink_items=false, bool unlink_tow_cables=false, bool unlink_power_cords=false)</div><div class="ttdoc">Disconnect cables attached to the specified mount point.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07025">vehicle.cpp:7025</a></div></div>
<div class="ttc" id="aclassvehicle_html_af5c4cd455d31d1a9377ddad223cafe44"><div class="ttname"><a href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">vehicle::cruise_velocity</a></div><div class="ttdeci">int cruise_velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02284">vehicle.h:2284</a></div></div>
<div class="ttc" id="aclassvehicle_html_afac2bfaf9d2b400e9a9e171624f74c40"><div class="ttname"><a href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">vehicle::parts</a></div><div class="ttdeci">std::vector&lt; vehicle_part &gt; parts</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02121">vehicle.h:2121</a></div></div>
<div class="ttc" id="aclassvehicle_html_afedb4619774754d0b805138c81be5f49"><div class="ttname"><a href="classvehicle.html#afedb4619774754d0b805138c81be5f49">vehicle::damage</a></div><div class="ttdeci">int damage(map &amp;here, int p, int dmg, const damage_type_id &amp;type=damage_type_id(&quot;bash&quot;), bool aimed=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07143">vehicle.cpp:7143</a></div></div>
<div class="ttc" id="aclassvisitable_html_a3e80572268abd951cf016d275febe4e6"><div class="ttname"><a href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">visitable::items_with</a></div><div class="ttdeci">std::vector&lt; const item * &gt; items_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00330">visitable.cpp:330</a></div></div>
<div class="ttc" id="aclassvpart__info_html"><div class="ttname"><a href="classvpart__info.html">vpart_info</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00239">veh_type.h:240</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a092286f8dfa6c5c57b5c8244ffe37c41"><div class="ttname"><a href="classvpart__info.html#a092286f8dfa6c5c57b5c8244ffe37c41">vpart_info::get_pseudo_tools</a></div><div class="ttdeci">std::set&lt; std::pair&lt; itype_id, int &gt; &gt; get_pseudo_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l01131">veh_type.cpp:1131</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a160cad4578895aa1f7006436dd57f5cd"><div class="ttname"><a href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">vpart_info::bonus</a></div><div class="ttdeci">int bonus</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00445">veh_type.h:445</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a7014b747f41e22005a458060fc85a5ad"><div class="ttname"><a href="classvpart__info.html#a7014b747f41e22005a458060fc85a5ad">vpart_info::engine_info</a></div><div class="ttdeci">std::optional&lt; vpslot_engine &gt; engine_info</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00296">veh_type.h:296</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aba80d384b977306eb749c9c9958a62a7"><div class="ttname"><a href="classvpart__info.html#aba80d384b977306eb749c9c9958a62a7">vpart_info::id</a></div><div class="ttdeci">vpart_id id</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00242">veh_type.h:242</a></div></div>
<div class="ttc" id="aclassvpart__info_html_abc2abb40bda9593afb1bbb2e897261d0"><div class="ttname"><a href="classvpart__info.html#abc2abb40bda9593afb1bbb2e897261d0">vpart_info::toolkit_info</a></div><div class="ttdeci">std::optional&lt; vpslot_toolkit &gt; toolkit_info</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00295">veh_type.h:295</a></div></div>
<div class="ttc" id="aclassvpart__info_html_ae9c50d26b3cc88604ae85573ee6599cd"><div class="ttname"><a href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">vpart_info::fuel_type</a></div><div class="ttdeci">itype_id fuel_type</div><div class="ttdoc">Fuel type of engine or tank.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00382">veh_type.h:382</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aea0fdb1ef9041e28d7856afae97dcc87"><div class="ttname"><a href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">vpart_info::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00256">veh_type.h:256</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aeb9e00627b8cb80d28fb1419e7f0928a"><div class="ttname"><a href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">vpart_info::durability</a></div><div class="ttdeci">int durability</div><div class="ttdoc">Maximum damage part can sustain before being destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00409">veh_type.h:409</a></div></div>
<div class="ttc" id="aclassvpart__position_html"><div class="ttname"><a href="classvpart__position.html">vpart_position</a></div><div class="ttdoc">Reference to a position (a point) of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00043">vpart_position.h:44</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a1875cbc210f80e51cda83c9d1c9c3f74"><div class="ttname"><a href="classvpart__position.html#a1875cbc210f80e51cda83c9d1c9c3f74">vpart_position::get_tools</a></div><div class="ttdeci">std::map&lt; item, int &gt; get_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02645">vehicle.cpp:2645</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a2ef88792023cde20d4c80ac82a57b1ab"><div class="ttname"><a href="classvpart__position.html#a2ef88792023cde20d4c80ac82a57b1ab">vpart_position::form_inventory</a></div><div class="ttdeci">void form_inventory(inventory &amp;inv) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01696">vehicle_use.cpp:1696</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a46700b8fb722ddb6c104f114e820c9b8"><div class="ttname"><a href="classvpart__position.html#a46700b8fb722ddb6c104f114e820c9b8">vpart_position::mount</a></div><div class="ttdeci">point mount() const</div><div class="ttdoc">Returns the mount point: the point in the vehicles own coordinate system.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07808">vehicle.cpp:7808</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a50d042495c3b69f084da4de6a8b04bbe"><div class="ttname"><a href="classvpart__position.html#a50d042495c3b69f084da4de6a8b04bbe">vpart_position::part_with_tool</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_tool(const itype_id &amp;tool_type) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02627">vehicle.cpp:2627</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a75d50308cc415fe2468c79d7fd76e96e"><div class="ttname"><a href="classvpart__position.html#a75d50308cc415fe2468c79d7fd76e96e">vpart_position::vehicle</a></div><div class="ttdeci">::vehicle &amp; vehicle() const</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00052">vpart_position.h:52</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a89192e86585711fa4c803a48d9f5de29"><div class="ttname"><a href="classvpart__position.html#a89192e86585711fa4c803a48d9f5de29">vpart_position::part_index</a></div><div class="ttdeci">size_t part_index() const</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00056">vpart_position.h:56</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a94bbba6ce79073316fdb7fea7c6d8a60"><div class="ttname"><a href="classvpart__position.html#a94bbba6ce79073316fdb7fea7c6d8a60">vpart_position::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07817">vehicle.cpp:7817</a></div></div>
<div class="ttc" id="aclassvpart__position_html_ab1077430678db572f2681f6cbee1dcba"><div class="ttname"><a href="classvpart__position.html#ab1077430678db572f2681f6cbee1dcba">vpart_position::avail_part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; avail_part_with_feature(const std::string &amp;f) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02685">vehicle.cpp:2685</a></div></div>
<div class="ttc" id="aclassvpart__position_html_acdeb84d4dd0494cf14b1c0138e9b2a1c"><div class="ttname"><a href="classvpart__position.html#acdeb84d4dd0494cf14b1c0138e9b2a1c">vpart_position::part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02665">vehicle.cpp:2665</a></div></div>
<div class="ttc" id="aclassvpart__reference_html"><div class="ttname"><a href="classvpart__reference.html">vpart_reference</a></div><div class="ttdoc">This is a wrapper over a vehicle pointer and a reference to a part of it.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00153">vpart_position.h:154</a></div></div>
<div class="ttc" id="aclassvpart__reference_html_a7c5f0276964121404ca463b41254288c"><div class="ttname"><a href="classvpart__reference.html#a7c5f0276964121404ca463b41254288c">vpart_reference::part</a></div><div class="ttdeci">vehicle_part &amp; part() const</div><div class="ttdoc">Yields the vehicle_part object referenced by this.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l07780">vehicle.cpp:7780</a></div></div>
<div class="ttc" id="aclasszone__manager_html"><div class="ttname"><a href="classzone__manager.html">zone_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00512">clzones.h:513</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a54609d51d21bd8f370ee8b59525eb750"><div class="ttname"><a href="classzone__manager.html#a54609d51d21bd8f370ee8b59525eb750">zone_manager::get_manager</a></div><div class="ttdeci">static zone_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00550">clzones.h:550</a></div></div>
<div class="ttc" id="aclasszone__manager_html_aff01780bd615c3b526e071efdce01b70"><div class="ttname"><a href="classzone__manager.html#aff01780bd615c3b526e071efdce01b70">zone_manager::has_near</a></div><div class="ttdeci">bool has_near(const zone_type_id &amp;type, const tripoint_abs_ms &amp;where, int range=MAX_DISTANCE, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l01011">clzones.cpp:1011</a></div></div>
<div class="ttc" id="aclzones_8h_html"><div class="ttname"><a href="clzones_8h.html">clzones.h</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a936ada358907519ef76966d7774212e4"><div class="ttname"><a href="color_8cpp.html#a936ada358907519ef76966d7774212e4">get_all_colors</a></div><div class="ttdeci">color_manager &amp; get_all_colors()</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00043">color.cpp:43</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="acolor_8h_html_a6c870a877c442090edead1e229b3953d"><div class="ttname"><a href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a></div><div class="ttdeci">#define c_pink</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a38e880e550bb0688dea9353138da8683"><div class="ttname"><a href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::reality_bubble, coords::ms &gt; tripoint_bub_ms</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00716">coordinates.h:716</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="acreature__tracker_8h_html"><div class="ttname"><a href="creature__tracker_8h.html">creature_tracker.h</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a></div><div class="ttdeci">@ vehicle_port</div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00010">enums.h:10</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="agame_8cpp_html_a20e1e24b746d8844d2e554086ba3b3bb"><div class="ttname"><a href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13866">game.cpp:13866</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3b81841aab42975add2ee3525f48058a"><div class="ttname"><a href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a></div><div class="ttdeci">constexpr int OVERMAP_LAYERS</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00077">game_constants.h:77</a></div></div>
<div class="ttc" id="agame__inventory_8h_html"><div class="ttname"><a href="game__inventory_8h.html">game_inventory.h</a></div></div>
<div class="ttc" id="agates_8h_html"><div class="ttname"><a href="gates_8h.html">gates.h</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="aiexamine_8h_html"><div class="ttname"><a href="iexamine_8h.html">iexamine.h</a></div></div>
<div class="ttc" id="ainventory_8h_html"><div class="ttname"><a href="inventory_8h.html">inventory.h</a></div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03267">item.h:3267</a></div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aiuse_8h_html"><div class="ttname"><a href="iuse_8h.html">iuse.h</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="amake__static_8h_html"><div class="ttname"><a href="make__static_8h.html">make_static.h</a></div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amap__iterator_8h_html"><div class="ttname"><a href="map__iterator_8h.html">map_iterator.h</a></div></div>
<div class="ttc" id="amapdata_8h_html"><div class="ttname"><a href="mapdata_8h.html">mapdata.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a">ter_furn_flag::TFLAG_SEALED</a></div><div class="ttdeci">@ TFLAG_SEALED</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f">ter_furn_flag::TFLAG_PLOWABLE</a></div><div class="ttdeci">@ TFLAG_PLOWABLE</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_ae50076ab819eab792b11f8b67d4facc0"><div class="ttname"><a href="math__parser__func_8h.html#ae50076ab819eab792b11f8b67d4facc0">rand</a></div><div class="ttdeci">double rand(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00056">math_parser_func.h:56</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amtype_8cpp_html_a7a0a5fdb5cfeee7154a7ad7b3317252d"><div class="ttname"><a href="mtype_8cpp.html#a7a0a5fdb5cfeee7154a7ad7b3317252d">mon_flag_PET_HARNESSABLE</a></div><div class="ttdeci">mon_flag_id mon_flag_PET_HARNESSABLE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00127">mtype.cpp:127</a></div></div>
<div class="ttc" id="amtype_8cpp_html_ada7c9e7242ae6cab937fdeec0513f6d8"><div class="ttname"><a href="mtype_8cpp.html#ada7c9e7242ae6cab937fdeec0513f6d8">mon_flag_PET_MOUNTABLE</a></div><div class="ttdeci">mon_flag_id mon_flag_PET_MOUNTABLE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00128">mtype.cpp:128</a></div></div>
<div class="ttc" id="amtype_8h_html"><div class="ttname"><a href="mtype_8h.html">mtype.h</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00753">calendar.cpp:753</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a1cc72568f1ce0f6bfe45b254c87b32f3"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a1cc72568f1ce0f6bfe45b254c87b32f3">debugmode::DF_VEHICLE</a></div><div class="ttdeci">@ DF_VEHICLE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00277">debug.h:277</a></div></div>
<div class="ttc" id="anamespacedoors_html_ac942d0e590fade74ac316bd18fae5357"><div class="ttname"><a href="namespacedoors.html#ac942d0e590fade74ac316bd18fae5357">doors::unlock_door</a></div><div class="ttdeci">bool unlock_door(map &amp;m, Creature &amp;who, const tripoint_bub_ms &amp;lockp)</div><div class="ttdoc">Unlocks a door at &quot;lockp&quot; as &quot;who.&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="gates_8cpp_source.html#l00409">gates.cpp:409</a></div></div>
<div class="ttc" id="anamespacedoors_html_ae7c1bfb249698cfb947810fb98b62f1e"><div class="ttname"><a href="namespacedoors.html#ae7c1bfb249698cfb947810fb98b62f1e">doors::lock_door</a></div><div class="ttdeci">bool lock_door(map &amp;m, Creature &amp;who, const tripoint_bub_ms &amp;lockp)</div><div class="ttdoc">Locks a door at &quot;lockp&quot; as &quot;who.&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="gates_8cpp_source.html#l00356">gates.cpp:356</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a757499c2bf4f0f52d64952a30d7cc64f"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a757499c2bf4f0f52d64952a30d7cc64f">game_menus::inv::veh_tool_attach</a></div><div class="ttdeci">item_location veh_tool_attach(Character &amp;you, const std::string &amp;vp_name, const std::set&lt; itype_id &gt; &amp;allowed_types)</div><div class="ttdoc">Choosing an item to attach to a vehicle tool station.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02178">game_inventory.cpp:2178</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a061412764e0f7a31458bb8fcaa751e71"><div class="ttname"><a href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">iexamine::locked_object</a></div><div class="ttdeci">void locked_object(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">Checks whether PC has a crowbar then calls iuse.crowbar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01826">iexamine.cpp:1826</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a063625d8728319f6e54a792b609f1719"><div class="ttname"><a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a></div><div class="ttdeci">std::list&lt; item &gt; get_harvest_items(const itype &amp;type, int plant_count, int seed_count, bool byproducts)</div><div class="ttdoc">Items that appear when a generic plant is harvested.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02592">iexamine.cpp:2592</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a52eaa83fb4f8dacccac4a5e736cf3fe1"><div class="ttname"><a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a></div><div class="ttdeci">std::vector&lt; seed_tuple &gt; get_seed_entries(const std::vector&lt; item * &gt; &amp;seed_inv)</div><div class="ttdoc">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02476">iexamine.cpp:2476</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a8076e42db14f124567108b5754caa31a"><div class="ttname"><a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a></div><div class="ttdeci">int query_seed(const std::vector&lt; seed_tuple &gt; &amp;seed_entries)</div><div class="ttdoc">Choose seed for planting.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02502">iexamine.cpp:2502</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a9bc39070b625f5b003d3401d46bf2a0c"><div class="ttname"><a href="namespaceiexamine.html#a9bc39070b625f5b003d3401d46bf2a0c">iexamine::workbench_internal</a></div><div class="ttdeci">void workbench_internal(Character &amp;you, const tripoint &amp;examp, const std::optional&lt; vpart_reference &gt; &amp;part)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l07170">iexamine.cpp:7170</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1cb12a40a0a229ae9901588301ba37c5"><div class="ttname"><a href="namespaceiuse.html#a1cb12a40a0a229ae9901588301ba37c5">iuse::play_music</a></div><div class="ttdeci">void play_music(Character *p, const tripoint &amp;source, int volume, int max_morale)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03773">iuse.cpp:3773</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a85b7f720ce7cd6c3b8cc00791a8a46e0"><div class="ttname"><a href="namespaceiuse.html#a85b7f720ce7cd6c3b8cc00791a8a46e0">iuse::portable_game</a></div><div class="ttdeci">std::optional&lt; int &gt; portable_game(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04023">iuse.cpp:4023</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae81079151986b7a91874751dae6720a5"><div class="ttname"><a href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">iuse::seed</a></div><div class="ttdeci">std::optional&lt; int &gt; seed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05301">iuse.cpp:5301</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_ae1d5d63f7372f4fb16a24624d0434fcd"><div class="ttname"><a href="namespaceliquid__handler.html#ae1d5d63f7372f4fb16a24624d0434fcd">liquid_handler::handle_liquid</a></div><div class="ttdeci">bool handle_liquid(item &amp;liquid, const item *const source, const int radius, const tripoint *const source_pos, const vehicle *const source_veh, const int part_num, const monster *const source_mon)</div><div class="ttdoc">This may start a player activity if either source_pos or source_veh is not null.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00459">handle_liquid.cpp:459</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="anamespacemusic_html_a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220"><div class="ttname"><a href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">music::title</a></div><div class="ttdeci">@ title</div><div class="ttdef"><b>Definition:</b> <a href="music_8h_source.html#l00014">music.h:14</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="anamespacesfx_html_a03291faa7dbf7c6a4c0aa23c160cd33f"><div class="ttname"><a href="namespacesfx.html#a03291faa7dbf7c6a4c0aa23c160cd33f">sfx::do_vehicle_engine_sfx</a></div><div class="ttdeci">void do_vehicle_engine_sfx()</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l02014">sounds.cpp:2014</a></div></div>
<div class="ttc" id="anamespacesfx_html_a6f93b4c27e459e0d1c174674586e9c6b"><div class="ttname"><a href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a></div><div class="ttdeci">bool has_variant_sound(const std::string &amp;id, const std::string &amp;variant)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l02027">sounds.cpp:2027</a></div></div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01999">sounds.cpp:1999</a></div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00318">sounds.cpp:318</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a></div><div class="ttdeci">@ music</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a></div><div class="ttdeci">@ alarm</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a></div><div class="ttdeci">@ movement</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00328">units.h:328</a></div></div>
<div class="ttc" id="anamespaceunits_html_a76c965afaad76c83c6caa338d1eb6777"><div class="ttname"><a href="namespaceunits.html#a76c965afaad76c83c6caa338d1eb6777">units::to_watt</a></div><div class="ttdeci">constexpr value_type to_watt(const quantity&lt; value_type, power_in_milliwatt_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00626">units.h:626</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae31e6d9c71949a72ee41be4be6f1afcd"><div class="ttname"><a href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00440">units.h:440</a></div></div>
<div class="ttc" id="aomdata_8h_html_ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c"><div class="ttname"><a href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">oter_flags::water</a></div><div class="ttdeci">@ water</div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="aplayer__activity_8h_html"><div class="ttname"><a href="player__activity_8h.html">player_activity.h</a></div></div>
<div class="ttc" id="apocket__type_8h_html"><div class="ttname"><a href="pocket__type_8h.html">pocket_type.h</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a></div><div class="ttdeci">@ MOD</div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00250">point.h:250</a></div></div>
<div class="ttc" id="apoint_8h_html_a531b7c882d6066241b7f93268af3e68b"><div class="ttname"><a href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a></div><div class="ttdeci">const std::array&lt; tripoint, 8 &gt; eight_horizontal_neighbors</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00354">point.h:354</a></div></div>
<div class="ttc" id="arequirements_8h_html"><div class="ttname"><a href="requirements_8h.html">requirements.h</a></div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="arng_8h_html_a4fdc7c520170d091a7d541ede1c93d48"><div class="ttname"><a href="rng_8h.html#a4fdc7c520170d091a7d541ede1c93d48">random_entry_ref</a></div><div class="ttdeci">std::enable_if_t&lt; !is_std_array&lt; C &gt;::value, const V &amp; &gt; random_entry_ref(const C &amp;container)</div><div class="ttdoc">Same as above, but with a statically allocated default value (using the default constructor).</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00165">rng.h:165</a></div></div>
<div class="ttc" id="asmart__controller__ui_8h_html"><div class="ttname"><a href="smart__controller__ui_8h.html">smart_controller_ui.h</a></div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="asounds_8h_html"><div class="ttname"><a href="sounds_8h.html">sounds.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astring__input__popup_8h_html"><div class="ttname"><a href="string__input__popup_8h.html">string_input_popup.h</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01186">itype.h:1186</a></div></div>
<div class="ttc" id="astructitype_html_a582ad2fbe9e0c895585006a71cd351ff"><div class="ttname"><a href="structitype.html#a582ad2fbe9e0c895585006a71cd351ff">itype::tool_slot_first_ammo</a></div><div class="ttdeci">const itype_id &amp; tool_slot_first_ammo() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00416">itype.cpp:416</a></div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
<div class="ttc" id="astructitype_html_a76600c0d6a88c8d983838f0df2276212"><div class="ttname"><a href="structitype.html#a76600c0d6a88c8d983838f0df2276212">itype::invoke</a></div><div class="ttdeci">std::optional&lt; int &gt; invoke(Character *p, item &amp;it, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00195">itype.cpp:195</a></div></div>
<div class="ttc" id="astructitype_html_a7cb80d77696cefb42ac6e75756b47e60"><div class="ttname"><a href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">itype::ammo</a></div><div class="ttdeci">cata::value_ptr&lt; islot_ammo &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01212">itype.h:1212</a></div></div>
<div class="ttc" id="astructitype_html_a7ff45d94507fdbf7369ae269a0f1e52b"><div class="ttname"><a href="structitype.html#a7ff45d94507fdbf7369ae269a0f1e52b">itype::has_use</a></div><div class="ttdeci">bool has_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00159">itype.cpp:159</a></div></div>
<div class="ttc" id="astructitype_html_a953828c9c01185fef0f619ecdcd7f3b1"><div class="ttname"><a href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">itype::charges_to_use</a></div><div class="ttdeci">int charges_to_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00139">itype.cpp:139</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01420">itype.h:1420</a></div></div>
<div class="ttc" id="astructmtype_html_a541f9bf8c2e84856ea34db43f88991b3"><div class="ttname"><a href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">mtype::bodytype</a></div><div class="ttdeci">bodytype_id bodytype</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00355">mtype.h:355</a></div></div>
<div class="ttc" id="astructnew__field_html"><div class="ttname"><a href="structnew__field.html">new_field</a></div><div class="ttdef"><b>Definition:</b> <a href="event__statistics_8cpp_source.html#l00269">event_statistics.cpp:269</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructpoint_html_a9404b750fdf6bffb8aeddf8b298ab8f6"><div class="ttname"><a href="structpoint.html#a9404b750fdf6bffb8aeddf8b298ab8f6">point::rotate</a></div><div class="ttdeci">point rotate(int turns, const point &amp;dim={ 1, 1 }) const</div><div class="ttdoc">Rotate point clockwise.</div><div class="ttdef"><b>Definition:</b> <a href="point_8cpp_source.html#l00024">point.cpp:24</a></div></div>
<div class="ttc" id="astructsmart__controller__config_html"><div class="ttname"><a href="structsmart__controller__config.html">smart_controller_config</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00130">vehicle.h:130</a></div></div>
<div class="ttc" id="astructsmart__controller__settings_html"><div class="ttname"><a href="structsmart__controller__settings.html">smart_controller_settings</a></div><div class="ttdoc">Configurable settings for the Smart Controller.</div><div class="ttdef"><b>Definition:</b> <a href="smart__controller__ui_8h_source.html#l00012">smart_controller_ui.h:12</a></div></div>
<div class="ttc" id="astructsmart__controller__settings_html_a6fb234cec125271a82348abd50b24ff6"><div class="ttname"><a href="structsmart__controller__settings.html#a6fb234cec125271a82348abd50b24ff6">smart_controller_settings::enabled</a></div><div class="ttdeci">bool &amp; enabled</div><div class="ttdef"><b>Definition:</b> <a href="smart__controller__ui_8h_source.html#l00013">smart_controller_ui.h:13</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructtripoint_html_adf8e33de958b8f34a7c4ffff8cc87b02"><div class="ttname"><a href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">tripoint::to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8cpp_source.html#l00079">point.cpp:79</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a00631f25b9799a462b4d6b403e4f6c62"><div class="ttname"><a href="structveh__menu__item.html#a00631f25b9799a462b4d6b403e4f6c62">veh_menu_item::enable</a></div><div class="ttdeci">veh_menu_item &amp; enable(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00174">veh_utils.cpp:174</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a0bba8f66b1974099aa32ab1c8bb14f52"><div class="ttname"><a href="structveh__menu__item.html#a0bba8f66b1974099aa32ab1c8bb14f52">veh_menu_item::skip_theft_check</a></div><div class="ttdeci">veh_menu_item &amp; skip_theft_check(bool skip_theft_check=true)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00180">veh_utils.cpp:180</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a1dc59a6abe51cea70ff47f05f78a7731"><div class="ttname"><a href="structveh__menu__item.html#a1dc59a6abe51cea70ff47f05f78a7731">veh_menu_item::on_submit</a></div><div class="ttdeci">veh_menu_item &amp; on_submit(const std::function&lt; void()&gt; &amp;on_submit)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00228">veh_utils.cpp:228</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a1df889c18166c8d5b87735ea87ae0cde"><div class="ttname"><a href="structveh__menu__item.html#a1df889c18166c8d5b87735ea87ae0cde">veh_menu_item::location</a></div><div class="ttdeci">veh_menu_item &amp; location(const std::optional&lt; tripoint &gt; &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00240">veh_utils.cpp:240</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a5f4f39c1ad73a2a755b27368b90839ed"><div class="ttname"><a href="structveh__menu__item.html#a5f4f39c1ad73a2a755b27368b90839ed">veh_menu_item::skip_locked_check</a></div><div class="ttdeci">veh_menu_item &amp; skip_locked_check(bool skip_locked_check=true)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00186">veh_utils.cpp:186</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a74eaa5207895c5014aa730385870f9be"><div class="ttname"><a href="structveh__menu__item.html#a74eaa5207895c5014aa730385870f9be">veh_menu_item::hotkey_auto</a></div><div class="ttdeci">veh_menu_item &amp; hotkey_auto()</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00221">veh_utils.cpp:221</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_a9ab7f086898c639939bff90ab9c8fc10"><div class="ttname"><a href="structveh__menu__item.html#a9ab7f086898c639939bff90ab9c8fc10">veh_menu_item::hotkey</a></div><div class="ttdeci">veh_menu_item &amp; hotkey(char hotkey_char)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00207">veh_utils.cpp:207</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_af4dcb11cefcdb332bad1d0b5e8e3d783"><div class="ttname"><a href="structveh__menu__item.html#af4dcb11cefcdb332bad1d0b5e8e3d783">veh_menu_item::keep_menu_open</a></div><div class="ttdeci">veh_menu_item &amp; keep_menu_open(bool keep_menu_open=true)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00234">veh_utils.cpp:234</a></div></div>
<div class="ttc" id="astructveh__menu__item_html_af72e088ca1fbf3dc1c636a148c9b082e"><div class="ttname"><a href="structveh__menu__item.html#af72e088ca1fbf3dc1c636a148c9b082e">veh_menu_item::desc</a></div><div class="ttdeci">veh_menu_item &amp; desc(const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="veh__utils_8cpp_source.html#l00168">veh_utils.cpp:168</a></div></div>
<div class="ttc" id="astructvehicle_1_1rackable__vehicle_html"><div class="ttname"><a href="structvehicle_1_1rackable__vehicle.html">vehicle::rackable_vehicle</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01041">vehicle.h:1041</a></div></div>
<div class="ttc" id="astructvehicle_1_1unrackable__vehicle_html"><div class="ttname"><a href="structvehicle_1_1unrackable__vehicle.html">vehicle::unrackable_vehicle</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01047">vehicle.h:1047</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00254">vehicle.h:254</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a002a1023cd1a96d43556a1b912ebd27b"><div class="ttname"><a href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">vehicle_part::info</a></div><div class="ttdeci">const vpart_info &amp; info() const</div><div class="ttdoc">Get part definition common to all parts of this type.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00623">vehicle_part.cpp:623</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a02e888cd272e98d30098629ad8846f45"><div class="ttname"><a href="structvehicle__part.html#a02e888cd272e98d30098629ad8846f45">vehicle_part::fake_part_to</a></div><div class="ttdeci">int fake_part_to</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00573">vehicle.h:573</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1c555386664b5d61de6bac27572c5c4f"><div class="ttname"><a href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">vehicle_part::name</a></div><div class="ttdeci">std::string name(bool with_prefix=true) const</div><div class="ttdoc">Translated name of a part inclusive of any current status effects with_prefix as true indicates the d...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00113">vehicle_part.cpp:113</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a2340e7c1ece626b907ffcc036774b2ca"><div class="ttname"><a href="structvehicle__part.html#a2340e7c1ece626b907ffcc036774b2ca">vehicle_part::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">door is locked</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00516">vehicle.h:516</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a272061805f6f4af210b3506491478755"><div class="ttname"><a href="structvehicle__part.html#a272061805f6f4af210b3506491478755">vehicle_part::has_fault_flag</a></div><div class="ttdeci">bool has_fault_flag(const std::string &amp;searched_flag) const</div><div class="ttdoc">Does this vehicle part have a fault with this flag.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00506">vehicle_part.cpp:506</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a27a7cba7268cb7d3550ed2b7c9adc323"><div class="ttname"><a href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">vehicle_part::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00507">vehicle.h:507</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4b540ba2ddca7ce064674398be48ae68"><div class="ttname"><a href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">vehicle_part::open</a></div><div class="ttdeci">bool open</div><div class="ttdoc">door is open</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00513">vehicle.h:513</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4e3ef0215ad9ed276d592161518b7f0b"><div class="ttname"><a href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">vehicle_part::is_available</a></div><div class="ttdeci">bool is_available(bool carried=true) const</div><div class="ttdoc">parts are available if they aren't unavailable</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00218">vehicle_part.cpp:218</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a5122e284fbcf0f14f0e6022e01b5b574"><div class="ttname"><a href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">vehicle_part::base</a></div><div class="ttdeci">item base</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00541">vehicle.h:541</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a5dcc5fea1cf3a7b5cdc43c977cf6ddec"><div class="ttname"><a href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">vehicle_part::faults_potential</a></div><div class="ttdeci">std::set&lt; fault_id &gt; faults_potential() const</div><div class="ttdoc">Faults which could potentially occur with this part (if any)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00511">vehicle_part.cpp:511</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a72c9606de83a919a30468273ec6fdb0b"><div class="ttname"><a href="structvehicle__part.html#a72c9606de83a919a30468273ec6fdb0b">vehicle_part::is_fake</a></div><div class="ttdeci">bool is_fake</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00571">vehicle.h:571</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a8b6c8fd3924772afdd6acb0398ca059a"><div class="ttname"><a href="structvehicle__part.html#a8b6c8fd3924772afdd6acb0398ca059a">vehicle_part::damage_percent</a></div><div class="ttdeci">double damage_percent() const</div><div class="ttdoc">Current part damage as a percentage of maximum, with 0.0 being perfect condition.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00194">vehicle_part.cpp:194</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a98ee54e00ccccb0f28b736cc67cbd193"><div class="ttname"><a href="structvehicle__part.html#a98ee54e00ccccb0f28b736cc67cbd193">vehicle_part::is_unavailable</a></div><div class="ttdeci">bool is_unavailable(bool carried=true) const</div><div class="ttdoc">parts are unavailable if broken or if carried is true, if they have the CARRIED flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00213">vehicle_part.cpp:213</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a9c6bf106558c9ed00536e2d7cb0e862d"><div class="ttname"><a href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">vehicle_part::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining() const</div><div class="ttdoc">Amount of fuel, charges or ammunition currently contained by a part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00298">vehicle_part.cpp:298</a></div></div>
<div class="ttc" id="astructvehicle__part_html_aae847d69aa5295112c72a1cf99f307d6"><div class="ttname"><a href="structvehicle__part.html#aae847d69aa5295112c72a1cf99f307d6">vehicle_part::tools</a></div><div class="ttdeci">std::vector&lt; item &gt; tools</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00543">vehicle.h:543</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ab16185500ef5d69edf04ffc7df422049"><div class="ttname"><a href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">vehicle_part::ammo_set</a></div><div class="ttdeci">int ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Set fuel, charges or ammunition for this part removing any existing ammo.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00315">vehicle_part.cpp:315</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ab1d4873f1384392595a1e01c463543a5"><div class="ttname"><a href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">vehicle_part::removed</a></div><div class="ttdeci">bool removed</div><div class="ttdoc">true if this part is removed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00506">vehicle.h:506</a></div></div>
<div class="ttc" id="astructvehicle__part_html_abd5713514b5ab3a5f8a7aea140a22406"><div class="ttname"><a href="structvehicle__part.html#abd5713514b5ab3a5f8a7aea140a22406">vehicle_part::fuel_set</a></div><div class="ttdeci">bool fuel_set(const itype_id &amp;fuel)</div><div class="ttdoc">Set an engine to use a different type of fuel.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00231">vehicle_part.cpp:231</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ac1400abb20165723a376e5778bc12c24"><div class="ttname"><a href="structvehicle__part.html#ac1400abb20165723a376e5778bc12c24">vehicle_part::fake_part_at</a></div><div class="ttdeci">int fake_part_at</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00576">vehicle.h:576</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ac6e2dfa7178b8bed91baea3543961a86"><div class="ttname"><a href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">vehicle_part::mount</a></div><div class="ttdeci">point mount</div><div class="ttdoc">mount point: x is on the forward/backward axis, y is on the left/right axis</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00447">vehicle.h:447</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ace4e784a62a3d33ee3636917b907bf61"><div class="ttname"><a href="structvehicle__part.html#ace4e784a62a3d33ee3636917b907bf61">vehicle_part::has_fake</a></div><div class="ttdeci">bool has_fake</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00575">vehicle.h:575</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad32ebfa9316b0c3baaddea4efa9b7d96"><div class="ttname"><a href="structvehicle__part.html#ad32ebfa9316b0c3baaddea4efa9b7d96">vehicle_part::fuel_current</a></div><div class="ttdeci">itype_id fuel_current() const</div><div class="ttdoc">Type of fuel used by an engine.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00223">vehicle_part.cpp:223</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad81c11110f4a172253a99fd970046224"><div class="ttname"><a href="structvehicle__part.html#ad81c11110f4a172253a99fd970046224">vehicle_part::is_engine</a></div><div class="ttdeci">bool is_engine() const</div><div class="ttdoc">Can this part provide power or propulsion?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00561">vehicle_part.cpp:561</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad8e149b4d200656c134e3f90f82f3fe4"><div class="ttname"><a href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">vehicle_part::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific type of fuel, charges or ammunition currently contained by a part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00244">vehicle_part.cpp:244</a></div></div>
<div class="ttc" id="astructvehicle__part_html_aeee4fac34f34d6c9ff557fde6590439d"><div class="ttname"><a href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">vehicle_part::is_broken</a></div><div class="ttdeci">bool is_broken() const</div><div class="ttdoc">parts are considered broken at zero health</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00200">vehicle_part.cpp:200</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html"><div class="ttname"><a href="structvpslot__terrain__transform.html">vpslot_terrain_transform</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00163">veh_type.h:163</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_a789238dbb0f86edb22b71ec7cec19ffb"><div class="ttname"><a href="structvpslot__terrain__transform.html#a789238dbb0f86edb22b71ec7cec19ffb">vpslot_terrain_transform::post_furniture</a></div><div class="ttdeci">std::string post_furniture</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00166">veh_type.h:166</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_a7f7a690a6f229e20fc514480d6582c12"><div class="ttname"><a href="structvpslot__terrain__transform.html#a7f7a690a6f229e20fc514480d6582c12">vpslot_terrain_transform::pre_flags</a></div><div class="ttdeci">std::set&lt; std::string &gt; pre_flags</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00164">veh_type.h:164</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_aac59bcd0083eefa7511bd3affac515d5"><div class="ttname"><a href="structvpslot__terrain__transform.html#aac59bcd0083eefa7511bd3affac515d5">vpslot_terrain_transform::post_terrain</a></div><div class="ttdeci">std::string post_terrain</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00165">veh_type.h:165</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_ab5e4d4e14faf93e65d46fd8348740f9a"><div class="ttname"><a href="structvpslot__terrain__transform.html#ab5e4d4e14faf93e65d46fd8348740f9a">vpslot_terrain_transform::post_field_age</a></div><div class="ttdeci">time_duration post_field_age</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00169">veh_type.h:169</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_ac68a7d773155aa1409d940e3ff5e1c6c"><div class="ttname"><a href="structvpslot__terrain__transform.html#ac68a7d773155aa1409d940e3ff5e1c6c">vpslot_terrain_transform::post_field_intensity</a></div><div class="ttdeci">int post_field_intensity</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00168">veh_type.h:168</a></div></div>
<div class="ttc" id="astructvpslot__terrain__transform_html_afd5e8c3ab5daeb4d82694308d105d522"><div class="ttname"><a href="structvpslot__terrain__transform.html#afd5e8c3ab5daeb4d82694308d105d522">vpslot_terrain_transform::post_field</a></div><div class="ttdeci">std::string post_field</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00167">veh_type.h:167</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="aui_8h_html"><div class="ttname"><a href="ui_8h.html">ui.h</a></div></div>
<div class="ttc" id="aui_8h_html_ae8a811731dd950d56e478c3ddc17e725"><div class="ttname"><a href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a></div><div class="ttdeci">const int UILIST_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00035">ui.h:35</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="avalue__ptr_8h_html"><div class="ttname"><a href="value__ptr_8h.html">value_ptr.h</a></div></div>
<div class="ttc" id="aveh__interact_8h_html"><div class="ttname"><a href="veh__interact_8h.html">veh_interact.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html"><div class="ttname"><a href="veh__type_8h.html">veh_type.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8">VPFLAG_POWER_TRANSFER</a></div><div class="ttdeci">@ VPFLAG_POWER_TRANSFER</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00113">veh_type.h:113</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a></div><div class="ttdeci">@ VPFLAG_CARGO</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00094">veh_type.h:94</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a></div><div class="ttdeci">@ VPFLAG_OPENABLE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00072">veh_type.h:72</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7">VPFLAG_EVENTURN</a></div><div class="ttdeci">@ VPFLAG_EVENTURN</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00061">veh_type.h:61</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813">VPFLAG_ODDTURN</a></div><div class="ttdeci">@ VPFLAG_ODDTURN</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00062">veh_type.h:62</a></div></div>
<div class="ttc" id="aveh__utils_8h_html"><div class="ttname"><a href="veh__utils_8h.html">veh_utils.h</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avehicle_8h_html_acba70ff9f8381a17fbca8057d0def3cea4ba69bd9d8e78a234def8fb1c9a3544e"><div class="ttname"><a href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3cea4ba69bd9d8e78a234def8fb1c9a3544e">vp_flag::animal_flag</a></div><div class="ttdeci">@ animal_flag</div></div>
<div class="ttc" id="avehicle_8h_html_acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40"><div class="ttname"><a href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40">vp_flag::linked_flag</a></div><div class="ttdeci">@ linked_flag</div></div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a></div><div class="ttdeci">@ working</div></div>
<div class="ttc" id="avehicle__selector_8h_html"><div class="ttname"><a href="vehicle__selector_8h.html">vehicle_selector.h</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a04c0f30be5943072fbaecacc8a0cf848"><div class="ttname"><a href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a></div><div class="ttdeci">static const itype_id itype_water_clean(&quot;water_clean&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a09c667a72022d7e0ee0b851560831e04"><div class="ttname"><a href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a></div><div class="ttdeci">static const efftype_id effect_tied(&quot;tied&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a0f2fca171b1445ba75107afa924e30e3"><div class="ttname"><a href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a></div><div class="ttdeci">static const itype_id fuel_type_none(&quot;null&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a135bb2f0f8f655d6940d21d5266b681d"><div class="ttname"><a href="vehicle__use_8cpp.html#a135bb2f0f8f655d6940d21d5266b681d">itype_small_repairkit</a></div><div class="ttdeci">static const itype_id itype_small_repairkit(&quot;small_repairkit&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a13798283d6d3fdd8f38838da9d52fd19"><div class="ttname"><a href="vehicle__use_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a></div><div class="ttdeci">static const ammotype ammo_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a157369b3ee1f3f5a889eb1d42ed97638"><div class="ttname"><a href="vehicle__use_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a></div><div class="ttdeci">static const damage_type_id damage_bash(&quot;bash&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a1c07be3a760c8f593258e8c0da77fbfe"><div class="ttname"><a href="vehicle__use_8cpp.html#a1c07be3a760c8f593258e8c0da77fbfe">ACT_REPAIR_ITEM</a></div><div class="ttdeci">static const activity_id ACT_REPAIR_ITEM(&quot;ACT_REPAIR_ITEM&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a1dde15b62a88d05d0f3218beccaedc4e"><div class="ttname"><a href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a></div><div class="ttdeci">static const itype_id itype_fungal_seeds(&quot;fungal_seeds&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a23c8190c3fbddc3ba5596ce2b31d8ce6"><div class="ttname"><a href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a></div><div class="ttdeci">static const itype_id itype_water_purifier(&quot;water_purifier&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a2b1ee59bed1fc9f28ad1906bdd6156f1"><div class="ttname"><a href="vehicle__use_8cpp.html#a2b1ee59bed1fc9f28ad1906bdd6156f1">itype_large_repairkit</a></div><div class="ttdeci">static const itype_id itype_large_repairkit(&quot;large_repairkit&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a2d45b07dd9fac819b92d66f1bf628012"><div class="ttname"><a href="vehicle__use_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a></div><div class="ttdeci">static const itype_id itype_null(&quot;null&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a33dde1f8402abf0eea62ecee985182e3"><div class="ttname"><a href="vehicle__use_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a></div><div class="ttdeci">static const itype_id itype_soldering_iron(&quot;soldering_iron&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a398ef54be46ee27b157365a389e9d4e5"><div class="ttname"><a href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a></div><div class="ttdeci">static const itype_id itype_marloss_seed(&quot;marloss_seed&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a39faa1c7d3f986d7dd89f347f4e2f43f"><div class="ttname"><a href="vehicle__use_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a></div><div class="ttdeci">static const ter_str_id ter_t_dirt(&quot;t_dirt&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a3f2436294a28dc686156c10abab2f994"><div class="ttname"><a href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a></div><div class="ttdeci">static const itype_id fuel_type_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a3f88913d28ce63b5bdc3c8d0896309fc"><div class="ttname"><a href="vehicle__use_8cpp.html#a3f88913d28ce63b5bdc3c8d0896309fc">itype_pseudo_magazine</a></div><div class="ttdeci">static const itype_id itype_pseudo_magazine(&quot;pseudo_magazine&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a4df4dd60924cd337468bb34326d879a7"><div class="ttname"><a href="vehicle__use_8cpp.html#a4df4dd60924cd337468bb34326d879a7">json_flag_FILTHY</a></div><div class="ttdeci">static const flag_id json_flag_FILTHY(&quot;FILTHY&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a53a27ba882bb24158d8752e53158bf46"><div class="ttname"><a href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a></div><div class="ttdeci">static const skill_id skill_mechanics(&quot;mechanics&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a657e189e38645f18331d650592080b95"><div class="ttname"><a href="vehicle__use_8cpp.html#a657e189e38645f18331d650592080b95">itype_water_faucet</a></div><div class="ttdeci">static const itype_id itype_water_faucet(&quot;water_faucet&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a7697771dc47ecaeff36785ff20c9aa33"><div class="ttname"><a href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a></div><div class="ttdeci">static const efftype_id effect_harnessed(&quot;harnessed&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a7cb50793d92110f40ccdf73a939db97b"><div class="ttname"><a href="vehicle__use_8cpp.html#a7cb50793d92110f40ccdf73a939db97b">itype_welding_kit</a></div><div class="ttdeci">static const itype_id itype_welding_kit(&quot;welding_kit&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a833b9c4f784363ad7f168bf1632e1121"><div class="ttname"><a href="vehicle__use_8cpp.html#a833b9c4f784363ad7f168bf1632e1121">add_electronic_toggle</a></div><div class="ttdeci">static void add_electronic_toggle(vehicle &amp;veh, veh_menu &amp;menu, const std::string &amp;name, const std::string &amp;action, const std::string &amp;flag)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00247">vehicle_use.cpp:247</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8e2f350813b04bfbc356da976a2bc369"><div class="ttname"><a href="vehicle__use_8cpp.html#a8e2f350813b04bfbc356da976a2bc369">fault_engine_starter</a></div><div class="ttdeci">static const fault_id fault_engine_starter(&quot;fault_engine_starter&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a94c468761d26393294e93fd61638b9b3"><div class="ttname"><a href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a></div><div class="ttdeci">static const itype_id itype_detergent(&quot;detergent&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a9e7b1fa7f02502a1af5b038562385985"><div class="ttname"><a href="vehicle__use_8cpp.html#a9e7b1fa7f02502a1af5b038562385985">qual_SCREW</a></div><div class="ttdeci">static const quality_id qual_SCREW(&quot;SCREW&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_aacae8af2b949fe924016b5e370170fc8"><div class="ttname"><a href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a></div><div class="ttdeci">static const itype_id fuel_type_wind(&quot;wind&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ab274b12c85d52a095004b28251a35c19"><div class="ttname"><a href="vehicle__use_8cpp.html#ab274b12c85d52a095004b28251a35c19">vpart_horn_bicycle</a></div><div class="ttdeci">static const vpart_id vpart_horn_bicycle(&quot;horn_bicycle&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ac25a0a4122882b4e13daa1ff9a930921"><div class="ttname"><a href="vehicle__use_8cpp.html#ac25a0a4122882b4e13daa1ff9a930921">furn_f_plant_seed</a></div><div class="ttdeci">static const furn_str_id furn_f_plant_seed(&quot;f_plant_seed&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ac4c2af725902e13cce0e1974ac38dc35"><div class="ttname"><a href="vehicle__use_8cpp.html#ac4c2af725902e13cce0e1974ac38dc35">furn_f_plant_harvest</a></div><div class="ttdeci">static const furn_str_id furn_f_plant_harvest(&quot;f_plant_harvest&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ad360eeb9caef5284f4139bc57cfcebe8"><div class="ttname"><a href="vehicle__use_8cpp.html#ad360eeb9caef5284f4139bc57cfcebe8">ter_t_dirtmound</a></div><div class="ttdeci">static const ter_str_id ter_t_dirtmound(&quot;t_dirtmound&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ad3c8ecbda4c90e562b969cdc72d44b13"><div class="ttname"><a href="vehicle__use_8cpp.html#ad3c8ecbda4c90e562b969cdc72d44b13">itype_welder_crude</a></div><div class="ttdeci">static const itype_id itype_welder_crude(&quot;welder_crude&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_adcb832c9bde8f6dd957bf98e1e27066f"><div class="ttname"><a href="vehicle__use_8cpp.html#adcb832c9bde8f6dd957bf98e1e27066f">zone_type_VEHICLE_PATROL</a></div><div class="ttdeci">static const zone_type_id zone_type_VEHICLE_PATROL(&quot;VEHICLE_PATROL&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ae0e6faf740eed5d3972bfbb84a03faab"><div class="ttname"><a href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a></div><div class="ttdeci">static const activity_id ACT_START_ENGINES(&quot;ACT_START_ENGINES&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_af54ee122fbd5cf94c6ef8bca7e67c8e8"><div class="ttname"><a href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a></div><div class="ttdeci">static const itype_id fuel_type_muscle(&quot;muscle&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_af62204c610c3c22a0ca114864a5f2822"><div class="ttname"><a href="vehicle__use_8cpp.html#af62204c610c3c22a0ca114864a5f2822">handbrake</a></div><div class="ttdeci">void handbrake()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00110">vehicle_use.cpp:110</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_af8e36ab370766d9dc7c2da5461285f61"><div class="ttname"><a href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a></div><div class="ttdeci">static const itype_id itype_welder(&quot;welder&quot;)</div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
<div class="ttc" id="avpart__range_8h_html"><div class="ttname"><a href="vpart__range_8h.html">vpart_range.h</a></div></div>
<div class="ttc" id="aweather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div></div>
<div class="ttc" id="awidget_8h_html_ac9c40e0d5ffae2a9e10019da79b7983face4ef3ec98443ed10da505114b58f153"><div class="ttname"><a href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983face4ef3ec98443ed10da505114b58f153">widget_var::speed</a></div><div class="ttdeci">@ speed</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:32 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
