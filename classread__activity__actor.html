<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: read_activity_actor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classread__activity__actor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">read_activity_actor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for read_activity_actor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classread__activity__actor.png" usemap="#read_5Factivity_5Factor_map" alt=""/>
  <map id="read_5Factivity_5Factor_map" name="read_5Factivity_5Factor_map">
<area href="classactivity__actor.html" alt="activity_actor" shape="rect" coords="0,0,121,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a011510db2237653ba72609e2a2dcd438"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438">book_type</a> : int { <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">normal</a>
, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">martial_art</a>
 }</td></tr>
<tr class="separator:a011510db2237653ba72609e2a2dcd438"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a00c796e0dcabd6b4793fd2c7e036466e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a00c796e0dcabd6b4793fd2c7e036466e">read_activity_actor</a> ()=default</td></tr>
<tr class="separator:a00c796e0dcabd6b4793fd2c7e036466e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adccacb439ba56cfd7681e7cc2e5dc8a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#adccacb439ba56cfd7681e7cc2e5dc8a8">read_activity_actor</a> (<a class="el" href="classtime__duration.html">time_duration</a> read_time, <a class="el" href="classitem__location.html">item_location</a> &amp;<a class="el" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, <a class="el" href="classitem__location.html">item_location</a> &amp;<a class="el" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>, bool <a class="el" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a>=false, int <a class="el" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a>=-1)</td></tr>
<tr class="separator:adccacb439ba56cfd7681e7cc2e5dc8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455b6cbf356c68611406d97c9ea47d06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a455b6cbf356c68611406d97c9ea47d06">get_type</a> () const override</td></tr>
<tr class="memdesc:a455b6cbf356c68611406d97c9ea47d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return the activity id of the corresponding activity.  <a href="classread__activity__actor.html#a455b6cbf356c68611406d97c9ea47d06">More...</a><br /></td></tr>
<tr class="separator:a455b6cbf356c68611406d97c9ea47d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6881922568a7bb4060fc59df896c846"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#ac6881922568a7bb4060fc59df896c846">start</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;who) override</td></tr>
<tr class="memdesc:ac6881922568a7bb4060fc59df896c846"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called once at the start of the activity.  <a href="classread__activity__actor.html#ac6881922568a7bb4060fc59df896c846">More...</a><br /></td></tr>
<tr class="separator:ac6881922568a7bb4060fc59df896c846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07ca9b0bcbd93fa872bf9c33817eb60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#af07ca9b0bcbd93fa872bf9c33817eb60">do_turn</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;who) override</td></tr>
<tr class="memdesc:af07ca9b0bcbd93fa872bf9c33817eb60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on every turn of the activity It may be used to stop the activity prematurely by setting it to null.  <a href="classread__activity__actor.html#af07ca9b0bcbd93fa872bf9c33817eb60">More...</a><br /></td></tr>
<tr class="separator:af07ca9b0bcbd93fa872bf9c33817eb60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e43554c0692556f45406f567a2a3fc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a8e43554c0692556f45406f567a2a3fc9">finish</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;<a class="el" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="el" href="classCharacter.html">Character</a> &amp;who) override</td></tr>
<tr class="memdesc:a8e43554c0692556f45406f567a2a3fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the activity runs out of moves, assuming that it has not already been set to null.  <a href="classread__activity__actor.html#a8e43554c0692556f45406f567a2a3fc9">More...</a><br /></td></tr>
<tr class="separator:a8e43554c0692556f45406f567a2a3fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97ca0f909990f1db59ff9914d57887e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#ad97ca0f909990f1db59ff9914d57887e">get_progress_message</a> (const <a class="el" href="classplayer__activity.html">player_activity</a> &amp;) const override</td></tr>
<tr class="memdesc:ad97ca0f909990f1db59ff9914d57887e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to generate the progress display at the top of the screen.  <a href="classread__activity__actor.html#ad97ca0f909990f1db59ff9914d57887e">More...</a><br /></td></tr>
<tr class="separator:ad97ca0f909990f1db59ff9914d57887e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6540d54e9d5c02eb9490f38ac7c5c2b1"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a6540d54e9d5c02eb9490f38ac7c5c2b1">clone</a> () const override</td></tr>
<tr class="memdesc:a6540d54e9d5c02eb9490f38ac7c5c2b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a deep copy of this object.  <a href="classread__activity__actor.html#a6540d54e9d5c02eb9490f38ac7c5c2b1">More...</a><br /></td></tr>
<tr class="separator:a6540d54e9d5c02eb9490f38ac7c5c2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61aeb5fcf90867aae92af51f297f6c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#af61aeb5fcf90867aae92af51f297f6c9">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;jsout) const override</td></tr>
<tr class="memdesc:af61aeb5fcf90867aae92af51f297f6c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must write any custom members of the derived class to json Note that a static member function for deserialization must also be created and added to the <code>activity_actor_deserializers</code> hashmap in <a class="el" href="activity__actor_8cpp.html">activity_actor.cpp</a>.  <a href="classread__activity__actor.html#af61aeb5fcf90867aae92af51f297f6c9">More...</a><br /></td></tr>
<tr class="separator:af61aeb5fcf90867aae92af51f297f6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classactivity__actor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classactivity__actor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classactivity__actor.html">activity_actor</a></td></tr>
<tr class="memitem:a54a841cdcaa8200f6131cc676d7e909e inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a54a841cdcaa8200f6131cc676d7e909e">~activity_actor</a> ()=default</td></tr>
<tr class="separator:a54a841cdcaa8200f6131cc676d7e909e inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a7bec038a84479634d1c07cf198d6e3b1">canceled</a> (<a class="el" href="classplayer__activity.html">player_activity</a> &amp;, <a class="el" href="classCharacter.html">Character</a> &amp;)</td></tr>
<tr class="memdesc:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just before <a class="el" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity()</a> executes.  <a href="classactivity__actor.html#a7bec038a84479634d1c07cf198d6e3b1">More...</a><br /></td></tr>
<tr class="separator:a7bec038a84479634d1c07cf198d6e3b1 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a37b694dc649a2bcad3a2acc98672caa6">can_resume_with</a> (const <a class="el" href="classactivity__actor.html">activity_actor</a> &amp;<a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, const <a class="el" href="classCharacter.html">Character</a> &amp;who) const</td></tr>
<tr class="memdesc:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called in <a class="el" href="classplayer__activity.html#abecfb3ed21a7ab0d7ac168ae9fc135e1" title="Returns true if activities are similar enough that this activity can be resumed instead of starting t...">player_activity::can_resume_with</a> which allows suspended activities to be resumed instead of starting a new activity in certain cases.  <a href="classactivity__actor.html#a37b694dc649a2bcad3a2acc98672caa6">More...</a><br /></td></tr>
<tr class="separator:a37b694dc649a2bcad3a2acc98672caa6 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a4e36b95612ee7c2bf1282cf0a1bea185">exertion_level</a> () const</td></tr>
<tr class="memdesc:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called every turn, in <a class="el" href="classplayer__activity.html#a8ec4a2e2ed99099a3ecb383063b95345" title="Performs the activity for a single turn.">player_activity::do_turn</a> (with some indirection through <a class="el" href="classplayer__activity.html#a75577f2ff06719f14ce680a8d1308cdd">player_activity::exertion_level</a>) How strenuous this activity level is.  <a href="classactivity__actor.html#a4e36b95612ee7c2bf1282cf0a1bea185">More...</a><br /></td></tr>
<tr class="separator:a4e36b95612ee7c2bf1282cf0a1bea185 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivity__actor.html#a8fe2e2b63dc1fc20ad8ff59c48fdab57">do_drop_invalid_inventory</a> () const</td></tr>
<tr class="memdesc:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override to false in actors that are slow because they frequently invalidate the inventory and trigger excessive drop_invalid_inventory() calls, and can guarantee that it is called appropriately themselves.  <a href="classactivity__actor.html#a8fe2e2b63dc1fc20ad8ff59c48fdab57">More...</a><br /></td></tr>
<tr class="separator:a8fe2e2b63dc1fc20ad8ff59c48fdab57 inherit pub_methods_classactivity__actor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a780045e7ade36e1f2e5356092c7ccab3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a780045e7ade36e1f2e5356092c7ccab3">read_book</a> (<a class="el" href="classCharacter.html">Character</a> &amp;learner, const <a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; <a class="el" href="structislot__book.html">islot_book</a> &gt; &amp;islotbook, <a class="el" href="classSkillLevel.html">SkillLevel</a> &amp;skill_level, double penalty)</td></tr>
<tr class="separator:a780045e7ade36e1f2e5356092c7ccab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3303801f2d0f2bde69b52d3a600b7d"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a5d3303801f2d0f2bde69b52d3a600b7d">deserialize</a> (<a class="el" href="classJsonValue.html">JsonValue</a> &amp;jsin)</td></tr>
<tr class="separator:a5d3303801f2d0f2bde69b52d3a600b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae4b12080ca308e23812c487ee13f9bbe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#ae4b12080ca308e23812c487ee13f9bbe">player_read</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="separator:ae4b12080ca308e23812c487ee13f9bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d74a26367b361a9a8ba2dc80b8a84e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#ad0d74a26367b361a9a8ba2dc80b8a84e">player_readma</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="separator:ad0d74a26367b361a9a8ba2dc80b8a84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb91346052ac55b51ea7d8d8c709b451"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#acb91346052ac55b51ea7d8d8c709b451">npc_read</a> (<a class="el" href="classnpc.html">npc</a> &amp;learner)</td></tr>
<tr class="separator:acb91346052ac55b51ea7d8d8c709b451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b74de18ffd62d14014391a3a01bfec0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a8b74de18ffd62d14014391a3a01bfec0">can_resume_with_internal</a> (const <a class="el" href="classactivity__actor.html">activity_actor</a> &amp;<a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, const <a class="el" href="classCharacter.html">Character</a> &amp;) const override</td></tr>
<tr class="memdesc:a8b74de18ffd62d14014391a3a01bfec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if <code>this</code> activity is resumable, and <code>this</code> and <code>other</code> are "equivalent" i.e.  <a href="classread__activity__actor.html#a8b74de18ffd62d14014391a3a01bfec0">More...</a><br /></td></tr>
<tr class="separator:a8b74de18ffd62d14014391a3a01bfec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5cb71a9f750d607c80f39f5400b9a497"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a></td></tr>
<tr class="separator:a5cb71a9f750d607c80f39f5400b9a497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2a5102f9d0451e239f957422dd4f98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem__location.html">item_location</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a></td></tr>
<tr class="separator:a8d2a5102f9d0451e239f957422dd4f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8e067f973e68a442d2fe37fe2a0e04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438">book_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a></td></tr>
<tr class="separator:acc8e067f973e68a442d2fe37fe2a0e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35907555e8fbd65bedb21abcbfff65ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem__location.html">item_location</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a></td></tr>
<tr class="separator:a35907555e8fbd65bedb21abcbfff65ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7539cc3269a3ed8f4d328d964427faf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> = false</td></tr>
<tr class="separator:ae7539cc3269a3ed8f4d328d964427faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde79528ecaf35ba86cd952e0eedbf01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = false</td></tr>
<tr class="separator:adde79528ecaf35ba86cd952e0eedbf01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acede550724fb2036df661e7e9404b7ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> = -1</td></tr>
<tr class="separator:acede550724fb2036df661e7e9404b7ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00439">439</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a011510db2237653ba72609e2a2dcd438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011510db2237653ba72609e2a2dcd438">&#9670;&nbsp;</a></span>book_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438">read_activity_actor::book_type</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555"></a>normal&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916"></a>martial_art&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00442">442</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;: <span class="keywordtype">int</span> { <a class="code" href="namespacetemperatures.html#a9f523a38a9f55c0f553288964f823f38">normal</a>, martial_art };</div>
<div class="ttc" id="anamespacetemperatures_html_a9f523a38a9f55c0f553288964f823f38"><div class="ttname"><a href="namespacetemperatures.html#a9f523a38a9f55c0f553288964f823f38">temperatures::normal</a></div><div class="ttdeci">constexpr units::temperature normal</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00098">game_constants.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a00c796e0dcabd6b4793fd2c7e036466e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00c796e0dcabd6b4793fd2c7e036466e">&#9670;&nbsp;</a></span>read_activity_actor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">read_activity_actor::read_activity_actor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adccacb439ba56cfd7681e7cc2e5dc8a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adccacb439ba56cfd7681e7cc2e5dc8a8">&#9670;&nbsp;</a></span>read_activity_actor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">read_activity_actor::read_activity_actor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>read_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>book</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>ereader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>continuous</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>learner_id</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00446">446</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            : <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a>( to_moves&lt;int&gt;( read_time ) ), <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ), <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>( <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a> ),</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a>( <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> ), <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a>( <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> ) {};</div>
<div class="ttc" id="aclassread__activity__actor_html_a35907555e8fbd65bedb21abcbfff65ec"><div class="ttname"><a href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">read_activity_actor::ereader</a></div><div class="ttdeci">item_location ereader</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00478">activity_actor_definitions.h:478</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_a5cb71a9f750d607c80f39f5400b9a497"><div class="ttname"><a href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">read_activity_actor::moves_total</a></div><div class="ttdeci">int moves_total</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00473">activity_actor_definitions.h:473</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_a8d2a5102f9d0451e239f957422dd4f98"><div class="ttname"><a href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">read_activity_actor::book</a></div><div class="ttdeci">item_location book</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00474">activity_actor_definitions.h:474</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_acede550724fb2036df661e7e9404b7ee"><div class="ttname"><a href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">read_activity_actor::learner_id</a></div><div class="ttdeci">int learner_id</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00483">activity_actor_definitions.h:483</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_adde79528ecaf35ba86cd952e0eedbf01"><div class="ttname"><a href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">read_activity_actor::continuous</a></div><div class="ttdeci">bool continuous</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00482">activity_actor_definitions.h:482</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8b74de18ffd62d14014391a3a01bfec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b74de18ffd62d14014391a3a01bfec0">&#9670;&nbsp;</a></span>can_resume_with_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::can_resume_with_internal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classactivity__actor.html">activity_actor</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if <code>this</code> activity is resumable, and <code>this</code> and <code>other</code> are "equivalent" i.e. </p>
<p>similar enough that <code>this</code> activity can be resumed instead of starting <code>other</code>. Many activities are not resumable, so the default is returning false. </p><dl class="section pre"><dt>Precondition</dt><dd><code>other</code> is the same type of actor as <code>this</code> </dd></dl>

<p>Reimplemented from <a class="el" href="classactivity__actor.html#ac0cd17913c15a49407811d9ad4159363">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02254">2254</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;{</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keyword">const</span> <a class="code" href="classread__activity__actor.html">read_activity_actor</a> &amp;actor = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classread__activity__actor.html">read_activity_actor</a> &amp;<span class="keyword">&gt;</span>( <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> );</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// The ereader gets transformed into the _on version</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">// which means the item_location of the book changes</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="comment">// this check is to prevent a segmentation fault</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="activity__actor_8cpp.html#a0625d11188ced6e08cffdb78bcb46241">is_valid_book</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) || !<a class="code" href="activity__actor_8cpp.html#a0625d11188ced6e08cffdb78bcb46241">is_valid_book</a>( actor.<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) ) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    }</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> == actor.<a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> &amp;&amp;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;           <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> == actor.<a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> &amp;&amp;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;           <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == actor.<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a0625d11188ced6e08cffdb78bcb46241"><div class="ttname"><a href="activity__actor_8cpp.html#a0625d11188ced6e08cffdb78bcb46241">is_valid_book</a></div><div class="ttdeci">static bool is_valid_book(const item_location &amp;book)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l01769">activity_actor.cpp:1769</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html"><div class="ttname"><a href="classread__activity__actor.html">read_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00439">activity_actor_definitions.h:440</a></div></div>
<div class="ttc" id="aomdata_8h_html_a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf"><div class="ttname"><a href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">oter_travel_cost_type::other</a></div><div class="ttdeci">@ other</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="activity__actor_8cpp_source.html#l01769">is_valid_book()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00483">learner_id</a>, <a class="el" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

</div>
</div>
<a id="a6540d54e9d5c02eb9490f38ac7c5c2b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6540d54e9d5c02eb9490f38ac7c5c2b1">&#9670;&nbsp;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classactivity__actor.html">activity_actor</a>&gt; read_activity_actor::clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a deep copy of this object. </p>
<p>Example implementation: </p><div class="fragment"><div class="line"><span class="keyword">class </span>my_activity_actor {</div>
<div class="line">    std::unique_ptr&lt;activity_actor&gt; <a class="code" href="classread__activity__actor.html#a6540d54e9d5c02eb9490f38ac7c5c2b1">clone</a>()<span class="keyword"> const override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> std::make_unique&lt;my_activity_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassread__activity__actor_html_a6540d54e9d5c02eb9490f38ac7c5c2b1"><div class="ttname"><a href="classread__activity__actor.html#a6540d54e9d5c02eb9490f38ac7c5c2b1">read_activity_actor::clone</a></div><div class="ttdeci">std::unique_ptr&lt; activity_actor &gt; clone() const override</div><div class="ttdoc">Returns a deep copy of this object.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00465">activity_actor_definitions.h:465</a></div></div>
</div><!-- fragment --><p> The returned value should behave like the original item and must have the same type. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a0b705537401c10f07320cc4e6491d99f">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00465">465</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                                             {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">return</span> std::make_unique&lt;read_activity_actor&gt;( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>.</p>

</div>
</div>
<a id="a5d3303801f2d0f2bde69b52d3a600b7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3303801f2d0f2bde69b52d3a600b7d">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classactivity__actor.html">activity_actor</a> &gt; read_activity_actor::deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonValue.html">JsonValue</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02315">2315</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;{</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <a class="code" href="classread__activity__actor.html">read_activity_actor</a> actor;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <a class="code" href="classJsonObject.html">JsonObject</a> data = jsin.<a class="code" href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">get_object</a>();</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;moves_total&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a> );</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;book&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;ereader&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a> );</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;using_ereader&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> );</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;continuous&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> );</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;learner_id&quot;</span>, actor.<a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> );</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">return</span> actor.<a class="code" href="classread__activity__actor.html#a6540d54e9d5c02eb9490f38ac7c5c2b1">clone</a>();</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonValue_html_aa90309342403c2e86b358ce996e34a1f"><div class="ttname"><a href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">JsonValue::get_object</a></div><div class="ttdeci">JsonObject get_object() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00268">flexbuffer_json-inl.h:268</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_ae7539cc3269a3ed8f4d328d964427faf"><div class="ttname"><a href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">read_activity_actor::using_ereader</a></div><div class="ttdeci">bool using_ereader</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00479">activity_actor_definitions.h:479</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00465">clone()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00478">ereader</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00268">JsonValue::get_object()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00483">learner_id</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00473">moves_total</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, and <a class="el" href="activity__actor__definitions_8h_source.html#l00479">using_ereader</a>.</p>

</div>
</div>
<a id="af07ca9b0bcbd93fa872bf9c33817eb60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af07ca9b0bcbd93fa872bf9c33817eb60">&#9670;&nbsp;</a></span>do_turn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void read_activity_actor::do_turn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called on every turn of the activity It may be used to stop the activity prematurely by setting it to null. </p>
<p>Expected battery life while reading with common ereaders: integrated_ar - implant = potentially infinite ar_glasses_advanced - max 300 charges from disposable light battery = 25 hours of reading eink_tablet_pc - max 300 charges from disposable light battery = 25 hours of reading laptop - max 1200 charges from disposable medium battery = 100 hours of reading smart_phone - 120 UPS charges = 10 hours of reading</p>

<p>Implements <a class="el" href="classactivity__actor.html#ad414594da4c234257dc1874724d726c9">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l01824">1824</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;{</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="activity__actor_8cpp.html#a522411a41f69c1abd6ae12614aaf05f4">cancel_if_book_invalid</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, who ) ) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a>.has_value() ) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <a class="code" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a> = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.count( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) ?</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                 <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">book_type::martial_art</a> : <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">book_type::normal</a>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span>( who.<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="comment">// It got too dark during the process of reading, bail out.</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        who.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s too dark to read!&quot;</span> ) );</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a>.value() == <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">book_type::martial_art</a> &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        who.<a class="code" href="classCharacter.html#a4f3a4fb42bd6141b0ea95f10394dea8a">burn_energy_all</a>( -1 );</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="comment">// do not spam the message log</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 5_minutes ) ) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;%s reading time = %s&quot;</span>,</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                       who.<a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>, <a class="code" href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a>( <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_left ) ) );</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    }</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> &amp;&amp; !<a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a> ) {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        who.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You no longer have the e-book!&quot;</span> ),</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; no longer has the e-book!&quot;</span> ) );</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        who.<a class="code" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">cancel_activity</a>();</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    }</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> &amp;&amp; !<a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;who ) ) {</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>(</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            who,</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s %2$s ran out of batteries.&quot;</span> ),</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            who.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>( <span class="keyword">true</span>, <span class="keyword">true</span> ),</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        who.<a class="code" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">cancel_activity</a>();</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> &amp;&amp; <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 5_minutes ) ) {<span class="comment"></span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment">        /** Expected battery life while reading with common ereaders:</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">                integrated_ar       - implant                                         = potentially infinite</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">                ar_glasses_advanced - max 300 charges from disposable light battery   = 25 hours of reading</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment">                eink_tablet_pc      - max 300 charges from disposable light battery   = 25 hours of reading</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment">                laptop              - max 1200 charges from disposable medium battery = 100 hours of reading</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">                smart_phone         - 120 UPS charges                                 = 10 hours of reading</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), who.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), &amp;who );</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a522411a41f69c1abd6ae12614aaf05f4"><div class="ttname"><a href="activity__actor_8cpp.html#a522411a41f69c1abd6ae12614aaf05f4">cancel_if_book_invalid</a></div><div class="ttdeci">static bool cancel_if_book_invalid(player_activity &amp;act, const item_location &amp;book, const Character &amp;who)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l01778">activity_actor.cpp:1778</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a605b73d77fee1cb3c3cc3b32c45fad47"><div class="ttname"><a href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a></div><div class="ttdeci">std::string to_string_writable(const time_duration &amp;dur)</div><div class="ttdoc">Returns a string that is writable to JSON that is also readable from JSON.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00626">calendar.cpp:626</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00829">character.cpp:829</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4f3a4fb42bd6141b0ea95f10394dea8a"><div class="ttname"><a href="classCharacter.html#a4f3a4fb42bd6141b0ea95f10394dea8a">Character::burn_energy_all</a></div><div class="ttdeci">void burn_energy_all(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06932">character.cpp:6932</a></div></div>
<div class="ttc" id="aclassCharacter_html_a597968eba450c923b56a1c9cac1676dc"><div class="ttname"><a href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity</a></div><div class="ttdeci">void cancel_activity()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08983">character.cpp:8983</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02684">character.h:2684</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a57b10fc9db286a3449ddc92ab3d896f5"><div class="ttname"><a href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo (if available) and return the amount of ammo that was consumed Consume order: loaded ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10878">item.cpp:10878</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916"><div class="ttname"><a href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">read_activity_actor::book_type::martial_art</a></div><div class="ttdeci">@ martial_art</div></div>
<div class="ttc" id="aclassread__activity__actor_html_a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555"><div class="ttname"><a href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">read_activity_actor::book_type::normal</a></div><div class="ttdeci">@ normal</div></div>
<div class="ttc" id="aclassread__activity__actor_html_acc8e067f973e68a442d2fe37fe2a0e04"><div class="ttname"><a href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">read_activity_actor::bktype</a></div><div class="ttdeci">std::optional&lt; book_type &gt; bktype</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00475">activity_actor_definitions.h:475</a></div></div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a3ea1aed1d11cd410cce07fb5be7aa34f"><div class="ttname"><a href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a></div><div class="ttdeci">void add_msg_if_player_sees(const tripoint &amp;target, std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l01007">messages.cpp:1007</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00753">calendar.cpp:753</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a></div><div class="ttdeci">@ DF_ACT_READ</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00242">debug.h:242</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astructitype_html_afa43bb71000c037c9918d907fdacf0b5"><div class="ttname"><a href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">itype::use_methods</a></div><div class="ttdeci">std::map&lt; std::string, use_function &gt; use_methods</div><div class="ttdoc">Actions an instance can perform (if any) indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01312">itype.h:1312</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="messages_8cpp_source.html#l01007">add_msg_if_player_sees()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00475">bktype</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="character_8cpp_source.html#l06932">Character::burn_energy_all()</a>, <a class="el" href="character_8cpp_source.html#l08983">Character::cancel_activity()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01778">cancel_if_book_invalid()</a>, <a class="el" href="debug_8h_source.html#l00242">debugmode::DF_ACT_READ</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00478">ereader</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="calendar_8h_source.html#l00225">time_duration::from_moves()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">martial_art</a>, <a class="el" href="character_8h_source.html#l02684">Character::name</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">normal</a>, <a class="el" href="calendar_8cpp_source.html#l00753">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00626">to_string_writable()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>, and <a class="el" href="activity__actor__definitions_8h_source.html#l00479">using_ereader</a>.</p>

</div>
</div>
<a id="a8e43554c0692556f45406f567a2a3fc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e43554c0692556f45406f567a2a3fc9">&#9670;&nbsp;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void read_activity_actor::finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the activity runs out of moves, assuming that it has not already been set to null. </p>

<p>Implements <a class="el" href="classactivity__actor.html#af48795a3ce174ab25b58db059de179b5">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02183">2183</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;{</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="activity__actor_8cpp.html#a522411a41f69c1abd6ae12614aaf05f4">cancel_if_book_invalid</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, who ) ) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_mabook = <a class="code" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a>.value() == <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">book_type::martial_art</a>;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="keywordflow">if</span>( who.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4">event_type::reads_book</a>&gt;( who.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> should_null = is_mabook ?</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                                 <a class="code" href="classread__activity__actor.html#ad0d74a26367b361a9a8ba2dc80b8a84e">player_readma</a>( *who.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>() ) : <a class="code" href="classread__activity__actor.html#ae4b12080ca308e23812c487ee13f9bbe">player_read</a>( *who.as_avatar() );</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="keywordflow">if</span>( should_null ) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// who.is_npc()</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160; </div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <span class="comment">// npcs can&#39;t read martial arts books yet</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <span class="keywordflow">if</span>( is_mabook ) {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#acb91346052ac55b51ea7d8d8c709b451">npc_read</a>( <span class="keyword">static_cast&lt;</span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( who ) ) ) {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160; </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> ) {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <a class="code" href="classtime__duration.html">time_duration</a> time_taken;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        <span class="comment">// caller should check if npc can read first</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <span class="keywordflow">if</span>( who.<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            <a class="code" href="classnpc.html">npc</a> &amp;n = <span class="keyword">static_cast&lt;</span><a class="code" href="classnpc.html">npc</a> &amp;<span class="keyword">&gt;</span>( who );</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            time_taken = n.<a class="code" href="classnpc.html#af883dd60d8eb08031d6ac2154de935c3">time_to_read</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, n );</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        } <span class="keywordflow">else</span> {    <span class="comment">// who.is_avatar()</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <span class="comment">// check if there can still be a reader before restarting</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            <span class="comment">// because npcs can move while reading for the player</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            std::vector&lt;std::string&gt; fail_messages;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *reader = who.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classCharacter.html#a66aab249399aba9fc327965b92e0262c">get_book_reader</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, fail_messages );</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <span class="keywordflow">if</span>( reader == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                <span class="comment">// We can&#39;t read, and neither can our followers</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;reason : fail_messages ) {</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, reason );</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                }</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            }</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            time_taken = who.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classCharacter.html#a7bdec5b3c9990b8c7232796641915728">time_to_read</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, *reader );</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;reading time = %s&quot;</span>,</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                           <a class="code" href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a>( time_taken ) );</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="comment">// restart the activity</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a> = to_moves&lt;int&gt;( time_taken );</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_total = to_moves&lt;int&gt;( time_taken );</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_left = to_moves&lt;int&gt;( time_taken );</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    } <span class="keywordflow">else</span>  {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        who.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You finish reading.&quot;</span> ) );</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    }</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160; </div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.set_to_null();</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a66aab249399aba9fc327965b92e0262c"><div class="ttname"><a href="classCharacter.html#a66aab249399aba9fc327965b92e0262c">Character::get_book_reader</a></div><div class="ttdeci">const Character * get_book_reader(const item &amp;book, std::vector&lt; std::string &gt; &amp;reasons) const</div><div class="ttdoc">Helper function for player::read.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12130">character.cpp:12130</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7bdec5b3c9990b8c7232796641915728"><div class="ttname"><a href="classCharacter.html#a7bdec5b3c9990b8c7232796641915728">Character::time_to_read</a></div><div class="ttdeci">time_duration time_to_read(const item &amp;book, const Character &amp;reader, const Character *learner=nullptr) const</div><div class="ttdoc">Helper function for get_book_reader.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12235">character.cpp:12235</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_af883dd60d8eb08031d6ac2154de935c3"><div class="ttname"><a href="classnpc.html#af883dd60d8eb08031d6ac2154de935c3">npc::time_to_read</a></div><div class="ttdeci">time_duration time_to_read(const item &amp;book, const Character &amp;reader) const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l01162">npc.cpp:1162</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_acb91346052ac55b51ea7d8d8c709b451"><div class="ttname"><a href="classread__activity__actor.html#acb91346052ac55b51ea7d8d8c709b451">read_activity_actor::npc_read</a></div><div class="ttdeci">bool npc_read(npc &amp;learner)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l02115">activity_actor.cpp:2115</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_ad0d74a26367b361a9a8ba2dc80b8a84e"><div class="ttname"><a href="classread__activity__actor.html#ad0d74a26367b361a9a8ba2dc80b8a84e">read_activity_actor::player_readma</a></div><div class="ttdeci">bool player_readma(avatar &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l02063">activity_actor.cpp:2063</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_ae4b12080ca308e23812c487ee13f9bbe"><div class="ttname"><a href="classread__activity__actor.html#ae4b12080ca308e23812c487ee13f9bbe">read_activity_actor::player_read</a></div><div class="ttdeci">bool player_read(avatar &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l01913">activity_actor.cpp:1913</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4">event_type::reads_book</a></div><div class="ttdeci">@ reads_book</div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00475">bktype</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor_8cpp_source.html#l01778">cancel_if_book_invalid()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="debug_8h_source.html#l00242">debugmode::DF_ACT_READ</a>, <a class="el" href="character_8cpp_source.html#l12130">Character::get_book_reader()</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">martial_art</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00473">moves_total</a>, <a class="el" href="activity__actor_8cpp_source.html#l02115">npc_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02063">player_readma()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a97971c4c51f33d03ca8498564cb295f4">reads_book</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="npc_8cpp_source.html#l01162">npc::time_to_read()</a>, <a class="el" href="character_8cpp_source.html#l12235">Character::time_to_read()</a>, <a class="el" href="calendar_8cpp_source.html#l00626">to_string_writable()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

</div>
</div>
<a id="ad97ca0f909990f1db59ff9914d57887e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad97ca0f909990f1db59ff9914d57887e">&#9670;&nbsp;</a></span>get_progress_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string read_activity_actor::get_progress_message </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to generate the progress display at the top of the screen. </p>

<p>Reimplemented from <a class="el" href="classactivity__actor.html#af57af39e0e8248b40b90b313093ab96f">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02271">2271</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;{</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="activity__actor_8cpp.html#a0625d11188ced6e08cffdb78bcb46241">is_valid_book</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) ) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;you = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_book&gt;</a> &amp;islotbook = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;skill = islotbook-&gt;skill;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="keywordflow">if</span>( skill &amp;&amp;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        you.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( skill ) &lt; islotbook-&gt;level &amp;&amp;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        you.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( skill ).<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() &amp;&amp;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        you.<a class="code" href="classCharacter.html#aa3ff3d07714ad0bda67eca1d98516f9c">has_identified</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSkillLevel.html">SkillLevel</a> &amp;skill_level = you.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( skill );</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="comment">//~ skill_name current_skill_level -&gt; next_skill_level (% to next level)</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;reading progress&quot;</span>, <span class="stringliteral">&quot;%1$s %2$d -&gt; %3$d (%4$d%%)&quot;</span> ),</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                              skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(),</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                              skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>(),</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                              skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>() + 1,</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                              skill_level.<a class="code" href="classSkillLevel.html#a6f8aeea8578dd90ccbd56ed7946521b6">knowledgeExperience</a>() );</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2726ac089fa49e864b486e289f53fade"><div class="ttname"><a href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">Character::get_skill_level_object</a></div><div class="ttdeci">SkillLevel &amp; get_skill_level_object(const skill_id &amp;ident)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03423">character.cpp:3423</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4226b37a0e4383461e0fd072586a394a"><div class="ttname"><a href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">Character::get_knowledge_level</a></div><div class="ttdeci">int get_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03441">character.cpp:3441</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa3ff3d07714ad0bda67eca1d98516f9c"><div class="ttname"><a href="classCharacter.html#aa3ff3d07714ad0bda67eca1d98516f9c">Character::has_identified</a></div><div class="ttdeci">virtual bool has_identified(const itype_id &amp;item_id) const =0</div><div class="ttdoc">Note that we've read a book at least once.</div></div>
<div class="ttc" id="aclassSkillLevel_html"><div class="ttname"><a href="classSkillLevel.html">SkillLevel</a></div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00122">skill.h:123</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a1c8268a8f8b596f89ada6e7c877a64f5"><div class="ttname"><a href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">SkillLevel::knowledgeLevel</a></div><div class="ttdeci">int knowledgeLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00154">skill.h:154</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a4de8923aafd85db2946ed9860874d660"><div class="ttname"><a href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">SkillLevel::can_train</a></div><div class="ttdeci">bool can_train() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8cpp_source.html#l00407">skill.cpp:407</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a6f8aeea8578dd90ccbd56ed7946521b6"><div class="ttname"><a href="classSkillLevel.html#a6f8aeea8578dd90ccbd56ed7946521b6">SkillLevel::knowledgeExperience</a></div><div class="ttdeci">int knowledgeExperience(bool raw=false) const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00162">skill.h:162</a></div></div>
<div class="ttc" id="aclassSkill_html_a11c69074ce9b251983f170510808bd85"><div class="ttname"><a href="classSkill.html#a11c69074ce9b251983f170510808bd85">Skill::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00071">skill.h:71</a></div></div>
<div class="ttc" id="aclasscata_1_1value__ptr_html"><div class="ttname"><a href="classcata_1_1value__ptr.html">cata::value_ptr&lt; islot_book &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; Skill &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructitype_html_aec04d23e907e3ea3cd9cfb08369dffcd"><div class="ttname"><a href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">itype::book</a></div><div class="ttdeci">cata::value_ptr&lt; islot_book &gt; book</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01203">itype.h:1203</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="skill_8cpp_source.html#l00407">SkillLevel::can_train()</a>, <a class="el" href="character_8cpp_source.html#l03441">Character::get_knowledge_level()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l03423">Character::get_skill_level_object()</a>, <a class="el" href="classCharacter.html#aa3ff3d07714ad0bda67eca1d98516f9c">Character::has_identified()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01769">is_valid_book()</a>, <a class="el" href="skill_8h_source.html#l00162">SkillLevel::knowledgeExperience()</a>, <a class="el" href="skill_8h_source.html#l00154">SkillLevel::knowledgeLevel()</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

</div>
</div>
<a id="a455b6cbf356c68611406d97c9ea47d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455b6cbf356c68611406d97c9ea47d06">&#9670;&nbsp;</a></span>get_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="activity__type_8h.html#a61b219d1f1a69a8d5e8af6b500f09354">activity_id</a> read_activity_actor::get_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return the activity id of the corresponding activity. </p>

<p>Implements <a class="el" href="classactivity__actor.html#ac085520515863c449d3326a55bdd66d9">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00452">452</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                              {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">activity_id</a>( <span class="stringliteral">&quot;ACT_READ&quot;</span> );</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">cata_variant_type::activity_id</a></div><div class="ttdeci">@ activity_id</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4af8a3193ab0978f2ab82a5007fa1a9e5e">activity_id</a>.</p>

</div>
</div>
<a id="acb91346052ac55b51ea7d8d8c709b451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb91346052ac55b51ea7d8d8c709b451">&#9670;&nbsp;</a></span>npc_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::npc_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnpc.html">npc</a> &amp;&#160;</td>
          <td class="paramname"><em>learner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02115">2115</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;{</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_book&gt;</a> &amp;islotbook = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;skill = islotbook-&gt;skill;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <span class="comment">// NPCs don&#39;t need to identify the book or learn recipes yet.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="comment">// NPCs don&#39;t read to other NPCs yet.</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">display_messages</a> = learner.<a class="code" href="classnpc.html#aef82c9fb32b160e16ace84676297d2b5">get_fac_id</a>() == <a class="code" href="activity__actor_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a> &amp;&amp;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                                  <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( learner );</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> book_fun = learner.<a class="code" href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">book_fun_for</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, learner );</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keywordflow">if</span>( book_fun != 0 ) {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="comment">// Fun bonus is no longer calculated here.</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        learner.<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a0b93f8838c29984346bf03493821db75">MORALE_BOOK</a>,</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                            book_fun * 5, book_fun * 15,</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                            1_hours, 30_minutes, <span class="keyword">true</span>,</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                            <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ab01829202610bd64d462189e825462b2">mark_chapter_as_read</a>( learner );</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="keywordflow">if</span>( skill &amp;&amp;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        learner.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( skill ) &lt; islotbook-&gt;level &amp;&amp;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        learner.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( skill ).<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() ) {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160; </div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <a class="code" href="classSkillLevel.html">SkillLevel</a> &amp;skill_level = learner.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( skill );</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        std::string skill_name = skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> originalSkillLevel = skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>();</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <a class="code" href="classread__activity__actor.html#a780045e7ade36e1f2e5356092c7ccab3">read_book</a>( learner, islotbook, skill_level, 1.0 );</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> newSkillLevel = skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>();</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">if</span>( newSkillLevel != originalSkillLevel ) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32">event_type::gains_skill_level</a>&gt;(</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                learner.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), skill, skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>() );</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">display_messages</a> ) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s increases their %s level.&quot;</span> ), learner.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(),</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                         skill_name );</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;            }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160; </div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">display_messages</a> ) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s learns a little about %s!&quot;</span> ), learner.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(),</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                     skill_name );</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        }</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160; </div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">display_messages</a> &amp;&amp;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            ( ( skill_level == islotbook-&gt;level || !skill_level.<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() ) ||</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;              ( learner.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="activity__actor_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a> ) &amp;&amp; !learner.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="activity__actor_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) &amp;&amp;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 25 ) ) ) ) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can no longer learn from %s.&quot;</span> ), learner.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(),</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                     <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">display_messages</a> &amp;&amp; skill ) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can no longer learn from %s.&quot;</span> ), learner.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(),</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                 <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="comment">// read non-skill books only once</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !skill ) {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a1d165daff78c283cec6eb4197cb9a4a7"><div class="ttname"><a href="activity__actor_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a></div><div class="ttdeci">static const efftype_id effect_took_thorazine(&quot;took_thorazine&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_a33041f424d0dc4a08128c7f3a4f32c26"><div class="ttname"><a href="activity__actor_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a></div><div class="ttdeci">static const faction_id faction_your_followers(&quot;your_followers&quot;)</div></div>
<div class="ttc" id="aactivity__actor_8cpp_html_af2d313b1132870a819487a4e4fd5e6c1"><div class="ttname"><a href="activity__actor_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a></div><div class="ttdeci">static const trait_id trait_SCHIZOPHRENIC(&quot;SCHIZOPHRENIC&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a30822b2d5fb0dfa613aed0043f494c66"><div class="ttname"><a href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">Character::book_fun_for</a></div><div class="ttdeci">int book_fun_for(const item &amp;book, const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11840">character.cpp:11840</a></div></div>
<div class="ttc" id="aclassCharacter_html_a906192bd3a5f29a61ee12695e18d2eb5"><div class="ttname"><a href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_avatar=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11397">character.cpp:11397</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassitem_html_ab01829202610bd64d462189e825462b2"><div class="ttname"><a href="classitem.html#ab01829202610bd64d462189e825462b2">item::mark_chapter_as_read</a></div><div class="ttdeci">void mark_chapter_as_read(const Character &amp;u)</div><div class="ttdoc">Mark one chapter of the book as read by the given player.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10274">item.cpp:10274</a></div></div>
<div class="ttc" id="aclassitem_html_abfb7ed1fed5f72c532192eb33e6c4962"><div class="ttname"><a href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14449">item.cpp:14449</a></div></div>
<div class="ttc" id="aclassnpc_html_aef82c9fb32b160e16ace84676297d2b5"><div class="ttname"><a href="classnpc.html#aef82c9fb32b160e16ace84676297d2b5">npc::get_fac_id</a></div><div class="ttdeci">faction_id get_fac_id() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00771">npc.cpp:771</a></div></div>
<div class="ttc" id="aclassread__activity__actor_html_a780045e7ade36e1f2e5356092c7ccab3"><div class="ttname"><a href="classread__activity__actor.html#a780045e7ade36e1f2e5356092c7ccab3">read_activity_actor::read_book</a></div><div class="ttdeci">static void read_book(Character &amp;learner, const cata::value_ptr&lt; islot_book &gt; &amp;islotbook, SkillLevel &amp;skill_level, double penalty)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l01882">activity_actor.cpp:1882</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32">event_type::gains_skill_level</a></div><div class="ttdeci">@ gains_skill_level</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a0b93f8838c29984346bf03493821db75"><div class="ttname"><a href="morale__types_8cpp.html#a0b93f8838c29984346bf03493821db75">MORALE_BOOK</a></div><div class="ttdeci">const morale_type MORALE_BOOK(&quot;morale_book&quot;)</div></div>
<div class="ttc" id="anamespaceMessages_html_a68f4ec7df01cb2016b7215ea5aad0b77"><div class="ttname"><a href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">Messages::display_messages</a></div><div class="ttdeci">void display_messages()</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00914">messages.cpp:914</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="character_8cpp_source.html#l11840">Character::book_fun_for()</a>, <a class="el" href="skill_8cpp_source.html#l00407">SkillLevel::can_train()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="messages_8cpp_source.html#l00914">Messages::display_messages()</a>, <a class="el" href="activity__actor_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a>, <a class="el" href="activity__actor_8cpp.html#a33041f424d0dc4a08128c7f3a4f32c26">faction_your_followers</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32">gains_skill_level</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="npc_8cpp_source.html#l00771">npc::get_fac_id()</a>, <a class="el" href="character_8cpp_source.html#l03441">Character::get_knowledge_level()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l03423">Character::get_skill_level_object()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="skill_8h_source.html#l00154">SkillLevel::knowledgeLevel()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l10274">item::mark_chapter_as_read()</a>, <a class="el" href="morale__types_8cpp.html#a0b93f8838c29984346bf03493821db75">MORALE_BOOK</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01882">read_book()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="activity__actor_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="item_8cpp_source.html#l14449">item::type_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>.</p>

</div>
</div>
<a id="ae4b12080ca308e23812c487ee13f9bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4b12080ca308e23812c487ee13f9bbe">&#9670;&nbsp;</a></span>player_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::player_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l01913">1913</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;{</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        you.<a class="code" href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">identify</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    }</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    std::vector&lt;std::string&gt; fail_messages;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *reader = you.<a class="code" href="classCharacter.html#a66aab249399aba9fc327965b92e0262c">get_book_reader</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, fail_messages );</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span>( reader == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="comment">// We can&#39;t read, and neither can our followers</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;reason : fail_messages ) {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, reason );</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_book&gt;</a> &amp;islotbook = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;skill = islotbook-&gt;skill;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    std::vector&lt;std::string&gt; little_learned;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    std::vector&lt;std::string&gt; cant_learn;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; </div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    std::vector&lt;Character *&gt; learners;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCharacter.html">Character</a> *learner : you.<a class="code" href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">get_crafting_helpers</a>() ) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="keyword">const</span> <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7">book_mastery</a> mastery = learner-&gt;get_book_mastery( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> morale_req = learner-&gt;fun_to_read( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) || learner-&gt;has_morale_to_read();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordflow">if</span>( learner-&gt;is_deaf() &amp;&amp; learner != reader ) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <span class="keywordflow">if</span>( <span class="comment">// fun readers</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            ( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">book_mastery::MASTERED</a> &amp;&amp; learner-&gt;fun_to_read( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) )</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <span class="comment">// reading for experience</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            || ( mastery == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">book_mastery::LEARNING</a> &amp;&amp; morale_req )</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        ) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            learners.push_back( learner );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">// caller should check if player</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="comment">// can understand the book</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    learners.push_back( you.<a class="code" href="classCharacter.html#a01a7950e28e24252e372d7e74078e12f">as_character</a>() );</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="comment">// Characters can move while learning from a book</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="comment">// Check ID of all learners to avoid</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="comment">// getting stuck in an infinite loop</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordtype">bool</span> learner_left = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCharacter.html">Character</a> *learner : learners ) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="keywordtype">double</span> penalty = 1.0;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> reading_for_skill =</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            learner-&gt;get_book_mastery( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) == <a class="code" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">book_mastery::LEARNING</a>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> book_fun = learner-&gt;book_fun_for( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, *learner );</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordflow">if</span>( book_fun != 0 ) {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            <span class="comment">// Fun bonus is no longer calculated here.</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            learner-&gt;add_morale( <a class="code" href="morale__types_8cpp.html#a0b93f8838c29984346bf03493821db75">MORALE_BOOK</a>,</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                                 book_fun * 5, book_fun * 15,</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                                 1_hours, 30_minutes, <span class="keyword">true</span>,</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                                 <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ab01829202610bd64d462189e825462b2">mark_chapter_as_read</a>( *learner );</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keywordflow">if</span>( reading_for_skill ) {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            <span class="keywordflow">if</span>( !learner-&gt;is_avatar() ) {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> read_time = you.<a class="code" href="classCharacter.html#a7bdec5b3c9990b8c7232796641915728">time_to_read</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, *reader, learner );</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                penalty = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a> ) / to_moves&lt;int&gt;( read_time );</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            }</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            <span class="keywordflow">continue</span>;   <span class="comment">// reading for fun</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="keywordflow">if</span>( skill &amp;&amp;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            learner-&gt;get_knowledge_level( skill ) &lt; islotbook-&gt;level &amp;&amp;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            learner-&gt;get_skill_level_object( skill ).can_train() ) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            <a class="code" href="classSkillLevel.html">SkillLevel</a> &amp;skill_level = learner-&gt;get_skill_level_object( skill );</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            std::string skill_name = skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>();</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> originalSkillLevel = skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <a class="code" href="classread__activity__actor.html#a780045e7ade36e1f2e5356092c7ccab3">read_book</a>( *learner, islotbook, skill_level, penalty );</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> newSkillLevel = skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>();</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="comment">// levels up the skill</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">if</span>( newSkillLevel != originalSkillLevel ) {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32">event_type::gains_skill_level</a>&gt;(</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                    learner-&gt;getID(), skill, skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>() );</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                <span class="keywordflow">if</span>( learner-&gt;is_avatar() ) {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your theoretical knowledge of %s increases to level %d.&quot;</span> ), skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(),</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                             originalSkillLevel + 1 );</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s increases their %s knowledge.&quot;</span> ), learner-&gt;disp_name(),</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                             skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() );</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="keywordflow">if</span>( learner-&gt;getID().get_value() == <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> ) {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                    <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                <span class="keywordflow">if</span>( learner-&gt;is_avatar() ) {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You learn a little about %s!  (%d%%)&quot;</span> ), skill_name,</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                             skill_level.<a class="code" href="classSkillLevel.html#a6f8aeea8578dd90ccbd56ed7946521b6">knowledgeExperience</a>() );</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                    little_learned.push_back( learner-&gt;disp_name() );</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                }</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160; </div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <span class="keywordflow">if</span>( ( skill_level == islotbook-&gt;level || !skill_level.<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() ) ||</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                ( learner-&gt;has_trait( <a class="code" href="activity__actor_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a> ) &amp;&amp; !learner-&gt;has_effect( <a class="code" href="activity__actor_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) &amp;&amp;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                  <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 25 ) ) ) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                <span class="keywordflow">if</span>( learner-&gt;is_avatar() ) {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can no longer learn from %s.&quot;</span> ), <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                    cant_learn.push_back( learner-&gt;disp_name() );</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <span class="keywordflow">if</span>( learner_left &amp;&amp; learner-&gt;getID().get_value() == <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> ) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            learner_left = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        }</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    }   <span class="comment">// end for all learners</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span>( little_learned.size() == 1 ) {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s learns a little about %s!&quot;</span> ), little_learned.begin()-&gt;c_str(),</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                 skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() );</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !little_learned.empty() ) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keyword">const</span> std::string little_learned_msg = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( little_learned );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s learn a little about %s!&quot;</span> ), little_learned_msg, skill.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() );</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">if</span>( !cant_learn.empty() ) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacePATH__INFO.html#a7d99e469795b55a54109ad70a3313d80">names</a> = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( cant_learn );</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s can no longer learn from %s.&quot;</span> ), <a class="code" href="namespacePATH__INFO.html#a7d99e469795b55a54109ad70a3313d80">names</a>, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    }</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="comment">// read non-skill books only once</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="keywordflow">if</span>( learner_left || !skill ) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7">book_mastery</a></div><div class="ttdeci">book_mastery</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00452">character.h:452</a></div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">book_mastery::MASTERED</a></div><div class="ttdeci">@ MASTERED</div></div>
<div class="ttc" id="acharacter_8h_html_a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d"><div class="ttname"><a href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">book_mastery::LEARNING</a></div><div class="ttdeci">@ LEARNING</div></div>
<div class="ttc" id="aclassCharacter_html_a01a7950e28e24252e372d7e74078e12f"><div class="ttname"><a href="classCharacter.html#a01a7950e28e24252e372d7e74078e12f">Character::as_character</a></div><div class="ttdeci">Character * as_character() override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00532">character.h:532</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6c34c8584d08676678b5001a74de77dc"><div class="ttname"><a href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">Character::get_crafting_helpers</a></div><div class="ttdeci">std::vector&lt; Character * &gt; get_crafting_helpers() const</div><div class="ttdoc">Return nearby Characters ready and willing to help with crafting.</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l03051">crafting.cpp:3051</a></div></div>
<div class="ttc" id="aclassavatar_html_a38a6b29bff4c2170263d00ea3822a715"><div class="ttname"><a href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">avatar::identify</a></div><div class="ttdeci">void identify(const item &amp;item) override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00743">avatar.cpp:743</a></div></div>
<div class="ttc" id="aclassavatar_html_a6a1fb5db7eeb5cd2c973318ed9546f7c"><div class="ttname"><a href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">avatar::has_identified</a></div><div class="ttdeci">bool has_identified(const itype_id &amp;item_id) const override</div><div class="ttdoc">Note that we've read a book at least once.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00738">avatar.cpp:738</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a7d99e469795b55a54109ad70a3313d80"><div class="ttname"><a href="namespacePATH__INFO.html#a7d99e469795b55a54109ad70a3313d80">PATH_INFO::names</a></div><div class="ttdeci">cata_path names()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00530">path_info.cpp:530</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8h_source.html#l00532">Character::as_character()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="itype_8h_source.html#l01203">itype::book</a>, <a class="el" href="skill_8cpp_source.html#l00407">SkillLevel::can_train()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="activity__actor_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a>, <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac2fd01db8c4e7474a4b3ce771c932e32">gains_skill_level</a>, <a class="el" href="character_8cpp_source.html#l12130">Character::get_book_reader()</a>, <a class="el" href="crafting_8cpp_source.html#l03051">Character::get_crafting_helpers()</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="avatar_8cpp_source.html#l00738">avatar::has_identified()</a>, <a class="el" href="avatar_8cpp_source.html#l00743">avatar::identify()</a>, <a class="el" href="skill_8h_source.html#l00162">SkillLevel::knowledgeExperience()</a>, <a class="el" href="skill_8h_source.html#l00154">SkillLevel::knowledgeLevel()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00483">learner_id</a>, <a class="el" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7ac4f6b1a2cc8345c11892ca0f6312b55d">LEARNING</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l10274">item::mark_chapter_as_read()</a>, <a class="el" href="character_8h.html#a503080dcbe1133be58c7b354c30ab1e7aac7b57393b689ab2dc4c53336a3c60c3">MASTERED</a>, <a class="el" href="morale__types_8cpp.html#a0b93f8838c29984346bf03493821db75">MORALE_BOOK</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00473">moves_total</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="path__info_8cpp_source.html#l00530">PATH_INFO::names()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01882">read_book()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="character_8cpp_source.html#l12235">Character::time_to_read()</a>, <a class="el" href="activity__actor_8cpp.html#af2d313b1132870a819487a4e4fd5e6c1">trait_SCHIZOPHRENIC</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l14449">item::type_name()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>.</p>

</div>
</div>
<a id="ad0d74a26367b361a9a8ba2dc80b8a84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0d74a26367b361a9a8ba2dc80b8a84e">&#9670;&nbsp;</a></span>player_readma()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::player_readma </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02063">2063</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;{</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="comment">// NPCs can&#39;t learn martial arts from manuals (yet).</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        you.<a class="code" href="classavatar.html#a38a6b29bff4c2170263d00ea3822a715">identify</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="comment">// std::map&lt;std::string, use_function&gt;::const_iterator</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keyword">auto</span> mart_iter = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.find( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> );</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span>( mart_iter == <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.end() ) {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ACT_READ MARTIAL ARTS BOOK HAS NO MARTIAL ART&quot;</span> );</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> style_to_learn = <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <a class="code" href="classstring__id.html">skill_id</a> skill_used = style_to_learn-&gt;<a class="code" href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">primary_skill</a>;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160; </div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="keywordtype">int</span> difficulty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, style_to_learn-&gt;<a class="code" href="classmartialart.html#a71ee6f7ce4f0e05398fc234174670485">learn_difficulty</a> );</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    difficulty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, 20 + difficulty * 2 - you.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( skill_used ) * 2 );</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;Chance to learn one in: %d&quot;</span>, difficulty );</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( difficulty ) ) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="comment">// learn martial art</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        mart_iter-&gt;second.call( &amp;you, *<a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> ) {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">switch</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 5 ) ) {</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You train the moves according to the book, but can&#39;t get a grasp of the style, so you start from the beginning.&quot;</span> ) );</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This martial art is not easy to grasp.  You start training the moves from the beginning.&quot;</span> ) );</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You decide to read the manual and train even more.  In martial arts, patience leads to mastery.&quot;</span> ) );</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            <span class="keywordflow">case</span> 4: <span class="comment">// intentionally empty</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try again.  This training will finally pay off.&quot;</span> ) );</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You train for a while.&quot;</span> ) );</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassmartialart_html_a71ee6f7ce4f0e05398fc234174670485"><div class="ttname"><a href="classmartialart.html#a71ee6f7ce4f0e05398fc234174670485">martialart::learn_difficulty</a></div><div class="ttdeci">int learn_difficulty</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00374">martialarts.h:374</a></div></div>
<div class="ttc" id="aclassmartialart_html_aaafaa92848ceeac9e66c6cbc28e38dd5"><div class="ttname"><a href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">martialart::primary_skill</a></div><div class="ttdeci">skill_id primary_skill</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00372">martialarts.h:372</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_ad99254fef8817d713c1577c9f7021eb0"><div class="ttname"><a href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a></div><div class="ttdeci">matype_id martial_art_learned_from(const itype &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00109">martialarts.cpp:109</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="debug_8h_source.html#l00242">debugmode::DF_ACT_READ</a>, <a class="el" href="character_8cpp_source.html#l03441">Character::get_knowledge_level()</a>, <a class="el" href="avatar_8cpp_source.html#l00738">avatar::has_identified()</a>, <a class="el" href="avatar_8cpp_source.html#l00743">avatar::identify()</a>, <a class="el" href="martialarts_8h_source.html#l00374">martialart::learn_difficulty</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="martialarts_8cpp_source.html#l00109">martial_art_learned_from()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="martialarts_8h_source.html#l00372">martialart::primary_skill</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>.</p>

</div>
</div>
<a id="a780045e7ade36e1f2e5356092c7ccab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780045e7ade36e1f2e5356092c7ccab3">&#9670;&nbsp;</a></span>read_book()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void read_activity_actor::read_book </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>learner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcata_1_1value__ptr.html">cata::value_ptr</a>&lt; <a class="el" href="structislot__book.html">islot_book</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>islotbook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSkillLevel.html">SkillLevel</a> &amp;&#160;</td>
          <td class="paramname"><em>skill_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>penalty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
Intelligence increases reading comprehension 
<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l01882">1882</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;{</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> originalSkillLevel = skill_level.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>();</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">// Calculate experience gained</span><span class="comment"></span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">    /** @EFFECT_INT increases reading comprehension */</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="comment">// Enhanced Memory Banks modestly boosts experience</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordtype">int</span> min_ex = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, to_minutes&lt;int&gt;( islotbook-&gt;time ) / 10 + learner.<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() / 4 );</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordtype">int</span> max_ex = to_minutes&lt;int&gt;( islotbook-&gt;time ) / 5 + learner.<a class="code" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() / 2 - originalSkillLevel;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    min_ex = learner.<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a78317b291919b564b1b985559126e87e">enchant_vals::mod::READING_EXP</a>, min_ex );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    min_ex = std::lround( learner.<a class="code" href="classCharacter.html#aaef69a97be3cf8ddca64a0174467a86c">adjust_for_focus</a>( min_ex ) );</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    max_ex = std::lround( learner.<a class="code" href="classCharacter.html#aaef69a97be3cf8ddca64a0174467a86c">adjust_for_focus</a>( max_ex ) );</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    max_ex = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( max_ex, 2, 10 );</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    max_ex = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( min_ex, max_ex );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    min_ex *= ( originalSkillLevel + 1 ) * penalty;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    min_ex = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( min_ex, 1 );</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    max_ex *= ( originalSkillLevel + 1 ) * penalty;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    max_ex = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( min_ex, max_ex );</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;%s read exp: min_ex %d; max_ex %d&quot;</span>,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                   learner.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>(), min_ex, max_ex );</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    skill_level.<a class="code" href="classSkillLevel.html#a79482edb1e2545be3533e23457b91db7">readBook</a>( min_ex, max_ex, islotbook-&gt;level );</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="aclassCharacter_html_a588d5cc1d729490552fe03b006685ae5"><div class="ttname"><a href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">Character::get_int</a></div><div class="ttdeci">int get_int() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04139">character.cpp:4139</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaef69a97be3cf8ddca64a0174467a86c"><div class="ttname"><a href="classCharacter.html#aaef69a97be3cf8ddca64a0174467a86c">Character::adjust_for_focus</a></div><div class="ttdeci">float adjust_for_focus(float amount) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10062">character.cpp:10062</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a79482edb1e2545be3533e23457b91db7"><div class="ttname"><a href="classSkillLevel.html#a79482edb1e2545be3533e23457b91db7">SkillLevel::readBook</a></div><div class="ttdeci">void readBook(int minimumGain, int maximumGain, int maximumLevel=-1)</div><div class="ttdef"><b>Definition:</b> <a href="skill_8cpp_source.html#l00398">skill.cpp:398</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a78317b291919b564b1b985559126e87e"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a78317b291919b564b1b985559126e87e">enchant_vals::mod::READING_EXP</a></div><div class="ttdeci">@ READING_EXP</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="character_8cpp_source.html#l10062">Character::adjust_for_focus()</a>, <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="debug_8h_source.html#l00242">debugmode::DF_ACT_READ</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="character_8h_source.html#l04105">Character::enchantment_cache</a>, <a class="el" href="character_8cpp_source.html#l04139">Character::get_int()</a>, <a class="el" href="skill_8h_source.html#l00154">SkillLevel::knowledgeLevel()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="skill_8cpp_source.html#l00398">SkillLevel::readBook()</a>, and <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a78317b291919b564b1b985559126e87e">enchant_vals::READING_EXP</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02115">npc_read()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>.</p>

</div>
</div>
<a id="af61aeb5fcf90867aae92af51f297f6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61aeb5fcf90867aae92af51f297f6c9">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void read_activity_actor::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>jsout</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Must write any custom members of the derived class to json Note that a static member function for deserialization must also be created and added to the <code>activity_actor_deserializers</code> hashmap in <a class="el" href="activity__actor_8cpp.html">activity_actor.cpp</a>. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a3a5855ba3c1236acfe2be439522997cd">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l02297">2297</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;{</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;moves_total&quot;</span>, <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a> );</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="activity__actor_8cpp.html#a0625d11188ced6e08cffdb78bcb46241">is_valid_book</a>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> ) ) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;book&quot;</span>, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    }</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a> ) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;ereader&quot;</span>, <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a> );</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;using_ereader&quot;</span>, <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> );</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;continuous&quot;</span>, <a class="code" href="classread__activity__actor.html#adde79528ecaf35ba86cd952e0eedbf01">continuous</a> );</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;learner_id&quot;</span>, <a class="code" href="classread__activity__actor.html#acede550724fb2036df661e7e9404b7ee">learner_id</a> );</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    jsout.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00482">continuous</a>, <a class="el" href="json_8cpp_source.html#l02327">JsonOut::end_object()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00478">ereader</a>, <a class="el" href="activity__actor_8cpp_source.html#l01769">is_valid_book()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00483">learner_id</a>, <a class="el" href="json_8cpp_source.html#l02422">JsonOut::member()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00473">moves_total</a>, <a class="el" href="json_8cpp_source.html#l02316">JsonOut::start_object()</a>, and <a class="el" href="activity__actor__definitions_8h_source.html#l00479">using_ereader</a>.</p>

</div>
</div>
<a id="ac6881922568a7bb4060fc59df896c846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6881922568a7bb4060fc59df896c846">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void read_activity_actor::start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer__activity.html">player_activity</a> &amp;&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called once at the start of the activity. </p>
<p>This may be used to preform setup actions and/or set <a class="el" href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61" title="The number of moves remaining in this activity before it is complete.">player_activity::moves_left</a>/moves_total. </p>

<p>Implements <a class="el" href="classactivity__actor.html#a7a6d2b0ca0560dfca09ff8919cd9f44a">activity_actor</a>.</p>

<p class="definition">Definition at line <a class="el" href="activity__actor_8cpp_source.html#l01791">1791</a> of file <a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;{</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="activity__actor_8cpp.html#a522411a41f69c1abd6ae12614aaf05f4">cancel_if_book_invalid</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>, who ) ) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="comment">// book item_location must be of type character</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="comment">// or else there will be item_location errors while loading</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() != <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a> ) {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> = <a class="code" href="classitem__location.html">item_location</a>( who, <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() );</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> = !!<a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160; </div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <a class="code" href="classread__activity__actor.html#acc8e067f973e68a442d2fe37fe2a0e04">bktype</a> = <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a>-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.count( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) ?</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;             <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">book_type::martial_art</a> : <a class="code" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">book_type::normal</a>;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="comment">// push copy of book for focus calculation</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="comment">// avatar::update_mental_focus and avatar::calc_focus_equilibrium</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.targets.push_back( <a class="code" href="classread__activity__actor.html#a8d2a5102f9d0451e239f957422dd4f98">book</a> );</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2aa14f51d6f49b3fb0abfb6603a02fcc8f">debugmode::DF_ACT_READ</a>, <span class="stringliteral">&quot;reading time = %s&quot;</span>,</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                   <a class="code" href="calendar_8cpp.html#a605b73d77fee1cb3c3cc3b32c45fad47">to_string_writable</a>( <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a> ) ) );</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="comment">// starting the activity should cost a charge to boot up the ebook app</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classread__activity__actor.html#ae7539cc3269a3ed8f4d328d964427faf">using_ereader</a> ) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( <a class="code" href="classread__activity__actor.html#a35907555e8fbd65bedb21abcbfff65ec">ereader</a>-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), who.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), &amp;who );</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_total = <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.moves_left = <a class="code" href="classread__activity__actor.html#a5cb71a9f750d607c80f39f5400b9a497">moves_total</a>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::type::character</a></div><div class="ttdeci">@ character</div></div>
<div class="ttc" id="aclassitem__location_html_a0f73e1c094e3e36d6455d46436e299a9"><div class="ttname"><a href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">item_location::where</a></div><div class="ttdeci">type where() const</div><div class="ttdoc">Returns the type of location where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01001">item_location.cpp:1001</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00475">bktype</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00474">book</a>, <a class="el" href="activity__actor_8cpp_source.html#l01778">cancel_if_book_invalid()</a>, <a class="el" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888daa956161a69928cd130a889b88082fb6e">item_location::character</a>, <a class="el" href="debug_8h_source.html#l00242">debugmode::DF_ACT_READ</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00478">ereader</a>, <a class="el" href="calendar_8h_source.html#l00225">time_duration::from_moves()</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438a121629ec7b95d9ac321e8923f22b7916">martial_art</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00473">moves_total</a>, <a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438afea087517c26fadd409bd4b9dc642555">normal</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00626">to_string_writable()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="itype_8h_source.html#l01312">itype::use_methods</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00479">using_ereader</a>, and <a class="el" href="item__location_8cpp_source.html#l01001">item_location::where()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="acc8e067f973e68a442d2fe37fe2a0e04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8e067f973e68a442d2fe37fe2a0e04">&#9670;&nbsp;</a></span>bktype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;<a class="el" href="classread__activity__actor.html#a011510db2237653ba72609e2a2dcd438">book_type</a>&gt; read_activity_actor::bktype</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00475">475</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l01824">do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01791">start()</a>.</p>

</div>
</div>
<a id="a8d2a5102f9d0451e239f957422dd4f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d2a5102f9d0451e239f957422dd4f98">&#9670;&nbsp;</a></span>book</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem__location.html">item_location</a> read_activity_actor::book</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00474">474</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02254">can_resume_with_internal()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01824">do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02271">get_progress_message()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02115">npc_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02063">player_readma()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01791">start()</a>.</p>

</div>
</div>
<a id="adde79528ecaf35ba86cd952e0eedbf01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde79528ecaf35ba86cd952e0eedbf01">&#9670;&nbsp;</a></span>continuous</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::continuous = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00482">482</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02254">can_resume_with_internal()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02115">npc_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02063">player_readma()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>.</p>

</div>
</div>
<a id="a35907555e8fbd65bedb21abcbfff65ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35907555e8fbd65bedb21abcbfff65ec">&#9670;&nbsp;</a></span>ereader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem__location.html">item_location</a> read_activity_actor::ereader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00478">478</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01824">do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01791">start()</a>.</p>

</div>
</div>
<a id="acede550724fb2036df661e7e9404b7ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acede550724fb2036df661e7e9404b7ee">&#9670;&nbsp;</a></span>learner_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int read_activity_actor::learner_id = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00483">483</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02254">can_resume_with_internal()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>.</p>

</div>
</div>
<a id="a5cb71a9f750d607c80f39f5400b9a497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb71a9f750d607c80f39f5400b9a497">&#9670;&nbsp;</a></span>moves_total</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int read_activity_actor::moves_total</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00473">473</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02183">finish()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01913">player_read()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01791">start()</a>.</p>

</div>
</div>
<a id="ae7539cc3269a3ed8f4d328d964427faf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7539cc3269a3ed8f4d328d964427faf">&#9670;&nbsp;</a></span>using_ereader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_activity_actor::using_ereader = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="activity__actor__definitions_8h_source.html#l00479">479</a> of file <a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l02315">deserialize()</a>, <a class="el" href="activity__actor_8cpp_source.html#l01824">do_turn()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02297">serialize()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l01791">start()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a></li>
<li>src/<a class="el" href="activity__actor_8cpp_source.html">activity_actor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:43 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
